!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}function n(e,t){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var r,i,o,a,s=!1;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function l(){r={},i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,s=u(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(s[c]=n[c]);if(i){r=i(n);for(var f=0;f<r.length;f++)a.call(n,r[f])&&(s[r[f]]=n[r[f]])}}return s}}function c(){return s||(s=!0,l()),r}var f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M,F,N,O,$,T,z,R,P,L,B,I,j,U,q,W,H,V,G,Y,X,Q,J,K,Z,ee,te,ne,re,ie=!1;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function se(){}function ue(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function le(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)F.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:h,type:e,key:o,ref:a,props:i,_owner:M.current}}function ce(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}function fe(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function de(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case h:case p:a=!0}}if(a)return i=i(a=e),e=""===r?"."+fe(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),de(i,t,n,"",(function(e){return e}))):null!=i&&(ce(i)&&(i=function(e,t){return{$$typeof:h,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+fe(o=e[s],s);a+=de(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=de(o=o.value,t,n,u=r+fe(o,s++),i);else if("object"===o)throw t=""+e,Error(oe(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function he(e,t,n){if(null==e)return e;var r=[],i=0;return de(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function pe(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}function me(){var e=$.current;if(null===e)throw Error(oe(321));return e}function ge(){return ie||(ie=!0,f={},d=c(),h=60103,p=60106,m=60107,f.Fragment=m,g=60108,f.StrictMode=g,y=60114,f.Profiler=y,v=60109,b=60110,x=60112,w=60113,f.Suspense=w,_=60115,k=60116,"function"==typeof Symbol&&Symbol.for&&(E=Symbol.for,h=E("react.element"),p=E("react.portal"),m=E("react.fragment"),f.Fragment=m,g=E("react.strict_mode"),f.StrictMode=g,y=E("react.profiler"),f.Profiler=y,v=E("react.provider"),b=E("react.context"),x=E("react.forward_ref"),w=E("react.suspense"),f.Suspense=w,_=E("react.memo"),k=E("react.lazy")),S="function"==typeof Symbol&&Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={},ae.prototype.isReactComponent={},ae.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(oe(85));this.updater.enqueueSetState(this,e,t,"setState")},ae.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},se.prototype=ae.prototype,(D=ue.prototype=new se).constructor=ue,d(D,ae.prototype),D.isPureReactComponent=!0,M={current:null},F=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},O=/\/+/g,T={ReactCurrentDispatcher:$={current:null},ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:d},z={map:he,forEach:function(e,t,n){he(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return he(e,(function(){t++})),t},toArray:function(e){return he(e,(function(e){return e}))||[]},only:function(e){if(!ce(e))throw Error(oe(143));return e}},f.Children=z,R=ae,f.Component=R,P=ue,f.PureComponent=P,L=T,f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,B=function(e,t,n){if(null==e)throw Error(oe(267,e));var r=d({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=M.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)F.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:h,type:e.type,key:i,ref:o,props:r,_owner:a}},f.cloneElement=B,I=function(e,t){return void 0===t&&(t=null),(e={$$typeof:b,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:e},e.Consumer=e},f.createContext=I,j=le,f.createElement=j,U=function(e){var t=le.bind(null,e);return t.type=e,t},f.createFactory=U,q=function(){return{current:null}},f.createRef=q,W=function(e){return{$$typeof:x,render:e}},f.forwardRef=W,H=ce,f.isValidElement=H,V=function(e){return{$$typeof:k,_payload:{_status:-1,_result:e},_init:pe}},f.lazy=V,G=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},f.memo=G,Y=function(e,t){return me().useCallback(e,t)},f.useCallback=Y,X=function(e,t){return me().useContext(e,t)},f.useContext=X,Q=function(){},f.useDebugValue=Q,J=function(e,t){return me().useEffect(e,t)},f.useEffect=J,K=function(e,t,n){return me().useImperativeHandle(e,t,n)},f.useImperativeHandle=K,Z=function(e,t){return me().useLayoutEffect(e,t)},f.useLayoutEffect=Z,ee=function(e,t){return me().useMemo(e,t)},f.useMemo=ee,te=function(e,t,n){return me().useReducer(e,t,n)},f.useReducer=te,ne=function(e){return me().useRef(e)},f.useRef=ne,re=function(e){return me().useState(e)},f.useState=re,"17.0.2",f.version="17.0.2"),f}var ye,ve,be=!1;function xe(){return be||(be=!0,ye={},ye=ge(),ve=e(ye)),ye}xe();var we,_e,ke,Ee,Se,Ae,Ce,De,Me,Fe,Ne,Oe,$e,Te,ze,Re,Pe,Le,Be,Ie,je,Ue,qe,We,He,Ve,Ge,Ye,Xe,Qe,Je,Ke,Ze,et,tt,nt,rt,it,ot,at,st,ut,lt,ct=!1;function ft(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<pt(i,t)))break e;e[r]=t,e[n]=i,n=r}}function dt(e){return void 0===(e=e[0])?null:e}function ht(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>pt(a,n))void 0!==u&&0>pt(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>pt(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function pt(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function mt(e){for(var t=dt(Ve);null!==t;){if(null===t.callback)ht(Ve);else{if(!(t.startTime<=e))break;ht(Ve),t.sortIndex=t.expirationTime,ft(He,t)}t=dt(Ve)}}function gt(e){if(Ke=!1,mt(e),!Je)if(null!==dt(He))Je=!0,Se(yt);else{var t=dt(Ve);null!==t&&Ae(gt,t.startTime-e)}}function yt(e,t){Je=!1,Ke&&(Ke=!1,Ce()),Qe=!0;var n=Xe;try{for(mt(t),Ye=dt(He);null!==Ye&&(!(Ye.expirationTime>t)||e&&!_e());){var r=Ye.callback;if("function"==typeof r){Ye.callback=null,Xe=Ye.priorityLevel;var i=r(Ye.expirationTime<=t);t=we(),"function"==typeof i?Ye.callback=i:Ye===dt(He)&&ht(He),mt(t)}else ht(He);Ye=dt(He)}if(null!==Ye)var o=!0;else{var a=dt(Ve);null!==a&&Ae(gt,a.startTime-t),o=!1}return o}finally{Ye=null,Xe=n,Qe=!1}}function vt(){return ct||(ct=!0,Ee={},"object"==typeof performance&&"function"==typeof performance.now?(Me=performance,we=function(){return Me.now()},Ee.unstable_now=we):(Fe=Date,Ne=Fe.now(),we=function(){return Fe.now()-Ne},Ee.unstable_now=we),"undefined"==typeof window||"function"!=typeof MessageChannel?(Oe=null,$e=null,Te=function(){if(null!==Oe)try{var e=we();Oe(!0,e),Oe=null}catch(e){throw setTimeout(Te,0),e}},Se=function(e){null!==Oe?setTimeout(Se,0,e):(Oe=e,setTimeout(Te,0))},Ae=function(e,t){$e=setTimeout(e,t)},Ce=function(){clearTimeout($e)},_e=function(){return!1},Ee.unstable_shouldYield=_e,ke=function(){},De=Ee.unstable_forceFrameRate=ke):(ze=window.setTimeout,Re=window.clearTimeout,"undefined"!=typeof console&&(Pe=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Pe&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Le=!1,Be=null,Ie=-1,je=5,Ue=0,_e=function(){return we()>=Ue},Ee.unstable_shouldYield=_e,De=function(){},ke=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<e?Math.floor(1e3/e):5},Ee.unstable_forceFrameRate=ke,qe=new MessageChannel,We=qe.port2,qe.port1.onmessage=function(){if(null!==Be){var e=we();Ue=e+je;try{Be(!0,e)?We.postMessage(null):(Le=!1,Be=null)}catch(e){throw We.postMessage(null),e}}else Le=!1},Se=function(e){Be=e,Le||(Le=!0,We.postMessage(null))},Ae=function(e,t){Ie=ze((function(){e(we())}),t)},Ce=function(){Re(Ie),Ie=-1}),He=[],Ve=[],Ge=1,Ye=null,Xe=3,Qe=!1,Je=!1,Ke=!1,Ze=De,5,Ee.unstable_IdlePriority=5,1,Ee.unstable_ImmediatePriority=1,4,Ee.unstable_LowPriority=4,3,Ee.unstable_NormalPriority=3,null,Ee.unstable_Profiling=null,2,Ee.unstable_UserBlockingPriority=2,et=function(e){e.callback=null},Ee.unstable_cancelCallback=et,tt=function(){Je||Qe||(Je=!0,Se(yt))},Ee.unstable_continueExecution=tt,nt=function(){return Xe},Ee.unstable_getCurrentPriorityLevel=nt,rt=function(){return dt(He)},Ee.unstable_getFirstCallbackNode=rt,it=function(e){switch(Xe){case 1:case 2:case 3:var t=3;break;default:t=Xe}var n=Xe;Xe=t;try{return e()}finally{Xe=n}},Ee.unstable_next=it,ot=function(){},Ee.unstable_pauseExecution=ot,at=Ze,Ee.unstable_requestPaint=at,st=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=Xe;Xe=e;try{return t()}finally{Xe=n}},Ee.unstable_runWithPriority=st,ut=function(e,t,n){var r=we();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:Ge++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>r?(e.sortIndex=n,ft(Ve,e),null===dt(He)&&e===dt(Ve)&&(Ke?Ce():Ke=!0,Ae(gt,n-r))):(e.sortIndex=i,ft(He,e),Je||Qe||(Je=!0,Se(yt))),e},Ee.unstable_scheduleCallback=ut,lt=function(e){var t=Xe;return function(){var n=Xe;Xe=t;try{return e.apply(this,arguments)}finally{Xe=n}}},Ee.unstable_wrapCallback=lt),Ee}var bt,xt=!1;function wt(){return xt||(xt=!0,bt={},bt=vt()),bt}var _t,kt,Et,St,At,Ct,Dt,Mt,Ft,Nt,Ot,$t,Tt,zt,Rt,Pt,Lt,Bt,It,jt,Ut,qt,Wt,Ht,Vt,Gt,Yt,Xt,Qt,Jt,Kt,Zt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,dn,hn,pn,mn,gn,yn,vn,bn,xn,wn,_n,kn,En,Sn,An,Cn,Dn,Mn,Fn,Nn,On,$n,Tn,zn,Rn,Pn,Ln,Bn,In,jn,Un,qn,Wn,Hn,Vn,Gn,Yn,Xn,Qn,Jn,Kn,Zn,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,fr,dr,hr,pr,mr,gr,yr,vr,br,xr,wr,_r,kr,Er,Sr,Ar,Cr,Dr,Mr,Fr,Nr,Or,$r,Tr,zr,Rr,Pr,Lr,Br,Ir,jr,Ur,qr,Wr,Hr,Vr,Gr,Yr,Xr,Qr,Jr,Kr,Zr,ei,ti,ni,ri,ii,oi,ai,si,ui,li,ci,fi,di,hi,pi,mi,gi,yi,vi,bi,xi,wi,_i,ki,Ei,Si,Ai,Ci,Di,Mi,Fi,Ni,Oi,$i,Ti,zi,Ri,Pi,Li,Bi,Ii,ji,Ui,qi,Wi,Hi,Vi,Gi,Yi,Xi,Qi,Ji,Ki,Zi,eo,to,no,ro,io,oo,ao,so,uo,lo,co,fo,ho,po,mo,go,yo,vo,bo,xo,wo,_o,ko,Eo,So,Ao,Co,Do,Mo,Fo,No,Oo,$o,To,zo,Ro,Po,Lo,Bo,Io,jo,Uo,qo,Wo,Ho,Vo,Go,Yo,Xo,Qo,Jo,Ko,Zo,ea,ta,na,ra,ia,oa,aa,sa,ua,la,ca,fa,da,ha,pa,ma,ga,ya,va,ba,xa,wa,_a,ka,Ea,Sa,Aa,Ca=!1;function Da(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ma(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(At[e]=t,e=0;e<t.length;e++)St.add(t[e])}function Na(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}function Oa(e){return e[1].toUpperCase()}function $a(e,t,n,r){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Mt.call(Nt,e)||!Mt.call(Ft,e)&&(Dt.test(e)?Nt[e]=!0:(Ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ta(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Zt&&e[Zt]||e["@@iterator"])?e:null}function za(e){if(void 0===en)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return"\n"+en+e}function Ra(e,t){if(!e||tn)return"";tn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{tn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function Pa(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=Ra(e.type,!1);case 11:return e=Ra(e.type.render,!1);case 22:return e=Ra(e.type._render,!1);case 1:return e=Ra(e.type,!0);default:return""}}function La(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Pt:return"Fragment";case Rt:return"Portal";case Bt:return"Profiler";case Lt:return"StrictMode";case qt:return"Suspense";case Wt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case jt:return(e.displayName||"Context")+".Consumer";case It:return(e._context.displayName||"Context")+".Provider";case Ut:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ht:return La(e.type);case Gt:return La(e._render);case Vt:t=e._payload,e=e._init;try{return La(e(t))}catch(e){}}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ia(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ja(e){e._valueTracker||(e._valueTracker=function(e){var t=Ia(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ua(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ia(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function qa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Wa(e,t){var n=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ha(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ba(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Va(e,t){null!=(t=t.checked)&&$a(e,"checked",t,!1)}function Ga(e,t){Va(e,t);var n=Ba(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,Ba(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ya(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xa(e,t,n){"number"===t&&qa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Qa(e,t){return e=Et({children:void 0},t),(t=function(e){var t="";return kt.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ja(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ba(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ka(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Da(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Za(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Da(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Da(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ba(n)}}function es(e,t){var n=Ba(t.value),r=Ba(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ts(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ns(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rs(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ns(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function os(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||an.hasOwnProperty(e)&&an[e]?(""+t).trim():t+"px"}function as(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=os(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ss(e,t){if(t){if(un[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Da(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Da(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Da(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Da(62))}}function us(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ls(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function cs(e){if(e=ju(e)){if("function"!=typeof ln)throw Error(Da(280));var t=e.stateNode;t&&(t=qu(t),ln(e.stateNode,e.type,t))}}function fs(e){cn?fn?fn.push(e):fn=[e]:cn=e}function ds(){if(cn){var e=cn,t=fn;if(fn=cn=null,cs(e),t)for(e=0;e<t.length;e++)cs(t[e])}}function hs(e,t){return e(t)}function ps(e,t,n,r,i){return e(t,n,r,i)}function ms(){}function gs(){null===cn&&null===fn||(ms(),ds())}function ys(e,t){var n=e.stateNode;if(null===n)return null;var r=qu(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Da(231,t,typeof n));return n}function vs(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}function bs(e,t,n,r,i,o,a,s,u){yn=!1,vn=null,vs.apply(wn,arguments)}function xs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ws(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _s(e){if(xs(e)!==e)throw Error(Da(188))}function ks(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=xs(e)))throw Error(Da(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _s(i),e;if(o===r)return _s(i),t;o=o.sibling}throw Error(Da(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Da(189))}}if(n.alternate!==r)throw Error(Da(190))}if(3!==n.tag)throw Error(Da(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Es(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}function Ss(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function As(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function Cs(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ss(t,n,r,i,o),null!==t&&(null!==(t=ju(t))&&kn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ds(e){var t=Iu(e.target);if(null!==t){var n=xs(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ws(n)))return e.blockedOn=t,void Sn(e.lanePriority,(function(){wt().unstable_runWithPriority(e.priority,(function(){En(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ms(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ju(n))&&kn(t),e.blockedOn=n,!1;t.shift()}return!0}function Fs(e,t,n){Ms(e)&&n.delete(t)}function Ns(){for(An=!1;0<Cn.length;){var e=Cn[0];if(null!==e.blockedOn){null!==(e=ju(e.blockedOn))&&_n(e);break}for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Cn.shift()}null!==Dn&&Ms(Dn)&&(Dn=null),null!==Mn&&Ms(Mn)&&(Mn=null),null!==Fn&&Ms(Fn)&&(Fn=null),Nn.forEach(Fs),On.forEach(Fs)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,An||(An=!0,wt().unstable_scheduleCallback(wt().unstable_NormalPriority,Ns)))}function $s(e){function t(t){return Os(t,e)}if(0<Cn.length){Os(Cn[0],e);for(var n=1;n<Cn.length;n++){var r=Cn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&Os(Dn,e),null!==Mn&&Os(Mn,e),null!==Fn&&Os(Fn,e),Nn.forEach(t),On.forEach(t),n=0;n<$n.length;n++)(r=$n[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)Ds(n),null===n.blockedOn&&$n.shift()}function Ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function zs(e){if(Rn[e])return Rn[e];if(!zn[e])return e;var t,n=zn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Pn)return Rn[e]=n[t];return e}function Rs(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),qn.set(r,t),Un.set(r,i),Ma(i,[r])}}function Ps(e){if(0!=(1&e))return Hn=15,1;if(0!=(2&e))return Hn=14,2;if(0!=(4&e))return Hn=13,4;var t=24&e;return 0!==t?(Hn=12,t):0!=(32&e)?(Hn=11,32):0!==(t=192&e)?(Hn=10,t):0!=(256&e)?(Hn=9,256):0!==(t=3584&e)?(Hn=8,t):0!=(4096&e)?(Hn=7,4096):0!==(t=4186112&e)?(Hn=6,t):0!==(t=62914560&e)?(Hn=5,t):67108864&e?(Hn=4,67108864):0!=(134217728&e)?(Hn=3,134217728):0!==(t=805306368&e)?(Hn=2,t):0!=(1073741824&e)?(Hn=1,1073741824):(Hn=8,e)}function Ls(e,t){var n=e.pendingLanes;if(0===n)return Hn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Hn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ps(u),i=Hn):0!==(s&=o)&&(r=Ps(s),i=Hn)}else 0!==(o=n&~a)?(r=Ps(o),i=Hn):0!==s&&(r=Ps(s),i=Hn);if(0===r)return 0;if(r=n&((0>(r=31-Vn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ps(t),i<=Hn)return t;Hn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vn(t)),r|=e[n],t&=~i;return r}function Bs(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Is(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=js(24&~t))?Is(10,t):e;case 10:return 0===(e=js(192&~t))?Is(8,t):e;case 8:return 0===(e=js(3584&~t))&&(0===(e=js(4186112&~t))&&(e=512)),e;case 2:return 0===(t=js(805306368&~t))&&(t=268435456),t}throw Error(Da(358,e))}function js(e){return e&-e}function Us(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qs(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vn(t)]=n}function Ws(e){return 0===e?32:31-(Gn(e)/Yn|0)|0}function Hs(e,t,n,r){hn||ms();var i=Gs,o=hn;hn=!0;try{ps(i,e,t,n,r)}finally{(hn=o)||gs()}}function Vs(e,t,n,r){Qn(Xn,Gs.bind(null,e,t,n,r))}function Gs(e,t,n,r){var i;if(Jn)if((i=0==(4&t))&&0<Cn.length&&-1<Tn.indexOf(e))e=Ss(null,e,t,n,r),Cn.push(e);else{var o=Ys(e,t,n,r);if(null===o)i&&As(e,r);else{if(i){if(-1<Tn.indexOf(e))return e=Ss(o,e,t,n,r),void Cn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Dn=Cs(Dn,e,t,n,r,i),!0;case"dragenter":return Mn=Cs(Mn,e,t,n,r,i),!0;case"mouseover":return Fn=Cs(Fn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nn.set(o,Cs(Nn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,On.set(o,Cs(On.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;As(e,r)}Mu(e,t,r,null,n)}}}function Ys(e,t,n,r){var i=ls(r);if(null!==(i=Iu(i))){var o=xs(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=ws(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mu(e,t,r,i,n),null}function Xs(){if(er)return er;var e,t,n=Zn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Js(){return!0}function Ks(){return!1}function Zs(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Js:Ks,this.isPropagationStopped=Ks,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}function eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function tu(){return eu}function nu(e,t){switch(e){case"keyup":return-1!==$r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function ou(e,t,n,r){fs(r),0<(t=Nu(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}function au(e){Eu(e,0)}function su(e){if(Ua(Uu(e)))return e}function uu(e,t){if("change"===e)return t}function lu(){Ur&&(Ur.detachEvent("onpropertychange",cu),qr=Ur=null)}function cu(e){if("value"===e.propertyName&&su(qr)){var t=[];if(ou(t,qr,e,ls(e)),e=au,hn)e(t);else{hn=!0;try{hs(e,t)}finally{hn=!1,gs()}}}}function fu(e,t,n){"focusin"===e?(lu(),qr=n,(Ur=t).attachEvent("onpropertychange",cu)):"focusout"===e&&lu()}function du(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return su(qr)}function hu(e,t){if("click"===e)return su(t)}function pu(e,t){if("input"===e||"change"===e)return su(t)}function mu(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function gu(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Xr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n,r=yu(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yu(r)}}function bu(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?bu(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xu(){for(var e=window,t=qa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=qa((e=t.contentWindow).document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function _u(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ei||null==Jr||Jr!==qa(r)||("selectionStart"in(r=Jr)&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Zr&&gu(Zr,r)||(Zr=r,0<(r=Nu(Kr,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(bs.apply(this,arguments),yn){if(!yn)throw Error(Da(198));var l=vn;yn=!1,vn=null,bn||(bn=!0,xn=l)}}(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}}}if(bn)throw e=xn,bn=!1,xn=null,e}function Su(e,t){var n=Wu(t),r=e+"__bubble";n.has(r)||(Du(t,e,2,!1),n.add(r))}function Au(e){e[oi]||(e[oi]=!0,St.forEach((function(t){ii.has(t)||Cu(t,!1,e,null),Cu(t,!0,e,null)})))}function Cu(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&ii.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Wu(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Du(o,e,i,t),a.add(s))}function Du(e,t,n,r){var i=qn.get(t);switch(void 0===i?2:i){case 0:i=Hs;break;case 1:i=Vs;break;default:i=Gs}n=i.bind(null,t,n,e),i=void 0,!mn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mu(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Iu(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(pn)return e(t,n);pn=!0;try{dn(e,t,n)}finally{pn=!1,gs()}}((function(){var r=o,i=ls(n),a=[];e:{var s=Un.get(e);if(void 0!==s){var u=nr,l=e;switch(e){case"keypress":if(0===Qs(n))break e;case"keydown":case"keyup":u=Er;break;case"focusin":l="focus",u=hr;break;case"focusout":l="blur",u=hr;break;case"beforeblur":case"afterblur":u=hr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dr;break;case Ln:case Bn:case In:u=mr;break;case jn:u=Fr;break;case"scroll":u=ir;break;case"wheel":u=Or;break;case"copy":case"cut":case"paste":u=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ar}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=ys(p,d))&&c.push(Fu(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Iu(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Iu(l):null)&&(l!==(f=xs(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=lr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:Uu(u),h=null==l?s:Uu(l),(s=new c(m,p+"leave",u,n,i)).target=f,s.relatedTarget=h,m=null,Iu(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Ou(h))p++;for(h=0,m=d;m;m=Ou(m))h++;for(;0<p-h;)c=Ou(c),p--;for(;0<h-p;)d=Ou(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Ou(c),d=Ou(d)}c=null}else c=null;null!==u&&$u(a,s,u,c,!1),null!==l&&null!==f&&$u(a,f,l,c,!0)}if("select"===(u=(s=r?Uu(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=uu;else if(iu(s))if(Wr)g=pu;else{g=du;var y=fu}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=hu);switch(g&&(g=g(e,r))?ou(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&Xa(s,"number",s.value)),y=r?Uu(r):window,e){case"focusin":(iu(y)||"true"===y.contentEditable)&&(Jr=y,Kr=r,Zr=null);break;case"focusout":Zr=Kr=Jr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":ei=!1,_u(a,n,i);break;case"selectionchange":if(Qr)break;case"keydown":case"keyup":_u(a,n,i)}var v;if(Tr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ir?nu(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==n.locale&&(Ir||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ir&&(v=Xs()):(Zn="value"in(Kn=i)?Kn.value:Kn.textContent,Ir=!0)),0<(y=Nu(r,b)).length&&(b=new br(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=ru(n))&&(b.data=v))),(v=Rr?function(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,n):function(e,t){if(Ir)return"compositionend"===e||!Tr&&nu(e,t)?(e=Xs(),er=Zn=Kn=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nu(r,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Eu(a,t)}))}function Fu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ys(e,n))&&r.unshift(Fu(e,o,i)),null!=(o=ys(e,t))&&r.push(Fu(e,o,i))),e=e.return}return r}function Ou(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $u(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=ys(n,o))&&a.unshift(Fu(n,u,s)):i||null!=(u=ys(n,o))&&a.push(Fu(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Tu(){}function zu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ru(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Pu(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Iu(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Bu(e);null!==e;){if(n=e[di])return n;e=Bu(e)}return t}n=(e=n).parentNode}return null}function ju(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Uu(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Da(33))}function qu(e){return e[hi]||null}function Wu(e){var t=e[mi];return void 0===t&&(t=e[mi]=new Set),t}function Hu(e){return{current:e}}function Vu(e){0>yi||(e.current=gi[yi],gi[yi]=null,yi--)}function Gu(e,t){yi++,gi[yi]=e.current,e.current=t}function Yu(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xu(e){return null!=(e=e.childContextTypes)}function Qu(){Vu(xi),Vu(bi)}function Ju(e,t,n){if(bi.current!==vi)throw Error(Da(168));Gu(bi,t),Gu(xi,n)}function Ku(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(Da(108,La(t)||"Unknown",i));return Et({},n,r)}function Zu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,Gu(bi,e),Gu(xi,xi.current),!0}function el(e,t,n){var r=e.stateNode;if(!r)throw Error(Da(169));n?(e=Ku(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,Vu(xi),Vu(bi),Gu(bi,e)):Vu(xi),Gu(xi,n)}function tl(){switch(Fi()){case Ni:return 99;case Oi:return 98;case $i:return 97;case Ti:return 96;case zi:return 95;default:throw Error(Da(332))}}function nl(e){switch(e){case 99:return Ni;case 98:return Oi;case 97:return $i;case 96:return Ti;case 95:return zi;default:throw Error(Da(332))}}function rl(e,t){return e=nl(e),Ei(e,t)}function il(e,t,n){return e=nl(e),Si(e,t,n)}function ol(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}al()}function al(){if(!Ii&&null!==Li){Ii=!0;var e=0;try{var t=Li;rl(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Si(Ni,ol),t}finally{Ii=!1}}}function sl(e,t){if(e&&e.defaultProps){for(var n in t=Et({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ul(){Gi=Vi=Hi=null}function ll(e){var t=Wi.current;Vu(Wi),e.type._context._currentValue=t}function cl(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function fl(e,t){Hi=e,Gi=Vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ko=!0),e.firstContext=null)}function dl(e,t){if(Gi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Gi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Vi){if(null===Hi)throw Error(Da(308));Vi=t,Hi.dependencies={lanes:0,firstContext:t,responders:null}}else Vi=Vi.next=t;return e._currentValue}function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ml(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vl(e,t,n,r){var i=e.updateQueue;Yi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"==typeof(h=p.payload)){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=p.payload)?h.call(d,f,s):h))break e;f=Et({},f,s);break e;case 2:Yi=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,qo|=a,e.lanes=a,e.memoizedState=f}}function bl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Da(191,i));i.call(r)}}}function xl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Et({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function wl(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!gu(n,r)||!gu(i,o))}function _l(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=dl(o):(i=Xu(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?Yu(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Qi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qi.enqueueReplaceState(t,t.state,null)}function El(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Xi,hl(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dl(o):(o=Xu(t)?wi:bi.current,i.context=Yu(e,o)),vl(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(xl(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Qi.enqueueReplaceState(i,i.state,null),vl(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}function Sl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Da(309));var r=n.stateNode}if(!r)throw Error(Da(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Xi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Da(284));if(!n._owner)throw Error(Da(290,e))}return e}function Al(e,t){if("textarea"!==e.type)throw Error(Da(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Cl(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zf(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bf(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sl(e,t,n),r.return=e,r):((r=Rf(n.type,n.key,n.props,null,e.mode,r)).ref=Sl(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=If(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Pf(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Bf(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case zt:return(n=Rf(t.type,t.key,t.props,null,e.mode,n)).ref=Sl(e,null,t),n.return=e,n;case Rt:return(t=If(t,e.mode,n)).return=e,t}if(Ji(t)||Ta(t))return(t=Pf(t,e.mode,n,null)).return=e,t;Al(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case zt:return n.key===i?n.type===Pt?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case Rt:return n.key===i?l(e,t,n,r):null}if(Ji(n)||Ta(n))return null!==i?null:c(e,t,n,r,null);Al(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case zt:return e=e.get(null===r.key?n:r.key)||null,r.type===Pt?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case Rt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ji(r)||Ta(r))return c(t,e=e.get(n)||null,r,i,null);Al(t,r)}return null}function p(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=f(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=h(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}function m(i,a,s,u){var l=Ta(s);if("function"!=typeof l)throw Error(Da(150));if(null==(s=l.call(s)))throw Error(Da(151));for(var c=l=null,p=a,m=a=0,g=null,y=s.next();null!==p&&!y.done;m++,y=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),l;if(null===p){for(;!y.done;m++,y=s.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return l}for(p=r(i,p);!y.done;m++,y=s.next())null!==(y=h(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===Pt&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case zt:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===Pt){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Sl(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Pt?((r=Pf(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Rf(o.type,o.key,o.props,null,e.mode,s)).ref=Sl(e,r,o),s.return=e,e=s)}return a(e);case Rt:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=If(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Bf(o,e.mode,s)).return=e,e=r),a(e);if(Ji(o))return p(e,r,o,s);if(Ta(o))return m(e,r,o,s);if(l&&Al(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Da(152,La(e.type)||"Component"))}return n(e,r)}}function Dl(e){if(e===eo)throw Error(Da(174));return e}function Ml(e,t){switch(Gu(ro,t),Gu(no,e),Gu(to,eo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rs(null,"");break;default:t=rs(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Vu(to),Gu(to,t)}function Fl(){Vu(to),Vu(no),Vu(ro)}function Nl(e){Dl(ro.current);var t=Dl(to.current),n=rs(t,e.type);t!==n&&(Gu(no,e),Gu(to,n))}function Ol(e){no.current===e&&(Vu(to),Vu(no))}function $l(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Tl(e,t){var n=$f(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Rl(e){if(so){var t=ao;if(t){var n=t;if(!zl(e,t)){if(!(t=Lu(n.nextSibling))||!zl(e,t))return e.flags=-1025&e.flags|2,so=!1,void(oo=e);Tl(oo,n)}oo=e,ao=Lu(t.firstChild)}else e.flags=-1025&e.flags|2,so=!1,oo=e}}function Pl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oo=e}function Ll(e){if(e!==oo)return!1;if(!so)return Pl(e),so=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ru(t,e.memoizedProps))for(t=ao;t;)Tl(e,t),t=Lu(t.nextSibling);if(Pl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Da(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=Lu(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=oo?Lu(e.stateNode.nextSibling):null;return!0}function Bl(){ao=oo=null,so=!1}function Il(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}function jl(){throw Error(Da(321))}function Ul(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,i,o){if(fo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?bo:xo,e=n(r,i),yo){o=0;do{if(yo=!1,!(25>o))throw Error(Da(301));o+=1,mo=po=null,t.updateQueue=null,lo.current=wo,e=n(r,i)}while(yo)}if(lo.current=vo,t=null!==po&&null!==po.next,fo=0,mo=po=ho=null,go=!1,t)throw Error(Da(300));return e}function Wl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?ho.memoizedState=mo=e:mo=mo.next=e,mo}function Hl(){if(null===po){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=po.next;var t=null===mo?ho.memoizedState:mo.next;if(null!==t)mo=t,po=e;else{if(null===e)throw Error(Da(310));e={memoizedState:(po=e).memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},null===mo?ho.memoizedState=mo=e:mo=mo.next=e}return mo}function Vl(e,t){return"function"==typeof t?t(e):t}function Gl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=po,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((fo&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,ho.lanes|=l,qo|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Yr(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Yl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yr(o,t.memoizedState)||(ko=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xl(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(fo&e)===e)&&(t._workInProgressVersionPrimary=r,uo.push(t))),e)return n(t._source);throw uo.push(t),Error(Da(350))}function Ql(e,t,n,r){var i=zo;if(null===i)throw Error(Da(349));var o=t._getVersion,a=o(t._source),s=lo.current,u=s.useState((function(){return Xl(i,t,n)})),l=u[1],c=u[0];u=mo;var f=e.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=ho;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!Yr(a,e)){e=n(t._source),Yr(c,e)||(l(e),e=tf(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Vn(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=tf(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Yr(h,n)&&Yr(p,t)&&Yr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:c}).dispatch=l=hc.bind(null,ho,e),u.queue=e,u.baseQueue=null,c=Xl(i,t,n),u.memoizedState=u.baseState=c),c}function Jl(e,t,n){return Ql(Hl(),e,t,n)}function Kl(e){var t=Wl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e}).dispatch=hc.bind(null,ho,e),[t.memoizedState,e]}function Zl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ec(e){return e={current:e},Wl().memoizedState=e}function tc(){return Hl().memoizedState}function nc(e,t,n,r){var i=Wl();ho.flags|=e,i.memoizedState=Zl(1|t,n,void 0,void 0===r?null:r)}function rc(e,t,n,r){var i=Hl();r=void 0===r?null:r;var o=void 0;if(null!==po){var a=po.memoizedState;if(o=a.destroy,null!==r&&Ul(r,a.deps))return void Zl(t,n,o,r)}ho.flags|=e,i.memoizedState=Zl(1|t,n,o,r)}function ic(e,t){return nc(516,4,e,t)}function oc(e,t){return rc(516,4,e,t)}function ac(e,t){return rc(4,2,e,t)}function sc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function uc(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,2,sc.bind(null,t,e),n)}function lc(){}function cc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t){var n=tl();rl(98>n?98:n,(function(){e(!0)})),rl(97<n?97:n,(function(){var n=co.transition;co.transition=1;try{e(!1),t()}finally{co.transition=n}}))}function hc(e,t,n){var r=ef(),i=tf(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ho||null!==a&&a===ho)yo=go=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Yr(u,s))return}catch(e){}nf(e,i,r)}}function pc(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Ki(t,e.child,n,r)}function mc(e,t,n,r,i){n=n.render;var o=t.ref;return fl(t,i),r=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function gc(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Tf(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rf(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yc(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:gu)(i,r)&&e.ref===t.ref)?Nc(e,t,o):(t.flags|=1,(e=zf(a,r)).ref=t.ref,e.return=t,t.child=e)}function yc(e,t,n,r,i,o){if(null!==e&&gu(e.memoizedProps,r)&&e.ref===t.ref){if(ko=!1,0==(o&i))return t.lanes=e.lanes,Nc(e,t,o);0!=(16384&e.flags)&&(ko=!0)}return xc(e,t,n,r,o)}function vc(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ff(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ff(t,e),null;t.memoizedState={baseLanes:0},ff(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ff(t,r);return pc(e,t,i,n),t.child}function bc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function xc(e,t,n,r,i){var o=Xu(n)?wi:bi.current;return o=Yu(t,o),fl(t,i),n=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function wc(e,t,n,r,i){if(Xu(n)){var o=!0;Zu(t)}else o=!1;if(fl(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_l(t,n,r),El(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=dl(l):l=Yu(t,l=Xu(n)?wi:bi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&kl(t,a,r,l),Yi=!1;var d=t.memoizedState;a.state=d,vl(t,r,a,i),u=t.memoizedState,s!==r||d!==u||xi.current||Yi?("function"==typeof c&&(xl(t,n,c,r),u=t.memoizedState),(s=Yi||wl(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,pl(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:sl(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=dl(u):u=Yu(t,u=Xu(n)?wi:bi.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==u)&&kl(t,a,r,u),Yi=!1,d=t.memoizedState,a.state=d,vl(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||xi.current||Yi?("function"==typeof h&&(xl(t,n,h,r),p=t.memoizedState),(l=Yi||wl(t,n,l,r,d,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return _c(e,t,n,r,o,i)}function _c(e,t,n,r,i,o){bc(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&el(t,n,!1),Nc(e,t,o);r=t.stateNode,_o.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,o),t.child=Ki(t,null,s,o)):pc(e,t,s,o),t.memoizedState=r.state,i&&el(t,n,!0),t.child}function kc(e){var t=e.stateNode;t.pendingContext?Ju(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(0,t.context,!1),Ml(e,t.containerInfo)}function Ec(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Gu(io,1&o),null===e?(void 0!==i.fallback&&Rl(t),e=i.children,o=i.fallback,a?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,t.lanes=33554432,e):((n=Lf({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Cc(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Eo,i):(n=Ac(e,t,i.children,n),t.memoizedState=null,n))}function Sc(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Lf(t,i,0,null),n=Pf(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ac(e,t,n,r){var i=e.child;return e=i.sibling,n=zf(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Cc(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zf(a,s),null!==e?r=zf(e,r):(r=Pf(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Dc(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),cl(e.return,t)}function Mc(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Fc(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pc(e,t,r.children,n),0!=(2&(r=io.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Dc(e,n);else if(19===e.tag)Dc(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gu(io,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===$l(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mc(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$l(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mc(t,!0,n,null,o,t.lastEffect);break;case"together":Mc(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(Da(153));if(null!==t.child){for(n=zf(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zf(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Oc(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $c(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xu(t.type)&&Qu(),null;case 3:return Fl(),Vu(xi),Vu(bi),Il(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ll(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ao(t),null;case 5:Ol(t);var i=Dl(ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Co(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(Da(166));return null}if(e=Dl(to.current),Ll(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,n){case"dialog":Su("cancel",r),Su("close",r);break;case"iframe":case"object":case"embed":Su("load",r);break;case"video":case"audio":for(e=0;e<ri.length;e++)Su(ri[e],r);break;case"source":Su("error",r);break;case"img":case"image":case"link":Su("error",r),Su("load",r);break;case"details":Su("toggle",r);break;case"input":Ha(r,o),Su("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Su("invalid",r);break;case"textarea":Za(r,o),Su("invalid",r)}for(var a in ss(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):At.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Su("scroll",r));switch(n){case"input":ja(r),Ya(r,o,!0);break;case"textarea":ja(r),ts(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Tu)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===nn.html&&(e=ns(n)),e===nn.html?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[di]=t,e[hi]=r,So(e,t,!1,!1),t.stateNode=e,a=us(n,r),n){case"dialog":Su("cancel",e),Su("close",e),i=r;break;case"iframe":case"object":case"embed":Su("load",e),i=r;break;case"video":case"audio":for(i=0;i<ri.length;i++)Su(ri[i],e);i=r;break;case"source":Su("error",e),i=r;break;case"img":case"image":case"link":Su("error",e),Su("load",e),i=r;break;case"details":Su("toggle",e),i=r;break;case"input":Ha(e,r),i=Wa(e,r),Su("invalid",e);break;case"option":i=Qa(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),Su("invalid",e);break;case"textarea":Za(e,r),i=Ka(e,r),Su("invalid",e);break;default:i=r}ss(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?as(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&on(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&is(e,u):"number"==typeof u&&is(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(At.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Su("scroll",e):null!=u&&$a(e,o,u,a))}switch(n){case"input":ja(e),Ya(e,r,!1);break;case"textarea":ja(e),ts(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Ja(e,!!r.multiple,o,!1):null!=r.defaultValue&&Ja(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Tu)}zu(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Da(166));n=Dl(ro.current),Dl(to.current),Ll(t)?(r=t.stateNode,n=t.memoizedProps,r[di]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r)}return null;case 13:return Vu(io),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ll(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&io.current)?0===Io&&(Io=3):(0!==Io&&3!==Io||(Io=4),null===zo||0==(134217727&qo)&&0==(134217727&Wo)||sf(zo,Po))),(r||n)&&(t.flags|=4),null);case 4:return Fl(),Ao(t),null===e&&Au(t.stateNode.containerInfo),null;case 10:return ll(t),null;case 17:return Xu(t.type)&&Qu(),null;case 19:if(Vu(io),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Oc(r,!1);else{if(0!==Io||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=$l(e))){for(t.flags|=64,Oc(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gu(io,1&io.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>Yo&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=$l(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Oc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!so)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>Yo&&1073741824!==n&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=io.current,Gu(io,o?1&t|2:1&t),n):null;case 23:case 24:return df(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(Da(156,t.tag))}function Tc(e){switch(e.tag){case 1:Xu(e.type)&&Qu();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fl(),Vu(xi),Vu(bi),Il(),0!=(64&(t=e.flags)))throw Error(Da(285));return e.flags=-4097&t|64,e;case 5:return Ol(e),null;case 13:return Vu(io),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Vu(io),null;case 4:return Fl(),null;case 10:return ll(e),null;case 23:case 24:return df(),null;default:return null}}function zc(e,t){try{var n="",r=t;do{n+=Pa(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function Rc(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}function Pc(e,t,n){(n=ml(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qo||(Qo=!0,Jo=r),Rc(0,t)},n}function Lc(e,t,n){(n=ml(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Rc(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ko?Ko=new Set([this]):Ko.add(this),Rc(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Bc(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Mf(e,t)}else t.current=null}function Ic(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:sl(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Pu(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(Da(163))}function jc(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Af(n,e),Sf(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:sl(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&bl(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}bl(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zu(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&$s(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Da(163))}function Uc(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=os("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function qc(e,t){if(ki&&"function"==typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(_i,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Af(t,n);else{r=t;try{i()}catch(e){Mf(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Bc(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Mf(t,e)}break;case 5:Bc(t);break;case 4:Xc(e,t)}}function Wc(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Hc(e){return 5===e.tag||3===e.tag||4===e.tag}function Vc(e){e:{for(var t=e.return;null!==t;){if(Hc(t))break e;t=t.return}throw Error(Da(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Da(161))}16&n.flags&&(is(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Hc(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Gc(e,n,t):Yc(e,n,t)}function Gc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Tu));else if(4!==r&&null!==(e=e.child))for(Gc(e,t,n),e=e.sibling;null!==e;)Gc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Yc(e,t,n),e=e.sibling;null!==e;)Yc(e,t,n),e=e.sibling}function Xc(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(Da(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(qc(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(qc(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Qc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[hi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Va(n,r),us(e,i),t=us(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?as(n,s):"dangerouslySetInnerHTML"===a?on(n,s):"children"===a?is(n,s):$a(n,a,s,t)}switch(e){case"input":Ga(n,r);break;case"textarea":es(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Ja(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ja(n,!!r.multiple,r.defaultValue,!0):Ja(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Da(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,$s(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Go=Ui(),Uc(t.child,!0)),void Jc(t);case 19:return void Jc(t);case 17:return;case 23:case 24:return void Uc(t,null!==t.memoizedState)}throw Error(Da(163))}function Jc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Fo),t.forEach((function(t){var r=Nf.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Kc(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function Zc(){Yo=Ui()+500}function ef(){return 0!=(48&To)?Ui():-1!==sa?sa:sa=Ui()}function tf(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===tl()?1:2;if(0===ua&&(ua=Uo),0!==qi.transition){0!==la&&(la=null!==Vo?Vo.pendingLanes:0),e=ua;var t=4186112&~la;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=tl(),0!=(4&To)&&98===e?e=Is(12,ua):e=Is(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ua),e}function nf(e,t,n){if(50<oa)throw oa=0,aa=null,Error(Da(185));if(null===(e=rf(e,t)))return null;qs(e,t,n),e===zo&&(Wo|=t,4===Io&&sf(e,Po));var r=tl();1===t?0!=(8&To)&&0==(48&To)?uf(e):(of(e,n),0===To&&(Zc(),ol())):(0==(4&To)||98!==r&&99!==r||(null===ia?ia=new Set([e]):ia.add(e)),of(e,n)),Vo=e}function rf(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function of(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Ps(u);var c=Hn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ls(e,e===zo?Po:0),t=Hn,0===r)null!==n&&(n!==Ri&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ri&&Ai(n)}15===t?(n=uf.bind(null,e),null===Li?(Li=[n],Bi=Si(Ni,al)):Li.push(n),n=Ri):14===t?n=il(99,uf.bind(null,e)):n=il(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Da(358,e))}}(t),af.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function af(e){if(sa=-1,la=ua=0,0!=(48&To))throw Error(Da(327));var t=e.callbackNode;if(Ef()&&e.callbackNode!==t)return null;var n=Ls(e,e===zo?Po:0);if(0===n)return null;var r=n,i=To;To|=16;var o=mf();for(zo===e&&Po===r||(Zc(),hf(e,r));;)try{vf();break}catch(t){pf(e,t)}if(ul(),Oo.current=o,To=i,null!==Ro?r=0:(zo=null,Po=0,r=Io),0!=(Uo&Wo))hf(e,0);else if(0!==r){if(2===r&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(n=Bs(e))&&(r=gf(e,n))),1===r)throw t=jo,hf(e,0),sf(e,n),of(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(Da(345));case 2:wf(e);break;case 3:if(sf(e,n),(62914560&n)===n&&10<(r=Go+500-Ui())){if(0!==Ls(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ef(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ui(wf.bind(null,e),r);break}wf(e);break;case 4:if(sf(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Vn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*No(n/1960))-n)){e.timeoutHandle=ui(wf.bind(null,e),n);break}wf(e);break;case 5:wf(e);break;default:throw Error(Da(329))}}return of(e,Ui()),e.callbackNode===t?af.bind(null,e):null}function sf(e,t){for(t&=~Ho,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(0!=(48&To))throw Error(Da(327));if(Ef(),e===zo&&0!=(e.expiredLanes&Po)){var t=Po,n=gf(e,t);0!=(Uo&Wo)&&(n=gf(e,t=Ls(e,t)))}else n=gf(e,t=Ls(e,0));if(0!==e.tag&&2===n&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(t=Bs(e))&&(n=gf(e,t))),1===n)throw n=jo,hf(e,0),sf(e,t),of(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wf(e),of(e,Ui()),null}function lf(e,t){var n=To;To|=1;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function cf(e,t){var n=To;To&=-2,To|=8;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function ff(e,t){Gu(Bo,Lo),Lo|=t,Uo|=t}function df(){Lo=Bo.current,Vu(Bo)}function hf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,li(n)),null!==Ro)for(n=Ro.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Qu();break;case 3:Fl(),Vu(xi),Vu(bi),Il();break;case 5:Ol(r);break;case 4:Fl();break;case 13:case 19:Vu(io);break;case 10:ll(r);break;case 23:case 24:df()}n=n.return}zo=e,Ro=zf(e.current,null),Po=Lo=Uo=t,Io=0,jo=null,Ho=Wo=qo=0}function pf(e,t){for(;;){var n=Ro;try{if(ul(),lo.current=vo,go){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(fo=0,mo=po=ho=null,yo=!1,$o.current=null,null===n||null===n.return){Io=1,jo=t,Ro=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Po,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&io.current),d=a;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ml(-1,1);v.tag=2,gl(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Mo,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Ff.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((La(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Io&&(Io=2),u=zc(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Pc(0,o,t));break e;case 1:o=u;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ko||!Ko.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Lc(d,o,t));break e}}d=d.return}while(null!==d)}xf(n)}catch(e){t=e,Ro===n&&null!==n&&(Ro=n=n.return);continue}break}}function mf(){var e=Oo.current;return Oo.current=vo,null===e?vo:e}function gf(e,t){var n=To;To|=16;var r=mf();for(zo===e&&Po===t||hf(e,t);;)try{yf();break}catch(t){pf(e,t)}if(ul(),To=n,Oo.current=r,null!==Ro)throw Error(Da(261));return zo=null,Po=0,Io}function yf(){for(;null!==Ro;)bf(Ro)}function vf(){for(;null!==Ro&&!Ci();)bf(Ro)}function bf(e){var t=da(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?xf(e):Ro=t,$o.current=null}function xf(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$c(n,t,Lo)))return void(Ro=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Lo)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Tc(t)))return n.flags&=2047,void(Ro=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ro=t);Ro=t=e}while(null!==t);0===Io&&(Io=5)}function wf(e){var t=tl();return rl(99,_f.bind(null,e,t)),null}function _f(e,t){do{Ef()}while(null!==ea);if(0!=(48&To))throw Error(Da(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Da(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Vn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==ia&&0==(24&r)&&ia.has(e)&&ia.delete(e),e===zo&&(Ro=zo=null,Po=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=To,To|=32,$o.current=null,ai=Jn,wu(a=xu())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=a,g=null;t:for(;;){for(var y;m!==s||0!==o&&3!==m.nodeType||(f=c+o),m!==u||0!==l&&3!==m.nodeType||(d=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===a)break t;if(g===s&&++h===o&&(f=c),g===u&&++p===l&&(d=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;si={focusedElem:a,selectionRange:s},Jn=!1,ca=null,fa=!1,Xo=r;do{try{kf()}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);ca=null,Xo=r;do{try{for(a=e;null!==Xo;){var v=Xo.flags;if(16&v&&is(Xo.stateNode,""),128&v){var b=Xo.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:Vc(Xo),Xo.flags&=-3;break;case 6:Vc(Xo),Xo.flags&=-3,Qc(Xo.alternate,Xo);break;case 1024:Xo.flags&=-1025;break;case 1028:Xo.flags&=-1025,Qc(Xo.alternate,Xo);break;case 4:Qc(Xo.alternate,Xo);break;case 8:Xc(a,s=Xo);var w=s.alternate;Wc(s),null!==w&&Wc(w)}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);if(x=si,b=xu(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&bu(v.ownerDocument.documentElement,v)){null!==a&&wu(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),s=v.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!x.extend&&w>a&&(s=a,a=w,w=s),s=vu(v,w),o=vu(v,a),s&&o&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jn=!!ai,si=ai=null,e.current=n,Xo=r;do{try{for(v=e;null!==Xo;){var _=Xo.flags;if(36&_&&jc(v,Xo.alternate,Xo),128&_){b=void 0;var k=Xo.ref;if(null!==k){var E=Xo.stateNode;switch(Xo.tag){case 5:b=E;break;default:b=E}"function"==typeof k?k(b):k.current=b}}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);Xo=null,Pi(),To=i}else e.current=n;if(Zo)Zo=!1,ea=e,ta=t;else for(Xo=r;null!==Xo;)t=Xo.nextEffect,Xo.nextEffect=null,8&Xo.flags&&((_=Xo).sibling=null,_.stateNode=null),Xo=t;if(0===(r=e.pendingLanes)&&(Ko=null),1===r?e===aa?oa++:(oa=0,aa=e):oa=0,n=n.stateNode,ki&&"function"==typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(_i,n,void 0,64==(64&n.current.flags))}catch(e){}if(of(e,Ui()),Qo)throw Qo=!1,e=Jo,Jo=null,e;return 0!=(8&To)||ol(),null}function kf(){for(;null!==Xo;){var e=Xo.alternate;fa||null===ca||(0!=(8&Xo.flags)?Es(Xo,ca)&&(fa=!0):13===Xo.tag&&Kc(e,Xo)&&Es(Xo,ca)&&(fa=!0));var t=Xo.flags;0!=(256&t)&&Ic(e,Xo),0==(512&t)||Zo||(Zo=!0,il(97,(function(){return Ef(),null}))),Xo=Xo.nextEffect}}function Ef(){if(90!==ta){var e=97<ta?97:ta;return ta=90,rl(e,Cf)}return!1}function Sf(e,t){na.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Af(e,t){ra.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Cf(){if(null===ea)return!1;var e=ea;if(ea=null,0!=(48&To))throw Error(Da(331));var t=To;To|=32;var n=ra;ra=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(n=na,na=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return To=t,ol(),!0}function Df(e,t,n){gl(e,t=Pc(0,t=zc(n,t),1)),t=ef(),null!==(e=rf(e,1))&&(qs(e,1,t),of(e,t))}function Mf(e,t){if(3===e.tag)Df(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Df(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r))){var i=Lc(n,e=zc(t,e),1);if(gl(n,i),i=ef(),null!==(n=rf(n,1)))qs(n,1,i),of(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ff(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ef(),e.pingedLanes|=e.suspendedLanes&n,zo===e&&(Po&n)===n&&(4===Io||3===Io&&(62914560&Po)===Po&&500>Ui()-Go?hf(e,0):Ho|=n),of(e,t)}function Nf(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===tl()?1:2:(0===ua&&(ua=Uo),0===(t=js(62914560&~ua))&&(t=4194304))),n=ef(),null!==(e=rf(e,t))&&(qs(e,t,n),of(e,n))}function Of(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $f(e,t,n,r){return new Of(e,t,n,r)}function Tf(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zf(e,t){var n=e.alternate;return null===n?((n=$f(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rf(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Tf(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Pt:return Pf(n.children,i,o,t);case Xt:a=8,i|=16;break;case Lt:a=8,i|=1;break;case Bt:return(e=$f(12,n,t,8|i)).elementType=Bt,e.type=Bt,e.lanes=o,e;case qt:return(e=$f(13,n,t,i)).type=qt,e.elementType=qt,e.lanes=o,e;case Wt:return(e=$f(19,n,t,i)).elementType=Wt,e.lanes=o,e;case Qt:return Lf(n,i,o,t);case Jt:return(e=$f(24,n,t,i)).elementType=Jt,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case It:a=10;break e;case jt:a=9;break e;case Ut:a=11;break e;case Ht:a=14;break e;case Vt:a=16,r=null;break e;case Gt:a=22;break e}throw Error(Da(130,null==e?e:typeof e,""))}return(t=$f(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pf(e,t,n,r){return(e=$f(7,e,r,t)).lanes=n,e}function Lf(e,t,n,r){return(e=$f(23,e,r,t)).elementType=Qt,e.lanes=n,e}function Bf(e,t,n){return(e=$f(6,e,null,t)).lanes=n,e}function If(e,t,n){return(t=$f(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jf(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.mutableSourceEagerHydrationData=null}function Uf(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Rt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qf(e,t,n,r){var i=t.current,o=ef(),a=tf(i);e:if(n){t:{if(xs(n=n._reactInternals)!==n||1!==n.tag)throw Error(Da(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Xu(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Da(171))}if(1===n.tag){var u=n.type;if(Xu(u)){n=Ku(n,u,s);break e}}n=s}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,(t=ml(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gl(i,t),nf(i,a,o),a}function Wf(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vf(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function Gf(){return null}function Yf(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new jf(e,t,null!=n&&!0===n.hydrate),t=$f(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,hl(t),e[pi]=n.current,Au(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xf(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wf(a);s.call(e)}}qf(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Yf(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Wf(a);u.call(e)}}cf((function(){qf(t,a,e,i)}))}return Wf(a)}function Jf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xf(t))throw Error(Da(200));return Uf(e,t,null,n)}function Kf(){if(_t={},kt=xe(),Et=c(),wt(),!kt)throw Error(Da(227));var e;if(St=new Set,At={},Ct=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Dt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mt=Object.prototype.hasOwnProperty,Ft={},Nt={},Ot={},"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Ot[e]=new Na(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Ot[t]=new Na(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Ot[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Ot[e]=new Na(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Ot[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Ot[e]=new Na(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Ot[e]=new Na(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){Ot[e]=new Na(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){Ot[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)})),$t=/[\-:]([a-z])/g,"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)})),Ot.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)})),Tt=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zt=60103,Rt=60106,Pt=60107,Lt=60108,Bt=60114,It=60109,jt=60110,Ut=60112,qt=60113,Wt=60120,Ht=60115,Vt=60116,Gt=60121,Yt=60128,Xt=60129,Qt=60130,Jt=60131,"function"==typeof Symbol&&Symbol.for&&(Kt=Symbol.for,zt=Kt("react.element"),Rt=Kt("react.portal"),Pt=Kt("react.fragment"),Lt=Kt("react.strict_mode"),Bt=Kt("react.profiler"),It=Kt("react.provider"),jt=Kt("react.context"),Ut=Kt("react.forward_ref"),qt=Kt("react.suspense"),Wt=Kt("react.suspense_list"),Ht=Kt("react.memo"),Vt=Kt("react.lazy"),Gt=Kt("react.block"),Kt("react.scope"),Yt=Kt("react.opaque.id"),Xt=Kt("react.debug_trace_mode"),Qt=Kt("react.offscreen"),Jt=Kt("react.legacy_hidden")),Zt="function"==typeof Symbol&&Symbol.iterator,tn=!1,nn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},e=function(e,t){if(e.namespaceURI!==nn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rn=rn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},on="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e,an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"],Object.keys(an).forEach((function(e){sn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]}))})),un=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ln=null,cn=null,fn=null,dn=hs,hn=!1,pn=!1,mn=!1,Ct)try{gn={},Object.defineProperty(gn,"passive",{get:function(){mn=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch(e){mn=!1}yn=!1,vn=null,bn=!1,xn=null,wn={onError:function(e){yn=!0,vn=e}},An=!1,Cn=[],Dn=null,Mn=null,Fn=null,Nn=new Map,On=new Map,$n=[],Tn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),zn={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},Rn={},Pn={},Ct&&(Pn=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition),Ln=zs("animationend"),Bn=zs("animationiteration"),In=zs("animationstart"),jn=zs("transitionend"),Un=new Map,qn=new Map,Wn=["abort","abort",Ln,"animationEnd",Bn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jn,"transitionEnd","waiting","waiting"],(0,wt().unstable_now)(),Hn=8,Vn=Math.clz32?Math.clz32:Ws,Gn=Math.log,Yn=Math.LN2,Xn=wt().unstable_UserBlockingPriority,Qn=wt().unstable_runWithPriority,Jn=!0,Kn=null,Zn=null,er=null,nr=Zs(tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0}),rr=Et({},tr,{view:0,detail:0}),ir=Zs(rr),ur=Et({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),lr=Zs(ur),cr=Et({},ur,{dataTransfer:0}),fr=Zs(cr),dr=Et({},rr,{relatedTarget:0}),hr=Zs(dr),pr=Et({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Zs(pr),gr=Et({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=Zs(gr),vr=Et({},tr,{data:0}),br=Zs(vr),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},kr=Et({},rr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qs(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return"keypress"===e.type?Qs(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qs(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=Zs(kr),Sr=Et({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Zs(Sr),Cr=Et({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),Dr=Zs(Cr),Mr=Et({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fr=Zs(Mr),Nr=Et({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=Zs(Nr),$r=[9,13,27,32],Tr=Ct&&"CompositionEvent"in window,zr=null,Ct&&"documentMode"in document&&(zr=document.documentMode),Rr=Ct&&"TextEvent"in window&&!zr,Pr=Ct&&(!Tr||zr&&8<zr&&11>=zr),Lr=String.fromCharCode(32),Br=!1,Ir=!1,jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ur=null,qr=null,Wr=!1,Ct&&(Ct?((Vr="oninput"in document)||((Gr=document.createElement("div")).setAttribute("oninput","return;"),Vr="function"==typeof Gr.oninput),Hr=Vr):Hr=!1,Wr=Hr&&(!document.documentMode||9<document.documentMode)),Yr="function"==typeof Object.is?Object.is:mu,Xr=Object.prototype.hasOwnProperty,Qr=Ct&&"documentMode"in document&&11>=document.documentMode,Jr=null,Kr=null,Zr=null,ei=!1,Rs("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rs("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rs(Wn,2);for(ti="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ni=0;ni<ti.length;ni++)qn.set(ti[ni],0);if(Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" ")),ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri)),oi="_reactListening"+Math.random().toString(36).slice(2),ai=null,si=null,ui="function"==typeof setTimeout?setTimeout:void 0,li="function"==typeof clearTimeout?clearTimeout:void 0,ci=0,fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,mi="__reactEvents$"+fi,gi=[],yi=-1,bi=Hu(vi={}),xi=Hu(!1),wi=vi,_i=null,ki=null,Ei=wt().unstable_runWithPriority,Si=wt().unstable_scheduleCallback,Ai=wt().unstable_cancelCallback,Ci=wt().unstable_shouldYield,Di=wt().unstable_requestPaint,Mi=wt().unstable_now,Fi=wt().unstable_getCurrentPriorityLevel,Ni=wt().unstable_ImmediatePriority,Oi=wt().unstable_UserBlockingPriority,$i=wt().unstable_NormalPriority,Ti=wt().unstable_LowPriority,zi=wt().unstable_IdlePriority,Ri={},Pi=void 0!==Di?Di:function(){},Li=null,Bi=null,Ii=!1,ji=Mi(),Ui=1e4>ji?Mi:function(){return Mi()-ji},qi=Tt.ReactCurrentBatchConfig,Wi=Hu(null),Hi=null,Vi=null,Gi=null,Yi=!1,Xi=(new kt.Component).refs,Qi={isMounted:function(e){return!!(e=e._reactInternals)&&xs(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ef(),r=tf(e),i=ml(n,r);i.tag=2,null!=t&&(i.callback=t),gl(e,i),nf(e,r,n)}},Ji=Array.isArray,Ki=Cl(!0),Zi=Cl(!1),to=Hu(eo={}),no=Hu(eo),ro=Hu(eo),io=Hu(0),oo=null,ao=null,so=!1,uo=[],lo=Tt.ReactCurrentDispatcher,co=Tt.ReactCurrentBatchConfig,fo=0,ho=null,po=null,mo=null,go=!1,yo=!1,vo={readContext:dl,useCallback:jl,useContext:jl,useEffect:jl,useImperativeHandle:jl,useLayoutEffect:jl,useMemo:jl,useReducer:jl,useRef:jl,useState:jl,useDebugValue:jl,useDeferredValue:jl,useTransition:jl,useMutableSource:jl,useOpaqueIdentifier:jl,unstable_isNewReconciler:!1},bo={readContext:dl,useCallback:function(e,t){return Wl().memoizedState=[e,void 0===t?null:t],e},useContext:dl,useEffect:ic,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,nc(4,2,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var n=Wl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=hc.bind(null,ho,e),[r.memoizedState,e]},useRef:ec,useState:Kl,useDebugValue:lc,useDeferredValue:function(e){var t=Kl(e),n=t[0],r=t[1];return ic((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Kl(!1),t=e[0];return ec(e=dc.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Wl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ql(r,e,t,n)},useOpaqueIdentifier:function(){if(so){var e=!1,t=function(e){return{$$typeof:Yt,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(ci++).toString(36))),Error(Da(355))})),n=Kl(t)[1];return 0==(2&ho.mode)&&(ho.flags|=516,Zl(5,(function(){n("r:"+(ci++).toString(36))}),void 0,null)),t}return Kl(t="r:"+(ci++).toString(36)),t},unstable_isNewReconciler:!1},xo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Gl,useRef:tc,useState:function(){return Gl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Gl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Gl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Gl(Vl)[0]},unstable_isNewReconciler:!1},wo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Yl,useRef:tc,useState:function(){return Yl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Yl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Yl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Yl(Vl)[0]},unstable_isNewReconciler:!1},_o=Tt.ReactCurrentOwner,ko=!1,Eo={dehydrated:null,retryLane:0},So=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Co=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(to.current);var o,a=null;switch(n){case"input":i=Wa(e,i),r=Wa(e,r),a=[];break;case"option":i=Qa(e,i),r=Qa(e,r),a=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":i=Ka(e,i),r=Ka(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Tu)}for(l in ss(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(At.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(At.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Su("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Yt?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)},Mo="function"==typeof WeakMap?WeakMap:Map,Fo="function"==typeof WeakSet?WeakSet:Set,No=Math.ceil,Oo=Tt.ReactCurrentDispatcher,$o=Tt.ReactCurrentOwner,To=0,zo=null,Ro=null,Po=0,Lo=0,Bo=Hu(0),Io=0,jo=null,Uo=0,qo=0,Wo=0,Ho=0,Vo=null,Go=0,Yo=1/0,Xo=null,Qo=!1,Jo=null,Ko=null,Zo=!1,ea=null,ta=90,na=[],ra=[],ia=null,oa=0,aa=null,sa=-1,ua=0,la=0,ca=null,fa=!1,da=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ko=!0;else{if(0==(n&r)){switch(ko=!1,t.tag){case 3:kc(t),Bl();break;case 5:Nl(t);break;case 1:Xu(t.type)&&Zu(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Gu(Wi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ec(e,t,n):(Gu(io,1&io.current),null!==(t=Nc(e,t,n))?t.sibling:null);Gu(io,1&io.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Fc(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gu(io,io.current),r)break;return null;case 23:case 24:return t.lanes=0,vc(e,t,n)}return Nc(e,t,n)}ko=0!=(16384&e.flags)}else ko=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Yu(t,bi.current),fl(t,n),i=ql(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xu(r)){var o=!0;Zu(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hl(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&xl(t,r,a,e),i.updater=Qi,t.stateNode=i,i._reactInternals=t,El(t,r,e,n),t=_c(null,t,r,!0,o,n)}else t.tag=0,pc(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Tf(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ut)return 11;if(e===Ht)return 14}return 2}(i),e=sl(i,e),o){case 0:t=xc(null,t,i,e,n);break e;case 1:t=wc(null,t,i,e,n);break e;case 11:t=mc(null,t,i,e,n);break e;case 14:t=gc(null,t,i,sl(i.type,e),r,n);break e}throw Error(Da(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,xc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 1:return r=t.type,i=t.pendingProps,wc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 3:if(kc(t),r=t.updateQueue,null===e||null===r)throw Error(Da(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,pl(e,t),vl(t,r,null,n),(r=t.memoizedState.element)===i)Bl(),t=Nc(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ao=Lu(t.stateNode.containerInfo.firstChild),oo=t,o=so=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],uo.push(o);for(n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else pc(e,t,r,n),Bl();t=t.child}return t;case 5:return Nl(t),null===e&&Rl(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Ru(r,i)?a=null:null!==o&&Ru(r,o)&&(t.flags|=16),bc(e,t),pc(e,t,a,n),t.child;case 6:return null===e&&Rl(t),null;case 13:return Ec(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):pc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,mc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 7:return pc(e,t,t.pendingProps,n),t.child;case 8:case 12:return pc(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Gu(Wi,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Yr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!xi.current){t=Nc(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=ml(-1,n&-n)).tag=2,gl(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cl(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}pc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,fl(t,n),r=r(i=dl(i,o.unstable_observedBits)),t.flags|=1,pc(e,t,r,n),t.child;case 14:return o=sl(i=t.type,t.pendingProps),gc(e,t,i,o=sl(i.type,o),r,n);case 15:return yc(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sl(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Xu(r)?(e=!0,Zu(t)):e=!1,fl(t,n),_l(t,r,i),El(t,r,i,n),_c(null,t,r,!0,e,n);case 19:return Fc(e,t,n);case 23:case 24:return vc(e,t,n)}throw Error(Da(156,t.tag))},Yf.prototype.render=function(e){qf(e,this._internalRoot,null,null)},Yf.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qf(null,e,null,(function(){t[pi]=null}))},_n=function(e){13===e.tag&&(nf(e,4,ef()),Vf(e,4))},kn=function(e){13===e.tag&&(nf(e,67108864,ef()),Vf(e,67108864))},En=function(e){if(13===e.tag){var t=ef(),n=tf(e);nf(e,n,t),Vf(e,n)}},Sn=function(e,t){return t()},ln=function(e,t,n){switch(t){case"input":if(Ga(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qu(r);if(!i)throw Error(Da(90));Ua(r),Ga(r,i)}}}break;case"textarea":es(e,n);break;case"select":null!=(t=n.value)&&Ja(e,!!n.multiple,t,!1)}},hs=lf,ps=function(e,t,n,r,i){var o=To;To|=4;try{return rl(98,e.bind(null,t,n,r,i))}finally{0===(To=o)&&(Zc(),ol())}},ms=function(){0==(49&To)&&(function(){if(null!==ia){var e=ia;ia=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,of(e,Ui())}))}ol()}(),Ef())},dn=function(e,t){var n=To;To|=2;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}},ha={Events:[ju,Uu,qu,fs,ds,Ef,{current:!1}]},ma={bundleType:(pa={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ks(e))?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||Gf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(ga=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&ga.supportsFiber)try{_i=ga.inject(ma),ki=ga}catch(e){}ya=ha,_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ya,va=Jf,_t.createPortal=va,ba=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Da(188));throw Error(Da(268,Object.keys(e)))}return e=null===(e=ks(t))?null:e.stateNode},_t.findDOMNode=ba,xa=function(e,t){var n=To;if(0!=(48&n))return e(t);To|=1;try{if(e)return rl(99,e.bind(null,t))}finally{To=n,ol()}},_t.flushSync=xa,wa=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!0,n)},_t.hydrate=wa,_a=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!1,n)},_t.render=_a,ka=function(e){if(!Xf(e))throw Error(Da(40));return!!e._reactRootContainer&&(cf((function(){Qf(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},_t.unmountComponentAtNode=ka,Ea=lf,_t.unstable_batchedUpdates=Ea,Sa=function(e,t){return Jf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},_t.unstable_createPortal=Sa,Aa=function(e,t,n,r){if(!Xf(n))throw Error(Da(200));if(null==e||void 0===e._reactInternals)throw Error(Da(38));return Qf(e,t,n,!1,r)},_t.unstable_renderSubtreeIntoContainer=Aa,"17.0.2",_t.version="17.0.2"}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ca||(Ca=!0,Kf());var Zf=e(_t);xe();var ed={},td={};function nd(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function rd(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function id(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function od(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+id(-t,6):t>9999?"+"+id(t,6):id(t,4))+"-"+id(e.getUTCMonth()+1,2)+"-"+id(e.getUTCDate(),2)+(o?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"."+id(o,3)+"Z":i?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"Z":r||n?"T"+id(n,2)+":"+id(r,2)+"Z":"")}var ad=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return td;if(l)return l=!1,ed;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))l=!0;else if(13===r)l=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==td;){for(var f=[];r!==ed&&r!==td;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?od(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=nd(e);return function(r,i){return t(n(r),i,e)}}(e,t):nd(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=rd(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=rd(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},sd=ad(","),ud=sd.parse,ld=(sd.parseRows,sd.format,sd.formatBody,sd.formatRows,sd.formatRow,sd.formatValue,ad("\t")),cd=ld.parse;ld.parseRows,ld.format,ld.formatBody,ld.formatRows,ld.formatRow,ld.formatValue;function fd(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var dd=function(e,t){return fetch(e,t).then(fd)};function hd(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),dd(t,n).then((function(t){return e(t,r)}))}}var pd=hd(ud);hd(cd);xe();const md=e=>{const[t,n]=xe().useState([]),[r,i]=xe().useState(!0);return xe().useEffect((()=>{!async function(){const t=await pd(e);n(t),i(!1)}()}),[]),[t,r]};var gd=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},yd=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>gd(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}};var vd=function(e){return null===e?NaN:+e};const bd=yd(gd),xd=bd.right,wd=bd.left;yd(vd).center;class _d{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}var kd=Array.prototype,Ed=(kd.slice,kd.map,Math.sqrt(50)),Sd=Math.sqrt(10),Ad=Math.sqrt(2),Cd=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Dd(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o};function Dd(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ed?10:o>=Sd?5:o>=Ad?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ed?10:o>=Sd?5:o>=Ad?2:1)}function Md(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ed?i*=10:o>=Sd?i*=5:o>=Ad&&(i*=2),t<e?-i:i}function Fd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Nd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Od(e,t,n=0,r=e.length-1,i=gd){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Od(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}const o=e[t];let a=n,s=r;for($d(e,n,t),i(e[r],o)>0&&$d(e,n,r);a<s;){for($d(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?$d(e,n,s):(++s,$d(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function $d(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Td(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return Nd(e);if(t>=1)return Fd(e);var r,i=(r-1)*t,o=Math.floor(i),a=Fd(Od(e,o).subarray(0,o+1));return a+(Nd(e.subarray(o+1))-a)*(i-o)}}function zd(e,t,n=vd){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var Rd=function(e,t){return Td(e,.5,t)};function Pd(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var Ld=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function Bd(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var Id={},jd=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Ud(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qd(){}var Wd=.7,Hd=1.4285714285714286,Vd="\\s*([+-]?\\d+)\\s*",Gd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xd=/^#([0-9a-f]{3,8})$/,Qd=new RegExp("^rgb\\("+[Vd,Vd,Vd]+"\\)$"),Jd=new RegExp("^rgb\\("+[Yd,Yd,Yd]+"\\)$"),Kd=new RegExp("^rgba\\("+[Vd,Vd,Vd,Gd]+"\\)$"),Zd=new RegExp("^rgba\\("+[Yd,Yd,Yd,Gd]+"\\)$"),eh=new RegExp("^hsl\\("+[Gd,Yd,Yd]+"\\)$"),th=new RegExp("^hsla\\("+[Gd,Yd,Yd,Gd]+"\\)$"),nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rh(){return this.rgb().formatHex()}function ih(){return this.rgb().formatRgb()}function oh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Xd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ah(t):3===n?new ch(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?sh(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?sh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Qd.exec(e))?new ch(t[1],t[2],t[3],1):(t=Jd.exec(e))?new ch(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kd.exec(e))?sh(t[1],t[2],t[3],t[4]):(t=Zd.exec(e))?sh(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eh.exec(e))?ph(t[1],t[2]/100,t[3]/100,1):(t=th.exec(e))?ph(t[1],t[2]/100,t[3]/100,t[4]):nh.hasOwnProperty(e)?ah(nh[e]):"transparent"===e?new ch(NaN,NaN,NaN,0):null}function ah(e){return new ch(e>>16&255,e>>8&255,255&e,1)}function sh(e,t,n,r){return r<=0&&(e=t=n=NaN),new ch(e,t,n,r)}function uh(e){return e instanceof qd||(e=oh(e)),e?new ch((e=e.rgb()).r,e.g,e.b,e.opacity):new ch}function lh(e,t,n,r){return 1===arguments.length?uh(e):new ch(e,t,n,null==r?1:r)}function ch(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function fh(){return"#"+hh(this.r)+hh(this.g)+hh(this.b)}function dh(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hh(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ph(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yh(e,t,n,r)}function mh(e){if(e instanceof yh)return new yh(e.h,e.s,e.l,e.opacity);if(e instanceof qd||(e=oh(e)),!e)return new yh;if(e instanceof yh)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new yh(a,s,u,e.opacity)}function gh(e,t,n,r){return 1===arguments.length?mh(e):new yh(e,t,n,null==r?1:r)}function yh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function vh(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}jd(qd,oh,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rh,formatHex:rh,formatHsl:function(){return mh(this).formatHsl()},formatRgb:ih,toString:ih}),jd(ch,lh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new ch(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new ch(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fh,formatHex:fh,formatRgb:dh,toString:dh})),jd(yh,gh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new yh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new yh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ch(vh(e>=240?e-240:e+120,i,r),vh(e,i,r),vh(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const bh=Math.PI/180,xh=180/Math.PI,wh=.96422,_h=.82521,kh=4/29,Eh=6/29,Sh=.12841854934601665;function Ah(e){if(e instanceof Dh)return new Dh(e.l,e.a,e.b,e.opacity);if(e instanceof zh)return Rh(e);e instanceof ch||(e=uh(e));var t,n,r=Oh(e.r),i=Oh(e.g),o=Oh(e.b),a=Mh((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Mh((.4360747*r+.3850649*i+.1430804*o)/wh),n=Mh((.0139322*r+.0971045*i+.7141733*o)/_h)),new Dh(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Ch(e,t,n,r){return 1===arguments.length?Ah(e):new Dh(e,t,n,null==r?1:r)}function Dh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Mh(e){return e>.008856451679035631?Math.pow(e,1/3):e/Sh+kh}function Fh(e){return e>Eh?e*e*e:Sh*(e-kh)}function Nh(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Oh(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $h(e){if(e instanceof zh)return new zh(e.h,e.c,e.l,e.opacity);if(e instanceof Dh||(e=Ah(e)),0===e.a&&0===e.b)return new zh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xh;return new zh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Th(e,t,n,r){return 1===arguments.length?$h(e):new zh(e,t,n,null==r?1:r)}function zh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Rh(e){if(isNaN(e.h))return new Dh(e.l,0,0,e.opacity);var t=e.h*bh;return new Dh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}jd(Dh,Ch,Ud(qd,{brighter:function(e){return new Dh(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Dh(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new ch(Nh(3.1338561*(t=wh*Fh(t))-1.6168667*(e=1*Fh(e))-.4906146*(n=_h*Fh(n))),Nh(-.9787684*t+1.9161415*e+.033454*n),Nh(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),jd(zh,Th,Ud(qd,{brighter:function(e){return new zh(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new zh(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Rh(this).rgb()}}));var Ph=-.14861,Lh=1.78277,Bh=-.29227,Ih=-.90649,jh=1.97294,Uh=-1.7884503806,qh=3.5172982438,Wh=-.6557636667999999;function Hh(e){if(e instanceof Gh)return new Gh(e.h,e.s,e.l,e.opacity);e instanceof ch||(e=uh(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Wh*r+Uh*t-qh*n)/-5.9615122912,o=r-i,a=(jh*(n-i)-Bh*o)/Ih,s=Math.sqrt(a*a+o*o)/(jh*i*(1-i)),u=s?Math.atan2(a,o)*xh-120:NaN;return new Gh(u<0?u+360:u,s,i,e.opacity)}function Vh(e,t,n,r){return 1===arguments.length?Hh(e):new Gh(e,t,n,null==r?1:r)}function Gh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Yh(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}jd(Gh,Vh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new Gh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new Gh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*bh,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ch(255*(t+n*(Ph*r+Lh*i)),255*(t+n*(Bh*r+Ih*i)),255*(t+n*(jh*r)),this.opacity)}}));var Xh=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Yh((n-r/t)*t,a,i,o,s)}},Qh=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Yh((n-r/t)*t,i,o,a,s)}},Jh=e=>()=>e;function Kh(e,t){return function(n){return e+n*t}}function Zh(e,t){var n=t-e;return n?Kh(e,n>180||n<-180?n-360*Math.round(n/360):n):Jh(isNaN(e)?t:e)}function ep(e){return 1==(e=+e)?tp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Jh(isNaN(t)?n:t)}}function tp(e,t){var n=t-e;return n?Kh(e,n):Jh(isNaN(e)?t:e)}var np=function e(t){var n=ep(t);function r(e,t){var r=n((e=lh(e)).r,(t=lh(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=tp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function rp(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=lh(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var ip=rp(Xh),op=rp(Qh),ap=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function sp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var up=function(e,t){return(sp(t)?ap:lp)(e,t)};function lp(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=yp(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var cp=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},fp=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},dp=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=yp(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pp=new RegExp(hp.source,"g");var mp,gp=function(e,t){var n,r,i,o=hp.lastIndex=pp.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=hp.exec(e))&&(r=pp.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fp(n,r)})),o=pp.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},yp=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Jh(t):("number"===r?fp:"string"===r?(n=oh(t))?(t=n,np):gp:t instanceof oh?np:t instanceof Date?cp:sp(t)?ap:Array.isArray(t)?lp:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?dp:fp)(e,t)},vp=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},bp=function(e,t){var n=Zh(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},xp=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},wp=180/Math.PI,_p={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},kp=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*wp,skewX:Math.atan(u)*wp,scaleX:a,scaleY:s}};function Ep(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:fp(e,i)},{i:u-2,x:fp(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fp(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fp(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fp(e,n)},{i:s-2,x:fp(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var Sp=Ep((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_p:kp(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ap=Ep((function(e){return null==e?_p:(mp||(mp=document.createElementNS("http://www.w3.org/2000/svg","g")),mp.setAttribute("transform",e),(e=mp.transform.baseVal.consolidate())?(e=e.matrix,kp(e.a,e.b,e.c,e.d,e.e,e.f)):_p)}),", ",")",")");function Cp(e){return((e=Math.exp(e))+1/e)/2}var Dp=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],c=i[0],f=i[1],d=i[2],h=c-s,p=f-u,m=h*h+p*p;if(m<1e-12)a=Math.log(d/l)/t,o=function(e){return[s+e*h,u+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,o=function(e){var r,i=e*a,o=Cp(b),c=l/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*h,u+c*p,l*o/Cp(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Mp(e){return function(t,n){var r=e((t=gh(t)).h,(n=gh(n)).h),i=tp(t.s,n.s),o=tp(t.l,n.l),a=tp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Fp=Mp(Zh),Np=Mp(tp);function Op(e,t){var n=tp((e=Ch(e)).l,(t=Ch(t)).l),r=tp(e.a,t.a),i=tp(e.b,t.b),o=tp(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function $p(e){return function(t,n){var r=e((t=Th(t)).h,(n=Th(n)).h),i=tp(t.c,n.c),o=tp(t.l,n.l),a=tp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Tp=$p(Zh),zp=$p(tp);function Rp(e){return function t(n){function r(t,r){var i=e((t=Vh(t)).h,(r=Vh(r)).h),o=tp(t.s,r.s),a=tp(t.l,r.l),s=tp(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var Pp=Rp(Zh),Lp=Rp(tp);function Bp(e,t){void 0===t&&(t=e,e=yp);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var Ip=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};function jp(e){return+e}t(Id,"interpolate",(function(){return yp})),t(Id,"interpolateArray",(function(){return up})),t(Id,"interpolateBasis",(function(){return Xh})),t(Id,"interpolateBasisClosed",(function(){return Qh})),t(Id,"interpolateDate",(function(){return cp})),t(Id,"interpolateDiscrete",(function(){return vp})),t(Id,"interpolateHue",(function(){return bp})),t(Id,"interpolateNumber",(function(){return fp})),t(Id,"interpolateNumberArray",(function(){return ap})),t(Id,"interpolateObject",(function(){return dp})),t(Id,"interpolateRound",(function(){return xp})),t(Id,"interpolateString",(function(){return gp})),t(Id,"interpolateTransformSvg",(function(){return Ap})),t(Id,"interpolateTransformCss",(function(){return Sp})),t(Id,"interpolateZoom",(function(){return Dp})),t(Id,"interpolateRgbBasisClosed",(function(){return op})),t(Id,"interpolateRgbBasis",(function(){return ip})),t(Id,"interpolateRgb",(function(){return np})),t(Id,"interpolateHslLong",(function(){return Np})),t(Id,"interpolateHsl",(function(){return Fp})),t(Id,"interpolateLab",(function(){return Op})),t(Id,"interpolateHclLong",(function(){return zp})),t(Id,"interpolateHcl",(function(){return Tp})),t(Id,"interpolateCubehelixLong",(function(){return Lp})),t(Id,"interpolateCubehelix",(function(){return Pp})),t(Id,"piecewise",(function(){return Bp})),t(Id,"quantize",(function(){return Ip}));var Up=[0,1];function qp(e){return e}function Wp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Hp(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Wp(i,r),o=n(a,o)):(r=Wp(r,i),o=n(o,a)),function(e){return o(r(e))}}function Vp(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Wp(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=xd(e,t,1,r)-1;return o[n](i[n](t))}}function Gp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yp(){var e,t,n,r,i,o,a=Up,s=Up,u=yp,l=qp;function c(){var e,t,n,u=Math.min(a.length,s.length);return l!==qp&&(e=a[0],t=a[u-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?Vp:Hp,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),fp)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,jp),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=xp,c()},f.clamp=function(e){return arguments.length?(l=!!e||qp,c()):l!==qp},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function Xp(){return Yp()(qp,qp)}function Qp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Jp(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function Kp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var Zp=function(e){return(e=Kp(Math.abs(e)))?e[1]:NaN},em=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tm(e){if(!(t=em.exec(e)))throw new Error("invalid format: "+e);var t;return new nm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function nm(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}tm.prototype=nm.prototype,nm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var rm,im,om,am,sm=function(e,t){var n=Kp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},um={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sm(100*e,t),r:sm,s:function(e,t){var n=Kp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(rm=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Kp(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},lm=function(e){return e},cm=Array.prototype.map,fm=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],dm=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?lm:(t=cm.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?lm:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(cm.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=tm(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):um[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?u:"",w=um[v],_=/[defgprs%]/.test(v);function k(e){var i,o,u,d=b,k=x;if("c"===v)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===v?fm[8+rm/3]:"")+k+(E&&"("===f?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!h&&(e=r(e,1/0));var S=d.length+e.length+k.length,A=S<p?new Array(p-S+1).join(t):"";switch(m&&h&&(e=r(A+e,A.length?p-k.length:1/0),A=""),n){case"<":e=d+e+k+A;break;case"=":e=d+A+e+k;break;case"^":e=A.slice(0,S=A.length>>1)+d+e+k+A.slice(S);break;default:e=A+d+e+k}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=tm(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Zp(t)/3))),i=Math.pow(10,-r),o=fm[8+r/3];return function(e){return n(i*e)+o}}}};im=dm({thousands:",",grouping:[3],currency:["$",""]}),om=im.format,am=im.formatPrefix;var hm=function(e){return Math.max(0,-Zp(Math.abs(e)))},pm=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zp(t)/3)))-Zp(Math.abs(e)))},mm=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zp(t)-Zp(e))+1};function gm(e,t,n,r){var i,o=Md(e,t,n);switch((r=tm(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=pm(o,a))||(r.precision=i),am(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=mm(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=hm(o))||(r.precision=i-2*("%"===r.type))}return om(r)}function ym(e){var t=e.domain;return e.ticks=function(e){var n=t();return Cd(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return gm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=Dd(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function vm(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function bm(e){return Math.log(e)}function xm(e){return Math.exp(e)}function wm(e){return-Math.log(-e)}function _m(e){return-Math.exp(-e)}function km(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Em(e){return function(t){return-e(-t)}}function Sm(e){var t,n,r=e(bm,xm),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?km:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Em(t),n=Em(n),e(wm,_m)):e(bm,xm),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<o;++c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(c=o-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=Cd(s,u,p))}else m=Cd(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=om(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(vm(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Am(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Cm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dm(e){var t=1,n=e(Am(t),Cm(t));return n.constant=function(n){return arguments.length?e(Am(t=+n),Cm(t)):t},ym(n)}const Mm=Symbol("implicit");function Fm(){var e=new Map,t=[],n=[],r=Mm;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==Mm)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Fm(t,n).unknown(r)},Qp.apply(i,arguments),i}function Nm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Om(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $m(e){return e<0?-e*e:e*e}function Tm(e){var t=e(qp,qp),n=1;function r(){return 1===n?e(qp,qp):.5===n?e(Om,$m):e(Nm(n),Nm(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},ym(t)}function zm(){var e=Tm(Yp());return e.copy=function(){return Gp(e,zm()).exponent(e.exponent())},Qp.apply(e,arguments),e}var Rm=new Date,Pm=new Date;function Lm(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Lm((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Rm.setTime(+t),Pm.setTime(+r),e(Rm),e(Pm),Math.floor(n(Rm,Pm))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Bm=Lm((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Bm.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Lm((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Bm:null};Bm.range;const Im=1e3,jm=6e4,Um=36e5,qm=864e5,Wm=6048e5,Hm=2592e6,Vm=31536e6;var Gm=Lm((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Im)}),(function(e,t){return(t-e)/Im}),(function(e){return e.getUTCSeconds()})),Ym=(Gm.range,Lm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Im)}),(function(e,t){e.setTime(+e+t*jm)}),(function(e,t){return(t-e)/jm}),(function(e){return e.getMinutes()}))),Xm=(Ym.range,Lm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Im-e.getMinutes()*jm)}),(function(e,t){e.setTime(+e+t*Um)}),(function(e,t){return(t-e)/Um}),(function(e){return e.getHours()}))),Qm=(Xm.range,Lm((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jm)/qm),(e=>e.getDate()-1)));Qm.range;function Jm(e){return Lm((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jm)/Wm}))}var Km=Jm(0),Zm=Jm(1),eg=Jm(2),tg=Jm(3),ng=Jm(4),rg=Jm(5),ig=Jm(6),og=(Km.range,Zm.range,eg.range,tg.range,ng.range,rg.range,ig.range,Lm((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),ag=(og.range,Lm((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));ag.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Lm((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};ag.range;var sg=Lm((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*jm)}),(function(e,t){return(t-e)/jm}),(function(e){return e.getUTCMinutes()})),ug=(sg.range,Lm((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Um)}),(function(e,t){return(t-e)/Um}),(function(e){return e.getUTCHours()}))),lg=(ug.range,Lm((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/qm}),(function(e){return e.getUTCDate()-1})));lg.range;function cg(e){return Lm((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Wm}))}var fg=cg(0),dg=cg(1),hg=cg(2),pg=cg(3),mg=cg(4),gg=cg(5),yg=cg(6),vg=(fg.range,dg.range,hg.range,pg.range,mg.range,gg.range,yg.range,Lm((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),bg=(vg.range,Lm((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));bg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Lm((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};bg.range;function xg(e,t,n,r,i,o){const a=[[Gm,1,Im],[Gm,5,5e3],[Gm,15,15e3],[Gm,30,3e4],[o,1,jm],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Um],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,qm],[r,2,1728e5],[n,1,Wm],[t,1,Hm],[t,3,7776e6],[e,1,Vm]];function s(t,n,r){const i=Math.abs(n-t)/r,o=yd((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(Md(t/Vm,n/Vm,r));if(0===o)return Bm.every(Math.max(Md(t,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[wg,_g]=xg(bg,vg,fg,lg,ug,sg),[kg,Eg]=xg(ag,og,Km,Qm,Xm,Ym);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ag(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Dg(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=Ig(i),c=jg(i),f=Ig(o),d=jg(o),h=Ig(a),p=jg(a),m=Ig(s),g=jg(s),y=Ig(u),v=jg(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:uy,e:uy,f:hy,g:Ey,G:Ay,H:ly,I:cy,j:fy,L:dy,m:py,M:my,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Xy,s:Qy,S:gy,u:yy,U:vy,V:xy,w:wy,W:_y,x:null,X:null,y:ky,Y:Sy,Z:Cy,"%":Yy},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Dy,e:Dy,f:$y,g:Wy,G:Vy,H:My,I:Fy,j:Ny,L:Oy,m:Ty,M:zy,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Xy,s:Qy,S:Ry,u:Py,U:Ly,V:Iy,w:jy,W:Uy,x:null,X:null,y:qy,Y:Hy,Z:Gy,"%":Yy},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Kg,e:Kg,f:iy,g:Yg,G:Gg,H:ey,I:ey,j:Zg,L:ry,m:Jg,M:ty,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Qg,Q:ay,s:sy,S:ny,u:qg,U:Wg,V:Hg,w:Ug,W:Vg,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Yg,Y:Gg,Z:Xg,"%":oy};function _(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Tg[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=Cg(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ag(Cg(o.y,0,1))).getUTCDay(),r=i>4||0===i?dg.ceil(r):dg(r),r=lg.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Sg(Cg(o.y,0,1))).getDay(),r=i>4||0===i?Zm.ceil(r):Zm(r),r=Qm.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ag(Cg(o.y,0,1)).getUTCDay():Sg(Cg(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ag(o)):Sg(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Tg?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var Mg,Fg,Ng,Og,$g,Tg={"-":"",_:" ",0:"0"},zg=/^\s*\d+/,Rg=/^%/,Pg=/[\\^$*+?|[\]().{}]/g;function Lg(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Bg(e){return e.replace(Pg,"\\$&")}function Ig(e){return new RegExp("^(?:"+e.map(Bg).join("|")+")","i")}function jg(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Ug(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function qg(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Hg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Vg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Gg(e,t,n){var r=zg.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Xg(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qg(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Jg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Zg(e,t,n){var r=zg.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ey(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ty(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ny(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ry(e,t,n){var r=zg.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function iy(e,t,n){var r=zg.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oy(e,t,n){var r=Rg.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ay(e,t,n){var r=zg.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function sy(e,t,n){var r=zg.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uy(e,t){return Lg(e.getDate(),t,2)}function ly(e,t){return Lg(e.getHours(),t,2)}function cy(e,t){return Lg(e.getHours()%12||12,t,2)}function fy(e,t){return Lg(1+Qm.count(ag(e),e),t,3)}function dy(e,t){return Lg(e.getMilliseconds(),t,3)}function hy(e,t){return dy(e,t)+"000"}function py(e,t){return Lg(e.getMonth()+1,t,2)}function my(e,t){return Lg(e.getMinutes(),t,2)}function gy(e,t){return Lg(e.getSeconds(),t,2)}function yy(e){var t=e.getDay();return 0===t?7:t}function vy(e,t){return Lg(Km.count(ag(e)-1,e),t,2)}function by(e){var t=e.getDay();return t>=4||0===t?ng(e):ng.ceil(e)}function xy(e,t){return e=by(e),Lg(ng.count(ag(e),e)+(4===ag(e).getDay()),t,2)}function wy(e){return e.getDay()}function _y(e,t){return Lg(Zm.count(ag(e)-1,e),t,2)}function ky(e,t){return Lg(e.getFullYear()%100,t,2)}function Ey(e,t){return Lg((e=by(e)).getFullYear()%100,t,2)}function Sy(e,t){return Lg(e.getFullYear()%1e4,t,4)}function Ay(e,t){var n=e.getDay();return Lg((e=n>=4||0===n?ng(e):ng.ceil(e)).getFullYear()%1e4,t,4)}function Cy(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Lg(t/60|0,"0",2)+Lg(t%60,"0",2)}function Dy(e,t){return Lg(e.getUTCDate(),t,2)}function My(e,t){return Lg(e.getUTCHours(),t,2)}function Fy(e,t){return Lg(e.getUTCHours()%12||12,t,2)}function Ny(e,t){return Lg(1+lg.count(bg(e),e),t,3)}function Oy(e,t){return Lg(e.getUTCMilliseconds(),t,3)}function $y(e,t){return Oy(e,t)+"000"}function Ty(e,t){return Lg(e.getUTCMonth()+1,t,2)}function zy(e,t){return Lg(e.getUTCMinutes(),t,2)}function Ry(e,t){return Lg(e.getUTCSeconds(),t,2)}function Py(e){var t=e.getUTCDay();return 0===t?7:t}function Ly(e,t){return Lg(fg.count(bg(e)-1,e),t,2)}function By(e){var t=e.getUTCDay();return t>=4||0===t?mg(e):mg.ceil(e)}function Iy(e,t){return e=By(e),Lg(mg.count(bg(e),e)+(4===bg(e).getUTCDay()),t,2)}function jy(e){return e.getUTCDay()}function Uy(e,t){return Lg(dg.count(bg(e)-1,e),t,2)}function qy(e,t){return Lg(e.getUTCFullYear()%100,t,2)}function Wy(e,t){return Lg((e=By(e)).getUTCFullYear()%100,t,2)}function Hy(e,t){return Lg(e.getUTCFullYear()%1e4,t,4)}function Vy(e,t){var n=e.getUTCDay();return Lg((e=n>=4||0===n?mg(e):mg.ceil(e)).getUTCFullYear()%1e4,t,4)}function Gy(){return"+0000"}function Yy(){return"%"}function Xy(e){return+e}function Qy(e){return Math.floor(+e/1e3)}function Jy(e){return new Date(e)}function Ky(e){return e instanceof Date?+e:+new Date(+e)}function Zy(e,t,n,r,i,o,a,s,u,l){var c=Xp(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?h:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(Array.from(e,Ky)):d().map(Jy)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(vm(n,e)):c},c.copy=function(){return Gp(c,Zy(e,t,n,r,i,o,a,s,u,l))},c}function ev(){var e,t,n,r,i,o=0,a=1,s=qp,u=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(yp),l.rangeRound=c(xp),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function tv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nv(){var e=ym(ev()(qp));return e.copy=function(){return tv(e,nv())},Jp.apply(e,arguments)}function rv(){var e=Tm(ev());return e.copy=function(){return tv(e,rv()).exponent(e.exponent())},Jp.apply(e,arguments)}function iv(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=qp,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=Bp(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,l]=a,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h):[s,u,l]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(yp),h.rangeRound=p(xp),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h}}function ov(){var e=Tm(iv());return e.copy=function(){return tv(e,ov()).exponent(e.exponent())},Jp.apply(e,arguments)}!function(e){Mg=Dg(e),Fg=Mg.format,Ng=Mg.parse,Og=Mg.utcFormat,$g=Mg.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var av={value:()=>{}};function sv(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new uv(r)}function uv(e){this._=e}function lv(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function cv(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function fv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=av,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}uv.prototype=sv.prototype={constructor:uv,on:function(e,t){var n,r=this._,i=lv(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=fv(r[n],e.name,t);else if(null==t)for(n in r)r[n]=fv(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=cv(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uv(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var dv=function(e){return function(){return this.matches(e)}};function hv(e){return function(t){return t.matches(e)}}var pv="http://www.w3.org/1999/xhtml",mv={svg:"http://www.w3.org/2000/svg",xhtml:pv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gv=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),mv.hasOwnProperty(t)?{space:mv[t],local:e}:e};function yv(){}var vv=function(e){return null==e?yv:function(){return this.querySelector(e)}},bv=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function xv(){return[]}var wv=function(e){return null==e?xv:function(){return this.querySelectorAll(e)}};var _v=Array.prototype.find;function kv(){return this.firstElementChild}var Ev=Array.prototype.filter;function Sv(){return this.children}var Av=function(e){return new Array(e.length)};function Cv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cv.prototype={constructor:Cv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Dv=function(e){return function(){return e}};function Mv(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Cv(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Fv(e,t,n,r,i,o,a){var s,u,l,c=new Map,f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new Cv(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function Nv(e){return e.__data__}function Ov(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $v(e){return function(){this.removeAttribute(e)}}function Tv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zv(e,t){return function(){this.setAttribute(e,t)}}function Rv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Lv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Bv=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Iv(e){return function(){this.style.removeProperty(e)}}function jv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uv(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qv(e,t){return e.style.getPropertyValue(t)||Bv(e).getComputedStyle(e,null).getPropertyValue(t)}function Wv(e){return function(){delete this[e]}}function Hv(e,t){return function(){this[e]=t}}function Vv(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Gv(e){return e.trim().split(/^|\s+/)}function Yv(e){return e.classList||new Xv(e)}function Xv(e){this._node=e,this._names=Gv(e.getAttribute("class")||"")}function Qv(e,t){for(var n=Yv(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Jv(e,t){for(var n=Yv(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Kv(e){return function(){Qv(this,e)}}function Zv(e){return function(){Jv(this,e)}}function eb(e,t){return function(){(t.apply(this,arguments)?Qv:Jv)(this,e)}}Xv.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tb(){this.textContent=""}function nb(e){return function(){this.textContent=e}}function rb(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ib(){this.innerHTML=""}function ob(e){return function(){this.innerHTML=e}}function ab(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function sb(){this.nextSibling&&this.parentNode.appendChild(this)}function ub(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lb(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pv&&t.documentElement.namespaceURI===pv?t.createElement(e):t.createElementNS(n,e)}}function cb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var fb=function(e){var t=gv(e);return(t.local?cb:lb)(t)};function db(){return null}function hb(){var e=this.parentNode;e&&e.removeChild(this)}function pb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gb(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function yb(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function vb(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function bb(e,t,n){var r=Bv(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xb(e,t){return function(){return bb(this,e,t)}}function wb(e,t){return function(){return bb(this,e,t.apply(this,arguments))}}var _b=[null];function kb(e,t){this._groups=e,this._parents=t}function Eb(){return new kb([[document.documentElement]],_b)}kb.prototype=Eb.prototype={constructor:kb,select:function(e){"function"!=typeof e&&(e=vv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new kb(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:bv(t)}}(e):wv(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new kb(r,i)},selectChild:function(e){return this.select(null==e?kv:function(e){return function(){return _v.call(this.children,e)}}("function"==typeof e?e:hv(e)))},selectChildren:function(e){return this.selectAll(null==e?Sv:function(e){return function(){return Ev.call(this.children,e)}}("function"==typeof e?e:hv(e)))},filter:function(e){"function"!=typeof e&&(e=dv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new kb(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Nv);var n=t?Fv:Mv,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Dv(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=bv(e.call(c,c&&c.__data__,l,r)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);v._next=b||null}}return(a=new kb(a,r))._enter=s,a._exit=u,a},enter:function(){return new kb(this._enter||this._groups.map(Av),this._parents)},exit:function(){return new kb(this._exit||this._groups.map(Av),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof kb))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new kb(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ov);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new kb(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=gv(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Tv:$v:"function"==typeof t?n.local?Lv:Pv:n.local?Rv:zv)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Iv:"function"==typeof t?Uv:jv)(e,t,null==n?"":n)):qv(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Wv:"function"==typeof t?Vv:Hv)(e,t)):this.node()[e]},classed:function(e,t){var n=Gv(e+"");if(arguments.length<2){for(var r=Yv(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?eb:t?Kv:Zv)(n,t))},text:function(e){return arguments.length?this.each(null==e?tb:("function"==typeof e?rb:nb)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ib:("function"==typeof e?ab:ob)(e)):this.node().innerHTML},raise:function(){return this.each(sb)},lower:function(){return this.each(ub)},append:function(e){var t="function"==typeof e?e:fb(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:fb(e),r=null==t?db:"function"==typeof t?t:vv(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(hb)},clone:function(e){return this.select(e?mb:pb)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=gb(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?vb:yb,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?wb:xb)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Sb=function(e){return"string"==typeof e?new kb([[document.querySelector(e)]],[document.documentElement]):new kb([[e]],_b)};var Ab,Cb,Db=0,Mb=0,Fb=0,Nb=0,Ob=0,$b=0,Tb="object"==typeof performance&&performance.now?performance:Date,zb="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rb(){return Ob||(zb(Pb),Ob=Tb.now()+$b)}function Pb(){Ob=0}function Lb(){this._call=this._time=this._next=null}function Bb(e,t,n){var r=new Lb;return r.restart(e,t,n),r}function Ib(){Ob=(Nb=Tb.now())+$b,Db=Mb=0;try{!function(){Rb(),++Db;for(var e,t=Ab;t;)(e=Ob-t._time)>=0&&t._call.call(null,e),t=t._next;--Db}()}finally{Db=0,function(){var e,t,n=Ab,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ab=t);Cb=e,Ub(r)}(),Ob=0}}function jb(){var e=Tb.now(),t=e-Nb;t>1e3&&($b-=t,Nb=e)}function Ub(e){Db||(Mb&&(Mb=clearTimeout(Mb)),e-Ob>24?(e<1/0&&(Mb=setTimeout(Ib,e-Tb.now()-$b)),Fb&&(Fb=clearInterval(Fb))):(Fb||(Nb=Tb.now(),Fb=setInterval(jb,1e3)),Db=1,zb(Ib)))}Lb.prototype=Bb.prototype={constructor:Lb,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Rb():+n)+(null==t?0:+t),this._next||Cb===this||(Cb?Cb._next=this:Ab=this,Cb=this),this._call=e,this._time=n,Ub()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ub())}};var qb=function(e,t,n){var r=new Lb;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r},Wb=sv("start","end","cancel","interrupt"),Hb=[],Vb=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,f,d;if(1!==n.state)return u();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return qb(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(qb((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Bb(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Wb,tween:Hb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Gb(e,t){var n=Xb(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Yb(e,t){var n=Xb(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Xb(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Qb=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};function Jb(e,t){var n,r;return function(){var i=Yb(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Kb(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Yb(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Zb(e,t,n){var r=e._id;return e.each((function(){var e=Yb(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Xb(e,r).value[t]}}var ex=function(e,t){var n;return("number"==typeof t?fp:t instanceof oh?np:(n=oh(t))?(t=n,np):gp)(e,t)};function tx(e){return function(){this.removeAttribute(e)}}function nx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rx(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function ix(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function ox(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function ax(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function sx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ux(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lx(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ux(e,i)),n}return i._value=t,i}function cx(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&sx(e,i)),n}return i._value=t,i}function fx(e,t){return function(){Gb(this,e).delay=+t.apply(this,arguments)}}function dx(e,t){return t=+t,function(){Gb(this,e).delay=t}}function hx(e,t){return function(){Yb(this,e).duration=+t.apply(this,arguments)}}function px(e,t){return t=+t,function(){Yb(this,e).duration=t}}function mx(e,t){if("function"!=typeof t)throw new Error;return function(){Yb(this,e).ease=t}}function gx(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Gb:Yb;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var yx=Eb.prototype.constructor;function vx(e){return function(){this.style.removeProperty(e)}}function bx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xx(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bx(e,o,n)),r}return o._value=t,o}function wx(e){return function(t){this.textContent=e.call(this,t)}}function _x(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&wx(r)),t}return r._value=e,r}var kx=0;function Ex(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Sx(){return++kx}var Ax=Eb.prototype;Ex.prototype=function(e){return Eb().transition(e)}.prototype={constructor:Ex,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vv(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,Vb(f[d],t,n,d,f,Xb(s,n)));return new Ex(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=wv(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=Xb(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&Vb(d,t,n,m,h,p);o.push(h),a.push(u)}return new Ex(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=dv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Ex(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new Ex(a,this._parents,this._name,this._id)},selection:function(){return new yx(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Sx(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Xb(a,t);Vb(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ex(r,this._parents,e,n)},call:Ax.call,nodes:Ax.nodes,node:Ax.node,size:Ax.size,empty:Ax.empty,each:Ax.each,on:function(e,t){var n=this._id;return arguments.length<2?Xb(this.node(),n).on.on(e):this.each(gx(n,e,t))},attr:function(e,t){var n=gv(e),r="transform"===n?Ap:ex;return this.attrTween(e,"function"==typeof t?(n.local?ax:ox)(n,r,Zb(this,"attr."+e,t)):null==t?(n.local?nx:tx)(n):(n.local?ix:rx)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=gv(e);return this.tween(n,(r.local?lx:cx)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Sp:ex;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=qv(this,e),a=(this.style.removeProperty(e),qv(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,vx(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=qv(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=qv(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,Zb(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=Yb(this,e),l=u.on,c=null==u.value[a]?o||(o=vx(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=qv(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,xx(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Zb(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,_x(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Xb(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Jb:Kb)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?fx:dx)(t,e)):Xb(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?hx:px)(t,e)):Xb(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(mx(t,e)):Xb(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Yb(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Yb(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Ax[Symbol.iterator]};var Cx={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Dx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Eb.prototype.interrupt=function(e){return this.each((function(){Qb(this,e)}))},Eb.prototype.transition=function(e){var t,n;e instanceof Ex?(t=e._id,e=e._name):(t=Sx(),(n=Cx).time=Rb(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Vb(a,e,t,l,s,n||Dx(a,t));return new Ex(r,this._parents,e,t)};const{abs:Mx,max:Fx,min:Nx}=Math;["w","e"].map(Ox),["n","s"].map(Ox),["n","w","e","s","nw","ne","sw","se"].map(Ox);function Ox(e){return{type:e}}function $x(e,t,n){this.k=e,this.x=t,this.y=n}$x.prototype={constructor:$x,scale:function(e){return 1===e?this:new $x(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new $x(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new $x(1,0,0);$x.prototype;xe();var Tx,zx={},Rx=(Tx=function(e,t){return(Tx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Tx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Px=Object.prototype.hasOwnProperty;
/*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017 Joachim Wester
  * MIT license
  */function Lx(e,t){return Px.call(e,t)}function Bx(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)Lx(e,r)&&t.push(r);return t}function Ix(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function jx(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function Ux(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function qx(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Wx(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Wx(e[t]))return!0}else if("object"==typeof e){var r=Bx(e),i=r.length;for(t=0;t<i;t++)if(Wx(e[r[t]]))return!0}return!1}function Hx(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}t(zx,"hasOwnProperty",(function(){return Lx})),t(zx,"_objectKeys",(function(){return Bx})),t(zx,"_deepClone",(function(){return Ix})),t(zx,"isInteger",(function(){return jx})),t(zx,"escapePathComponent",(function(){return Ux})),t(zx,"unescapePathComponent",(function(){return qx})),t(zx,"hasUndefined",(function(){return Wx}));var Vx=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,Hx(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=Hx(t,{name:n,index:r,operation:i,tree:o}),s}return Rx(t,e),t}(Error);t(zx,"PatchError",(function(){return Vx}));var Gx=zx.PatchError,Yx={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Qx(n,this.path);r&&(r=zx._deepClone(r));var i=Jx(n,{op:"remove",path:this.from}).removed;return Jx(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Qx(n,this.from);return Jx(n,{op:"add",path:this.path,value:zx._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:ew(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Xx={add:function(e,t,n){return zx.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Yx.move,copy:Yx.copy,test:Yx.test,_get:Yx._get};function Qx(e,t){if(""==t)return e;var n={op:"_get",path:t};return Jx(e,n),n.value}function Jx(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):Zx(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=Qx(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=ew(e,t.value),!1===a.test)throw new Gx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new Gx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=zx._deepClone(e));var s=(t.path||"").split("/"),u=e,l=1,c=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:Zx;;){if(d=s[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,l).join("/"):l==c-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),l++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!zx.isInteger(d))throw new Gx("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);zx.isInteger(d)&&(d=~~d)}if(l>=c){if(n&&"add"===t.op&&d>u.length)throw new Gx("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=Xx[t.op].call(t,u,d,e)).test)throw new Gx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=zx.unescapePathComponent(d)),l>=c){if(!1===(a=Yx[t.op].call(t,u,d,e)).test)throw new Gx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function Kx(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new Gx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=zx._deepClone(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Jx(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function Zx(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Gx("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!Yx[e.op])throw new Gx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Gx("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Gx('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Gx("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Gx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&zx.hasUndefined(e.value))throw new Gx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Gx("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Gx("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=function(e,t,n){try{if(!Array.isArray(e))throw new Gx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Kx(zx._deepClone(t),zx._deepClone(e),n||!0);else{n=n||Zx;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof Gx)return e;throw e}}([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Gx("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function ew(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!ew(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!ew(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;Object.assign({},H2,H2,{JsonPatchError:zx.PatchError,deepClone:zx._deepClone,escapePathComponent:zx.escapePathComponent,unescapePathComponent:zx.unescapePathComponent});var tw,nw,rw,iw,ow=/("(?:[^\\"]|\\.)*")|[:,]/g,aw=e((function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,a){var s,u,l,c,f,d,h,p,m,g,y,v;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,i)))return y;if(h=r-o.length-a,y.length<=h&&(m=y.replace(ow,(function(e,t){return t||e+" "}))).length<=h)return m;if(null!=i&&(t=JSON.parse(y),i=void 0),"object"==typeof t&&null!==t){if(p=o+n,l=[],u=0,Array.isArray(t))for(g="[",s="]",h=t.length;u<h;u++)l.push(e(t[u],p,u===h-1?0:1)||"null");else for(g="{",s="}",h=(d=Object.keys(t)).length;u<h;u++)c=d[u],f=JSON.stringify(c)+": ",void 0!==(v=e(t[c],p,f.length+(u===h-1?0:1)))&&l.push(f+v);if(l.length>0)return[g,n+l.join(",\n"+p),s].join("\n"+o)}return y}(e,"",0)})),sw={},uw={};const lw=Number.MAX_SAFE_INTEGER||9007199254740991;iw={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:lw,MAX_SAFE_COMPONENT_LENGTH:16};var cw,fw,dw,hw={};function pw(){throw new Error("setTimeout has not been defined")}function mw(){throw new Error("clearTimeout has not been defined")}function gw(e){if(fw===setTimeout)return setTimeout(e,0);if((fw===pw||!fw)&&setTimeout)return fw=setTimeout,setTimeout(e,0);try{return fw(e,0)}catch(t){try{return fw.call(null,e,0)}catch(t){return fw.call(this,e,0)}}}!function(){try{fw="function"==typeof setTimeout?setTimeout:pw}catch(e){fw=pw}try{dw="function"==typeof clearTimeout?clearTimeout:mw}catch(e){dw=mw}}();var yw,vw=[],bw=!1,xw=-1;function ww(){bw&&yw&&(bw=!1,yw.length?vw=yw.concat(vw):xw=-1,vw.length&&_w())}function _w(){if(!bw){var e=gw(ww);bw=!0;for(var t=vw.length;t;){for(yw=vw,vw=[];++xw<t;)yw&&yw[xw].run();xw=-1,t=vw.length}yw=null,bw=!1,function(e){if(dw===clearTimeout)return clearTimeout(e);if((dw===mw||!dw)&&clearTimeout)return dw=clearTimeout,clearTimeout(e);try{dw(e)}catch(t){try{return dw.call(null,e)}catch(t){return dw.call(this,e)}}}(e)}}function kw(e,t){this.fun=e,this.array=t}function Ew(){}hw.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];vw.push(new kw(e,t)),1!==vw.length||bw||gw(_w)},kw.prototype.run=function(){this.fun.apply(null,this.array)},hw.title="browser",hw.browser=!0,hw.env={},hw.argv=[],hw.version="",hw.versions={},hw.on=Ew,hw.addListener=Ew,hw.once=Ew,hw.off=Ew,hw.removeListener=Ew,hw.removeAllListeners=Ew,hw.emit=Ew,hw.prependListener=Ew,hw.prependOnceListener=Ew,hw.listeners=function(e){return[]},hw.binding=function(e){throw new Error("process.binding is not supported")},hw.cwd=function(){return"/"},hw.chdir=function(e){throw new Error("process.chdir is not supported")},hw.umask=function(){return 0};const Sw=cw=()=>{};uw={};const Aw=(tw=[],uw.re=tw),Cw=(nw=[],uw.src=nw),Dw=(rw={},uw.t=rw);let Mw=0;const Fw=(e,t,n)=>{const r=Mw++;Sw(r,t),Dw[e]=r,Cw[r]=t,Aw[r]=new RegExp(t,n?"g":void 0)};Fw("NUMERICIDENTIFIER","0|[1-9]\\d*"),Fw("NUMERICIDENTIFIERLOOSE","[0-9]+"),Fw("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),Fw("MAINVERSION",`(${Cw[Dw.NUMERICIDENTIFIER]})\\.(${Cw[Dw.NUMERICIDENTIFIER]})\\.(${Cw[Dw.NUMERICIDENTIFIER]})`),Fw("MAINVERSIONLOOSE",`(${Cw[Dw.NUMERICIDENTIFIERLOOSE]})\\.(${Cw[Dw.NUMERICIDENTIFIERLOOSE]})\\.(${Cw[Dw.NUMERICIDENTIFIERLOOSE]})`),Fw("PRERELEASEIDENTIFIER",`(?:${Cw[Dw.NUMERICIDENTIFIER]}|${Cw[Dw.NONNUMERICIDENTIFIER]})`),Fw("PRERELEASEIDENTIFIERLOOSE",`(?:${Cw[Dw.NUMERICIDENTIFIERLOOSE]}|${Cw[Dw.NONNUMERICIDENTIFIER]})`),Fw("PRERELEASE",`(?:-(${Cw[Dw.PRERELEASEIDENTIFIER]}(?:\\.${Cw[Dw.PRERELEASEIDENTIFIER]})*))`),Fw("PRERELEASELOOSE",`(?:-?(${Cw[Dw.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Cw[Dw.PRERELEASEIDENTIFIERLOOSE]})*))`),Fw("BUILDIDENTIFIER","[0-9A-Za-z-]+"),Fw("BUILD",`(?:\\+(${Cw[Dw.BUILDIDENTIFIER]}(?:\\.${Cw[Dw.BUILDIDENTIFIER]})*))`),Fw("FULLPLAIN",`v?${Cw[Dw.MAINVERSION]}${Cw[Dw.PRERELEASE]}?${Cw[Dw.BUILD]}?`),Fw("FULL",`^${Cw[Dw.FULLPLAIN]}$`),Fw("LOOSEPLAIN",`[v=\\s]*${Cw[Dw.MAINVERSIONLOOSE]}${Cw[Dw.PRERELEASELOOSE]}?${Cw[Dw.BUILD]}?`),Fw("LOOSE",`^${Cw[Dw.LOOSEPLAIN]}$`),Fw("GTLT","((?:<|>)?=?)"),Fw("XRANGEIDENTIFIERLOOSE",`${Cw[Dw.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),Fw("XRANGEIDENTIFIER",`${Cw[Dw.NUMERICIDENTIFIER]}|x|X|\\*`),Fw("XRANGEPLAIN",`[v=\\s]*(${Cw[Dw.XRANGEIDENTIFIER]})(?:\\.(${Cw[Dw.XRANGEIDENTIFIER]})(?:\\.(${Cw[Dw.XRANGEIDENTIFIER]})(?:${Cw[Dw.PRERELEASE]})?${Cw[Dw.BUILD]}?)?)?`),Fw("XRANGEPLAINLOOSE",`[v=\\s]*(${Cw[Dw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cw[Dw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Cw[Dw.XRANGEIDENTIFIERLOOSE]})(?:${Cw[Dw.PRERELEASELOOSE]})?${Cw[Dw.BUILD]}?)?)?`),Fw("XRANGE",`^${Cw[Dw.GTLT]}\\s*${Cw[Dw.XRANGEPLAIN]}$`),Fw("XRANGELOOSE",`^${Cw[Dw.GTLT]}\\s*${Cw[Dw.XRANGEPLAINLOOSE]}$`),Fw("COERCE",`(^|[^\\d])(\\d{1,${iw.MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${iw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${iw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),Fw("COERCERTL",Cw[Dw.COERCE],!0),Fw("LONETILDE","(?:~>?)"),Fw("TILDETRIM",`(\\s*)${Cw[Dw.LONETILDE]}\\s+`,!0);uw.tildeTrimReplace="$1~",Fw("TILDE",`^${Cw[Dw.LONETILDE]}${Cw[Dw.XRANGEPLAIN]}$`),Fw("TILDELOOSE",`^${Cw[Dw.LONETILDE]}${Cw[Dw.XRANGEPLAINLOOSE]}$`),Fw("LONECARET","(?:\\^)"),Fw("CARETTRIM",`(\\s*)${Cw[Dw.LONECARET]}\\s+`,!0);uw.caretTrimReplace="$1^",Fw("CARET",`^${Cw[Dw.LONECARET]}${Cw[Dw.XRANGEPLAIN]}$`),Fw("CARETLOOSE",`^${Cw[Dw.LONECARET]}${Cw[Dw.XRANGEPLAINLOOSE]}$`),Fw("COMPARATORLOOSE",`^${Cw[Dw.GTLT]}\\s*(${Cw[Dw.LOOSEPLAIN]})$|^$`),Fw("COMPARATOR",`^${Cw[Dw.GTLT]}\\s*(${Cw[Dw.FULLPLAIN]})$|^$`),Fw("COMPARATORTRIM",`(\\s*)${Cw[Dw.GTLT]}\\s*(${Cw[Dw.LOOSEPLAIN]}|${Cw[Dw.XRANGEPLAIN]})`,!0);uw.comparatorTrimReplace="$1$2$3",Fw("HYPHENRANGE",`^\\s*(${Cw[Dw.XRANGEPLAIN]})\\s+-\\s+(${Cw[Dw.XRANGEPLAIN]})\\s*$`),Fw("HYPHENRANGELOOSE",`^\\s*(${Cw[Dw.XRANGEPLAINLOOSE]})\\s+-\\s+(${Cw[Dw.XRANGEPLAINLOOSE]})\\s*$`),Fw("STAR","(<|>)?=?\\s*\\*"),Fw("GTE0","^\\s*>=\\s*0.0.0\\s*$"),Fw("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");var Nw;const Ow=cw;var $w;const Tw=["includePrerelease","loose","rtl"],zw=$w=e=>e?"object"!=typeof e?{loose:!0}:Tw.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};var Rw;const Pw=/^[0-9]+$/,Lw=(e,t)=>{const n=Pw.test(e),r=Pw.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};Rw={compareIdentifiers:Lw,rcompareIdentifiers:(e,t)=>Lw(t,e)};class Bw{constructor(e,t){if(t=zw(t),e instanceof Bw){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>iw.MAX_LENGTH)throw new TypeError(`version is longer than ${iw.MAX_LENGTH} characters`);Ow("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?uw.re[uw.t.LOOSE]:uw.re[uw.t.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>iw.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>iw.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>iw.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<iw.MAX_SAFE_INTEGER)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Ow("SemVer.compare",this.version,this.options,e),!(e instanceof Bw)){if("string"==typeof e&&e===this.version)return 0;e=new Bw(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Bw||(e=new Bw(e,this.options)),Rw.compareIdentifiers(this.major,e.major)||Rw.compareIdentifiers(this.minor,e.minor)||Rw.compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof Bw||(e=new Bw(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(Ow("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Rw.compareIdentifiers(n,r)}while(++t)}compareBuild(e){e instanceof Bw||(e=new Bw(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(Ow("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Rw.compareIdentifiers(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var Iw;const jw=Nw=Bw,Uw=$w;var qw;const Ww=Iw=(e,t)=>{if(t=Uw(t),e instanceof jw)return e;if("string"!=typeof e)return null;if(e.length>iw.MAX_LENGTH)return null;if(!(t.loose?uw.re[uw.t.LOOSE]:uw.re[uw.t.FULL]).test(e))return null;try{return new jw(e,t)}catch(e){return null}};qw=(e,t)=>{const n=Ww(e,t);return n?n.version:null};var Hw;const Vw=Iw;Hw=(e,t)=>{const n=Vw(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var Gw;const Yw=Nw;Gw=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new Yw(e,n).inc(t,r).version}catch(e){return null}};var Xw;const Qw=Iw;var Jw,Kw;const Zw=Nw,e_=Kw=(e,t,n)=>new Zw(e,n).compare(new Zw(t,n)),t_=Jw=(e,t,n)=>0===e_(e,t,n);Xw=(e,t)=>{if(t_(e,t))return null;{const n=Qw(e),r=Qw(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}};var n_;const r_=Nw;n_=(e,t)=>new r_(e,t).major;var i_;const o_=Nw;i_=(e,t)=>new o_(e,t).minor;var a_;const s_=Nw;a_=(e,t)=>new s_(e,t).patch;var u_;const l_=Iw;u_=(e,t)=>{const n=l_(e,t);return n&&n.prerelease.length?n.prerelease:null};var c_;const f_=Kw;c_=(e,t,n)=>f_(t,e,n);var d_;const h_=Kw;d_=(e,t)=>h_(e,t,!0);var p_;const m_=Nw;var g_;const y_=p_=(e,t,n)=>{const r=new m_(e,n),i=new m_(t,n);return r.compare(i)||r.compareBuild(i)};g_=(e,t)=>e.sort(((e,n)=>y_(e,n,t)));var v_;const b_=p_;v_=(e,t)=>e.sort(((e,n)=>b_(n,e,t)));var x_;const w_=Kw;var __;const k_=Kw;var E_;const S_=Kw;var A_;const C_=Kw;var D_;const M_=Kw;var F_;const N_=Jw,O_=E_=(e,t,n)=>0!==S_(e,t,n),$_=x_=(e,t,n)=>w_(e,t,n)>0,T_=A_=(e,t,n)=>C_(e,t,n)>=0,z_=__=(e,t,n)=>k_(e,t,n)<0,R_=D_=(e,t,n)=>M_(e,t,n)<=0;F_=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return N_(e,n,r);case"!=":return O_(e,n,r);case">":return $_(e,n,r);case">=":return T_(e,n,r);case"<":return z_(e,n,r);case"<=":return R_(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var P_;const L_=Nw,B_=Iw;P_=(e,t)=>{if(e instanceof L_)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=uw.re[uw.t.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),uw.re[uw.t.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;uw.re[uw.t.COERCERTL].lastIndex=-1}else n=e.match(uw.re[uw.t.COERCE]);return null===n?null:B_(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var I_;const j_=Symbol("SemVer ANY");class U_{static get ANY(){return j_}constructor(e,t){if(t=q_(t),e instanceof U_){if(e.loose===!!t.loose)return e;e=e.value}H_("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===j_?this.value="":this.value=this.operator+this.semver.version,H_("comp",this)}parse(e){const t=this.options.loose?uw.re[uw.t.COMPARATORLOOSE]:uw.re[uw.t.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new V_(n[2],this.options.loose):this.semver=j_}toString(){return this.value}test(e){if(H_("Comparator.test",e,this.options.loose),this.semver===j_||e===j_)return!0;if("string"==typeof e)try{e=new V_(e,this.options)}catch(e){return!1}return W_(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof U_))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new jk(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new jk(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=W_(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=W_(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}I_=U_;const q_=$w,W_=F_,H_=cw,V_=Nw;var G_;class Y_{constructor(e,t){if(t=_k(t),e instanceof Y_)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Y_(e.raw,t);if(e instanceof kk)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!Ak(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&Ck(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=wk.get(t);if(n)return n;const r=this.options.loose,i=r?uw.re[uw.t.HYPHENRANGELOOSE]:uw.re[uw.t.HYPHENRANGE];e=e.replace(i,Bk(this.options.includePrerelease)),Ek("hyphen replace",e),e=e.replace(uw.re[uw.t.COMPARATORTRIM],uw.comparatorTrimReplace),Ek("comparator trim",e,uw.re[uw.t.COMPARATORTRIM]),e=(e=(e=e.replace(uw.re[uw.t.TILDETRIM],uw.tildeTrimReplace)).replace(uw.re[uw.t.CARETTRIM],uw.caretTrimReplace)).split(/\s+/).join(" ");const o=r?uw.re[uw.t.COMPARATORLOOSE]:uw.re[uw.t.COMPARATOR],a=e.split(" ").map((e=>Mk(e,this.options))).join(" ").split(/\s+/).map((e=>Lk(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new kk(e,this.options))),s=(a.length,new Map);for(const e of a){if(Ak(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");const u=[...s.values()];return wk.set(t,u),u}intersects(e,t){if(!(e instanceof Y_))throw new TypeError("a Range is required");return this.set.some((n=>Dk(n,t)&&e.set.some((e=>Dk(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Sk(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(Ik(this.set[t],e,this.options))return!0;return!1}}G_=Y_;var X_,Q_=!1;var J_;function K_(e){var t=this;if(t instanceof K_||(t=new K_),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function Z_(e,t,n){var r=t===e.head?new nk(n,null,t,e):new nk(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function ek(e,t){e.tail=new nk(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function tk(e,t){e.head=new nk(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function nk(e,t,n,r){if(!(this instanceof nk))return new nk(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}J_=K_,K_.Node=nk,K_.create=K_,K_.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},K_.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},K_.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},K_.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)ek(this,arguments[e]);return this.length},K_.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)tk(this,arguments[e]);return this.length},K_.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},K_.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},K_.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},K_.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},K_.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},K_.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},K_.prototype.map=function(e,t){t=t||this;for(var n=new K_,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},K_.prototype.mapReverse=function(e,t){t=t||this;for(var n=new K_,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},K_.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},K_.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},K_.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},K_.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},K_.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new K_;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},K_.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new K_;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},K_.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=Z_(this,i,n[r]);return o},K_.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(Q_||(Q_=!0,X_={},X_=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),X_)(K_)}catch(e){}const rk=J_,ik=Symbol("max"),ok=Symbol("length"),ak=Symbol("lengthCalculator"),sk=Symbol("allowStale"),uk=Symbol("maxAge"),lk=Symbol("dispose"),ck=Symbol("noDisposeOnSet"),fk=Symbol("lruList"),dk=Symbol("cache"),hk=Symbol("updateAgeOnGet"),pk=()=>1;const mk=(e,t,n)=>{const r=e[dk].get(t);if(r){const t=r.value;if(gk(e,t)){if(vk(e,r),!e[sk])return}else n&&(e[hk]&&(r.value.now=Date.now()),e[fk].unshiftNode(r));return t.value}},gk=(e,t)=>{if(!t||!t.maxAge&&!e[uk])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[uk]&&n>e[uk]},yk=e=>{if(e[ok]>e[ik])for(let t=e[fk].tail;e[ok]>e[ik]&&null!==t;){const n=t.prev;vk(e,t),t=n}},vk=(e,t)=>{if(t){const n=t.value;e[lk]&&e[lk](n.key,n.value),e[ok]-=n.length,e[dk].delete(n.key),e[fk].removeNode(t)}};class bk{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const xk=(e,t,n,r)=>{let i=n.value;gk(e,i)&&(vk(e,n),e[sk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},wk=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ik]=e.max||1/0;const t=e.length||pk;if(this[ak]="function"!=typeof t?pk:t,this[sk]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[uk]=e.maxAge||0,this[lk]=e.dispose,this[ck]=e.noDisposeOnSet||!1,this[hk]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ik]=e||1/0,yk(this)}get max(){return this[ik]}set allowStale(e){this[sk]=!!e}get allowStale(){return this[sk]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[uk]=e,yk(this)}get maxAge(){return this[uk]}set lengthCalculator(e){"function"!=typeof e&&(e=pk),e!==this[ak]&&(this[ak]=e,this[ok]=0,this[fk].forEach((e=>{e.length=this[ak](e.value,e.key),this[ok]+=e.length}))),yk(this)}get lengthCalculator(){return this[ak]}get length(){return this[ok]}get itemCount(){return this[fk].length}rforEach(e,t){t=t||this;for(let n=this[fk].tail;null!==n;){const r=n.prev;xk(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[fk].head;null!==n;){const r=n.next;xk(this,e,n,t),n=r}}keys(){return this[fk].toArray().map((e=>e.key))}values(){return this[fk].toArray().map((e=>e.value))}reset(){this[lk]&&this[fk]&&this[fk].length&&this[fk].forEach((e=>this[lk](e.key,e.value))),this[dk]=new Map,this[fk]=new rk,this[ok]=0}dump(){return this[fk].map((e=>!gk(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[fk]}set(e,t,n){if((n=n||this[uk])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[ak](t,e);if(this[dk].has(e)){if(i>this[ik])return vk(this,this[dk].get(e)),!1;const o=this[dk].get(e).value;return this[lk]&&(this[ck]||this[lk](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[ok]+=i-o.length,o.length=i,this.get(e),yk(this),!0}const o=new bk(e,t,i,r,n);return o.length>this[ik]?(this[lk]&&this[lk](e,t),!1):(this[ok]+=o.length,this[fk].unshift(o),this[dk].set(e,this[fk].head),yk(this),!0)}has(e){if(!this[dk].has(e))return!1;const t=this[dk].get(e).value;return!gk(this,t)}get(e){return mk(this,e,!0)}peek(e){return mk(this,e,!1)}pop(){const e=this[fk].tail;return e?(vk(this,e),e.value):null}del(e){vk(this,this[dk].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[dk].forEach(((e,t)=>mk(this,t,!1)))}}({max:1e3}),_k=$w,kk=I_,Ek=cw,Sk=Nw,Ak=e=>"<0.0.0-0"===e.value,Ck=e=>""===e.value,Dk=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},Mk=(e,t)=>(Ek("comp",e,t),e=$k(e,t),Ek("caret",e),e=Nk(e,t),Ek("tildes",e),e=zk(e,t),Ek("xrange",e),e=Pk(e,t),Ek("stars",e),e),Fk=e=>!e||"x"===e.toLowerCase()||"*"===e,Nk=(e,t)=>e.trim().split(/\s+/).map((e=>Ok(e,t))).join(" "),Ok=(e,t)=>{const n=t.loose?uw.re[uw.t.TILDELOOSE]:uw.re[uw.t.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return Ek("tilde",e,t,n,r,i,o),Fk(n)?a="":Fk(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:Fk(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(Ek("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,Ek("tilde return",a),a}))},$k=(e,t)=>e.trim().split(/\s+/).map((e=>Tk(e,t))).join(" "),Tk=(e,t)=>{Ek("caret",e,t);const n=t.loose?uw.re[uw.t.CARETLOOSE]:uw.re[uw.t.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return Ek("caret",e,t,n,i,o,a),Fk(n)?s="":Fk(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:Fk(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(Ek("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(Ek("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),Ek("caret return",s),s}))},zk=(e,t)=>(Ek("replaceXRanges",e,t),e.split(/\s+/).map((e=>Rk(e,t))).join(" ")),Rk=(e,t)=>{e=e.trim();const n=t.loose?uw.re[uw.t.XRANGELOOSE]:uw.re[uw.t.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{Ek("xRange",e,n,r,i,o,a,s);const u=Fk(i),l=u||Fk(o),c=l||Fk(a),f=c;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),Ek("xRange return",n),n}))},Pk=(e,t)=>(Ek("replaceStars",e,t),e.trim().replace(uw.re[uw.t.STAR],"")),Lk=(e,t)=>(Ek("replaceGTE0",e,t),e.trim().replace(uw.re[t.includePrerelease?uw.t.GTE0PRE:uw.t.GTE0],"")),Bk=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>`${n=Fk(r)?"":Fk(i)?`>=${r}.0.0${e?"-0":""}`:Fk(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=Fk(l)?"":Fk(c)?`<${+l+1}.0.0-0`:Fk(f)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${f}-${d}`:e?`<${l}.${c}.${+f+1}-0`:`<=${u}`}`.trim(),Ik=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(Ek(e[n].semver),e[n].semver!==kk.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},jk=G_;var Uk;const qk=G_;Uk=(e,t,n)=>{try{t=new qk(t,n)}catch(e){return!1}return t.test(e)};var Wk;const Hk=G_;Wk=(e,t)=>new Hk(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var Vk;const Gk=Nw,Yk=G_;Vk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Yk(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new Gk(r,n)))})),r};var Xk;const Qk=Nw,Jk=G_;Xk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Jk(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new Qk(r,n)))})),r};var Kk;const Zk=Nw,eE=G_,tE=x_;Kk=(e,t)=>{e=new eE(e,t);let n=new Zk("0.0.0");if(e.test(n))return n;if(n=new Zk("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new Zk(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!tE(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!tE(n,i)||(n=i)}return n&&e.test(n)?n:null};var nE;const rE=G_;nE=(e,t)=>{try{return new rE(e,t).range||"*"}catch(e){return null}};var iE;const oE=Nw,aE=I_,{ANY:sE}=aE,uE=G_,lE=Uk,cE=x_,fE=__,dE=D_,hE=A_;var pE;const mE=iE=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new oE(e,r),t=new uE(t,r),n){case">":i=cE,o=dE,a=fE,s=">",u=">=";break;case"<":i=fE,o=hE,a=cE,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(lE(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const l=t.set[n];let c=null,f=null;if(l.forEach((e=>{e.semver===sE&&(e=new aE(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,r)?c=e:a(e.semver,f.semver,r)&&(f=e)})),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0};pE=(e,t,n)=>mE(e,t,">",n);var gE;const yE=iE;gE=(e,t,n)=>yE(e,t,"<",n);var vE;const bE=G_;vE=(e,t,n)=>(e=new bE(e,n),t=new bE(t,n),e.intersects(t));var xE;const wE=Uk,_E=Kw;xE=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort(((e,t)=>_E(e,t,n)));for(const e of a){wE(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const s=[];for(const[e,t]of r)e===t?s.push(e):t||e!==a[0]?t?e===a[0]?s.push(`<=${t}`):s.push(`${e} - ${t}`):s.push(`>=${e}`):s.push("*");const u=s.join(" || "),l="string"==typeof t.raw?t.raw:String(t);return u.length<l.length?u:t};var kE;const EE=G_,SE=I_,{ANY:AE}=SE,CE=Uk,DE=Kw,ME=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===AE){if(1===t.length&&t[0].semver===AE)return!0;e=n.includePrerelease?[new SE(">=0.0.0-0")]:[new SE(">=0.0.0")]}if(1===t.length&&t[0].semver===AE){if(n.includePrerelease)return!0;t=[new SE(">=0.0.0")]}const r=new Set;let i,o,a,s,u,l,c;for(const t of e)">"===t.operator||">="===t.operator?i=FE(i,t,n):"<"===t.operator||"<="===t.operator?o=NE(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(a=DE(i.semver,o.semver,n),a>0)return null;if(0===a&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!CE(e,String(i),n))return null;if(o&&!CE(e,String(o),n))return null;for(const r of t)if(!CE(e,String(r),n))return!1;return!0}let f=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,d=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;f&&1===f.prerelease.length&&"<"===o.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,i)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(s=FE(i,e,n),s===e&&s!==i)return!1}else if(">="===i.operator&&!CE(i.semver,String(e),n))return!1;if(o)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if(u=NE(o,e,n),u===e&&u!==o)return!1}else if("<="===o.operator&&!CE(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==a)return!1}return!(i&&l&&!o&&0!==a)&&(!(o&&c&&!i&&0!==a)&&(!d&&!f))},FE=(e,t,n)=>{if(!e)return t;const r=DE(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},NE=(e,t,n)=>{if(!e)return t;const r=DE(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};kE=(e,t,n={})=>{if(e===t)return!0;e=new EE(e,n),t=new EE(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=ME(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},sw={re:uw.re,src:uw.src,tokens:uw.t,SEMVER_SPEC_VERSION:iw.SEMVER_SPEC_VERSION,SemVer:Nw,compareIdentifiers:Rw.compareIdentifiers,rcompareIdentifiers:Rw.rcompareIdentifiers,parse:Iw,valid:qw,clean:Hw,inc:Gw,diff:Xw,major:n_,minor:i_,patch:a_,prerelease:u_,compare:Kw,rcompare:c_,compareLoose:d_,compareBuild:p_,sort:g_,rsort:v_,gt:x_,lt:__,eq:Jw,neq:E_,gte:A_,lte:D_,cmp:F_,coerce:P_,Comparator:I_,Range:G_,satisfies:Uk,toComparators:Wk,maxSatisfying:Vk,minSatisfying:Xk,minVersion:Kk,validRange:nE,outside:iE,gtr:pE,ltr:gE,intersects:vE,simplifyRange:xE,subset:kE};var OE={},$E={};function TE(e,t,n){return e.fields=t||[],e.fname=n,e}function zE(e){return null==e?null:e.fname}function RE(e){return null==e?null:e.fields}function PE(e){return 1===e.length?LE(e[0]):BE(e)}const LE=e=>function(t){return t[e]},BE=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function IE(e){throw Error(e)}function jE(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function l(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||IE("Access path missing open bracket: "+e),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&IE("Access path missing closing bracket: "+e),a&&IE("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function UE(e,t,n){const r=jE(e);return e=1===r.length?r[0]:e,TE((n&&n.get||PE)(r),[e],t||e)}const qE=UE("id"),WE=TE((e=>e),[],"identity"),HE=TE((()=>0),[],"zero"),VE=TE((()=>1),[],"one"),GE=TE((()=>!0),[],"true"),YE=TE((()=>!1),[],"false");function XE(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}function QE(e,t){let n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&XE(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&XE(t||"warn","WARN",arguments),this},info:function(){return n>=3&&XE(t||"log","INFO",arguments),this},debug:function(){return n>=4&&XE(t||"log","DEBUG",arguments),this}}}var JE=Array.isArray;function KE(e){return e===Object(e)}const ZE=e=>"__proto__"!==e;function eS(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=nS(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;tS(e,n,t[n],r)}return e}),{})}function tS(e,t,n,r){if(!ZE(t))return;let i,o;if(KE(n)&&!JE(n))for(i in o=KE(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?tS(o,i,n[i]):ZE(i)&&(o[i]=n[i]);else e[t]=n}function nS(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function rS(e){return e[e.length-1]}function iS(e){return null==e||""===e?null:+e}const oS=e=>t=>e*Math.exp(t),aS=e=>t=>Math.log(e*t),sS=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),uS=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,lS=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function cS(e,t,n,r){const i=n(e[0]),o=n(rS(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function fS(e,t){return cS(e,t,iS,WE)}function dS(e,t){var n=Math.sign(e[0]);return cS(e,t,aS(n),oS(n))}function hS(e,t,n){return cS(e,t,lS(n),lS(1/n))}function pS(e,t,n){return cS(e,t,sS(n),uS(n))}function mS(e,t,n,r,i){const o=r(e[0]),a=r(rS(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function gS(e,t,n){return mS(e,t,n,iS,WE)}function yS(e,t,n){const r=Math.sign(e[0]);return mS(e,t,n,aS(r),oS(r))}function vS(e,t,n,r){return mS(e,t,n,lS(r),lS(1/r))}function bS(e,t,n,r){return mS(e,t,n,sS(r),uS(r))}function xS(e){return 1+~~(new Date(e).getMonth()/3)}function wS(e){return 1+~~(new Date(e).getUTCMonth()/3)}function _S(e){return null!=e?JE(e)?e:[e]:[]}function kS(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function ES(e){return"function"==typeof e}function SS(e,t,n){n=n||{},t=_S(t)||[];const r=[],i=[],o={},a=n.comparator||CS;return _S(e).forEach(((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=ES(e)?e:UE(e,null,n)),(RE(e)||[]).forEach((e=>o[e]=1)))})),0===i.length?null:TE(a(i,r),Object.keys(o))}const AS=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),CS=(e,t)=>1===e.length?DS(e[0],t[0]):MS(e,t,e.length),DS=(e,t)=>function(n,r){return AS(e(n),e(r))*t},MS=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=AS(o(r),o(i));return a*t[s]});function FS(e){return ES(e)?e:()=>e}function NS(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function OS(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function $S(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function TS(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const zS=Object.prototype.hasOwnProperty;function RS(e,t){return zS.call(e,t)}const PS={};function LS(e){let t,n={};function r(e){return RS(n,e)&&n[e]!==PS}const i={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++i.size,n[e]===PS&&--i.empty),n[e]=t,this},delete:function(e){return r(e)&&(--i.size,++i.empty,n[e]=PS),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(e){return arguments.length?(t=e,i):t},clean:function(){const e={};let r=0;for(const i in n){const o=n[i];o===PS||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function BS(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],l=rS(e);l<u&&(s=u,u=l,l=s),s=Math.abs(t-u);const c=Math.abs(l-t);return s<c&&s<=a?r:c<=a?i:o}function IS(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),OS(r,n)}function jS(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function US(e){return"boolean"==typeof e}function qS(e){return"[object Date]"===Object.prototype.toString.call(e)}function WS(e){return e&&ES(e[Symbol.iterator])}function HS(e){return"number"==typeof e}function VS(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function GS(e){return"string"==typeof e}function YS(e,t,n){e&&(e=t?_S(e).map((e=>e.replace(/\\(.)/g,"$1"))):_S(e));const r=e&&e.length,i=n&&n.get||PE,o=e=>i(t?[e]:jE(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return TE(a,e,"key")}function XS(e,t){const n=e[0],r=rS(e),i=+t;return i?1===i?r:n+i*(r-n):n}function QS(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>RS(t,e)||RS(n,e),get:e=>RS(t,e)?t[e]:RS(n,e)?o(e,n[e]):void 0,set:(e,n)=>RS(t,e)?t[e]=n:o(e,n)}}function JS(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function KS(e,t){let n="";for(;--t>=0;)n+=e;return n}function ZS(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?KS(i,a)+o:"center"===r?KS(i,~~(a/2))+o+KS(i,Math.ceil(a/2)):o+KS(i,a)}function eA(e){return e&&rS(e)-e[0]||0}function tA(e){return JE(e)?"["+e.map(tA)+"]":KE(e)||GS(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function nA(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const rA=e=>HS(e)||qS(e)?e:Date.parse(e);function iA(e,t){return t=t||rA,null==e||""===e?null:t(e)}function oA(e){return null==e||""===e?null:e+""}function aA(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function sA(e,t,n,r){const i=null!=r?r:"",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function uA(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}t($E,"zoomSymlog",(function(){return bS})),t($E,"zoomPow",(function(){return vS})),t($E,"zoomLog",(function(){return yS})),t($E,"zoomLinear",(function(){return gS})),t($E,"zero",(function(){return HE})),t($E,"writeConfig",(function(){return tS})),t($E,"visitArray",(function(){return uA})),t($E,"utcquarter",(function(){return wS})),t($E,"truthy",(function(){return GE})),t($E,"truncate",(function(){return sA})),t($E,"toString",(function(){return oA})),t($E,"toSet",(function(){return aA})),t($E,"toNumber",(function(){return iS})),t($E,"toDate",(function(){return iA})),t($E,"toBoolean",(function(){return nA})),t($E,"stringValue",(function(){return tA})),t($E,"splitAccessPath",(function(){return jE})),t($E,"span",(function(){return eA})),t($E,"repeat",(function(){return KS})),t($E,"quarter",(function(){return xS})),t($E,"peek",(function(){return rS})),t($E,"panSymlog",(function(){return pS})),t($E,"panPow",(function(){return hS})),t($E,"panLog",(function(){return dS})),t($E,"panLinear",(function(){return fS})),t($E,"pad",(function(){return ZS})),t($E,"one",(function(){return VE})),t($E,"mergeConfig",(function(){return eS})),t($E,"merge",(function(){return JS})),t($E,"lruCache",(function(){return QS})),t($E,"logger",(function(){return QE})),t($E,"lerp",(function(){return XS})),t($E,"key",(function(){return YS})),t($E,"isString",(function(){return GS})),t($E,"isRegExp",(function(){return VS})),t($E,"isObject",(function(){return KE})),t($E,"isNumber",(function(){return HS})),t($E,"isIterable",(function(){return WS})),t($E,"isFunction",(function(){return ES})),t($E,"isDate",(function(){return qS})),t($E,"isBoolean",(function(){return US})),t($E,"isArray",(function(){return JE})),t($E,"inrange",(function(){return jS})),t($E,"inherits",(function(){return IS})),t($E,"identity",(function(){return WE})),t($E,"id",(function(){return qE})),t($E,"hasOwnProperty",(function(){return RS})),t($E,"flush",(function(){return BS})),t($E,"field",(function(){return UE})),t($E,"fastmap",(function(){return LS})),t($E,"falsy",(function(){return YE})),t($E,"extentIndex",(function(){return TS})),t($E,"extent",(function(){return $S})),t($E,"extend",(function(){return OS})),t($E,"error",(function(){return IE})),t($E,"debounce",(function(){return NS})),t($E,"constant",(function(){return FS})),t($E,"compare",(function(){return SS})),t($E,"clampRange",(function(){return kS})),t($E,"ascending",(function(){return AS})),t($E,"array",(function(){return _S})),t($E,"accessorName",(function(){return zE})),t($E,"accessorFields",(function(){return RE})),t($E,"accessor",(function(){return TE})),t($E,"Warn",(function(){return 2})),t($E,"None",(function(){return 0})),t($E,"Info",(function(){return 3})),t($E,"Error",(function(){return 1})),t($E,"Debug",(function(){return 4})),n(OE,$E);var lA={};const cA=/^([A-Za-z]+:)?\/\//,fA=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,dA=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,hA="file://";async function pA(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function mA(e,t){t=OS({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=fA.test(e.replace(dA,""));null!=e&&"string"==typeof e&&s||IE("Sanitize failure, invalid URI: "+tA(e));const u=cA.test(e);return(a=t.baseURL)&&!u&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith(hA))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(hA.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function gA(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):yA}async function yA(){IE("No file system access.")}function vA(e){return e?async function(t,n){const r=OS({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?ES(o[i])?o[i]():o.text():IE(o.status+""+o.statusText)}:bA}async function bA(){IE("No HTTP fetch method available.")}const xA=e=>!(Number.isNaN(+e)||e instanceof Date),wA={boolean:nA,integer:iS,number:iS,date:iA,string:oA,unknown:WE},_A=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>xA(e)&&Number.isInteger(+e),xA,e=>!Number.isNaN(Date.parse(e))],kA=["boolean","integer","number","date"];function EA(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=_A.length,i=_A.map(((e,t)=>t+1));for(let a,s,u=0,l=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&(null!=(o=s)&&o==o)&&!_A[a](s)&&(i[a]=0,++l,l===_A.length))return"string";var o;return kA[i.reduce(((e,t)=>0===e?t:e),0)-1]}function SA(e,t){return t.reduce(((t,n)=>(t[n]=EA(e,n),t)),{})}function AA(e){const t=function(t,n){const r={delimiter:e};return CA(t,n?OS(n,r):r)};return t.responseType="text",t}function CA(e,t){return t.header&&(e=t.header.map(tA).join(t.delimiter)+"\n"+e),ad(t.delimiter).parse(e+"")}CA.responseType="text";for(var DA=function(e){var t,n,r=RA(e),i=r[0],o=r[1],a=new OA(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=NA[e.charCodeAt(n)]<<18|NA[e.charCodeAt(n+1)]<<12|NA[e.charCodeAt(n+2)]<<6|NA[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=NA[e.charCodeAt(n)]<<2|NA[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=NA[e.charCodeAt(n)]<<10|NA[e.charCodeAt(n+1)]<<4|NA[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},MA=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(PA(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(FA[t>>2]+FA[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(FA[t>>10]+FA[t>>4&63]+FA[t<<2&63]+"="));return i.join("")},FA=[],NA=[],OA="undefined"!=typeof Uint8Array?Uint8Array:Array,$A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",TA=0,zA=$A.length;TA<zA;++TA)FA[TA]=$A[TA],NA[$A.charCodeAt(TA)]=TA;function RA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function PA(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(FA[(i=r)>>18&63]+FA[i>>12&63]+FA[i>>6&63]+FA[63&i]);return o.join("")}NA["-".charCodeAt(0)]=62,NA["_".charCodeAt(0)]=63;var LA=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},BA=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m},IA="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,jA=WA,UA=2147483647;function qA(e){if(e>UA)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,WA.prototype),t}function WA(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return GA(e)}return HA(e,t,n)}function HA(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!WA.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|JA(e,t),r=qA(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(kC(e,Uint8Array)){var t=new Uint8Array(e);return XA(t.buffer,t.byteOffset,t.byteLength)}return YA(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(kC(e,ArrayBuffer)||e&&kC(e.buffer,ArrayBuffer))return XA(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(kC(e,SharedArrayBuffer)||e&&kC(e.buffer,SharedArrayBuffer)))return XA(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return WA.from(r,t,n);var i=function(e){if(WA.isBuffer(e)){var t=0|QA(e.length),n=qA(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||EC(e.length)?qA(0):YA(e);if("Buffer"===e.type&&Array.isArray(e.data))return YA(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return WA.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function VA(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function GA(e){return VA(e),qA(e<0?0:0|QA(e))}function YA(e){for(var t=e.length<0?0:0|QA(e.length),n=qA(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function XA(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,WA.prototype),r}function QA(e){if(e>=UA)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+UA.toString(16)+" bytes");return 0|e}function JA(e,t){if(WA.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||kC(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return xC(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return wC(e).length;default:if(i)return r?-1:xC(e).length;t=(""+t).toLowerCase(),i=!0}}function KA(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return dC(this,t,n);case"utf8":case"utf-8":return uC(this,t,n);case"ascii":return cC(this,t,n);case"latin1":case"binary":return fC(this,t,n);case"base64":return sC(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return hC(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function ZA(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function eC(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),EC(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=WA.from(t,r)),WA.isBuffer(t))return 0===t.length?-1:tC(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):tC(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function tC(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function nC(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(EC(s))return a;e[n+a]=s}return a}function rC(e,t,n,r){return _C(xC(t,e.length-n),e,n,r)}function iC(e,t,n,r){return _C(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function oC(e,t,n,r){return _C(wC(t),e,n,r)}function aC(e,t,n,r){return _C(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function sC(e,t,n){return 0===t&&n===e.length?MA(e):MA(e.slice(t,n))}function uC(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=lC)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=lC));return n}(r)}WA.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),WA.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(WA.prototype,"parent",{enumerable:!0,get:function(){if(WA.isBuffer(this))return this.buffer}}),Object.defineProperty(WA.prototype,"offset",{enumerable:!0,get:function(){if(WA.isBuffer(this))return this.byteOffset}}),WA.poolSize=8192,WA.from=function(e,t,n){return HA(e,t,n)},Object.setPrototypeOf(WA.prototype,Uint8Array.prototype),Object.setPrototypeOf(WA,Uint8Array),WA.alloc=function(e,t,n){return function(e,t,n){return VA(e),e<=0?qA(e):void 0!==t?"string"==typeof n?qA(e).fill(t,n):qA(e).fill(t):qA(e)}(e,t,n)},WA.allocUnsafe=function(e){return GA(e)},WA.allocUnsafeSlow=function(e){return GA(e)},WA.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==WA.prototype},WA.compare=function(e,t){if(kC(e,Uint8Array)&&(e=WA.from(e,e.offset,e.byteLength)),kC(t,Uint8Array)&&(t=WA.from(t,t.offset,t.byteLength)),!WA.isBuffer(e)||!WA.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},WA.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},WA.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return WA.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=WA.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(kC(o,Uint8Array))i+o.length>r.length?WA.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!WA.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},WA.byteLength=JA,WA.prototype._isBuffer=!0,WA.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)ZA(this,t,t+1);return this},WA.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)ZA(this,t,t+3),ZA(this,t+1,t+2);return this},WA.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)ZA(this,t,t+7),ZA(this,t+1,t+6),ZA(this,t+2,t+5),ZA(this,t+3,t+4);return this},WA.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?uC(this,0,e):KA.apply(this,arguments)},WA.prototype.toLocaleString=WA.prototype.toString,WA.prototype.equals=function(e){if(!WA.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===WA.compare(this,e)},WA.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},IA&&(WA.prototype[IA]=WA.prototype.inspect),WA.prototype.compare=function(e,t,n,r,i){if(kC(e,Uint8Array)&&(e=WA.from(e,e.offset,e.byteLength)),!WA.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},WA.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},WA.prototype.indexOf=function(e,t,n){return eC(this,e,t,n,!0)},WA.prototype.lastIndexOf=function(e,t,n){return eC(this,e,t,n,!1)},WA.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return nC(this,e,t,n);case"utf8":case"utf-8":return rC(this,e,t,n);case"ascii":case"latin1":case"binary":return iC(this,e,t,n);case"base64":return oC(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return aC(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},WA.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var lC=4096;function cC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function fC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function dC(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=SC[e[o]];return i}function hC(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function pC(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function mC(e,t,n,r,i,o){if(!WA.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function gC(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function yC(e,t,n,r,i){return t=+t,n>>>=0,i||gC(e,0,n,4),BA(e,t,n,r,23,4),n+4}function vC(e,t,n,r,i){return t=+t,n>>>=0,i||gC(e,0,n,8),BA(e,t,n,r,52,8),n+8}WA.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,WA.prototype),r},WA.prototype.readUintLE=WA.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||pC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},WA.prototype.readUintBE=WA.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||pC(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},WA.prototype.readUint8=WA.prototype.readUInt8=function(e,t){return e>>>=0,t||pC(e,1,this.length),this[e]},WA.prototype.readUint16LE=WA.prototype.readUInt16LE=function(e,t){return e>>>=0,t||pC(e,2,this.length),this[e]|this[e+1]<<8},WA.prototype.readUint16BE=WA.prototype.readUInt16BE=function(e,t){return e>>>=0,t||pC(e,2,this.length),this[e]<<8|this[e+1]},WA.prototype.readUint32LE=WA.prototype.readUInt32LE=function(e,t){return e>>>=0,t||pC(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},WA.prototype.readUint32BE=WA.prototype.readUInt32BE=function(e,t){return e>>>=0,t||pC(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},WA.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||pC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},WA.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||pC(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},WA.prototype.readInt8=function(e,t){return e>>>=0,t||pC(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},WA.prototype.readInt16LE=function(e,t){e>>>=0,t||pC(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},WA.prototype.readInt16BE=function(e,t){e>>>=0,t||pC(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},WA.prototype.readInt32LE=function(e,t){return e>>>=0,t||pC(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},WA.prototype.readInt32BE=function(e,t){return e>>>=0,t||pC(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},WA.prototype.readFloatLE=function(e,t){return e>>>=0,t||pC(e,4,this.length),LA(this,e,!0,23,4)},WA.prototype.readFloatBE=function(e,t){return e>>>=0,t||pC(e,4,this.length),LA(this,e,!1,23,4)},WA.prototype.readDoubleLE=function(e,t){return e>>>=0,t||pC(e,8,this.length),LA(this,e,!0,52,8)},WA.prototype.readDoubleBE=function(e,t){return e>>>=0,t||pC(e,8,this.length),LA(this,e,!1,52,8)},WA.prototype.writeUintLE=WA.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||mC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},WA.prototype.writeUintBE=WA.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||mC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},WA.prototype.writeUint8=WA.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,1,255,0),this[t]=255&e,t+1},WA.prototype.writeUint16LE=WA.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},WA.prototype.writeUint16BE=WA.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},WA.prototype.writeUint32LE=WA.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},WA.prototype.writeUint32BE=WA.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},WA.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);mC(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},WA.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);mC(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},WA.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},WA.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},WA.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},WA.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},WA.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||mC(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},WA.prototype.writeFloatLE=function(e,t,n){return yC(this,e,t,!0,n)},WA.prototype.writeFloatBE=function(e,t,n){return yC(this,e,t,!1,n)},WA.prototype.writeDoubleLE=function(e,t,n){return vC(this,e,t,!0,n)},WA.prototype.writeDoubleBE=function(e,t,n){return vC(this,e,t,!1,n)},WA.prototype.copy=function(e,t,n,r){if(!WA.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},WA.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!WA.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=WA.isBuffer(e)?e:WA.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var bC=/[^+/0-9A-Za-z-_]/g;function xC(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function wC(e){return DA(function(e){if((e=(e=e.split("=")[0]).trim().replace(bC,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function _C(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function kC(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function EC(e){return e!=e}var SC=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),AC=jA;function CC(e,t){const n=t&&t.property?UE(t.property):WE;return!KE(e)||(r=e,"function"==typeof AC&&ES(AC.isBuffer)&&AC.isBuffer(r))?n(JSON.parse(e)):function(e,t){!JE(e)&&WS(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}CC.responseType="json";var DC=function(e){return e},MC=function(e){if(null==e)return DC;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;u<l;)c[u]=e[u],++u;return c}},FC=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return NC(e,t)}))}:NC(e,t)};function NC(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=OC(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function OC(e,t){var n=MC(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}var $C=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},TC=function(e){return OC(e,zC.apply(this,arguments))};function zC(e,t,n){var r,i,o;if(arguments.length>1)r=RC(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:$C(e,r)}}function RC(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}const PC={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function LC(e,t){let n,r,i,o;return e=CC(e,t),t&&t.feature?(n=FC,i=t.feature):t&&t.mesh?(n=TC,i=t.mesh,o=PC[t.filter]):IE("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):IE("Invalid TopoJSON object: "+i),r&&r.features||[r]}LC.responseType="json";const BC={dsv:CA,csv:AA(","),tsv:AA("\t"),json:CC,topojson:LC};function IC(e,t){return arguments.length>1?(BC[e]=t,this):RS(BC,e)?BC[e]:null}function jC(e){const t=IC(e);return t&&t.responseType||"text"}var UC={};const qC="year",WC="quarter",HC="month",VC="week",GC="date",YC="day",XC="dayofyear",QC="hours",JC="minutes",KC="seconds",ZC="milliseconds",eD=[qC,WC,HC,VC,GC,YC,XC,QC,JC,KC,ZC],tD=eD.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function nD(e){const t=_S(e).slice(),n={};t.length||IE("Missing time unit."),t.forEach((e=>{RS(tD,e)?n[e]=1:IE("Invalid time unit: ".concat(e,"."))}));return(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&IE("Incompatible time units: ".concat(e)),t.sort(((e,t)=>tD[e]-tD[t])),t}const rD={[qC]:"%Y ",[WC]:"Q%q ",[HC]:"%b ",[GC]:"%d ",[VC]:"W%U ",[YC]:"%a ",[XC]:"%j ",[QC]:"%H:00",[JC]:"00:%M",[KC]:":%S",[ZC]:".%L",["".concat(qC,"-").concat(HC)]:"%Y-%m ",["".concat(qC,"-").concat(HC,"-").concat(GC)]:"%Y-%m-%d ",["".concat(QC,"-").concat(JC)]:"%H:%M"};function iD(e,t){const n=OS({},rD,t),r=nD(e),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const oD=new Date;function aD(e){return oD.setFullYear(e),oD.setMonth(0),oD.setDate(1),oD.setHours(0,0,0,0),oD}function sD(e){return lD(new Date(e))}function uD(e){return cD(new Date(e))}function lD(e){return Qm.count(aD(e.getFullYear())-1,e)}function cD(e){return Km.count(aD(e.getFullYear())-1,e)}function fD(e){return aD(e).getDay()}function dD(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function hD(e){return mD(new Date(e))}function pD(e){return gD(new Date(e))}function mD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lg.count(t-1,e)}function gD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return fg.count(t-1,e)}function yD(e){return oD.setTime(Date.UTC(e,0,1)),oD.getUTCDay()}function vD(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function bD(e,t,n,r,i){const o=t||1,a=rS(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),u=new Date,l=aA(e),c=l.year?s(qC):FS(2012),f=l.month?s(HC):l.quarter?s(WC):HE,d=l.week&&l.day?s(YC,1,"weekday"):l.week?s(VC,1):l.day?s(YC,1):l.date?s(GC,1):l.dayofyear?s(XC,1):VE,h=l.hours?s(QC):HE,p=l.minutes?s(JC):HE,m=l.seconds?s(KC):HE,g=l.milliseconds?s(ZC):HE;return function(e){u.setTime(+e);const t=c(u);return i(t,f(u),d(u,t),h(u),p(u),m(u),g(u))}}function xD(e,t,n){return t+7*e-(n+6)%7}const wD={[qC]:e=>e.getFullYear(),[WC]:e=>Math.floor(e.getMonth()/3),[HC]:e=>e.getMonth(),[GC]:e=>e.getDate(),[QC]:e=>e.getHours(),[JC]:e=>e.getMinutes(),[KC]:e=>e.getSeconds(),[ZC]:e=>e.getMilliseconds(),[XC]:e=>lD(e),[VC]:e=>cD(e),weekday:(e,t)=>xD(cD(e),e.getDay(),fD(t)),[YC]:(e,t)=>xD(1,e.getDay(),fD(t))},_D={[WC]:e=>3*e,[VC]:(e,t)=>xD(e,0,fD(t))};function kD(e,t){return bD(e,t||1,wD,_D,dD)}const ED={[qC]:e=>e.getUTCFullYear(),[WC]:e=>Math.floor(e.getUTCMonth()/3),[HC]:e=>e.getUTCMonth(),[GC]:e=>e.getUTCDate(),[QC]:e=>e.getUTCHours(),[JC]:e=>e.getUTCMinutes(),[KC]:e=>e.getUTCSeconds(),[ZC]:e=>e.getUTCMilliseconds(),[XC]:e=>mD(e),[VC]:e=>gD(e),[YC]:(e,t)=>xD(1,e.getUTCDay(),yD(t)),weekday:(e,t)=>xD(gD(e),e.getUTCDay(),yD(t))},SD={[WC]:e=>3*e,[VC]:(e,t)=>xD(e,0,yD(t))};function AD(e,t){return bD(e,t||1,ED,SD,vD)}const CD={[qC]:ag,[WC]:og.every(3),[HC]:og,[VC]:Km,[GC]:Qm,[YC]:Qm,[XC]:Qm,[QC]:Xm,[JC]:Ym,[KC]:Gm,[ZC]:Bm},DD={[qC]:bg,[WC]:vg.every(3),[HC]:vg,[VC]:fg,[GC]:lg,[YC]:lg,[XC]:lg,[QC]:ug,[JC]:sg,[KC]:Gm,[ZC]:Bm};function MD(e){return CD[e]}function FD(e){return DD[e]}function ND(e,t,n){return e?e.offset(t,n):void 0}function OD(e,t,n){return ND(MD(e),t,n)}function $D(e,t,n){return ND(FD(e),t,n)}function TD(e,t,n,r){return e?e.range(t,n,r):void 0}function zD(e,t,n,r){return TD(MD(e),t,n,r)}function RD(e,t,n,r){return TD(FD(e),t,n,r)}const PD=1e3,LD=6e4,BD=36e5,ID=864e5,jD=2592e6,UD=31536e6,qD=[qC,HC,GC,QC,JC,KC,ZC],WD=qD.slice(0,-1),HD=WD.slice(0,-1),VD=HD.slice(0,-1),GD=VD.slice(0,-1),YD=[qC,HC],XD=[qC],QD=[[WD,1,PD],[WD,5,5e3],[WD,15,15e3],[WD,30,3e4],[HD,1,LD],[HD,5,3e5],[HD,15,9e5],[HD,30,18e5],[VD,1,BD],[VD,3,108e5],[VD,6,216e5],[VD,12,432e5],[GD,1,ID],[[qC,VC],1,6048e5],[YD,1,jD],[YD,3,7776e6],[XD,1,UD]];function JD(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(eA(t))/n;let i,o,a=yd((e=>e[2])).right(QD,r);return a===QD.length?(i=XD,o=Md(t[0]/UD,t[1]/UD,n)):a?(a=QD[r/QD[a-1][2]<QD[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=qD,o=Math.max(Md(t[0],t[1],n),1)),{units:i,step:o}}function KD(e){const t={};return n=>t[n]||(t[n]=e(n))}function ZD(e){const t=KD(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){const n=tm(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan:function(e,r,i,o){o=tm(null==o?",f":o);const a=Md(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=pm(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=mm(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=hm(a))||(o.precision=u-2*("%"===o.type))}return t(o)}}}let eM,tM;function nM(){return eM=ZD({format:om,formatPrefix:am})}function rM(e){return ZD(dm(e))}function iM(e){return arguments.length?eM=rM(e):eM}function oM(e,t,n){KE(n=n||{})||IE("Invalid time multi-format specifier: ".concat(n));const r=t(KC),i=t(JC),o=t(QC),a=t(GC),s=t(VC),u=t(HC),l=t(WC),c=t(qC),f=e(n.milliseconds||".%L"),d=e(n.seconds||":%S"),h=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),m=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),y=e(n.month||"%B"),v=e(n.quarter||"%B"),b=e(n.year||"%Y");return e=>(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?p:u(e)<e?s(e)<e?m:g:c(e)<e?l(e)<e?y:v:b)(e)}function aM(e){const t=KD(e.format),n=KD(e.utcFormat);return{timeFormat:e=>GS(e)?t(e):oM(t,MD,e),utcFormat:e=>GS(e)?n(e):oM(n,FD,e),timeParse:KD(e.parse),utcParse:KD(e.utcParse)}}function sM(){return tM=aM({format:Fg,parse:Ng,utcFormat:Og,utcParse:$g})}function uM(e){return aM(Dg(e))}function lM(e){return arguments.length?tM=uM(e):tM}t(UC,"week",(function(){return uD})),t(UC,"utcweek",(function(){return pD})),t(UC,"utcdayofyear",(function(){return hD})),t(UC,"utcSequence",(function(){return RD})),t(UC,"utcOffset",(function(){return $D})),t(UC,"utcInterval",(function(){return FD})),t(UC,"utcFloor",(function(){return AD})),t(UC,"timeUnits",(function(){return nD})),t(UC,"timeUnitSpecifier",(function(){return iD})),t(UC,"timeSequence",(function(){return zD})),t(UC,"timeOffset",(function(){return OD})),t(UC,"timeInterval",(function(){return MD})),t(UC,"timeFloor",(function(){return kD})),t(UC,"timeBin",(function(){return JD})),t(UC,"dayofyear",(function(){return sD})),t(UC,"YEAR",(function(){return qC})),t(UC,"WEEK",(function(){return VC})),t(UC,"TIME_UNITS",(function(){return eD})),t(UC,"SECONDS",(function(){return KC})),t(UC,"QUARTER",(function(){return WC})),t(UC,"MONTH",(function(){return HC})),t(UC,"MINUTES",(function(){return JC})),t(UC,"MILLISECONDS",(function(){return ZC})),t(UC,"HOURS",(function(){return QC})),t(UC,"DAYOFYEAR",(function(){return XC})),t(UC,"DAY",(function(){return YC})),t(UC,"DATE",(function(){return GC})),nM(),sM();const cM=(e,t)=>OS({},e,t);function fM(e,t){const n=e?rM(e):iM(),r=t?uM(t):lM();return cM(n,r)}function dM(e,t){const n=arguments.length;return n&&2!==n&&IE("defaultLocale expects either zero or two arguments."),n?cM(iM(e),lM(t)):cM(iM(),lM())}function hM(){return nM(),sM(),dM()}var pM=function(e,t,n,r){const i=IC((t=t||{}).type||"json");return i||IE("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=lM();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,l,c,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=SA(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!wA[i])throw Error("Illegal format pattern: "+e+":"+i);return wA[i]}));for(s=0,l=e.length,c=f.length;s<l;++s)for(o=e[s],u=0;u<c;++u)a=f[u],o[a]=d[u](o[a])}(e,t.parse,n,r),RS(e,"columns")&&delete e.columns,e};const mM=function(e,t){return n=>({options:n||{},sanitize:mA,load:pA,fileAccess:!!t,file:gA(t),http:vA(e)})}("undefined"!=typeof fetch&&fetch,null);function gM(e){const t=e||WE,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function yM(e,t){try{await t(e)}catch(t){e.error(t)}}t(lA,"loader",(function(){return mM})),t(lA,"read",(function(){return pM})),t(lA,"typeParsers",(function(){return wA})),t(lA,"inferTypes",(function(){return SA})),t(lA,"inferType",(function(){return EA})),t(lA,"responseType",(function(){return jC})),t(lA,"formats",(function(){return IC})),t(lA,"format",(function(){return BC}));const vM=Symbol("vega_id");let bM=1;function xM(e){return!(!e||!wM(e))}function wM(e){return e[vM]}function _M(e,t){return e[vM]=t,e}function kM(e){const t=e===Object(e)?e:{data:e};return wM(t)?t:_M(t,bM++)}function EM(e){return SM(e,kM({}))}function SM(e,t){for(const n in e)t[n]=e[n];return t}function AM(e,t){return _M(t,wM(e))}function CM(e,t){return e?t?(n,r)=>e(n,r)||wM(t(n))-wM(t(r)):(t,n)=>e(t,n)||wM(t)-wM(n):null}function DM(e){return e&&e.constructor===MM}function MM(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:MM,insert:function(t){const n=_S(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove:function(e){const n=ES(e)?r:t,i=_S(e),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify:function(e,t,r){const o={field:t,value:FS(r)};return ES(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return ES(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return o=e,this},reflow:function(){return a=!0,this},pulse:function(s,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[wM(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[wM(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach((e=>{p(e)&&(l[wM(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=wM(m),l[g]?l[g]=1:s.add.push(kM(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[wM(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[wM(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[wM(m)],g>0&&(y(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach((e=>{p(e)&&l[wM(e)]>0&&y(e,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter((e=>l[wM(e)]>0)):u.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const FM="_:mod:_";function NM(){Object.defineProperty(this,FM,{writable:!0,value:{}})}NM.prototype={set:function(e,t,n,r){const i=this,o=i[e],a=i["_:mod:_"];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=JE(n)?1+n.length:-1),i},modified:function(e,t){const n=this["_:mod:_"];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(JE(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this["_:mod:_"]={},this}};let OM=0;const $M=new NM;function TM(e,t,n,r){this.id=++OM,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function zM(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}TM.prototype={targets:function(){return this._targets||(this._targets=gM(qE))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:zM(1),modified:zM(2),parameters:function(e,t,n){t=!1!==t;const r=this._argval=this._argval||new NM,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(e,n,a)=>{a instanceof TM?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)_S(s).forEach((e=>{e instanceof TM?e!==this&&(e.targets().add(this),o.push(e)):IE("Pulse parameters must be operator instances.")})),this.source=s;else if(JE(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall:function(e){const t=this._argval||$M,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach:function(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let RM=0;function PM(e,t,n){this.id=++RM,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function LM(e,t,n){return new PM(e,t,n)}PM.prototype={_filter:GE,_apply:WE,targets:function(){return this._targets||(this._targets=gM(qE))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){const t=LM(e);return this.targets().add(t),t},apply:function(e){const t=LM(null,e);return this.targets().add(t),t},merge:function(){const e=LM();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){const t=LM();return this.targets().add(LM(null,null,NS(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){let n=!1;return e.targets().add(LM(null,null,(()=>n=!0))),t.targets().add(LM(null,null,(()=>n=!1))),this.filter((()=>n))},detach:function(){this._filter=GE,this._targets=null}};const BM={skip:!0};function IM(e,t,n,r,i,o){const a=OS({},o,BM);let s,u;ES(n)||(n=FS(n)),void 0===r?s=t=>e.touch(n(t)):ES(r)?(u=new TM(null,r,i,!1),s=t=>{u.evaluate(t);const r=n(t),i=u.value;DM(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function jM(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new TM(null,function(e,t){return t=ES(t)?t:FS(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const UM={};function qM(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function WM(e,t){const n=[];return uA(e,t,(e=>n.push(e))),n}function HM(e,t){const n={};return e.visit(t,(e=>{n[wM(e)]=1})),e=>n[wM(e)]?null:e}function VM(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function GM(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let e=0;e<o;++e){const r=n[e];if(r.stamp===t){if(r.fields){const e=i.fields||(i.fields={});for(const t in r.fields)e[t]=1}r.changed(i.ADD)&&(a|=i.ADD),r.changed(i.REM)&&(a|=i.REM),r.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function YM(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}qM.prototype={StopPropagation:UM,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new qM(this.dataflow).init(this,e)},clone:function(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new qM(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init:function(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,HM(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){const t=this.fields||(this.fields={});return JE(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified:function(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?JE(e)?e.some((e=>n[e])):n[e]:!!n)},filter:function(e,t){const n=this;return 1&e&&(n.addF=VM(n.addF,t)),2&e&&(n.remF=VM(n.remF,t)),4&e&&(n.modF=VM(n.modF,t)),16&e&&(n.srcF=VM(n.srcF,t)),n},materialize:function(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=WM(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=WM(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=WM(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){const n=this,r=t;if(16&e)return uA(n.source,n.srcF,r),n;1&e&&uA(n.add,n.addF,r),2&e&&uA(n.rem,n.remF,r),4&e&&uA(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||uA(i,e?HM(n,5):n.srcF,r)}return n}},IS(GM,qM,{fork:function(e){const t=new qM(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed:function(e){return this.changes&e},modified:function(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?JE(e)?e.some((e=>n[e])):n[e]:0},filter:function(){IE("MultiPulse does not support filtering.")},materialize:function(){IE("MultiPulse does not support materialization.")},visit:function(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const XM={skip:!1,force:!1};function QM(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),JM(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,JM(e,r,t,n)}(t,0,e)):r=n,r}}}function JM(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function KM(){this.logger(QE()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=dM();try{this._loader=mM()}catch(e){}this._touched=gM(qE),this._input={},this._pulse=null,this._heap=QM(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function ZM(e){return function(){return this._log[e].apply(this,arguments)}}function eF(e,t){TM.call(this,e,null,t)}KM.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:ZM("error"),warn:ZM("warn"),info:ZM("info"),debug:ZM("debug"),logLevel:ZM("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof TM?i=e:e&&e.prototype instanceof TM?i=new e:ES(e)?i=new TM(null,e):(o=0,i=new TM(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&IE("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||XM);const r=new qM(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||XM;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||XM;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:MM,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return pM(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(GE).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:jC(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=LM(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):_S(e);const u=s.length;for(let e=0;e<u;++e)s[e].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof TM?jM:IM)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return YM(r);if(r._pending&&await r._pending,t&&await yM(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new qM(r,o,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=gM(qE);let a,s,u,l=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=UM),s!==UM&&a._targets&&a._targets.forEach((e=>r._enqueue(e))),++l):r._enqueue(a,!0)}catch(e){r._heap.clear(),u=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${l} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await yM(r,e[t].callback)}return n&&await yM(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?YM(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&JE(n)?new GM(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==UM&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},IS(eF,TM,{run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate:function(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});const tF={};function nF(e){const t=rF(e);return t&&t.Definition||null}function rF(e){return e=e&&e.toLowerCase(),RS(tF,e)?tF[e]:null}var iF={},oF={};function*aF(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function sF(e,t,n){const r=Float64Array.from(aF(e,n));return r.sort(gd),t.map((e=>zd(r,e)))}function uF(e,t){return sF(e,[.25,.5,.75],t)}function lF(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,o+=n*(t-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=uF(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function cF(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,l,c,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,l=0,c=e.steps.length;l<c&&e.steps[l]<u;++l);o=e.steps[Math.max(0,l-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(l=0,c=i.length;l<c;++l)u=o/i[l],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+m)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var fF=Math.random;function dF(e){fF=e}function hF(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(aF(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(fF()*o)];c[l]=s/o}return c.sort(gd),[Td(c,n/2),Td(c,1-n/2)]}function pF(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,l=r(e[0]),c=l,f=l+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(c=(l+c)/2;s<u;++s)o[s]=c;f=a+t,l=a}c=a}for(c=(l+c)/2;s<u;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}function mF(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function gF(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min:function(e){return arguments.length?(n=e||0,i=r-n,o):n},max:function(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:function(){return n+Math.floor(i*fF())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},cdf:function(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN}};return o.min(e).max(t)}const yF=Math.sqrt(2*Math.PI),vF=Math.SQRT2;let bF=NaN;function xF(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(bF==bF)i=bF,bF=NaN;else{do{i=2*fF()-1,o=2*fF()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,bF=o*r}return e+i*t}function wF(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*yF)}function _F(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function kF(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*vF*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function EF(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>xF(n,r),pdf:e=>wF(e,n,r),cdf:e=>_F(e,n,r),icdf:e=>kF(e,n,r)};return i.mean(e).stdev(t)}function SF(e,t){const n=EF();let r=0;const i={data:function(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=lF(e)),i):t},sample:function(){return e[~~(fF()*r)]+t*n.sample()},pdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(e)}function AF(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+xF()*t)}function CF(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*yF*e)}function DF(e,t,n){return _F(Math.log(e),t,n)}function MF(e,t,n){return Math.exp(kF(e,t,n))}function FF(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>AF(n,r),pdf:e=>CF(e,n,r),cdf:e=>DF(e,n,r),icdf:e=>MF(e,n,r)};return i.mean(e).stdev(t)}function NF(e,t){let n,r=0;function i(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}const o={weights:function(e){return arguments.length?(n=i(t=e||[]),o):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),o.weights(t)):e},sample:function(){const t=fF();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function OF(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*fF()}function $F(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function TF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function zF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function RF(e,t){let n,r;const i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>OF(n,r),pdf:e=>$F(e,n,r),cdf:e=>TF(e,n,r),icdf:e=>zF(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function PF(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function LF(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,l,c=0,f=0,d=0;for(l of e)o[c]=s=+t(l),a[c]=u=+n(l),++c,f+=(s-f)/c,d+=(u-d)/c;for(c=0;c<i;++c)o[c]-=f,a[c]-=d;return[o,a,f,d]}function BF(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function IF(e,t,n,r,i){let o=0,a=0;return BF(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function jF(e,t,n){let r=0,i=0,o=0,a=0,s=0;BF(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=PF(r,i,o,a),l=e=>u[0]+u[1]*e;return{coef:u,predict:l,rSquared:IF(e,t,n,i,l)}}function UF(e,t,n){let r=0,i=0,o=0,a=0,s=0;BF(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=PF(r,i,o,a),l=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:l,rSquared:IF(e,t,n,i,l)}}function qF(e,t,n){const[r,i,o,a]=LF(e,t,n);let s,u,l,c=0,f=0,d=0,h=0,p=0;BF(e,t,n,((e,t)=>{s=r[p++],u=Math.log(t),l=s*t,c+=(t*u-c)/p,f+=(l-f)/p,d+=(l*u-d)/p,h+=(s*l-h)/p}));const[m,g]=PF(f/a,c/a,d/a,h/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:IF(e,t,n,a,y)}}function WF(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;BF(e,t,n,((e,t)=>{const n=Math.log(e),l=Math.log(t);++u,r+=(n-r)/u,i+=(l-i)/u,o+=(n*l-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const l=PF(r,i,o,a),c=e=>l[0]*Math.pow(e,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:IF(e,t,n,s,c)}}function HF(e,t,n){const[r,i,o,a]=LF(e,t,n),s=r.length;let u,l,c,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)l=r[u],c=i[u++],f=l*l,d+=(f-d)/u,h+=(f*l-h)/u,p+=(f*f-p)/u,m+=(l*c-m)/u,g+=(f*c-g)/u;const y=p-d*d,v=d*y-h*h,b=(g*d-m*h)/v,x=(m*y-g*h)/v,w=-b*d,_=e=>b*(e-=o)*e+x*e+w+a;return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:IF(e,t,n,a,_)}}function VF(e,t,n,r){if(1===r)return jF(e,t,n);if(2===r)return HF(e,t,n);const[i,o,a,s]=LF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(d=3;d<f;++d)t+=y[d]*Math.pow(e,d);return t};return{coef:GF(f,y,-a,s),predict:v,rSquared:IF(e,t,n,s,v)}}function GF(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function YF(e,t,n,r){const[i,o,a,s]=LF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let e=-1;++e<=2;){const t=[0,l-1];for(let e=0;e<u;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let u=0,l=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=XF(Math.abs(n-t)*g)*d[e],s=t*a;u+=a,l+=s,h+=r*a,p+=r*s,m+=t*s}const[y,v]=PF(l/u,h/u,p/u,m/u);c[e]=y+v*n,f[e]=Math.abs(o[e]-c[e]),QF(i,e+1,t)}if(2===e)break;const n=Rd(f);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<u;++r)e=f[r]/(6*n),d[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,l=[];for(;s<i;++s)a=e[s]+n,l[0]===a?l[1]+=(t[s]-l[1])/++u:(u=0,l[1]+=r,l=[a,t[s]],o.push(l));return l[1]+=r,o}(i,c,a,s)}function XF(e){return(e=1-e*e*e)*e*e}function QF(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const JF=.1*Math.PI/180;function KF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)l.push(i(o+e/n*s));return l.push(i(a)),l}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=l[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&ZF(f,e,d)>JF?c.push(e):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function ZF(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function eN(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function tN(e,t,n){return n||e+(t?"_"+t:"")}t(oF,"setRandom",(function(){return dF})),t(oF,"sampleUniform",(function(){return OF})),t(oF,"sampleNormal",(function(){return xF})),t(oF,"sampleLogNormal",(function(){return AF})),t(oF,"sampleCurve",(function(){return KF})),t(oF,"regressionQuad",(function(){return HF})),t(oF,"regressionPow",(function(){return WF})),t(oF,"regressionPoly",(function(){return VF})),t(oF,"regressionLog",(function(){return UF})),t(oF,"regressionLoess",(function(){return YF})),t(oF,"regressionLinear",(function(){return jF})),t(oF,"regressionExp",(function(){return qF})),t(oF,"randomUniform",(function(){return RF})),t(oF,"randomNormal",(function(){return EF})),t(oF,"randomMixture",(function(){return NF})),t(oF,"randomLogNormal",(function(){return FF})),t(oF,"randomLCG",(function(){return mF})),t(oF,"randomKDE",(function(){return SF})),t(oF,"randomInteger",(function(){return gF})),t(oF,"random",(function(){return fF})),t(oF,"quartiles",(function(){return uF})),t(oF,"quantiles",(function(){return sF})),t(oF,"quantileUniform",(function(){return zF})),t(oF,"quantileNormal",(function(){return kF})),t(oF,"quantileLogNormal",(function(){return MF})),t(oF,"dotbin",(function(){return pF})),t(oF,"densityUniform",(function(){return $F})),t(oF,"densityNormal",(function(){return wF})),t(oF,"densityLogNormal",(function(){return CF})),t(oF,"cumulativeUniform",(function(){return TF})),t(oF,"cumulativeNormal",(function(){return _F})),t(oF,"cumulativeLogNormal",(function(){return DF})),t(oF,"bootstrapCI",(function(){return hF})),t(oF,"bin",(function(){return cF})),t(oF,"bandwidthNRD",(function(){return lF}));const nN=()=>{},rN={init:nN,add:nN,rem:nN,idx:0},iN={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},oN=Object.keys(iN);function aN(e,t){return iN[e](t)}function sN(e,t){return e.idx-t.idx}function uN(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function lN(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function cN(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function fN(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function dN(e,t){const n=t||WE,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=iN[e]())}))};return e.forEach(n),Object.values(t).sort(sN)}(e),i=e.slice().sort(sN);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=uN,o.prototype.add=lN,o.prototype.rem=cN,o.prototype.set=fN,o.prototype.get=n,o.fields=e.map((e=>e.out)),o}function hN(e){this._key=e?UE(e):wM,this.reset()}oN.forEach((e=>{iN[e]=function(e,t){return n=>OS({name:e,out:n||e},rN,t)}(e,iN[e])}));const pN=hN.prototype;function mN(e){eF.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}pN.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},pN.add=function(e){this._add.push(e)},pN.rem=function(e){this._rem.push(e)},pN.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o},pN.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",RS(n,r)||(n[r]=1,++o);return o},pN.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=TS(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},pN.argmin=function(e){return this.extent(e)[0]||{}},pN.argmax=function(e){return this.extent(e)[1]||{}},pN.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},pN.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},pN.quartile=function(e){return this._get===e&&this._q||(this._q=uF(this.values(),e),this._get=e),this._q},pN.q1=function(e){return this.quartile(e)[0]},pN.q2=function(e){return this.quartile(e)[1]},pN.q3=function(e){return this.quartile(e)[2]},pN.ci=function(e){return this._get===e&&this._ci||(this._ci=hF(this.values(),1e3,.05,e),this._get=e),this._ci},pN.ci0=function(e){return this.ci(e)[0]},pN.ci1=function(e){return this.ci(e)[1]},mN.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:oN},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},IS(mN,eF,{transform:function(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross:function(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,u){const l=n[u],c=r[u++];for(const n in c){const r=a?a+"|"+n:n;s[l]=c[n],u<i?o(r,s,u):t[r]||e.cell(r,s)}}("",{},0)},init:function(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=_S(RE(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=_S(e.groupby),this._dnames=this._dims.map((e=>{const t=zE(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:eN(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,m;for(u!==a.length&&IE("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)c=o[m],f=a[m],null==c&&"count"!==f&&IE("Null aggregate field specified."),h=zE(c),p=tN(f,h,s[m]),n.push(p),"count"!==f?(d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(aN(f,p))):this._counts.push(p);return this._measures=this._measures.map((e=>dN(e,e.field))),{}},cellkey:eN(),cell:function(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new hN),n},newtuple:function(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let t=0;t<i;++t)o[n[t]]=r[t](e);return t?AM(t.tuple,o):kM(o)},clean:function(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple:function(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes:function(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],i&&!u.num||a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(0===u.num&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function gN(e){eF.call(this,null,e)}function yN(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!a[r(e)])),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?JS(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function vN(e){eF.call(this,[],e)}function bN(e){TM.call(this,null,xN,e)}function xN(e){return this.value&&!e.modified()?this.value:SS(e.fields,e.orders)}function wN(e){eF.call(this,null,e)}function _N(e){eF.call(this,null,e)}gN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},IS(gN,eF,{transform:function(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(RE(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?e=>{const t=r(e);e[s]=t,e[u]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=cF(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(e){let n=iS(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=TE(u,RE(t),e.name||"bin_"+zE(t))}}),vN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},IS(vN,eF,{transform:function(e,t){const n=t.fork(t.ALL),r=yN(wM,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(CM(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),IS(bN,TM),wN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},IS(wN,eF,{transform:function(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],u=0,l=i.length;u<l;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n((e=>i[e]=1+(i[e]||0))),c=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck:function(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=kM({}),u[i]=s,u[o]=l,a.add.push(u)):0===l?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}}),_N.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},IS(_N,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=o=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(a.push(kM(s)),(s={})[t]=o);return a}(s,i,o,e.filter||GE)):n.mod=s,n.source=this.value,n.modifies(r)}});const kN={kde:SF,mixture:NF,normal:EF,lognormal:FF,uniform:RF},EN="function";function SN(e,t){const n=e.function;RS(kN,n)||IE("Unknown distribution function: "+n);const r=kN[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>SN(e,t)))):typeof r[n]===EN&&r[n](e[n]);return r}function AN(e){eF.call(this,null,e)}const CN=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],DN={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:CN},{name:"weights",type:"number",array:!0}]};function MN(e,t){return e?e.map(((e,n)=>t[n]||zE(e))):null}function FN(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,l,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}AN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:CN.concat(DN)},{name:"as",type:"string",array:!0,default:["value","density"]}]},IS(AN,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=SN(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&IE("Invalid density method: "+a),e.extent||r.data||IE("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=KF(a,e.extent||$S(r.data()),i,o).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],kM(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function NN(e){eF.call(this,null,e)}NN.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function ON(e){TM.call(this,null,$N,e),this.modified(!0)}function $N(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:TE((n=>t(n,e)),RE(t),zE(t))}function TN(e){eF.call(this,[void 0,void 0],e)}function zN(e,t){TM.call(this,e),this.parent=t,this.count=0}function RN(e){eF.call(this,{},e),this._keys=LS();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function PN(e){TM.call(this,null,LN,e)}function LN(e){return this.value&&!e.modified()?this.value:JE(e.name)?_S(e.name).map((e=>UE(e))):UE(e.name,e.as)}function BN(e){eF.call(this,LS(),e)}function IN(e){eF.call(this,[],e)}function jN(e){eF.call(this,[],e)}function UN(e){eF.call(this,null,e)}function qN(e){eF.call(this,[],e)}IS(NN,eF,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=FN(t.source,e.groupby,WE),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>eA($S(e,t))/30)(n,o),s=CM(((e,t)=>o(e)-o(t))),u=e.as||"bin",l=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<l;++h){const e=r[h].sort(s);c=-1;for(const t of pF(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][u]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(u)}}),IS(ON,TM),TN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},IS(TN,eF,{transform:function(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=iS(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=zE(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),IS(zN,TM,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),IS(RN,eF,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){const i=this.value;let o,a,s=RS(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new zN(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean:function(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets:function(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform:function(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=wM(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);o.set(wM(e),t),s(t).add(e)})),a||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=wM(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(o.get(wM(e))).mod(e)})),a&&t.visit(t.REFLOW,(e=>{const t=wM(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),o.clean()})):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),IS(PN,TM),BN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},IS(BN,eF,{transform:function(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;function c(t){const n=wM(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(e=>{const t=wM(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(t=>{u(t,e)?o.push(t):r.set(wM(t),1)})),t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),IN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},IS(IN,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=MN(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let u,l,c,f=0;for(;f<s;++f){for(l=EM(e),u=0;u<a;++u)l[i[u]]=null==(c=t[u][f])?null:c;o&&(l[o]=f),n.add.push(l)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),jN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},IS(jN,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(zE),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,o=0;o<u;++o)t=EM(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)}}),UN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},IS(UN,eF,{transform:function(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),IS(qN,eF,{transform:function(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,u=e.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=kM(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const WN={value:"value",median:Rd,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Nd,max:Fd},HN=[];function VN(e){eF.call(this,[],e)}function GN(e){mN.call(this,e)}function YN(e){eF.call(this,null,e)}function XN(e){TM.call(this,null,QN,e)}function QN(e){return this.value&&!e.modified()?this.value:YS(e.fields,e.flat)}function JN(e){eF.call(this,[],e),this._pending=null}function KN(e,t,n){n.forEach(kM);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function ZN(e){eF.call(this,{},e)}function eO(e){TM.call(this,null,tO,e)}function tO(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function nO(e){TM.call(this,null,rO,e)}function rO(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function iO(e){eF.call(this,null,e)}function oO(e){mN.call(this,e)}function aO(e){RN.call(this,e)}function sO(e){eF.call(this,null,e)}function uO(e){eF.call(this,null,e)}function lO(e){eF.call(this,null,e)}VN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},IS(VN,eF,{transform:function(e,t){var n,r,i,o,a,s,u,l,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||WN.value;if(null!=WN[n])return n===WN.value?(t=void 0!==e.value?e.value:0,()=>t):WN[n];IE("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=zE(e.field),g=zE(e.key),y=(e.groupby||[]).map(zE),v=function(e,t,n,r){var i,o,a,s,u,l,c,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,c=e.length;s<c;++s)l=n(f=e[s]),u=m[l]||(m[l]=p.push(l)),(a=g[o=(i=t?t.map(d):HN)+""])||(a=g[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=v.domain.length;for(a=0,l=v.length;a<l;++a)for(i=(n=v[a]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=v.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[g]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(kM(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),GN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:oN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},IS(GN,mN,{transform:function(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{OS(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes:function(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),YN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},IS(YN,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=FN(r,e.groupby,e.field),o=(e.groupby||[]).map(zE),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&IE("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=$S(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=SF(t,a)[s],r=e.counts?t.length:1;KF(n,c||$S(t),f,d).forEach((e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(kM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),IS(XN,TM),IS(JN,eF,{transform:function(e,t){const n=t.dataflow;if(this._pending)return KN(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return KN(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then((e=>(this._pending=_S(e.data),e=>e.touch(this))))}}return n.request(e.url,e.format).then((e=>KN(this,t,_S(e.data))))}}),ZN.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},IS(ZN,eF,{transform:function(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let u,l,c,f=a?t.SOURCE:t.ADD,d=t,h=e.as;return i?(l=i.length,s>1&&!h&&IE('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*l&&IE('The "as" parameter has too few output field names.'),h=h||i.map(zE),u=function(e){for(var t,a,u=0,c=0;u<s;++u)if(null==(a=r.get(n[u](e))))for(t=0;t<l;++t,++c)e[h[c]]=o;else for(t=0;t<l;++t,++c)e[h[c]]=i[t](a)}):(h||IE("Missing output field names."),u=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?o:t}),a?d=t.reflow(!0):(c=n.some((e=>t.modified(e.fields))),f|=c?t.MOD:0),t.visit(f,u),d.modifies(h)}}),IS(eO,TM),IS(nO,TM),IS(iO,eF,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),oO.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:oN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},IS(oO,mN,{_transform:mN.prototype.transform,transform:function(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=RE(n).concat(RE(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(AS),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((()=>i)),fields:a.map((e=>function(e,t,n,r){return TE((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,o))),as:a.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),IS(aO,RN,{transform:function(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(wM(e),n,t,e);return(e.modified("field")||r&&t.modified(RE(r)))&&IE("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(kM(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),sO.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},IS(sO,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=MN(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):SM;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,(e=>{const t=wM(e);n.rem.push(a[t]),a[t]=null})),t.visit(t.ADD,(e=>{const t=o(e,kM({}));a[wM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(o(e,a[wM(e)]))})),n}}),IS(uO,eF,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),lO.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function cO(e){eF.call(this,null,e)}function fO(e){eF.call(this,[],e),this.count=0}function dO(e){eF.call(this,null,e)}function hO(e){eF.call(this,null,e),this.modified(!0)}function pO(e){eF.call(this,null,e)}IS(lO,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=FN(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(zE),a=[],s=e.step||.01,u=e.probs||Ld(s/2,1-1e-14,s),l=u.length;return i.forEach((e=>{const t=sF(e,u);for(let n=0;n<l;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=u[n],i[r[1]]=t[n],a.push(kM(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),IS(cO,eF,{transform:function(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=wM(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=EM(e);r[wM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[wM(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),fO.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},IS(fO,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce(((e,t)=>(e[wM(t)]=1,e)),{});let a=this.value,s=this.count,u=0;function l(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*fF()),r<a.length&&r>=u&&(t=a[r],o[wM(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=wM(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s})),a=a.filter((e=>-1!==o[wM(e)]))),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,(e=>{o[wM(e)]||l(e)})),u=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[wM(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{o[wM(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter((e=>!o[wM(e)]))),this.count=s,this.value=n.source=a,n}}),dO.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},IS(dO,eF,{transform:function(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ld(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,kM(t)})),n.add=t.add.concat(this.value),n}}),IS(hO,eF,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const mO=["unit0","unit1"];function gO(e){eF.call(this,LS(),e)}function yO(e){eF.call(this,null,e)}pO.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:eD,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:mO}]},IS(pO,eF,{transform:function(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?FD:MD)(o.unit).offset,s=e.as||mO,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(RE(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[u]=null,r&&(e[l]=null)):(e[u]=i=s=o(t),r&&(e[l]=s=a(i,c)),i<f&&(f=i),s>d&&(d=s))})),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor:function(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:JD({extent:e.extent||$S(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=nD(r),a=this.value||{},s=(n?AD:kD)(o,i);return s.unit=rS(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),IS(gO,eF,{transform:function(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),IS(yO,eF,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(CM(e.sort)):t.source).map(e.field))}});const vO={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=vO.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||IE("ntile num must be greater than zero.");const n=vO.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||IE("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const bO=Object.keys(vO);function xO(e){const t=_S(e.ops),n=_S(e.fields),r=_S(e.params),i=_S(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(e){_S(RE(e)).forEach((e=>s[e]=1))}d(e.sort),t.forEach(((e,t)=>{const s=n[t],h=zE(s),p=tN(e,h,i[t]);if(d(s),o.push(p),RS(vO,e))a.push(function(e,t,n,r){const i=vO[e](t,n);return{init:i.init||HE,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],p));else{if(null==s&&"count"!==e&&IE("Null aggregate field specified."),"count"===e)return void l.push(p);f=!1;let t=u[h];t||(t=u[h]=[],t.field=s,c.push(t)),t.push(aN(e,p))}})),(l.length||c.length)&&(this.cell=function(e,t,n){e=e.map((e=>dN(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new hN;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(c,l,f)),this.inputs=Object.keys(s)}const wO=xO.prototype;function _O(e){eF.call(this,{},e),this._mlen=0,this._mods=[]}function kO(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?yd(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||FS(-1)};t.init();for(let e=0;e<u;++e)EO(c,a,e,u),o&&SO(c,l),t.update(c,s[e])}function EO(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function SO(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}wO.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},wO.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},_O.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:bO.concat(oN)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},IS(_O,eF,{transform:function(e,t){this.stamp=t.stamp;const n=e.modified(),r=CM(e.sort),i=eN(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new xO(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,(e=>o(e).add(e)))):(t.visit(t.REM,(e=>o(e).remove(e))),t.visit(t.ADD,(e=>o(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)kO(this._mods[t],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group:function(e){let t=this.value[e];return t||(t=this.value[e]=yN(wM),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),t(iF,"window",(function(){return _O})),t(iF,"values",(function(){return yO})),t(iF,"tupleindex",(function(){return gO})),t(iF,"timeunit",(function(){return pO})),t(iF,"subflow",(function(){return zN})),t(iF,"sieve",(function(){return hO})),t(iF,"sequence",(function(){return dO})),t(iF,"sample",(function(){return fO})),t(iF,"relay",(function(){return cO})),t(iF,"quantile",(function(){return lO})),t(iF,"proxy",(function(){return uO})),t(iF,"project",(function(){return sO})),t(iF,"prefacet",(function(){return aO})),t(iF,"pivot",(function(){return oO})),t(iF,"params",(function(){return iO})),t(iF,"multivalues",(function(){return nO})),t(iF,"multiextent",(function(){return eO})),t(iF,"lookup",(function(){return ZN})),t(iF,"load",(function(){return JN})),t(iF,"key",(function(){return XN})),t(iF,"kde",(function(){return YN})),t(iF,"joinaggregate",(function(){return GN})),t(iF,"impute",(function(){return VN})),t(iF,"generate",(function(){return qN})),t(iF,"formula",(function(){return UN})),t(iF,"fold",(function(){return jN})),t(iF,"flatten",(function(){return IN})),t(iF,"filter",(function(){return BN})),t(iF,"field",(function(){return PN})),t(iF,"facet",(function(){return RN})),t(iF,"extent",(function(){return TN})),t(iF,"expression",(function(){return ON})),t(iF,"dotbin",(function(){return NN})),t(iF,"density",(function(){return AN})),t(iF,"cross",(function(){return _N})),t(iF,"countpattern",(function(){return wN})),t(iF,"compare",(function(){return bN})),t(iF,"collect",(function(){return vN})),t(iF,"bin",(function(){return gN})),t(iF,"aggregate",(function(){return mN}));var AO={},CO={};const DO=Math.PI,MO=2*DO,FO=1e-6,NO=MO-FO;function OO(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function $O(){return new OO}OO.prototype=$O.prototype={constructor:OO,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>FO)if(Math.abs(c*s-u*l)>FO&&i){var d=n-o,h=r-a,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((DO-Math.acos((p+f-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>FO&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>FO||Math.abs(this._y1-l)>FO)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%MO+MO),f>NO?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>FO&&(this._+="A"+n+","+n+",0,"+ +(f>=DO)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var TO=function(e){return function(){return e}},zO=Math.abs,RO=Math.atan2,PO=Math.cos,LO=Math.max,BO=Math.min,IO=Math.sin,jO=Math.sqrt,UO=1e-12,qO=Math.PI,WO=qO/2,HO=2*qO;function VO(e){return e>1?0:e<-1?qO:Math.acos(e)}function GO(e){return e>=1?WO:e<=-1?-WO:Math.asin(e)}function YO(e){return e.innerRadius}function XO(e){return e.outerRadius}function QO(e){return e.startAngle}function JO(e){return e.endAngle}function KO(e){return e&&e.padAngle}function ZO(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<UO))return[e+(d=(c*(t-o)-f*(e-i))/d)*u,t+d*l]}function e$(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/jO(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,w=i-o,_=d*m-p*h,k=(b<0?-1:1)*jO(LO(0,w*w*x-_*_)),E=(_*b-v*k)/x,S=(-_*v-b*k)/x,A=(_*b+v*k)/x,C=(-_*v+b*k)/x,D=E-g,M=S-y,F=A-g,N=C-y;return D*D+M*M>F*F+N*N&&(E=A,S=C),{cx:E,cy:S,x01:-c,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}Array.prototype.slice;var t$=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function n$(e){this._context=e}n$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var r$=function(e){return new n$(e)};function i$(e){return e[0]}function o$(e){return e[1]}var a$=function(e,t){var n=TO(!0),r=null,i=r$,o=null;function a(a){var s,u,l,c=(a=t$(a)).length,f=!1;for(null==r&&(o=i(l=$O())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?i$:TO(e),t="function"==typeof t?t:void 0===t?o$:TO(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:TO(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:TO(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:TO(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},s$=function(e,t,n){var r=null,i=TO(!0),o=null,a=r$,s=null;function u(u){var l,c,f,d,h,p=(u=t$(u)).length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=$O())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+e(d,l,u),y[l]=+t(d,l,u),s.point(r?+r(d,l,u):g[l],n?+n(d,l,u):y[l]))}if(h)return s=null,h+""||null}function l(){return a$().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?i$:TO(+e),t="function"==typeof t?t:TO(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?o$:TO(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:TO(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:TO(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:TO(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:TO(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:TO(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:TO(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:TO(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u},u$={draw:function(e,t){var n=Math.sqrt(t/qO);e.moveTo(n,0),e.arc(0,0,n,0,HO)}},l$=(Math.sqrt(1/3),Math.sin(qO/10)/Math.sin(7*qO/10)),c$=(Math.sin(HO/10),Math.cos(HO/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function f$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function d$(e){this._context=e}d$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:f$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:f$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function h$(e){this._context=e}h$.prototype={areaStart:c$,areaEnd:c$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:f$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p$(e){this._context=e}p$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:f$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m$(e,t){this._basis=new d$(e),this._beta=t}m$.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var g$=function e(t){function n(e){return 1===t?new d$(e):new m$(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function y$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function v$(e,t){this._context=e,this._k=(1-t)/6}v$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:y$(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:y$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var b$=function e(t){function n(e){return new v$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function x$(e,t){this._context=e,this._k=(1-t)/6}x$.prototype={areaStart:c$,areaEnd:c$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:y$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var w$=function e(t){function n(e){return new x$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function _$(e,t){this._context=e,this._k=(1-t)/6}_$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var k$=function e(t){function n(e){return new _$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function E$(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>UO){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>UO){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function S$(e,t){this._context=e,this._alpha=t}S$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:E$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var A$=function e(t){function n(e){return t?new S$(e,t):new v$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function C$(e,t){this._context=e,this._alpha=t}C$.prototype={areaStart:c$,areaEnd:c$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:E$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var D$=function e(t){function n(e){return t?new C$(e,t):new x$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function M$(e,t){this._context=e,this._alpha=t}M$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:E$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var F$=function e(t){function n(e){return t?new M$(e,t):new _$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function N$(e){this._context=e}N$.prototype={areaStart:c$,areaEnd:c$,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function O$(e){return e<0?-1:1}function $$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(O$(o)+O$(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function T$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function z$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function R$(e){this._context=e}function P$(e){this._context=new L$(e)}function L$(e){this._context=e}function B$(e){this._context=e}function I$(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}R$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:z$(this,this._t0,T$(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,z$(this,T$(this,n=$$(this,e,t)),n);break;default:z$(this,this._t0,n=$$(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(P$.prototype=Object.create(R$.prototype)).point=function(e,t){R$.prototype.point.call(this,t,e)},L$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},B$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=I$(e),i=I$(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function j$(e,t){this._context=e,this._t=t}j$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function U$(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const q$=()=>"undefined"!=typeof Image?Image:null;function W$(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const H$="linear",V$="log",G$="pow",Y$="sqrt",X$="symlog",Q$="time",J$="utc",K$="sequential",Z$="diverging",eT="quantile",tT="quantize",nT="threshold",rT="ordinal",iT="point",oT="band",aT="bin-ordinal",sT="continuous",uT="discrete",lT="discretizing",cT="interpolating",fT="temporal";function dT(){const e=Fm().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){const e=t().length,c=o[1]<o[0],f=o[1-c],d=W$(e,s,u);let h=o[c-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*l,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=Ld(e).map((e=>h+r*e));return n(c?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,l,c,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(c=f,f=d,d=c),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,xd(a,f)-1),l=f===d?u:xd(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(c=u,u=s-l,l=s-c),u>l?void 0:t().slice(u,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return dT().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function hT(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return hT(t())},e}var pT=Array.prototype.map;function mT(e){return pT.call(e,iS)}const gT=Array.prototype.slice;const yT={};function vT(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],l=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(l<0&&(l=o),r=o);if(!(l<0))return s=e.invertExtent(n[l]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=e,n};return r.metadata=aA(_S(n)),r}function bT(e,t,n){return arguments.length>1?(yT[e]=vT(e,t,n),this):xT(e)?yT[e]:void 0}function xT(e){return RS(yT,e)}function wT(e,t){const n=yT[e];return n&&n.metadata[t]}function _T(e){return wT(e,sT)}function kT(e){return wT(e,uT)}function ET(e){return wT(e,lT)}function ST(e){return wT(e,V$)}function AT(e){return wT(e,cT)}function CT(e){return wT(e,eT)}bT("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,jp),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,jp):[0,1],ym(r)})),bT(H$,(function e(){var t=Xp();return t.copy=function(){return Gp(t,e())},Qp.apply(t,arguments),ym(t)}),sT),bT(V$,(function e(){var t=Sm(Yp()).domain([1,10]);return t.copy=function(){return Gp(t,e()).base(t.base())},Qp.apply(t,arguments),t}),[sT,V$]),bT(G$,zm,sT),bT(Y$,(function(){return zm.apply(null,arguments).exponent(.5)}),sT),bT(X$,(function e(){var t=Dm(Yp());return t.copy=function(){return Gp(t,e()).constant(t.constant())},Qp.apply(t,arguments)}),sT),bT(Q$,(function(){return Qp.apply(Zy(kg,Eg,ag,og,Km,Qm,Xm,Ym,Gm,Fg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[sT,fT]),bT(J$,(function(){return Qp.apply(Zy(wg,_g,bg,vg,fg,lg,ug,sg,Gm,Og).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[sT,fT]),bT(K$,nv,[sT,cT]),bT("".concat(K$,"-").concat(H$),nv,[sT,cT]),bT("".concat(K$,"-").concat(V$),(function e(){var t=Sm(ev()).domain([1,10]);return t.copy=function(){return tv(t,e()).base(t.base())},Jp.apply(t,arguments)}),[sT,cT,V$]),bT("".concat(K$,"-").concat(G$),rv,[sT,cT]),bT("".concat(K$,"-").concat(Y$),(function(){return rv.apply(null,arguments).exponent(.5)}),[sT,cT]),bT("".concat(K$,"-").concat(X$),(function e(){var t=Dm(ev());return t.copy=function(){return tv(t,e()).constant(t.constant())},Jp.apply(t,arguments)}),[sT,cT]),bT("".concat(Z$,"-").concat(H$),(function e(){var t=ym(iv()(qp));return t.copy=function(){return tv(t,e())},Jp.apply(t,arguments)}),[sT,cT]),bT("".concat(Z$,"-").concat(V$),(function e(){var t=Sm(iv()).domain([.1,1,10]);return t.copy=function(){return tv(t,e()).base(t.base())},Jp.apply(t,arguments)}),[sT,cT,V$]),bT("".concat(Z$,"-").concat(G$),ov,[sT,cT]),bT("".concat(Z$,"-").concat(Y$),(function(){return ov.apply(null,arguments).exponent(.5)}),[sT,cT]),bT("".concat(Z$,"-").concat(X$),(function e(){var t=Dm(iv());return t.copy=function(){return tv(t,e()).constant(t.constant())},Jp.apply(t,arguments)}),[sT,cT]),bT(eT,(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=zd(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[xd(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(gd),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},Qp.apply(a,arguments)}),[lT,eT]),bT(tT,(function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[xd(o,e,0,i)]:t}function u(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,u()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,u()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},Qp.apply(ym(s),arguments)}),lT),bT(nT,(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[xd(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},Qp.apply(o,arguments)}),lT),bT(aT,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(xd(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=mT(e),r):t.slice()},r.range=function(e){return arguments.length?(n=gT.call(e),r):n.slice()},r.tickFormat=function(e,n){return gm(t[0],rS(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[uT,lT]),bT(rT,Fm,uT),bT(oT,dT,uT),bT(iT,(function(){return hT(dT().paddingInner(1))}),uT);const DT=["clamp","base","constant","exponent"];function MT(e,t){const n=t[0],r=rS(t)-n;return function(t){return e(n+t*r)}}function FT(e,t,n){return Bp($T(t||"rgb",n),e)}function NT(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function OT(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=bT(o)().domain([t,n]).range([0,1]),DT.forEach((t=>e[t]?a[t](e[t]()):0)),a):FS(.5)}function $T(e,t){const n=Id[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function TT(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function zT(e,t){for(const n in e)PT(n,t(e[n]))}const RT={};function PT(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(RT[e]=t,this):RT[e]}zT({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},TT),zT({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>FT(TT(e))));const LT="symbol",BT=e=>JE(e)?e.map((e=>String(e))):String(e),IT=(e,t)=>e[1]-t[1],jT=(e,t)=>t[1]-e[1];function UT(e,t,n){let r;return HS(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(eA(e.domain())/n||1)))),KE(t)&&(r=t.step,t=t.interval),GS(t)&&(t=e.type===Q$?MD(t):e.type==J$?FD(t):IE("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function qT(e,t,n){let r=e.range(),i=r[0],o=rS(r),a=IT;if(i>o&&(r=o,o=i,i=r,a=jT),i=Math.floor(i),o=Math.ceil(o),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=o)).sort(a).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],rS(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function WT(e,t){return e.bins?qT(e,e.bins):e.ticks?e.ticks(t):e.domain()}function HT(e,t,n,r,i,o){const a=t.type;let s=BT;if(a===Q$||i===Q$)s=e.timeFormat(r);else if(a===J$||i===J$)s=e.utcFormat(r);else if(ST(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=VT(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function VT(e,t,n){const r=WT(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const GT={[eT]:"quantiles",[tT]:"thresholds",[nT]:"domain"},YT={[eT]:"quantiles",[tT]:"domain"};function XT(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=rS(e),t}(e.bins):e.type===V$?VT(e,t,!0):GT[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[GT[e.type]]()):WT(e,t)}function QT(e,t,n,r,i,o,a){const s=YT[t.type]&&o!==Q$&&o!==J$?function(e,t,n){const r=t[YT[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):HT(e,t,n,i,o,a);return r===LT&&(e=>GT[e.type]||e.bins)(t)?JT(s):"discrete"===r?ZT(s):ez(s)}const JT=e=>(t,n,r)=>{const i=KT(r[n+1],KT(r.max,1/0)),o=tz(t,e),a=tz(i,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},KT=(e,t)=>null!=e?e:t,ZT=e=>(t,n)=>n?e(t):null,ez=e=>t=>e(t),tz=(e,t)=>Number.isFinite(e)?t(e):null;function nz(e,t,n,r){const i=r||t.type;return GS(n)&&wT(i,fT)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==Q$?n||i!==J$?QT(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function rz(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=nz(e,t,n.format,n.formatType);if(ET(t.type)){const e=XT(t).slice(1).map(i),n=e.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(e.join(", "))}if(kT(t.type)){const e=t.domain(),n=e.length,o=n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const e=t.domain();return"values from ".concat(i(e[0])," to ").concat(i(rS(e)))}}let iz=0;const oz="p_";function az(e){return e&&e.gradient}function sz(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?oz:"";return i||(i=e.id="gradient_"+iz++,"radial"===r?(e.x1=uz(e.x1,.5),e.y1=uz(e.y1,.5),e.r1=uz(e.r1,0),e.x2=uz(e.x2,.5),e.y2=uz(e.y2,.5),e.r2=uz(e.r2,.5),o=oz):(e.x1=uz(e.x1,0),e.y1=uz(e.y1,0),e.x2=uz(e.x2,1),e.y2=uz(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function uz(e,t){return null!=e?e:t}function lz(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const cz={basis:{curve:function(e){return new d$(e)}},"basis-closed":{curve:function(e){return new h$(e)}},"basis-open":{curve:function(e){return new p$(e)}},bundle:{curve:g$,tension:"beta",value:.85},cardinal:{curve:b$,tension:"tension",value:0},"cardinal-open":{curve:k$,tension:"tension",value:0},"cardinal-closed":{curve:w$,tension:"tension",value:0},"catmull-rom":{curve:A$,tension:"alpha",value:.5},"catmull-rom-closed":{curve:D$,tension:"alpha",value:.5},"catmull-rom-open":{curve:F$,tension:"alpha",value:.5},linear:{curve:r$},"linear-closed":{curve:function(e){return new N$(e)}},monotone:{horizontal:function(e){return new P$(e)},vertical:function(e){return new R$(e)}},natural:{curve:function(e){return new B$(e)}},step:{curve:function(e){return new j$(e,.5)}},"step-after":{curve:function(e){return new j$(e,1)}},"step-before":{curve:function(e){return new j$(e,0)}}};function fz(e,t,n){var r=RS(cz,e)&&cz[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const dz={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},hz=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function pz(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(hz[0],"###$1").split(hz[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(hz[2],"$1###$2").replace(hz[3],"$1###$2").split(hz[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=dz[a.toLowerCase()],i.length-1>s){const e=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a="M"===a?"L":"m"===a?"l":a;l<e;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const mz=Math.PI/180,gz=Math.PI/2,yz=2*Math.PI,vz=Math.sqrt(3)/2;var bz={},xz={},wz=[].join;function _z(e){const t=wz.call(e);if(xz[t])return xz[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),x=8/3*b*b/Math.sin(v),w=n+p-x*m,_=r+m+x*p,k=n+g,E=r+y,S=k+x*y,A=E-x*g;return xz[t]=[c*w+f*_,d*w+h*_,c*S+f*A,d*S+h*A,c*k+f*E,d*k+h*E]}const kz=["l",0,0,0,0,0,0,0];function Ez(e,t,n){const r=kz[0]=e[0];if("a"===r||"A"===r)kz[1]=t*e[1],kz[2]=n*e[2],kz[3]=e[3],kz[4]=e[4],kz[5]=e[5],kz[6]=t*e[6],kz[7]=n*e[7];else if("h"===r||"H"===r)kz[1]=t*e[1];else if("v"===r||"V"===r)kz[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)kz[i]=(i%2==1?t:n)*e[i];return kz}function Sz(e,t,n,r,i,o){var a,s,u,l,c,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(a=t[g],1===i&&1===o||(a=Ez(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],m=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],m=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],m=h+a[2],e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-l,m=2*h-c):"q"===f[0]&&(p=2*d-p,m=2*h-m),l=p,c=m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),h=u,p=(d=s)+a[1],m=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":Az(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":Az(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function Az(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,u){const l=wz.call(arguments);if(bz[l])return bz[l];const c=a*mz,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*s+y*u,w=v*s+b*u,_=g*e+y*t,k=v*e+b*t;let E=1/((_-x)*(_-x)+(k-w)*(k-w))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const A=.5*(x+_)-S*(k-w),C=.5*(w+k)+S*(_-x),D=Math.atan2(w-C,x-A);let M=Math.atan2(k-C,_-A)-D;M<0&&1===o?M+=yz:M>0&&0===o&&(M-=yz);const F=Math.ceil(Math.abs(M/(gz+.001))),N=[];for(let e=0;e<F;++e){const t=D+e*M/F,i=D+(e+1)*M/F;N[e]=[A,C,t,i,n,r,f,d]}return bz[l]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=_z(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const Cz=.5773502691896257,Dz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,yz)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n,i=r-n*Cz,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n,i=r-n*Cz;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=vz*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Mz(e){return RS(Dz,e)?Dz[e]:function(e){if(!RS(Fz,e)){const t=pz(e);Fz[e]={draw:function(e,n){Sz(e,t,0,0,Math.sqrt(n)/2)}}}return Fz[e]}(e)}var Fz={};const Nz=.448084975506;function Oz(e){return e.x}function $z(e){return e.y}function Tz(e){return e.width}function zz(e){return e.height}function Rz(e){return"function"==typeof e?e:()=>+e}function Pz(e,t,n){return Math.max(t,Math.min(e,n))}function Lz(){var e=Oz,t=$z,n=Tz,r=zz,i=Rz(0),o=i,a=i,s=i,u=null;function l(l,c,f){var d,h=null!=c?c:+e.call(this,l),p=null!=f?f:+t.call(this,l),m=+n.call(this,l),g=+r.call(this,l),y=Math.min(m,g)/2,v=Pz(+i.call(this,l),0,y),b=Pz(+o.call(this,l),0,y),x=Pz(+a.call(this,l),0,y),w=Pz(+s.call(this,l),0,y);if(u||(u=d=$O()),v<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var _=h+m,k=p+g;u.moveTo(h+v,p),u.lineTo(_-b,p),u.bezierCurveTo(_-Nz*b,p,_,p+Nz*b,_,p+b),u.lineTo(_,k-w),u.bezierCurveTo(_,k-Nz*w,_-Nz*w,k,_-w,k),u.lineTo(h+x,k),u.bezierCurveTo(h+Nz*x,k,h,k-Nz*x,h,k-x),u.lineTo(h,p+v),u.bezierCurveTo(h,p+Nz*v,h+Nz*v,p,h+v,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(t){return arguments.length?(e=Rz(t),l):e},l.y=function(e){return arguments.length?(t=Rz(e),l):t},l.width=function(e){return arguments.length?(n=Rz(e),l):n},l.height=function(e){return arguments.length?(r=Rz(e),l):r},l.cornerRadius=function(e,t,n,r){return arguments.length?(i=Rz(e),o=null!=t?Rz(t):i,s=null!=n?Rz(n):i,a=null!=r?Rz(r):o,l):i},l.context=function(e){return arguments.length?(u=null==e?null:e,l):u},l}function Bz(){var e,t,n,r,i,o,a,s,u=null;function l(e,t,n){const r=n/2;if(i){var l=a-t,c=e-o;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(o-d,a-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(e,t,r,0,yz);u.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==u&&(u=c=$O()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&l(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return u=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function Iz(e,t){return null!=e?e:t}const jz=e=>e.x||0,Uz=e=>e.y||0,qz=e=>!(!1===e.defined),Wz=function(){var e=YO,t=XO,n=TO(0),r=null,i=QO,o=JO,a=KO,s=null;function u(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-WO,h=o.apply(this,arguments)-WO,p=zO(h-d),m=h>d;if(s||(s=u=$O()),f<c&&(l=f,f=c,c=l),f>UO)if(p>HO-UO)s.moveTo(f*PO(d),f*IO(d)),s.arc(0,0,f,d,h,!m),c>UO&&(s.moveTo(c*PO(h),c*IO(h)),s.arc(0,0,c,h,d,m));else{var g,y,v=d,b=h,x=d,w=h,_=p,k=p,E=a.apply(this,arguments)/2,S=E>UO&&(r?+r.apply(this,arguments):jO(c*c+f*f)),A=BO(zO(f-c)/2,+n.apply(this,arguments)),C=A,D=A;if(S>UO){var M=GO(S/c*IO(E)),F=GO(S/f*IO(E));(_-=2*M)>UO?(x+=M*=m?1:-1,w-=M):(_=0,x=w=(d+h)/2),(k-=2*F)>UO?(v+=F*=m?1:-1,b-=F):(k=0,v=b=(d+h)/2)}var N=f*PO(v),O=f*IO(v),$=c*PO(w),T=c*IO(w);if(A>UO){var z,R=f*PO(b),P=f*IO(b),L=c*PO(x),B=c*IO(x);if(p<qO&&(z=ZO(N,O,L,B,R,P,$,T))){var I=N-z[0],j=O-z[1],U=R-z[0],q=P-z[1],W=1/IO(VO((I*U+j*q)/(jO(I*I+j*j)*jO(U*U+q*q)))/2),H=jO(z[0]*z[0]+z[1]*z[1]);C=BO(A,(c-H)/(W-1)),D=BO(A,(f-H)/(W+1))}}k>UO?D>UO?(g=e$(L,B,N,O,f,D,m),y=e$(R,P,$,T,f,D,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),D<A?s.arc(g.cx,g.cy,D,RO(g.y01,g.x01),RO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,D,RO(g.y01,g.x01),RO(g.y11,g.x11),!m),s.arc(0,0,f,RO(g.cy+g.y11,g.cx+g.x11),RO(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,D,RO(y.y11,y.x11),RO(y.y01,y.x01),!m))):(s.moveTo(N,O),s.arc(0,0,f,v,b,!m)):s.moveTo(N,O),c>UO&&_>UO?C>UO?(g=e$($,T,R,P,c,-C,m),y=e$(N,O,L,B,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,RO(g.y01,g.x01),RO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,RO(g.y01,g.x01),RO(g.y11,g.x11),!m),s.arc(0,0,c,RO(g.cy+g.y11,g.cx+g.x11),RO(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,RO(y.y11,y.x11),RO(y.y01,y.x01),!m))):s.arc(0,0,c,w,x,m):s.lineTo($,T)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-qO/2;return[PO(r)*n,IO(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:TO(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:TO(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:TO(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:TO(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:TO(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:TO(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:TO(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),Hz=s$().x(jz).y1(Uz).y0((e=>(e.y||0)+(e.height||0))).defined(qz),Vz=s$().y(Uz).x1(jz).x0((e=>(e.x||0)+(e.width||0))).defined(qz),Gz=a$().x(jz).y(Uz).defined(qz),Yz=Lz().x(jz).y(Uz).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>Iz(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>Iz(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>Iz(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>Iz(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),Xz=function(e,t){var n=null;function r(){var r;if(n||(n=r=$O()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:TO(e||u$),t="function"==typeof t?t:TO(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:TO(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:TO(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>Mz(e.shape||"circle"))).size((e=>Iz(e.size,64))),Qz=Bz().x(jz).y(Uz).defined(qz).size((e=>e.size||1));function Jz(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Kz(e,t,n,r){return Yz.context(e)(t,n,r)}var Zz=1;function eR(){Zz=1}function tR(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+Zz++),a=i.clipping[o]||(i.clipping[o]={id:o});return ES(r)?a.path=r(null):Jz(n)?a.path=Kz(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function nR(e){this.clear(),e&&this.union(e)}function rR(e){this.mark=e,this.bounds=this.bounds||new nR}function iR(e){rR.call(this,e),this.items=this.items||[]}function oR(e){this._pending=0,this._loader=e||mM()}function aR(e){e._pending+=1}function sR(e){e._pending-=1}function uR(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}nR.prototype={clone:function(){return new nR(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},IS(iR,rR),oR.prototype={pending:function(){return this._pending},sanitizeURL:function(e){const t=this;return aR(t),t._loader.sanitize(e,{context:"href"}).then((e=>(sR(t),e))).catch((()=>(sR(t),null)))},loadImage:function(e){const t=this,n=q$();return aR(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=RS(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>sR(t),i.onerror=()=>sR(t),i.src=r,i})).catch((e=>(sR(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready:function(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}};const lR=yz-1e-8;let cR,fR,dR,hR,pR,mR,gR,yR;const vR=(e,t)=>cR.add(e,t),bR=(e,t)=>vR(fR=e,dR=t),xR=e=>vR(e,cR.y1),wR=e=>vR(cR.x1,e),_R=(e,t)=>pR*e+gR*t,kR=(e,t)=>mR*e+yR*t,ER=(e,t)=>vR(_R(e,t),kR(e,t)),SR=(e,t)=>bR(_R(e,t),kR(e,t));function AR(e,t){return cR=e,t?(hR=t*mz,pR=yR=Math.cos(hR),mR=Math.sin(hR),gR=-mR):(pR=yR=1,hR=mR=gR=0),CR}const CR={beginPath:function(){},closePath:function(){},moveTo:SR,lineTo:SR,rect:function(e,t,n,r){hR?(ER(e+n,t),ER(e+n,t+r),ER(e,t+r),SR(e,t)):(vR(e+n,t+r),bR(e,t))},quadraticCurveTo:function(e,t,n,r){const i=_R(e,t),o=kR(e,t),a=_R(n,r),s=kR(n,r);DR(fR,i,a,xR),DR(dR,o,s,wR),bR(a,s)},bezierCurveTo:function(e,t,n,r,i,o){const a=_R(e,t),s=kR(e,t),u=_R(n,r),l=kR(n,r),c=_R(i,o),f=kR(i,o);MR(fR,a,u,c,xR),MR(dR,s,l,f,wR),bR(c,f)},arc:function(e,t,n,r,i,o){if(r+=hR,i+=hR,fR=n*Math.cos(i)+e,dR=n*Math.sin(i)+t,Math.abs(i-r)>lR)vR(e-n,t-n),vR(e+n,t+n);else{const a=r=>vR(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=yz)<0&&(r+=yz),(i%=yz)<0&&(i+=yz),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=yz,s=r-r%gz,u=0;u<4&&s>i;++u,s-=gz)a(s);else for(s=r-r%gz+gz,u=0;u<4&&s<i;++u,s+=gz)a(s)}}};function DR(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function MR(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),l=(-a+u)/o,c=(-a-u)/o)):l=.5*s/a,0<l&&l<1&&i(FR(l,e,t,n,r)),0<c&&c<1&&i(FR(c,e,t,n,r))}function FR(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var NR=(NR=U$(1,1))?NR.getContext("2d"):null;const OR=new nR;function $R(e){return function(t,n){if(!NR)return!0;e(NR,t),OR.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=OR;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(NR.isPointInPath(t,e))return!0;return!1}}function TR(e,t){return t.contains(e.x||0,e.y||0)}function zR(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(OR.set(n,r,n+i,r+o))}function RR(e,t){const n=e.x||0,r=e.y||0;return PR(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function PR(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-l,d=-(o-t)),1===p&&(f=l,d=s-t),2===p&&(f=-c,d=-(a-n)),3===p&&(f=c,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function LR(e,t){e.globalCompositeOperation=t.blend||"source-over"}function BR(e,t){return null==e?t:e}function IR(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function jR(e,t,n){return az(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+BR(t.x1,.5)*r,n.y1+BR(t.y1,.5)*i,Math.max(r,i)*BR(t.r1,0),n.x1+BR(t.x2,.5)*r,n.y1+BR(t.y2,.5)*i,Math.max(r,i)*BR(t.r2,.5));else{const a=BR(t.x1,0),s=BR(t.y1,0),u=BR(t.x2,1),l=BR(t.y2,0);if(a!==u&&s!==l&&r!==i){const n=U$(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=IR(o.createLinearGradient(a,s,u,l),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i)}return IR(o,t.stops)}(e,n,t.bounds):n}function UR(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=jR(e,t,t.fill),!0)}var qR=[];function WR(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=jR(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||qR),e.lineDashOffset=t.strokeDashOffset||0),!0))}function HR(e,t){return e.zindex-t.zindex||e.index-t.index}function VR(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(HR)}function GR(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=VR(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function YR(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=VR(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function XR(e){return function(t,n,r){GR(n,(n=>{r&&!r.intersects(n.bounds)||QR(e,t,n,n)}))}}function QR(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(LR(t,n),n.fill&&UR(t,n,i)&&t.fill(),n.stroke&&WR(t,n,i)&&t.stroke()))}function JR(e){return e=e||GE,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,YR(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function KR(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function ZR(e){return JR(KR(e))}function eP(e,t){return"translate("+e+","+t+")"}function tP(e){return"rotate("+e+")"}function nP(e){return eP(e.x||0,e.y||0)}function rP(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=mz),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return eP(e.x||0,e.y||0)+(e.angle?" "+tP(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(AR(e,n.angle),n),uR(e,n).translate(n.x||0,n.y||0)},draw:XR(r),pick:ZR(r),isect:n||$R(r)}}var iP=rP("arc",(function(e,t){return Wz.context(e)(t)}));function oP(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=KR(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(AR(e),r),uR(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||QR(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:TR,tip:n};var o}var aP=oP("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Vz:Hz).curve(fz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function sP(e,t){e.beginPath(),Jz(t)?Kz(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function uP(e){const t=BR(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function lP(e,t){const n=uP(t);e("d",Kz(null,t,n,n))}function cP(e,t,n,r){const i=uP(t);e.beginPath(),Kz(e,t,(n||0)+i,(r||0)+i)}const fP=KR(cP),dP=KR(cP,!1),hP=KR(cP,!0);var pP={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",nP(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),uR(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){GR(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(cP(e,t,r,i),LR(e,t),t.fill&&UR(e,t,a)&&e.fill(),t.stroke&&!o&&WR(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&sP(e,t),n&&n.translate(-r,-i),GR(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(cP(e,t,r,i),LR(e,t),WR(e,t,a)&&e.stroke())}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return YR(t,(u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&Jz(u)&&!hP(e,u,a,s))return e.restore(),null;const g=u.strokeForeground,y=!1!==t.interactive;return y&&g&&u.stroke&&dP(e,u,a,s)?(e.restore(),u):(l=YR(u,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,f)?this.pick(e,n,r,c,f):null)),!l&&y&&(u.fill||!g&&u.stroke)&&fP(e,u,a,s)&&(l=u),e.restore(),l||null)}))},isect:zR,content:function(e,t,n){e("clip-path",t.clip?tR(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),lP(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?lP(e,t):e("d","")}},mP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function gP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function yP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function vP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function bP(e,t){return"center"===e?t/2:"right"===e?t:0}function xP(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var wP={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=gP(t,n),i=yP(t,r),o=vP(t,r),a=(t.x||0)-bP(t.align,i),s=(t.y||0)-xP(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",mP["xmlns:xlink"],"xlink:href"),e("transform",eP(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=yP(t,n),i=vP(t,n),o=(t.x||0)-bP(t.align,r),a=(t.y||0)-xP(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){GR(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=gP(t,this);let i=yP(t,r),o=vP(t,r);if(0===i||0===o)return;let a,s,u,l,c=(t.x||0)-bP(t.align,i),f=(t.y||0)-xP(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,u=t.width/t.height,s==s&&u==u&&s!==u&&(u<s?(l=i/s,f+=(o-l)/2,o=l):(l=o*s,c+=(i-l)/2,i=l))),(r.complete||r.toDataURL)&&(LR(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,f,i,o))}))},pick:JR(),isect:GE,get:gP,xOffset:bP,yOffset:xP},_P=oP("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return Gz.curve(fz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function kP(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*mz,u=t.pathCache;u&&u.path===n||((t.pathCache=u=pz(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Sz(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Sz(e,u,r,i,o,a)}var EP={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return eP(e.x||0,e.y||0)+(e.angle?" "+tP(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return kP(AR(e,t.angle),t)?e.set(0,0,0,0):uR(e,t,!0)},draw:XR(kP),pick:ZR(kP),isect:$R(kP)};function SP(e,t){e.beginPath(),Kz(e,t)}var AP={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",Kz(null,t))},bound:function(e,t){var n,r;return uR(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:XR(SP),pick:ZR(SP),isect:zR};function CP(e,t,n){var r,i,o,a;return!(!t.stroke||!WR(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var DP={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",nP(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return uR(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){GR(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&CP(e,t,r)&&(LR(e,t),e.stroke())}}))},pick:JR((function(e,t,n,r){return!!e.isPointInStroke&&(CP(e,t,1)&&e.isPointInStroke(n,r))})),isect:RR},MP=rP("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),FP=rP("symbol",(function(e,t){return Xz.context(e)(t)}),TR);const NP=QS();var OP={height:LP,measureWidth:RP,estimateWidth:TP,width:TP,canvas:$P};function $P(e){OP.width=e&&NR?RP:TP}function TP(e,t){return zP(UP(e,t),LP(e))}function zP(e,t){return~~(.8*e.length*t)}function RP(e,t){return LP(e)<=0||!(t=UP(e,t))?0:PP(t,WP(e))}function PP(e,t){const n=`(${t}) ${e}`;let r=NP.get(n);return void 0===r&&(NR.font=t,r=NR.measureText(e).width,NP.set(n,r)),r}function LP(e){return null!=e.fontSize?+e.fontSize||0:11}function BP(e){return null!=e.lineHeight?e.lineHeight:LP(e)+2}function IP(e){return t=e.lineBreak&&e.text&&!JE(e.text)?e.text.split(e.lineBreak):e.text,JE(t)?t.length>1?t:t[0]:t;var t}function jP(e){const t=IP(e);return(JE(t)?t.length-1:0)*BP(e)}function UP(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(OP.width===RP){const t=WP(e);return e=>PP(e,t)}{const t=LP(e);return e=>zP(e,t)}}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}(e,n):n}function qP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function WP(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+LP(e)+"px "+qP(e,t)}function HP(e){var t=e.baseline,n=LP(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*BP(e):"line-bottom"===t?.29*n-.5*BP(e):0)}$P(!0);const VP={left:"start",center:"middle",right:"end"},GP=new nR;function YP(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-gz,n+=i*Math.cos(t),r+=i*Math.sin(t)),GP.x1=n,GP.y1=r,GP}function XP(e,t,n){var r,i=OP.height(t),o=t.align,a=YP(t),s=a.x1,u=a.y1,l=t.dx||0,c=(t.dy||0)+HP(t)-Math.round(.8*i),f=IP(t);if(JE(f)?(i+=BP(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,OP.width(t,n))),0)):r=OP.width(t,f),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*mz,s,u);else if(2===n)return e.rotatedPoints(t.angle*mz,s,u);return e}var QP={arc:iP,area:aP,group:pP,image:wP,line:_P,path:EP,rect:AP,rule:DP,shape:MP,symbol:FP,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+HP(t),o=YP(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",VP[t.align]||"start"),u?(n=eP(a,s)+" "+tP(u),(r||i)&&(n+=" "+eP(r,i))):n=eP(a+r,s+i),e("transform",n)},bound:XP,draw:function(e,t,n){GR(t,(t=>{var r,i,o,a,s,u,l,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=WP(t),e.textAlign=t.align||"left",i=(r=YP(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*mz),i=o=0),i+=t.dx||0,o+=(t.dy||0)+HP(t),u=IP(t),LR(e,t),JE(u))for(s=BP(t),a=0;a<u.length;++a)l=UP(t,u[a]),t.fill&&UR(e,t,c)&&e.fillText(l,i,o),t.stroke&&WR(e,t,c)&&e.strokeText(l,i,o),o+=s;else l=UP(t,u),t.fill&&UR(e,t,c)&&e.fillText(l,i,o),t.stroke&&WR(e,t,c)&&e.strokeText(l,i,o);t.angle&&e.restore()}}))},pick:JR((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=YP(t),s=a.x1,u=a.y1,l=XP(GP,t,1),c=-t.angle*mz,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)})),isect:function(e,t){const n=XP(GP,e,2);return PR(t,n[0],n[1],n[2],n[3])||PR(t,n[0],n[1],n[4],n[5])||PR(t,n[4],n[5],n[6],n[7])||PR(t,n[2],n[3],n[6],n[7])}},trail:oP("trail",(function(e,t){return Qz.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))};function JP(e,t,n){var r=QP[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new nR),e,n)}var KP={mark:null};function ZP(e,t,n){var r,i,o,a,s=QP[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?o=l[0]:(KP.mark=e,o=KP),a=JP(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new nR,c)for(r=0,i=l.length;r<i;++r)t.union(JP(l[r],u,n));return e.bounds=t}const eL=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function tL(e,t){return JSON.stringify(e,eL,t)}function nL(e){return rL("string"==typeof e?JSON.parse(e):e)}function rL(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&rL(o[n]);return i&&ZP(e),e}function iL(e){arguments.length?this.root=nL(e):(this.root=oL({marktype:"group",name:"root",role:"frame"}),this.root.items=[new iR(this.root)])}function oL(e,t){const n={bounds:new nR,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function aL(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function sL(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function uL(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=aL(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function lL(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function cL(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function fL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function dL(e,t){this._active=null,this._handlers={},this._loader=e||mM(),this._tooltip=t||hL}function hL(e,t,n,r){e.element().setAttribute("title",r||"")}function pL(e){this._el=null,this._bgcolor=null,this._loader=new oR(e)}iL.prototype={toJSON:function(e){return tL(this.root,e||0)},mark:function(e,t,n){const r=oL(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},dL.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName:function(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=aL(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=QP[a.marktype]).tip){for((o=fL(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},pL.prototype={initialize:function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};const mL="dragenter",gL="dragleave",yL="dragover",vL="mousedown",bL="mousemove",xL="mouseout",wL="mouseover",_L="click",kL="mousewheel",EL="touchstart",SL="touchmove",AL="touchend",CL=bL,DL=xL,ML=_L;function FL(e,t){dL.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function NL(e,t){(e=>e===EL||e===SL||e===AL?[EL,SL,AL]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function OL(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function $L(e){return function(t){this.fire(e,t),this._active=null}}IS(FL,dL,{initialize:function(e,t,n){return this._canvas=e&&sL(e,"canvas"),[_L,vL,bL,xL,gL].forEach((e=>NL(this,e))),dL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",mL,gL,yL,vL,"mouseup",bL,xL,wL,_L,"dblclick","wheel",kL,EL,SL,AL],DOMMouseScroll:function(e){this.fire(kL,e)},mousemove:OL(bL,wL,xL),dragover:OL(yL,mL,gL),mouseout:$L(xL),dragleave:$L(gL),mousedown:function(e){this._down=this._active,this.fire(vL,e)},click:function(e){this._down===this._active&&(this.fire(_L,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(EL,e,!0)},touchmove:function(e){this.fire(SL,e,!0)},touchend:function(e){this.fire(AL,e,!0),this._touch=null},fire:function(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===ML&&r&&r.href?this.handleHref(t,r,r.href):e!==CL&&e!==DL||this.handleTooltip(t,r,e!==DL),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)},on:function(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(NL(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent:function(e){const t=fL(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,i){const o=this.context();return QP[e.marktype].pick.call(this,o,e,t,n,r,i)}});var TL="undefined"!=typeof window&&window.devicePixelRatio||1;function zL(e){pL.call(this,e),this._options={},this._redraw=!1,this._dirty=new nR,this._tempb=new nR}const RL=pL.prototype;function PL(e,t){dL.call(this,e,t);const n=this;n._hrefHandler=LL(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=LL(n,((e,t)=>{n.handleTooltip(e,t,e.type!==DL)}))}IS(zL,pL,{initialize:function(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:U$(1,1,this._options.type),e&&this._canvas&&(lL(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),RL.initialize.call(this,e,t,n,r,i)},resize:function(e,t,n,r){if(RL.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?TL:i;e.width=t*u,e.height=n*u;for(const e in o)s[e]=o[e];a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||IE("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=(s=n,u=r,l=i,(new nR).set(0,0,u,l).translate(-s[0],-s[1]));var s,u,l;t.save();const c=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,c),t.restore(),o.clear(),this},draw:function(e,t,n){const r=QP[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),ES(n)?(e.beginPath(),n(e),e.clip()):sP(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const LL=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};IS(PL,dL,{initialize:function(e,t,n){let r=this._svg;return r&&(r.removeEventListener(ML,this._hrefHandler),r.removeEventListener(CL,this._tooltipHandler),r.removeEventListener(DL,this._tooltipHandler)),this._svg=r=e&&sL(e,"svg"),r&&(r.addEventListener(ML,this._hrefHandler),r.addEventListener(CL,this._tooltipHandler),r.addEventListener(DL,this._tooltipHandler)),dL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:LL(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const BL="aria-hidden",IL="aria-label",jL="role",UL="aria-roledescription",qL="graphics-object",WL="graphics-symbol",HL=(e,t,n)=>({[jL]:e,[UL]:t,[IL]:n||void 0}),VL=aA(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),GL={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?KL(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${kT(s)?"discrete":s} scale`+` with ${rz(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?KL(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return l=r,(l.length?l[0].toUpperCase()+l.slice(1):l)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+rS(e)}(o)}`+` with ${rz(u,s,e)}`;var l}},"title-text":{desc:"title",caption:e=>`Title text '${JL(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${JL(e)}'`}},YL={ariaRole:jL,ariaRoleDescription:UL,description:IL};function XL(e,t){const n=!1===t.aria;if(e(BL,n||void 0),n||null==t.description)for(const t in YL)e(YL[t],void 0);else{const n=t.mark.marktype;e(IL,t.description),e(jL,t.ariaRole||("group"===n?qL:WL)),e(UL,t.ariaRoleDescription||`${n} mark`)}}function QL(e){return!1===e.aria?{[BL]:!0}:VL[e.role]?null:GL[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return HL(t.role||WL,t.desc,n.description||r(n))}catch(e){return null}}(e,GL[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return HL(n?qL:WL,`${t} mark container`,e.description)}(e)}function JL(e){return _S(e.text).join(" ")}function KL(e){try{return _S(rS(e.items).items[0].text).join(" ")}catch(e){return null}}const ZL=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function eB(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,ZL(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open:function(s,...u){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(const e of u)for(const t in e)o(t,e[t]);return a},close:function(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=ZL(e),a),toString:()=>e};return a}const tB=e=>nB(eB(),e)+"";function nB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):nB(e,r)}}return e.close()}const rB={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},iB={fill:"none","stroke-miterlimit":10},oB="http://www.w3.org/2000/xmlns/",aB=mP.xmlns;function sB(e){pL.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const uB=pL.prototype;function lB(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function cB(e,t,n){let r,i,o;if("radial"===t.gradient){let r=uL(e,n++,"pattern",aB);vB(r,{id:oz+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=uL(r,0,"rect",aB),vB(r,{width:1,height:1,fill:`url(${xB()}#${t.id})`}),vB(e=uL(e,n++,"radialGradient",aB),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else vB(e=uL(e,n++,"linearGradient",aB),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=uL(e,r,"stop",aB),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return lL(e,r),n}function fB(e,t,n){let r;return(e=uL(e,n,"clipPath",aB)).setAttribute("id",t.id),t.path?(r=uL(e,0,"path",aB),r.setAttribute("d",t.path)):(r=uL(e,0,"rect",aB),vB(r,{x:0,y:0,width:t.width,height:t.height})),lL(e,1),n+1}function dB(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=aL(o,r,aB),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=aL(o,"path",aB);a.appendChild(t),t.__data__=e;const n=aL(o,"g",aB);a.appendChild(n),n.__data__=e;const r=aL(o,"path",aB);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}IS(sB,pL,{initialize:function(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=uL(e,0,"svg",aB),this._svg.setAttributeNS(oB,"xmlns",aB),this._svg.setAttributeNS(oB,"xmlns:xlink",mP["xmlns:xlink"]),this._svg.setAttribute("version",mP.version),this._svg.setAttribute("class","marks"),lL(e,1),this._root=uL(this._svg,0,"g",aB),vB(this._root,iB),lL(this._svg,1)),this.background(this._bgcolor),uB.initialize.call(this,e,t,n,r,i)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),uB.background.apply(this,arguments)},resize:function(e,t,n,r){return uB.resize.call(this,e,t,n,r),this._svg&&(vB(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=uL(e,0,"rect",aB),vB(n,{width:this._width,height:this._height,fill:t}));const r=tB(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),lL(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=QP[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,lB(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,lB(n,t)),n._update=t)));return!this._dirtyAll},mark:function(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=QP[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const l=dB(t,e,n,"g",r);l.setAttribute("class",cL(t));const c=QL(t);for(const e in c)bB(l,e,c[e]);a||bB(l,"pointer-events",o),bB(l,"clip-path",t.clip?tR(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=dB(e,l,s,i.tag,r);t&&(this._update(i,n,e),a&&function(e,t,n){t=t.lastChild.previousSibling;let r,i=0;GR(n,(n=>{r=e.mark(t,n,r),++i})),lL(t,1+i)}(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):GR(t,f),lL(l,u),l},_update:function(e,t,n){hB=t,pB=t.__values__,XL(gB,n),e.attr(gB,n,this);const r=mB[e.type];r&&r.call(this,e,t,n),hB&&this.style(hB,n)},style:function(e,t){if(null!=t)for(const n in rB){let r="font"===n?qP(t):t[n];if(r===pB[n])continue;const i=rB[n];null==r?e.removeAttribute(i):(az(r)&&(r=sz(r,this._defs.gradient,xB())),e.setAttribute(i,r+"")),pB[n]=r}},defs:function(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=uL(e,1,"defs",aB)),r=cB(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=uL(e,1,"defs",aB)),r=fB(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):lL(n,r))},_clearDefs:function(){const e=this._defs;e.gradient={},e.clipping={}}});let hB=null,pB=null;const mB={group:function(e,t,n){const r=hB=t.childNodes[2];pB=r.__values__,e.foreground(gB,n,this),pB=t.__values__,hB=t.childNodes[1],e.content(gB,n,this);const i=hB=t.childNodes[0];e.background(gB,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==pB.events&&(bB(r,"pointer-events",o),bB(i,"pointer-events",o),pB.events=o),n.strokeForeground&&n.stroke){const e=n.fill;bB(r,"display",null),this.style(i,n),bB(i,"stroke",null),e&&(n.fill=null),pB=r.__values__,this.style(r,n),e&&(n.fill=e),hB=null}else bB(r,"display","none")},image:function(e,t,n){!1===n.smooth?(yB(t,"image-rendering","optimizeSpeed"),yB(t,"image-rendering","pixelated")):yB(t,"image-rendering",null)},text:function(e,t,n){const r=IP(n);let i,o,a,s;JE(r)?(o=r.map((e=>UP(n,e))),i=o.join("\n"),i!==pB.text&&(lL(t,0),a=t.ownerDocument,s=BP(n),o.forEach(((e,r)=>{const i=aL(a,"tspan",aB);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),pB.text=i)):(o=UP(n,r),o!==pB.text&&(t.textContent=o,pB.text=o)),bB(t,"font-family",qP(n)),bB(t,"font-size",LP(n)+"px"),bB(t,"font-style",n.fontStyle),bB(t,"font-variant",n.fontVariant),bB(t,"font-weight",n.fontWeight)}};function gB(e,t,n){t!==pB[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(hB,e,t,n):bB(hB,e,t),pB[e]=t)}function yB(e,t,n){n!==pB[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),pB[t]=n)}function vB(e,t){for(const n in t)bB(e,n,t[n])}function bB(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function xB(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function wB(e){pL.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}IS(wB,pL,{svg:function(){return this._text},_render:function(e){const t=eB();t.open("svg",OS({},mP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",iB,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){const n=QP[t.marktype],r=n.tag,i=[XL,n.attr];e.open("g",{class:cL(t),"clip-path":t.clip?tR(this,t,t.group):null},QL(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=IP(o);if(JE(t)){const n={x:0,dy:BP(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(UP(o,t[r])).close()}else e.text(UP(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),GR(o,(t=>this.mark(e,t))),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):GR(t,o),e.close()},href:function(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr:function(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&function(e,t,n,r,i){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=qP(t),e["font-size"]=LP(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in rB){let r=t[n];const o=rB[n];("transparent"!==r||"fill"!==o&&"stroke"!==o)&&null!=r&&(az(r)&&(r=sz(r,i.gradient,"")),e[o]=r)}}(i,t,e,r,this._defs),i},defs:function(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:oz+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const _B="canvas",kB="none",EB={Canvas:_B,PNG:"png",SVG:"svg",None:kB},SB={};function AB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(SB[e]=t,this):SB[e]}function CB(e,t,n){const r=[],i=(new nR).union(t),o=e.marktype;return o?DB(e,i,n,r):"group"===o?MB(e,i,n,r):IE("Intersect scene must be mark node or group item.")}function DB(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)MB(i[s],t,n,r);else for(const e=QP[o].isect;s<a;++s){const n=i[s];FB(n,t,e)&&r.push(n)}}return r}function MB(e,t,n,r){n&&n(e.mark)&&FB(e,t,QP.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)DB(i[e],t,n,r);t.translate(a,s)}return r}function FB(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}SB.canvas=SB.png={renderer:zL,headless:zL,handler:FL},SB.svg={renderer:sB,headless:wB,handler:PL},SB.none={};const NB=new nR;function OB(e){const t=e.clip;if(ES(t))t(AR(NB.clear()));else{if(!t)return;NB.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(NB)}function $B(e,t,n){return e===t||("path"===n?TB(e,t):e instanceof Date&&t instanceof Date?+e==+t:HS(e)&&HS(t)?Math.abs(e-t)<=1e-9:e&&t&&(KE(e)||KE(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!$B(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function TB(e,t){return $B(pz(e),pz(t))}function zB(){eR(),iz=0}t(CO,"textMetrics",(function(){return OP})),t(CO,"serializeXML",(function(){return tB})),t(CO,"sceneZOrder",(function(){return VR})),t(CO,"sceneVisit",(function(){return GR})),t(CO,"sceneToJSON",(function(){return tL})),t(CO,"scenePickVisit",(function(){return YR})),t(CO,"sceneFromJSON",(function(){return nL})),t(CO,"sceneEqual",(function(){return $B})),t(CO,"resetSVGDefIds",(function(){return zB})),t(CO,"resetSVGClipId",(function(){return eR})),t(CO,"renderModule",(function(){return AB})),t(CO,"point",(function(){return fL})),t(CO,"pathTrail",(function(){return Bz})),t(CO,"pathSymbols",(function(){return Mz})),t(CO,"pathRender",(function(){return Sz})),t(CO,"pathRectangle",(function(){return Lz})),t(CO,"pathParse",(function(){return pz})),t(CO,"pathEqual",(function(){return TB})),t(CO,"pathCurves",(function(){return fz})),t(CO,"multiLineOffset",(function(){return jP})),t(CO,"markup",(function(){return eB})),t(CO,"lineHeight",(function(){return BP})),t(CO,"intersectRule",(function(){return RR})),t(CO,"intersectPoint",(function(){return TR})),t(CO,"intersectPath",(function(){return $R})),t(CO,"intersectBoxLine",(function(){return PR})),t(CO,"intersect",(function(){return CB})),t(CO,"fontSize",(function(){return LP})),t(CO,"fontFamily",(function(){return qP})),t(CO,"font",(function(){return WP})),t(CO,"domFind",(function(){return sL})),t(CO,"domCreate",(function(){return aL})),t(CO,"domClear",(function(){return lL})),t(CO,"domChild",(function(){return uL})),t(CO,"boundStroke",(function(){return uR})),t(CO,"boundMark",(function(){return ZP})),t(CO,"boundItem",(function(){return JP})),t(CO,"boundContext",(function(){return AR})),t(CO,"boundClip",(function(){return OB})),t(CO,"Scenegraph",(function(){return iL})),t(CO,"SVGStringRenderer",(function(){return wB})),t(CO,"SVGRenderer",(function(){return sB})),t(CO,"SVGHandler",(function(){return PL})),t(CO,"ResourceLoader",(function(){return oR})),t(CO,"Renderer",(function(){return pL})),t(CO,"RenderType",(function(){return EB})),t(CO,"Marks",(function(){return QP})),t(CO,"Item",(function(){return rR})),t(CO,"Handler",(function(){return dL})),t(CO,"GroupItem",(function(){return iR})),t(CO,"Gradient",(function(){return lz})),t(CO,"CanvasRenderer",(function(){return zL})),t(CO,"CanvasHandler",(function(){return FL})),t(CO,"Bounds",(function(){return nR}));const RB="top",PB="left",LB="right",BB="bottom",IB="start",jB="middle",UB="end",qB="group",WB="axis",HB="title",VB="frame",GB="scope",YB="legend",XB="row-header",QB="row-footer",JB="row-title",KB="column-header",ZB="column-footer",eI="column-title",tI="padding",nI="fit",rI="fit-x",iI="fit-y",oI="none",aI="all",sI="each",uI="flush",lI="column",cI="row";function fI(e){eF.call(this,null,e)}function dI(e,t,n){return t(e.bounds.clear(),e,n)}IS(fI,eF,{transform:function(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=QP[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=dI(r,a),r.items.forEach((e=>{e.bounds.clear().union(u)}));else if(i===qB||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),u.clear(),r.items.forEach((e=>u.union(dI(e,a)))),r.role){case WB:case YB:case HB:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{u.union(dI(e,a))})),t.visit(t.MOD,(e=>{s=s||u.alignsWith(e.bounds),n.dirty(e),u.union(dI(e,a))})),s&&(u.clear(),r.items.forEach((e=>u.union(e.bounds))));return OB(r),t.modifies("bounds")}});function hI(e){eF.call(this,0,e)}function pI(e){eF.call(this,null,e)}function mI(e){eF.call(this,null,e)}hI.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},IS(hI,eF,{transform:function(e,t){const n=(i=t.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++o)),n.set(this.value=o),t}}),IS(pI,eF,{transform:function(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===qB?iR:rR;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const gI={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&yI(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},yI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),vI=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(yI(o,n=e[r].bounds,t))return!0},bI=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},xI=e=>(e.forEach((e=>e.opacity=1)),e),wI=(e,t)=>e.reflow(t.modified()).modifies("opacity");function _I(e){eF.call(this,null,e)}IS(mI,eF,{transform:function(e,t){const n=gI[e.method]||gI.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(xI(a),t=wI(t,e)),t;if(a=a.filter(bI),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=xI(a),t=wI(t,e),i.length>=3&&vI(i,r)){do{i=n(i,r)}while(i.length>=3&&vI(i,r));i.length<3&&!rS(a).opacity&&(i.length>1&&(rS(i).opacity=0),rS(a).opacity=1)}var s,u,l,c,f;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,u=e.boundOrient,l=+e.boundTolerance,c=s.range(),f=new nR,u===RB||u===BB?f.set(c[0],-1/0,c[1],1/0):f.set(-1/0,c[0],1/0,c[1]),f.expand(l||1),o=e=>f.encloses(e.bounds),a.forEach((e=>{o(e)||(e.opacity=0)})));const d=i[0].mark.bounds.clear();return a.forEach((e=>{e.opacity&&d.union(e.bounds)})),t}}),IS(_I,eF,{transform:function(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const kI=new nR;function EI(e,t,n){return e[t]===n?0:(e[t]=n,1)}function SI(e){var t=e.items[0].orient;return t===PB||t===LB}function AI(e,t,n,r){var i,o,a=t.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,l=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&jP(g),x=0,w=0;switch(kI.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),l){case RB:x=h||0,w=-d,o=Math.max(p,Math.min(m,-v.y1)),v.add(0,-o).add(f,0),g&&CI(e,g,o,y,b,0,-1,v);break;case PB:x=-d,w=h||0,o=Math.max(p,Math.min(m,-v.x1)),v.add(-o,0).add(0,f),g&&CI(e,g,o,y,b,1,-1,v);break;case LB:x=n+d,w=h||0,o=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(o,f),g&&CI(e,g,o,y,b,1,1,v);break;case BB:x=h||0,w=r+d,o=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(f,o),g&&CI(e,g,o,y,0,0,1,v);break;default:x=a.x,w=a.y}return uR(v.translate(x,w),a),EI(a,"x",x+u)|EI(a,"y",w+u)&&(a.bounds=kI,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function CI(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let l=0,c=0;e.dirty(t),o?l=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-l,-c)),e.dirty(t)}s.union(u)}const DI=(e,t)=>Math.floor(Math.min(e,t)),MI=(e,t)=>Math.ceil(Math.max(e,t));function FI(e){return(new nR).set(0,0,e.width||0,e.height||0)}function NI(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function OI(e,t,n){const r=KE(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function $I(e){return e<0?Math.ceil(-e):0}function TI(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=!n.nodirty,m=n.bounds===uI?FI:NI,g=kI.set(0,0,0,0),y=OI(n.align,lI),v=OI(n.align,cI),b=OI(n.padding,lI),x=OI(n.padding,cI),w=n.columns||t.length,_=w<=0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),A=0,C=Array(k),D=Array(_),M=0,F=Array(k),N=Array(k),O=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<_;++i)D[i]=0;for(i=0;i<k;++i)u=t[i],s=O[i]=m(u),u.x=u.x||0,F[i]=0,u.y=u.y||0,N[i]=0,o=i%w,a=~~(i/w),A=Math.max(A,l=Math.ceil(s.x2)),M=Math.max(M,c=Math.ceil(s.y2)),S[o]=Math.max(S[o],l),D[a]=Math.max(D[a],c),E[i]=b+$I(s.x1),C[i]=x+$I(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%w==0&&(E[i]=0),i<w&&(C[i]=0);if(y===sI)for(o=1;o<w;++o){for(h=0,i=o;i<k;i+=w)h<E[i]&&(h=E[i]);for(i=o;i<k;i+=w)E[i]=h+S[o-1]}else if(y===aI){for(h=0,i=0;i<k;++i)i%w&&h<E[i]&&(h=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=h+A)}else for(y=!1,o=1;o<w;++o)for(i=o;i<k;i+=w)E[i]+=S[o-1];if(v===sI)for(a=1;a<_;++a){for(h=0,r=(i=a*w)+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=a*w;i<r;++i)C[i]=h+D[a-1]}else if(v===aI){for(h=0,i=w;i<k;++i)h<C[i]&&(h=C[i]);for(i=w;i<k;++i)C[i]=h+M}else for(v=!1,a=1;a<_;++a)for(r=(i=a*w)+w;i<r;++i)C[i]+=D[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),F[i]+=f-t[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<k;i+=w)d+=C[i],N[i]+=d-t[i].y;if(y&&OI(n.center,lI)&&_>1)for(i=0;i<k;++i)(f=(s=y===aI?A:S[i%w])-O[i].x2-t[i].x-F[i])>0&&(F[i]+=f/2);if(v&&OI(n.center,cI)&&1!==w)for(i=0;i<k;++i)(d=(s=v===aI?M:D[~~(i/w)])-O[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)g.union(O[i].translate(F[i],N[i]));switch(f=OI(n.anchor,"x"),d=OI(n.anchor,"y"),OI(n.anchor,lI)){case UB:f-=g.width();break;case jB:f-=g.width()/2}switch(OI(n.anchor,cI)){case UB:d-=g.height();break;case jB:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=F[i]+=f,u.y+=N[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(F[i],N[i]))),p&&e.dirty(u);return g}function zI(e,t,n){var r,i,o,a,s,u,l,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===qB)switch(t.role){case WB:case YB:case HB:break;case XB:a.rowheaders.push(...n);break;case QB:a.rowfooters.push(...n);break;case KB:a.colheaders.push(...n);break;case ZB:a.colfooters.push(...n);break;case JB:a.rowtitle=n[0];break;case eI:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===uI?RI:PI,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const y=TI(e,f,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(u=OI(n.headerBand,cI,null),r=LI(e,c.rowheaders,f,p,m,-OI(h,"rowHeader"),DI,0,d,"x1",0,p,1,u)),c.colheaders&&(u=OI(n.headerBand,lI,null),i=LI(e,c.colheaders,f,p,p,-OI(h,"columnHeader"),DI,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=OI(n.footerBand,cI,null),o=LI(e,c.rowfooters,f,p,m,OI(h,"rowFooter"),MI,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=OI(n.footerBand,lI,null),a=LI(e,c.colfooters,f,p,p,OI(h,"columnFooter"),MI,1,d,"y2",g-p,1,p,u)),c.rowtitle&&(s=OI(n.titleAnchor,cI),l=OI(h,"rowTitle"),l=s===UB?o+l:r-l,u=OI(n.titleBand,cI,.5),BI(e,c.rowtitle,l,0,y,u)),c.coltitle&&(s=OI(n.titleAnchor,lI),l=OI(h,"columnTitle"),l=s===UB?a+l:i-l,u=OI(n.titleBand,lI,.5),BI(e,c.coltitle,l,1,y,u))}function RI(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function PI(e,t){return e.bounds[t]}function LI(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,m,g,y,v,b,x,w,_,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=a(E,u(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=c,m=0,y=t.length;m<y;++m,p+=f){for(v=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=E):(w=E,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),v.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),S=a(S,v[l])}return S}function BI(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function II(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),u=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",IB),c=l===UB?1:l===jB?.5:0,f={align:sI,bounds:s("bounds",uI),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case PB:f.anchor={x:Math.floor(r.x1)-u,column:UB,y:c*(a||r.height()+2*r.y1),row:l};break;case LB:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case RB:f.anchor={y:Math.floor(i.y1)-u,row:UB,x:c*(o||i.width()+2*i.x1),column:l};break;case BB:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:UB};break;case"bottom-left":f.anchor={x:u,y:a-u,row:UB};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:UB,row:UB}}return f}function jI(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case PB:i+=Math.ceil(a.bounds.width())+u;break;case LB:case BB:break;default:o+=a.bounds.height()+u}switch((i||o)&&qI(e,n,i,o),a.orient){case PB:c+=UI(t,n,a,s,1,1);break;case LB:l+=UI(t,n,a,UB,0,0)+u,c+=UI(t,n,a,s,1,1);break;case BB:l+=UI(t,n,a,s,0,0),c+=UI(t,n,a,UB,-1,0,1)+u;break;default:l+=UI(t,n,a,s,0,0)}(l||c)&&qI(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(qI(e,n,-l,0),qI(e,a,-l,0))}else(i||o)&&qI(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),a!==oI&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,uR(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function UI(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!o&&u||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:jP(n);return Math.round(r===IB?c:r===UB?f-d:.5*(l-d))}function qI(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function WI(e){eF.call(this,null,e)}IS(WI,eF,{transform:function(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&zI(n,t,e.layout),function(e,t,n){var r,i,o,a,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new nR).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case WB:(SI(i)?d:h).union(AI(e,i,l,c));break;case HB:r=i;break;case YB:p.push(jI(e,i));break;case VB:case GB:case XB:case QB:case JB:case KB:case ZB:case eI:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(o=e.orient||LB)!==oI&&(t[o]||(t[o]=[])).push(e)}));for(const r in t){const i=t[r];TI(e,i,II(i,r,n.legends,d,h,l,c))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===nI)switch(t.orient){case PB:case LB:f.add(r.x1,0).add(r.x2,0);break;case RB:case BB:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,u=a.orient,l=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===PB||u===LB?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==qB?u===PB?(m=i.y2,p=i.y1):u===LB?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===PB&&(m=r,p=0),o=l===IB?m:l===UB?p:(m+p)/2,h&&h.text){switch(u){case RB:case BB:b=d.bounds.height()+f;break;case PB:v=d.bounds.width()+f;break;case LB:v=-d.bounds.width()-f}kI.clear().union(h.bounds),kI.translate(v-(h.x||0),b-(h.y||0)),EI(h,"x",v)|EI(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(kI),h.mark.bounds.clear().union(kI),e.dirty(h)),kI.clear().union(h.bounds)}else kI.clear();switch(kI.union(d.bounds),u){case RB:g=o,y=i.y1-kI.height()-c;break;case PB:g=i.x1-kI.width()-c,y=o;break;case LB:g=i.x2+kI.width()+c,y=o;break;case BB:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return EI(a,"x",g)|EI(a,"y",y)&&(kI.translate(g,y),e.dirty(a),a.bounds.clear().union(kI),t.bounds.clear().union(kI),e.dirty(a)),a.bounds}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===tI){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===oI?(l=0,f=0,u=a,c=s):o===nI?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===rI?(u=Math.max(0,a-l-d),s=c+f+h):o===iI?(a=u+l+d,c=Math.max(0,s-f-h)):"pad"===o&&(a=u+l+d,s=c+f+h);e._resizeView(a,s,u,c,[l,f],i.resize)}(e,t,f,n)}(n,t,e)})),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}}),t(AO,"viewlayout",(function(){return WI})),t(AO,"render",(function(){return _I})),t(AO,"overlap",(function(){return mI})),t(AO,"mark",(function(){return pI})),t(AO,"identifier",(function(){return hI})),t(AO,"bound",(function(){return fI}));var HI={};function VI(e){eF.call(this,null,e)}function GI(e){eF.call(this,null,e)}function YI(){return kM({})}function XI(e){eF.call(this,null,e)}function QI(e){eF.call(this,[],e)}IS(VI,eF,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=UT(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||HT(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?qT(o,e.values,a):WT(o,a);return i&&(r.rem=i),i=u.map(((e,t)=>kM({index:t/(u.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(kM({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),IS(GI,eF,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||YI,o=e.key||wM,a=this.value;return JE(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&IE("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=LS().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,(e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),IS(XI,eF,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(JE(o)){if(!n.changed()&&!o.every((e=>i[e])))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||YE,u=i.enter||YE,l=i.exit||YE,c=(o&&!a?i[o]:s)||YE;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==YE&&c!==s&&(t.visit(t.ADD,(t=>{c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==YE&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),a||c!==YE){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,(t=>{const i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(i,(t=>{(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),IS(QI,eF,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),u=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||LT,f=e.scale,d=+e.limit,h=UT(f,null==e.count?5:e.count,e.minstep),p=!!e.values||c===LT,m=e.format||QT(s,f,h,c,e.formatSpecifier,e.formatType,p),g=e.values||XT(f,h);return l&&(u.rem=l),c===LT?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=g.slice(0,d-1),a=!0):l=g,ES(i=e.size)?(e.values||0!==f(l[0])||(l=l.slice(1)),o=l.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=FS(o=i||8),l=l.map(((t,n)=>kM({index:n,label:m(t,n,l),value:t,offset:o,size:i(t,e)}))),a&&(a=g[l.length],l.push(kM({index:l.length,label:"".concat(g.length-l.length," entries"),value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=f.domain(),r=OT(f,n[0],rS(n)),g.length<3&&!e.values&&n[0]!==rS(n)&&(g=[n[0],rS(n)]),l=g.map(((e,t)=>kM({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+rS(t),o=i-r;if(e.type===nT){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(f),l=g.map(((e,t)=>kM({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),u.source=l,u.add=l,this.value=l,u}});const JI=e=>e.source.x,KI=e=>e.source.y,ZI=e=>e.target.x,ej=e=>e.target.y;function tj(e){eF.call(this,{},e)}tj.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},IS(tj,eF,{transform:function(e,t){var n=e.sourceX||JI,r=e.sourceY||KI,i=e.targetX||ZI,o=e.targetY||ej,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=oj.get(u+"-"+s)||oj.get(u);return l||IE("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[a]=l(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)}});const nj=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,rj=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},ij=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},oj=LS({line:nj,"line-radial":(e,t,n,r)=>nj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:rj,"arc-radial":(e,t,n,r)=>rj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:ij,"curve-radial":(e,t,n,r)=>ij(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function aj(e){eF.call(this,null,e)}aj.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},IS(aj,eF,{transform:function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],u=e.field||VE,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,m=(c-l)/Bd(d),g=Ld(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[a]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(o)}});function sj(e){return _T(e)&&e!==K$}const uj=aA(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lj(e){eF.call(this,null,e),this.modified(!0)}function cj(e,t,n){ST(e)&&(Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&n.warn("Log scale domain includes zero: "+tA(t)));return t}function fj(e,t,n){return ES(e)&&(t||n)?MT(e,dj(t||[0,1],n)):e}function dj(e,t){return t?e.slice().reverse():e}function hj(e){eF.call(this,null,e)}IS(lj,eF,{transform:function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===K$)return"sequential-linear";(function(e){const t=e.type;return _T(t)&&t!==Q$&&t!==J$&&(e.scheme||e.range&&e.range.length&&e.range.every(GS))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||H$).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=bT(i)()),e)if(!uj[i]){if("padding"===i&&sj(r.type))continue;ES(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==oT&&e!==iT&&IE("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===iT?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*W$(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;JE(t.scheme)?r=FT(t.scheme,t.interpolate,t.interpolateGamma):(r=PT(t.scheme.toLowerCase()))||IE("Unrecognized scheme name: ".concat(t.scheme));return n=e===nT?n+1:e===aT?n-1:e===eT||e===tT?+t.schemeCount||5:n,AT(e)?fj(r,i,t.reverse):ES(r)?NT(fj(r,i),n):e===rT?r:r.slice(0,n)}(r,t,n),ES(o))){if(e.interpolator)return e.interpolator(o);IE("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&AT(r))return e.interpolator(FT(dj(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate($T(t.interpolate,t.interpolateGamma)):ES(e.round)?e.round(i):ES(e.rangeRound)&&e.interpolate(i?xp:yp);o&&e.range(dj(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!JE(r)){const t=e.domain(),n=t[0],i=rS(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||IE("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=Ld(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===aT&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(cj(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===H$||t===G$||t===Y$)}(e);if(!a)return 0;sj(s)&&t.padding&&a[0]!==rS(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(rS(n)-n[0]),s=a/(a-2*r),u=e===V$?yS(t,null,s):e===Y$?vS(t,null,s,.5):e===G$?vS(t,null,s,i||1):e===X$?bS(t,null,s,o||1):gS(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));if((u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}e.domain(cj(s,a,n)),s===rT&&e.unknown(t.domainImplicit?Mm:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&UT(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),IS(hj,eF,{transform:function(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(CM(e.sort)),this.modified(n),t}});const pj="zero",mj="center",gj="normalize",yj=["y0","y1"];function vj(e){eF.call(this,null,e)}function bj(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function xj(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(o=e[l])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function wj(e,t,n,r,i){for(var o,a,s=0,u=0,l=e.length,c=0;c<l;++c)(o=+n(a=e[c]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}vj.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:pj,values:[pj,mj,gj]},{name:"as",type:"string",array:!0,length:2,default:yj}]},IS(vj,eF,{transform:function(e,t){var n,r,i,o,a=e.as||yj,s=a[0],u=a[1],l=CM(e.sort),c=e.field||VE,f=e.offset===mj?bj:e.offset===gj?xj:wj;for(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(o=0,f=0,a=(c=h[l]).length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,u);return t.reflow(e.modified()).modifies(a)}}),t(HI,"stack",(function(){return vj})),t(HI,"sortitems",(function(){return hj})),t(HI,"scale",(function(){return lj})),t(HI,"pie",(function(){return aj})),t(HI,"linkpath",(function(){return tj})),t(HI,"legendentries",(function(){return QI})),t(HI,"encode",(function(){return XI})),t(HI,"datajoin",(function(){return GI})),t(HI,"axisticks",(function(){return VI}));var _j={},kj=1e-6,Ej=1e-12,Sj=Math.PI,Aj=Sj/2,Cj=Sj/4,Dj=2*Sj,Mj=180/Sj,Fj=Sj/180,Nj=Math.abs,Oj=Math.atan,$j=Math.atan2,Tj=Math.cos,zj=Math.ceil,Rj=Math.exp,Pj=(Math.floor,Math.hypot),Lj=Math.log,Bj=Math.pow,Ij=Math.sin,jj=Math.sign||function(e){return e>0?1:e<0?-1:0},Uj=Math.sqrt,qj=Math.tan;function Wj(e){return e>1?0:e<-1?Sj:Math.acos(e)}function Hj(e){return e>1?Aj:e<-1?-Aj:Math.asin(e)}function Vj(){}function Gj(e,t){e&&Xj.hasOwnProperty(e.type)&&Xj[e.type](e,t)}var Yj={Feature:function(e,t){Gj(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Gj(n[r].geometry,t)}},Xj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Qj(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Qj(n[r],t,0)},Polygon:function(e,t){Jj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Jj(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Gj(n[r],t)}};function Qj(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Jj(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Qj(e[n],t,1);t.polygonEnd()}var Kj,Zj,eU,tU,nU,rU=function(e,t){e&&Yj.hasOwnProperty(e.type)?Yj[e.type](e,t):Gj(e,t)},iU=new _d,oU=new _d,aU={point:Vj,lineStart:Vj,lineEnd:Vj,polygonStart:function(){iU=new _d,aU.lineStart=sU,aU.lineEnd=uU},polygonEnd:function(){var e=+iU;oU.add(e<0?Dj+e:e),this.lineStart=this.lineEnd=this.point=Vj},sphere:function(){oU.add(Dj)}};function sU(){aU.point=lU}function uU(){cU(Kj,Zj)}function lU(e,t){aU.point=cU,Kj=e,Zj=t,eU=e*=Fj,tU=Tj(t=(t*=Fj)/2+Cj),nU=Ij(t)}function cU(e,t){var n=(e*=Fj)-eU,r=n>=0?1:-1,i=r*n,o=Tj(t=(t*=Fj)/2+Cj),a=Ij(t),s=nU*a,u=tU*o+s*Tj(i),l=s*r*Ij(i);iU.add($j(l,u)),eU=e,tU=o,nU=a}var fU,dU,hU,pU,mU,gU,yU,vU,bU,xU,wU;function _U(e){return[$j(e[1],e[0]),Hj(e[2])]}function kU(e){var t=e[0],n=e[1],r=Tj(n);return[r*Tj(t),r*Ij(t),Ij(n)]}function EU(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function SU(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function AU(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function CU(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function DU(e){var t=Uj(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var MU={point:FU,lineStart:OU,lineEnd:$U,polygonStart:function(){MU.point=TU,MU.lineStart=zU,MU.lineEnd=RU,bU=new _d,aU.polygonStart()},polygonEnd:function(){aU.polygonEnd(),MU.point=FU,MU.lineStart=OU,MU.lineEnd=$U,iU<0?(fU=-(hU=180),dU=-(pU=90)):bU>kj?pU=90:bU<-1e-6&&(dU=-90),wU[0]=fU,wU[1]=hU},sphere:function(){fU=-(hU=180),dU=-(pU=90)}};function FU(e,t){xU.push(wU=[fU=e,hU=e]),t<dU&&(dU=t),t>pU&&(pU=t)}function NU(e,t){var n=kU([e*Fj,t*Fj]);if(vU){var r=SU(vU,n),i=SU([r[1],-r[0],0],r);DU(i),i=_U(i);var o,a=e-mU,s=a>0?1:-1,u=i[0]*Mj*s,l=Nj(a)>180;l^(s*mU<u&&u<s*e)?(o=i[1]*Mj)>pU&&(pU=o):l^(s*mU<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*Mj)<dU&&(dU=o):(t<dU&&(dU=t),t>pU&&(pU=t)),l?e<mU?PU(fU,e)>PU(fU,hU)&&(hU=e):PU(e,hU)>PU(fU,hU)&&(fU=e):hU>=fU?(e<fU&&(fU=e),e>hU&&(hU=e)):e>mU?PU(fU,e)>PU(fU,hU)&&(hU=e):PU(e,hU)>PU(fU,hU)&&(fU=e)}else xU.push(wU=[fU=e,hU=e]);t<dU&&(dU=t),t>pU&&(pU=t),vU=n,mU=e}function OU(){MU.point=NU}function $U(){wU[0]=fU,wU[1]=hU,MU.point=FU,vU=null}function TU(e,t){if(vU){var n=e-mU;bU.add(Nj(n)>180?n+(n>0?360:-360):n)}else gU=e,yU=t;aU.point(e,t),NU(e,t)}function zU(){aU.lineStart()}function RU(){TU(gU,yU),aU.lineEnd(),Nj(bU)>kj&&(fU=-(hU=180)),wU[0]=fU,wU[1]=hU,vU=null}function PU(e,t){return(t-=e)<0?t+360:t}function LU(e,t){return e[0]-t[0]}function BU(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var IU,jU,UU,qU,WU,HU,VU,GU,YU,XU,QU,JU,KU,ZU,eq,tq,nq={sphere:Vj,point:rq,lineStart:oq,lineEnd:uq,polygonStart:function(){nq.lineStart=lq,nq.lineEnd=cq},polygonEnd:function(){nq.lineStart=oq,nq.lineEnd=uq}};function rq(e,t){e*=Fj;var n=Tj(t*=Fj);iq(n*Tj(e),n*Ij(e),Ij(t))}function iq(e,t,n){++IU,UU+=(e-UU)/IU,qU+=(t-qU)/IU,WU+=(n-WU)/IU}function oq(){nq.point=aq}function aq(e,t){e*=Fj;var n=Tj(t*=Fj);ZU=n*Tj(e),eq=n*Ij(e),tq=Ij(t),nq.point=sq,iq(ZU,eq,tq)}function sq(e,t){e*=Fj;var n=Tj(t*=Fj),r=n*Tj(e),i=n*Ij(e),o=Ij(t),a=$j(Uj((a=eq*o-tq*i)*a+(a=tq*r-ZU*o)*a+(a=ZU*i-eq*r)*a),ZU*r+eq*i+tq*o);jU+=a,HU+=a*(ZU+(ZU=r)),VU+=a*(eq+(eq=i)),GU+=a*(tq+(tq=o)),iq(ZU,eq,tq)}function uq(){nq.point=rq}function lq(){nq.point=fq}function cq(){dq(JU,KU),nq.point=rq}function fq(e,t){JU=e,KU=t,e*=Fj,t*=Fj,nq.point=dq;var n=Tj(t);ZU=n*Tj(e),eq=n*Ij(e),tq=Ij(t),iq(ZU,eq,tq)}function dq(e,t){e*=Fj;var n=Tj(t*=Fj),r=n*Tj(e),i=n*Ij(e),o=Ij(t),a=eq*o-tq*i,s=tq*r-ZU*o,u=ZU*i-eq*r,l=Pj(a,s,u),c=Hj(l),f=l&&-c/l;YU.add(f*a),XU.add(f*s),QU.add(f*u),jU+=c,HU+=c*(ZU+(ZU=r)),VU+=c*(eq+(eq=i)),GU+=c*(tq+(tq=o)),iq(ZU,eq,tq)}function hq(e,t,n){var r=Ld(e,t-kj,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function pq(e,t,n){var r=Ld(e,t-kj,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}var mq,gq,yq,vq,bq=e=>e,xq=new _d,wq=new _d,_q={point:Vj,lineStart:Vj,lineEnd:Vj,polygonStart:function(){_q.lineStart=kq,_q.lineEnd=Aq},polygonEnd:function(){_q.lineStart=_q.lineEnd=_q.point=Vj,xq.add(Nj(wq)),wq=new _d},result:function(){var e=xq/2;return xq=new _d,e}};function kq(){_q.point=Eq}function Eq(e,t){_q.point=Sq,mq=yq=e,gq=vq=t}function Sq(e,t){wq.add(vq*e-yq*t),yq=e,vq=t}function Aq(){Sq(mq,gq)}var Cq=1/0,Dq=Cq,Mq=-Cq,Fq=Mq,Nq={point:function(e,t){e<Cq&&(Cq=e);e>Mq&&(Mq=e);t<Dq&&(Dq=t);t>Fq&&(Fq=t)},lineStart:Vj,lineEnd:Vj,polygonStart:Vj,polygonEnd:Vj,result:function(){var e=[[Cq,Dq],[Mq,Fq]];return Mq=Fq=-(Dq=Cq=1/0),e}};var Oq,$q,Tq,zq,Rq=0,Pq=0,Lq=0,Bq=0,Iq=0,jq=0,Uq=0,qq=0,Wq=0,Hq={point:Vq,lineStart:Gq,lineEnd:Qq,polygonStart:function(){Hq.lineStart=Jq,Hq.lineEnd=Kq},polygonEnd:function(){Hq.point=Vq,Hq.lineStart=Gq,Hq.lineEnd=Qq},result:function(){var e=Wq?[Uq/Wq,qq/Wq]:jq?[Bq/jq,Iq/jq]:Lq?[Rq/Lq,Pq/Lq]:[NaN,NaN];return Rq=Pq=Lq=Bq=Iq=jq=Uq=qq=Wq=0,e}};function Vq(e,t){Rq+=e,Pq+=t,++Lq}function Gq(){Hq.point=Yq}function Yq(e,t){Hq.point=Xq,Vq(Tq=e,zq=t)}function Xq(e,t){var n=e-Tq,r=t-zq,i=Uj(n*n+r*r);Bq+=i*(Tq+e)/2,Iq+=i*(zq+t)/2,jq+=i,Vq(Tq=e,zq=t)}function Qq(){Hq.point=Vq}function Jq(){Hq.point=Zq}function Kq(){eW(Oq,$q)}function Zq(e,t){Hq.point=eW,Vq(Oq=Tq=e,$q=zq=t)}function eW(e,t){var n=e-Tq,r=t-zq,i=Uj(n*n+r*r);Bq+=i*(Tq+e)/2,Iq+=i*(zq+t)/2,jq+=i,Uq+=(i=zq*e-Tq*t)*(Tq+e),qq+=i*(zq+t),Wq+=3*i,Vq(Tq=e,zq=t)}function tW(e){this._context=e}tW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Dj)}},result:Vj};var nW,rW,iW,oW,aW,sW=new _d,uW={point:Vj,lineStart:function(){uW.point=lW},lineEnd:function(){nW&&cW(rW,iW),uW.point=Vj},polygonStart:function(){nW=!0},polygonEnd:function(){nW=null},result:function(){var e=+sW;return sW=new _d,e}};function lW(e,t){uW.point=cW,rW=oW=e,iW=aW=t}function cW(e,t){oW-=e,aW-=t,sW.add(Uj(oW*oW+aW*aW)),oW=e,aW=t}function fW(){this._string=[]}function dW(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}fW.prototype={_radius:4.5,_circle:dW(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=dW(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var hW=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),rU(e,n(r))),r.result()}return o.area=function(e){return rU(e,n(_q)),_q.result()},o.measure=function(e){return rU(e,n(uW)),uW.result()},o.bounds=function(e){return rU(e,n(Nq)),Nq.result()},o.centroid=function(e){return rU(e,n(Hq)),Hq.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,bq):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new fW):new tW(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},pW=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Vj,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},mW=function(e,t){return Nj(e[0]-t[0])<kj&&Nj(e[1]-t[1])<kj};function gW(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var yW=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(mW(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new gW(r,e,null,!0)),u.push(n.o=new gW(r,null,n,!1)),s.push(n=new gW(a,e,null,!1)),u.push(n.o=new gW(a,null,n,!0))}})),s.length){for(u.sort(t),vW(s),vW(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function vW(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function bW(e){return Nj(e[0])<=Sj?e[0]:jj(e[0])*((Nj(e[0])+Sj)%Dj-Sj)}var xW=function(e,t,n,r){return function(i){var o,a,s,u=t(i),l=pW(),c=t(l),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=Pd(a);var e=function(e,t){var n=bW(t),r=t[1],i=Ij(r),o=[Ij(n),-Tj(n),0],a=0,s=0,u=new _d;1===i?r=Aj+kj:-1===i&&(r=-Aj-kj);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=bW(h),m=h[1]/2+Cj,g=Ij(m),y=Tj(m),v=0;v<d;++v,p=x,g=_,y=k,h=b){var b=f[v],x=bW(b),w=b[1]/2+Cj,_=Ij(w),k=Tj(w),E=x-p,S=E>=0?1:-1,A=S*E,C=A>Sj,D=g*_;if(u.add($j(D*S*Ij(A),y*k+D*Tj(A))),a+=C?E+S*Dj:E,C^p>=n^x>=n){var M=SU(kU(h),kU(b));DU(M);var F=SU(o,M);DU(F);var N=(C^E>=0?-1:1)*Hj(F[2]);(r>N||r===N&&(M[0]||M[1]))&&(s+=C^E>=0?1:-1)}}return(a<-1e-6||a<kj&&u<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),yW(a,_W,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(wW))}return d}};function wW(e){return e.length>1}function _W(e,t){return((e=e.x)[0]<0?e[1]-Aj-kj:Aj-e[1])-((t=t.x)[0]<0?t[1]-Aj-kj:Aj-t[1])}var kW=xW((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Sj:-Sj,u=Nj(o-n);Nj(u-Sj)<kj?(e.point(n,r=(r+a)/2>0?Aj:-Aj),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Sj&&(Nj(n-i)<kj&&(n-=i*kj),Nj(o-s)<kj&&(o-=s*kj),r=function(e,t,n,r){var i,o,a=Ij(e-n);return Nj(a)>kj?Oj((Ij(t)*(o=Tj(r))*Ij(n)-Ij(r)*(i=Tj(t))*Ij(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Aj,r.point(-Sj,i),r.point(0,i),r.point(Sj,i),r.point(Sj,0),r.point(Sj,-i),r.point(0,-i),r.point(-Sj,-i),r.point(-Sj,0),r.point(-Sj,i);else if(Nj(e[0]-t[0])>kj){var o=e[0]<t[0]?Sj:-Sj;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-Sj,-Aj]);var EW=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function SW(e,t){return[Nj(e)>Sj?e+Math.round(-e/Dj)*Dj:e,t]}function AW(e,t,n){return(e%=Dj)?t||n?EW(DW(e),MW(t,n)):DW(e):t||n?MW(t,n):SW}function CW(e){return function(t,n){return[(t+=e)>Sj?t-Dj:t<-Sj?t+Dj:t,n]}}function DW(e){var t=CW(e);return t.invert=CW(-e),t}function MW(e,t){var n=Tj(e),r=Ij(e),i=Tj(t),o=Ij(t);function a(e,t){var a=Tj(t),s=Tj(e)*a,u=Ij(e)*a,l=Ij(t),c=l*n+s*r;return[$j(u*i-c*o,s*n-l*r),Hj(c*i+u*o)]}return a.invert=function(e,t){var a=Tj(t),s=Tj(e)*a,u=Ij(e)*a,l=Ij(t),c=l*i-u*o;return[$j(u*i+l*o,s*n+c*r),Hj(c*n-s*r)]},a}SW.invert=SW;function FW(e,t){(t=kU(t))[0]-=e,DU(t);var n=Wj(-t[1]);return((-t[2]<0?-n:n)+Dj-kj)%Dj}var NW=function(e){var t=Tj(e),n=6*Fj,r=t>0,i=Nj(t)>kj;function o(e,n){return Tj(e)*Tj(n)>t}function a(e,n,r){var i=[1,0,0],o=SU(kU(e),kU(n)),a=EU(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=SU(i,o),d=CU(i,l);AU(d,CU(o,c));var h=f,p=EU(d,h),m=EU(h,h),g=p*p-m*(EU(d,d)-1);if(!(g<0)){var y=Uj(g),v=CU(h,(-p-y)/m);if(AU(v,d),v=_U(v),!r)return v;var b,x=e[0],w=n[0],_=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=Nj(E-Sj)<kj;if(!S&&k<_&&(b=_,_=k,k=b),S||E<kj?S?_+k>0^v[1]<(Nj(v[0]-x)<kj?_:k):_<=v[1]&&v[1]<=k:E>Sj^(x<=v[0]&&v[0]<=w)){var A=CU(h,(-p+y)/m);return AU(A,d),[v,_U(A)]}}}function s(t,n){var i=r?e:Sj-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return xW(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?Sj:-Sj),d):0;if(!t&&(l=u=m)&&e.lineStart(),m!==u&&(!(h=a(t,p))||mW(t,h)||mW(p,h))&&(p[2]=1),m!==u)c=0,m?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var y;g&n||!(y=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&mW(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=Tj(t),s=Ij(t),u=r*n;null==i?(i=t+r*Dj,o=t-u/2):(i=FW(a,i),o=FW(a,o),(r>0?i<o:i>o)&&(i+=r*Dj));for(var l,c=i;r>0?c>o:c<o;c-=u)l=_U([a,-s*Tj(c),-s*Ij(c)]),e.point(l[0],l[1])}}(o,e,n,i,t,r)}),r?[0,-e]:[-Sj,e-Sj])},OW=1e9,$W=-1e9;function TW(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Nj(r[0]-e)<kj?i>0?0:3:Nj(r[0]-n)<kj?i>0?2:1:Nj(r[1]-t)<kj?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,m,g,y,v,b=a,x=pW(),w={point:_,lineStart:function(){w.point=k,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=Pd(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&yW(u,s,t,o,a),a.polygonEnd());b=a,u=l=c=null}};function _(e,t){i(e,t)&&b.point(e,t)}function k(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,d=a,h=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var u=[p=Math.max($W,Math.min(OW,p)),m=Math.max($W,Math.min(OW,m))],x=[o=Math.max($W,Math.min(OW,o)),a=Math.max($W,Math.min(OW,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),v=!1)}p=o,m=a,g=s}return w}}function zW(e){return function(t){var n=new RW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function RW(){}function PW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),rU(n,e.stream(Nq)),t(Nq.result()),null!=r&&e.clipExtent(r),e}function LW(e,t,n){return PW(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function BW(e,t,n){return LW(e,[[0,0],t],n)}function IW(e,t,n){return PW(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function jW(e,t,n){return PW(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}RW.prototype={constructor:RW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var UW=Tj(30*Fj),qW=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=a+d,w=s+h,_=u+p,k=Uj(x*x+w*w+_*_),E=Hj(_/=k),S=Nj(Nj(_)-1)<kj||Nj(o-f)<kj?(o+f)/2:$j(w,x),A=e(S,E),C=A[0],D=A[1],M=C-r,F=D-i,N=v*M-y*F;(N*N/b>t||Nj((y*M+v*F)/b-.5)>.3||a*d+s*h+u*p<UW)&&(n(r,i,o,a,s,u,C,D,S,x/=k,w/=k,_,m,g),g.point(C,D),n(C,D,S,x,w,_,l,c,f,d,h,p,m,g))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=kU([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],16,t),t.point(c,f)}function b(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=_}function w(e,t){v(r=e,t),i=c,o=f,a=d,s=h,u=p,m.point=v}function _(){n(c,f,l,d,h,p,i,o,r,a,s,u,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return zW({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var WW=zW({point:function(e,t){this.stream.point(e*Fj,t*Fj)}});function HW(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=Tj(o),s=Ij(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(e,o){return[u*(e*=r)-l*(o*=i)+t,n-l*e-u*o]}return p.invert=function(e,t){return[r*(c*e-f*t+d),i*(h-f*e-c*t)]},p}function VW(e){return GW((function(){return e}))()}function GW(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,m=0,g=0,y=0,v=0,b=0,x=1,w=1,_=null,k=kW,E=null,S=bq,A=.5;function C(e){return u(e[0]*Fj,e[1]*Fj)}function D(e){return(e=u.invert(e[0],e[1]))&&[e[0]*Mj,e[1]*Mj]}function M(){var e=HW(f,0,0,x,w,b).apply(null,t(p,m)),r=HW(f,d-e[0],h-e[1],x,w,b);return n=AW(g,y,v),s=EW(t,r),u=EW(n,s),a=qW(s,A),F()}function F(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=WW(function(e){return zW({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(c=e)))))},C.preclip=function(e){return arguments.length?(k=e,_=void 0,F()):k},C.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,F()):S},C.clipAngle=function(e){return arguments.length?(k=+e?NW(_=e*Fj):(_=null,kW),F()):_*Mj},C.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,bq):TW(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),F()):null==E?null:[[E,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,M()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],M()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*Fj,m=e[1]%360*Fj,M()):[p*Mj,m*Mj]},C.rotate=function(e){return arguments.length?(g=e[0]%360*Fj,y=e[1]%360*Fj,v=e.length>2?e[2]%360*Fj:0,M()):[g*Mj,y*Mj,v*Mj]},C.angle=function(e){return arguments.length?(b=e%360*Fj,M()):b*Mj},C.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},C.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},C.precision=function(e){return arguments.length?(a=qW(s,A=e*e),F()):Uj(A)},C.fitExtent=function(e,t){return LW(C,e,t)},C.fitSize=function(e,t){return BW(C,e,t)},C.fitWidth=function(e,t){return IW(C,e,t)},C.fitHeight=function(e,t){return jW(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&D,M()}}function YW(e){var t=0,n=Sj/3,r=GW(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Fj,n=e[1]*Fj):[t*Mj,n*Mj]},i}function XW(e,t){var n=Ij(e),r=(n+Ij(t))/2;if(Nj(r)<kj)return function(e){var t=Tj(e);function n(e,n){return[e*t,Ij(n)/t]}return n.invert=function(e,n){return[e/t,Hj(n*t)]},n}(e);var i=1+n*(2*r-n),o=Uj(i)/r;function a(e,t){var n=Uj(i-2*r*Ij(t))/r;return[n*Ij(e*=r),o-n*Tj(e)]}return a.invert=function(e,t){var n=o-t,a=$j(e,Nj(n))*jj(n);return n*r<0&&(a-=Sj*jj(e)*jj(n)),[a/r,Hj((i-(e*e+n*n)*r*r)/(2*r))]},a}var QW=function(){return YW(XW).scale(155.424).center([0,33.6442])},JW=function(){return QW().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function KW(e){return function(t,n){var r=Tj(t),i=Tj(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Ij(t),o*Ij(n)]}}function ZW(e){return function(t,n){var r=Uj(t*t+n*n),i=e(r),o=Ij(i),a=Tj(i);return[$j(t*o,r*a),Hj(r&&n*o/r)]}}var eH=KW((function(e){return Uj(2/(1+e))}));eH.invert=ZW((function(e){return 2*Hj(e/2)}));var tH=KW((function(e){return(e=Wj(e))&&e/Ij(e)}));tH.invert=ZW((function(e){return e}));function nH(e,t){return[e,Lj(qj((Aj+t)/2))]}nH.invert=function(e,t){return[e,2*Oj(Rj(t))-Aj]};function rH(e){var t,n,r,i=VW(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Sj*a(),s=i(function(e){function t(t){return(t=e(t[0]*Fj,t[1]*Fj))[0]*=Mj,t[1]*=Mj,t}return e=AW(e[0]*Fj,e[1]*Fj,e.length>2?e[2]*Fj:0),t.invert=function(t){return(t=e.invert(t[0]*Fj,t[1]*Fj))[0]*=Mj,t[1]*=Mj,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===nH?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function iH(e){return qj((Aj+e)/2)}function oH(e,t){var n=Tj(e),r=e===t?Ij(e):Lj(n/Tj(t))/Lj(iH(t)/iH(e)),i=n*Bj(iH(e),r)/r;if(!r)return nH;function o(e,t){i>0?t<-Aj+kj&&(t=-Aj+kj):t>Aj-kj&&(t=Aj-kj);var n=i/Bj(iH(t),r);return[n*Ij(r*e),i-n*Tj(r*e)]}return o.invert=function(e,t){var n=i-t,o=jj(r)*Uj(e*e+n*n),a=$j(e,Nj(n))*jj(n);return n*r<0&&(a-=Sj*jj(e)*jj(n)),[a/r,2*Oj(Bj(i/o,1/r))-Aj]},o}function aH(e,t){return[e,t]}aH.invert=aH;function sH(e,t){var n=Tj(e),r=e===t?Ij(e):(n-Tj(t))/(t-e),i=n/r+e;if(Nj(r)<kj)return aH;function o(e,t){var n=i-t,o=r*e;return[n*Ij(o),i-n*Tj(o)]}return o.invert=function(e,t){var n=i-t,o=$j(e,Nj(n))*jj(n);return n*r<0&&(o-=Sj*jj(e)*jj(n)),[o/r,i-jj(r)*Uj(e*e+n*n)]},o}var uH=1.340264,lH=-.081106,cH=893e-6,fH=.003796,dH=Uj(3)/2;function hH(e,t){var n=Hj(dH*Ij(t)),r=n*n,i=r*r*r;return[e*Tj(n)/(dH*(uH+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(uH+lH*r+i*(cH+fH*r))]}hH.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(uH+lH*i+o*(cH+fH*i))-t)/(uH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i)))*r)*i*i,!(Nj(n)<Ej));++a);return[dH*e*(uH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))/Tj(r),Hj(Ij(r)/dH)]};function pH(e,t){var n=Tj(t),r=Tj(e)*n;return[n*Ij(e)/r,Ij(t)/r]}pH.invert=ZW(Oj);function mH(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}mH.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Nj(n)>kj&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function gH(e,t){return[Tj(t)*Ij(e),Ij(t)]}gH.invert=ZW(Hj);function yH(e,t){var n=Tj(t),r=1+Tj(e)*n;return[n*Ij(e)/r,Ij(t)/r]}yH.invert=ZW((function(e){return 2*Oj(e)}));function vH(e,t){return[Lj(qj((Aj+t)/2)),-e]}vH.invert=function(e,t){return[-t,2*Oj(Rj(e))-Aj]};var bH=Math.abs,xH=(Math.atan,Math.atan2,Math.ceil,Math.cos),wH=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),_H=(Math.tan,Math.PI),kH=_H/2,EH=(Math.SQRT1_2,AH(2));AH(_H);function SH(e){return e>1?kH:e<-1?-kH:Math.asin(e)}function AH(e){return e>0?Math.sqrt(e):0}function CH(e,t){var n,r=e*wH(t),i=30;do{t-=n=(t+wH(t)-r)/(1+xH(t))}while(bH(n)>1e-6&&--i>0);return t/2}var DH=function(e,t,n){function r(r,i){return[e*r*xH(i=CH(n,i)),t*wH(i)]}return r.invert=function(r,i){return i=SH(i/t),[r/(e*xH(i)),SH((2*i+wH(2*i))/n)]},r}(EH/kH,EH,_H);const MH=hW(),FH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function NH(e,t){return function n(){const r=t();return r.type=e,r.path=hW().projection(r),r.copy=r.copy||function(){const e=n();return FH.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function OH(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(TH[e]=NH(e,t),this):TH[e]||null}function $H(e){return e&&e.path||MH}const TH={albers:JW,albersusa:function(){var e,t,n,r,i,o,a=JW(),s=QW().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=QW().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+kj,c+.12*t+kj],[o-.214*t-kj,c+.234*t-kj]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+kj,c+.166*t+kj],[o-.115*t-kj,c+.234*t-kj]]).stream(l),f()},c.fitExtent=function(e,t){return LW(c,e,t)},c.fitSize=function(e,t){return BW(c,e,t)},c.fitWidth=function(e,t){return IW(c,e,t)},c.fitHeight=function(e,t){return jW(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return VW(eH).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return VW(tH).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return YW(oH).scale(109.5).parallels([30,30])},conicequalarea:QW,conicequidistant:function(){return YW(sH).scale(131.154).center([0,13.9389])},equalEarth:function(){return VW(hH).scale(177.158)},equirectangular:function(){return VW(aH).scale(152.63)},gnomonic:function(){return VW(pH).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,m=1,g=zW({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=bq;function v(){return p=s*c,m=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+u,i+l]}return b.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/p,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,h=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=r=i=null,bq):TW(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(u=+e[0],l=+e[1],v()):[u,l]},b.angle=function(n){return arguments.length?(t=Ij(d=n%360*Fj),e=Tj(d),v()):d*Mj},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,v()):f<0},b.fitExtent=function(e,t){return LW(b,e,t)},b.fitSize=function(e,t){return BW(b,e,t)},b.fitWidth=function(e,t){return IW(b,e,t)},b.fitHeight=function(e,t){return jW(b,e,t)},b},mercator:function(){return rH(nH).scale(961/Dj)},mollweide:function(){return VW(DH).scale(169.529)},naturalEarth1:function(){return VW(mH).scale(175.295)},orthographic:function(){return VW(gH).scale(249.5).clipAngle(90.000001)},stereographic:function(){return VW(yH).scale(250).clipAngle(142)},transversemercator:function(){var e=rH(vH),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in TH)OH(e,TH[e]);function zH(){}const RH=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function PH(){var e=1,t=1,n=a;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,RH[l<<1].forEach(p);for(;++a<e-1;)u=l,l=n[a+1]>=r,RH[u|l<<1].forEach(p);RH[l<<0].forEach(p);for(;++s<t-1;){for(a=-1,l=n[s*e+e]>=r,c=n[s*e]>=r,RH[l<<1|c<<2].forEach(p);++a<e-1;)u=l,l=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,RH[u|l<<1|c<<2|f<<3].forEach(p);RH[l|c<<3].forEach(p)}a=-1,c=n[s*e]>=r,RH[c<<2].forEach(p);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,RH[c<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],l=o(r),c=o(u);(t=h[l])?(n=d[c])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(u),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=c]=t):(t=d[c])?(n=h[l])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(u),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=l]=t):d[l]=h[c]={start:l,end:c,ring:[r,u]}}RH[c<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==LH((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(o=r[l*e+u-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&l===s&&(o=r[(l-1)*e+u],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||IE("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:zH,r):n===a},r}function LH(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=BH(e,t[r]))return n;return 0}function BH(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(IH(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function IH(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function jH(e,t,n){return function(r){var i=$S(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?Md(o,a,e):s/(e+1);return Ld(o+u,a,u)}}function UH(e){eF.call(this,null,e)}function qH(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(l)}function l(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function WH(e,t,n){const r=e>=0?e:lF(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function HH(e){return ES(e)?e:FS(+e)}function VH(){var e=e=>e[0],t=e=>e[1],n=VE,r=[-1,-1],i=960,o=500,a=2;function s(s,u){const l=WH(r[0],s,e)>>a,c=WH(r[1],s,t)>>a,f=l?l+2:0,d=c?c+2:0,h=2*f+(i>>a),p=2*d+(o>>a),m=new Float32Array(h*p),g=new Float32Array(h*p);let y=m;s.forEach((r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(m[i+o*h]+=+n(r))})),l>0&&c>0?(GH(h,p,m,g,l),YH(h,p,g,m,c),GH(h,p,m,g,l),YH(h,p,g,m,c),GH(h,p,m,g,l),YH(h,p,g,m,c)):l>0?(GH(h,p,m,g,l),GH(h,p,g,m,l),GH(h,p,m,g,l),y=g):c>0&&(YH(h,p,m,g,c),YH(h,p,g,m,c),YH(h,p,m,g,c),y=g);const v=u?Math.pow(2,-2*a):1/Bd(y);for(let e=0,t=h*p;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=HH(t),s):e},s.y=function(e){return arguments.length?(t=HH(e),s):t},s.weight=function(e){return arguments.length?(n=HH(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||IE("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||IE("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=_S(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&IE("invalid bandwidth"),r=e,s):r},s}function GH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function YH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function XH(e){eF.call(this,null,e)}UH.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},IS(UH,eF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||WE,o=PH().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=jH(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>Fd(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",u=[];return r.forEach((t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,JE(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;ES(i)&&(i=i(n,r));ES(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(HS(i)?i:i[0])||1,s=(HS(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(qH(t,a,s,u,l))}(r,n,t,e),r.forEach((e=>{u.push(SM(t,kM(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),XH.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const QH=["x","y","weight","size","cellSize","bandwidth"];function JH(e,t){return QH.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function KH(e){eF.call(this,null,e)}IS(XH,eF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,u=[],l=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(zE),a=JH(VH(),e),s=e.as||"grid";return n=i.map((t=>kM(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),KH.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},IS(KH,eF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=PH().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||jH(e.count||10,e.nice,!!a),u=e.size;return a||(a=t.materialize(t.SOURCE).source,r=qH(n=JH(VH(),e)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=JE(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(kM),i}});const ZH="Feature",eV="FeatureCollection";function tV(e){eF.call(this,null,e)}function nV(e){eF.call(this,null,e)}function rV(e){eF.call(this,null,e)}function iV(e){eF.call(this,null,e)}function oV(e){eF.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ld(zj(r/p)*p,n,p).map(c).concat(Ld(zj(s/m)*m,a,m).map(f)).concat(Ld(zj(t/d)*d,e,d).filter((function(e){return Nj(e%p)>kj})).map(u)).concat(Ld(zj(o/h)*h,i,h).filter((function(e){return Nj(e%m)>kj})).map(l))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=hq(o,i,90),l=pq(t,e,g),c=hq(s,a,90),f=pq(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function aV(e){eF.call(this,null,e)}function sV(e){if(!ES(e))return!1;const t=aA(RE(e));return t.$x||t.$y||t.$value||t.$max}function uV(e){eF.call(this,null,e),this.modified(!0)}function lV(e,t,n){ES(e[t])&&e[t](n)}tV.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},IS(tV,eF,{transform:function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],u=e.geojson||!o&&WE,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(RE(u))||a&&t.modified(RE(a))||s&&t.modified(RE(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(e=>r.push(u(e)))),a&&s&&(t.visit(l,(e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:ZH,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:eV,features:r}}}),nV.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},IS(nV,eF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||WE,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=$H(e.projection),n.materialize().reflow()):a=i===WE||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(e=>e[o]=r(i(e)))),r.pointRadius(s),n.modifies(o)}}),rV.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},IS(rV,eF,{transform:function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function l(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),iV.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},IS(iV,eF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}($H(e.projection),e.field||UE("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(e=>e[i]=r)),n.modifies(i)}}),oV.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},IS(oV,eF,{transform:function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)ES(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(AM(r[0],n)):t.add.push(kM(n)),r[0]=n,t}}),aV.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},IS(aV,eF,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||WE,o=function(e,t){let n;ES(e)?(n=n=>e(n,t),n.dep=sV(e)):e?n=FS(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;ES(e)?(n=n=>lh(e(n,t)),n.dep=sV(e)):n=FS(lh(e||"#888"));return n}(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Fd(n.map((e=>Fd(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=OS({},e,u);r||(n.$max=Fd(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?e=>c[e]:HE,d=U$(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),m=p.data;for(let e=s,o=0;e<l;++e){t.$y=e-s;for(let s=a,l=e*i;s<u;++s,o+=4){t.$x=s-a,t.$value=f(s+l);const e=n(t);m[o+0]=e.r,m[o+1]=e.g,m[o+2]=e.b,m[o+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,a.dep?a:FS(a(n)),o.dep?o:FS(o(n)))})),t.reflow(!0).modifies(s)}}),IS(uV,eF,{transform:function(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=OH((e||"mercator").toLowerCase());t||IE("Unrecognized projection type: "+e);return t()}(e.type),FH.forEach((t=>{null!=e[t]&&lV(n,t,e[t])}))):FH.forEach((t=>{e.modified(t)&&lV(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return 1===(e=_S(e)).length?e[0]:{type:eV,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===eV?e.features:_S(e).filter((e=>null!=e)).map((e=>e.type===ZH?e:{type:ZH,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),t(_j,"projection",(function(){return uV})),t(_j,"kde2d",(function(){return XH})),t(_j,"isocontour",(function(){return UH})),t(_j,"heatmap",(function(){return aV})),t(_j,"graticule",(function(){return oV})),t(_j,"geoshape",(function(){return iV})),t(_j,"geopoint",(function(){return rV})),t(_j,"geopath",(function(){return nV})),t(_j,"geojson",(function(){return tV})),t(_j,"contour",(function(){return KH}));var cV={};function fV(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}var dV=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function hV(e){return e[0]}function pV(e){return e[1]}function mV(e,t,n){var r=new gV(null==t?hV:t,null==n?pV:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function gV(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function yV(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var vV=mV.prototype=gV.prototype;vV.copy=function(){var e,t,n=new gV(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=yV(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=yV(t));return n},vV.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return fV(this.cover(t,n),t,n,e)},vV.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)fV(this,a[n],s[n],e[n]);return this},vV.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},vV.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},vV.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},vV.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new dV(m,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new dV(m[3],g,y,a,s),new dV(m[2],i,y,g,s),new dV(m[1],g,o,a,y),new dV(m[0],i,o,g,y)),(l=(t>=y)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=m.data}}return r},vV.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},vV.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},vV.root=function(){return this._root},vV.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},vV.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new dV(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new dV(n,l,c,o,a)),(n=u[2])&&s.push(new dV(n,r,c,l,a)),(n=u[1])&&s.push(new dV(n,l,i,o,c)),(n=u[0])&&s.push(new dV(n,r,i,l,c))}return this},vV.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new dV(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new dV(o,a,s,c,f)),(o=i[1])&&n.push(new dV(o,c,s,u,f)),(o=i[2])&&n.push(new dV(o,a,f,c,l)),(o=i[3])&&n.push(new dV(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},vV.x=function(e){return arguments.length?(this._x=e,this):this._x},vV.y=function(e){return arguments.length?(this._y=e,this):this._y};var bV=function(e){return function(){return e}},xV=function(e){return 1e-6*(e()-.5)};function wV(e){return e.x+e.vx}function _V(e){return e.y+e.vy}function kV(e){return e.index}function EV(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const SV=4294967296;function AV(e){return e.x}function CV(e){return e.y}var DV=Math.PI*(3-Math.sqrt(5)),MV=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=Bb(f),l=sv("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%SV)/SV}();function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*DV;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}};const FV={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,u,l,c,f,d,h=t.length,p=0;p<o;++p)for(a=mV(t,wV,_V).visitAfter(s),e=0;e<h;++e)u=t[e],f=n[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,h=e.r,p=f+h;if(!s)return t>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=xV(r))*m),0===g&&(y+=(g=xV(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=bV(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,u()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:bV(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i,o=bV(-30),a=1,s=1/0,u=.81;function l(n){var i,o=e.length,a=mV(e,AV,CV).visitAfter(f);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function f(e){var t,n,r,o,a,s=0,u=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,o+=n*t.y);e.x=r/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,l,c){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=c-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=xV(n))*f),0===d&&(p+=(d=xV(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===f&&(p+=(f=xV(n))*f),0===d&&(p+=(d=xV(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(h=i[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:bV(+e),c(),l):o},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l},link:function(e){var t,n,r,i,o,a,s=kV,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=bV(30),c=1;function f(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,f,d,h,p,m,g=0;g<s;++g)l=(u=e[g]).source,d=(f=u.target).x+f.vx-l.x-l.vx||xV(a),h=f.y+f.vy-l.y-l.vy||xV(a),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,f.vx-=d*(m=o[g]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function d(){if(r){var a,u,l=r.length,c=e.length,f=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(l);a<c;++a)(u=e[a]).index=a,"object"!=typeof u.source&&(u.source=EV(f,u.source)),"object"!=typeof u.target&&(u.target=EV(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=e[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,a=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(s=e,f):s},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:bV(+e),h(),f):u},f.distance=function(e){return arguments.length?(l="function"==typeof e?e:bV(+e),p(),f):l},f},x:function(e){var t,n,r,i=bV(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=bV(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:bV(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:bV(+t),a(),o):e},o},y:function(e){var t,n,r,i=bV(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=bV(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:bV(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:bV(+t),a(),o):e},o}},NV="forces",OV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],$V=["static","iterations"],TV=["x","y","vx","vy"];function zV(e){eF.call(this,null,e)}function RV(e,t,n,r){var i,o,a,s,u=_S(t.forces);for(i=0,o=OV.length;i<o;++i)(a=OV[i])!==NV&&t.modified(a)&&e[a](t[a]);for(i=0,o=u.length;i<o;++i)s=NV+i,(a=n||t.modified(NV,i)?LV(u[i]):r&&PV(u[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(NV+i,null);return e.numForces=u.length,e}function PV(e,t){var n,r;for(n in e)if(ES(r=e[n])&&t.modified(RE(r)))return 1;return 0}function LV(e){var t,n;for(n in RS(FV,e.force)||IE("Unrecognized force: "+e.force),t=FV[e.force](),e)ES(t[n])&&BV(t[n],e[n],e);return t}function BV(e,t,n){e(ES(t)?e=>t(e,n):t)}zV.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:TV}]},IS(zV,eF,{transform:function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(OV),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&RV(i,e,0,t)):(this.value=i=function(e,t){const n=MV(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),RV(n,t,!0).on("end",(()=>o=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified($V)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,u=t.length;s<u;++s)if(e=t[s],e.name===NV&&"link"===e.op._argval.force)for(var r,i=e.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(TV)}}),t(cV,"force",(function(){return zV}));var IV={};function jV(e,t){return e.parent===t.parent?1:2}function UV(e,t){return e+t.x}function qV(e,t){return Math.max(e,t.y)}function WV(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function HV(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=GV)):void 0===t&&(t=VV);for(var n,r,i,o,a,s=new QV(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new QV(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(XV)}function VV(e){return e.children}function GV(e){return Array.isArray(e)?e[1]:null}function YV(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function XV(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function QV(e){this.data=e,this.depth=this.height=0,this.parent=null}QV.prototype=HV.prototype={constructor:QV,count:function(){return this.eachAfter(WV)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return HV(this).eachBefore(YV)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var JV=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&eG(n,t)?++r:(n=nG(o=KV(o,t)),r=0);return n};function KV(e,t){var n,r;if(tG(t,e))return[t];for(n=0;n<e.length;++n)if(ZV(t,e[n])&&tG(rG(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(ZV(rG(e[n],e[r]),t)&&ZV(rG(e[n],t),e[r])&&ZV(rG(e[r],t),e[n])&&tG(iG(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function ZV(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function eG(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function tG(e,t){for(var n=0;n<t.length;++n)if(!eG(e,t[n]))return!1;return!0}function nG(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return rG(e[0],e[1]);case 3:return iG(e[0],e[1],e[2])}var t}function rG(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function iG(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*m,_=(p*x-m*b)/(2*w)-r,k=(m*g-p*y)/w,E=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,A=k*k+S*S-1,C=2*(o+_*k+E*S),D=_*_+E*E-o*o,M=-(A?(C+Math.sqrt(C*C-4*A*D))/(2*A):D/C);return{x:r+_+k*M,y:i+E+S*M,r:M}}function oG(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function aG(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function sG(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function uG(e){this._=e,this.next=null,this.previous=null}function lG(e){if(!(o=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f,d;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;oG(r,n,i=e[2]),n=new uG(n),r=new uG(r),i=new uG(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){oG(n._,r._,i=e[u]),i=new uG(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(aG(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(aG(c._,i._)){(n=c).next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=sG(n);(i=i.next)!==r;)(s=sG(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=JV(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function cG(e){return null==e?null:fG(e)}function fG(e){if("function"!=typeof e)throw new Error;return e}function dG(){return 0}var hG=function(e){return function(){return e}};function pG(e){return Math.sqrt(e.value)}function mG(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function gG(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=lG(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function yG(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var vG=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},bG=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l},xG={depth:-1},wG={};function _G(e){return e.id}function kG(e){return e.parentId}var EG=function(){var e=_G,t=kG;function n(n){var r,i,o,a,s,u,l,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],s=c[i]=new QV(r),null!=(u=e(r,i,n))&&(u+="")&&(l=s.id=u,d.set(l,d.has(l)?wG:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=c[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===wG)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=xG,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(XV),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=fG(t),n):e},n.parentId=function(e){return arguments.length?(t=fG(e),n):t},n};function SG(e,t){return e.parent===t.parent?1:2}function AG(e){var t=e.children;return t?t[0]:e.t}function CG(e){var t=e.children;return t?t[t.length-1]:e.t}function DG(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function MG(e,t,n){return e.a.parent===t.parent?e.a:n}function FG(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}FG.prototype=Object.create(QV.prototype);var NG=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l},OG=(1+Math.sqrt(5))/2;function $G(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,m,g,y=[],v=t.children,b=0,x=0,w=v.length,_=t.value;b<w;){u=i-n,l=o-r;do{c=v[x++].value}while(!c&&x<w);for(f=d=c,g=c*c*(m=Math.max(l/u,u/l)/(_*e)),p=Math.max(d/g,g/f);x<w;++x){if(c+=s=v[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}y.push(a={value:c,dice:u<l,children:v.slice(b,x)}),a.dice?bG(a,n,r,i,_?r+=l*c/_:o):NG(a,n,r,_?n+=u*c/_:i,o),_-=c,b=x}return y}var TG=function e(t){function n(e,n,r,i,o){$G(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(OG),zG=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?bG(s,n,r,i,h?r+=(o-r)*s.value/h:o):NG(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=$G(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(OG);function RG(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function PG(e){eF.call(this,null,e)}PG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const LG=e=>e.values;function BG(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,l,c,f=-1;for(;++f<i;)u=o(l=t[f])+"",(c=a[u])?c.push(l):a[u]=[l];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function IG(e){eF.call(this,null,e)}IS(PG,eF,{transform:function(e,t){t.source||IE("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each((e=>{e.children&&xM(e.data)&&i.rem.push(e.data)})),this.value=o=HV({values:_S(e.keys).reduce(((e,t)=>(e.key(t),e)),BG()).entries(i.source)},LG),n&&o.each((e=>{e.children&&(e=kM(e.data),i.add.push(e),i.source.push(e))})),RG(o,wM,wM)),i.source.root=o,i}});const jG=(e,t)=>e.parent===t.parent?1:2;IS(IG,eF,{transform:function(e,t){t.source&&t.source.root||IE(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(CM(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?jG:VE);try{this.value=n(i)}catch(e){IE(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o))),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const UG=["x","y","r","depth","children"];function qG(e){IG.call(this,e)}qG.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:UG.length,default:UG}]},IS(qG,IG,{layout:function(){var e=null,t=1,n=1,r=dG;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(mG(e)).eachAfter(gG(r,.5)).eachBefore(yG(1)):i.eachBefore(mG(pG)).eachAfter(gG(dG,1)).eachAfter(gG(r,i.r/Math.min(t,n))).eachBefore(yG(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=cG(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:hG(+e),i):r},i},params:["radius","size","padding"],fields:UG});const WG=["x0","y0","x1","y1","depth","children"];function HG(e){IG.call(this,e)}function VG(e){eF.call(this,null,e)}HG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WG.length,default:WG}]},IS(HG,IG,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&bG(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(vG),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:WG}),VG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},IS(VG,eF,{transform:function(e,t){t.source||IE("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?RG(EG().id(e.key).parentId(e.parentKey)(i.source),e.key,GE):RG(EG()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const GG={tidy:function(){var e=SG,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new FG(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new FG(r[i],i)),n.parent=t;return(a.parent=new FG(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=CG(s),o=AG(o),s&&o;)u=AG(u),(a=CG(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(DG(MG(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!CG(a)&&(a.t=s,a.m+=f-c),o&&!AG(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=jV,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(UV,0)/e.length}(n),t.y=function(e){return 1+e.reduce(qV,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},YG=["x","y","depth","children"];function XG(e){IG.call(this,e)}function QG(e){eF.call(this,[],e)}XG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:YG.length,default:YG}]},IS(XG,IG,{layout:function(e){const t=e||"tidy";if(RS(GG,t))return GG[t]();IE("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:YG}),QG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},IS(QG,eF,{transform:function(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||IE("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>o[wM(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[wM(t)]&&o[wM(n)]&&i.add.push(kM({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>o[wM(e)]=1)),n.forEach((e=>{(o[wM(e.source)]||o[wM(e.target)])&&i.mod.push(e)}))),i}});const JG={binary:function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;l[m]<d?h=m+1:p=m}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;e(t,h,g,i,o,v,u),e(h,n,y,v,o,a,u)}else{var b=r?(o*y+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,y,i,b,a,u)}}(0,u,e.value,t,n,r,i)},dice:bG,slice:NG,slicedice:function(e,t,n,r,i){(1&e.depth?NG:bG)(e,t,n,r,i)},squarify:TG,resquarify:zG},KG=["x0","y0","x1","y1","depth","children"];function ZG(e){IG.call(this,e)}ZG.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:KG.length,default:KG}]},IS(ZG,IG,{layout:function(){const e=function(){var e=TG,t=!1,n=1,r=1,i=[0],o=dG,a=dG,s=dG,u=dG,l=dG;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(vG),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=fG(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:hG(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:hG(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:hG(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:hG(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:hG(+e),c):l},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{RS(JG,t)?e.tile(JG[t]):IE("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:KG}),t(IV,"treemap",(function(){return ZG})),t(IV,"treelinks",(function(){return QG})),t(IV,"tree",(function(){return XG})),t(IV,"stratify",(function(){return VG})),t(IV,"partition",(function(){return HG})),t(IV,"pack",(function(){return qG})),t(IV,"nest",(function(){return PG}));var eY={};function tY(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=U$(i,o).getContext("2d");t.forEach((e=>nY(s,e,a)));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,m;for(d=0;d<o;++d)for(f=0;f<i;++f)m=4278190080&u[d*i+f],m&&(h=e(f),p=e(d),r||l.set(h,p),a&&268435456^m&&c.set(h,p));return[l,c]}function nY(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>nY(e,t.items,n)))})):QP[r].draw(e,{items:n?t.map(rY):t})}function rY(e){const t=SM(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const iY=31,oY=new Uint32Array(33),aY=new Uint32Array(33);aY[0]=0,oY[0]=~aY[0];for(let e=1;e<=32;++e)aY[e]=aY[e-1]<<1|1,oY[e]=~aY[e];function sY(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&iY)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&iY))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&iY)))},getRange:(t,r,i,o)=>{let a,s,u,l,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,u=a>>>5,l=s>>>5,u===l){if(n[u]&oY[a&iY]&aY[1+(s&iY)])return!0}else{if(n[u]&oY[a&iY])return!0;if(n[l]&aY[1+(s&iY)])return!0;for(let e=u+1;e<l;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>5,l=s>>>5,u===l)r(u,oY[a&iY]&aY[1+(s&iY)]);else for(r(u,oY[a&iY]),r(l,aY[1+(s&iY)]),c=u+1;c<l;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>5,l=s>>>5,u===l)i(u,aY[a&iY]|oY[1+(s&iY)]);else for(i(u,aY[a&iY]),i(l,oY[1+(s&iY)]),c=u+1;c<l;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function uY(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function lY(e,t,n,r,i,o,a,s){const u=i*o/(2*r),l=e(t-u),c=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}const cY=[-1,-1,1,1],fY=[-1,1,-1,1];const dY=["right","center","left"],hY=["bottom","middle","top"];function pY(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!function(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}(a,u,s,l,c):i.getRange(e,n,t,r)))}const mY={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},gY={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=OP.width(e.datum,e.datum.text);let u,l,c,f,d,h,p,m=0;for(let r=0;r<n;++r)u=t[r].x,c=t[r].y,l=void 0===t[r].x2?u:t[r].x2,f=void 0===t[r].y2?c:t[r].y2,d=(u+l)/2,h=(c+f)/2,p=Math.abs(l-u+f-c),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=a/2,u=e.x-d,l=e.x+d,c=e.y-h,f=e.y+h,e.align="center",u<0&&l<=i?e.align="left":0<=u&&i<l&&(e.align="right"),e.baseline="middle",c<0&&f<=o?e.baseline="top":0<=c&&o<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(t,n,r,u,l){const c=e.invert(t),f=e.invert(n);let d,h=r,p=o;if(!uY(c,f,u,l,i,o)&&!lY(e,c,f,l,u,h,a,s)&&!lY(e,c,f,l,u,l,a,null)){for(;p-h>=1;)d=(h+p)/2,lY(e,c,f,l,u,d,a,s)?p=d:h=d;if(h>r)return[c,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,l=s.length,c=t.datum.fontSize,f=OP.width(t.datum,t.datum.text);let d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M=n?c:0,F=!1,N=!1,O=0;for(let r=0;r<l;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(D=d,d=h,h=D),p>m&&(D=p,p=m,m=D),x=e(d),_=e(h),w=~~((x+_)/2),k=e(p),S=e(m),E=~~((k+S)/2),v=w;v>=x;--v)for(b=E;b>=k;--b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);for(v=w;v<=_;++v)for(b=E;b<=S;++b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);F||n||(A=Math.abs(h-d+m-p),g=(d+h)/2,y=(p+m)/2,A>=O&&!uY(g,y,f,c,i,o)&&!lY(e,g,y,c,f,c,a,null)&&(O=A,t.x=g,t.y=y,N=!0))}return!(!F&&!N)&&(g=f/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(t){const l=t.datum.datum.items[r].items,c=l.length,f=t.datum.fontSize,d=OP.width(t.datum,t.datum.text),h=[];let p,m,g,y,v,b,x,w,_,k,E,S,A=n?f:0,C=!1,D=!1,M=0;for(let r=0;r<c;++r){for(p=l[r].x,g=l[r].y,m=void 0===l[r].x2?p:l[r].x2,y=void 0===l[r].y2?g:l[r].y2,h.push([e((p+m)/2),e((g+y)/2)]);h.length;)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let e=0;e<4;++e)v=x+cY[e],b=w+fY[e],u.outOfBounds(v,b,v,b)||h.push([v,b]);if(v=e.invert(x),b=e.invert(w),_=A,k=o,!uY(v,b,d,f,i,o)&&!lY(e,v,b,f,d,_,a,s)&&!lY(e,v,b,f,d,f,a,null)){for(;k-_>=1;)E=(_+k)/2,lY(e,v,b,f,d,E,a,s)?k=E:_=E;_>A&&(t.x=v,t.y=b,A=_,C=!0)}}C||n||(S=Math.abs(m-p+y-g),v=(p+m)/2,b=(g+y)/2,S>=M&&!uY(v,b,d,f,i,o)&&!lY(e,v,b,f,d,f,a,null)&&(M=S,t.x=v,t.y=b,D=!0))}return!(!C&&!D)&&(v=d/2,b=f/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function yY(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=mY[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[u].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,u),v=sY(t[0],t[1],l),b=g&&"naive"===c;var x;const w=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)})));let _;if(!b){n&&w.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;p&&(a||g)&&(o=[e.map((e=>e.datum))].concat(o)),_=o.length?tY(v,o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(v,a&&w)}const k=g?gY[c](v,_,a,u):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(t){const l=t.boundary,c=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>o)return!1;let f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=l[1+f]+r[i]*f*p,w=l[4+d]+m*c*d/2+r[i]*d*p,v=w-c/2,b=w+c/2,_=e(g),E=e(v),S=e(b),!A){if(!pY(_,_,E,S,a,s,g,g,v,b,l,h))continue;A=OP.width(t.datum,t.datum.text)}if(x=g+m*A*f/2,g=x-A/2,y=x+A/2,_=e(g),k=e(y),pY(_,k,E,S,a,s,g,y,v,b,l,h))return t.x=f?f*m<0?y:g:x,t.y=d?d*m<0?b:v:w,t.align=dY[f*m+1],t.baseline=hY[d*m+1],a.setRange(_,E,k,S),!0}return!1}}(v,_,h,d);return w.forEach((e=>e.opacity=+k(e))),w}const vY=["x","y","opacity","align","baseline"],bY=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function xY(e){eF.call(this,null,e)}xY.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:bY},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:vY.length,default:vY}]},IS(xY,eF,{transform:function(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return ES(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||IE("Size parameter should be specified as a [width, height] array.");const r=e.as||vY;return yY(t.materialize(t.SOURCE).source,e.size,e.sort,_S(e.offset||1),_S(e.anchor||bY),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),t(eY,"label",(function(){return xY}));var wY={};function _Y(e,t){var n,r,i,o,a,s,u=[],l=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function kY(e){eF.call(this,null,e)}kY.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},IS(kY,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=_Y(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(zE),o=i.length,a=e.as||[zE(e.x),zE(e.y)],s=[];r.forEach((t=>{YF(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<o;++e)n[i[e]]=t.dims[e];n[a[0]]=e[0],n[a[1]]=e[1],s.push(kM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const EY={linear:jF,log:UF,exp:qF,pow:WF,quad:HF,poly:VF};function SY(e){eF.call(this,null,e)}SY.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(EY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},IS(SY,eF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=_Y(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(zE),o=e.method||"linear",a=e.order||3,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),u=e.as||[zE(e.x),zE(e.y)],l=EY[o],c=[];let f=e.extent;RS(EY,o)||IE("Invalid regression method: "+o),null!=f&&"log"===o&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=l(n,e.x,e.y,a);if(e.params)return void c.push(kM({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||$S(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],c.push(kM(t))};"linear"===o?d.forEach((e=>h([e,r.predict(e)]))):KF(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),t(wY,"regression",(function(){return SY})),t(wY,"loess",(function(){return kY}));var AY={};const CY=Math.pow(2,-52),DY=new Uint32Array(512);class MY{static from(e,t=PY,n=LY){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new MY(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[t]=t}const c=(a+u)/2,f=(s+l)/2;let d,h,p,m=1/0;for(let t=0;t<o;t++){const n=FY(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],y=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=FY(g,y,e[2*t],e[2*t+1]);n<m&&n>0&&(h=t,m=n)}let v=e[2*h],b=e[2*h+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===h)continue;const n=TY(g,y,v,b,e[2*t],e[2*t+1]);n<x&&(p=t,x=n)}let w=e[2*p],_=e[2*p+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];zY(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(OY(g,y,v,b,w,_)){const e=h,t=v,n=b;h=p,v=w,b=_,p=e,w=t,_=n}const k=function(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(a*f-u*c)*d}}(g,y,v,b,w,_);this._cx=k.x,this._cy=k.y;for(let t=0;t<o;t++)this._dists[t]=FY(e[2*t],e[2*t+1],k.x,k.y);zY(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=d,i[this._hashKey(v,b)]=h,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=e[2*u],c=e[2*u+1];if(s>0&&Math.abs(l-o)<=CY&&Math.abs(c-a)<=CY)continue;if(o=l,a=c,u===d||u===h||u===p)continue;let f=0;for(let e=0,t=this._hashKey(l,c);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],!OY(l,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],OY(l,c,e[2*v],e[2*v+1],e[2*m],e[2*m+1]);)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=t[g],OY(l,c,e[2*m],e[2*m+1],e[2*g],e[2*g+1]);)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=t[u]=g,n[g]=t[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=DY[--i];continue}const u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,f=t[o],d=t[e],h=t[l],p=t[c];if($Y(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<DY.length&&(DY[i++]=s)}else{if(0===i)break;e=DY[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function FY(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function NY(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function OY(e,t,n,r,i,o){return(NY(i,o,e,t,n,r)||NY(e,t,n,r,i,o)||NY(n,r,i,o,e,t))<0}function $Y(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+(u*u+l*l)*(c*h-f*d)<0}function TY(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function zY(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;RY(e,n+r>>1,i),t[e[n]]>t[e[r]]&&RY(e,n,r),t[e[i]]>t[e[r]]&&RY(e,i,r),t[e[n]]>t[e[i]]&&RY(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;RY(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(zY(e,t,i,r),zY(e,t,n,o-1)):(zY(e,t,n,o-1),zY(e,t,i,r))}}function RY(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function PY(e){return e[0]}function LY(e){return e[1]}const BY=1e-6;class IY{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>BY||Math.abs(this._y1-i)>BY)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class jY{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class UY{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=e[s],f=e[s+1],d=e[u],h=e[u+1],p=e[l],m=e[l+1],g=d-c,y=h-f,v=p-c,b=m-f,x=g*g+y*y,w=v*v+b*b,_=2*(g*b-y*v);if(_)if(Math.abs(_)<1e-8)t=(c+p)/2,r=(f+m)/2;else{const e=1/_;t=c+(b*x-y*w)*e,r=f+(g*w-v*x)*e}else t=(c+p)/2-1e8*b,r=(f+m)/2+1e8*v;i[a]=t,i[a+1]=r}let o,a,s,u=t[t.length-1],l=4*u,c=e[2*u],f=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],o=l,a=c,s=f,l=4*u,c=e[2*u],f=e[2*u+1],r[o+2]=r[l]=s-f,r[o+3]=r[l+1]=c-a}render(e){const t=null==e?e=new IY:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,e)}let s,u=i[i.length-1];for(let t=0;t<i.length;++t){s=u,u=i[t];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,d=this._project(l,c,a[f+2],a[f+3]);d&&this._renderSegment(l,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new IY:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new IY:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new jY;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]==e[o]&&t[r+1]==e[o+1]&&t[(r+2)%i]==e[(o+a-2)%a]&&t[(r+3)%i]==e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,u=null,l=t[n-2],c=t[n-1],f=this._regioncode(l,c);for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],o=f,f=this._regioncode(l,c),0===o&&0===f)a=s,s=0,u?u.push(l,c):u=[l,c];else{let t,n,d,h,p;if(0===o){if(null===(t=this._clipSegment(r,i,l,c,o,f)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,f,o)))continue;[h,p,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(e,a,s,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const qY=2*Math.PI,WY=Math.pow;function HY(e){return e[0]}function VY(e){return e[1]}function GY(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class YY{static from(e,t=HY,n=VY,r){return new YY("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new MY(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=GY(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new MY(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new UY(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(u!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let l=e,c=WY(t-u[2*e],2)+WY(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=WY(t-u[2*r],2)+WY(n-u[2*r+1],2);if(f<c&&(c=f,l=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&WY(t-u[2*d],2)+WY(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}render(e){const t=null==e?e=new IY:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new IY:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,qY)}return n&&n.value()}renderHull(e){const t=null==e?e=new IY:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new jY;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new IY:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new jY;return this.renderTriangle(e,t),t.value()}}function XY(e){eF.call(this,null,e)}XY.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const QY=[-1e5,-1e5,1e5,1e5];function JY(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}IS(XY,eF,{transform:function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:QY;const o=this.value=YY.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?JY(t):null}return t.reflow(e.modified()).modifies(n)}}),t(AY,"voronoi",(function(){return XY}));var KY={},ZY=Math.PI/180,eX=2048;function tX(){var e,t,n,r,i,o,a,s=[256,256],u=oX,l=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=c()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=h));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&rX(t,e,s[0])||n&&(l=n,!((a=t).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y)))){for(var y,v=t.sprite,b=t.width>>5,x=s[0]>>5,w=t.x-(b<<4),_=127&w,k=32-_,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),A=0;A<E;A++){y=0;for(var C=0;C<=b;C++)e[S+C]|=y<<k|(C<b?(y=v[A*b+C])>>>_:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=eX/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(U$()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,m=-1,g=[],y=l.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,nX(u,v,y,m),v.hasText&&d(f,v,h)&&(g.push(v),h?iX(h,v):h=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=aX(e),f):t},f.fontStyle=function(e){return arguments.length?(r=aX(e),f):r},f.fontWeight=function(e){return arguments.length?(i=aX(e),f):i},f.rotate=function(e){return arguments.length?(o=aX(e),f):o},f.text=function(t){return arguments.length?(e=aX(t),f):e},f.spiral=function(e){return arguments.length?(u=sX[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=aX(e),f):n},f.padding=function(e){return arguments.length?(a=aX(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f}function nX(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,eX/o);var a,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,u=t.size<<1,t.rotate){var m=Math.sin(t.rotate*ZY),g=Math.cos(t.rotate*ZY),y=a*g,v=a*m,b=u*g,x=u*m;a=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,u=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=2048&&(f=0,d+=h,h=0),d+u>=eX)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),t.rotate&&i.rotate(t.rotate*ZY),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=u,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var w=i.getImageData(0,0,2048/o,eX/o).data,_=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)_[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(c=0;c<u;c++){for(l=0;l<a;l++){var S=s*c+(l>>5),A=w[2048*(d+c)+(f+l)<<2]?1<<31-l%32:0;_[S]|=A,k|=A}k?E=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+E,t.sprite=_.slice(0,(t.y1-t.y0)*s)}}}function rX(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function iX(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function oX(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function aX(e){return"function"==typeof e?e:function(){return e}}var sX={archimedean:oX,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const uX=["x","y","font","fontSize","fontStyle","fontWeight","angle"],lX=["text","font","rotate","fontSize","fontStyle","fontWeight"];function cX(e){eF.call(this,tX(),e)}cX.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:uX}]},IS(cX,eF,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||IE("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||lX.some((function(n){const r=e[n];return ES(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||uX;let a,s=e.fontSize||14;if(ES(s)?a=e.fontSizeRange:s=FS(s),a){const e=s,t=bT("sqrt")().domain($S(r,e)).range(a);s=n=>t(e(n))}r.forEach((e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));const u=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(fF).layout(),l=i.size(),c=l[0]>>1,f=l[1]>>1,d=u.length;for(let e,t,n=0;n<d;++n)e=u[n],t=e.datum,t[o[0]]=e.x+c,t[o[1]]=e.y+f,t[o[2]]=e.font,t[o[3]]=e.size,t[o[4]]=e.style,t[o[5]]=e.weight,t[o[6]]=e.rotate;return t.reflow(n).modifies(o)}}),t(KY,"wordcloud",(function(){return cX}));var fX={};const dX=e=>new Uint8Array(e),hX=e=>new Uint16Array(e),pX=e=>new Uint32Array(e);function mX(e,t,n){const r=(t<257?dX:t<65537?hX:pX)(e);return n&&r.set(n),r}function gX(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let l;for(l=0;l<a;++l)t[o[l]]|=r;for(l=s;l<u;++l)t[o[l]]|=r;return n}}}function yX(){let e=pX(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=pX(s);let l,c,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,u),a)l=t,c=e,t=Array(a+s),e=pX(a+s),function(e,t,n,r,i,o,a,s,u){let l,c=0,f=0;for(l=0;c<r&&f<a;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=o[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<a;++f,++l)s[l]=i[f],u[l]=o[f]+e}(o,l,c,a,d,u,s,t,e);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;t=d,e=u}return n=a+s,{index:u,value:d}},remove:function(r,i){const o=n;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,t[u]=t[s],++u);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[wd(r,e[0],0,i),xd(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function vX(e){eF.call(this,function(){let e=8,t=[],n=pX(0),r=mX(0,e),i=mX(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){const o=t.length,a=Array(o-e),s=t;let u,l,c;for(l=0;!n[l]&&l<o;++l)a[l]=t[l],s[l]=l;for(c=l;l<o;++l)u=t[l],n[l]?s[l]=-1:(s[l]=c,r[c]=r[l],i[c]=i[l],a[c]=u,u._index=c++),r[l]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=mX(t,e,r),i=mX(t,e))}}}(),e),this._indices=null,this._dims=null}function bX(e){eF.call(this,null,e)}vX.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},IS(vX,eF,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,l=0;for(;l<a;++l)s=n[l].fname,u=i[s]||(i[s]=yX()),o.push(gX(u,l,r[l]));return this.eval(e,t)},reinit:function(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,w,_,k;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,_=v.length;w<_;++w)x[v[w]._index]=1;for(w=0;w<h;++w)k=r[w],(!a[w]||e.modified("fields",w)||t.modified(k.fields))&&(y=k.fname,(m=p[y])||(o[y]=g=yX(),p[y]=m=g.insert(k,t.source,0)),a[w]=gX(g,w,i[w]).onAdd(m,u));for(w=0,_=s.data().length;w<_;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval:function(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d,h,p,m=i.size();i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,m)),o[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&l.push(m)},modify:function(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove:function(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex:function(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update:function(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,l=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++l);if(1===l)l=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,l=0;u<a;++u)e.modified("query",u)&&(l|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return l},incrementAll:function(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne:function(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],l=s[1],c=a[0],f=a[1],d=e.one;let h,p,m;if(u<c)for(h=u,p=Math.min(c,l);h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(u>c)for(h=c,p=Math.min(u,f);h<p;++h)m=o[h],i[m]^=d,r.push(m);if(l>f)for(h=Math.max(u,f),p=l;h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(l<f)for(h=Math.max(c,l),p=f;h<p;++h)m=o[h],i[m]^=d,r.push(m);e.range=t.slice()}}),bX.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},IS(bX,eF,{transform:function(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=e=>s[e]&n?null:a[e];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return t&&!(t^t^u[e]&n)?a[e]:null}))):(o.filter(o.ADD,l),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>l(e._index)))}}),t(fX,"resolvefilter",(function(){return bX})),t(fX,"crossfilter",(function(){return vX})),n(OE,oF),n(OE,UC),n(OE,lA),n(OE,CO);const xX="RawCode",wX="Literal",_X="Property",kX="Identifier",EX="ArrayExpression",SX="BinaryExpression",AX="CallExpression",CX="ConditionalExpression",DX="LogicalExpression",MX="MemberExpression",FX="ObjectExpression",NX="UnaryExpression";function OX(e){this.type=e}var $X,TX,zX,RX,PX;OX.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case EX:return e.elements;case SX:case DX:return[e.left,e.right];case AX:return[e.callee].concat(e.arguments);case CX:return[e.test,e.consequent,e.alternate];case MX:return[e.object,e.property];case FX:return e.properties;case _X:return[e.key,e.value];case NX:return[e.argument];case kX:case wX:case xX:default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};($X={})[1]="Boolean",$X[2]="<end>",$X[3]="Identifier",$X[4]="Keyword",$X[5]="Null",$X[6]="Numeric",$X[7]="Punctuator",$X[8]="String",$X[9]="RegularExpression";var LX="Identifier",BX="Unexpected token %0",IX="Invalid regular expression",jX="Invalid regular expression: missing /",UX="Octal literals are not allowed in strict mode.",qX="ILLEGAL",WX="Disabled.",HX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),VX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function GX(e,t){if(!e)throw new Error("ASSERT: "+t)}function YX(e){return e>=48&&e<=57}function XX(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function QX(e){return"01234567".indexOf(e)>=0}function JX(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function KX(e){return 10===e||13===e||8232===e||8233===e}function ZX(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&HX.test(String.fromCharCode(e))}function eQ(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&VX.test(String.fromCharCode(e))}const tQ={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function nQ(){for(;zX<RX;){const e=TX.charCodeAt(zX);if(!JX(e)&&!KX(e))break;++zX}}function rQ(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)zX<RX&&XX(TX[zX])?(r=TX[zX++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):bQ({},BX,qX);return String.fromCharCode(i)}function iQ(){var e,t,n,r;for(t=0,"}"===(e=TX[zX])&&bQ({},BX,qX);zX<RX&&XX(e=TX[zX++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&bQ({},BX,qX),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function oQ(){var e,t;for(e=TX.charCodeAt(zX++),t=String.fromCharCode(e),92===e&&(117!==TX.charCodeAt(zX)&&bQ({},BX,qX),++zX,(e=rQ("u"))&&"\\"!==e&&ZX(e.charCodeAt(0))||bQ({},BX,qX),t=e);zX<RX&&eQ(e=TX.charCodeAt(zX));)++zX,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==TX.charCodeAt(zX)&&bQ({},BX,qX),++zX,(e=rQ("u"))&&"\\"!==e&&eQ(e.charCodeAt(0))||bQ({},BX,qX),t+=e);return t}function aQ(){var e,t;return e=zX,{type:1===(t=92===TX.charCodeAt(zX)?oQ():function(){var e,t;for(e=zX++;zX<RX;){if(92===(t=TX.charCodeAt(zX)))return zX=e,oQ();if(!eQ(t))break;++zX}return TX.slice(e,zX)}()).length?3:tQ.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:zX}}function sQ(){var e,t,n,r,i=zX,o=TX.charCodeAt(zX),a=TX[zX];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++zX,{type:7,value:String.fromCharCode(o),start:i,end:zX};default:if(61===(e=TX.charCodeAt(zX+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return zX+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:zX};case 33:case 61:return zX+=2,61===TX.charCodeAt(zX)&&++zX,{type:7,value:TX.slice(i,zX),start:i,end:zX}}}return">>>="===(r=TX.substr(zX,4))?{type:7,value:r,start:i,end:zX+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:zX+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:7,value:t,start:i,end:zX+=2}:("//"===t&&bQ({},BX,qX),"<>=!+-*%&|^/".indexOf(a)>=0?{type:7,value:a,start:i,end:++zX}:void bQ({},BX,qX))}function uQ(){var e,t,n;if(GX(YX((n=TX[zX]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=zX,e="","."!==n){if(e=TX[zX++],n=TX[zX],"0"===e){if("x"===n||"X"===n)return++zX,function(e){let t="";for(;zX<RX&&XX(TX[zX]);)t+=TX[zX++];return 0===t.length&&bQ({},BX,qX),ZX(TX.charCodeAt(zX))&&bQ({},BX,qX),{type:6,value:parseInt("0x"+t,16),start:e,end:zX}}(t);if(QX(n))return function(e){let t="0"+TX[zX++];for(;zX<RX&&QX(TX[zX]);)t+=TX[zX++];return(ZX(TX.charCodeAt(zX))||YX(TX.charCodeAt(zX)))&&bQ({},BX,qX),{type:6,value:parseInt(t,8),octal:!0,start:e,end:zX}}(t);n&&YX(n.charCodeAt(0))&&bQ({},BX,qX)}for(;YX(TX.charCodeAt(zX));)e+=TX[zX++];n=TX[zX]}if("."===n){for(e+=TX[zX++];YX(TX.charCodeAt(zX));)e+=TX[zX++];n=TX[zX]}if("e"===n||"E"===n)if(e+=TX[zX++],"+"!==(n=TX[zX])&&"-"!==n||(e+=TX[zX++]),YX(TX.charCodeAt(zX)))for(;YX(TX.charCodeAt(zX));)e+=TX[zX++];else bQ({},BX,qX);return ZX(TX.charCodeAt(zX))&&bQ({},BX,qX),{type:6,value:parseFloat(e),start:t,end:zX}}function lQ(){var e,t,n,r;return PX=null,nQ(),e=zX,t=function(){var e,t,n,r;for(GX("/"===(e=TX[zX]),"Regular expression literal must start with a slash"),t=TX[zX++],n=!1,r=!1;zX<RX;)if(t+=e=TX[zX++],"\\"===e)KX((e=TX[zX++]).charCodeAt(0))&&bQ({},jX),t+=e;else if(KX(e.charCodeAt(0)))bQ({},jX);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||bQ({},jX),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";zX<RX&&eQ((e=TX[zX]).charCodeAt(0));)++zX,"\\"===e&&zX<RX?bQ({},BX,qX):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&bQ({},IX,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";bQ({},IX)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){bQ({},IX)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:zX}}function cQ(){if(nQ(),zX>=RX)return{type:2,start:zX,end:zX};const e=TX.charCodeAt(zX);return ZX(e)?aQ():40===e||41===e||59===e?sQ():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(GX("'"===(e=TX[zX])||'"'===e,"String literal must starts with a quote"),t=zX,++zX;zX<RX;){if((n=TX[zX++])===e){e="";break}if("\\"===n)if((n=TX[zX++])&&KX(n.charCodeAt(0)))"\r"===n&&"\n"===TX[zX]&&++zX;else switch(n){case"u":case"x":"{"===TX[zX]?(++zX,i+=iQ()):i+=rQ(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:QX(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),zX<RX&&QX(TX[zX])&&(o=!0,r=8*r+"01234567".indexOf(TX[zX++]),"0123".indexOf(n)>=0&&zX<RX&&QX(TX[zX])&&(r=8*r+"01234567".indexOf(TX[zX++]))),i+=String.fromCharCode(r)):i+=n}else{if(KX(n.charCodeAt(0)))break;i+=n}}return""!==e&&bQ({},BX,qX),{type:8,value:i,octal:o,start:t,end:zX}}():46===e?YX(TX.charCodeAt(zX+1))?uQ():sQ():YX(e)?uQ():sQ()}function fQ(){const e=PX;return zX=e.end,PX=cQ(),zX=e.end,e}function dQ(){const e=zX;PX=cQ(),zX=e}function hQ(e,t,n){const r=new OX("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function pQ(e,t){const n=new OX("CallExpression");return n.callee=e,n.arguments=t,n}function mQ(e){const t=new OX(LX);return t.name=e,t}function gQ(e){const t=new OX("Literal");return t.value=e.value,t.raw=TX.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function yQ(e,t,n){const r=new OX("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function vQ(e,t,n){const r=new OX("Property");return r.key=t,r.value=n,r.kind=e,r}function bQ(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(GX(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=zX,n.description=i,n}function xQ(e){2===e.type&&bQ(e,"Unexpected end of input"),6===e.type&&bQ(e,"Unexpected number"),8===e.type&&bQ(e,"Unexpected string"),3===e.type&&bQ(e,"Unexpected identifier"),4===e.type&&bQ(e,"Unexpected reserved word"),bQ(e,BX,e.value)}function wQ(e){const t=fQ();7===t.type&&t.value===e||xQ(t)}function _Q(e){return 7===PX.type&&PX.value===e}function kQ(e){return 4===PX.type&&PX.value===e}function EQ(){const e=[];for(zX=PX.start,wQ("[");!_Q("]");)_Q(",")?(fQ(),e.push(null)):(e.push(RQ()),_Q("]")||wQ(","));return fQ(),function(e){const t=new OX("ArrayExpression");return t.elements=e,t}(e)}function SQ(){zX=PX.start;const e=fQ();return 8===e.type||6===e.type?(e.octal&&bQ(e,UX),gQ(e)):mQ(e.value)}function AQ(){var e,t,n;return zX=PX.start,3===(e=PX).type?(n=SQ(),wQ(":"),vQ("init",n,RQ())):2!==e.type&&7!==e.type?(t=SQ(),wQ(":"),vQ("init",t,RQ())):void xQ(e)}function CQ(){var e,t,n=[],r={},i=String;for(zX=PX.start,wQ("{");!_Q("}");)t="$"+((e=AQ()).key.type===LX?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?bQ({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),_Q("}")||wQ(",");return wQ("}"),function(e){const t=new OX("ObjectExpression");return t.properties=e,t}(n)}const DQ={if:1};function MQ(){var e,t,n;if(_Q("("))return function(){wQ("(");const e=PQ();return wQ(")"),e}();if(_Q("["))return EQ();if(_Q("{"))return CQ();if(e=PX.type,zX=PX.start,3===e||DQ[PX.value])n=mQ(fQ().value);else if(8===e||6===e)PX.octal&&bQ(PX,UX),n=gQ(fQ());else{if(4===e)throw new Error(WX);1===e?((t=fQ()).value="true"===t.value,n=gQ(t)):5===e?((t=fQ()).value=null,n=gQ(t)):_Q("/")||_Q("/=")?(n=gQ(lQ()),dQ()):xQ(fQ())}return n}function FQ(){const e=[];if(wQ("("),!_Q(")"))for(;zX<RX&&(e.push(RQ()),!_Q(")"));)wQ(",");return wQ(")"),e}function NQ(){return wQ("."),function(){zX=PX.start;const e=fQ();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||xQ(e),mQ(e.value)}()}function OQ(){wQ("[");const e=PQ();return wQ("]"),e}function $Q(){const e=function(){var e;for(e=MQ();;)if(_Q("."))e=yQ(".",e,NQ());else if(_Q("("))e=pQ(e,FQ());else{if(!_Q("["))break;e=yQ("[",e,OQ())}return e}();if(7===PX.type&&(_Q("++")||_Q("--")))throw new Error(WX);return e}function TQ(){var e,t;if(7!==PX.type&&4!==PX.type)t=$Q();else{if(_Q("++")||_Q("--"))throw new Error(WX);if(_Q("+")||_Q("-")||_Q("~")||_Q("!"))e=fQ(),t=TQ(),t=function(e,t){const n=new OX("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(kQ("delete")||kQ("void")||kQ("typeof"))throw new Error(WX);t=$Q()}}return t}function zQ(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function RQ(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,u,l;if(e=PX,u=TQ(),0===(i=zQ(r=PX)))return u;for(r.prec=i,fQ(),t=[e,PX],o=[u,r,a=TQ()];(i=zQ(PX))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=hQ(s,u,a),o.push(n);(r=fQ()).prec=i,o.push(r),t.push(PX),n=TQ(),o.push(n)}for(n=o[l=o.length-1],t.pop();l>1;)t.pop(),n=hQ(o[l-1].value,o[l-2],n),l-=2;return n}(),_Q("?")&&(fQ(),t=RQ(),wQ(":"),e=function(e,t,n){const r=new OX("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,RQ())),e}function PQ(){const e=RQ();if(_Q(","))throw new Error(WX);return e}function LQ(e){zX=0,RX=(TX=e).length,PX=null,dQ();const t=PQ();if(2!==PX.type)throw new Error("Unexpect token after expression.");return t}var BQ={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function IQ(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&IE("Missing arguments to clamp function."),t.length>3&&IE("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&IE("Missing arguments to if function."),t.length>3&&IE("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function jQ(e){const t=(e=e||{}).allowed?aA(e.allowed):{},n=e.forbidden?aA(e.forbidden):{},r=e.constants||BQ,i=(e.functions||IQ)(f),o=e.globalvar,a=e.fieldvar,s=ES(o)?o:e=>"".concat(o,'["').concat(e,'"]');let u={},l={},c=0;function f(e){if(GS(e))return e;const t=d[e.type];return null==t&&IE("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:RS(n,i)?IE("Illegal identifier: "+i):RS(r,i)?r[i]:RS(t,i)?i:(u[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(c+=1);const r=f(e.property);return n===a&&(l[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&IE("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=RS(i,t)&&i[t];return r||IE("Unrecognized function: "+t),ES(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{c+=1;const t=f(e.key);return c-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},t}return h.functions=i,h.constants=r,h}const UQ="intersect",qQ="union";function WQ(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=UE.getter||UE(r.field),qS(n=r.getter(e))&&(n=iS(n)),qS(o[s])&&(o[s]=iS(o[s])),qS(o[s][0])&&(o[s]=o[s].map(iS)),"E"===r.type){if(JE(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!jS(n,o[s]))return!1}else if("R-RE"===r.type){if(!jS(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!jS(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!jS(n,o[s],!1,!0))return!1;return!0}const HQ=UE("_vgsid_"),VQ=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>{return(r=e(t))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}(HQ),GQ=VQ.left,YQ=VQ.right;var XQ={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=iS(t[0]),r=iS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=iS(t[0]),r=iS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function QQ(e,t,n,r){t[0].type!==wX&&IE("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@unit",s=":"+i;(t.length>=2&&rS(t).value)!==UQ||RS(r,a)||(r["@unit"]=n.getData(i).indataRef(n,o)),RS(r,s)||(r[s]=n.getData(i).tuplesRef())}function JQ(e){const t=this.context.data[e];return t?t.values.value:[]}const KQ=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},ZQ=KQ("format"),eJ=KQ("timeFormat"),tJ=KQ("utcFormat"),nJ=KQ("timeParse"),rJ=KQ("utcParse"),iJ=new Date(2e3,0,1);function oJ(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(iJ.setYear(2e3),iJ.setMonth(e),iJ.setDate(t),eJ.call(this,iJ,n)):""}function aJ(e,t,n,r){t[0].type!==wX&&IE("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!RS(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function sJ(e,t,n,r){if(t[0].type===wX)uJ(n,r,t[0].value);else for(e in n.scales)uJ(n,r,e)}function uJ(e,t,n){const r="%"+n;if(!RS(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function lJ(e,t){let n;return ES(e)?e:GS(e)?(n=t.scales[e])&&n.value:void 0}function cJ(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=sJ,n._range=sJ,n._scale=sJ;const r=t=>"_["+(t.type===wX?tA("%"+t.value):tA("%")+"+"+e(t))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(r(e[0]),")"),_range:e=>"".concat(r(e[0]),".range()"),_scale:t=>"".concat(r(t[0]),"(").concat(e(t[1]),")")}}function fJ(e,t){return function(n,r,i){if(n){const t=lJ(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const dJ=fJ("area",(function(e){return oU=new _d,rU(e,aU),2*oU})),hJ=fJ("bounds",(function(e){var t,n,r,i,o,a,s;if(pU=hU=-(fU=dU=1/0),xU=[],rU(e,MU),n=xU.length){for(xU.sort(LU),t=1,o=[r=xU[0]];t<n;++t)BU(r,(i=xU[t])[0])||BU(r,i[1])?(PU(r[0],i[1])>PU(r[0],r[1])&&(r[1]=i[1]),PU(i[0],r[1])>PU(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=PU(r[1],i[0]))>a&&(a=s,fU=i[0],hU=r[1])}return xU=wU=null,fU===1/0||dU===1/0?[[NaN,NaN],[NaN,NaN]]:[[fU,dU],[hU,pU]]})),pJ=fJ("centroid",(function(e){IU=jU=UU=qU=WU=HU=VU=GU=0,YU=new _d,XU=new _d,QU=new _d,rU(e,nq);var t=+YU,n=+XU,r=+QU,i=Pj(t,n,r);return i<Ej&&(t=HU,n=VU,r=GU,jU<kj&&(t=UU,n=qU,r=WU),(i=Pj(t,n,r))<Ej)?[NaN,NaN]:[$j(n,t)*Mj,Hj(r/i)*Mj]}));function mJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function gJ(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function yJ(e){const t=lh(e);return.2126*gJ(t.r)+.7152*gJ(t.g)+.0722*gJ(t.b)}function vJ(e,t){return e===t||e!=e&&t!=t||(JE(e)?!(!JE(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!vJ(e[n],t[n]))return!1;return!0}(e,t):!(!KE(e)||!KE(t))&&bJ(e,t))}function bJ(e,t){for(const n in e)if(!vJ(e[n],t[n]))return!1;return!0}function xJ(e){return t=>bJ(e,t)}const wJ={};function _J(e){return JE(e)||ArrayBuffer.isView(e)?e:null}function kJ(e){return _J(e)||(GS(e)?e:null)}const EJ=e=>e.data;function SJ(e,t){const n=JQ.call(t,e);return n.root&&n.root.lookup||{}}const AJ=()=>"undefined"!=typeof window&&window||null;const CJ={random:function(){return fF()},cumulativeNormal:_F,cumulativeLogNormal:DF,cumulativeUniform:TF,densityNormal:wF,densityLogNormal:CF,densityUniform:$F,quantileNormal:kF,quantileLogNormal:MF,quantileUniform:zF,sampleNormal:xF,sampleLogNormal:AF,sampleUniform:OF,isArray:JE,isBoolean:US,isDate:qS,isDefined:function(e){return void 0!==e},isNumber:HS,isObject:KE,isRegExp:VS,isString:GS,isTuple:xM,isValid:function(e){return null!=e&&e==e},toBoolean:nA,toDate:iA,toNumber:iS,toString:oA,indexof:function(e,...t){return kJ(e).indexOf(...t)},join:function(e,...t){return _J(e).join(...t)},lastindexof:function(e,...t){return kJ(e).lastIndexOf(...t)},replace:function(e,t,n){return ES(n)&&IE("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return _J(e).slice().reverse()},slice:function(e,...t){return kJ(e).slice(...t)},flush:BS,lerp:XS,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),OS(...e)},pad:ZS,peek:rS,pluck:function(e,t){const n=wJ[t]||(wJ[t]=UE(t));return JE(e)?e.map(n):n(e)},span:eA,inrange:jS,truncate:sA,rgb:lh,lab:Ch,hcl:Th,hsl:gh,luminance:yJ,contrast:function(e,t){const n=yJ(e),r=yJ(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Ld,format:ZQ,utcFormat:tJ,utcParse:rJ,utcOffset:$D,utcSequence:RD,timeFormat:eJ,timeParse:nJ,timeOffset:OD,timeSequence:zD,timeUnitSpecifier:iD,monthFormat:function(e){return oJ.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return oJ.call(this,e,1,"%b")},dayFormat:function(e){return oJ.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return oJ.call(this,0,2+e,"%a")},quarter:xS,utcquarter:wS,week:uD,utcweek:pD,dayofyear:sD,utcdayofyear:hD,warn:function(){return mJ(this.context.dataflow,"warn",arguments)},info:function(){return mJ(this.context.dataflow,"info",arguments)},debug:function(){return mJ(this.context.dataflow,"debug",arguments)},extent:$S,inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new nR).set(r[0],r[1],i[0],i[1]);return CB(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=_S(e.marktype),r=_S(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))},clampRange:kS,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=AJ();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=AJ();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return W$(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(GE).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?Sz(n,t=t||pz(e)):e}},panLinear:fS,panLog:dS,panPow:hS,panSymlog:pS,zoomLinear:gS,zoomLog:yS,zoomPow:vS,zoomSymlog:bS,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c,f,d=s.changes;if(!1===a._trigger||!(u.value.length||t||r))return 0;if((!d||d.stamp<l)&&(s.changes=d=a.changeset(),d.stamp=l,a.runAfter((()=>{s.modified=!0,a.pulse(u,d).run()}),!0,1)),n&&(c=!0===n?GE:JE(n)||xM(n)?n:xJ(n),d.remove(c)),t&&d.insert(t),r&&(c=xJ(r),u.value.some(c)?d.remove(c):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}},DJ=["view","item","group","xy","x","y"],MJ="this.",FJ={},NJ={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(tA("$"+e),"]"),functions:function(e){const t=IQ(e);DJ.forEach((e=>t[e]="event.vega."+e));for(const e in CJ)t[e]=MJ+e;return OS(t,cJ(e,CJ,FJ)),t},constants:BQ,visitors:FJ},OJ=jQ(NJ);function $J(e,t,n){return 1===arguments.length?CJ[e]:(CJ[e]=t,n&&(FJ[e]=n),OJ&&(OJ.functions[e]=MJ+e),this)}function TJ(e,t){const n={};let r;try{r=LQ(e=GS(e)?e:tA(e)+"")}catch(t){IE("Expression parse error: "+e)}r.visit((e=>{if(e.type!==AX)return;const r=e.callee.name,i=NJ.visitors[r];i&&i(r,e.arguments,t,n)}));const i=OJ(r);return i.globals.forEach((e=>{const r="$"+e;!RS(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:OS({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}$J("bandwidth",(function(e,t){const n=lJ(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),sJ),$J("copy",(function(e,t){const n=lJ(e,(t||this).context);return n?n.copy():void 0}),sJ),$J("domain",(function(e,t){const n=lJ(e,(t||this).context);return n?n.domain():[]}),sJ),$J("range",(function(e,t){const n=lJ(e,(t||this).context);return n&&n.range?n.range():[]}),sJ),$J("invert",(function(e,t,n){const r=lJ(e,(n||this).context);return r?JE(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),sJ),$J("scale",(function(e,t,n){const r=lJ(e,(n||this).context);return r?r(t):void 0}),sJ),$J("gradient",(function(e,t,n,r,i){e=lJ(e,(i||this).context);const o=lz(t,n);let a=e.domain(),s=a[0],u=rS(a),l=WE;return u-s?l=OT(e,s,u):e=(e.interpolator?bT("sequential")().interpolator(e.interpolator()):bT("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==rS(a)&&a.push(u)),a.forEach((t=>o.stop(l(t),e(t)))),o}),sJ),$J("geoArea",dJ,sJ),$J("geoBounds",hJ,sJ),$J("geoCentroid",pJ,sJ),$J("geoShape",(function(e,t,n){const r=lJ(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),sJ),$J("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==wX&&IE("First argument to indata must be a string literal."),t[1].type!==wX&&IE("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;RS(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),$J("data",JQ,aJ),$J("treePath",(function(e,t,n){const r=SJ(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(EJ):void 0}),aJ),$J("treeAncestors",(function(e,t){const n=SJ(e,this)[t];return n?n.ancestors().map(EJ):void 0}),aJ),$J("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u["index:unit"]&&u["index:unit"].value:void 0,f=n===UQ,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=WQ(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=WQ(t,r)))return s;return d&&f}),QQ),$J("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,a=n===UQ,s=HQ(t),u=GQ(i,s);if(u===i.length)return!1;if(HQ(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(YQ(i,s)-u<o.size)return!1}return!0}),QQ),$J("vlSelectionResolve",(function(e,t,n,r){for(var i,o,a,s,u,l,c,f,d,h,p,m=this.context.data[e],g=m?m.values.value:[],y={},v={},b={},x=g.length,w=0;w<x;++w){for(s=(i=g[w]).unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=(l=y[u.field]||(y[u.field]={}))[s]||(l[s]=[]),b[u.field]=f=u.type.charAt(0),d=XQ[f+"_union"],l[s]=d(c,_S(a[h]));n&&(c=v[s]||(v[s]=[])).push(_S(a).reduce(((e,t,n)=>(e[o[n].field]=t,e)),{}))}if(t=t||qQ,Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:XQ[b[e]+"_"+t](n,r)))})),g=Object.keys(v),n&&g.length){y[r?"vlPoint":"vlMulti"]=t===qQ?{or:g.reduce(((e,t)=>(e.push(...v[t]),e)),[])}:{and:g.map((e=>({or:v[e]})))}}return y}),QQ),$J("vlSelectionTuples",(function(e,t){return e.map((e=>OS({values:t.fields.map((t=>(t.getter||(t.getter=UE(t.field)))(e.datum)))},t)))}));const zJ=aA(["rule"]),RJ=aA(["group","image","rect"]);function PJ(e){return(e+"").toLowerCase()}function LJ(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var BJ={operator:(e,t)=>LJ(e,["_"],t.code),parameter:(e,t)=>LJ(e,["datum","_"],t.code),event:(e,t)=>LJ(e,["event"],t.code),handler:(e,t)=>LJ(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+tA(e)+"]";i+="$=".concat(r[e].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(e,t){let n="";return zJ[t]||(e.x2&&(e.x?(RJ[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(RJ[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",LJ(e,["item","_"],i)},codegen:{get:function(e){const t="[".concat(e.map(tA).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,a,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function IJ(e,t,n){if(!e||!KE(e))return e;for(let r,i=0,o=jJ.length;i<o;++i)if(r=jJ[i],RS(e,r.key))return r.parse(e,t,n);return e}var jJ=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||IE("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=YS(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=TE(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=UE(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=TE(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=_S(e.$compare).map((e=>e&&e.$tupleid?wM:e));return t.fn[n]||(t.fn[n]=SS(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return wM}}];const UJ={skip:!0};function qJ(e,t,n,r){return new WJ(e,t,n,r)}function WJ(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||BJ,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function HJ(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function VJ(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}WJ.prototype=HJ.prototype={fork:function(){const e=new HJ(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===PJ(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve:function(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[PJ(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;"operator"!==PJ(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||IE("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=JE(i)?i.map((e=>IJ(e,n,t))):IJ(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map((e=>n.get(e))))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&IE("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=KE(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||IE("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],UJ)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(GE).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};const GJ="default";function YJ(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function XJ(e,t){var n=e._runtime.data;return RS(n,t)||IE("Unrecognized data set: "+t),n[t]}function QJ(e,t){DM(t)||IE("Second argument to changes must be a changeset.");const n=XJ(this,e);return n.modified=!0,this.pulse(n.input,t)}function JJ(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function KJ(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function ZJ(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function eK(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=ZJ(e),(r=fL(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;GS(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:FS(e),item:FS(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const tK="view",nK={trap:!1};function rK(e,t,n,r){e._eventListeners.push({type:n,sources:_S(t),handler:r})}function iK(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||KE(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function oK(e){return e.item}function aK(e){return e.item.mark.source}function sK(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function uK(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function lK(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),rK(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function cK(e,t,n,r){const i=r.signal(n.signal),o=uK("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(uK("label"));a.appendChild(uK("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=fK;switch(n.input){case"checkbox":s=dK;break;case"select":s=hK;break;case"radio":s=pK;break;case"range":s=mK}s(e,a,n,i)}function fK(e,t,n,r){const i=uK("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function dK(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=uK("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function hK(e,t,n,r){const i=uK("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};gK(e,r)&&(n.selected=!0),i.appendChild(uK("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(gK(n.options[t],e))return void(i.selectedIndex=t)}}function pK(e,t,n,r){const i=uK("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};gK(t,r)&&(s.checked=!0);const u=uK("input",s);u.addEventListener("change",(()=>e.update(t)));const l=uK("label",{},(o[a]||t)+"");return l.prepend(u),i.appendChild(l),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)gK(n[e].value,t)&&(n[e].checked=!0)}}function mK(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Md(o,i,100),s=uK("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=uK("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=e=>{s.value=e,u.textContent=e}}function gK(e,t){return e===t||e+""==t+""}function yK(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,JJ(e),KJ(e),ZJ(e),i,o).background(e.background())}function vK(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function bK(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const xK=e=>+e||0;function wK(e){return KE(e)?{top:xK(e.top),bottom:xK(e.bottom),left:xK(e.left),right:xK(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(xK(e))}async function _K(e,t,n,r){const i=AB(t),o=i&&i.headless;return o||IE("Unrecognized renderer type: "+t),await e.runAsync(),yK(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var kK="width",EK="height",SK="padding",AK={skip:!0};function CK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===SK?r.left+r.right:0)}function DK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===SK?r.top+r.bottom:0)}function MK(e,t){return t.modified&&JE(t.input.value)&&e.indexOf("_:vega:_")}function FK(e,t){return!("parent"===e||t instanceof tF.proxy)}function NK(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":JE(e)?OK(e):KE(e)&&!qS(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(JE(n)?OK(n):$K(n))})).join("\n")):e+"";var t}(r))}function OK(e){return"["+e.map($K).join(", ")+"]"}function $K(e){return JE(e)?"[]":KE(e)&&!qS(e)?"{}":e}function TK(e,t){const n=this;if(t=t||{},KM.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=OS({},e.locale,t.locale);n.locale(fM(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||EB.Canvas,n._scenegraph=new iL;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||NK,n._redraw=!0,n._handler=(new FL).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=OS({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{JE(e[t])&&(e[t]=aA(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return qJ(e,tF,CJ,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:OS({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=CK(n,n._width),n._viewHeight=DK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=CK(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=DK(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:GJ,item:null}));e.on(e.events("view","mousemove"),t,((e,n)=>{const r=t.value,i=r?GS(r)?r:r.user:GJ,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return GS(n)||(r=n.item,n=n.user),YJ(e,n&&n!==GJ?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function zK(e,t){return RS(e._signals,t)?e._signals[t]:IE("Unrecognized signal name: "+tA(t))}function RK(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function PK(e,t,n,r){let i=RK(n,r);return i||(i=vK(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function LK(e,t,n){const r=RK(t,n);return r&&t._targets.remove(r),e}IS(TK,KM,{evaluate:async function(e,t,n){if(await KM.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=ZJ(r=this),o=JJ(r),a=KJ(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((e=>{try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&yM(this,n),this},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&VJ(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){const r=zK(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",wK(e)):wK(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(AB(e)||IE("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(KM.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(zK(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(kK,n,AK),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(EK,r,AK),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)},addEventListener:function(e,t,n){let r=t;return n&&!1===n.trap||(r=vK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return PK(this,e,zK(this,e),t)},removeSignalListener:function(e,t){return LK(this,zK(this,e),t)},addDataListener:function(e,t){return PK(this,e,XJ(this,e).values,t)},removeDataListener:function(e,t){return LK(this,XJ(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){const t=YJ(this,null);this._globalCursor=!!e,t&&YJ(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new Lb,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?Rb():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,o=new PM(n),a=function(n,r){i.runAsync(null,(()=>{e===tK&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(eK(i,n,r))}))};if("timer"===e)iK(i,"timer",t)&&i.timer(a,t);else if(e===tK)iK(i,"view",t)&&i.addEventListener(t,a,nK);else if("window"===e?iK(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&iK(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,a);rK(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",oK),aK,sK(e)),this.on(this.events("view","mouseout",oK),aK,sK(t)),this},data:function(e,t){return arguments.length<2?XJ(this,e).values.value:QJ.call(this,e,MM().remove(GE).insert(t))},change:QJ,insert:function(e,t){return QJ.call(this,e,MM().insert(t))},remove:function(e,t){return QJ.call(this,e,MM().remove(t))},scale:function(e){var t=this._runtime.scales;return RS(t,e)||IE("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=AB(r);e=n._el=e?bK(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),VJ(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||FL,s=e?o.renderer:o.headless;return n._renderer=s?yK(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),vK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,ZJ(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=bK(n,t,!0):e.appendChild(uK("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=bK(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=NS(r.debounce,i.update))),(null==r.input&&r.element?lK:cK)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==EB.Canvas&&e!==EB.SVG&&e!==EB.PNG&&IE("Unrecognized image type: "+e);const n=await _K(this,e,t);return e===EB.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await _K(this,EB.Canvas,e,t)).canvas()},toSVG:async function(e){return(await _K(this,EB.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:MK,signals:FK,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}});const BK="[",IK="]",jK=/[[\]{}]/,UK={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let qK,WK;function HK(e,t,n){return qK=t||"view",WK=n||UK,GK(e.trim()).map(YK)}function VK(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function GK(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=VK(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function YK(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=VK(e,r,IK,BK,IK),r===t)throw"Empty between selector: "+e;if(n=GK(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;n=n.map(YK);const i=YK(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:qK},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,l=0;if("}"===e[u-1]){if(l=e.lastIndexOf("{"),!(l>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,u-1))}catch(t){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,l).trim()).length,l=0}if(!u)throw e;"@"===e[0]&&(a=++l);r=VK(e,l,":"),r<u&&(n.push(e.substring(s,r).trim()),s=l=++r);if(l=VK(e,l,BK),l===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,l).trim()),i=[],s=++l,s===u)throw"Unmatched left bracket: "+e;for(;l<u;){if(l=VK(e,l,IK),l===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==BK)throw"Expected left bracket: "+e;s=++l}if(!(u=n.length)||jK.test(n[u-1]))throw"Invalid event selector: "+e;u>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],WK[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function XK(e){return KE(e)?e:{type:e||"pad"}}const QK=e=>+e||0;function JK(e){return KE(e)?e.signal?e:{top:QK(e.top),bottom:QK(e.bottom),left:QK(e.left),right:QK(e.right)}:{top:t=QK(e),bottom:t,left:t,right:t};var t}const KK=e=>KE(e)&&!JE(e)?OS({},e):{value:e};function ZK(e,t,n,r){if(null!=n){return KE(n)&&!JE(n)||JE(n)&&n.length&&KE(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function eZ(e,t,n){for(const n in t)ZK(e,n,t[n]);for(const t in n)ZK(e,t,n[t],"update")}function tZ(e,t,n){for(const r in t)n&&RS(n,r)||(e[r]=OS(e[r]||{},t[r]));return e}function nZ(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const rZ="mark",iZ="frame",oZ="scope",aZ="legend-label",sZ="title-text",uZ="title-subtitle";function lZ(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const cZ=e=>GS(e)?tA(e):e.signal?"(".concat(e.signal,")"):pZ(e);function fZ(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:tA(e)));for(;t.length&&null==rS(t);)t.pop();return t.unshift(cZ(e.gradient)),"gradient(".concat(t.join(","),")")}(e);let t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?dZ("hcl",e.h,e.c,e.l):e.h||e.s?dZ("hsl",e.h,e.s,e.l):e.l||e.a?dZ("lab",e.l,e.a,e.b):e.r||e.g||e.b?dZ("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?pZ(e.field):void 0!==e.value?tA(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=cZ(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1==+e.band?"":"*"+hZ(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(hZ(e.exponent),")")),null!=e.mult&&(t+="*".concat(hZ(e.mult))),null!=e.offset&&(t+="+".concat(hZ(e.offset))),e.round&&(t="round(".concat(t,")")),t}const dZ=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(fZ).join(","),")+'')");function hZ(e){return KE(e)?"("+fZ(e)+")":e}function pZ(e){return mZ(KE(e)?e:{datum:e})}function mZ(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):IE("Invalid field reference: "+tA(e));return e.signal||(r=GS(r)?jE(r).map(tA).join("]["):mZ(r)),t+"["+r+"]"}function gZ(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,u,l,c;for(u in u="lineBreak","text"!==t||null==i[u]||nZ(u,e)||lZ(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===iZ?i.group:n===rZ?OS({},i.mark,i[t]):null,c)l=nZ(u,e)||("fill"===u||"stroke"===u)&&(nZ("fill",e)||nZ("stroke",e)),l||lZ(o,u,c[u]);for(u in _S(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)nZ(t,e)||lZ(o,t,n[t])})),e=OS({},e),o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=OS(a,e.enter),s&&(e.update=OS(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)a[n]=yZ(e[n],t,o,i);return o}function yZ(e,t,n,r){const i={},o={};for(const t in e)null!=e[t]&&(i[t]=vZ((a=e[t],JE(a)?function(e){let t="";return e.forEach((e=>{const n=fZ(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===rS(t)&&(t+="null"),t}(a):fZ(a)),r,n,o));var a;return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function vZ(e,t,n,r){const i=TJ(e,t);return i.$fields.forEach((e=>r[e]=1)),OS(n,i.$params),i.$expr}const bZ=["value","update","init","react","bind"];function xZ(e,t){IE(e+' for "outer" push: '+tA(t))}function wZ(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||xZ("No prior signal definition",n),bZ.forEach((t=>{void 0!==e[t]&&xZ("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function _Z(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function kZ(e,t,n,r){return new _Z(e,t,n,r)}function EZ(e,t){return kZ("operator",e,t)}function SZ(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function AZ(e,t){return t?{$field:e,$name:t}:{$field:e}}const CZ=AZ("key");function DZ(e,t){return{$compare:e,$order:t}}function MZ(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const FZ="scope",NZ="view";function OZ(e){return e&&e.signal}function $Z(e){if(OZ(e))return!0;if(KE(e))for(const t in e)if($Z(e[t]))return!0;return!1}function TZ(e,t){return null!=e?e:t}function zZ(e){return e&&e.signal||e}const RZ="timer";function PZ(e,t){return(e.merge?LZ:e.stream?BZ:e.type?IZ:IE("Invalid stream specification: "+tA(e)))(e,t)}function LZ(e,t){const n=jZ({merge:e.merge.map((e=>PZ(e,t)))},e,t);return t.addStream(n).id}function BZ(e,t){const n=jZ({stream:PZ(e.stream,t)},e,t);return t.addStream(n).id}function IZ(e,t){let n;var r;e.type===RZ?(n=t.event(RZ,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===FZ?NZ:r||NZ,e.type);const i=jZ({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function jZ(e,t,n){let r=t.between;return r&&(2!==r.length&&IE('Stream "between" parameter must have 2 entries: '+tA(t)),e.between=[PZ(r[0],n),PZ(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===FZ&&r.push("inScope(event.item)"),r.length&&(e.filter=TJ("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const UZ={code:"_.$value",ast:{type:"Identifier",value:"value"}};function qZ(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||IE("Signal update missing events specification."),GS(o)&&(o=HK(o,t.isSubscope()?FZ:NZ)),o=_S(o).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[WZ(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&IE("Signal encode and update are mutually exclusive."),a="encode(item(),"+tA(r)+")"),i.update=GS(a)?TJ(a,t):null!=a.expr?TJ(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:UZ,$params:{$value:t.signalRef(a.signal)}}:IE("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(OS(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):PZ(e,t)}}(e,t),i))))}function WZ(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const HZ=e=>(t,n,r)=>kZ(e,n,t||void 0,r),VZ=HZ("aggregate"),GZ=HZ("axisticks"),YZ=HZ("bound"),XZ=HZ("collect"),QZ=HZ("compare"),JZ=HZ("datajoin"),KZ=HZ("encode"),ZZ=HZ("expression"),e0=HZ("facet"),t0=HZ("field"),n0=HZ("key"),r0=HZ("legendentries"),i0=HZ("load"),o0=HZ("mark"),a0=HZ("multiextent"),s0=HZ("multivalues"),u0=HZ("overlap"),l0=HZ("params"),c0=HZ("prefacet"),f0=HZ("projection"),d0=HZ("proxy"),h0=HZ("relay"),p0=HZ("render"),m0=HZ("scale"),g0=HZ("sieve"),y0=HZ("sortitems"),v0=HZ("viewlayout"),b0=HZ("values");let x0=0;const w0={min:"min",max:"max",count:"sum"};function _0(e,t){const n=t.getScale(e.name).params;let r;var i;for(r in n.domain=A0(e.domain,e,t),null!=e.range&&(n.range=T0(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=k0(e.type||e),null!=e.gamma&&(t.interpolateGamma=k0(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=KE(i=e.nice)?{interval:k0(i.interval),step:k0(i.step)}:k0(i)),null!=e.bins&&(n.bins=function(e,t){return e.signal||JE(e)?E0(e,t):t.objectProperty(e)}(e.bins,t)),e)RS(n,r)||"name"===r||(n[r]=k0(e[r],t))}function k0(e,t){return KE(e)?e.signal?t.signalRef(e.signal):IE("Unsupported object: "+tA(e)):e}function E0(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>k0(e,t)))}function S0(e){IE("Can not find data set: "+tA(e))}function A0(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(JE(e)?C0:e.fields?M0:D0)(e,t,n);null==t.domainMin&&null==t.domainMax||IE("No scale domain defined for domainMin/domainMax to override.")}function C0(e,t,n){return e.map((e=>k0(e,n)))}function D0(e,t,n){const r=n.getData(e.data);return r||S0(e.data),kT(t.type)?r.valuesRef(n,e.field,N0(e.sort,!1)):CT(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function M0(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=GS(t)?{data:r,field:t}:JE(t)||t.signal?function(e,t){const n="_:vega:_"+x0++,r=XZ({});if(JE(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+tA(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,g0({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(kT(t.type)?F0:CT(t.type)?O0:$0)(e,n,i)}function F0(e,t,n){const r=N0(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||S0(e.data),n.countsRef(t,e.field,r)})),s={groupby:CZ,pulse:a};r&&(i=r.op||"count",o=r.field?MZ(i,r.field):"count",s.ops=[w0[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(VZ(s));const u=t.add(XZ({pulse:SZ(i)}));return o=t.add(b0({field:CZ,sort:t.sortRef(r),pulse:SZ(u)})),SZ(o)}function N0(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!w0[e.op]&&IE("Multiple domain scales can not be sorted using "+e.op):IE("No field provided for sort aggregate op: "+e.op):KE(e)?e.field="key":e={field:"key"}),e}function O0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||S0(e.data),n.domainRef(t,e.field)}));return SZ(t.add(s0({values:r})))}function $0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||S0(e.data),n.extentRef(t,e.field)}));return SZ(t.add(a0({extents:r})))}function T0(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(GS(i)){if(r&&RS(r,i))return T0(e=OS({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=kT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:IE("Unrecognized scale range value: "+tA(i))}else{if(i.scheme)return n.scheme=JE(i.scheme)?E0(i.scheme,t):k0(i.scheme,t),i.extent&&(n.schemeExtent=E0(i.extent,t)),void(i.count&&(n.schemeCount=k0(i.count,t)));if(i.step)return void(n.rangeStep=k0(i.step,t));if(kT(e.type)&&!JE(i))return A0(i,e,t);JE(i)||IE("Unsupported range type: "+tA(i))}return i.map((e=>(JE(e)?E0:k0)(e,t)))}function z0(e,t,n){return JE(e)?e.map((e=>z0(e,t,n))):KE(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:IE("Unsupported parameter object: "+tA(e)):e}const R0="top",P0="left",L0="right",B0="bottom",I0="center",j0="index",U0="label",q0="perc",W0="value",H0="guide-label",V0="guide-title",G0="group-title",Y0="group-subtitle",X0="symbol",Q0="gradient",J0="discrete",K0="size",Z0=[K0,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],e1={name:1,style:1,interactive:1},t1={value:0},n1={value:1},r1="group",i1="rect",o1="rule",a1="text";function s1(e){return e.type=r1,e.interactive=e.interactive||!1,e}function u1(e,t){const n=(n,r)=>TZ(e[n],TZ(t[n],r));return n.isVertical=n=>"vertical"===TZ(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>TZ(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>TZ(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>TZ(e.columns,TZ(t.columns,+n.isVertical(!0))),n}function l1(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function c1(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}const f1=c1(tA(P0),tA(L0),tA(I0));function d1(e,t){return t?e?KE(e)?Object.assign({},e,{offset:d1(e.offset,t)}):{value:e,offset:t}:t:e}function h1(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=tZ(e.encode,t,e1)):e.interactive=!1,e}function p1(e,t,n,r){const i=u1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:t1,x:t1,y:t1,width:KK(f),height:KK(d)},update:OS({},u,{opacity:n1,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:t1}};return eZ(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),h1({type:i1,role:"legend-gradient",encode:h},r)}function m1(e,t,n,r,i){const o=u1(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:t1,fill:{scale:t,field:W0}};p[l]={signal:h+"datum."+q0,mult:u},p[c]=t1,p[f]={signal:h+"datum.perc2",mult:u},p[d]=KK(s);const m={enter:p,update:OS({},p,{opacity:n1}),exit:{opacity:t1}};return eZ(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),h1({type:i1,role:"legend-band",key:W0,from:i,encode:m},r)}const g1="datum.".concat(q0,'<=0?"').concat(P0,'":datum.').concat(q0,'>=1?"').concat(L0,'":"').concat(I0,'"'),y1="datum.".concat(q0,'<=0?"').concat(B0,'":datum.').concat(q0,'>=1?"').concat(R0,'":"').concat("middle",'"');function v1(e,t,n,r){const i=u1(e,t),o=i.isVertical(),a=KK(i.gradientThickness()),s=i.gradientLength();let u,l,c,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:t1},update:l={opacity:n1,text:{field:U0}},exit:{opacity:t1}};return eZ(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:TZ(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=l.baseline={signal:y1},c="y",f="x",h="1-"):(u.align=l.align={signal:g1},u.baseline={value:"top"},c="x",f="y"),u[c]=l[c]={signal:h+"datum."+q0,mult:s},u[f]=l[f]=a,a.offset=TZ(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum.index"}:void 0,h1({type:a1,role:aZ,style:H0,key:W0,from:r,encode:p,overlap:d},n)}function b1(e,t,n,r,i){const o=u1(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(K0),h=l?KK(l):{field:K0},p="datum.".concat(j0),m="max(1, ".concat(i,")");let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:t1,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:n1,x:y.x,y:y.y},exit:{opacity:t1}};let w=null,_=null;e.fill||(w=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),eZ(g,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Z0.forEach((t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:W0})}));const k=h1({type:"symbol",role:"legend-symbol",key:W0,from:f,clip:!!l||void 0,encode:g},n.symbols),E=KK(c);E.offset=o("labelOffset"),g={enter:y={opacity:t1,x:{signal:d,offset:E},y:h},update:v={opacity:n1,text:{field:U0},x:y.x,y:y.y},exit:{opacity:t1}},eZ(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=h1({type:a1,role:aZ,style:H0,key:W0,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:t1,height:l?KK(l):t1,opacity:t1},exit:{opacity:t1},update:v={opacity:n1,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),x={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),s1({role:oZ,from:r={facet:{data:r,name:"value",groupby:j0}},encode:tZ(g,a,e1),marks:[k,S],name:u,interactive:s,sort:x})}const x1='item.orient === "left"',w1='item.orient === "right"',_1="(".concat(x1," || ").concat(w1,")"),k1="datum.vgrad && ".concat(_1),E1=c1('"top"','"bottom"','"middle"'),S1=c1('"right"','"left"','"center"'),A1="datum.vgrad && ".concat(w1," ? (").concat(S1,") : (").concat(_1," && !(datum.vgrad && ").concat(x1,')) ? "left" : ').concat(f1),C1="item._anchor || (".concat(_1,' ? "middle" : "start")'),D1="".concat(k1," ? (").concat(x1," ? -90 : 90) : 0"),M1="".concat(_1," ? (datum.vgrad ? (").concat(w1,' ? "bottom" : "top") : ').concat(E1,') : "top"');function F1(e,t){let n;return KE(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+N1(e.path)+")":e.sphere&&(n="geoShape("+N1(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function N1(e){return KE(e)&&e.signal?e.signal:tA(e)}function O1(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===r1?oZ:t||rZ:t}function $1(e){return{marktype:e.type,name:e.name||void 0,role:e.role||O1(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function T1(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function z1(e,t){const n=nF(e.type);n||IE("Unrecognized transform type: "+tA(e.type));const r=kZ(n.type.toLowerCase(),null,R1(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function R1(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=P1(i,t,n)}return r}function P1(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){GS(t.from)||IE('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(JE(r)||IE("Expected an array of sub-parameters. Instead: "+tA(r)),r.map((t=>B1(e,t,n)))):B1(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!OZ(i)?i.map((t=>L1(e,t,n))):L1(e,i,n):void(e.required&&IE("Missing required "+tA(t.type)+" parameter: "+tA(e.name)))}function L1(e,t,n){const r=e.type;if(OZ(t))return q1(r)?IE("Expression references can not be signals."):W1(r)?n.fieldRef(t):H1(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||W1(r);return i&&I1(t)?n.exprRef(t.expr,t.as):i&&j1(t)?AZ(t.field,t.as):q1(r)?TJ(t,n):U1(r)?SZ(n.getData(t).values):W1(r)?AZ(t):H1(r)?n.compareRef(t):t}}function B1(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||IE("Unsupported parameter: "+tA(t));const o=OS(R1(i,t,n),i.key);return SZ(n.add(l0(o)))}const I1=e=>e&&e.expr,j1=e=>e&&e.field,U1=e=>"data"===e,q1=e=>"expr"===e,W1=e=>"field"===e,H1=e=>"compare"===e;function V1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:SZ(t.getData(e.data).output)}function G1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Y1(e){return GS(e)?e:null}function X1(e,t,n){const r=MZ(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Q1(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=function(e){return KE(e)?("descending"===e.order?"-":"+")+MZ(e.op,e.field):""}(o);let l,c,f=Y1(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",l=s[f]),!l){const n=o?{field:CZ,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:SZ(t.output)};u&&(n.sort=e.sortRef(o)),c=e.add(kZ(r,void 0,n)),a&&(t.index[i]=c),l=SZ(c),null!=f&&(s[f]=l)}return l}function J1(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(EZ()),l=TJ("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map((e=>null==e?"null":e)).join(",")+"),0)",t);u.update=l.$expr,u.params=l.$params}function K1(e,t){const n=O1(e),r=e.type===r1,i=e.from&&e.from.facet,o=e.overlap;let a,s,u,l,c,f,d,h=e.layout||n===oZ||n===iZ;const p=n===rZ||h||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||IE("Only group marks can be faceted."),null!=r.field?a=s=V1(r,n):(e.data?s=SZ(n.getData(e.data).aggregate):(o=z1(OS({type:"aggregate",groupby:_S(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=V1(r,n),a=s=SZ(n.add(o))),i=n.keyRef(r.groupby,!0))):a=SZ(n.add(XZ(null,[{}]))),a||(a=V1(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(JZ({key:m.key||(e.key?AZ(e.key):void 0),pulse:m.pulse,clean:!r}));const g=SZ(s);s=u=t.add(XZ({pulse:g})),s=t.add(o0({markdef:$1(e),interactive:T1(e.interactive,t),clip:F1(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:SZ(s)}));const y=SZ(s);s=l=t.add(KZ(gZ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=z1(e,t),r=n.metadata;(r.generates||r.changes)&&IE("Mark transforms should not generate new data."),r.nomod||(l.params.mod=!0),n.params.pulse=SZ(s),t.add(s=n)})),e.sort&&(s=t.add(y0({sort:t.compareRef(e.sort),pulse:SZ(s)})));const v=SZ(s);(i||h)&&(h=t.add(v0({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=SZ(h));const b=t.add(YZ({mark:y,pulse:f||v}));d=SZ(b),r&&(p&&(a=t.operators,a.pop(),h&&a.pop()),t.pushState(v,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=V1(r,t);let a;r.name||IE("Facet must have a name: "+tA(r)),r.data||IE("Facet must reference a data set: "+tA(r)),r.field?a=t.add(c0({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(e0({key:t.keyRef(r.groupby),group:SZ(t.proxy(n.parent)),pulse:o})):IE("Facet must specify groupby or field: "+tA(r));const s=t.fork(),u=s.add(XZ()),l=s.add(g0({pulse:SZ(u)}));s.addData(i,new G1(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(c0({pulse:n.pulse})),i=t.fork();i.add(g0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&a.push(h),a.push(b))),o&&(d=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:OZ(o)?n.signalRef(o.signal):o,method:OZ(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=OZ(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return SZ(n.add(u0(a)))}(o,d,t));const x=t.add(p0({pulse:d})),w=t.add(g0({pulse:SZ(x)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new G1(t,u,x,w)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&IE("Marks only support modify triggers."),J1(e,t,c)})))}function Z1(e,t){const n=t.config.legend,r=e.encode||{},i=u1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c,f,d,h=0;Z0.forEach((t=>e[t]?(l[t]=e[t],h=h||e[t]):0)),h||IE("Missing valid scale for legend.");const p=function(e,t){let n=e.type||X0;e.type||1!==function(e){return Z0.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=_T(t)?Q0:ET(t)?J0:X0);return n!==Q0?n:ET(t)?J0:Q0}(e,t.scaleType(h)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=SZ(t.add(XZ(null,[m]))),y=SZ(t.add(r0(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===Q0?(d=[p1(e,h,n,r.gradient),v1(e,n,r.labels,y)],f.count=f.count||t.signalRef("max(2,2*floor((".concat(zZ(i.gradientLength()),")/100))"))):p===J0?d=[m1(e,h,n,r.gradient,y),v1(e,n,r.labels,y)]:(c=function(e,t){const n=u1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[b1(e,n,r,y,zZ(c.columns))],f.size=function(e,t,n){const r=zZ(t2("size",e,n)),i=zZ(t2("strokeWidth",e,n)),o=zZ(function(e,t,n){return l1("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,H0));return TJ("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),t)}(e,t,d[0].marks)),d=[s1({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=u1(e,t),o={enter:{opacity:t1},update:{opacity:n1,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:t1}};return eZ(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:C1},angle:{signal:D1},align:{signal:A1},baseline:{signal:M1},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),h1({type:a1,role:"legend-title",style:V0,from:r,encode:o},n)}(e,n,r.title,g)),K1(s1({role:"legend",from:g,encode:tZ(e2(i,e,n),o,e1),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function e2(e,t,n){const r={enter:{},update:{}};return eZ(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function t2(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):l1(e,n[0].encode)}G1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=SZ(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new G1(e,o,i,r,a)},G1.prototype={countsRef:function(e,t,n){const r=this,i=r.counts||(r.counts={}),o=Y1(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&X1(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:SZ(r.output)},n&&n.field&&X1(e,u,n),s=e.add(VZ(u)),a=e.add(XZ({pulse:SZ(s)})),a={agg:s,ref:SZ(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef:function(){return SZ(this.values)},extentRef:function(e,t){return Q1(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return Q1(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return Q1(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return Q1(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return Q1(e,this,"indata","tupleindex",t,!0,!0)}};const n2='item.orient==="'.concat(P0,'"?-90:item.orient==="').concat(L0,'"?90:0');function r2(e,t){const n=u1(e=GS(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l=SZ(t.add(XZ(null,[{}])));return u.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return eZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),h1({type:a1,role:sZ,style:G0,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||OS({name:e.name,interactive:e.interactive,style:e.style},t)}(e),l)),e.subtitle&&u.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return eZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),h1({type:a1,role:uZ,style:Y0,from:r,encode:a},n)}(e,n,r.subtitle,l)),K1(s1({role:"title",from:l,encode:i2(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function i2(e,t){const n={enter:{},update:{}};return eZ(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:f1},angle:{signal:n2},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),tZ(n,t,e1)}function o2(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(z1(e,t))})),e.on&&e.on.forEach((n=>{J1(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,u,l=null,c=!1,f=!1;e.values?OZ(e.values)||$Z(e.format)?(r.push(s2(t,e)),r.push(l=a2())):r.push(l=a2({$ingest:e.values,$format:e.format})):e.url?$Z(e.url)||$Z(e.format)?(r.push(s2(t,e)),r.push(l=a2())):r.push(l=a2({$request:e.url,$format:e.format})):e.source&&(l=i=_S(e.source).map((e=>SZ(t.getData(e).output))),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,l||u.source||r.push(l=a2()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=s:u.changes&&(l=null);i&&(a=i.length-1,r[0]=h0({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,a2()));l||r.push(a2());return r.push(g0({})),r}(e,t,n))}function a2(e){const t=XZ({},e);return t.metadata={source:!0},t}function s2(e,t){return i0({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const u2=e=>e===B0||e===R0,l2=(e,t,n)=>OZ(e)?m2(e.signal,t,n):e===P0||e===R0?t:n,c2=(e,t,n)=>OZ(e)?h2(e.signal,t,n):u2(e)?t:n,f2=(e,t,n)=>OZ(e)?p2(e.signal,t,n):u2(e)?n:t,d2=(e,t,n)=>OZ(e)?g2(e.signal,t,n):e===R0?{value:t}:{value:n},h2=(e,t,n)=>v2("".concat(e," === '").concat(R0,"' || ").concat(e," === '").concat(B0,"'"),t,n),p2=(e,t,n)=>v2("".concat(e," !== '").concat(R0,"' && ").concat(e," !== '").concat(B0,"'"),t,n),m2=(e,t,n)=>x2("".concat(e," === '").concat(P0,"' || ").concat(e," === '").concat(R0,"'"),t,n),g2=(e,t,n)=>x2("".concat(e," === '").concat(R0,"'"),t,n),y2=(e,t,n)=>x2("".concat(e," === '").concat(L0,"'"),t,n),v2=(e,t,n)=>(t=null!=t?KK(t):t,n=null!=n?KK(n):n,b2(t)&&b2(n)?(t=t?t.signal||tA(t.value):null,n=n?n.signal||tA(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[OS({test:e},t)].concat(n||[])),b2=e=>null==e||1===Object.keys(e).length,x2=(e,t,n)=>({signal:"".concat(e," ? (").concat(w2(t),") : (").concat(w2(n),")")}),w2=e=>OZ(e)?e.signal:null==e?null:tA(e),_2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function k2(e,t,n,r){let i;if(t&&RS(t,e))return t[e];if(RS(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][i]}return null}function E2(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function S2(e,t){return{scale:e.scale,range:t}}function A2(e,t,n,r,i){const o=u1(e,t),a=e.orient,s=e.gridScale,u=l2(a,1,-1),l=function(e,t){if(1===t);else if(KE(e)){let n=e=OS({},e);for(;null!=n.mult;){if(!KE(n.mult))return n.mult=OZ(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=OS({},n.mult)}n.mult=t}else e=OZ(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,u);let c,f,d;const h={enter:c={opacity:t1},update:d={opacity:n1},exit:f={opacity:t1}};eZ(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:W0,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=c2(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:OS(m,{mult:u,offset:l});return c.x=d.x=c2(a,p,g),c.y=d.y=f2(a,p,g),c.x2=d.x2=f2(a,y),c.y2=d.y2=c2(a,y),f.x=c2(a,p),f.y=f2(a,p),h1({type:o1,role:"axis-grid",key:W0,from:r,encode:h},n)}function C2(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function D2(e,t,n,r,i,o){const a=u1(e,t),s=e.orient,u=e.scale,l=l2(s,-1,1),c=zZ(a("labelFlush")),f=zZ(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,m=0===c||!!c;const g=KK(i);g.mult=l,g.offset=KK(a("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:W0,band:.5,offset:d1(o.offset,a("labelOffset"))},v=c2(s,m?C2(u,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>OZ(e)?y2(e.signal,t,n):e===L0?{value:t}:{value:n})(s,"left","right")),b=c2(s,d2(s,"bottom","top"),m?C2(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=C2(u,c,"-(".concat(f,")"),f,0);m=m&&f;const w={opacity:t1,x:c2(s,y,g),y:f2(s,y,g)},_={enter:w,update:p={opacity:n1,text:{field:U0},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:t1,x:w.x,y:w.y}};eZ(_,{dx:!d&&m?c2(s,x):null,dy:!h&&m?f2(s,x):null}),eZ(_,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let E=a("labelOverlap");return E=E||k?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:u,orient:s,tolerance:k}:null}:void 0,p.align!==v&&(p.align=_2(p.align,v)),p.baseline!==b&&(p.baseline=_2(p.baseline,b)),h1({type:a1,role:"axis-label",style:H0,key:W0,from:r,encode:_,overlap:E},n)}function M2(e,t,n,r){const i=u1(e,t),o=e.orient,a=l2(o,-1,1);let s,u;const l={enter:s={opacity:t1,anchor:KK(i("titleAnchor",null)),align:{signal:f1}},update:u=OS({},s,{opacity:n1,text:KK(e.title)}),exit:{opacity:t1}},c={signal:'lerp(range("'.concat(e.scale,'"), ').concat(c1(0,1,.5),")")};return u.x=c2(o,c),u.y=f2(o,c),s.angle=c2(o,t1,((e,t)=>0===t?0:OZ(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t})(a,90)),s.baseline=c2(o,d2(o,B0,R0),{value:B0}),u.angle=s.angle,u.baseline=s.baseline,eZ(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=_2(KK(e),n.update[t]),!1):!nZ(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?KK(a):c2(t,KK(a),KK(o))}(i,o,l,n),l.update.align=_2(l.update.align,s.align),l.update.angle=_2(l.update.angle,s.angle),l.update.baseline=_2(l.update.baseline,s.baseline),h1({type:a1,role:"axis-title",style:V0,from:r,encode:l},n)}function F2(e,t){const n=function(e,t){var n,r,i,o,a,s,u,l,c=t.config,f=c.style,d=c.axis,h="band"===t.scaleType(e.scale)&&c.axisBand,p=e.orient;if(OZ(p)){const e=E2([c.axisX,c.axisY]),t=E2([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},e))n[i]=c2(p,k2(i,c.axisX,d,f),k2(i,c.axisY,d,f));for(i of(r={},t))r[i]=(o=p.signal,a=k2(i,c.axisTop,d,f),s=k2(i,c.axisBottom,d,f),u=k2(i,c.axisLeft,d,f),l=k2(i,c.axisRight,d,f),{signal:(null!=u?"".concat(o," === '").concat(P0,"' ? (").concat(w2(u),") : "):"")+(null!=s?"".concat(o," === '").concat(B0,"' ? (").concat(w2(s),") : "):"")+(null!=l?"".concat(o," === '").concat(L0,"' ? (").concat(w2(l),") : "):"")+(null!=a?"".concat(o," === '").concat(R0,"' ? (").concat(w2(a),") : "):"")+"(null)"})}else n=p===R0||p===B0?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?OS({},d,n,r,h):d}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=u1(e,n),l=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:"(".concat(t.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(t.signal,") === 'extent'")},KE(i)||(i={signal:"(".concat(t.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=SZ(t.add(XZ({},[c]))),d=SZ(t.add(GZ({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(A2(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(function(e,t,n,r,i,o){const a=u1(e,t),s=e.orient,u=l2(s,-1,1);let l,c,f;const d={enter:l={opacity:t1},update:f={opacity:n1},exit:c={opacity:t1}};eZ(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=KK(i);h.mult=u;const p={scale:e.scale,field:W0,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=c2(s,t1,p),f.y2=l.y2=c2(s,h),c.x=c2(s,p),f.x=l.x=f2(s,t1,p),f.x2=l.x2=f2(s,h),c.y=f2(s,p),h1({type:o1,role:"axis-tick",key:W0,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(D2(e,n,r.labels,d,p,l))),c.domain&&h.push(function(e,t,n,r){const i=u1(e,t),o=e.orient;let a,s;const u={enter:a={opacity:t1},update:s={opacity:n1},exit:{opacity:t1}};eZ(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=S2(e,0),c=S2(e,1);return a.x=s.x=c2(o,l,t1),a.x2=s.x2=c2(o,c),a.y=s.y=f2(o,l,t1),a.y2=s.y2=f2(o,c),h1({type:o1,role:"axis-domain",from:r,encode:u},n)}(e,n,r.domain,f)),c.title&&h.push(M2(e,n,r.title,f)),K1(s1({role:"axis",from:f,encode:tZ(N2(u,e),i,e1),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function N2(e,t){const n={enter:{},update:{}};return eZ(n,{orient:e("orient"),offset:e("offset")||0,position:TZ(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function O2(e,t,n){const r=_S(e.signals),i=_S(e.scales);return n||r.forEach((e=>wZ(e,t))),_S(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=z0(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=z0(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";xT(n)||IE("Unrecognized scale type: "+tA(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),_S(e.data).forEach((e=>o2(e,t))),i.forEach((e=>_0(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?IE("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=TJ(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>qZ(e,t,n.id)))}(e,t))),_S(e.axes).forEach((e=>F2(e,t))),_S(e.marks).forEach((e=>K1(e,t))),_S(e.legends).forEach((e=>Z1(e,t))),e.title&&r2(e.title,t),t.parseLambdas(),t}function $2(e,t){const n=t.config,r=SZ(t.root=t.add(EZ())),i=function(e,t){const n=n=>TZ(e[n],t[n]),r=[T2("background",n("background")),T2("autosize",XK(n("autosize"))),T2("padding",JK(n("padding"))),T2("width",n("width")||0),T2("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),o={};return _S(e.signals).forEach((e=>{RS(i,e.name)?e=OS(i[e.name],e):r.push(e),o[e.name]=e})),_S(t.signals).forEach((e=>{RS(o,e.name)||RS(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>wZ(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(XZ()),a=t.add(KZ(gZ((e=>tZ({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),r1,iZ,e.style,t,{pulse:SZ(o)}))),s=t.add(v0({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:SZ(a)}));t.operators.pop(),t.pushState(SZ(a),SZ(s),null),O2(e,t,i),t.operators.push(s);let u=t.add(YZ({mark:r,pulse:SZ(s)}));return u=t.add(p0({pulse:SZ(u)})),u=t.add(g0({pulse:SZ(u)})),t.addData("root",new G1(t,o,o,u)),t}function T2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function z2(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function R2(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function P2(e){return(JE(e)?L2:B2)(e)}function L2(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(KE(t)?t.signal||P2(t):tA(t))}return n+"]"}function B2(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+tA(t)+":"+(KE(n)?n.signal||P2(n):tA(n));return r+"}"}function I2(e,t,n){return KE(e)||IE("Input Vega specification must be an object."),$2(e,new z2(t=eS(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}z2.prototype=R2.prototype={parse:function(e){return O2(e,this)},fork:function(){return new R2(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy:function(e){const t=e instanceof _Z?SZ(e):e;return this.add(d0({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState:function(e,t,n){this._encode.push(SZ(this.add(g0({pulse:e})))),this._parent.push(t),this._lookup.push(n?SZ(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return rS(this._parent)},encode:function(){return rS(this._encode)},lookup:function(){return rS(this._lookup)},markpath:function(){const e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(GS(e))return AZ(e,t);e.signal||IE("Unsupported field reference: "+tA(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=SZ(this.add(t0(e)))}return r},compareRef:function(e){let t=!1;const n=e=>OZ(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=_S(e.field).map(n),i=_S(e.order).map(n);return t?SZ(this.add(QZ({fields:r,orders:i}))):DZ(r,i)},keyRef:function(e,t){let n=!1;const r=this.signals;return e=_S(e).map((e=>OZ(e)?(n=!0,SZ(r[e.signal])):e)),n?SZ(this.add(n0({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;const t=MZ(e.op,e.field),n=e.order||"ascending";return n.signal?SZ(this.add(QZ({fields:t,orders:this.signalRef(n.signal)}))):DZ(t,n)},event:function(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return RS(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&IE("Duplicate signal name: "+tA(e));const n=t instanceof _Z?t:this.add(EZ(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||IE("Unrecognized signal name: "+tA(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?SZ(this.signals[e]):(RS(this.lambdas,e)||(this.lambdas[e]=this.add(EZ(null))),SZ(this.lambdas[e]))},parseLambdas:function(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=TJ(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&KE(e)?this.signalRef(e.signal||P2(e)):e},exprRef:function(e,t){const n={expr:TJ(e,this)};return t&&(n.expr.$name=t),SZ(this.add(ZZ(n)))},addBinding:function(e,t){this.bindings||IE("Nested signals do not support binding: "+tA(e)),this.bindings.push(OS({signal:e},t))},addScaleProj:function(e,t){RS(this.scales,e)&&IE("Duplicate scale or projection name: "+tA(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,m0(t))},addProjection:function(e,t){this.addScaleProj(e,f0(t))},getScale:function(e){return this.scales[e]||IE("Unrecognized scale name: "+tA(e)),this.scales[e]},scaleRef:function(e){return SZ(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return RS(this.data,e)&&IE("Duplicate data set name: "+tA(e)),this.data[e]=t},getData:function(e){return this.data[e]||IE("Undefined data set name: "+tA(e)),this.data[e]},addDataPipeline:function(e,t){return RS(this.data,e)&&IE("Duplicate data set name: "+tA(e)),this.addData(e,G1.fromEntries(this,t))}},t(OE,"tupleid",(function(){return wM})),t(OE,"transforms",(function(){return tF})),t(OE,"transform",(function(){return rF})),t(OE,"isTuple",(function(){return xM})),t(OE,"ingest",(function(){return kM})),t(OE,"definition",(function(){return nF})),t(OE,"changeset",(function(){return MM})),t(OE,"Transform",(function(){return eF})),t(OE,"Pulse",(function(){return qM})),t(OE,"Parameters",(function(){return NM})),t(OE,"Operator",(function(){return TM})),t(OE,"MultiPulse",(function(){return GM})),t(OE,"EventStream",(function(){return PM})),t(OE,"Dataflow",(function(){return KM})),t(OE,"scheme",(function(){return PT})),t(OE,"scale",(function(){return bT})),t(OE,"quantizeInterpolator",(function(){return NT})),t(OE,"interpolateRange",(function(){return MT})),t(OE,"interpolateColors",(function(){return FT})),t(OE,"interpolate",(function(){return $T})),t(OE,"projection",(function(){return OH})),t(OE,"View",(function(){return TK})),t(OE,"timeFormatLocale",(function(){return lM})),t(OE,"resetDefaultLocale",(function(){return hM})),t(OE,"locale",(function(){return fM})),t(OE,"formatLocale",(function(){return iM})),t(OE,"defaultLocale",(function(){return dM})),t(OE,"expressionFunction",(function(){return $J})),t(OE,"parse",(function(){return I2})),t(OE,"runtimeContext",(function(){return qJ})),t(OE,"parseExpression",(function(){return LQ})),t(OE,"codegenExpression",(function(){return jQ})),t(OE,"parseSelector",(function(){return HK}));var j2="5.20.2";OS(tF,iF,AO,HI,_j,cV,eY,IV,wY,AY,KY,fX);const U2=j2;t(OE,"version",(function(){return U2}));var q2={},W2=e(JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.1.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && del-cli \'site/data/*\' \'examples/compiled/*.png\' && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"del-cli \'build/*\' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.15","@babel/preset-env":"^7.13.15","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.1","@types/chai":"^4.2.16","@types/d3":"^6.3.0","@types/jest":"^26.0.22","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0","ajv":"^8.1.0","ajv-formats":"^2.0.2","chai":"^4.3.4","cheerio":"^1.0.0-rc.6","conventional-changelog-cli":"^2.1.1","d3":"^6.7.0","del-cli":"^3.0.1","eslint":"^7.24.0","eslint-config-prettier":"^8.2.0","eslint-plugin-jest":"^24.3.5","eslint-plugin-prettier":"^3.4.0","gh-pages":"^3.1.0","highlight.js":"^10.7.2","jest":"^26.6.3","jest-dev-server":"^5.0.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^8.0.0","rollup":"^2.45.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.1","ts-json-schema-generator":"^0.90.0","typescript":"~4.2.4","vega-cli":"^5.20.2","vega-datasets":"~2.2.0","vega-embed":"^6.17.0","vega-tooltip":"^0.25.1","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.2.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.1","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.20.0"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')),H2={};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var V2={},G2=jA,Y2=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var f=[],d=[],h=void 0!==G2;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,p){if(null===u)return null;if(0===p)return u;var m,g;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(u))m=[];else if(i.__isRegExp(u))m=new RegExp(u.source,a(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(i.__isDate(u))m=new Date(u.getTime());else{if(h&&G2.isBuffer(u))return m=G2.allocUnsafe?G2.allocUnsafe(u.length):new G2(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var y=f.indexOf(u);if(-1!=y)return d[y];f.push(u),d.push(m)}for(var v in e(u,t)&&u.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,p-1);m.add(t)})),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=o(u[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(v=0;v<x.length;v++){var w=x[v];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||c)&&(m[w]=o(u[w],p-1),k.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(u);for(v=0;v<_.length;v++){var k,E=_[v];(k=Object.getOwnPropertyDescriptor(u,E))&&k.enumerable||(m[E]=o(u[E],p-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();V2&&(V2=Y2);var X2=e(V2),Q2=e((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n})),J2=e((function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}));function K2(e){return!!e.or}function Z2(e){return!!e.and}function e3(e){return!!e.not}function t3(e,t){if(e3(e))t3(e.not,t);else if(Z2(e))for(const n of e.and)t3(n,t);else if(K2(e))for(const n of e.or)t3(n,t);else t(e)}function n3(e,t){return e3(e)?{not:n3(e.not,t)}:Z2(e)?{and:e.and.map((e=>n3(e,t)))}:K2(e)?{or:e.or.map((e=>n3(e,t)))}:t(e)}const r3=Q2;t(H2,"deepEqual",(function(){return r3}));const i3=X2;function o3(e,t){const n={};for(const r of t)RS(e,r)&&(n[r]=e[r]);return n}function a3(e,t){const n={...e};for(const e of t)delete n[e];return n}t(H2,"duplicate",(function(){return i3})),t(H2,"pick",(function(){return o3})),t(H2,"omit",(function(){return a3})),Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>J2(e))).join(",")})`};const s3=J2;function u3(e){if(HS(e))return e;const t=GS(e)?e:J2(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function l3(e){return!1===e||null===e}function c3(e,t){return e.includes(t)}function f3(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function d3(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function h3(e,...t){for(const n of t)p3(e,n??{});return e}function p3(e,t){for(const n of _3(t))tS(e,n,t[n],!0)}function m3(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function g3(e,t){const n=_3(e),r=_3(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function y3(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function v3(e,t){for(const n of e)if(t.has(n))return!0;return!1}function b3(e){const t=new Set;for(const n of e){const e=jE(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function x3(e,t){return void 0===e||void 0===t||v3(b3(e),b3(t))}function w3(e){return 0===_3(e).length}t(H2,"stringify",(function(){return s3})),t(H2,"hash",(function(){return u3})),t(H2,"isNullOrFalse",(function(){return l3})),t(H2,"contains",(function(){return c3})),t(H2,"some",(function(){return f3})),t(H2,"every",(function(){return d3})),t(H2,"mergeDeep",(function(){return h3})),t(H2,"unique",(function(){return m3})),t(H2,"isEqual",(function(){return g3})),t(H2,"setEqual",(function(){return y3})),t(H2,"hasIntersection",(function(){return v3})),t(H2,"prefixGenerator",(function(){return b3})),t(H2,"fieldIntersection",(function(){return x3})),t(H2,"isEmpty",(function(){return w3}));const _3=Object.keys;t(H2,"keys",(function(){return _3}));const k3=Object.values;t(H2,"vals",(function(){return k3}));const E3=Object.entries;function S3(e){return!0===e||!1===e}function A3(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function C3(e,t){return e3(e)?`!(${C3(e.not,t)})`:Z2(e)?`(${e.and.map((e=>C3(e,t))).join(") && (")})`:K2(e)?`(${e.or.map((e=>C3(e,t))).join(") || (")})`:t(e)}function D3(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&D3(e[n],t)&&delete e[n],w3(e)}function M3(e){return e.charAt(0).toUpperCase()+e.substr(1)}function F3(e,t="datum"){const n=jE(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(tA).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function N3(e,t="datum"){return`${t}[${tA(jE(e).join("."))}]`}function O3(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function $3(e){return`${jE(e).map(O3).join("\\.")}`}function T3(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function z3(e){return`${jE(e).join(".")}`}function R3(e){return e?jE(e).length:0}function P3(...e){for(const t of e)if(void 0!==t)return t}t(H2,"entries",(function(){return E3})),t(H2,"isBoolean",(function(){return S3})),t(H2,"varName",(function(){return A3})),t(H2,"logicalExpr",(function(){return C3})),t(H2,"deleteNestedProperty",(function(){return D3})),t(H2,"titleCase",(function(){return M3})),t(H2,"accessPathWithDatum",(function(){return F3})),t(H2,"flatAccessWithDatum",(function(){return N3})),t(H2,"replacePathInField",(function(){return $3})),t(H2,"replaceAll",(function(){return T3})),t(H2,"removePathFromField",(function(){return z3})),t(H2,"accessPathDepth",(function(){return R3})),t(H2,"getFirstDefined",(function(){return P3}));let L3=42;function B3(e){const t=++L3;return e?String(e)+t:t}function I3(){L3=42}function j3(e){return U3(e)?e:`__${e}`}function U3(e){return e.startsWith("__")}function q3(e){if(void 0!==e)return(e%360+360)%360}function W3(e){return!!HS(e)||!isNaN(e)&&!isNaN(parseFloat(e))}t(H2,"uniqueId",(function(){return B3})),t(H2,"resetIdCounter",(function(){return I3})),t(H2,"internalField",(function(){return j3})),t(H2,"isInternalField",(function(){return U3})),t(H2,"normalizeAngle",(function(){return q3})),t(H2,"isNumeric",(function(){return W3}));const H3="row",V3="column",G3="facet",Y3="x",X3="y",Q3="x2",J3="y2",K3="radius",Z3="radius2",e5="theta",t5="theta2",n5="latitude",r5="longitude",i5="latitude2",o5="longitude2",a5="color",s5="fill",u5="stroke",l5="shape",c5="size",f5="angle",d5="opacity",h5="fillOpacity",p5="strokeOpacity",m5="strokeWidth",g5="strokeDash",y5="text",v5="order",b5="detail",x5="key",w5="tooltip",_5="href",k5="url",E5="description",S5={theta:1,theta2:1,radius:1,radius2:1};function A5(e){return e in S5}const C5={longitude:1,longitude2:1,latitude:1,latitude2:1};const D5=_3(C5),M5={x:1,y:1,x2:1,y2:1,...S5,...C5,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function F5(e){return e===a5||e===s5||e===u5}const N5={row:1,column:1,facet:1},O5=_3(N5),$5={...M5,...N5},T5=_3($5),{order:z5,detail:R5,tooltip:P5,...L5}=$5,{row:B5,column:I5,facet:j5,...U5}=L5;_3(L5),_3(U5);function q5(e){return!!$5[e]}const W5=[Q3,J3,i5,o5,t5,Z3];function H5(e){return V5(e)!==e}function V5(e){switch(e){case Q3:return Y3;case J3:return X3;case i5:return n5;case o5:return r5;case t5:return e5;case Z3:return K3}return e}function G5(e){if(A5(e))switch(e){case e5:return"startAngle";case t5:return"endAngle";case K3:return"outerRadius";case Z3:return"innerRadius"}return e}function Y5(e){switch(e){case Y3:return Q3;case X3:return J3;case n5:return i5;case r5:return o5;case e5:return t5;case K3:return Z3}}function X5(e){switch(e){case Y3:case Q3:return"width";case X3:case J3:return"height"}}_3(M5);const{x:Q5,y:J5,x2:K5,y2:Z5,latitude:e6,longitude:t6,latitude2:n6,longitude2:r6,theta:i6,theta2:o6,radius:a6,radius2:s6,...u6}=M5,l6=_3(u6),c6={x:1,y:1},f6=_3(c6);function d6(e){return e in c6}const h6={theta:1,radius:1},p6=_3(h6);function m6(e){return"width"===e?Y3:X3}const{text:g6,tooltip:y6,href:v6,url:b6,description:x6,detail:w6,key:_6,order:k6,...E6}=u6,S6=_3(E6);const A6={...c6,...h6,...E6},C6=_3(A6);function D6(e){return!!A6[e]}function M6(e,t){return function(e){switch(e){case a5:case s5:case u5:case E5:case b5:case x5:case w5:case _5:case v5:case d5:case h5:case p5:case m5:case G3:case H3:case V3:return F6;case Y3:case X3:case n5:case r5:return O6;case Q3:case J3:case i5:case o5:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case c5:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case g5:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case l5:return{point:"always",geoshape:"always"};case y5:return{text:"always"};case f5:return{point:"always",square:"always",text:"always"};case k5:return{image:"always"};case e5:case K3:return{text:"always",arc:"always"};case t5:case Z3:return{arc:"always"}}}(e)[t]}const F6={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:N6,...O6}=F6;function $6(e){switch(e){case Y3:case X3:case e5:case K3:case c5:case f5:case m5:case d5:case h5:case p5:case Q3:case J3:case t5:case Z3:return;case G3:case H3:case V3:case l5:case g5:case y5:case w5:case _5:case k5:case E5:return"discrete";case a5:case s5:case u5:return"flexible";case n5:case r5:case i5:case o5:case b5:case x5:case v5:return}}const T6={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},z6={count:1,min:1,max:1};function R6(e){return!!e&&!!e.argmin}function P6(e){return!!e&&!!e.argmax}_3(T6);function L6(e){return GS(e)&&!!T6[e]}const B6=["count","valid","missing","distinct"];function I6(e){return GS(e)&&c3(B6,e)}const j6=["count","sum","distinct","valid","missing"],U6=aA(["mean","average","median","q1","q3","min","max"]);function q6(e){return US(e)&&(e=Pee(e,void 0)),"bin"+_3(e).map((t=>G6(e[t])?A3(`_${t}_${E3(e[t])}`):A3(`_${t}_${e[t]}`))).join("")}function W6(e){return!0===e||V6(e)&&!e.binned}function H6(e){return"binned"===e||V6(e)&&!0===e.binned}function V6(e){return KE(e)}function G6(e){return e?.param}function Y6(e){switch(e){case H3:case V3:case c5:case a5:case s5:case u5:case m5:case d5:case h5:case p5:case l5:return 6;case g5:return 4;default:return 10}}function X6(e){return e&&!!e.expr}function Q6(e){const t=_3(e||{}),n={};for(const r of t)n[r]=a4(e[r]);return n}function J6(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d,...h}=e,p={...h,...o?{fill:o}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{}},g={...a?{subtitleColor:a}:{},...s?{subtitleFont:s}:{},...u?{subtitleFontSize:u}:{},...l?{subtitleFontStyle:l}:{},...c?{subtitleFontWeight:c}:{},...f?{subtitleLineHeight:f}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:p,subtitleMarkConfig:o3(p,["align","baseline","dx","dy","limit"]),nonMark:m,subtitle:g}}function K6(e){return GS(e)||JE(e)&&GS(e[0])}function Z6(e){return e&&!!e.signal}function e4(e){return!!e.step}function t4(e){return!JE(e)&&("field"in e&&"data"in e)}const n4=_3({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),r4={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},i4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function o4(e){const t=JE(e.condition)?e.condition.map(s4):s4(e.condition);return{...a4(e),condition:t}}function a4(e){if(X6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function s4(e){if(X6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function u4(e){if(X6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Z6(e)?e:void 0!==e?{value:e}:void 0}function l4(e){return Z6(e)?e.signal:tA(e.value)}function c4(e){return Z6(e)?e.signal:null==e?null:tA(e)}function f4(e,t,n){for(const r of n){const n=p4(r,t.markDef,t.config);void 0!==n&&(e[r]=u4(n))}return e}function d4(e){return[].concat(e.type,e.style??[])}function h4(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?p4(e,t,n,r):void 0}function p4(e,t,n,{vgChannel:r}={}){return P3(r?m4(e,t,n.style):void 0,m4(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function m4(e,t,n){return g4(e,d4(t),n)}function g4(e,t,n){let r;t=_S(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function y4(e,t){return _S(e).reduce(((e,n)=>(e.field.push(kee(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function v4(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(r3(t,e))return;n.push(e)})),n}function b4(e,t){return r3(e,t)||!t?e:e?[..._S(e),..._S(t)].join(", "):t}function x4(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((K6(n)||Z6(n))&&(K6(r)||Z6(r)))return{explicit:e.explicit,value:b4(n,r)};if(K6(n)||Z6(n))return{explicit:e.explicit,value:n};if(K6(r)||Z6(r))return{explicit:e.explicit,value:r};if(!(K6(n)||Z6(n)||K6(r)||Z6(r)))return{explicit:e.explicit,value:v4(n,r)};throw new Error("It should never reach here")}var w4={},_4={};function k4(e){return`Invalid specification ${s3(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}t(_4,"invalidSpec",(function(){return k4}));function E4(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function S4(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function A4(e){return e?`Dropping "fit-${e}" because spec has discrete ${X5(e)}.`:'Dropping "fit" because spec has discrete size.'}function C4(e){return`Unknown field for ${e}. Cannot calculate view size.`}function D4(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function M4(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function F4(e){return`The "nearest" transform is not supported for ${e} marks.`}function N4(e){return`Selection not supported for ${e} yet.`}function O4(e){return`Cannot find a selection named "${e}".`}t(_4,"FIT_NON_SINGLE",(function(){return'Autosize "fit" only works for single views and layered views.'})),t(_4,"containerSizeNonSingle",(function(){return E4})),t(_4,"containerSizeNotCompatibleWithAutosize",(function(){return S4})),t(_4,"droppingFit",(function(){return A4})),t(_4,"unknownField",(function(){return C4})),t(_4,"cannotProjectOnChannelWithoutField",(function(){return D4})),t(_4,"cannotProjectAggregate",(function(){return M4})),t(_4,"nearestNotSupportForContinuous",(function(){return F4})),t(_4,"selectionNotSupported",(function(){return N4})),t(_4,"selectionNotFound",(function(){return O4}));t(_4,"SCALE_BINDINGS_CONTINUOUS",(function(){return"Scale bindings are currently only supported for scales with unbinned, continuous domains."}));function $4(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function T4(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}t(_4,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return"Legend bindings are only supported for selections over an individual field or encoding channel."})),t(_4,"cannotLookupVariableParameter",(function(){return $4})),t(_4,"noSameUnitLookup",(function(){return T4}));t(_4,"NEEDS_SAME_SELECTION",(function(){return"The same selection must be used to override scale domains in a layered view."}));function z4(e){return`Unknown repeated value "${e}".`}function R4(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}t(_4,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return'Interval selections should be initialized using "x" and/or "y" keys.'})),t(_4,"noSuchRepeatedValue",(function(){return z4})),t(_4,"columnsNotSupportByRowCol",(function(){return R4}));function P4(e){return`Unrecognized parse "${e}".`}function L4(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}t(_4,"CONCAT_CANNOT_SHARE_AXIS",(function(){return"Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."})),t(_4,"unrecognizedParse",(function(){return P4})),t(_4,"differentParse",(function(){return L4}));function B4(e){return`Ignoring an invalid transform: ${s3(e)}.`}t(_4,"ADD_SAME_CHILD_TWICE",(function(){return"Attempt to add the same child twice."})),t(_4,"invalidTransformIgnored",(function(){return B4}));function I4(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function j4(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${s3(t)} is overridden by a child projection ${s3(n)}.`}t(_4,"NO_FIELDS_NEEDS_AS",(function(){return'If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'})),t(_4,"customFormatTypeNotAllowed",(function(){return I4})),t(_4,"projectionOverridden",(function(){return j4}));function U4(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${s3(n)}}.`}function q4(e){return`Invalid field type "${e}".`}function W4(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function H4(e){return`Invalid aggregation operator "${e}".`}function V4(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function G4(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Y4(e){return`Position range does not support relative band size for ${e}.`}function X4(e,t){return`Dropping ${s3(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}t(_4,"REPLACE_ANGLE_WITH_THETA",(function(){return"Arc marks uses theta channel rather than angle, replacing angle with theta."})),t(_4,"primitiveChannelDef",(function(){return U4})),t(_4,"invalidFieldType",(function(){return q4})),t(_4,"invalidFieldTypeForCountAggregate",(function(){return W4})),t(_4,"invalidAggregate",(function(){return H4})),t(_4,"missingFieldType",(function(){return V4})),t(_4,"droppingColor",(function(){return G4})),t(_4,"relativeBandSizeNotSupported",(function(){return Y4})),t(_4,"emptyFieldDef",(function(){return X4}));function Q4(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function J4(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function K4(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Z4(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function e8(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function t8(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function n8(e){return`The ${e} for range marks cannot be an expression`}function r8(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function i8(e,t){return`Specified orient "${e}" overridden with "${t}".`}t(_4,"LINE_WITH_VARYING_SIZE",(function(){return"Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."})),t(_4,"incompatibleChannel",(function(){return Q4})),t(_4,"invalidEncodingChannel",(function(){return J4})),t(_4,"channelShouldBeDiscrete",(function(){return K4})),t(_4,"channelShouldBeDiscreteOrDiscretizing",(function(){return Z4})),t(_4,"facetChannelDropped",(function(){return e8})),t(_4,"discreteChannelCannotEncode",(function(){return t8})),t(_4,"rangeMarkAlignmentCannotBeExpression",(function(){return n8})),t(_4,"lineWithRange",(function(){return r8})),t(_4,"orientOverridden",(function(){return i8}));function o8(e){return`Cannot use the scale property "${e}" with non-color channel.`}function a8(e){return`Cannot use the relative band size with ${e} scale.`}function s8(e){return`Using unaggregated domain with raw field has no effect (${s3(e)}).`}function u8(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function l8(e){return`Unaggregated domain is currently unsupported for log scale (${s3(e)}).`}function c8(e){return`Cannot apply size to non-oriented mark "${e}".`}function f8(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function d8(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function h8(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function p8(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function m8(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function g8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${s3(n)} and ${s3(r)}). Using ${s3(n)}.`}function y8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${s3(n)} and ${s3(r)}). Using the union of the two domains.`}function v8(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function b8(e){return`Dropping sort property ${s3(e)} as unioned domains only support boolean or op "count", "min", and "max".`}t(_4,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return"Custom domain scale cannot be unioned with default field-based domain."})),t(_4,"cannotUseScalePropertyWithNonColor",(function(){return o8})),t(_4,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return a8})),t(_4,"unaggregateDomainHasNoEffectForRawField",(function(){return s8})),t(_4,"unaggregateDomainWithNonSharedDomainOp",(function(){return u8})),t(_4,"unaggregatedDomainWithLogScale",(function(){return l8})),t(_4,"cannotApplySizeToNonOrientedMark",(function(){return c8})),t(_4,"scaleTypeNotWorkWithChannel",(function(){return f8})),t(_4,"scaleTypeNotWorkWithFieldDef",(function(){return d8})),t(_4,"scalePropertyNotWorkWithScaleType",(function(){return h8})),t(_4,"scaleTypeNotWorkWithMark",(function(){return p8})),t(_4,"stepDropped",(function(){return m8})),t(_4,"mergeConflictingProperty",(function(){return g8})),t(_4,"mergeConflictingDomainProperty",(function(){return y8})),t(_4,"independentScaleMeansIndependentGuide",(function(){return v8})),t(_4,"domainSortDropped",(function(){return b8}));t(_4,"MORE_THAN_ONE_SORT",(function(){return"Domains that should be unioned has conflicting sort properties. Sort will be set to true."}));t(_4,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."}));t(_4,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."}));t(_4,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return"Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."}));function x8(e){return`Cannot stack "${e}" if there is already "${e}2".`}function w8(e){return`Cannot stack non-linear scale (${e}).`}function _8(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function k8(e,t){return`Invalid ${e}: ${s3(t)}.`}function E8(e){return`Dropping day from datetime ${s3(e)} as day cannot be combined with other units.`}function S8(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function A8(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function C8(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function D8(e){return`1D error band does not support ${e}.`}function M8(e){return`Channel ${e} is required for "binned" bin.`}function F8(e){return`Channel ${e} should not be used with "binned" bin.`}function N8(e){return`Domain for ${e} is required for threshold scale.`}t(_4,"INVALID_CHANNEL_FOR_AXIS",(function(){return"Invalid channel for axis."})),t(_4,"cannotStackRangedMark",(function(){return x8})),t(_4,"cannotStackNonLinearScale",(function(){return w8})),t(_4,"stackNonSummativeAggregate",(function(){return _8})),t(_4,"invalidTimeUnit",(function(){return k8})),t(_4,"droppedDay",(function(){return E8})),t(_4,"errorBarCenterAndExtentAreNotNeeded",(function(){return S8})),t(_4,"errorBarCenterIsUsedWithWrongExtent",(function(){return A8})),t(_4,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return C8})),t(_4,"errorBand1DNotSupport",(function(){return D8})),t(_4,"channelRequiredForBinned",(function(){return M8})),t(_4,"channelShouldNotBeUsedForBinned",(function(){return F8})),t(_4,"domainRequiredForThresholdScale",(function(){return N8}));t(w4,"message",(function(){return _4}));const O8=QE(2);let $8=O8;function T8(e){return $8=e,$8}function z8(){return $8=O8,$8}function R8(...e){$8.warn(...e)}function P8(...e){$8.debug(...e)}function L8(e){if(e&&KE(e))for(const t of V8)if(t in e)return!0;return!1}new WeakMap,t(w4,"set",(function(){return T8})),t(w4,"reset",(function(){return z8})),t(w4,"warn",(function(){return R8})),t(w4,"debug",(function(){return P8}));const B8=["january","february","march","april","may","june","july","august","september","october","november","december"],I8=B8.map((e=>e.substr(0,3))),j8=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],U8=j8.map((e=>e.substr(0,3)));function q8(e,t){const n=[];if(t&&void 0!==e.day&&_3(e).length>1&&(w4.warn(_4.droppedDay(e)),delete(e=i3(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(W3(e)&&(e=+e),HS(e))return e-1;{const t=e.toLowerCase(),n=B8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=I8.indexOf(r);if(-1!==i)return i;throw new Error(_4.invalidTimeUnit("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(W3(e)&&(e=+e),HS(e))return e>4&&w4.warn(_4.invalidTimeUnit("quarter",e)),e-1;throw new Error(_4.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(HS(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(W3(e)&&(e=+e),HS(e))return e%7;{const t=e.toLowerCase(),n=j8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=U8.indexOf(r);if(-1!==i)return i;throw new Error(_4.invalidTimeUnit("day",e))}}(e.day):e.day;n.push(HS(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function W8(e){const t=q8(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const H8={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},V8=_3(H8);function G8(e){return e.startsWith("utc")}const Y8={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function X8(e){return V8.filter((t=>Q8(e,t)))}function Q8(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function J8(e,t,{end:n}={end:!1}){const r=F3(t),i=G8(e)?"utc":"";let o;const a={};for(const t of V8)Q8(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=q8(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function K8(e){if(!e)return;const t=X8(e);return`timeUnitSpecifier(${s3(t)}, ${s3(Y8)})`}function Z8(e){if(!e)return;let t;return GS(e)?t={unit:e}:KE(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),G8(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function e9(e){return e&&!!e.field&&void 0!==e.equal}function t9(e){return e&&!!e.field&&void 0!==e.lt}function n9(e){return e&&!!e.field&&void 0!==e.lte}function r9(e){return e&&!!e.field&&void 0!==e.gt}function i9(e){return e&&!!e.field&&void 0!==e.gte}function o9(e){if(e&&e.field){if(JE(e.range)&&2===e.range.length)return!0;if(Z6(e.range))return!0}return!1}function a9(e){return e&&!!e.field&&(JE(e.oneOf)||JE(e.in))}function s9(e){return a9(e)||e9(e)||o9(e)||t9(e)||r9(e)||n9(e)||i9(e)}function u9(e,t){return Iee(e,{timeUnit:t,wrapTime:!0})}function l9(e,t=!0){const{field:n}=e,r=Z8(e.timeUnit)?.unit,i=r?`time(${J8(r,n)})`:kee(e,{expr:"datum"});if(e9(e))return`${i}===${u9(e.equal,r)}`;if(t9(e)){return`${i}<${u9(e.lt,r)}`}if(r9(e)){return`${i}>${u9(e.gt,r)}`}if(n9(e)){return`${i}<=${u9(e.lte,r)}`}if(i9(e)){return`${i}>=${u9(e.gte,r)}`}if(a9(e))return`indexof([${function(e,t){return e.map((e=>u9(e,t)))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return c9(i,e.valid);if(o9(e)){const{range:n}=e,o=Z6(n)?{signal:`${n.signal}[0]`}:n[0],a=Z6(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==o&&null!==a&&t)return"inrange("+i+", ["+u9(o,r)+", "+u9(a,r)+"])";const s=[];return null!==o&&s.push(`${i} >= ${u9(o,r)}`),null!==a&&s.push(`${i} <= ${u9(a,r)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${s3(e)}`)}function c9(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function f9(e){return s9(e)&&e.timeUnit?{...e,timeUnit:Z8(e.timeUnit)?.unit}:e}const d9={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},h9=d9.quantitative,p9=d9.ordinal,m9=d9.temporal,g9=d9.nominal,y9=d9.geojson;_3(d9);const v9="linear",b9="log",x9="pow",w9="sqrt",_9="symlog",k9="time",E9="utc",S9="quantile",A9="quantize",C9="threshold",D9="point",M9="band",F9={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};_3(F9);function N9(e,t){const n=F9[e],r=F9[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const O9={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function $9(e){return O9[e]}const T9=["linear","log","pow","sqrt","symlog","time","utc"],z9=aA(T9),R9=aA(["linear","log","pow","sqrt","symlog"]);const P9=aA(["quantile","quantize","threshold"]),L9=aA(T9.concat(["quantile","quantize","threshold","sequential","identity"])),B9=aA(["ordinal","bin-ordinal","point","band"]);function I9(e){return e in B9}function j9(e){return e in L9}function U9(e){return e in z9}function q9(e){return e in P9}function W9(e){return e?.param}const H9={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:V9,domain:G9,range:Y9,rangeMax:X9,rangeMin:Q9,scheme:J9,...K9}=(_3(H9),H9),Z9=_3(K9);function e7(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return U9(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return U9(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return U9(e);case"nice":return U9(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return j9(e)&&!c3(["log","time","utc","threshold","quantile"],e)}}function t7(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return F5(e)?void 0:_4.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const n7={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},r7=n7.arc,i7=n7.area,o7=n7.bar,a7=n7.image,s7=n7.line,u7=n7.point,l7=n7.rect,c7=n7.rule,f7=n7.text,d7=n7.tick,h7=n7.trail,p7=n7.circle,m7=n7.square,g7=n7.geoshape;function y7(e){return["line","area","trail"].includes(e)}function v7(e){return["rect","bar","image","arc"].includes(e)}const b7=_3(n7);function x7(e){return e.type}aA(b7);const w7=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],_7=_3({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),k7=_3({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function E7(e){return e&&null!=e.band}const S7={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},A7={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},C7={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function D7(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=T7(e);return cee(n)&&!I6(n.aggregate)&&i&&U9(i.get("type"))&&!1===i.get("zero")?M7({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function M7({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(y7(n.type))return r;return null===h4("invalid",n,i)?r:[F7(e,t),r]}function F7(e,t){return{test:N7(e,!0),..."y"===V5(t)?{field:{group:"height"}}:{value:0}}}function N7(e,t=!0){return c9(GS(e)?e:kee(e,{expr:"datum"}),!t)}function O7(e,t,n,r){const i={};if(t&&(i.scale=t),dee(e)){const{datum:t}=e;L8(t)?i.signal=W8(t):Z6(t)?i.signal=t.signal:X6(t)?i.signal=t.expr:i.value=t}else i.field=kee(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function $7({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=kee(t,{expr:a,suffix:i}),u=void 0!==n?kee(n,{expr:a}):kee(t,{suffix:"end",expr:a}),l={};if(0===o||1===o){l.scale=e;const t=0===o?s:u;l.field=t}else{const t=Z6(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${t})`}return r&&(l.offset=r),l}function T7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(mee(t)){if(gee(t)){c??(c=iee({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:l,type:f}=t;if(W6(a)||c&&l&&f===m9)return s&&s.impute?O7(t,o,{binSuffix:"mid"},{offset:u}):c?$7({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):O7(t,o,Uee(t,e)?{binSuffix:"range"}:{},{offset:u});if(H6(a)){if(cee(n))return $7({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});{const t=e===Y3?Q3:J3;w4.warn(_4.channelRequiredForBinned(t))}}}const l=a?.get?.("type");return O7(t,o,I9(l)?{binSuffix:"range"}:{},{offset:u,band:"band"===l?c??t.bandPosition??.5:void 0})}if(yee(t)){const n=u?{offset:u}:{};return{...z7(e,t.value),...n}}}return ES(l)&&(l=l()),l?{...l,...u?{offset:u}:{}}:l}function z7(e,t){return c3(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:c3(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:u4(t)}function R7(e){return e&&"number"!==e&&"time"!==e}function P7(e,t,n){return`${e}(${t}${n?`, ${s3(n)}`:""})`}function L7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(R7(n))return I7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=B7(e,r,i);if(Bee(e)){const n=function(e,t,n,r,i){return!t||n?`${i?"utc":"time"}Format(${e}, '${n=GS(n)?n:r}')`:function(e,t,n){if(!e)return;const r=K8(e);return`${n||G8(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,i)}(a,cee(e)?Z8(e.timeUnit)?.unit:void 0,t,o.timeFormat,vee(e)&&e.scale?.type===E9);return n?{signal:n}:void 0}if(t=q7(fee(e),t,o),cee(e)&&W6(e.bin)){return{signal:V7(a,kee(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===fee(e)?{signal:`${W7(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function B7(e,t,n){return cee(e)?n?`${kee(e,{expr:t,suffix:"end"})}-${kee(e,{expr:t,suffix:"start"})}`:kee(e,{expr:t}):function(e){const{datum:t}=e;return L8(t)?W8(t):`${s3(t)}`}(e)}function I7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=B7(e,r,i)),cee(e)&&W6(e.bin)){return{signal:V7(a,kee(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:P7(n,a,t)}}function j7(e,t,n,r,i,o){if(!R7(r)){if(Bee(e)){return function(e,t,n,r){if(e)return e;if(t)return{signal:K8(t)};return r?void 0:n.timeFormat}(n,cee(e)?Z8(e.timeUnit)?.unit:void 0,i,o)}return q7(t,n,i)}}function U7(e,t,n){return e&&(Z6(e)||"number"===e||"time"===e)?e:Bee(t)&&"time"!==n&&"utc"!==n?"time":void 0}function q7(e,t,n){return GS(t)?t:e===h9?n.numberFormat:void 0}function W7(e,t){return`format(${e}, "${t||""}")`}function H7(e,t,n,r){return R7(n)?P7(n,e,t):W7(e,(GS(t)?t:void 0)??r.numberFormat)}function V7(e,t,n,r,i){const o=H7(e,n,r,i),a=H7(t,n,r,i);return`${c9(e,!1)} ? "null" : ${o} + "  " + ${a}`}const G7="min",Y7={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function X7(e){return e in Y7}function Q7(e){return!!e&&!!e.encoding}function J7(e){return!(!e||"count"!==e.op&&!e.field)}function K7(e){return!!e&&JE(e)}function Z7(e){return"row"in e||"column"in e}function eee(e){return!!e&&"header"in e}function tee(e){return"facet"in e}function nee(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function ree(e){return"sort"in e}function iee({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(mee(e)&&void 0!==e.bandPosition)return e.bandPosition;if(cee(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return v7(n.type)?0:p4("timeUnitBandPosition",n,r);if(W6(o))return.5}}function oee({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=X5(e),u=h4(a?"size":s,r,i,{vgChannel:s});if(void 0!==u)return u;if(cee(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:p4("timeUnitBandSize",r,i)};if(W6(a)&&!I9(o))return{band:1}}return v7(r.type)?o?I9(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function aee(e,t,n,r){return!!(W6(e.bin)||e.timeUnit&&gee(e)&&"temporal"===e.type)&&void 0!==iee({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function see(e){return!!e&&"condition"in e}function uee(e){const t=e&&e.condition;return!!t&&!JE(t)&&cee(t)}function lee(e){const t=e&&e.condition;return!!t&&!JE(t)&&mee(t)}function cee(e){return!(!e||!e.field&&"count"!==e.aggregate)}function fee(e){return e&&e.type}function dee(e){return!!e&&"datum"in e}function hee(e){return gee(e)&&!Eee(e)||pee(e)}function pee(e){return dee(e)&&HS(e.datum)}function mee(e){return cee(e)||dee(e)}function gee(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function yee(e){return e&&"value"in e&&"value"in e}function vee(e){return!!e&&("scale"in e||"sort"in e)}function bee(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function xee(e){return!!e&&"legend"in e}function wee(e){return!!e&&("format"in e||"formatType"in e)}function _ee(e){return a3(e,["legend","axis","header","scale"])}function kee(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=j3("count");else{let r;if(!t.nofn)if(function(e){return"op"in e}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:u}=e;W6(a)?(r=q6(a),i=(t.binSuffix??"")+(t.suffix??"")):s?P6(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):R6(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):u&&(r=function(e){const{utc:t,...n}=Z8(e);return n.unit?(t?"utc":"")+_3(n).map((e=>A3(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+_3(n).map((e=>A3(`_${e}_${n[e]}`))).join("")}(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?z3(n):t.expr?N3(n,t.expr)+o:$3(n)+o}function Eee(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return cee(e)&&!!e.bin;case"temporal":return!1}throw new Error(_4.invalidFieldType(e.type))}const See=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(P6(t))return`${i} for argmax(${t.argmax})`;if(R6(t))return`${i} for argmin(${t.argmin})`;const o=Z8(r),a=t||o?.unit||o?.maxbins&&"timeunit"||W6(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(W6(r))return`${n} (binned)`;if(i){const e=Z8(i)?.unit;if(e)return`${n} (${X8(e).join("-")})`}else if(o)return P6(o)?`${n} for max ${o.argmax}`:R6(o)?`${n} for min ${o.argmin}`:`${M3(o)} of ${n}`;return n}(e,t)}};let Aee=See;function Cee(e){Aee=e}function Dee(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=Mee(e)?.title;if(!cee(e))return i;const o=e,a=r?Fee(o,t):void 0;return n?P3(i,o.title,a):i??o.title??a}function Mee(e){return bee(e)&&e.axis?e.axis:xee(e)&&e.legend?e.legend:eee(e)&&e.header?e.header:void 0}function Fee(e,t){return Aee(e,t)}function Nee(e){if(wee(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Mee(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Oee(e){return cee(e)?e:uee(e)?e.condition:void 0}function $ee(e){return mee(e)?e:lee(e)?e.condition:void 0}function Tee(e,t,n,r={}){if(GS(e)||HS(e)||US(e)){const n=GS(e)?"string":HS(e)?"number":"boolean";return w4.warn(_4.primitiveChannelDef(t,n,e)),{value:e}}return mee(e)?zee(e,t,n,r):lee(e)?{...e,condition:zee(e.condition,t,n,r)}:e}function zee(e,t,n,r){if(wee(e)){const{format:i,formatType:o,...a}=e;if(R7(o)&&!n.customFormatTypes)return w4.warn(_4.customFormatTypeNotAllowed(t)),zee(a,t,n,r)}else{const i=bee(e)?"axis":xee(e)?"legend":eee(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(R7(a)&&!n.customFormatTypes)return w4.warn(_4.customFormatTypeNotAllowed(t)),zee({...e,[i]:s},t,n,r)}}return cee(e)?Ree(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=HS(n)?"quantitative":GS(n)?"nominal":L8(n)?"temporal":void 0,{...e,type:t}}(e)}function Ree(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||L6(r)||P6(r)||R6(r)||(w4.warn(_4.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=Z8(i)),a&&(s.field=`${a}`),W6(o)&&(s.bin=Pee(o,t)),H6(o)&&!d6(t)&&w4.warn(_4.channelShouldNotBeUsedForBinned(t)),gee(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case h9:return"quantitative";case"t":case m9:return"temporal";case"o":case p9:return"ordinal";case"n":case g9:return"nominal";case y9:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&I6(r)&&(w4.warn(_4.invalidFieldTypeForCountAggregate(e,r)),s.type="quantitative")}else if(!H5(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(ree(e)&&JE(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!P6(n)&&!R6(n))return"quantitative";if(vee(e)&&e.scale?.type)switch(F9[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(gee(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case H3:case V3:case G3:return Eee(e)?Lee:{compatible:!1,warning:_4.channelShouldBeDiscrete(t)};case Y3:case X3:case a5:case s5:case u5:case y5:case b5:case x5:case w5:case _5:case k5:case f5:case e5:case K3:case E5:return Lee;case r5:case o5:case n5:case i5:return n!==h9?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Lee;case d5:case h5:case p5:case m5:case c5:case t5:case Z3:case Q3:case J3:return"nominal"!==n||e.sort?Lee:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case l5:case g5:return Eee(e)||vee(r=e)&&q9(r.scale?.type)?Lee:{compatible:!1,warning:_4.channelShouldBeDiscreteOrDiscretizing(t)};case v5:return"nominal"!==e.type||"sort"in e?Lee:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r}(s,t)||{};!1===e&&w4.warn(n)}if(ree(s)&&GS(s.sort)){const{sort:e}=s;if(X7(e))return{...s,sort:{encoding:e}};const t=e.substr(1);if("-"===e.charAt(0)&&X7(t))return{...s,sort:{encoding:t,order:"descending"}}}if(eee(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function Pee(e,t){return US(e)?{maxbins:Y6(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Y6(t)}}const Lee={compatible:!0};function Bee(e){const{formatType:t}=Nee(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||cee(n)&&!!n.timeUnit));var n}function Iee(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&Z8(t)?.unit;let a,s=o||"temporal"===n;return X6(e)?a=e.expr:Z6(e)?a=e.signal:L8(e)?(s=!0,a=W8(e)):(GS(e)||HS(e))&&s&&(a=`datetime(${s3(e)})`,function(e){return!!H8[e]}(o)&&(HS(e)&&e<1e4||GS(e)&&isNaN(Date.parse(e)))&&(a=W8({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:s3(e)}function jee(e,t){const{type:n}=e;return t.map((t=>{const r=Iee(t,{timeUnit:cee(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Uee(e,t){return W6(e.bin)?D6(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const qee={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Wee(e){return e&&e.condition}const Hee=["domain","grid","labels","ticks","title"],Vee={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Gee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Yee={...Gee,style:1,labelExpr:1,encoding:1};function Xee(e){return!!Yee[e]}_3(Yee);const Qee=_3({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Jee(e){return"mark"in e}class Kee{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!Jee(e)&&(x7(t=e.mark)?t.type:t)===this.name;var t}}function Zee(e,t){const n=e&&e[t];return!!n&&(JE(n)?f3(n,(e=>!!e.field)):cee(n)||uee(n))}function ete(e){return f3(T5,(t=>{if(Zee(e,t)){const n=e[t];if(JE(n))return f3(n,(e=>!!e.aggregate));{const e=Oee(n);return e&&!!e.aggregate}}return!1}))}function tte(e,t){const n=[],r=[],i=[],o=[],a={};return ite(e,((s,u)=>{if(cee(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=s;if(c||d||f){const e=Mee(s),p=e&&e.title;let m=kee(s,{forAs:!0});const g={...p?[]:{title:Dee(s,t,{allowDisabling:!0})},...h,field:m};if(c){let e;if(P6(c)?(e="argmax",m=kee({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):R6(c)?(e="argmin",m=kee({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};l&&(t.field=l),o.push(t)}}else if(n.push(m),gee(s)&&W6(f)){if(r.push({bin:f,field:l,as:m}),n.push(kee(s,{binSuffix:"end"})),Uee(s,u)&&n.push(kee(s,{binSuffix:"range"})),d6(u)){const e={field:`${m}_end`};a[`${u}2`]=e}g.bin="binned",H5(u)||(g.type=h9)}else if(d){i.push({timeUnit:d,field:l,as:m});const e=gee(s)&&s.type!==m9&&"time";e&&(u===y5||u===w5?g.formatType=e:!function(e){return!!u6[e]}(u)?d6(u)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[u]=g}else n.push(l),a[u]=e[u]}else a[u]=e[u]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function nte(e,t,n,r){return _3(e).reduce(((i,o)=>{if(!q5(o))return w4.warn(_4.invalidEncodingChannel(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(w4.warn(_4.REPLACE_ANGLE_WITH_THETA),o=e5),!function(e,t,n){const r=M6(t,n);if(!r)return!1;if("binned"===r){const n=e[t===Q3?Y3:X3];return!!(cee(n)&&cee(e[t])&&H6(n.bin))}return!0}(e,o,t))return w4.warn(_4.incompatibleChannel(o,t)),i;if(o===c5&&"line"===t){if(Oee(e[o])?.aggregate)return w4.warn(_4.LINE_WITH_VARYING_SIZE),i}if(o===a5&&(n?"fill"in e:"stroke"in e))return w4.warn(_4.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===b5||o===v5&&!JE(a)&&!yee(a)||o===w5&&JE(a))a&&(i[o]=_S(a).reduce(((e,t)=>(cee(t)?e.push(Ree(t,o)):w4.warn(_4.emptyFieldDef(t,o)),e)),[]));else{if(o===w5&&null===a)i[o]=null;else if(!(cee(a)||dee(a)||yee(a)||see(a)||Z6(a)))return w4.warn(_4.emptyFieldDef(a,o)),i;i[o]=Tee(a,o,r)}return i}),{})}function rte(e,t){const n={};for(const r of _3(e)){const i=Tee(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ite(e,t,n){if(e)for(const r of _3(e)){const i=e[r];if(JE(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function ote(e,t){return _3(t).reduce(((n,r)=>{switch(r){case Y3:case X3:case _5:case E5:case k5:case Q3:case J3:case e5:case t5:case K3:case Z3:case n5:case r5:case i5:case o5:case y5:case l5:case f5:case w5:return n;case v5:if("line"===e||"trail"===e)return n;case b5:case x5:{const e=t[r];if(JE(e)||cee(e))for(const t of _S(e))t.aggregate||n.push(kee(t,{}));return n}case c5:if("trail"===e)return n;case a5:case s5:case u5:case d5:case h5:case p5:case g5:case m5:{const e=Oee(t[r]);return e&&!e.aggregate&&n.push(kee(e,{})),n}}}),[])}function ate(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${ste(t)}`:"";return{field:e+t.field,type:t.type,title:Z6(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...m3(function(e){const t=[];for(const n of _3(e))if(Zee(e,n)){const r=_S(e[n]);for(const e of r)cee(e)?t.push(e):uee(e)&&t.push(e.condition)}return t}(n).map(_ee),u3)]}}function ste(e){const{title:t,field:n}=e;return P3(t,n)}function ute(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c,extraEncoding:f={}})=>{const d=ste(n);return lte(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...GS(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function lte(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...x7(r.mark)?r.mark:{type:r.mark},style:`${s}-${t}`,...US(e[t])?{}:e[t]}}]:[]}function cte(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:fte(o,n),continuousAxisChannelDef2:fte(a,n),continuousAxisChannelDefError:fte(s,n),continuousAxisChannelDefError2:fte(u,n),continuousAxis:i}}function fte(e,t){if(e&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&w4.warn(_4.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function dte(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(x7(n)&&n.orient)return n.orient;if(hee(i)){if(hee(o)){const e=cee(i)&&i.aggregate,n=cee(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return Bee(o)&&!Bee(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(hee(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const hte="boxplot",pte=new Kee(hte,gte);function mte(e){return HS(e)?"tukey":e}function gte(e,{config:t}){e={...e,encoding:rte(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=x7(n)?n:{type:n};i&&w4.warn(_4.selectionNotSupported("boxplot"));const u=s.extent??t.boxplot.extent,l=h4("size",s,t),c=mte(u),{bins:f,timeUnits:d,transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=dte(e,hte),{continuousAxisChannelDef:i,continuousAxis:o}=cte(e,r,hte),a=i.field,s=mte(t),u=[...yte(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],l="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(JE(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return JE(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=tte(h,n),b="vertical"===r?"horizontal":"vertical",x=r,w=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:w,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:d}}(e,u,t),{color:_,size:k,...E}=v,S=e=>ute(s,m,p,e,t.boxplot),A=S(E),C=S(v),D=S({...E,...k?{size:k}:{}}),M=ate([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,v),F={type:"tick",color:"black",opacity:1,orient:b,invalid:null,aria:!1},N="min-max"===c?M:ate([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,v),O=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],$=[..."tukey"!==c?O:[],...C({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:null,...KE(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if("min-max"===c)return{...a,transform:(a.transform??[]).concat(h),layer:$};const T=`datum["lower_box_${p.field}"]`,z=`datum["upper_box_${p.field}"]`,R=`(${z} - ${T})`,P=`${T} - ${u} * ${R}`,L=`${z} + ${u} * ${R}`,B=`datum["${p.field}"]`,I={joinaggregate:yte(p.field),groupby:g},j={transform:[{filter:`(${P} <= ${B}) && (${B} <= ${L})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:g}],layer:O},{tooltip:U,...q}=E,{scale:W,axis:H}=p,V=ste(p),G=a3(H,["title"]),Y=lte(s,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${P}) || (${B} > ${L})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...void 0!==V?{title:V}:{},...void 0!==W?{scale:W}:{},...w3(G)?{}:{axis:G}},...q,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let X;const Q=[...f,...d,I];return Y?X={transform:Q,layer:[Y,j]}:(X=j,X.transform.unshift(...Q)),{...a,layer:[X,{transform:h,layer:$}]}}function yte(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const vte="errorbar",bte=new Kee(vte,xte);function xte(e,{config:t}){e={...e,encoding:rte(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=_te(e,vte,t);delete o.size;const c=ute(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:a,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function wte(e,t){const{encoding:n}=e;if(function(e){return(mee(e.x)||mee(e.y))&&!mee(e.x2)&&!mee(e.y2)&&!mee(e.xError)&&!mee(e.xError2)&&!mee(e.yError)&&!mee(e.yError2)}(n))return{orient:dte(e,t),inputType:"raw"};const r=function(e){return mee(e.x2)||mee(e.y2)}(n),i=function(e){return mee(e.xError)||mee(e.xError2)||mee(e.yError)||mee(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(mee(e)&&mee(r))throw new Error(`${t} cannot have both x2 and y2`);if(mee(e)){if(hee(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(mee(r)){if(hee(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(mee(r)&&!mee(e))throw new Error(`${t} cannot have xError2 without xError`);if(mee(s)&&!mee(i))throw new Error(`${t} cannot have yError2 without yError`);if(mee(e)&&mee(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(mee(e)){if(hee(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(mee(i)){if(hee(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function _te(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=x7(r)?r:{type:r};o&&w4.warn(_4.selectionNotSupported(t));const{orient:l,inputType:c}=wte(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=cte(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&w4.warn(_4.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:M3(t)},{fieldPrefix:"upper_",titlePrefix:kte(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:kte(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),u=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Dee({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Dee({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Dee({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&w4.warn(_4.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const e of l)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:T3(T3(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,f,d,h,p,c,t,n),{[m]:x,["x"===m?"x2":"y2"]:w,["x"===m?"xError":"yError"]:_,["x"===m?"xError2":"yError2"]:k,...E}=i,{bins:S,timeUnits:A,aggregate:C,groupby:D,encoding:M}=tte(E,n),F=[...C,...g],N="raw"!==c?[]:D,O=ate(v,f,M,b);return{transform:[...s.transform??[],...S,...A,...0===F.length?[]:[{aggregate:F,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:O}}function kte(e,t,n){return`${M3(e)} ${n} ${t}`}const Ete="errorband",Ste=new Kee(Ete,Ate);function Ate(e,{config:t}){e={...e,encoding:rte(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=_te(e,Ete,t),l=a,c=ute(l,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?w4.warn(_4.errorBand1DNotSupport("interpolate")):l.tension&&w4.warn(_4.errorBand1DNotSupport("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Cte={};function Dte(e,t,n){const r=new Kee(e,t);Cte[e]={normalizer:r,parts:n}}Dte(hte,gte,["box","median","outliers","rule","ticks"]),Dte(vte,xte,["ticks","rule"]),Dte(Ete,Ate,["band","borders"]);const Mte=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Fte={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Nte={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Ote=_3(Fte),$te=_3(Nte),Tte=_3({header:1,headerRow:1,headerColumn:1,headerFacet:1}),zte=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Rte={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Pte=(_3(Rte),"_vgsid_"),Lte={point:{on:"click",fields:[Pte],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Bte(e){return!(!e||"legend"!==e&&!e.legend)}function Ite(e){return Bte(e)&&KE(e)}function jte(e){return!!e.select}function Ute(e){const t=[];for(const n of e||[]){if(jte(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function qte(e){return"concat"in e}function Wte(e){return"vconcat"in e}function Hte(e){return"hconcat"in e}function Vte(e){return KE(e)&&void 0!==e.step}function Gte(e){return e.view||e.width||e.height}const Yte=_3({align:1,bounds:1,center:1,columns:1,spacing:1});function Xte(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function Qte(e,t){const n=Jte(e,t);return Vte(n)?n.step:Kte}function Jte(e,t){return P3(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Kte=20,Zte={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Kte},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:A7,circle:{},geoshape:{},image:{},line:{},point:{},rect:C7,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Lte,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},ene=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],tne={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},nne={blue:ene[0],orange:ene[1],red:ene[2],teal:ene[3],green:ene[4],yellow:ene[5],purple:ene[6],pink:ene[7],brown:ene[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function rne(e){const t=_3(e||{}),n={};for(const r of t){const t=e[r];n[r]=Wee(t)?o4(t):a4(t)}return n}const ine=[...k7,...Qee,...Tte,"background","padding","legend","lineBreak","scale","style","title","view"];function one(e={}){const{color:t,font:n,fontSize:r,...i}=e,o=eS({},Zte,n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:KE(e)?{...nne,...e}:nne}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:KE(e)?{...tne,...e}:tne}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),a=a3(o,ine);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=a4(o[e]));for(const e of k7)o[e]&&(a[e]=Q6(o[e]));for(const e of Qee)o[e]&&(a[e]=rne(o[e]));for(const e of Tte)o[e]&&(a[e]=Q6(o[e]));return o.legend&&(a.legend=Q6(o.legend)),o.scale&&(a.scale=Q6(o.scale)),o.style&&(a.style=function(e){const t=_3(e),n={};for(const r of t)n[r]=rne(e[r]);return n}(o.style)),o.title&&(a.title=Q6(o.title)),o.view&&(a.view=Q6(o.view)),a}const ane=["view",...b7],sne=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],une={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function lne(e){e=i3(e);for(const t of sne)delete e[t];if(e.axis)for(const t in e.axis)Wee(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Mte)delete e.legend[t];if(e.mark){for(const t of _7)delete e.mark[t];e.mark.tooltip&&KE(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Ute(e.params)),delete e.params);for(const t of ane){for(const n of _7)delete e[t][n];const n=une[t];if(n)for(const r of n)delete e[t][r];cne(e,t)}for(const t of _3(Cte))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=J6(e.title);w3(t)||(e.style["group-title"]={...e.style["group-title"],...t});w3(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});w3(r)?delete e.title:e.title=r}(e);for(const t in e)KE(e[t])&&w3(e[t])&&delete e[t];return w3(e)?void 0:e}function cne(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};w3(i)||(e.style[n??t]=i),r||delete e[t]}function fne(e){return"layer"in e}class dne{map(e,t){return tee(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Hte(e)?this.mapHConcat(e,t):Wte(e)?this.mapVConcat(e,t):qte(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(fne(e))return this.mapLayer(e,t);if(Jee(e))return this.mapUnit(e,t);throw new Error(_4.invalidSpec(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const hne={zero:1,center:1,normalize:1};const pne=new Set([r7,o7,i7,c7,u7,p7,m7,s7,f7,d7]),mne=new Set([o7,i7,r7]);function gne(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(cee(r)&&cee(i))if("quantitative"===fee(r)&&"quantitative"===fee(i)){if(r.stack)return t;if(i.stack)return n;const e=cee(r)&&!!r.aggregate;if(e!==(cee(i)&&!!i.aggregate))return e?t:n;{const e=r.scale?.type,o=i.scale?.type;if(e&&"linear"!==e)return n;if(o&&"linear"!==o)return t}}else{if("quantitative"===fee(r))return t;if("quantitative"===fee(i))return n}else{if("quantitative"===fee(r))return t;if("quantitative"===fee(i))return n}}function yne(e,t,n={}){const r=x7(e)?e.type:e;if(!pne.has(r))return null;const i=gne(t,"x")||gne(t,"theta");if(!i)return null;const o=t[i],a=cee(o)?kee(o,{}):void 0;let s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),u=t[s],l=cee(u)?kee(u,{}):void 0;l===a&&(l=void 0,u=void 0,s=void 0);const c=l6.reduce(((e,n)=>{if("tooltip"!==n&&Zee(t,n)){const r=t[n];for(const t of _S(r)){const r=Oee(t);if(r.aggregate)continue;const i=kee(r,{});i&&i===l||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;if(void 0!==o.stack?f=US(o.stack)?o.stack?"zero":null:o.stack:mne.has(r)&&(f="zero"),!f||!(f in hne))return null;if(ete(t)&&0===c.length)return null;if(o?.scale?.type&&o?.scale?.type!==v9){if(n.disallowNonLinearStack)return null;w4.warn(_4.cannotStackNonLinearScale(o.scale.type))}return mee(t[Y5(i)])?(void 0!==o.stack&&w4.warn(_4.cannotStackRangedMark(i)),null):(cee(o)&&o.aggregate&&!c3(j6,o.aggregate)&&w4.warn(_4.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&y7(r),stackBy:c,offset:f})}function vne(e){const{point:t,line:n,...r}=e;return _3(r).length>1?r:r.type}function bne(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:a3(e[t],["point","line"])});return e}function xne(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?KE(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?KE(t.point)?t.point:{}:void 0}function wne(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class _ne{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(Jee(e)){const{mark:n,encoding:r}=e,i=x7(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!xne(i,t[i.type],r);case"area":return!!xne(i,t[i.type],r)||!!wne(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s,...u}=e,l=rte(s,r),c=x7(a)?a:{type:a},f=xne(c,r[c.type],l),d="area"===c.type&&wne(c,r[c.type]),h=[{...i?{params:i}:{},mark:vne({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:a3(l,["shape"])}],p=yne(c,l);let m=l;if(p){const{fieldChannel:e,offset:t}=p;m={...l,[e]:{...l[e],...t?{stack:t}:{}}}}return d&&h.push({...o?{projection:o}:{},mark:{type:"line",...o3(c,["clip","interpolate","tension","tooltip"]),...d},encoding:m}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...o3(c,["clip","tooltip"]),...f},encoding:m}),n({...u,layer:h},{...t,config:bne(r)})}}function kne(e,t){return t?Z7(e)?Mne(e,t):Ane(e,t):e}function Ene(e,t){return t?Mne(e,t):e}function Sne(e,t,n){const r=t[e];return(i=r)&&!GS(i)&&"repeat"in i?r.repeat in n?{...t,[e]:n[r.repeat]}:void w4.warn(_4.noSuchRepeatedValue(r.repeat)):t;var i}function Ane(e,t){if(void 0!==(e=Sne("field",e,t))){if(null===e)return null;if(ree(e)&&J7(e.sort)){const n=Sne("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Cne(e,t){if(cee(e))return Ane(e,t);{const n=Sne("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function Dne(e,t){if(!mee(e)){if(lee(e)){const n=Cne(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=Cne(e,t);if(n)return n;if(see(e))return{condition:e.condition}}}function Mne(e,t){const n={};for(const r in e)if(RS(e,r)){const i=e[r];if(JE(i))n[r]=i.map((e=>Dne(e,t))).filter((e=>e));else{const e=Dne(i,t);void 0!==e&&(n[r]=e)}}return n}class Fne{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Jee(e)){const{encoding:t,mark:n}=e;if("line"===n||x7(n)&&"line"===n.type)for(const e of W5){const n=t[V5(e)];if(t[e]&&(cee(n)&&!H6(n.bin)||dee(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;return w4.warn(_4.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n({...e,mark:KE(i)?{...i,type:"rule"}:"rule"},t)}}function Nne({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([..._3(e),..._3(t)]);for(const o of i){const i=t[o],a=e[o];if(mee(i)){const e={...a,...i};r[o]=e}else lee(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||yee(a)||Z6(a)||mee(a)||JE(a))&&(r[o]=a)}}else r=t;return!r||w3(r)?void 0:r}function One(e){const{parentProjection:t,projection:n}=e;return t&&n&&w4.warn(_4.projectionOverridden({parentProjection:t,projection:n})),n??t}function $ne(e){return"filter"in e}function Tne(e){return"lookup"in e}function zne(e){return"pivot"in e}function Rne(e){return"density"in e}function Pne(e){return"quantile"in e}function Lne(e){return"regression"in e}function Bne(e){return"loess"in e}function Ine(e){return"sample"in e}function jne(e){return"window"in e}function Une(e){return"joinaggregate"in e}function qne(e){return"flatten"in e}function Wne(e){return"calculate"in e}function Hne(e){return"bin"in e}function Vne(e){return"impute"in e}function Gne(e){return"timeUnit"in e}function Yne(e){return"aggregate"in e}function Xne(e){return"stack"in e}function Qne(e){return"fold"in e}function Jne(e,t){const{transform:n,...r}=e;if(n){return{...r,transform:n.map((e=>{if($ne(e))return{filter:ere(e,t)};if(Hne(e)&&V6(e.bin))return{...e,bin:Zne(e.bin)};if(Tne(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}))}}return e}function Kne(e,t){const n=i3(e);if(cee(n)&&V6(n.bin)&&(n.bin=Zne(n.bin)),vee(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(see(n))if(JE(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:ere(e,t)}}));else{const{selection:e,param:r,test:i,...o}=Kne(n.condition,t);n.condition=r?n.condition:{...o,test:ere(n.condition,t)}}return n}function Zne(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function ere(e,t){const n=e=>n3(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):n3(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class tre extends dne{map(e,t){const n=t.selections??[];if(e.params&&!Jee(e)){const t=[];for(const r of e.params)jte(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,nre(e,t))}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(GS(n)&&(n===e.name||r.indexOf(n)>=0)||JE(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=tre.prototype[e];tre.prototype[e]=function(e,n){return t.call(this,e,nre(e,n))}}function nre(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function rre(e,t){void 0===t&&(t=one(e.config));const n=function(e,t={}){const n={config:t};return are.map(ire.map(ore.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=Jee(e)||fne(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(w4.warn(_4.containerSizeNonSingle("width")),r=void 0),"container"==i&&(w4.warn(_4.containerSizeNonSingle("height")),i=void 0));const s={type:"pad",...a,...n?sre(n.autosize):{},...sre(e.autosize)};"fit"!==s.type||o||(w4.warn(_4.FIT_NON_SINGLE),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&w4.warn(_4.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&w4.warn(_4.containerSizeNotCompatibleWithAutosize("height"));if(r3(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const ire=new class extends dne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[pte,bte,Ste,new _ne,new Fne]}map(e,t){if(Jee(e)){const n=Zee(e.encoding,H3),r=Zee(e.encoding,V3),i=Zee(e.encoding,G3);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=Ene(e.encoding,t.repeater),o={...e,...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!JE(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:l=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...u,layer:e},i=`${(r.name||"")+l}child__layer_${A3(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!JE(n)&&e.columns&&(e=a3(e,["columns"]),w4.warn(_4.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:s={},repeaterPrefix:u=""}=t,l=!JE(n)&&n.row||[s?s.row:null],c=!JE(n)&&n.column||[s?s.column:null],f=JE(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of l)for(const o of c){const l={repeat:e,row:i,column:o,layer:s.layer},c=(r.name||"")+u+"child__"+(JE(n)?`${A3(e)}`:(n.row?`row_${A3(i)}`:"")+(n.column?`column_${A3(o)}`:"")),f=this.map(r,{...t,repeater:l,repeaterPrefix:c});f.name=c,a.push(a3(f,["data"]))}const d=JE(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:d,concat:a}}mapFacet(e,t){const{facet:n}=e;return Z7(n)&&e.columns&&(e=a3(e,["columns"]),w4.warn(_4.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=One({parentProjection:o,projection:r}),u=Nne({parentEncoding:i,encoding:Ene(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:u,height:l,view:c,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=Ene(o,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...l?{height:l}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&w4.warn(_4.facetChannelDropped([...n?[H3]:[],...r?[V3]:[]]));const t={},o={};for(const n of[H3,V3]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...u}=r;t[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:kne(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:Nne({parentEncoding:t,encoding:i,layer:!0}),parentProjection:One({parentProjection:n,projection:o})};return super.mapLayer(a,s)}},ore=new class extends dne{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=Jne(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=Jne(e,t)).encoding){const n={};for(const[r,i]of E3(e.encoding))n[r]=Kne(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:E3(n).map((([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const n of k3(t.selectionPredicates[e]??{}))n.empty="none"!==o;return{name:e,value:r,select:a,bind:i}}))}:e}},are=new tre;function sre(e){return GS(e)?{type:e}:e??{}}const ure=["background","padding"];function lre(e,t){const n={};for(const t of ure)e&&void 0!==e[t]&&(n[t]=a4(e[t]));return t&&(n.params=e.params),n}class cre{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new cre(i3(this.explicit),i3(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return P3(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of _3(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function fre(e){return{explicit:!0,value:e}}function dre(e){return{explicit:!1,value:e}}function hre(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:pre(t,n,r,i)}}function pre(e,t,n,r){return e.explicit&&t.explicit&&w4.warn(_4.mergeConflictingProperty(n,r,e.value,t.value)),e}function mre(e,t,n,r,i=pre){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:r3(e.value,t.value)?e:i(e,t,n,r)}class gre extends cre{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function yre(e){return"url"in e}function vre(e){return"values"in e}function bre(e){return"name"in e&&!yre(e)&&!vre(e)&&!xre(e)}function xre(e){return e&&(wre(e)||_re(e)||kre(e))}function wre(e){return"sequence"in e}function _re(e){return"sphere"in e}function kre(e){return"graticule"in e}var Ere,Sre;function Are(e,t=!0,n=WE){if(JE(e)){const r=e.map((e=>Are(e,t,n)));return t?`[${r.join(", ")}]`:r}return L8(e)?n(t?W8(e):function(e){const t=q8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(s3(e)):e}function Cre(e,t){for(const n of k3(e.component.selection??{})){const r=n.name;let i=`${r}${Lie}, ${"global"===n.resolve?"true":`{unit: ${Uie(e)}}`}`;for(const r of jie)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+Bie,on:[{events:{signal:n.name+Lie},update:`modify(${tA(n.name+Pie)}, ${i})`}]})}return Fre(t)}function Dre(e,t){if(e.component.selection&&_3(e.component.selection).length){const n=tA(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:HK("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Fre(t)}function Mre(e,t){for(const n of k3(e.component.selection??{}))for(const r of jie)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Fre(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}(Sre=Ere||(Ere={}))[Sre.Raw=0]="Raw",Sre[Sre.Main=1]="Main",Sre[Sre.Row=2]="Row",Sre[Sre.Column=3]="Column",Sre[Sre.Lookup=4]="Lookup";class Nre{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?w4.warn(_4.ADD_SAME_CHILD_TWICE):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class Ore extends Nre{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${B3()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class $re extends Nre{constructor(e,t){super(e),this.formula=t}clone(){return new $re(null,i3(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=kee(t,{forAs:!0});e[u3({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return w3(n)?null:new $re(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:Z8(n)};return new $re(e,{[u3(i)]:i})}merge(e){this.formula={...this.formula};for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of E3(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(k3(this.formula).map((e=>e.as)))}dependentFields(){return new Set(k3(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${u3(this.formula)}`}assemble(){const e=[];for(const t of k3(this.formula)){const{field:n,as:r,timeUnit:i}=t,{unit:o,utc:a,...s}=Z8(i);e.push({field:$3(n),type:"timeunit",...o?{units:X8(o)}:{},...a?{timezone:"utc"}:{},...s,as:[r,`${r}_end`]})}return e}}const Tre="_tuple_fields";class zre{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}}const Rre={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new zre),o={},a={},s=new Set,u=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=A3(`${r}_${n}`);for(let e=1;s.has(i);e++)i=A3(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},l=t.type,c=e.config.selection[l],f=void 0!==n.value?_S(n.value):null;let{fields:d,encodings:h}=KE(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(KE(e))for(const t of _3(e))U5[t]?(h||(h=[])).push(t):"interval"===l?(w4.warn(_4.INTERVAL_INITIALIZED_WITH_X_Y),h=c.encodings):(d||(d=[])).push(t);d||h||(h=c.encodings,d=c.fields);for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){w4.warn(_4.cannotProjectAggregate(t,n.aggregate));continue}if(!r){w4.warn(_4.cannotProjectOnChannelWithoutField(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};a[u3(i)]=i}if(!o[r]){let a="E";if("interval"===l){j9(e.getScaleComponent(t).get("type"))&&(a="R")}else n.bin&&(a="R-RE");const s={field:r,channel:t,type:a};s.signals={...u(s,"data"),...u(s,"visual")},i.items.push(o[r]=s),i.hasField[r]=i.hasChannel[t]=o[r]}}else w4.warn(_4.cannotProjectOnChannelWithoutField(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e};t.signals={...u(t,"data")},i.items.push(t),i.hasField[e]=t}f&&(t.init=f.map((e=>i.items.map((t=>KE(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),w3(a)||(i.timeUnit=new $re(null,a))},signals:(e,t,n)=>{const r=t.name+Tre;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n,...r}=e;return r.field=$3(r.field),r}))})}},Pre={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!D6(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&j9(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):w4.warn(_4.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||Bre(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(Iie)>=0)i.update=`{${r.map((e=>`${tA($3(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${tA($3(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!Bre(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}};function Lre(e,t){return`domain(${tA(e.scaleName(t))})`}function Bre(e){return(e.parent&&Cse(e.parent)&&!e.parent.parent)??Bre(e.parent.parent)}const Ire="_brush",jre="_scale_trigger",Ure={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Tre,o=Pre.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${tA(r+Ire)}`;qre(t,((t,n)=>{var r;const i=_S((r=n.between[0]).filter??(r.filter=[]));return i.includes(e)||i.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==Y3&&o!==X3)return void w4.warn("Interval selections only support x and y encoding channels.");const l=a?a[i]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Pre.defined(t),u=tA(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=e=>`scale(${u}, ${e})`,d=e.getSizeSignalRef(i===Y3?"width":"height").signal,h=`${i}(unit)`,p=qre(t,((e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]));return p.push({events:{signal:t.name+jre},update:j9(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[{name:o,...r?{init:Are(r,!0,f)}:{value:[]},on:p},{name:a,...r?{init:Are(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(e,t,r,l),f=r.signals.data,d=r.signals.visual,h=tA(e.scaleName(o)),p=j9(e.getScaleComponent(o).get("type"))?"+":"";n.push(...c),s.push(f),u.push({scaleName:e.scaleName(o),expr:`(!isArray(${f}) || (${p}invert(${h}, ${d})[0] === ${p}${f}[0] && ${p}invert(${h}, ${d})[1] === ${p}${f}[1]))`})})),o||n.push({name:r+jre,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:`${u.map((e=>e.expr)).join(" && ")} ? ${r+jre} : {}`}]});const l=`unit: ${Uie(e)}, fields: ${i}, values`;return n.concat({name:r+Lie,...a?{init:`{${l}: ${Are(a)}}`}:{},on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]})},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${tA(t.name+Pie)})`;if(Pre.defined(t))return n;const l={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of _3(l))l[t]=[{test:`${u}.length && ${u}[0].unit === ${Uie(e)}`,...l[t]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=_3(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+Ire}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Ire,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function qre(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(w4.warn(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Wre={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Tre,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=o.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${a}[${tA(e.vgField(t.channel,{}))}], ${a}[${tA(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${tA(t.field)}]`})).join(", "),u=`unit: ${Uie(e)}, fields: ${i}, values`,l=t.events;return n.concat([{name:r+Lie,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${u}: [${s}]} : null`,force:!0}]:[]}])}};function Hre(e,t,n,r){const i=see(t)&&t.condition,o=r(t);if(i){return{[n]:[..._S(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t;return{test:Xie(e,{param:r,empty:i}),...n}}return{test:Jie(e,t.test),...n}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function Vre(e,t="text"){const n=e.encoding[t];return Hre(e,n,t,(t=>Gre(t,e.config)))}function Gre(e,t,n="datum"){if(e){if(yee(e))return u4(e.value);if(mee(e)){const{format:r,formatType:i}=Nee(e);return L7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Yre(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(JE(a))return{tooltip:Qre({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Hre(e,a,"tooltip",(e=>{const a=Gre(e,i,s);if(a)return a;if(null===e)return;let u=h4("tooltip",r,i);return!0===u&&(u={content:"encoding"}),GS(u)?{value:u}:KE(u)?Z6(u)?u:"encoding"===u.content?Qre(n,o,i,t):{signal:s}:void 0}))}}function Xre(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=V5(s),l=gee(r)?r:{...r,type:e[u].type},c=_S(l.title||Fee(l,n)).join(", ");let f;if(d6(s)){const r="x"===s?"x2":"y2",a=Oee(e[r]);if(H6(l.bin)&&a){const e=kee(l,{expr:o}),t=kee(a,{expr:o}),{format:s,formatType:u}=Nee(l);f=V7(e,t,s,u,n),i[r]=!0}else if(t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=Nee(l);f=L7({fieldOrDatumDef:l,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}}f??(f=Gre(l,n,o).signal),a.push({channel:s,key:c,value:f})}ite(e,((e,t)=>{cee(e)?s(e,t):uee(e)&&s(e.condition,t)}));const u={};for(const{channel:e,key:t,value:n}of a)i[e]||u[t]||(u[t]=n);return u}function Qre(e,t,n,{reactiveGeom:r}={}){const i=Xre(e,t,n,{reactiveGeom:r}),o=E3(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Jre(e){const{markDef:t,config:n}=e,r=h4("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...Kre(e),...Zre(e)}}function Kre(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=h4("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in r4?{}:{ariaRoleDescription:{value:t}}}function Zre(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Hre(e,o,"description",(t=>Gre(t,e.config)));const a=h4("description",n,r);if(null!=a)return{description:u4(a)};if(!1===r.aria)return{};const s=Xre(t,i,r);return w3(s)?void 0:{description:{signal:E3(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function eie(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u??(u=h4(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=u4(u)));const l=i[e];return Hre(t,l,a??e,(n=>T7({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function tie(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??h4("filled",n,i),s=c3(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=h4(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,l=h4(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",f={...u?{fill:u4(u)}:{},...l?{stroke:u4(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&w4.warn(_4.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eie("color",e,{vgChannel:c,defaultValue:a?u:l}),...eie("fill",e,{defaultValue:r.fill?u:void 0}),...eie("stroke",e,{defaultValue:r.stroke?l:void 0})}}function nie(e){const{encoding:t,mark:n}=e,r=t.order;return!y7(n)&&yee(r)?Hre(e,r,"zindex",(e=>u4(e.value))):{}}function rie(e,t){const n=t[function(e){switch(e){case Y3:return"xOffset";case X3:return"yOffset";case Q3:return"x2Offset";case J3:return"y2Offset";case e5:return"thetaOffset";case K3:return"radiusOffset";case t5:return"theta2Offset";case Z3:return"radius2Offset"}}(e)];if(n)return n}function iie(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[Y5(e)],c=t.scaleName(e),f=t.getScaleComponent(e),d=rie(e,o),h=oie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&d6(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(mee(n)&&i&&t===i.fieldChannel){if(cee(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return $7({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return O7(n,r,{suffix:"end"},{offset:o})}return D7(e)}({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||e]:p}:void 0}function oie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=V5(n),u=G5(n),l=h4(n,o,a,{vgChannel:u});if(void 0!==l)return z7(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(c3([b9,k9,E9],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[X5(n)],mult:.5}}}}const aie={left:"x",center:"xc",right:"x2"},sie={top:"y",middle:"yc",bottom:"y2"};function uie(e,t,n,r="middle"){if("radius"===e||"theta"===e)return G5(e);const i="x"===e?"align":"baseline",o=h4(i,t,n);let a;return Z6(o)?(w4.warn(_4.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,"x"===e?aie[a||("top"===r?"left":"center")]:sie[a||r]}function lie(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?cie(e,t,{defaultPos:n,defaultPos2:r}):iie(e,t,{defaultPos:n})}function cie(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=Y5(e),s=X5(e),u=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=V5(n),l=X5(n),c=G5(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=rie(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=X5(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){if(mee(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return O7(t,o,{suffix:"start"},{offset:u});return D7({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});if(void 0!==m)return{[c]:m};return fie(n,o)||fie(n,{[n]:m4(n,o,s.style),[l]:m4(l,o,s.style)})||fie(n,s[i])||fie(n,s.mark)||{[c]:oie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,a);return{...iie(e,t,{defaultPos:n,vgChannel:u[s]?uie(e,i,o):G5(e)}),...u}}function fie(e,t){const n=X5(e),r=G5(e);if(void 0!==t[r])return{[r]:z7(e,t[r])};if(void 0!==t[e])return{[r]:z7(e,t[e])};if(t[n]){const r=t[n];if(!E7(r))return{[n]:z7(e,r)};w4.warn(_4.relativeBandSizeNotSupported(n))}}function die(e,t,n){const{config:r,encoding:i,markDef:o}=e,a=Y5(t),s=X5(t),u=i[t],l=i[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=o.orient,p=i[s]??i.size??h4("size",o,r,{vgChannel:s}),m="bar"===n&&("x"===t?"vertical"===h:"horizontal"===h);if(!cee(u)||!(W6(u.bin)||H6(u.bin)||u.timeUnit&&!l)||p&&!E7(p)||I9(f))return(mee(u)&&I9(f)||m)&&!l?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=X5(t),f=Y5(t),d="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let h;(i.size||r.size)&&(d?h=eie("size",n,{vgChannel:c,defaultRef:u4(r.size)}):w4.warn(_4.cannotApplySizeToNonOrientedMark(r.type)));const p=oee({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l?.get?.("type"),useVlSizeChannel:d});h=h||{[c]:hie(c,u,l,o,p)};const m="band"===l?.get?.("type")&&"band"in h[c]?"top":"middle",g=uie(t,r,o,m),y="xc"===g||"yc"===g,v=rie(t,r),b=D7({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:v,defaultRef:oie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:y?.5:Z6(p)?{signal:`(1-${p})/2`}:E7(p)?(1-p.band)/2:0});if(c)return{[g]:b,...h};{const e=G5(f),t=h[c],n=v?{...t,offset:v}:t;return{[g]:b,[e]:JE(b)?[b[0],{...b[1],offset:n}]:{...b,offset:n}}}}(u,t,e):cie(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});return function({fieldDef:e,fieldDef2:t,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:l}){const c=Y5(n),f=G5(n),d=G5(c),h=rie(n,o),p=Z6(r)?{signal:`(1-${r.signal})/2`}:E7(r)?(1-r.band)/2:.5;if(W6(e.bin)||e.timeUnit)return{[d]:mie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:p,offset:pie(c,a,u,s,h),config:l}),[f]:mie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:Z6(p)?{signal:`1-${p.signal}`}:1-p,offset:pie(n,a,u,s,h),config:l})};if(H6(e.bin)){const r=O7(e,i,{},{offset:pie(c,a,u,s,h)});if(cee(t))return{[d]:r,[f]:O7(t,i,{},{offset:pie(n,a,u,s,h)})};if(V6(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${kee(e,{expr:"datum"})} + ${e.bin.step})`,offset:pie(n,a,u,s,h)}}}return void w4.warn(_4.channelRequiredForBinned(c))}({fieldDef:u,fieldDef2:l,channel:t,markDef:o,scaleName:d,bandSize:oee({channel:t,fieldDef:u,markDef:o,config:r,scaleType:f}),axisTranslate:e.component.axes[t]?.[0]?.get?.("translate")??.5,spacing:d6(t)?h4("binSpacing",o,r):void 0,reverse:c.get("reverse"),config:r})}function hie(e,t,n,r,i){if(E7(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e)return{scale:t,band:i.band};1!==i.band&&(w4.warn(_4.cannotUseRelativeBandSizeWithNonBandScale(e)),i=void 0)}}else{if(Z6(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(e4(e)&&HS(e.step))return{value:e.step-2}}return{value:Qte(r.view,e)-2}}function pie(e,t,n,r,i){if(A5(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(Z6(n)||Z6(i)||Z6(r)){const e=c4(n),t=c4(i),a=c4(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function mie({channel:e,fieldDef:t,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){return M7({fieldDef:t,channel:e,markDef:r,ref:$7({scaleName:n,fieldOrDatumDef:t,bandPosition:i,offset:o}),config:a})}const gie=new Set(["aria","width","height"]);function yie(e,t){const{fill:n,stroke:r}="include"===t.color?tie(e):{};return{...bie(e.markDef,t),...vie(e,"fill",n),...vie(e,"stroke",r),...eie("opacity",e),...eie("fillOpacity",e),...eie("strokeOpacity",e),...eie("strokeWidth",e),...eie("strokeDash",e),...nie(e),...Yre(e),...Vre(e,"href"),...Jre(e)}}function vie(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===h4("invalid",o,r)&&n&&!y7(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&j9(i)&&(t[o]=!0)}return t}),{}),i=_3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>N7(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:C6});if(r)return{[t]:[{test:r,value:null},..._S(n)]}}return n?{[t]:n}:{}}function bie(e,t){return n4.reduce(((n,r)=>(gie.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=u4(e[r])),n)),{})}function xie(e){const{config:t,markDef:n}=e;if(h4("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&j9(i)&&(t[o]=!0)}return t}),{}),i=_3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>N7(e,t))).join(` ${e} `)}return}(e,{channels:f6});if(t)return{defined:{signal:t}}}return{}}function wie(e,t){if(void 0!==t)return{[e]:u4(t)}}const _ie="voronoi",kie={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(_ie)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(y7(o))return w4.warn(_4.nearestNotSupportForContinuous(o)),n;const a={name:e.getName(_ie),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Yre(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.indexOf(_ie)>=0&&(u=!0)})),u||n.splice(s+1,0,a),n}},Eie={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Bte(e.bind),parse:(e,t,n)=>Wie(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=kie.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const u=A3(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift({name:u,...a?{init:Are(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${tA(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+Lie))[0],a=r+Tre,s=i.items.map((e=>A3(`${r}_${e.field}`))),u=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Sie="_toggle",Aie={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Sie,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Lie,r=t.name+Sie;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Uie(e)}}, `)+`${r} ? ${n} : null`}},Cie={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=GS(t.clear)?HK(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Eie.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===A3(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+Lie));r(e,"null"),Aie.defined(t)&&(e=n.findIndex((e=>e.name===t.name+Sie)),r(e,"false"))}return n}},Die={defined:e=>{const t="global"===e.resolve&&e.bind&&Bte(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Pte;return t&&!n&&w4.warn(_4.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{const r=i3(n);if(r.select=GS(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Wie(t,r),KE(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=_S(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=Ite(t.bind)?t.bind.legend:"click",o=GS(i)?HK(i,"view"):_S(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Ite(t.bind)&&t.bind.legend,o=e=>t=>{const n=i3(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${A3(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+Lie)),a=r+Tre,s=i.items.filter((e=>e.hasLegend)).map((e=>A3(`${r}_${A3(e.field)}_legend`))),u=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const l=n.find((e=>e.name===r+Sie)),c=Ite(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:c}):l.on[0].events=c),n}};const Mie="_translate_anchor",Fie="_translate_delta",Nie={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Pre.defined(t),o=r+Mie,{x:a,y:s}=t.project.hasChannel;let u=HK(t.translate,"scope");return i||(u=u.map((e=>(e.between[0].markname=r+Ire,e)))),n.push({name:o,value:{},on:[{events:u.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?Lre(e,Y3):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?Lre(e,X3):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Fie,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Oie(e,t,a,"width",n),void 0!==s&&Oie(e,t,s,"height",n),n}};function Oie(e,t,n,r,i){const o=t.name,a=o+Mie,s=o+Fie,u=n.channel,l=Pre.defined(t),c=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=d.get("reverse"),m=`${a}.extent_${u}`,g=`${l?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${l?u===Y3?p?"":"-":p?"-":"":""}${s}.${u} / ${l?`${f}`:`span(${m})`}`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:l?g:`clampRange(${g}, 0, ${f})`})}const $ie="_zoom_anchor",Tie="_zoom_delta",zie={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Pre.defined(t),o=r+Tie,{x:a,y:s}=t.project.hasChannel,u=tA(e.scaleName(Y3)),l=tA(e.scaleName(X3));let c=HK(t.zoom,"scope");return i||(c=c.map((e=>(e.markname=r+Ire,e)))),n.push({name:r+$ie,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Rie(e,t,a,"width",n),void 0!==s&&Rie(e,t,s,"height",n),n}};function Rie(e,t,n,r,i){const o=t.name,a=n.channel,s=Pre.defined(t),u=i.filter((e=>e.name===n.signals[s?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c.get("type"),d=s?Lre(e,a):u.name,h=o+Tie,p=`${s?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${o}_zoom_anchor.${a}`}, ${h}${s?"pow"===f?`, ${c.get("exponent")??1}`:"symlog"===f?`, ${c.get("constant")??1}`:"":""})`;u.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${l})`})}const Pie="_store",Lie="_tuple",Bie="_modify",Iie="vlSelectionResolve",jie=[Wre,Ure,Rre,Aie,Eie,Pre,Die,Cie,Nie,zie,kie];function Uie(e,{escape:t}={escape:!0}){let n=t?tA(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!Sse(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of O5)e[t]&&(n+=` + '__facet_${t}_' + (facet[${tA(r.vgField(t))}])`)}return n}function qie(e){return k3(e.component.selection??{}).reduce(((e,t)=>e||t.project.items.some((e=>e.field===Pte))),!1)}function Wie(e,t){!GS(t.select)&&t.select.on||delete e.events,!GS(t.select)&&t.select.clear||delete e.clear,!GS(t.select)&&t.select.toggle||delete e.toggle}function Hie(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...Hie(e.object)),t.push(...Hie(e.property))),t)}function Vie(e){return"MemberExpression"===e.object.type?Vie(e.object):"datum"===e.object.name}function Gie(e){const t=LQ(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&Vie(e)&&n.add(Hie(e).slice(1).join("."))})),n}class Yie extends Nre{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Jie(this.model,this.filter,this),this._dependentFields=Gie(this.expr)}clone(){return new Yie(null,this.model,i3(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Xie(e,t,n,r="datum"){const i=GS(t)?t:t.param,o=A3(i),a=tA(o+Pie);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const u=`vlSelectionTest(${a}, ${r}${"global"===s.resolve?")":`, ${tA(s.resolve)})`}`,l=`length(data(${a}))`;return!1===t.empty?`${l} && ${u}`:`!${l} || ${u}`}function Qie(e,t,n){const r=A3(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,w4.warn((e.length?"Multiple ":"No ")+`matching ${tA(i)} encoding found for selection ${tA(n.param)}. `+`Using "field": ${tA(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&w4.warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${tA(a)}.`);return`${o.name}[${tA($3(a))}]`}function Jie(e,t,n){return C3(t,(t=>GS(t)?t:function(e){return e?.param}(t)?Xie(e,t,n):l9(t)))}function Kie(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Zie(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const e in c){const n=Vee[e],r=c[e];if(n&&n!==t&&"both"!==n)delete c[e];else if(Wee(r)){const{condition:t,...n}=r,i=_S(t),o=qee[e];if(o){const{vgProp:t,part:r}=o;Kie(c,r,t,[...i.map((e=>{const{test:t,...n}=e;return{test:Jie(null,t),...n}})),n]),delete c[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t,...n}=e;return`${Jie(null,t)} ? ${l4(n)} : `})).join("")+l4(n)};c[e]=t}}else if(Z6(r)){const t=qee[e];if(t){const{vgProp:n,part:i}=t;Kie(c,i,n,r),delete c[e]}}c3(["labelAlign","labelBaseline"],e)&&null===c[e]&&delete c[e]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:e}=c.encode;c.encode={...e?{grid:e}:{}},w3(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:P3(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;c.encode?.labels?.update&&Z6(c.encode.labels.update.text)&&(e=T3(s,"datum.label",c.encode.labels.update.text.signal)),Kie(c,"labels","text",{signal:e})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const t of Hee)e.hasAxisPart(t)||delete c.encode[t];w3(c.encode)&&delete c.encode}const t=function(e,t){if(e)return JE(e)&&!K6(e)?e.map((e=>Fee(e,t))).join(", "):e}(u,n);return{scale:a,orient:o,grid:!1,...t?{title:t}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:P3(l,0)}}}}function eoe(e){const{axes:t}=e.component,n=[];for(const r of f6)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function toe(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([..._3(i),..._3(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${c4(i[t])} : ${c4(o[t])}`};return s}return t[e]}))])}function noe(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in R9?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[];const o="x"===e?"axisX":"axisY",a=Z6(n)?"axisOrient":`axis${M3(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:toe(s,r,e,n),vgAxisConfig:toe(u,r,e,n),axisConfigStyle:roe([...u,...s],r)}}function roe(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=_S(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function ioe(e,t,n,r={}){const i=g4(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const ooe={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return j7(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return U7(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!I9(e)&&cee(t)&&!W6(t?.bin)&&!H6(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||uoe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||soe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&c3(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!KE(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,cee(t)&&!!t.timeUnit,cee(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!I9(t)&&"log"!==t){if(cee(e)){if(W6(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&c3(["month","hours","day","quarter"],Z8(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=loe(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return v4(i?[nee(i)]:[],cee(a)?[nee(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(JE(n))return jee(t,n);if(Z6(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&Eee(t))return 1;return 0}(n,t)};function aoe(e){return`(((${e.signal} % 360) + 360) % 360)`}function soe(e,t,n,r){if(void 0!==e){if("x"===n){if(Z6(e)){const n=aoe(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${Z6(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Z6(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Z6(e)){const n=aoe(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${Z6(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Z6(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function uoe(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(Z6(e)){const n=aoe(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${Z6(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(Z6(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function loe(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?b4(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class coe extends Nre{constructor(e,t){super(e),this.transform=t,this._dependentFields=Gie(this.transform.calculate)}clone(){return new coe(null,i3(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(vee(t)&&K7(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${l9({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new coe(e,{calculate:a,as:foe(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${u3(this.transform)}`}}function foe(e,t,n){return kee(e,{prefix:t,suffix:"sort_index",...n??{}})}function doe(e,t){return c3(["top","bottom"],t)?"column":c3(["left","right"],t)||"row"===e?"row":"column"}function hoe(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return P3((t||{})[e],i[e],n.header[e])}function poe(e,t,n,r){const i={};for(const o of e){const e=hoe(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const moe=["row","column"],goe=["header","footer"];function yoe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=poe(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=doe(t,s),l=q3(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...boe(l,u),...voe(u,l,o),...Aoe(r,i,t,Ote,Fte)}}}function voe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=uoe(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function boe(e,t){const n=soe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function xoe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of goe)if(n[i])for(const o of n[i]){const a=koe(e,t,i,n,o);null!=a&&r.push(a)}return r}function woe(e,t){const{sort:n}=e;return J7(n)?{field:kee(n,{expr:"datum"}),order:n.order??"ascending"}:JE(n)?{field:foe(e,t,{expr:"datum"}),order:"ascending"}:{field:kee(e,{expr:"datum"}),order:n??"ascending"}}function _oe(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=poe(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=L7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=doe(t,s);return{text:{signal:u?T3(T3(u,"datum.label",l),"datum.value",kee(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...boe(o,c),...voe(c,o,a),...Aoe(n,e,t,$te,Nte)}}function koe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=poe(["labelOrient"],a.header,s,t);("row"===t&&!c3(["top","bottom"],e)||"column"===t&&!c3(["left","right"],e))&&(o=_oe(a,t,s))}const u=Sse(e)&&!Z7(e.facet),l=i.axes,c=l?.length>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:woe(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Eoe={column:{start:0,end:1},row:{start:1,end:0}};function Soe(e,t){return Eoe[t][e]}function Aoe(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=hoe(a,t?.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function Coe(e){return[...Doe(e,"width"),...Doe(e,"height"),...Doe(e,"childWidth"),...Doe(e,"childHeight")]}function Doe(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(I9(r)&&e4(o)){const r=e.scaleName(n);if(Sse(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Moe(r,o)]}return[Moe(r,o),{name:i,update:Foe(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${Xte(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Moe(e,t){return{name:`${e}_step`,value:t.step}}function Foe(e,t,n){const r=t.get("type"),i=t.get("padding"),o=P3(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${c4(a)}, ${c4(o)}) * ${e}_step`}function Noe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Ooe(e,t){return _3(e).reduce(((n,r)=>{const i=e[r];return{...n,...Hre(t,i,r,(e=>u4(e.value)))}}),{})}function $oe(e,t){if(Cse(t)||Sse(t))return"shared";if(Ase(t))return d6(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Toe(e,t){const n=e.scale[t],r=d6(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&w4.warn(_4.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}const zoe={...Rte,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Roe=_3(zoe);class Poe extends cre{}const Loe={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&"trail"!==l;let f={...f4({},n,w7),...tie(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=void 0===d?Boe(s.opacity)??a.opacity:void 0;if(f.fill)if("fill"===r||c&&r===a5)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=u4(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=u4(m??1));else if(JE(f.fill)){const e=Ioe(s.fill??s.color)??a.fill??(c&&a.color);e&&(f.fill=u4(e))}if(f.stroke)if("stroke"===r||!c&&r===a5)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(JE(f.stroke)){const e=P3(Ioe(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(f.stroke={value:e})}if(r!==d5){const e=cee(t)&&Uoe(n,i,t);e?f.opacity=[{test:e,...u4(m??1)},u4(u.legend.unselectedOpacity)]:m&&(f.opacity=u4(m))}return f={...f,...e},w3(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?Boe(a.opacity)||o.opacity:void 0;u&&(s.opacity=u4(u));return s={...s,...e},w3(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=cee(t)?Uoe(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=R7(c)?I7({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return w3(d)?void 0:d},entries:function(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function Boe(e){return joe(e,((e,t)=>Math.max(e,t.value)))}function Ioe(e){return joe(e,((e,t)=>P3(e,t.value)))}function joe(e,t){return function(e){const t=e&&e.condition;return!!t&&(JE(t)||yee(t))}(e)?_S(e.condition).reduce(t,e.value):yee(e)?e.value:void 0}function Uoe(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=tA(n.field);return r.map((e=>`(!length(data(${tA(A3(e)+Pie)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const qoe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return j7(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return U7(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(U9(i))return"horizontal"===n?"top"===r||"bottom"===r?Voe(t,"width",a,o):a:Voe(t,"height",u,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(c3(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=Ioe(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Dee(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(F5(n)&&U9(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(JE(n))return jee(t,n);if(Z6(n))return n;return}(t,e)};function Woe(e){const{legend:t}=e;return P3(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(F5(e)){if(c3(["quarter","month","day"],t))return"symbol";if(U9(n))return"gradient"}return"symbol"}(e))}function Hoe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function Voe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Goe(e){const t=Ese(e)?function(e){const{encoding:t}=e,n={};for(const r of[a5,...zte]){const i=$ee(t[r]);i&&e.getScaleComponent(r)&&(r===l5&&cee(i)&&i.type===y9||(n[r]=Xoe(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Goe(r);for(const i of _3(r.component.legends))n.legend[i]=Toe(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Qoe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of _3(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function Yoe(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function Xoe(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new Poe({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of k3(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&Die.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const u=void 0!==n?!n:a.disable;if(s.set("disable",u,void 0!==n),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=$ee(i[t]),f=cee(c)?Z8(c.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",h=Woe({legend:n,channel:t,timeUnit:f,scaleType:l}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:h,direction:Hoe({legend:n,legendType:h,orient:d,legendConfig:a})};for(const r of Roe){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in qoe?qoe[r](p):n[r];if(void 0!==i){const a=Yoe(i,r,n,e.fieldDef(t));(a||void 0===o.legend[r])&&s.set(r,i,a)}}const m=n?.encoding??{},g=s.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=Ooe(m[t]??{},e),r=t in Loe?Loe[t](n,v):n;void 0===r||w3(r)||(y[t]={...g?.length&&cee(c)?{name:`${A3(c.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return w3(y)||s.set("encode",y,!!n?.encoding),s}function Qoe(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of Roe){const r=mre(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Joe(e,t);case"title":return x4(e,t);case"type":return i=!0,dre("symbol")}return pre(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&D3(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&D3(e.explicit,["encode","gradient"])),e}function Joe(e,t){return"circle"===t.value?t:e}function Koe(e){const t=e.component.legends,n={};for(const r of _3(t)){const i=e.getScaleComponent(r),o=s3(i.get("domains"));if(n[o])for(const e of n[o]){Qoe(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return k3(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(n)return;!1===t.aria&&null==o.aria&&(o.aria=!1);if(o.encode?.symbols){const e=o.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||o.stroke||(e.stroke={value:"transparent"});for(const t of zte)o[t]&&delete e[t]}o.title||delete o.title;if(void 0!==r){let e=r;o.encode?.labels?.update&&Z6(o.encode.labels.update.text)&&(e=T3(r,"datum.label",o.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(o,"labels","text",{signal:e})}return o}(t,e.config))).filter((e=>void 0!==e))}function Zoe(e){return Cse(e)||Ase(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),eae(e))}(e):eae(e)}function eae(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=Z6(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return c3(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const tae=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class nae extends cre{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function rae(e){e.component.projection=Ese(e)?function(e){if(e.hasProjection){const t=Q6(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[r5,n5],[o5,i5]])($ee(n[r[0]])||$ee(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(l5)&&e.typedFieldDef(l5).type===y9&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(Ere.Main));return t}(e):void 0,o=new nae(e.projectionName(!0),{...Q6(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)rae(t);const n=d3(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=d3(tae,(n=>!RS(e.explicit,n)&&!RS(t.explicit,n)||!!(RS(e.explicit,n)&&RS(t.explicit,n)&&r3(e.get(n),t.get(n)))));if(r3(e.size,t.size)){if(n)return e;if(r3(e.explicit,{}))return t;if(r3(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new nae(n,t.specifiedProjection,t.size,i3(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function iae(e,t,n,r){if(Uee(t,n)){const i=Ese(e)?e.axis(n)??e.legend(n)??{}:{},o=kee(t,{expr:"datum"}),a=kee(t,{expr:"datum",binSuffix:"end"});return{formulaAs:kee(t,{binSuffix:"range",forAs:!0}),formula:V7(o,a,i.format,i.formatType,r)}}return{}}function oae(e,t){return`${q6(e)}_${t}`}function aae(e,t,n){const r=oae(Pee(n,void 0)??{},t);return e.getName(`${r}_bins`)}function sae(e,t,n){let r,i;r=function(e){return"as"in e}(e)?GS(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[kee(e,{forAs:!0}),kee(e,{binSuffix:"end",forAs:!0})];const o={...Pee(t,void 0)},a=oae(o,e.field),{signal:s,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(G6(o.extent)){const e=o.extent;i=Qie(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}}}}class uae extends Nre{constructor(e,t){super(e),this.bins=t}clone(){return new uae(null,i3(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(gee(n)&&W6(n.bin)){const{key:i,binComponent:o}=sae(n,n.bin,t);e[i]={...o,...e[i],...iae(t,n,r,t.config)}}return e}),{});return w3(n)?null:new uae(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=sae(t,t.bin,n);return new uae(e,{[r]:i})}merge(e,t){for(const n of _3(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=m3([...this.bins[n].as,...e.bins[n].as],u3)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(k3(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(k3(this.bins).map((e=>e.field)))}hash(){return`Bin ${u3(this.bins)}`}assemble(){return k3(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:$3(e.field),as:n,signal:e.signal,...G6(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:$3(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:kee({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function lae(e,t,n,r){const i=Ese(r)?r.encoding[Y5(t)]:void 0;if(gee(n)&&Ese(r)&&aee(n,i,r.markDef,r.config))e.add(kee(n,{})),e.add(kee(n,{suffix:"end"})),n.bin&&Uee(n,t)&&e.add(kee(n,{binSuffix:"range"}));else if(t in C5){const n=function(e){switch(e){case n5:return"y";case i5:return"y2";case r5:return"x";case o5:return"x2"}}(t);e.add(r.getName(n))}else e.add(kee(n));return e}class cae extends Nre{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new cae(null,new Set(this.dimensions),i3(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([kee(e,{forAs:!0})]);else{if(R6(o)||P6(o)){const e=R6(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([kee({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([kee(e,{forAs:!0})]);D6(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([kee({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([kee({field:a,aggregate:"max"},{forAs:!0})]))}else lae(i,n,e,t)})),i.size+_3(r).length===0?null:new cae(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};for(const e of t.aggregate){const{op:t,field:n,as:i}=e;t&&("count"===t?(r["*"]??(r["*"]={}),r["*"].count=new Set([i||kee(e,{forAs:!0})])):(r[n]??(r[n]={}),r[n][t]=new Set([i||kee(e,{forAs:!0})])))}for(const e of t.groupby??[])n.add(e);return n.size+_3(r).length===0?null:new cae(e,n,r)}merge(e){return y3(this.dimensions,e.dimensions)?(function(e,t){for(const n of _3(t)){const r=t[n];for(const t of _3(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(w4.debug("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._3(this.measures)])}producedFields(){const e=new Set;for(const t of _3(this.measures))for(const n of _3(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${u3({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of _3(this.measures))for(const i of _3(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:$3(r));return{type:"aggregate",groupby:[...this.dimensions].map($3),ops:e,fields:t,as:n}}}class fae extends Nre{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of O5){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[kee(n),...W6(r)?[kee(n,{binSuffix:"end"})]:[]],...J7(i)?{sortField:i}:JE(i)?{sortIndexField:foe(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of O5)this[t]&&(e+=` ${t.charAt(0)}:${u3(this[t])}`);return e}get fields(){const e=[];for(const t of O5)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of O5)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of f6){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(I9(r)&&e4(i)){const n=rse(ise(this.childModel,t));n?e[t]=n:w4.warn(_4.unknownField(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:u}=this[e];if(s){const{op:e=G7,field:t}=s;i.push(t),o.push(e),a.push(kee(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of moe){for(const t of goe){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:o,column:a}=i;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[V3,H3])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function dae(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function hae(e){const t={};return t3(e.filter,(e=>{if(s9(e)){let n=null;e9(e)?n=a4(e.equal):n9(e)?n=a4(e.lte):t9(e)?n=a4(e.lt):r9(e)?n=a4(e.gt):i9(e)?n=a4(e.gte):o9(e)?n=e.range[0]:a9(e)&&(n=(e.oneOf??e.in)[0]),n&&(L8(n)?t[e.field]="date":HS(n)?t[e.field]="number":GS(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function pae(e){const t={};function n(e){var n;Bee(e)?t[e.field]="date":"quantitative"===e.type&&(GS(n=e.aggregate)&&c3(["min","max"],n))?t[e.field]="number":R3(e.field)>1?e.field in t||(t[e.field]="flatten"):vee(e)&&J7(e.sort)&&R3(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Ese(e)||Sse(e))&&e.forEachFieldDef(((t,r)=>{if(gee(t))n(t);else{const i=V5(r),o=e.fieldDef(i);n({...t,type:o.type})}})),Ese(e)){const{mark:n,markDef:r,encoding:i}=e;if(y7(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];cee(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class mae extends Nre{constructor(e,t){super(e),this._parse=t}clone(){return new mae(null,i3(this._parse))}hash(){return`Parse ${u3(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!xre(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of _3(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:w4.warn(_4.differentParse(e,n[e],t.value)))}for(const e of _3(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:w4.warn(_4.differentParse(e,t[e],n)))}const i=new cre(t,n);r.copyAll(i);const o={};for(const e of _3(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===_3(o).length||r.parseNothing?null:new mae(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of _3(this._parse)){const n=this._parse[t];1===R3(t)&&(e[t]=n)}return e}producedFields(){return new Set(_3(this._parse))}dependentFields(){return new Set(_3(this._parse))}assembleTransforms(e=!1){return _3(this._parse).filter((t=>!e||R3(t)>1)).map((e=>{const t=function(e,t){const n=F3(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${dae(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${dae(t.slice(4,t.length))}')`;return w4.warn(_4.unrecognizedParse(t)),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:z3(e)}})).filter((e=>null!==e))}}class gae extends Nre{clone(){return new gae(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Pte])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Pte}}}var yae={};class vae extends Nre{constructor(e,t){super(e),this.params=t}clone(){return new vae(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${u3(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class bae extends Nre{constructor(e,t){super(e),this.params=t}clone(){return new bae(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${u3(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class xae extends Nre{constructor(e){let t;if(super(null),e??(e={name:"source"}),xre(e)||(t=e.format?{...a3(e.format,["parse"])}:{}),vre(e))this._data={values:e.values};else if(yre(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];c3(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else _re(e)?this._data={values:[{type:"Sphere"}]}:(bre(e)||xre(e))&&(this._data={});this._generator=xre(e),e.name&&(this._name=e.name),t&&!w3(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var wae,_ae=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},kae=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function Eae(e){return e instanceof xae||e instanceof vae||e instanceof bae}t(yae,"isDataSourceNode",(function(){return Eae}));class Sae{constructor(){wae.set(this,void 0),_ae(this,wae,!1)}setModified(){_ae(this,wae,!0)}get modifiedFlag(){return kae(this,wae)}}t(yae,"Optimizer",(function(){return Sae})),wae=new WeakMap;class Aae extends Sae{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}t(yae,"BottomUpOptimizer",(function(){return Aae}));class Cae extends Sae{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}t(yae,"TopDownOptimizer",(function(){return Cae}));class Dae extends yae.TopDownOptimizer{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of _3(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Mae extends yae.TopDownOptimizer{constructor(e){super(),this.requiresSelectionId=e&&qie(e)}run(e){e instanceof gae&&(this.requiresSelectionId&&(yae.isDataSourceNode(e.parent)||e.parent instanceof cae||e.parent instanceof mae)||(this.setModified(),e.remove()))}}class Fae extends yae.Optimizer{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof $re&&(n=e.producedFields(),v3(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class Nae extends yae.TopDownOptimizer{constructor(){super()}run(e){e instanceof Ore&&!e.isRequired()&&(this.setModified(),e.remove())}}class Oae extends yae.BottomUpOptimizer{run(e){if(!(yae.isDataSourceNode(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof mae)if(e instanceof mae)this.setModified(),e.merge(t);else{if(x3(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class $ae extends yae.BottomUpOptimizer{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof mae));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of _3(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!w3(r)){this.setModified();const n=new mae(e,r);for(const i of t){if(i instanceof mae)for(const e of _3(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof mae&&0===_3(i.parse).length&&i.remove()}}}}}class Tae extends yae.BottomUpOptimizer{run(e){e instanceof Ore||e.numChildren()>0||e instanceof fae||e instanceof xae||(this.setModified(),e.remove())}}class zae extends yae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof $re)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class Rae extends yae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof cae)),n={};for(const e of t){const t=u3(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of _3(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Pae extends yae.BottomUpOptimizer{constructor(e){super(),this.model=e}run(e){const t=!(yae.isDataSourceNode(e)||e instanceof Yie||e instanceof mae||e instanceof gae),n=[],r=[];for(const i of e.children)i instanceof uae&&(t&&!x3(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof uae?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class Lae extends yae.BottomUpOptimizer{run(e){const t=[...e.children];if(!f3(t,(e=>e instanceof Ore))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof Ore){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof Ore))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class Bae extends Nre{constructor(e,t){super(e),this.transform=t}clone(){return new Bae(null,i3(this.transform))}addDimensions(e){this.transform.groupby=m3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??kee(e)}hash(){return`JoinAggregateTransform ${u3(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class Iae extends Nre{constructor(e,t){super(e),this._stack=t}clone(){return new Iae(null,i3(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(P3(e.order,"ascending"));const u={field:a,order:s};let l;return l=function(e){return JE(e)&&e.every((e=>GS(e)))&&e.length>1}(i)?i:GS(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Iae(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:l})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){u=Oee(r[i])}const l=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=kee(t.fieldDef);return n&&e.push(n),e}),[])}(t),c=t.encoding.order;let f;return f=JE(c)||cee(c)?y4(c):l.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new Iae(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:l,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${u3(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[kee(e,{binSuffix:"mid"})]:[kee(e,{}),kee(e,{binSuffix:"end"})]:[kee(e)]:n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+kee(n,{expr:"datum"})+`+${1-o}*`+kee(n,{expr:"datum",binSuffix:"end"}),as:kee(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:kee(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:u,offset:a}),e}}class jae extends Nre{constructor(e,t){super(e),this.transform=t}clone(){return new jae(null,i3(this.transform))}addDimensions(e){this.transform.groupby=m3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??kee(e)}hash(){return`WindowTransform ${u3(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>L6(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)a.push(e.field),s.push(e.order??"ascending");const u={field:a,order:s},l=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:u,...void 0!==l?{ignorePeers:l}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Uae(e){if(e instanceof fae)if(1!==e.numChildren()||e.children[0]instanceof Ore){const n=e.model.component.data.main;qae(n);const r=(t=e,function e(n){if(!(n instanceof fae)){const r=n.clone();if(r instanceof Ore){const e=Wae+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof cae||r instanceof Iae||r instanceof jae||r instanceof Bae)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof cae||t instanceof Iae||t instanceof jae||t instanceof Bae)&&t.addDimensions(e.fields),t.swapWithParent(),Uae(e)}else e.children.map(Uae);var t}function qae(e){if(e instanceof Ore&&e.type===Ere.Main&&1===e.numChildren()){const t=e.children[0];t instanceof fae||(t.swapWithParent(),qae(e))}}const Wae="scale_";function Hae(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Hae(t.children))return!1}return!0}function Vae(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Gae(e,t,n){let r=e.sources,i=!1;return i=Vae(new Nae,r)||i,i=Vae(new Mae(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=Vae(new Tae,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=Vae(new Oae,r)||i,i=Vae(new Pae(t),r)||i,i=Vae(new Fae,r)||i,i=Vae(new $ae,r)||i,i=Vae(new Rae,r)||i,i=Vae(new zae,r)||i,i=Vae(new Dae,r)||i,i=Vae(new Lae,r)||i),e.sources=r,i}class Yae{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new Yae((()=>e(t)))}}function Xae(e){Ese(e)?function(e){const t=e.component.scales;for(const n of _3(t)){const r=Qae(e,n);if(t[n].setWithExplicit("domains",r),ese(e,n),e.component.data.isFaceted){let t=e;for(;!Sse(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)t4(e)&&(e.data=Wae+e.data.replace(Wae,""))}}}(e):function(e){for(const t of e.children)Xae(t);const t=e.component.scales;for(const n of _3(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):mre(r,e.getWithExplicit("domains"),"domains","scale",nse);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&w4.warn(_4.NEEDS_SAME_SELECTION),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Qae(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=tse(t,n);if(!e)return void w4.warn(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=tse(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&$ee(r.x2)?$ee(r.x)?mre(Kae(n,i,e,"x"),Kae(n,i,e,"x2"),"domain","scale",nse):Kae(n,i,e,"x2"):"y"===t&&$ee(r.y2)?$ee(r.y)?mre(Kae(n,i,e,"y"),Kae(n,i,e,"y2"),"domain","scale",nse):Kae(n,i,e,"y2"):Kae(n,i,e,t)}function Jae(e,t,n){const r=Z8(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${Iee(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function Kae(e,t,n,r){const{encoding:i}=n,o=$ee(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return e&&e.unionWith}(t)){const i=Kae(e,void 0,n,r),o=Jae(t.unionWith,a,s);return fre([...i.value,...o])}if(Z6(t))return fre([t]);if(t&&"unaggregated"!==t&&!W9(t))return fre(Jae(t,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return dre([[0,1]]);const e=n.requestDataName(Ere.Main);return dre([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const l=D6(r)&&cee(o)?function(e,t,n){if(!I9(n))return;const r=e.fieldDef(t),i=r.sort;if(K7(i))return{op:"min",field:foe(r,t),order:"ascending"};const{stack:o}=e,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(J7(i)){return Zae(i,o&&!c3(a,i.field))}if(Q7(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:u}=r,l=o&&!c3(a,u);if(R6(s)||P6(s))return Zae({field:kee(r),order:n},l);if(L6(s)||!s)return Zae({op:s,field:u,order:n},l)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(c3(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(dee(o)){return dre(Jae([o.datum],a,s))}const c=o;if("unaggregated"===t){const e=n.requestDataName(Ere.Main),{field:t}=o;return dre([{data:e,field:kee({field:t,aggregate:"min"})},{data:e,field:kee({field:t,aggregate:"max"})}])}if(W6(c.bin)){if(I9(e))return dre("bin-ordinal"===e?[]:[{data:S3(l)?n.requestDataName(Ere.Main):n.requestDataName(Ere.Raw),field:n.vgField(r,Uee(c,r)?{binSuffix:"range"}:{}),sort:!0!==l&&KE(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=c;if(W6(e)){const t=aae(n,c.field,e);return dre([new Yae((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return dre([{data:n.requestDataName(Ere.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&c3(["time","utc"],e)&&aee(c,Ese(n)?n.encoding[Y5(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(Ere.Main);return dre([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return dre(l?[{data:S3(l)?n.requestDataName(Ere.Main):n.requestDataName(Ere.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(Ere.Main),field:n.vgField(r)}])}function Zae(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":G7),...r?{field:$3(r)}:{},...i?{order:i}:{}}}function ese(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=W9(r)&&r,a=V6(i)&&G6(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function tse(e,t){const{aggregate:n,type:r}=e;return n?GS(n)&&!U6[n]?{valid:!1,reason:_4.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:_4.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:_4.unaggregateDomainHasNoEffectForRawField(e)}}function nse(e,t,n,r){return e.explicit&&t.explicit&&w4.warn(_4.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function rse(e){if(t4(e)&&GS(e.field))return e.field;if(function(e){return!JE(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(t4(n)&&GS(n.field))if(t){if(t!==n.field)return w4.warn(_4.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=n.field;return w4.warn(_4.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!JE(e)&&"fields"in e&&"data"in e}(e)){w4.warn(_4.FACETED_INDEPENDENT_SAME_SOURCE);const t=e.fields[0];return GS(t)?t:void 0}}function ise(e,t){return function(e){const t=m3(e.map((e=>{if(t4(e)){const{sort:t,...n}=e;return n}return e})),u3),n=m3(e.map((e=>{if(t4(e)){const t=e.sort;return void 0===t||S3(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),u3);if(0===t.length)return;if(1===t.length){const t=e[0];if(t4(t)&&n.length>0){let e=n[0];if(n.length>1)w4.warn(_4.MORE_THAN_ONE_SORT),e=!0;else if(KE(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=m3(n.map((e=>S3(e)||!("op"in e)||GS(e.op)&&e.op in z6?e:(w4.warn(_4.domainSortDropped(e)),!0))),u3);let i;1===r.length?i=r[0]:r.length>1&&(w4.warn(_4.MORE_THAN_ONE_SORT),i=!0);const o=m3(e.map((e=>t4(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0])return{data:o[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}};return{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map((t=>(t4(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function ose(e){return Cse(e)||Ase(e)?e.children.reduce(((e,t)=>e.concat(ose(t))),ase(e)):ase(e)}function ase(e){return _3(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=function(e,t,n,r){if(d6(n)){if(e4(e))return{step:{signal:`${t}_step`}}}else if(KE(e)&&t4(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),h=ise(e,n),p=s?function(e,t,n,r){const i=Qie(e,t.param,t);return{signal:j9(n.get("type"))&&JE(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:o,type:a,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==c?{reverse:c}:{},...f}),t}),[])}class sse extends cre{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||f3(this.get("domains"),(e=>JE(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const use=["range","scheme"];function lse(e){return"x"===e?"width":"y"===e?"height":void 0}function cse(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=lse(t),a=e.getName(o);if(KE(r)&&r.binned&&void 0!==r.step)return new Yae((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(W6(r)){const t=aae(e,i,r);return new Yae((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function fse(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of use)if(void 0!==n[r]){const o=e7(i,r),a=t7(e,r);if(o)if(a)w4.warn(a);else switch(r){case"range":{const r=n.range;if(JE(r)){if(d6(e))return fre(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return Yae.fromName(r,n)}return e})))}else if(KE(r))return fre({data:t.requestDataName(Ere.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return fre(r)}case"scheme":return fre(dse(n[r]))}else w4.warn(_4.scalePropertyNotWorkWithScaleType(i,r,e))}if(e===Y3||e===X3){const t=e===Y3?"width":"height",n=r[t];if(Vte(n)){if(I9(i))return fre({step:n.step});w4.warn(_4.stepDropped(t))}}const{rangeMin:o,rangeMax:a}=n,s=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=$ee(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Y3:case X3:{if(c3(["point","band"],u))if(e!==Y3||n.width){if(e===X3&&!n.height){const e=Jte(r.view,"height");if(Vte(e))return e}}else{const e=Jte(r.view,"width");if(Vte(e))return e}const i=lse(e),o=t.getName(i);return e===X3&&j9(u)?[Yae.fromName(a,o),0]:[0,Yae.fromName(a,o)]}case c5:{const o=hse(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:cse(n,"x"),y:cse(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=mse(t,i,r.view);return HS(e)?e-1:new Yae((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=mse(t,i,r.view);return HS(e)?Math.pow(pse*e,2):new Yae((()=>`pow(0.95 * ${e.signal}, 2)`))}}throw new Error(_4.incompatibleChannel("size",e))}(i,n,t,r);return q9(u)?function(e,t,n){const r=()=>{const r=c4(t),i=c4(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return Z6(t)?new Yae(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&JE(n)?n.length+1:(w4.warn(_4.domainRequiredForThresholdScale(r)),3)}}(u,r,l,e)):[o,a]}case e5:return[0,2*Math.PI];case f5:return[0,360];case K3:return[0,new Yae((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case m5:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case g5:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case l5:return"symbol";case a5:case s5:case u5:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case d5:case h5:case p5:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t);return(void 0!==o||void 0!==a)&&e7(i,"rangeMin")&&JE(s)&&2===s.length?fre([o??s[0],a??s[1]]):dre(s)}function dse(e){return function(e){return!GS(e)&&!!e.name}(e)?{scheme:e.name,...a3(e,["name"])}:{scheme:e}}function hse(e,t,n){if(t)return Z6(t)?{signal:`${t.signal} ? 0 : ${hse(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(_4.incompatibleChannel("size",e))}const pse=.95;function mse(e,t,n){const r=Vte(e.width)?e.width.step:Qte(n,"width"),i=Vte(e.height)?e.height.step:Qte(n,"height");return t.x||t.y?new Yae((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function gse(e,t){Ese(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of _3(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=$ee(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=e7(h,t),y=t7(s,t);if(void 0!==d&&(g?y&&w4.warn(y):w4.warn(_4.scalePropertyNotWorkWithScaleType(h,t,s))),g&&void 0===y)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":L8(u[t])||"temporal"===n||e?l.set(t,{signal:Iee(u[t],{type:n,timeUnit:e})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const n=t in yse?yse[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}(e,t):bse(e,t)}const yse={bins:({model:e,fieldOrDatumDef:t})=>cee(t)?function(e,t){const n=t.bin;if(W6(n)){const r=aae(e,t.field,n);return new Yae((()=>e.getSignalName(r)))}if(H6(n)&&V6(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(c3([a5,s5,u5],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:r})=>function(e,t,n,r){if(Oee(r)?.bin||JE(n)||c3([k9,E9],e))return;return t in c6||void 0}(e,t,n,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(e in c6){if(U9(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!cee(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===D9)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>function(e,t,n,r){if(void 0!==e)return;if(t in c6){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return P3(e,"bar"===n?t:i)}return}(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>function(e,t,n,r,i,o){if(void 0!==e)return;if(t in c6&&n===M9){const{bandPaddingOuter:e}=o;return P3(e,Z6(i)?{signal:`${i.signal}/2`}:i/2)}return}(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return j9(e)&&"descending"===t?Z6(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(j9(e)&&"descending"===t)return!0;return}(t,cee(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&j9(i)){if(JE(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!q9(i))return!0;if((!cee(t)||!t.bin)&&c3([...f6,...p6],e)){const{orient:t,type:n}=r;return!c3(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function vse(e){Ese(e)?function(e){const t=e.component.scales;for(const n of C6){const r=t[n];if(!r)continue;const i=fse(n,e);r.setWithExplicit("range",i)}}(e):bse(e,"range")}function bse(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?vse(n):gse(n,t);for(const r of _3(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=mre(i,e.getWithExplicit(t),t,"scale",hre(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}n[r].setWithExplicit(t,i)}}function xse(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":if(F5(e)||"discrete"===$6(e))return"shape"===e&&"ordinal"===t.type&&w4.warn(_4.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in c6){if(c3(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&e in h6)return"band";return E7(n[X5(e)])||bee(t)&&t.axis?.tickBand?"band":"point";case"temporal":return F5(e)?"time":"discrete"===$6(e)?(w4.warn(_4.discreteChannelCannotEncode(e,"temporal")),"ordinal"):cee(t)&&t.timeUnit&&Z8(t.timeUnit).utc?"utc":"time";case"quantitative":return F5(e)?cee(t)&&W6(t.bin)?"bin-ordinal":"linear":"discrete"===$6(e)?(w4.warn(_4.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(_4.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return D6(t)?void 0!==o?function(e,t){if(!D6(e))return!1;switch(e){case Y3:case X3:case e5:case K3:return U9(t)||c3(["band","point"],t);case c5:case m5:case d5:case h5:case p5:case f5:return U9(t)||q9(t)||c3(["band","point","ordinal"],t);case a5:case s5:case u5:return"band"!==t;case g5:case l5:return"ordinal"===t||q9(t)}}(t,o)?cee(n)&&(a=o,s=n.type,!(c3([p9,g9],s)?void 0===a||I9(a):s===m9?c3([k9,E9,void 0],a):s!==h9||c3([b9,x9,w9,_9,S9,A9,C9,v9,void 0],a)))?(w4.warn(_4.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(w4.warn(_4.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null;var a,s}function wse(e){Ese(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e;return C6.reduce(((i,o)=>{const a=$ee(t[o]);if(a&&n===g7&&o===l5&&a.type===y9)return i;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const t=xse(s,o,a,r);i[o]=new sse(e.scaleName(`${o}`,!0),{value:t,explicit:s.type===t})}return i}),{})}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){wse(n);for(const o of _3(n.component.scales))if((t=i.scale)[o]??(t[o]=$oe(o,e)),"shared"===i.scale[o]){const e=r[o],t=n.component.scales[o].getWithExplicit("type");e?N9(e.value,t.value)?r[o]=mre(e,t,"type","scale",_se):(i.scale[o]="independent",delete r[o]):r[o]=t}}for(const t of _3(r)){const i=e.scaleName(t,!0),o=r[t];n[t]=new sse(i,o);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const _se=hre(((e,t)=>$9(e)-$9(t)));class kse{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Ese(e){return"unit"===e?.type}function Sse(e){return"facet"===e?.type}function Ase(e){return"concat"===e?.type}function Cse(e){return"layer"===e?.type}class Dse{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=Q6(a),this.name=e.name??r,this.title=K6(e.title)?{text:e.title}:e.title?Q6(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new kse,this.projectionNameMap=n?n.projectionNameMap:new kse,this.signalNameMap=n?n.signalNameMap:new kse,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map((e=>$ne(e)?{filter:n3(e.filter,f9)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(tee(e)&&!Z7(e.facet)||qte(e))&&(i.columns=a),Wte(e)&&(i.columns=1);for(const t of Yte)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=HS(n)?n:{row:n.row??o,column:n.column??o}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:tee(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new cre,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?i3(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){wse(e),Xae(e);for(const t of Z9)gse(e,t);t||vse(e)}(this)}parseProjection(){rae(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Goe(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view?.style??"cell"}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of _3(n)){const t=n[e];void 0!==t&&(r[e]=u4(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=u4(this.description)),"unit"!==this.type&&"layer"!==this.type)?w3(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of O5){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:o}=poe(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=doe(r,o),s=Soe(e,a);void 0!==s&&(n[a]=s)}}return w3(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of O5)e[n].title&&t.push(yoe(this,n));for(const e of moe)t=t.concat(xoe(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>Zie(e,"grid",t))),...r.map((e=>Zie(e,"grid",t))),...n.map((e=>Zie(e,"main",t))),...r.map((e=>Zie(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return Koe(this)}assembleProjections(){return Zoe(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...J6(this.config.title).nonMark,...t,...e?{encode:{update:e}}:{}};if(n.text)return c3(["unit","layer"],this.type)?c3(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),w3(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Sse(this.parent)?ose(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return A3((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Ere[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(Sse(this.parent)){const t=m6(Noe(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(I9(e)&&e4(r)){const e=n.get("name"),r=rse(ise(this,t));if(r){return{signal:Foe(e,n,kee({aggregate:"distinct",field:r},{expr:"datum"}))}}return w4.warn(_4.unknownField(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):q5(e)&&D6(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(_4.selectionNotFound(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some?.((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some?.((e=>e.hasOrientSignalRef()))}}class Mse extends Dse{vgField(e,t={}){const n=this.fieldDef(e);if(n)return kee(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?_3(e).reduce(((n,i)=>{const o=e[i];return JE(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=Oee(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){ite(this.getMapping(),((t,n)=>{const r=Oee(t);r&&e(r,n)}),t)}}class Fse extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"]}clone(){return new Fse(null,i3(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${u3(this.transform)}`}assemble(){const{density:e,...t}=this.transform;return{type:"kde",field:e,...t}}}class Nse extends Nre{constructor(e,t){super(e),this.filter=t}clone(){return new Nse(null,{...this.filter})}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==h4("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=D6(i)&&t.getScaleComponent(i);if(o){j9(o.get("type"))&&"count"!==n.aggregate&&!y7(r)&&(e[n.field]=n)}return e}),{});return _3(o).length?new Nse(e,o):null}dependentFields(){return new Set(_3(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${u3(this.filter)}`}assemble(){const e=_3(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=kee(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class Ose extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}clone(){return new Ose(this.parent,i3(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${u3(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class $se extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}clone(){return new $se(null,i3(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${u3(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Tse extends Nre{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Tse(null,i3(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[r5,n5],[o5,i5]]){const i=r.map((e=>{const n=$ee(t.encoding[e]);return cee(n)?n.field:dee(n)?{expr:`${n.datum}`}:yee(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Tse(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(l5)){const r=t.typedFieldDef(l5);r.type===y9&&(e=new Tse(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){const e=(this.fields??[]).filter(GS);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${u3(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class zse extends Nre{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new zse(null,this.projection,i3(this.fields),i3(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[r5,n5],[o5,i5]]){const r=n.map((e=>{const n=$ee(t.encoding[e]);return cee(n)?n.field:dee(n)?{expr:`${n.datum}`}:yee(n)?{expr:`${n.value}`}:void 0})),i=n[0]===o5?"2":"";(r[0]||r[1])&&(e=new zse(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(GS))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${u3(this.fields)} ${u3(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Rse extends Nre{constructor(e,t){super(e),this.transform=t}clone(){return new Rse(null,i3(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new Rse(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(cee(r)&&cee(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:l,keyvals:c}=o.impute,f=ote(t.mark,n);return new Rse(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==u?{value:u}:{},...l?{frame:l}:{},...void 0!==c?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${u3(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:(u=n,void 0!==u?.stop?this.processSequence(n):n)}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};var u;if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Pse extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}clone(){return new Pse(null,i3(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${u3(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class Lse extends Nre{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new Lse(null,i3(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=Kse(o.data,i);e||(e=new xae(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new Ore(e,n,Ere.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(A3(e),e)}catch(t){throw new Error(_4.cannotLookupVariableParameter(e))}if(a=r.materialized,!a)throw new Error(_4.noSameUnitLookup(e))}return new Lse(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?_S(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${u3({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:_S(this.transform.as)}:{}};else{let t=this.transform.as;GS(t)||(w4.warn(_4.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class Bse extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}clone(){return new Bse(null,i3(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${u3(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class Ise extends Nre{constructor(e,t){super(e),this.transform=t,this.transform=i3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}clone(){return new Ise(null,i3(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${u3(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class jse extends Nre{constructor(e,t){super(e),this.transform=t}clone(){return new jse(null,i3(this.transform))}addDimensions(e){this.transform.groupby=m3((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${u3(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Use extends Nre{constructor(e,t){super(e),this.transform=t}clone(){return new Use(null,i3(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${u3(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function qse(e){let t=0;return function n(r,i){if(r instanceof xae&&!r.isGenerator&&!yre(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof mae&&(r.parent instanceof xae&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof fae)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof vae||r instanceof bae||r instanceof Nse||r instanceof Yie||r instanceof coe||r instanceof zse||r instanceof cae||r instanceof Lse||r instanceof jae||r instanceof Bae||r instanceof $se||r instanceof Ose||r instanceof Fse||r instanceof Pse||r instanceof Bse||r instanceof Ise||r instanceof gae||r instanceof Use||r instanceof jse)&&i.transform.push(r.assemble()),(r instanceof uae||r instanceof $re||r instanceof Rse||r instanceof Iae||r instanceof Tse)&&i.transform.push(...r.assemble()),r instanceof Ore)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Ore)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Ore&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Wse(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=hoe("title",null,r,t);let u=Dee(a,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(u=JE(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=hoe("labelOrient",a.header,r,t),c=null!==a.header&&P3(a.header?.labels,r.header.labels,!0),f=c3(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[Hse(e,t,c)]}}}function Hse(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Vse(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Toe(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of n.component.axes[t]){const t="top"===(r=i.get("orient"))||"left"===r||Z6(r)?"header":"footer";a[t]??(a[t]=[Hse(e,o,!1)]);const n=Zie(i,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),i.mainExtracted=!0}}}var r}function Gse(e){for(const t of e.children)t.parseLayoutSize()}function Yse(e,t){const n=Noe(t),r=m6(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const t of e.children){const o=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??$oe(r,e);if("independent"===s&&"step"===o.value){a=void 0;break}if(a){if("independent"===s&&a.value!==o.value){a=void 0;break}a=mre(a,o,n,"")}else a=o}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Xse(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(I9(e)){const e=Jte(r.view,t);return e4(n)||Vte(e)?"step":e}return Xte(r.view,t)}if(e.hasProjection||"arc"===e.mark)return Xte(r.view,t);{const e=Jte(r.view,t);return Vte(e)?e.step:e}}function Qse(e,t,n){return kee(t,{suffix:`by_${kee(e)}`,...n??{}})}class Jse extends Mse{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=kue(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Z7(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=_3(e),n={};for(const r of t){if(![H3,V3].includes(r)){w4.warn(_4.incompatibleChannel(r,"facet"));break}const t=e[r];if(void 0===t.field){w4.warn(_4.emptyFieldDef(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=Ree(e,t);return n.header?n.header=Q6(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=Zse(this),this.child.parseData()}parseLayoutSize(){Gse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of O5)Wse(e,t);Vse(e,"x"),Vse(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of O5)for(const n of goe){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=hoe("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=doe(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Jse)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof Jse?{...this.channelHasField("column")?{encode:{update:{columns:{field:kee(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Jse){if(this.child.channelHasField("column")){const r=kee(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of f6){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(I9(o)&&e4(a)){const i=rse(ise(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):w4.warn(_4.unknownField(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of O5){const t=this.facet[e];if(t){s.push(kee(t));const{bin:u,sort:l}=t;if(W6(u)&&s.push(kee(t,{binSuffix:"end"})),J7(l)){const{field:e,op:s=G7}=l,u=Qse(t,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(e),o.push(s),a.push(u))}else if(JE(l)){const n=foe(t,e);i.push(n),o.push("max"),a.push(n)}}}const u=!!n&&!!r;return{name:e,data:t,groupby:s,...u||i.length>0?{aggregate:{...u?{cross:u}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?J7(n.sort)?[Qse(n,n.sort,{expr:"datum"})]:JE(n.sort)?[foe(n,e,{expr:"datum"})]:[kee(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(J7(e)?e.order:!JE(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return _oe(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of moe)if(e[r]){const i=hoe("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return _oe(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=qse(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:O5.map((e=>this.facetSortFields(e))).flat(),order:O5.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(Dre(this,[]))}]}getMapping(){return this.facet}}function Kse(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const o=e.format?.feature;if((o||i)&&o!==i)continue;const a=t.format?.mesh;if(!r&&!a||r===a)if(vre(e)&&vre(t)){if(r3(e.values,t.values))return n}else if(yre(e)&&yre(t)){if(e.url===t.url)return n}else if(bre(e)&&e.name===n.dataName)return n}return null}function Zse(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new xae({values:[]});return t.push(e),e}const n=Kse(e.data,t);if(n)return xre(e.data)||(n.data.format=h3({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new xae(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.parent?e.parent.component.data.ancestorParse.clone():new gre,o=e.data;xre(o)?(wre(o)?t=new bae(t,o.sequence):kre(o)&&(t=new vae(t,o.graticule)),i.parseNothing=!0):null===o?.format?.parse&&(i.parseNothing=!0),t=mae.makeExplicit(t,e,i)??t,t=new gae(t);const a=e.parent&&Cse(e.parent);(Ese(e)||Sse(e))&&a&&(t=uae.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(Wne(i))a=e=new coe(e,i),o="derived";else if($ne(i)){const r=hae(i);a=e=mae.makeWithAncestors(e,{},r,n)??e,e=new Yie(e,t,i.filter)}else if(Hne(i))a=e=uae.makeFromTransform(e,i,t),o="number";else if(Gne(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new mae(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=$re.makeFromTransform(e,i);else if(Yne(i))a=e=cae.makeFromTransform(e,i),o="number",qie(t)&&(e=new gae(e));else if(Tne(i))a=e=Lse.make(e,t,i,r++),o="derived";else if(jne(i))a=e=new jae(e,i),o="number";else if(Une(i))a=e=new Bae(e,i),o="number";else if(Xne(i))a=e=Iae.makeFromTransform(e,i),o="derived";else if(Qne(i))a=e=new $se(e,i),o="derived";else if(qne(i))a=e=new Ose(e,i),o="derived";else if(zne(i))a=e=new jse(e,i),o="derived";else if(Ine(i))e=new Use(e,i);else if(Vne(i))a=e=Rse.makeFromTransform(e,i),o="derived";else if(Rne(i))a=e=new Fse(e,i),o="derived";else if(Pne(i))a=e=new Bse(e,i),o="derived";else if(Lne(i))a=e=new Ise(e,i),o="derived";else{if(!Bne(i)){w4.warn(_4.invalidTransformIgnored(i));continue}a=e=new Pse(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(t,e,i));const s=function(e){const t={};if(Ese(e)&&e.component.selection)for(const n of _3(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&R3(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=pae(e);t=mae.makeWithAncestors(t,{},{...s,...u},i)??t,Ese(e)&&(t=Tse.parseAll(t,e),t=zse.parseAll(t,e)),(Ese(e)||Sse(e))&&(a||(t=uae.makeFromEncoding(t,e)??t),t=$re.makeFromEncoding(t,e)??t,t=coe.parseAllForSortIndex(t,e));const l=e.getDataName(Ere.Raw),c=new Ore(t,l,Ere.Raw,r);if(n[l]=c,t=c,Ese(e)){const n=cae.makeFromEncoding(t,e);n&&(t=n,qie(e)&&(t=new gae(t))),t=Rse.makeFromEncoding(t,e)??t,t=Iae.makeFromEncoding(t,e)??t}Ese(e)&&(t=Nse.make(t,e)??t);const f=e.getDataName(Ere.Main),d=new Ore(t,f,Ere.Main,r);n[f]=d,t=d,Ese(e)&&function(e,t){for(const[n,r]of E3(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Ore(new Yie(t,e,{param:n}),i,Ere.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let h=null;if(Sse(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(J7(i.sort)){const{field:n,op:r=G7}=i.sort;e=t=new Bae(e,{joinaggregate:[{op:r,field:n,as:Qse(i,i.sort,{forAs:!0})}],groupby:[kee(i)]})}return t}return null}(t,e.facet)??t,h=new fae(t,e,r,d.getSource()),n[r]=h}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:h,ancestorParse:i}}class eue extends Dse{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||w4.warn(_4.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map(((e,t)=>kue(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=Zse(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of _3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Wte(e)?e.vconcat:Hte(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){Gse(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Yse(e,t),Yse(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=Coe(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const tue={disable:1,gridScale:1,scale:1,...Gee,labelExpr:1,encode:1},nue=_3(tue);class rue extends cre{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new rue(i3(this.explicit),i3(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return Z6(this.explicit.orient)}}const iue={bottom:"top",top:"bottom",left:"right",right:"left"};function oue(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=aue(n,i)}}}return e}function aue(e,t){for(const n of nue){const r=mre(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return x4(e,t);case"gridScale":return{explicit:e.explicit,value:P3(e.value,t.value)}}return pre(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function sue(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Z6(n.labelAngle)?n.labelAngle:q3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===loe(r,i))return!0}return e===n[t]}const uue=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function lue(e,t){let n=t.axis(e);const r=new rue,i=$ee(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a["x"===e?"axisX":"axisY"]?.orient||a.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),u=t.getScaleComponent(e).get("type"),l=noe(e,u,s,t.config),c=void 0!==n?!n:ioe("disable",a.style,n?.style,l).configValue;if(r.set("disable",c,void 0!==n),c)return r;n=n||{};const f=function(e,t,n,r,i){const o=t?.labelAngle;if(void 0!==o)return Z6(o)?o:q3(o);{const{configValue:o}=ioe("labelAngle",r,t?.style,i);return void 0!==o?q3(o):n!==Y3||!c3([g9,p9],e.type)||cee(e)&&e.timeUnit?void 0:270}}(i,n,e,a.style,l),d={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,mark:o,config:a};for(const i of nue){const o=i in ooe?ooe[i](d):Xee(i)?n[i]:void 0,s=void 0!==o,u=sue(o,i,n,t,e);if(s&&u)r.set(i,o,u);else{const{configValue:e,configFrom:t}=Xee(i)&&"values"!==i?ioe(i,a.style,n.style,l):{},c=void 0!==e;s&&!c?r.set(i,o,u):("vgAxisConfig"!==t||uue.has(i)&&c||Wee(e)||Z6(e))&&r.set(i,e,!1)}}const h=n.encoding??{},p=Hee.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const o=Ooe(h[i]??{},t),a="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,o=$ee(r[t])??$ee(r[Y5(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;return R7(u)?{text:I7({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n}:n}(t,e,o):o;return void 0===a||w3(a)||(n[i]={update:a}),n}),{});return w3(p)||r.set("encode",p,!!n.encoding||void 0!==n.labelAngle),r}function cue(e,t,n){const r=Q6(e),i=h4("orient",r,n);if(r.orient=function(e,t,n){switch(e){case u7:case p7:case m7:case f7:case l7:case a7:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case o7:if(cee(r)&&(H6(r.bin)||cee(i)&&i.aggregate&&!r.aggregate))return"vertical";if(cee(i)&&(H6(i.bin)||cee(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(cee(r)&&r.type===h9&&!W6(r.bin)||pee(r)))return"horizontal";if(!a&&(cee(i)&&i.type===h9&&!W6(i.bin)||pee(i)))return"vertical"}case c7:if(o&&(!cee(r)||!H6(r.bin))&&a&&(!cee(i)||!H6(i.bin)))return;case i7:if(a)return cee(i)&&H6(i.bin)?"horizontal":"vertical";if(o)return cee(r)&&H6(r.bin)?"vertical":"horizontal";if(e===c7){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case s7:case d7:{const t=hee(r),o=hee(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===m9,a=n.type===m9;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&w4.warn(_4.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const e=h4("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:S7[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===h4("opacity",r,n)&&(r.opacity=function(e,t){if(c3([u7,d7,p7,m7],e)&&!ete(t))return.7;return}(r.type,t));return void 0===h4("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||h4("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function fue(e,t){const{config:n}=e;return{...yie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...iie("x",e,{defaultPos:"mid"}),...iie("y",e,{defaultPos:"mid"}),...eie("size",e),...eie("angle",e),...due(e,n,t)}}function due(e,t,n){return n?{shape:{value:n}}:eie("shape",e)}function hue(e,t,n){if(void 0===h4("align",e,n))return"center"}function pue(e,t,n){if(void 0===h4("baseline",e,n))return"middle"}function mue(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),a=h4("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==a)return a;{const e=o?o.get("range"):void 0;if(e&&e4(e)&&HS(e.step))return 3*e.step/4;return 3*Qte(t.view,i)/4}}const gue={arc:{vgMark:"arc",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...iie("x",e,{defaultPos:"mid"}),...iie("y",e,{defaultPos:"mid"}),...die(e,"radius","arc"),...die(e,"theta","arc")})},area:{vgMark:"area",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...lie("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...lie("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...xie(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...die(e,"x","bar"),...die(e,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:e=>fue(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&cee(n)&&n.type===y9?{field:kee(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...die(e,"x","image"),...die(e,"y","image"),...Vre(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...iie("x",e,{defaultPos:"mid"}),...iie("y",e,{defaultPos:"mid"}),...eie("size",e,{vgChannel:"strokeWidth"}),...xie(e)})},point:{vgMark:"symbol",encodeEntry:e=>fue(e)},rect:{vgMark:"rect",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...die(e,"x","rect"),...die(e,"y","rect")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...yie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...lie("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...lie("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...eie("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>fue(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...yie(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...iie("x",e,{defaultPos:"mid"}),...iie("y",e,{defaultPos:"mid"}),...Vre(e),...eie("size",e,{vgChannel:"fontSize"}),...eie("angle",e),...wie("align",hue(e.markDef,n,t)),...wie("baseline",pue(e.markDef,n,t)),...iie("radius",e,{defaultPos:null}),...iie("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return{...yie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...iie("x",e,{defaultPos:"mid",vgChannel:"xc"}),...iie("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eie("size",e,{defaultValue:mue(e),vgChannel:i}),[o]:u4(h4("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...yie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...iie("x",e,{defaultPos:"mid"}),...iie("y",e,{defaultPos:"mid"}),...eie("size",e),...xie(e)})}};function yue(e){if(c3([s7,i7,h7],e.mark)){const t=ote(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:vue+e.requestDataName(Ere.Main),data:e.requestDataName(Ere.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:xue(e,{fromPrefix:vue})}]}(e,t)}else if(e.mark===o7){const t=i4.some((t=>h4(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=xue(e,{fromPrefix:bue}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let o,a;"x"===e.stack.fieldChannel?(o={...o3(t.encode.update,["y","yc","y2","height",...i4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...a3(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...o3(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...a3(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of i4){const r=p4(n,e.markDef,e.config);t.encode.update[n]?(o[n]=t.encode.update[n],delete t.encode.update[n]):r&&(o[n]=u4(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannel){const t=e.fieldDef(e.stack.groupbyChannel),n=kee(t);n&&s.push(n),(t?.bin||t?.timeUnit)&&s.push(kee(t,{binSuffix:"end"}))}o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=p4(r,e.markDef,e.config);return void 0!==t?{...n,[r]:u4(t)}:n}}),o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(Ere.Main),name:bue+e.requestDataName(Ere.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}(e)}return xue(e)}const vue="faceted_path_";const bue="stack_group_";function xue(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=P3(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=d4(r),u=i.key,l=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!JE(a)&&yee(a)&&l3(a.value)||!a&&l3(h4("order",i,o)))){if((JE(a)||cee(a))&&!n)return y4(a,{expr:"datum"});if(y7(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(cee(r)){const t=r.sort;return JE(t)?{field:kee(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:J7(t)?{field:kee({aggregate:ete(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:Q7(t)?{field:kee(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:kee(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}(e),c=function(e){if(!e.component.selection)return null;const t=_3(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=_3(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),f=h4("aria",r,o),d=gue[n].postEncodingTransform?gue[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:gue[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Ere.Main)},encode:{update:gue[n].encodeEntry(e)},...d?{transform:d}:{}}]}class wue extends Mse{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,Gte(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=x7(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=p4("filled",e,t),i=e.type;return P3(r,i!==u7&&i!==s7&&i!==c7)}(o,i,{graticule:e.data&&kre(e.data)}));const s=this.encoding=nte(e.encoding||{},a,o.filled,i);this.markDef=cue(o,s,i),this.size=function({encoding:e,size:t}){for(const n of f6){const r=X5(n);Vte(t[r])&&hee(e[n])&&(delete t[r],w4.warn(_4.stepDropped(r)))}return t}({encoding:s,size:Gte(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=yne(a,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>jte(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===g7,n=e&&D5.some((t=>mee(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return C6.reduce(((e,n)=>{const r=$ee(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=Q6(e);return JE(t)&&(r.domain=t.map(a4)),JE(n)&&(r.range=n.map(a4)),r}initAxes(e){return f6.reduce(((t,n)=>{const r=e[n];if(mee(r)||n===Y3&&mee(e.x2)||n===X3&&mee(e.y2)){const e=mee(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=_3(e),n={};for(const r of t){const t=e[r];n[r]=Wee(t)?o4(t):a4(t)}return n}initLegends(e){return S6.reduce(((t,n)=>{const r=$ee(e[n]);if(r&&function(e){switch(e){case a5:case s5:case u5:case c5:case l5:case d5:case m5:case g5:return!0;case h5:case p5:case f5:return!1}}(n)){const e=r.legend;t[n]=e?Q6(e):e}return t}),{})}parseData(){this.component.data=Zse(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of f6){const i=X5(r);if(t[i]){const e=t[i];n.layoutSize.set(i,Vte(e)?"step":e,!0)}else{const t=Xse(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=A3(i.name),o=i.select,a=GS(o)?o:o.type,s=KE(o)?i3(o):{type:a},{fields:u,encodings:l,...c}=r[a];for(const e in c)"mark"===e&&(s[e]={...c[e],...s[e]}),void 0!==s[e]&&!0!==s[e]||(s[e]=c[e]??s[e]);const f=n[t]={...s,name:t,type:a,init:i.value,bind:i.bind,events:GS(s.on)?HK(s.on,"scope"):_S(i3(s.on))};for(const t of jie)t.defined(f)&&t.parse&&t.parse(e,f,i)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=yue(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,f6.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[lue(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of k3(e.component.selection??{})){const i=r.name,o=tA(i+Pie);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${Iie}(${o}, ${tA(e)}${n}`})}n=!0;for(const n of jie)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return Fre(t)}(this,e)}assembleSignals(){return[...eoe(this),...Cre(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t];for(const t of k3(e.component.selection??{})){const r={name:t.name+Pie};if(t.init){const n=t.project.items.map((e=>{const{signals:t,...n}=e;return n}));r.values=t.init.map((t=>({unit:Uie(e,{escape:!1}),fields:n,values:Are(t,!1)})))}n.filter((e=>e.name===t.name+Pie)).length||n.push(r)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return Coe(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&Cse(this.parent)||(e=Mre(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Zee(this.encoding,e)}fieldDef(e){return Oee(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return gee(t)?t:null}}class _ue extends Dse{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(fne(e))return new _ue(e,this,this.getName(`layer_${t}`),o,i);if(Jee(e))return new wue(e,this,this.getName(`layer_${t}`),o,i);throw new Error(_4.invalidSpec(e))}))}parseData(){this.component.data=Zse(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;Gse(e=this),Yse(e,"width"),Yse(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of _3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of _3(r.component.axes))n.axis[i]=Toe(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=oue(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of f6){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!Z6(t)){if(r[t]>0&&!n){const n=iue[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const e of t[i])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),eoe(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),Coe(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)Ese(n)&&(t=Mre(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),Koe(this))}}function kue(e,t,n,r,i){if(tee(e))return new Jse(e,t,n,i);if(fne(e))return new _ue(e,t,n,r,i);if(Jee(e))return new wue(e,t,n,r,i);if(function(e){return Wte(e)||Hte(e)||qte(e)}(e))return new eue(e,t,n,i);throw new Error(_4.invalidSpec(e))}function Eue(e,t={}){t.logger&&w4.set(t.logger),t.fieldTitle&&Cee(t.fieldTitle);try{const n=one(eS(t.config,e.config)),r=rre(e,n),i=kue(r,null,"",void 0,n);i.parse(),function(e,t){Hae(e.sources);let n=0,r=0;for(let r=0;r<5&&Gae(e,t,!0);r++)n++;e.sources.map(Uae);for(let n=0;n<5&&Gae(e,t,!1);n++)r++;Hae(e.sources),5===Math.max(n,r)&&w4.warn("Maximum optimization runs(5) reached.")}(i.component.data,i);return{spec:function(e,t,n={},r){const i=e.config?lne(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=qse(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let o=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(o++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Ute(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):GS(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)w4.warn(_4.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";w4.warn(_4.droppingFit(m6(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${m6(e)}`:"fit"}(n)}var a;return{...1===_3(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...lre(n,!1),...lre(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&w4.reset(),t.fieldTitle&&Cee(See)}}n(q2,H2);const Sue=W2.version;t(q2,"version",(function(){return Sue})),t(q2,"compile",(function(){return Eue})),t(q2,"normalize",(function(){return rre}));var Aue=function(e){const[t,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}},Cue={};const Due="#fff",Mue={background:"#333",title:{color:Due,subtitleColor:Due},style:{"guide-label":{fill:Due},"guide-title":{fill:Due}},axis:{domainColor:Due,gridColor:"#888",tickColor:Due}},Fue="#4572a7",Nue={background:"#fff",arc:{fill:Fue},area:{fill:Fue},line:{stroke:Fue,strokeWidth:2},path:{stroke:Fue},rect:{fill:Fue},shape:{stroke:Fue},symbol:{fill:Fue,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Oue="#30a2da",$ue="#cbcbcb",Tue="#f0f0f0",zue="#333",Rue={arc:{fill:Oue},area:{fill:Oue},axis:{domainColor:$ue,grid:!0,gridColor:$ue,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:$ue,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Tue,group:{fill:Tue},legend:{labelColor:zue,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:zue,titleFontSize:14,titlePadding:10},line:{stroke:Oue,strokeWidth:2},path:{stroke:Oue,strokeWidth:.5},rect:{fill:Oue},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Oue},bar:{binSpacing:2,fill:Oue,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Pue="#000",Lue={group:{fill:"#e5e5e5"},arc:{fill:Pue},area:{fill:Pue},line:{stroke:Pue},path:{stroke:Pue},rect:{fill:Pue},shape:{stroke:Pue},symbol:{fill:Pue,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Bue="Benton Gothic, sans-serif",Iue="#82c6df",jue="Benton Gothic Bold, sans-serif",Uue="normal",que={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Wue={background:"#ffffff",title:{anchor:"start",color:"#000000",font:jue,fontSize:22,fontWeight:"normal"},arc:{fill:Iue},area:{fill:Iue},line:{stroke:Iue,strokeWidth:2},path:{stroke:Iue},rect:{fill:Iue},shape:{stroke:Iue},symbol:{fill:Iue,size:30},axis:{labelFont:Bue,labelFontSize:11.5,labelFontWeight:"normal",titleFont:jue,titleFontSize:13,titleFontWeight:Uue},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Bue,labelFontSize:11.5,symbolType:"square",titleFont:jue,titleFontSize:13,titleFontWeight:Uue},range:{category:que["category-6"],diverging:que["fireandice-6"],heatmap:que["fire-7"],ordinal:que["fire-7"],ramp:que["fire-7"]}},Hue="#ab5787",Vue="#979797",Gue={background:"#f9f9f9",arc:{fill:Hue},area:{fill:Hue},line:{stroke:Hue},path:{stroke:Hue},rect:{fill:Hue},shape:{stroke:Hue},symbol:{fill:Hue,size:30},axis:{domainColor:Vue,domainWidth:.5,gridWidth:.2,labelColor:Vue,tickColor:Vue,tickWidth:.2,titleColor:Vue},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Yue="#3e5c69",Xue={background:"#fff",arc:{fill:Yue},area:{fill:Yue},line:{stroke:Yue},path:{stroke:Yue},rect:{fill:Yue},shape:{stroke:Yue},symbol:{fill:Yue},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Que="#1696d2",Jue="#000000",Kue="Lato",Zue="Lato",ele={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},tle={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Kue},axisX:{domain:!0,domainColor:Jue,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Zue,labelAngle:0,tickColor:Jue,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Kue},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Zue,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Kue,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Zue,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Kue,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ele["six-groups-cat-1"],diverging:ele["diverging-colors"],heatmap:ele["diverging-colors"],ordinal:ele["six-groups-seq"],ramp:ele["shades-blue"]},area:{fill:Que},rect:{fill:Que},line:{color:Que,stroke:Que,strokeWidth:5},trail:{color:Que,stroke:Que,strokeWidth:0,size:1},path:{stroke:Que,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Que,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Que,stroke:null}},arc:{fill:Que},shape:{stroke:Que},symbol:{fill:Que,size:30}},nle="#3366CC",rle="#ccc",ile="Arial, sans-serif",ole={arc:{fill:nle},area:{fill:nle},path:{stroke:nle},rect:{fill:nle},shape:{stroke:nle},symbol:{stroke:nle},circle:{fill:nle},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ile,fontSize:12},"guide-title":{font:ile,fontSize:12},"group-title":{font:ile,fontSize:12}},title:{font:ile,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:rle,tickColor:rle,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ale="2.10.0";t(Cue,"vox",(function(){return Xue})),t(Cue,"version",(function(){return ale})),t(Cue,"urbaninstitute",(function(){return tle})),t(Cue,"quartz",(function(){return Gue})),t(Cue,"latimes",(function(){return Wue})),t(Cue,"googlecharts",(function(){return ole})),t(Cue,"ggplot2",(function(){return Lue})),t(Cue,"fivethirtyeight",(function(){return Rue})),t(Cue,"excel",(function(){return Nue})),t(Cue,"dark",(function(){return Mue}));var sle="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const ule="vg-tooltip-element",lle={offsetX:10,offsetY:10,id:ule,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function cle(e,t,n){if(JE(e))return`[${e.map((e=>t(GS(e)?e:fle(e,n)))).join(", ")}]`;if(KE(e)){let r="";const i=e,{title:o,image:a}=i,s=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const e of u){let i=s[e];void 0!==i&&(KE(i)&&(i=fle(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function fle(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class dle{constructor(e){this.options=Object.assign(Object.assign({},lle),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return sle.toString().replace(ule,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));if((null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=cle(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function hle(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var ple,mle='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function gle(e,...t){for(const n of t)yle(e,n);return e}function yle(e,t){for(const n of Object.keys(t))tS(e,n,t[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const vle=OE;let ble=q2;const xle="undefined"!=typeof window?window:void 0;void 0===ble&&(null===(ple=null==xle?void 0:xle.vl)||void 0===ple?void 0:ple.compile)&&(ble=xle.vl);const wle={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},_le={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},kle={vega:"Vega","vega-lite":"Vega-Lite"},Ele={vega:vle.version,"vega-lite":ble?ble.version:"not available"},Sle={vega:e=>e,"vega-lite":(e,t)=>ble.compile(e,{config:t}).spec},Ale='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Cle="chart-wrapper";function Dle(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${kle[r]} JSON Source`}function Mle(e){return(t=e)&&"load"in t?e:vle.loader(e);var t}function Fle(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function Nle(e,t,n={}){var r,i,o;return hle(this,void 0,void 0,(function*(){let a,s;GS(t)?(s=Mle(n.loader),a=JSON.parse(yield s.load(t))):a=t;const u=Fle(a).loader;s&&!u||(s=Mle(null!==(r=n.loader)&&void 0!==r?r:u));const l=yield Ole(Fle(a),s),c=yield Ole(n,s),f=Object.assign(Object.assign({},gle(c,l)),{config:eS(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=l.config)&&void 0!==o?o:{})});return yield function(e,t,n={},r){var i,o,a,s,u,l;return hle(this,void 0,void 0,(function*(){const c=n.theme?eS(Cue[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,f=US(n.actions)?n.actions:gle({},wle,null!==(o=n.actions)&&void 0!==o?o:{}),d=Object.assign(Object.assign({},_le),n.i18n),h=null!==(a=n.renderer)&&void 0!==a?a:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:vle.Warn,m=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization",g="string"==typeof e?document.querySelector(e):e;if(!g)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?mle.toString():n.defaultStyle,r.appendChild(t)}}const y=function(e,t){var n;if(e.$schema){const r=Aue(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${kle[r.library]}, but mode argument sets ${null!==(n=kle[t])&&void 0!==n?n:t}.`);const i=r.library;return sw.satisfies(Ele[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${kle[i]} ${r.version}, but the current version of ${kle[i]} is v${Ele[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let v=Sle[y](t,c);if("vega-lite"===y&&v.$schema){const e=Aue(v.$schema);sw.satisfies(Ele.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${Ele.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions"),g.innerHTML="";let b=g;if(f){const e=document.createElement("div");e.classList.add(Cle),g.appendChild(e),b=e}const x=n.patch;x&&(v=x instanceof Function?x(v):Kx(v,x,!0,!1).newDocument),n.formatLocale&&vle.formatLocale(n.formatLocale),n.timeFormatLocale&&vle.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,_=vle.parse(v,"vega-lite"===y?{}:c,{ast:w}),k=new(n.viewClass||vle.View)(_,Object.assign({loader:r,logLevel:p,renderer:h},w?{expr:vle.expressionInterpreter}:{}));if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new dle(!0===n.tooltip?{}:n.tooltip).call,k.tooltip(e)}let E,{hover:S}=n;if(void 0===S&&(S="vega"===y),S){const{hoverSet:e,updateSet:t}="boolean"==typeof S?{}:S;k.hover(e,t)}if(n&&(null!=n.width&&k.width(n.width),null!=n.height&&k.height(n.height),null!=n.padding&&k.padding(n.padding)),yield k.initialize(b,n.bind).runAsync(),!1!==f){let e=g;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=d.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const n=document.createElement("summary");n.innerHTML=Ale,t.append(n),E=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",E)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return hle(this,void 0,void 0,(function*(){t.preventDefault();const r=yield k.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===f||!1!==f.source){const e=document.createElement("a");e.text=d.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){var r,i;Dle(aw(t),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),e.preventDefault()})),r.append(e)}if("vega-lite"===y&&(!0===f||!1!==f.compiled)){const e=document.createElement("a");e.text=d.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,r;Dle(aw(v),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()})),r.append(e)}if(!0===f||!1!==f.editor){const e=null!==(l=n.editorUrl)&&void 0!==l?l:"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){!function(e,t,n){const r=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:c,mode:y,renderer:h,spec:aw(t)}),n.preventDefault()})),r.append(i)}}function A(){E&&document.removeEventListener("click",E),k.finalize()}return{view:k,spec:t,vgSpec:v,finalize:A}}))}(e,a,f,s)}))}function Ole(e,t){var n;return hle(this,void 0,void 0,(function*(){const r=GS(e.config)?JSON.parse(yield t.load(e.config)):null!==(n=e.config)&&void 0!==n?n:{},i=GS(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})}))}var $le=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}'));class Tle extends xe().Component{componentDidMount(){this.drawChart($le)}drawChart(e){Nle("#vis1",e).then((e=>console.log(e))).catch(console.warn)}render(){return ve.createElement("div",{id:"vis1"})}}xe();class zle extends xe().Component{componentDidMount(){this.drawBarChart([6043,5153,5507,5431,5743,4951])}drawBarChart(e){const t=600,n=Fm(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",40).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>45*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>45*t+10)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["edm","latin","pop","r&b","rap","rock"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",510).attr("cy",(function(e,t){return 100+25*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",530).attr("y",(function(e,t){return 100+25*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",300).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Genre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class Rle extends xe().Component{componentDidMount(){this.drawBarChart([1065,1206,1296,1298,1511,1408,1456,1485,1322,1256,1672,1655,1262,1637,1133,1105,1517,1129,1809,948,1674,1291,1288,1405])}drawBarChart(e){const t=1050,n=Fm(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["album rock","big room","classic rock","dance pop","electro house","electropop","gangster rap","hard rock","hip hop","hip pop","indie poptimism","latin hip hop","latin pop","neo soul","new jack swing","permanent wave","pop edm","post-teen pop","progressive electro house","reggaeton","southern hip hop","trap","tropical","urban contemporary"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",870).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",885).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",525).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class Ple extends xe().Component{componentDidMount(){this.drawBarChart([1206,1511,1517,1809,1655,1262,948,1288,1298,1408,1672,1129,1256,1637,1133,1405,1456,1322,1674,1291,1065,1296,1485,1105])}drawBarChart(e){const t=1050,n=Fm(["#383867","#383867","#383867","#383867","#584c77","#584c77","#584c77","#584c77","#33431e","#33431e","#33431e","#33431e","#a36629","#a36629","#a36629","#a36629","#92462f","#92462f","#92462f","#92462f","#b63e36","#b63e36","#b63e36","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["big room","electro house","pop edm","progressive electro house","latin hip hop","latin pop","reggaeton","tropical","dance pop","electropop","indie poptimism","post-teen pop","hip pop","neo soul","new jack swing","urban contemporary","gangster rap","hip hop","southern hip hop","trap","album rock","classic rock","hard rock","permanent wave"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",870).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",885).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",525).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class Lle extends xe().Component{componentDidMount(){this.drawChart(this.props.data,this.props.id)}drawChart(e,t){Nle("#"+t,e).then((e=>console.log(e))).catch(console.warn)}render(){return ve.createElement("div",{id:this.props.id})}}var Ble=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}')),Ile=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/info474-a2/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),jle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}'));const Ule=()=>{const[e,t]=md("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv");return ve.createElement("div",{className:"App"},ve.createElement("h1",null,"Exploratory Data Analysis"),ve.createElement("p",null,"Assignment 2, INFO 474 Spring 2021"),ve.createElement("p",null,t&&"loading data!"),ve.createElement(Lle,{data:$le,id:"vis6"}),ve.createElement(Lle,{data:Ble,id:"vis5"}),ve.createElement(Lle,{data:Ile,id:"vis7"}),ve.createElement(Lle,{data:jle,id:"vis8"}),ve.createElement(Ple,null),ve.createElement(Rle,null),ve.createElement(zle,null),ve.createElement(Tle,null))};Zf.render(ve.createElement(Ule,null),document.querySelector("#root"))}();
//# sourceMappingURL=index.4ba47312.js.map
