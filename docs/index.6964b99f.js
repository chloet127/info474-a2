!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}function n(e,t){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var r,i,o,a,s=!1;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function l(){r={},i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,s=u(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(s[c]=n[c]);if(i){r=i(n);for(var f=0;f<r.length;f++)a.call(n,r[f])&&(s[r[f]]=n[r[f]])}}return s}}function c(){return s||(s=!0,l()),r}var f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M,F,N,O,$,T,z,R,P,L,B,I,j,U,q,W,H,V,G,Y,X,Q,J,K,Z,ee,te,ne,re,ie=!1;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function se(){}function ue(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function le(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)F.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:h,type:e,key:o,ref:a,props:i,_owner:M.current}}function ce(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}function fe(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function de(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case h:case p:a=!0}}if(a)return i=i(a=e),e=""===r?"."+fe(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),de(i,t,n,"",(function(e){return e}))):null!=i&&(ce(i)&&(i=function(e,t){return{$$typeof:h,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+fe(o=e[s],s);a+=de(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=de(o=o.value,t,n,u=r+fe(o,s++),i);else if("object"===o)throw t=""+e,Error(oe(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function he(e,t,n){if(null==e)return e;var r=[],i=0;return de(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function pe(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}function me(){var e=$.current;if(null===e)throw Error(oe(321));return e}function ge(){return ie||(ie=!0,f={},d=c(),h=60103,p=60106,m=60107,f.Fragment=m,g=60108,f.StrictMode=g,y=60114,f.Profiler=y,v=60109,b=60110,x=60112,w=60113,f.Suspense=w,_=60115,k=60116,"function"==typeof Symbol&&Symbol.for&&(E=Symbol.for,h=E("react.element"),p=E("react.portal"),m=E("react.fragment"),f.Fragment=m,g=E("react.strict_mode"),f.StrictMode=g,y=E("react.profiler"),f.Profiler=y,v=E("react.provider"),b=E("react.context"),x=E("react.forward_ref"),w=E("react.suspense"),f.Suspense=w,_=E("react.memo"),k=E("react.lazy")),S="function"==typeof Symbol&&Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={},ae.prototype.isReactComponent={},ae.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(oe(85));this.updater.enqueueSetState(this,e,t,"setState")},ae.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},se.prototype=ae.prototype,(D=ue.prototype=new se).constructor=ue,d(D,ae.prototype),D.isPureReactComponent=!0,M={current:null},F=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},O=/\/+/g,T={ReactCurrentDispatcher:$={current:null},ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:d},z={map:he,forEach:function(e,t,n){he(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return he(e,(function(){t++})),t},toArray:function(e){return he(e,(function(e){return e}))||[]},only:function(e){if(!ce(e))throw Error(oe(143));return e}},f.Children=z,R=ae,f.Component=R,P=ue,f.PureComponent=P,L=T,f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,B=function(e,t,n){if(null==e)throw Error(oe(267,e));var r=d({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=M.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)F.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:h,type:e.type,key:i,ref:o,props:r,_owner:a}},f.cloneElement=B,I=function(e,t){return void 0===t&&(t=null),(e={$$typeof:b,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:e},e.Consumer=e},f.createContext=I,j=le,f.createElement=j,U=function(e){var t=le.bind(null,e);return t.type=e,t},f.createFactory=U,q=function(){return{current:null}},f.createRef=q,W=function(e){return{$$typeof:x,render:e}},f.forwardRef=W,H=ce,f.isValidElement=H,V=function(e){return{$$typeof:k,_payload:{_status:-1,_result:e},_init:pe}},f.lazy=V,G=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},f.memo=G,Y=function(e,t){return me().useCallback(e,t)},f.useCallback=Y,X=function(e,t){return me().useContext(e,t)},f.useContext=X,Q=function(){},f.useDebugValue=Q,J=function(e,t){return me().useEffect(e,t)},f.useEffect=J,K=function(e,t,n){return me().useImperativeHandle(e,t,n)},f.useImperativeHandle=K,Z=function(e,t){return me().useLayoutEffect(e,t)},f.useLayoutEffect=Z,ee=function(e,t){return me().useMemo(e,t)},f.useMemo=ee,te=function(e,t,n){return me().useReducer(e,t,n)},f.useReducer=te,ne=function(e){return me().useRef(e)},f.useRef=ne,re=function(e){return me().useState(e)},f.useState=re,"17.0.2",f.version="17.0.2"),f}var ye,ve,be=!1;function xe(){return be||(be=!0,ye={},ye=ge(),ve=e(ye)),ye}xe();var we,_e,ke,Ee,Se,Ae,Ce,De,Me,Fe,Ne,Oe,$e,Te,ze,Re,Pe,Le,Be,Ie,je,Ue,qe,We,He,Ve,Ge,Ye,Xe,Qe,Je,Ke,Ze,et,tt,nt,rt,it,ot,at,st,ut,lt,ct=!1;function ft(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<pt(i,t)))break e;e[r]=t,e[n]=i,n=r}}function dt(e){return void 0===(e=e[0])?null:e}function ht(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>pt(a,n))void 0!==u&&0>pt(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>pt(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function pt(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function mt(e){for(var t=dt(Ve);null!==t;){if(null===t.callback)ht(Ve);else{if(!(t.startTime<=e))break;ht(Ve),t.sortIndex=t.expirationTime,ft(He,t)}t=dt(Ve)}}function gt(e){if(Ke=!1,mt(e),!Je)if(null!==dt(He))Je=!0,Se(yt);else{var t=dt(Ve);null!==t&&Ae(gt,t.startTime-e)}}function yt(e,t){Je=!1,Ke&&(Ke=!1,Ce()),Qe=!0;var n=Xe;try{for(mt(t),Ye=dt(He);null!==Ye&&(!(Ye.expirationTime>t)||e&&!_e());){var r=Ye.callback;if("function"==typeof r){Ye.callback=null,Xe=Ye.priorityLevel;var i=r(Ye.expirationTime<=t);t=we(),"function"==typeof i?Ye.callback=i:Ye===dt(He)&&ht(He),mt(t)}else ht(He);Ye=dt(He)}if(null!==Ye)var o=!0;else{var a=dt(Ve);null!==a&&Ae(gt,a.startTime-t),o=!1}return o}finally{Ye=null,Xe=n,Qe=!1}}function vt(){return ct||(ct=!0,Ee={},"object"==typeof performance&&"function"==typeof performance.now?(Me=performance,we=function(){return Me.now()},Ee.unstable_now=we):(Fe=Date,Ne=Fe.now(),we=function(){return Fe.now()-Ne},Ee.unstable_now=we),"undefined"==typeof window||"function"!=typeof MessageChannel?(Oe=null,$e=null,Te=function(){if(null!==Oe)try{var e=we();Oe(!0,e),Oe=null}catch(e){throw setTimeout(Te,0),e}},Se=function(e){null!==Oe?setTimeout(Se,0,e):(Oe=e,setTimeout(Te,0))},Ae=function(e,t){$e=setTimeout(e,t)},Ce=function(){clearTimeout($e)},_e=function(){return!1},Ee.unstable_shouldYield=_e,ke=function(){},De=Ee.unstable_forceFrameRate=ke):(ze=window.setTimeout,Re=window.clearTimeout,"undefined"!=typeof console&&(Pe=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Pe&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Le=!1,Be=null,Ie=-1,je=5,Ue=0,_e=function(){return we()>=Ue},Ee.unstable_shouldYield=_e,De=function(){},ke=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<e?Math.floor(1e3/e):5},Ee.unstable_forceFrameRate=ke,qe=new MessageChannel,We=qe.port2,qe.port1.onmessage=function(){if(null!==Be){var e=we();Ue=e+je;try{Be(!0,e)?We.postMessage(null):(Le=!1,Be=null)}catch(e){throw We.postMessage(null),e}}else Le=!1},Se=function(e){Be=e,Le||(Le=!0,We.postMessage(null))},Ae=function(e,t){Ie=ze((function(){e(we())}),t)},Ce=function(){Re(Ie),Ie=-1}),He=[],Ve=[],Ge=1,Ye=null,Xe=3,Qe=!1,Je=!1,Ke=!1,Ze=De,5,Ee.unstable_IdlePriority=5,1,Ee.unstable_ImmediatePriority=1,4,Ee.unstable_LowPriority=4,3,Ee.unstable_NormalPriority=3,null,Ee.unstable_Profiling=null,2,Ee.unstable_UserBlockingPriority=2,et=function(e){e.callback=null},Ee.unstable_cancelCallback=et,tt=function(){Je||Qe||(Je=!0,Se(yt))},Ee.unstable_continueExecution=tt,nt=function(){return Xe},Ee.unstable_getCurrentPriorityLevel=nt,rt=function(){return dt(He)},Ee.unstable_getFirstCallbackNode=rt,it=function(e){switch(Xe){case 1:case 2:case 3:var t=3;break;default:t=Xe}var n=Xe;Xe=t;try{return e()}finally{Xe=n}},Ee.unstable_next=it,ot=function(){},Ee.unstable_pauseExecution=ot,at=Ze,Ee.unstable_requestPaint=at,st=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=Xe;Xe=e;try{return t()}finally{Xe=n}},Ee.unstable_runWithPriority=st,ut=function(e,t,n){var r=we();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:Ge++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>r?(e.sortIndex=n,ft(Ve,e),null===dt(He)&&e===dt(Ve)&&(Ke?Ce():Ke=!0,Ae(gt,n-r))):(e.sortIndex=i,ft(He,e),Je||Qe||(Je=!0,Se(yt))),e},Ee.unstable_scheduleCallback=ut,lt=function(e){var t=Xe;return function(){var n=Xe;Xe=t;try{return e.apply(this,arguments)}finally{Xe=n}}},Ee.unstable_wrapCallback=lt),Ee}var bt,xt=!1;function wt(){return xt||(xt=!0,bt={},bt=vt()),bt}var _t,kt,Et,St,At,Ct,Dt,Mt,Ft,Nt,Ot,$t,Tt,zt,Rt,Pt,Lt,Bt,It,jt,Ut,qt,Wt,Ht,Vt,Gt,Yt,Xt,Qt,Jt,Kt,Zt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,dn,hn,pn,mn,gn,yn,vn,bn,xn,wn,_n,kn,En,Sn,An,Cn,Dn,Mn,Fn,Nn,On,$n,Tn,zn,Rn,Pn,Ln,Bn,In,jn,Un,qn,Wn,Hn,Vn,Gn,Yn,Xn,Qn,Jn,Kn,Zn,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,fr,dr,hr,pr,mr,gr,yr,vr,br,xr,wr,_r,kr,Er,Sr,Ar,Cr,Dr,Mr,Fr,Nr,Or,$r,Tr,zr,Rr,Pr,Lr,Br,Ir,jr,Ur,qr,Wr,Hr,Vr,Gr,Yr,Xr,Qr,Jr,Kr,Zr,ei,ti,ni,ri,ii,oi,ai,si,ui,li,ci,fi,di,hi,pi,mi,gi,yi,vi,bi,xi,wi,_i,ki,Ei,Si,Ai,Ci,Di,Mi,Fi,Ni,Oi,$i,Ti,zi,Ri,Pi,Li,Bi,Ii,ji,Ui,qi,Wi,Hi,Vi,Gi,Yi,Xi,Qi,Ji,Ki,Zi,eo,to,no,ro,io,oo,ao,so,uo,lo,co,fo,ho,po,mo,go,yo,vo,bo,xo,wo,_o,ko,Eo,So,Ao,Co,Do,Mo,Fo,No,Oo,$o,To,zo,Ro,Po,Lo,Bo,Io,jo,Uo,qo,Wo,Ho,Vo,Go,Yo,Xo,Qo,Jo,Ko,Zo,ea,ta,na,ra,ia,oa,aa,sa,ua,la,ca,fa,da,ha,pa,ma,ga,ya,va,ba,xa,wa,_a,ka,Ea,Sa,Aa,Ca=!1;function Da(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ma(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(At[e]=t,e=0;e<t.length;e++)St.add(t[e])}function Na(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}function Oa(e){return e[1].toUpperCase()}function $a(e,t,n,r){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Mt.call(Nt,e)||!Mt.call(Ft,e)&&(Dt.test(e)?Nt[e]=!0:(Ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ta(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Zt&&e[Zt]||e["@@iterator"])?e:null}function za(e){if(void 0===en)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return"\n"+en+e}function Ra(e,t){if(!e||tn)return"";tn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{tn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function Pa(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=Ra(e.type,!1);case 11:return e=Ra(e.type.render,!1);case 22:return e=Ra(e.type._render,!1);case 1:return e=Ra(e.type,!0);default:return""}}function La(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Pt:return"Fragment";case Rt:return"Portal";case Bt:return"Profiler";case Lt:return"StrictMode";case qt:return"Suspense";case Wt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case jt:return(e.displayName||"Context")+".Consumer";case It:return(e._context.displayName||"Context")+".Provider";case Ut:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ht:return La(e.type);case Gt:return La(e._render);case Vt:t=e._payload,e=e._init;try{return La(e(t))}catch(e){}}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ia(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ja(e){e._valueTracker||(e._valueTracker=function(e){var t=Ia(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ua(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ia(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function qa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Wa(e,t){var n=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ha(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ba(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Va(e,t){null!=(t=t.checked)&&$a(e,"checked",t,!1)}function Ga(e,t){Va(e,t);var n=Ba(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,Ba(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ya(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xa(e,t,n){"number"===t&&qa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Qa(e,t){return e=Et({children:void 0},t),(t=function(e){var t="";return kt.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ja(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ba(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ka(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Da(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Za(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Da(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Da(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ba(n)}}function es(e,t){var n=Ba(t.value),r=Ba(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ts(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ns(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rs(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ns(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function os(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||an.hasOwnProperty(e)&&an[e]?(""+t).trim():t+"px"}function as(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=os(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ss(e,t){if(t){if(un[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Da(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Da(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Da(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Da(62))}}function us(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ls(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function cs(e){if(e=ju(e)){if("function"!=typeof ln)throw Error(Da(280));var t=e.stateNode;t&&(t=qu(t),ln(e.stateNode,e.type,t))}}function fs(e){cn?fn?fn.push(e):fn=[e]:cn=e}function ds(){if(cn){var e=cn,t=fn;if(fn=cn=null,cs(e),t)for(e=0;e<t.length;e++)cs(t[e])}}function hs(e,t){return e(t)}function ps(e,t,n,r,i){return e(t,n,r,i)}function ms(){}function gs(){null===cn&&null===fn||(ms(),ds())}function ys(e,t){var n=e.stateNode;if(null===n)return null;var r=qu(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Da(231,t,typeof n));return n}function vs(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}function bs(e,t,n,r,i,o,a,s,u){yn=!1,vn=null,vs.apply(wn,arguments)}function xs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ws(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _s(e){if(xs(e)!==e)throw Error(Da(188))}function ks(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=xs(e)))throw Error(Da(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _s(i),e;if(o===r)return _s(i),t;o=o.sibling}throw Error(Da(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Da(189))}}if(n.alternate!==r)throw Error(Da(190))}if(3!==n.tag)throw Error(Da(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Es(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}function Ss(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function As(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function Cs(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ss(t,n,r,i,o),null!==t&&(null!==(t=ju(t))&&kn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ds(e){var t=Iu(e.target);if(null!==t){var n=xs(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ws(n)))return e.blockedOn=t,void Sn(e.lanePriority,(function(){wt().unstable_runWithPriority(e.priority,(function(){En(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ms(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ju(n))&&kn(t),e.blockedOn=n,!1;t.shift()}return!0}function Fs(e,t,n){Ms(e)&&n.delete(t)}function Ns(){for(An=!1;0<Cn.length;){var e=Cn[0];if(null!==e.blockedOn){null!==(e=ju(e.blockedOn))&&_n(e);break}for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Cn.shift()}null!==Dn&&Ms(Dn)&&(Dn=null),null!==Mn&&Ms(Mn)&&(Mn=null),null!==Fn&&Ms(Fn)&&(Fn=null),Nn.forEach(Fs),On.forEach(Fs)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,An||(An=!0,wt().unstable_scheduleCallback(wt().unstable_NormalPriority,Ns)))}function $s(e){function t(t){return Os(t,e)}if(0<Cn.length){Os(Cn[0],e);for(var n=1;n<Cn.length;n++){var r=Cn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&Os(Dn,e),null!==Mn&&Os(Mn,e),null!==Fn&&Os(Fn,e),Nn.forEach(t),On.forEach(t),n=0;n<$n.length;n++)(r=$n[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)Ds(n),null===n.blockedOn&&$n.shift()}function Ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function zs(e){if(Rn[e])return Rn[e];if(!zn[e])return e;var t,n=zn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Pn)return Rn[e]=n[t];return e}function Rs(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),qn.set(r,t),Un.set(r,i),Ma(i,[r])}}function Ps(e){if(0!=(1&e))return Hn=15,1;if(0!=(2&e))return Hn=14,2;if(0!=(4&e))return Hn=13,4;var t=24&e;return 0!==t?(Hn=12,t):0!=(32&e)?(Hn=11,32):0!==(t=192&e)?(Hn=10,t):0!=(256&e)?(Hn=9,256):0!==(t=3584&e)?(Hn=8,t):0!=(4096&e)?(Hn=7,4096):0!==(t=4186112&e)?(Hn=6,t):0!==(t=62914560&e)?(Hn=5,t):67108864&e?(Hn=4,67108864):0!=(134217728&e)?(Hn=3,134217728):0!==(t=805306368&e)?(Hn=2,t):0!=(1073741824&e)?(Hn=1,1073741824):(Hn=8,e)}function Ls(e,t){var n=e.pendingLanes;if(0===n)return Hn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Hn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ps(u),i=Hn):0!==(s&=o)&&(r=Ps(s),i=Hn)}else 0!==(o=n&~a)?(r=Ps(o),i=Hn):0!==s&&(r=Ps(s),i=Hn);if(0===r)return 0;if(r=n&((0>(r=31-Vn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ps(t),i<=Hn)return t;Hn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vn(t)),r|=e[n],t&=~i;return r}function Bs(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Is(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=js(24&~t))?Is(10,t):e;case 10:return 0===(e=js(192&~t))?Is(8,t):e;case 8:return 0===(e=js(3584&~t))&&(0===(e=js(4186112&~t))&&(e=512)),e;case 2:return 0===(t=js(805306368&~t))&&(t=268435456),t}throw Error(Da(358,e))}function js(e){return e&-e}function Us(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qs(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vn(t)]=n}function Ws(e){return 0===e?32:31-(Gn(e)/Yn|0)|0}function Hs(e,t,n,r){hn||ms();var i=Gs,o=hn;hn=!0;try{ps(i,e,t,n,r)}finally{(hn=o)||gs()}}function Vs(e,t,n,r){Qn(Xn,Gs.bind(null,e,t,n,r))}function Gs(e,t,n,r){var i;if(Jn)if((i=0==(4&t))&&0<Cn.length&&-1<Tn.indexOf(e))e=Ss(null,e,t,n,r),Cn.push(e);else{var o=Ys(e,t,n,r);if(null===o)i&&As(e,r);else{if(i){if(-1<Tn.indexOf(e))return e=Ss(o,e,t,n,r),void Cn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Dn=Cs(Dn,e,t,n,r,i),!0;case"dragenter":return Mn=Cs(Mn,e,t,n,r,i),!0;case"mouseover":return Fn=Cs(Fn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nn.set(o,Cs(Nn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,On.set(o,Cs(On.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;As(e,r)}Mu(e,t,r,null,n)}}}function Ys(e,t,n,r){var i=ls(r);if(null!==(i=Iu(i))){var o=xs(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=ws(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mu(e,t,r,i,n),null}function Xs(){if(er)return er;var e,t,n=Zn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Js(){return!0}function Ks(){return!1}function Zs(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Js:Ks,this.isPropagationStopped=Ks,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}function eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function tu(){return eu}function nu(e,t){switch(e){case"keyup":return-1!==$r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function ou(e,t,n,r){fs(r),0<(t=Nu(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}function au(e){Eu(e,0)}function su(e){if(Ua(Uu(e)))return e}function uu(e,t){if("change"===e)return t}function lu(){Ur&&(Ur.detachEvent("onpropertychange",cu),qr=Ur=null)}function cu(e){if("value"===e.propertyName&&su(qr)){var t=[];if(ou(t,qr,e,ls(e)),e=au,hn)e(t);else{hn=!0;try{hs(e,t)}finally{hn=!1,gs()}}}}function fu(e,t,n){"focusin"===e?(lu(),qr=n,(Ur=t).attachEvent("onpropertychange",cu)):"focusout"===e&&lu()}function du(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return su(qr)}function hu(e,t){if("click"===e)return su(t)}function pu(e,t){if("input"===e||"change"===e)return su(t)}function mu(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function gu(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Xr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n,r=yu(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yu(r)}}function bu(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?bu(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xu(){for(var e=window,t=qa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=qa((e=t.contentWindow).document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function _u(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ei||null==Jr||Jr!==qa(r)||("selectionStart"in(r=Jr)&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Zr&&gu(Zr,r)||(Zr=r,0<(r=Nu(Kr,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(bs.apply(this,arguments),yn){if(!yn)throw Error(Da(198));var l=vn;yn=!1,vn=null,bn||(bn=!0,xn=l)}}(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}}}if(bn)throw e=xn,bn=!1,xn=null,e}function Su(e,t){var n=Wu(t),r=e+"__bubble";n.has(r)||(Du(t,e,2,!1),n.add(r))}function Au(e){e[oi]||(e[oi]=!0,St.forEach((function(t){ii.has(t)||Cu(t,!1,e,null),Cu(t,!0,e,null)})))}function Cu(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&ii.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Wu(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Du(o,e,i,t),a.add(s))}function Du(e,t,n,r){var i=qn.get(t);switch(void 0===i?2:i){case 0:i=Hs;break;case 1:i=Vs;break;default:i=Gs}n=i.bind(null,t,n,e),i=void 0,!mn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mu(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Iu(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(pn)return e(t,n);pn=!0;try{dn(e,t,n)}finally{pn=!1,gs()}}((function(){var r=o,i=ls(n),a=[];e:{var s=Un.get(e);if(void 0!==s){var u=nr,l=e;switch(e){case"keypress":if(0===Qs(n))break e;case"keydown":case"keyup":u=Er;break;case"focusin":l="focus",u=hr;break;case"focusout":l="blur",u=hr;break;case"beforeblur":case"afterblur":u=hr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dr;break;case Ln:case Bn:case In:u=mr;break;case jn:u=Fr;break;case"scroll":u=ir;break;case"wheel":u=Or;break;case"copy":case"cut":case"paste":u=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ar}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=ys(p,d))&&c.push(Fu(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Iu(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Iu(l):null)&&(l!==(f=xs(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=lr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:Uu(u),h=null==l?s:Uu(l),(s=new c(m,p+"leave",u,n,i)).target=f,s.relatedTarget=h,m=null,Iu(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Ou(h))p++;for(h=0,m=d;m;m=Ou(m))h++;for(;0<p-h;)c=Ou(c),p--;for(;0<h-p;)d=Ou(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Ou(c),d=Ou(d)}c=null}else c=null;null!==u&&$u(a,s,u,c,!1),null!==l&&null!==f&&$u(a,f,l,c,!0)}if("select"===(u=(s=r?Uu(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=uu;else if(iu(s))if(Wr)g=pu;else{g=du;var y=fu}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=hu);switch(g&&(g=g(e,r))?ou(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&Xa(s,"number",s.value)),y=r?Uu(r):window,e){case"focusin":(iu(y)||"true"===y.contentEditable)&&(Jr=y,Kr=r,Zr=null);break;case"focusout":Zr=Kr=Jr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":ei=!1,_u(a,n,i);break;case"selectionchange":if(Qr)break;case"keydown":case"keyup":_u(a,n,i)}var v;if(Tr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ir?nu(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==n.locale&&(Ir||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ir&&(v=Xs()):(Zn="value"in(Kn=i)?Kn.value:Kn.textContent,Ir=!0)),0<(y=Nu(r,b)).length&&(b=new br(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=ru(n))&&(b.data=v))),(v=Rr?function(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,n):function(e,t){if(Ir)return"compositionend"===e||!Tr&&nu(e,t)?(e=Xs(),er=Zn=Kn=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nu(r,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Eu(a,t)}))}function Fu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ys(e,n))&&r.unshift(Fu(e,o,i)),null!=(o=ys(e,t))&&r.push(Fu(e,o,i))),e=e.return}return r}function Ou(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $u(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=ys(n,o))&&a.unshift(Fu(n,u,s)):i||null!=(u=ys(n,o))&&a.push(Fu(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Tu(){}function zu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ru(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Pu(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Iu(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Bu(e);null!==e;){if(n=e[di])return n;e=Bu(e)}return t}n=(e=n).parentNode}return null}function ju(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Uu(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Da(33))}function qu(e){return e[hi]||null}function Wu(e){var t=e[mi];return void 0===t&&(t=e[mi]=new Set),t}function Hu(e){return{current:e}}function Vu(e){0>yi||(e.current=gi[yi],gi[yi]=null,yi--)}function Gu(e,t){yi++,gi[yi]=e.current,e.current=t}function Yu(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xu(e){return null!=(e=e.childContextTypes)}function Qu(){Vu(xi),Vu(bi)}function Ju(e,t,n){if(bi.current!==vi)throw Error(Da(168));Gu(bi,t),Gu(xi,n)}function Ku(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(Da(108,La(t)||"Unknown",i));return Et({},n,r)}function Zu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,Gu(bi,e),Gu(xi,xi.current),!0}function el(e,t,n){var r=e.stateNode;if(!r)throw Error(Da(169));n?(e=Ku(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,Vu(xi),Vu(bi),Gu(bi,e)):Vu(xi),Gu(xi,n)}function tl(){switch(Fi()){case Ni:return 99;case Oi:return 98;case $i:return 97;case Ti:return 96;case zi:return 95;default:throw Error(Da(332))}}function nl(e){switch(e){case 99:return Ni;case 98:return Oi;case 97:return $i;case 96:return Ti;case 95:return zi;default:throw Error(Da(332))}}function rl(e,t){return e=nl(e),Ei(e,t)}function il(e,t,n){return e=nl(e),Si(e,t,n)}function ol(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}al()}function al(){if(!Ii&&null!==Li){Ii=!0;var e=0;try{var t=Li;rl(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Si(Ni,ol),t}finally{Ii=!1}}}function sl(e,t){if(e&&e.defaultProps){for(var n in t=Et({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ul(){Gi=Vi=Hi=null}function ll(e){var t=Wi.current;Vu(Wi),e.type._context._currentValue=t}function cl(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function fl(e,t){Hi=e,Gi=Vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ko=!0),e.firstContext=null)}function dl(e,t){if(Gi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Gi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Vi){if(null===Hi)throw Error(Da(308));Vi=t,Hi.dependencies={lanes:0,firstContext:t,responders:null}}else Vi=Vi.next=t;return e._currentValue}function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ml(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vl(e,t,n,r){var i=e.updateQueue;Yi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"==typeof(h=p.payload)){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=p.payload)?h.call(d,f,s):h))break e;f=Et({},f,s);break e;case 2:Yi=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,qo|=a,e.lanes=a,e.memoizedState=f}}function bl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Da(191,i));i.call(r)}}}function xl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Et({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function wl(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!gu(n,r)||!gu(i,o))}function _l(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=dl(o):(i=Xu(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?Yu(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Qi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qi.enqueueReplaceState(t,t.state,null)}function El(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Xi,hl(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dl(o):(o=Xu(t)?wi:bi.current,i.context=Yu(e,o)),vl(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(xl(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Qi.enqueueReplaceState(i,i.state,null),vl(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}function Sl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Da(309));var r=n.stateNode}if(!r)throw Error(Da(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Xi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Da(284));if(!n._owner)throw Error(Da(290,e))}return e}function Al(e,t){if("textarea"!==e.type)throw Error(Da(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Cl(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zf(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bf(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sl(e,t,n),r.return=e,r):((r=Rf(n.type,n.key,n.props,null,e.mode,r)).ref=Sl(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=If(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Pf(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Bf(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case zt:return(n=Rf(t.type,t.key,t.props,null,e.mode,n)).ref=Sl(e,null,t),n.return=e,n;case Rt:return(t=If(t,e.mode,n)).return=e,t}if(Ji(t)||Ta(t))return(t=Pf(t,e.mode,n,null)).return=e,t;Al(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case zt:return n.key===i?n.type===Pt?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case Rt:return n.key===i?l(e,t,n,r):null}if(Ji(n)||Ta(n))return null!==i?null:c(e,t,n,r,null);Al(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case zt:return e=e.get(null===r.key?n:r.key)||null,r.type===Pt?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case Rt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ji(r)||Ta(r))return c(t,e=e.get(n)||null,r,i,null);Al(t,r)}return null}function p(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=f(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=h(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}function m(i,a,s,u){var l=Ta(s);if("function"!=typeof l)throw Error(Da(150));if(null==(s=l.call(s)))throw Error(Da(151));for(var c=l=null,p=a,m=a=0,g=null,y=s.next();null!==p&&!y.done;m++,y=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),l;if(null===p){for(;!y.done;m++,y=s.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return l}for(p=r(i,p);!y.done;m++,y=s.next())null!==(y=h(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===Pt&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case zt:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===Pt){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Sl(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Pt?((r=Pf(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Rf(o.type,o.key,o.props,null,e.mode,s)).ref=Sl(e,r,o),s.return=e,e=s)}return a(e);case Rt:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=If(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Bf(o,e.mode,s)).return=e,e=r),a(e);if(Ji(o))return p(e,r,o,s);if(Ta(o))return m(e,r,o,s);if(l&&Al(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Da(152,La(e.type)||"Component"))}return n(e,r)}}function Dl(e){if(e===eo)throw Error(Da(174));return e}function Ml(e,t){switch(Gu(ro,t),Gu(no,e),Gu(to,eo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rs(null,"");break;default:t=rs(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Vu(to),Gu(to,t)}function Fl(){Vu(to),Vu(no),Vu(ro)}function Nl(e){Dl(ro.current);var t=Dl(to.current),n=rs(t,e.type);t!==n&&(Gu(no,e),Gu(to,n))}function Ol(e){no.current===e&&(Vu(to),Vu(no))}function $l(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Tl(e,t){var n=$f(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Rl(e){if(so){var t=ao;if(t){var n=t;if(!zl(e,t)){if(!(t=Lu(n.nextSibling))||!zl(e,t))return e.flags=-1025&e.flags|2,so=!1,void(oo=e);Tl(oo,n)}oo=e,ao=Lu(t.firstChild)}else e.flags=-1025&e.flags|2,so=!1,oo=e}}function Pl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oo=e}function Ll(e){if(e!==oo)return!1;if(!so)return Pl(e),so=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ru(t,e.memoizedProps))for(t=ao;t;)Tl(e,t),t=Lu(t.nextSibling);if(Pl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Da(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=Lu(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=oo?Lu(e.stateNode.nextSibling):null;return!0}function Bl(){ao=oo=null,so=!1}function Il(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}function jl(){throw Error(Da(321))}function Ul(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,i,o){if(fo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?bo:xo,e=n(r,i),yo){o=0;do{if(yo=!1,!(25>o))throw Error(Da(301));o+=1,mo=po=null,t.updateQueue=null,lo.current=wo,e=n(r,i)}while(yo)}if(lo.current=vo,t=null!==po&&null!==po.next,fo=0,mo=po=ho=null,go=!1,t)throw Error(Da(300));return e}function Wl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?ho.memoizedState=mo=e:mo=mo.next=e,mo}function Hl(){if(null===po){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=po.next;var t=null===mo?ho.memoizedState:mo.next;if(null!==t)mo=t,po=e;else{if(null===e)throw Error(Da(310));e={memoizedState:(po=e).memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},null===mo?ho.memoizedState=mo=e:mo=mo.next=e}return mo}function Vl(e,t){return"function"==typeof t?t(e):t}function Gl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=po,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((fo&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,ho.lanes|=l,qo|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Yr(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Yl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yr(o,t.memoizedState)||(ko=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xl(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(fo&e)===e)&&(t._workInProgressVersionPrimary=r,uo.push(t))),e)return n(t._source);throw uo.push(t),Error(Da(350))}function Ql(e,t,n,r){var i=zo;if(null===i)throw Error(Da(349));var o=t._getVersion,a=o(t._source),s=lo.current,u=s.useState((function(){return Xl(i,t,n)})),l=u[1],c=u[0];u=mo;var f=e.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=ho;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!Yr(a,e)){e=n(t._source),Yr(c,e)||(l(e),e=tf(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Vn(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=tf(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Yr(h,n)&&Yr(p,t)&&Yr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:c}).dispatch=l=hc.bind(null,ho,e),u.queue=e,u.baseQueue=null,c=Xl(i,t,n),u.memoizedState=u.baseState=c),c}function Jl(e,t,n){return Ql(Hl(),e,t,n)}function Kl(e){var t=Wl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e}).dispatch=hc.bind(null,ho,e),[t.memoizedState,e]}function Zl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ec(e){return e={current:e},Wl().memoizedState=e}function tc(){return Hl().memoizedState}function nc(e,t,n,r){var i=Wl();ho.flags|=e,i.memoizedState=Zl(1|t,n,void 0,void 0===r?null:r)}function rc(e,t,n,r){var i=Hl();r=void 0===r?null:r;var o=void 0;if(null!==po){var a=po.memoizedState;if(o=a.destroy,null!==r&&Ul(r,a.deps))return void Zl(t,n,o,r)}ho.flags|=e,i.memoizedState=Zl(1|t,n,o,r)}function ic(e,t){return nc(516,4,e,t)}function oc(e,t){return rc(516,4,e,t)}function ac(e,t){return rc(4,2,e,t)}function sc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function uc(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,2,sc.bind(null,t,e),n)}function lc(){}function cc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t){var n=tl();rl(98>n?98:n,(function(){e(!0)})),rl(97<n?97:n,(function(){var n=co.transition;co.transition=1;try{e(!1),t()}finally{co.transition=n}}))}function hc(e,t,n){var r=ef(),i=tf(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ho||null!==a&&a===ho)yo=go=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Yr(u,s))return}catch(e){}nf(e,i,r)}}function pc(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Ki(t,e.child,n,r)}function mc(e,t,n,r,i){n=n.render;var o=t.ref;return fl(t,i),r=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function gc(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Tf(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rf(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yc(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:gu)(i,r)&&e.ref===t.ref)?Nc(e,t,o):(t.flags|=1,(e=zf(a,r)).ref=t.ref,e.return=t,t.child=e)}function yc(e,t,n,r,i,o){if(null!==e&&gu(e.memoizedProps,r)&&e.ref===t.ref){if(ko=!1,0==(o&i))return t.lanes=e.lanes,Nc(e,t,o);0!=(16384&e.flags)&&(ko=!0)}return xc(e,t,n,r,o)}function vc(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ff(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ff(t,e),null;t.memoizedState={baseLanes:0},ff(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ff(t,r);return pc(e,t,i,n),t.child}function bc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function xc(e,t,n,r,i){var o=Xu(n)?wi:bi.current;return o=Yu(t,o),fl(t,i),n=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function wc(e,t,n,r,i){if(Xu(n)){var o=!0;Zu(t)}else o=!1;if(fl(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_l(t,n,r),El(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=dl(l):l=Yu(t,l=Xu(n)?wi:bi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&kl(t,a,r,l),Yi=!1;var d=t.memoizedState;a.state=d,vl(t,r,a,i),u=t.memoizedState,s!==r||d!==u||xi.current||Yi?("function"==typeof c&&(xl(t,n,c,r),u=t.memoizedState),(s=Yi||wl(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,pl(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:sl(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=dl(u):u=Yu(t,u=Xu(n)?wi:bi.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==u)&&kl(t,a,r,u),Yi=!1,d=t.memoizedState,a.state=d,vl(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||xi.current||Yi?("function"==typeof h&&(xl(t,n,h,r),p=t.memoizedState),(l=Yi||wl(t,n,l,r,d,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return _c(e,t,n,r,o,i)}function _c(e,t,n,r,i,o){bc(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&el(t,n,!1),Nc(e,t,o);r=t.stateNode,_o.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,o),t.child=Ki(t,null,s,o)):pc(e,t,s,o),t.memoizedState=r.state,i&&el(t,n,!0),t.child}function kc(e){var t=e.stateNode;t.pendingContext?Ju(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(0,t.context,!1),Ml(e,t.containerInfo)}function Ec(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Gu(io,1&o),null===e?(void 0!==i.fallback&&Rl(t),e=i.children,o=i.fallback,a?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,t.lanes=33554432,e):((n=Lf({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Cc(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Eo,i):(n=Ac(e,t,i.children,n),t.memoizedState=null,n))}function Sc(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Lf(t,i,0,null),n=Pf(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ac(e,t,n,r){var i=e.child;return e=i.sibling,n=zf(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Cc(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zf(a,s),null!==e?r=zf(e,r):(r=Pf(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Dc(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),cl(e.return,t)}function Mc(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Fc(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pc(e,t,r.children,n),0!=(2&(r=io.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Dc(e,n);else if(19===e.tag)Dc(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gu(io,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===$l(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mc(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$l(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mc(t,!0,n,null,o,t.lastEffect);break;case"together":Mc(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(Da(153));if(null!==t.child){for(n=zf(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zf(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Oc(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $c(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xu(t.type)&&Qu(),null;case 3:return Fl(),Vu(xi),Vu(bi),Il(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ll(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ao(t),null;case 5:Ol(t);var i=Dl(ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Co(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(Da(166));return null}if(e=Dl(to.current),Ll(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,n){case"dialog":Su("cancel",r),Su("close",r);break;case"iframe":case"object":case"embed":Su("load",r);break;case"video":case"audio":for(e=0;e<ri.length;e++)Su(ri[e],r);break;case"source":Su("error",r);break;case"img":case"image":case"link":Su("error",r),Su("load",r);break;case"details":Su("toggle",r);break;case"input":Ha(r,o),Su("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Su("invalid",r);break;case"textarea":Za(r,o),Su("invalid",r)}for(var a in ss(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):At.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Su("scroll",r));switch(n){case"input":ja(r),Ya(r,o,!0);break;case"textarea":ja(r),ts(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Tu)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===nn.html&&(e=ns(n)),e===nn.html?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[di]=t,e[hi]=r,So(e,t,!1,!1),t.stateNode=e,a=us(n,r),n){case"dialog":Su("cancel",e),Su("close",e),i=r;break;case"iframe":case"object":case"embed":Su("load",e),i=r;break;case"video":case"audio":for(i=0;i<ri.length;i++)Su(ri[i],e);i=r;break;case"source":Su("error",e),i=r;break;case"img":case"image":case"link":Su("error",e),Su("load",e),i=r;break;case"details":Su("toggle",e),i=r;break;case"input":Ha(e,r),i=Wa(e,r),Su("invalid",e);break;case"option":i=Qa(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),Su("invalid",e);break;case"textarea":Za(e,r),i=Ka(e,r),Su("invalid",e);break;default:i=r}ss(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?as(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&on(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&is(e,u):"number"==typeof u&&is(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(At.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Su("scroll",e):null!=u&&$a(e,o,u,a))}switch(n){case"input":ja(e),Ya(e,r,!1);break;case"textarea":ja(e),ts(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Ja(e,!!r.multiple,o,!1):null!=r.defaultValue&&Ja(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Tu)}zu(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Da(166));n=Dl(ro.current),Dl(to.current),Ll(t)?(r=t.stateNode,n=t.memoizedProps,r[di]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r)}return null;case 13:return Vu(io),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ll(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&io.current)?0===Io&&(Io=3):(0!==Io&&3!==Io||(Io=4),null===zo||0==(134217727&qo)&&0==(134217727&Wo)||sf(zo,Po))),(r||n)&&(t.flags|=4),null);case 4:return Fl(),Ao(t),null===e&&Au(t.stateNode.containerInfo),null;case 10:return ll(t),null;case 17:return Xu(t.type)&&Qu(),null;case 19:if(Vu(io),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Oc(r,!1);else{if(0!==Io||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=$l(e))){for(t.flags|=64,Oc(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gu(io,1&io.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>Yo&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=$l(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Oc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!so)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>Yo&&1073741824!==n&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=io.current,Gu(io,o?1&t|2:1&t),n):null;case 23:case 24:return df(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(Da(156,t.tag))}function Tc(e){switch(e.tag){case 1:Xu(e.type)&&Qu();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fl(),Vu(xi),Vu(bi),Il(),0!=(64&(t=e.flags)))throw Error(Da(285));return e.flags=-4097&t|64,e;case 5:return Ol(e),null;case 13:return Vu(io),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Vu(io),null;case 4:return Fl(),null;case 10:return ll(e),null;case 23:case 24:return df(),null;default:return null}}function zc(e,t){try{var n="",r=t;do{n+=Pa(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function Rc(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}function Pc(e,t,n){(n=ml(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qo||(Qo=!0,Jo=r),Rc(0,t)},n}function Lc(e,t,n){(n=ml(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Rc(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ko?Ko=new Set([this]):Ko.add(this),Rc(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Bc(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Mf(e,t)}else t.current=null}function Ic(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:sl(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Pu(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(Da(163))}function jc(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Af(n,e),Sf(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:sl(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&bl(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}bl(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zu(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&$s(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Da(163))}function Uc(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=os("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function qc(e,t){if(ki&&"function"==typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(_i,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Af(t,n);else{r=t;try{i()}catch(e){Mf(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Bc(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Mf(t,e)}break;case 5:Bc(t);break;case 4:Xc(e,t)}}function Wc(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Hc(e){return 5===e.tag||3===e.tag||4===e.tag}function Vc(e){e:{for(var t=e.return;null!==t;){if(Hc(t))break e;t=t.return}throw Error(Da(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Da(161))}16&n.flags&&(is(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Hc(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Gc(e,n,t):Yc(e,n,t)}function Gc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Tu));else if(4!==r&&null!==(e=e.child))for(Gc(e,t,n),e=e.sibling;null!==e;)Gc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Yc(e,t,n),e=e.sibling;null!==e;)Yc(e,t,n),e=e.sibling}function Xc(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(Da(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(qc(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(qc(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Qc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[hi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Va(n,r),us(e,i),t=us(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?as(n,s):"dangerouslySetInnerHTML"===a?on(n,s):"children"===a?is(n,s):$a(n,a,s,t)}switch(e){case"input":Ga(n,r);break;case"textarea":es(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Ja(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ja(n,!!r.multiple,r.defaultValue,!0):Ja(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Da(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,$s(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Go=Ui(),Uc(t.child,!0)),void Jc(t);case 19:return void Jc(t);case 17:return;case 23:case 24:return void Uc(t,null!==t.memoizedState)}throw Error(Da(163))}function Jc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Fo),t.forEach((function(t){var r=Nf.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Kc(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function Zc(){Yo=Ui()+500}function ef(){return 0!=(48&To)?Ui():-1!==sa?sa:sa=Ui()}function tf(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===tl()?1:2;if(0===ua&&(ua=Uo),0!==qi.transition){0!==la&&(la=null!==Vo?Vo.pendingLanes:0),e=ua;var t=4186112&~la;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=tl(),0!=(4&To)&&98===e?e=Is(12,ua):e=Is(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ua),e}function nf(e,t,n){if(50<oa)throw oa=0,aa=null,Error(Da(185));if(null===(e=rf(e,t)))return null;qs(e,t,n),e===zo&&(Wo|=t,4===Io&&sf(e,Po));var r=tl();1===t?0!=(8&To)&&0==(48&To)?uf(e):(of(e,n),0===To&&(Zc(),ol())):(0==(4&To)||98!==r&&99!==r||(null===ia?ia=new Set([e]):ia.add(e)),of(e,n)),Vo=e}function rf(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function of(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Ps(u);var c=Hn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ls(e,e===zo?Po:0),t=Hn,0===r)null!==n&&(n!==Ri&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ri&&Ai(n)}15===t?(n=uf.bind(null,e),null===Li?(Li=[n],Bi=Si(Ni,al)):Li.push(n),n=Ri):14===t?n=il(99,uf.bind(null,e)):n=il(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Da(358,e))}}(t),af.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function af(e){if(sa=-1,la=ua=0,0!=(48&To))throw Error(Da(327));var t=e.callbackNode;if(Ef()&&e.callbackNode!==t)return null;var n=Ls(e,e===zo?Po:0);if(0===n)return null;var r=n,i=To;To|=16;var o=mf();for(zo===e&&Po===r||(Zc(),hf(e,r));;)try{vf();break}catch(t){pf(e,t)}if(ul(),Oo.current=o,To=i,null!==Ro?r=0:(zo=null,Po=0,r=Io),0!=(Uo&Wo))hf(e,0);else if(0!==r){if(2===r&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(n=Bs(e))&&(r=gf(e,n))),1===r)throw t=jo,hf(e,0),sf(e,n),of(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(Da(345));case 2:wf(e);break;case 3:if(sf(e,n),(62914560&n)===n&&10<(r=Go+500-Ui())){if(0!==Ls(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ef(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ui(wf.bind(null,e),r);break}wf(e);break;case 4:if(sf(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Vn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*No(n/1960))-n)){e.timeoutHandle=ui(wf.bind(null,e),n);break}wf(e);break;case 5:wf(e);break;default:throw Error(Da(329))}}return of(e,Ui()),e.callbackNode===t?af.bind(null,e):null}function sf(e,t){for(t&=~Ho,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(0!=(48&To))throw Error(Da(327));if(Ef(),e===zo&&0!=(e.expiredLanes&Po)){var t=Po,n=gf(e,t);0!=(Uo&Wo)&&(n=gf(e,t=Ls(e,t)))}else n=gf(e,t=Ls(e,0));if(0!==e.tag&&2===n&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(t=Bs(e))&&(n=gf(e,t))),1===n)throw n=jo,hf(e,0),sf(e,t),of(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wf(e),of(e,Ui()),null}function lf(e,t){var n=To;To|=1;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function cf(e,t){var n=To;To&=-2,To|=8;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function ff(e,t){Gu(Bo,Lo),Lo|=t,Uo|=t}function df(){Lo=Bo.current,Vu(Bo)}function hf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,li(n)),null!==Ro)for(n=Ro.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Qu();break;case 3:Fl(),Vu(xi),Vu(bi),Il();break;case 5:Ol(r);break;case 4:Fl();break;case 13:case 19:Vu(io);break;case 10:ll(r);break;case 23:case 24:df()}n=n.return}zo=e,Ro=zf(e.current,null),Po=Lo=Uo=t,Io=0,jo=null,Ho=Wo=qo=0}function pf(e,t){for(;;){var n=Ro;try{if(ul(),lo.current=vo,go){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(fo=0,mo=po=ho=null,yo=!1,$o.current=null,null===n||null===n.return){Io=1,jo=t,Ro=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Po,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&io.current),d=a;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ml(-1,1);v.tag=2,gl(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Mo,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Ff.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((La(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Io&&(Io=2),u=zc(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Pc(0,o,t));break e;case 1:o=u;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ko||!Ko.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Lc(d,o,t));break e}}d=d.return}while(null!==d)}xf(n)}catch(e){t=e,Ro===n&&null!==n&&(Ro=n=n.return);continue}break}}function mf(){var e=Oo.current;return Oo.current=vo,null===e?vo:e}function gf(e,t){var n=To;To|=16;var r=mf();for(zo===e&&Po===t||hf(e,t);;)try{yf();break}catch(t){pf(e,t)}if(ul(),To=n,Oo.current=r,null!==Ro)throw Error(Da(261));return zo=null,Po=0,Io}function yf(){for(;null!==Ro;)bf(Ro)}function vf(){for(;null!==Ro&&!Ci();)bf(Ro)}function bf(e){var t=da(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?xf(e):Ro=t,$o.current=null}function xf(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$c(n,t,Lo)))return void(Ro=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Lo)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Tc(t)))return n.flags&=2047,void(Ro=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ro=t);Ro=t=e}while(null!==t);0===Io&&(Io=5)}function wf(e){var t=tl();return rl(99,_f.bind(null,e,t)),null}function _f(e,t){do{Ef()}while(null!==ea);if(0!=(48&To))throw Error(Da(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Da(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Vn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==ia&&0==(24&r)&&ia.has(e)&&ia.delete(e),e===zo&&(Ro=zo=null,Po=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=To,To|=32,$o.current=null,ai=Jn,wu(a=xu())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=a,g=null;t:for(;;){for(var y;m!==s||0!==o&&3!==m.nodeType||(f=c+o),m!==u||0!==l&&3!==m.nodeType||(d=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===a)break t;if(g===s&&++h===o&&(f=c),g===u&&++p===l&&(d=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;si={focusedElem:a,selectionRange:s},Jn=!1,ca=null,fa=!1,Xo=r;do{try{kf()}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);ca=null,Xo=r;do{try{for(a=e;null!==Xo;){var v=Xo.flags;if(16&v&&is(Xo.stateNode,""),128&v){var b=Xo.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:Vc(Xo),Xo.flags&=-3;break;case 6:Vc(Xo),Xo.flags&=-3,Qc(Xo.alternate,Xo);break;case 1024:Xo.flags&=-1025;break;case 1028:Xo.flags&=-1025,Qc(Xo.alternate,Xo);break;case 4:Qc(Xo.alternate,Xo);break;case 8:Xc(a,s=Xo);var w=s.alternate;Wc(s),null!==w&&Wc(w)}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);if(x=si,b=xu(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&bu(v.ownerDocument.documentElement,v)){null!==a&&wu(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),s=v.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!x.extend&&w>a&&(s=a,a=w,w=s),s=vu(v,w),o=vu(v,a),s&&o&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jn=!!ai,si=ai=null,e.current=n,Xo=r;do{try{for(v=e;null!==Xo;){var _=Xo.flags;if(36&_&&jc(v,Xo.alternate,Xo),128&_){b=void 0;var k=Xo.ref;if(null!==k){var E=Xo.stateNode;switch(Xo.tag){case 5:b=E;break;default:b=E}"function"==typeof k?k(b):k.current=b}}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);Xo=null,Pi(),To=i}else e.current=n;if(Zo)Zo=!1,ea=e,ta=t;else for(Xo=r;null!==Xo;)t=Xo.nextEffect,Xo.nextEffect=null,8&Xo.flags&&((_=Xo).sibling=null,_.stateNode=null),Xo=t;if(0===(r=e.pendingLanes)&&(Ko=null),1===r?e===aa?oa++:(oa=0,aa=e):oa=0,n=n.stateNode,ki&&"function"==typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(_i,n,void 0,64==(64&n.current.flags))}catch(e){}if(of(e,Ui()),Qo)throw Qo=!1,e=Jo,Jo=null,e;return 0!=(8&To)||ol(),null}function kf(){for(;null!==Xo;){var e=Xo.alternate;fa||null===ca||(0!=(8&Xo.flags)?Es(Xo,ca)&&(fa=!0):13===Xo.tag&&Kc(e,Xo)&&Es(Xo,ca)&&(fa=!0));var t=Xo.flags;0!=(256&t)&&Ic(e,Xo),0==(512&t)||Zo||(Zo=!0,il(97,(function(){return Ef(),null}))),Xo=Xo.nextEffect}}function Ef(){if(90!==ta){var e=97<ta?97:ta;return ta=90,rl(e,Cf)}return!1}function Sf(e,t){na.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Af(e,t){ra.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Cf(){if(null===ea)return!1;var e=ea;if(ea=null,0!=(48&To))throw Error(Da(331));var t=To;To|=32;var n=ra;ra=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(n=na,na=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return To=t,ol(),!0}function Df(e,t,n){gl(e,t=Pc(0,t=zc(n,t),1)),t=ef(),null!==(e=rf(e,1))&&(qs(e,1,t),of(e,t))}function Mf(e,t){if(3===e.tag)Df(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Df(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r))){var i=Lc(n,e=zc(t,e),1);if(gl(n,i),i=ef(),null!==(n=rf(n,1)))qs(n,1,i),of(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ff(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ef(),e.pingedLanes|=e.suspendedLanes&n,zo===e&&(Po&n)===n&&(4===Io||3===Io&&(62914560&Po)===Po&&500>Ui()-Go?hf(e,0):Ho|=n),of(e,t)}function Nf(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===tl()?1:2:(0===ua&&(ua=Uo),0===(t=js(62914560&~ua))&&(t=4194304))),n=ef(),null!==(e=rf(e,t))&&(qs(e,t,n),of(e,n))}function Of(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $f(e,t,n,r){return new Of(e,t,n,r)}function Tf(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zf(e,t){var n=e.alternate;return null===n?((n=$f(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rf(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Tf(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Pt:return Pf(n.children,i,o,t);case Xt:a=8,i|=16;break;case Lt:a=8,i|=1;break;case Bt:return(e=$f(12,n,t,8|i)).elementType=Bt,e.type=Bt,e.lanes=o,e;case qt:return(e=$f(13,n,t,i)).type=qt,e.elementType=qt,e.lanes=o,e;case Wt:return(e=$f(19,n,t,i)).elementType=Wt,e.lanes=o,e;case Qt:return Lf(n,i,o,t);case Jt:return(e=$f(24,n,t,i)).elementType=Jt,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case It:a=10;break e;case jt:a=9;break e;case Ut:a=11;break e;case Ht:a=14;break e;case Vt:a=16,r=null;break e;case Gt:a=22;break e}throw Error(Da(130,null==e?e:typeof e,""))}return(t=$f(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pf(e,t,n,r){return(e=$f(7,e,r,t)).lanes=n,e}function Lf(e,t,n,r){return(e=$f(23,e,r,t)).elementType=Qt,e.lanes=n,e}function Bf(e,t,n){return(e=$f(6,e,null,t)).lanes=n,e}function If(e,t,n){return(t=$f(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jf(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.mutableSourceEagerHydrationData=null}function Uf(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Rt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qf(e,t,n,r){var i=t.current,o=ef(),a=tf(i);e:if(n){t:{if(xs(n=n._reactInternals)!==n||1!==n.tag)throw Error(Da(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Xu(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Da(171))}if(1===n.tag){var u=n.type;if(Xu(u)){n=Ku(n,u,s);break e}}n=s}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,(t=ml(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gl(i,t),nf(i,a,o),a}function Wf(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vf(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function Gf(){return null}function Yf(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new jf(e,t,null!=n&&!0===n.hydrate),t=$f(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,hl(t),e[pi]=n.current,Au(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xf(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wf(a);s.call(e)}}qf(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Yf(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Wf(a);u.call(e)}}cf((function(){qf(t,a,e,i)}))}return Wf(a)}function Jf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xf(t))throw Error(Da(200));return Uf(e,t,null,n)}function Kf(){if(_t={},kt=xe(),Et=c(),wt(),!kt)throw Error(Da(227));var e;if(St=new Set,At={},Ct=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Dt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mt=Object.prototype.hasOwnProperty,Ft={},Nt={},Ot={},"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Ot[e]=new Na(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Ot[t]=new Na(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Ot[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Ot[e]=new Na(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Ot[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Ot[e]=new Na(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Ot[e]=new Na(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){Ot[e]=new Na(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){Ot[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)})),$t=/[\-:]([a-z])/g,"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)})),Ot.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)})),Tt=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zt=60103,Rt=60106,Pt=60107,Lt=60108,Bt=60114,It=60109,jt=60110,Ut=60112,qt=60113,Wt=60120,Ht=60115,Vt=60116,Gt=60121,Yt=60128,Xt=60129,Qt=60130,Jt=60131,"function"==typeof Symbol&&Symbol.for&&(Kt=Symbol.for,zt=Kt("react.element"),Rt=Kt("react.portal"),Pt=Kt("react.fragment"),Lt=Kt("react.strict_mode"),Bt=Kt("react.profiler"),It=Kt("react.provider"),jt=Kt("react.context"),Ut=Kt("react.forward_ref"),qt=Kt("react.suspense"),Wt=Kt("react.suspense_list"),Ht=Kt("react.memo"),Vt=Kt("react.lazy"),Gt=Kt("react.block"),Kt("react.scope"),Yt=Kt("react.opaque.id"),Xt=Kt("react.debug_trace_mode"),Qt=Kt("react.offscreen"),Jt=Kt("react.legacy_hidden")),Zt="function"==typeof Symbol&&Symbol.iterator,tn=!1,nn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},e=function(e,t){if(e.namespaceURI!==nn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rn=rn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},on="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e,an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"],Object.keys(an).forEach((function(e){sn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]}))})),un=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ln=null,cn=null,fn=null,dn=hs,hn=!1,pn=!1,mn=!1,Ct)try{gn={},Object.defineProperty(gn,"passive",{get:function(){mn=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch(e){mn=!1}yn=!1,vn=null,bn=!1,xn=null,wn={onError:function(e){yn=!0,vn=e}},An=!1,Cn=[],Dn=null,Mn=null,Fn=null,Nn=new Map,On=new Map,$n=[],Tn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),zn={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},Rn={},Pn={},Ct&&(Pn=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition),Ln=zs("animationend"),Bn=zs("animationiteration"),In=zs("animationstart"),jn=zs("transitionend"),Un=new Map,qn=new Map,Wn=["abort","abort",Ln,"animationEnd",Bn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jn,"transitionEnd","waiting","waiting"],(0,wt().unstable_now)(),Hn=8,Vn=Math.clz32?Math.clz32:Ws,Gn=Math.log,Yn=Math.LN2,Xn=wt().unstable_UserBlockingPriority,Qn=wt().unstable_runWithPriority,Jn=!0,Kn=null,Zn=null,er=null,nr=Zs(tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0}),rr=Et({},tr,{view:0,detail:0}),ir=Zs(rr),ur=Et({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),lr=Zs(ur),cr=Et({},ur,{dataTransfer:0}),fr=Zs(cr),dr=Et({},rr,{relatedTarget:0}),hr=Zs(dr),pr=Et({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Zs(pr),gr=Et({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=Zs(gr),vr=Et({},tr,{data:0}),br=Zs(vr),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},kr=Et({},rr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qs(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return"keypress"===e.type?Qs(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qs(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=Zs(kr),Sr=Et({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Zs(Sr),Cr=Et({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),Dr=Zs(Cr),Mr=Et({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fr=Zs(Mr),Nr=Et({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=Zs(Nr),$r=[9,13,27,32],Tr=Ct&&"CompositionEvent"in window,zr=null,Ct&&"documentMode"in document&&(zr=document.documentMode),Rr=Ct&&"TextEvent"in window&&!zr,Pr=Ct&&(!Tr||zr&&8<zr&&11>=zr),Lr=String.fromCharCode(32),Br=!1,Ir=!1,jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ur=null,qr=null,Wr=!1,Ct&&(Ct?((Vr="oninput"in document)||((Gr=document.createElement("div")).setAttribute("oninput","return;"),Vr="function"==typeof Gr.oninput),Hr=Vr):Hr=!1,Wr=Hr&&(!document.documentMode||9<document.documentMode)),Yr="function"==typeof Object.is?Object.is:mu,Xr=Object.prototype.hasOwnProperty,Qr=Ct&&"documentMode"in document&&11>=document.documentMode,Jr=null,Kr=null,Zr=null,ei=!1,Rs("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rs("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rs(Wn,2);for(ti="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ni=0;ni<ti.length;ni++)qn.set(ti[ni],0);if(Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" ")),ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri)),oi="_reactListening"+Math.random().toString(36).slice(2),ai=null,si=null,ui="function"==typeof setTimeout?setTimeout:void 0,li="function"==typeof clearTimeout?clearTimeout:void 0,ci=0,fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,mi="__reactEvents$"+fi,gi=[],yi=-1,bi=Hu(vi={}),xi=Hu(!1),wi=vi,_i=null,ki=null,Ei=wt().unstable_runWithPriority,Si=wt().unstable_scheduleCallback,Ai=wt().unstable_cancelCallback,Ci=wt().unstable_shouldYield,Di=wt().unstable_requestPaint,Mi=wt().unstable_now,Fi=wt().unstable_getCurrentPriorityLevel,Ni=wt().unstable_ImmediatePriority,Oi=wt().unstable_UserBlockingPriority,$i=wt().unstable_NormalPriority,Ti=wt().unstable_LowPriority,zi=wt().unstable_IdlePriority,Ri={},Pi=void 0!==Di?Di:function(){},Li=null,Bi=null,Ii=!1,ji=Mi(),Ui=1e4>ji?Mi:function(){return Mi()-ji},qi=Tt.ReactCurrentBatchConfig,Wi=Hu(null),Hi=null,Vi=null,Gi=null,Yi=!1,Xi=(new kt.Component).refs,Qi={isMounted:function(e){return!!(e=e._reactInternals)&&xs(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ef(),r=tf(e),i=ml(n,r);i.tag=2,null!=t&&(i.callback=t),gl(e,i),nf(e,r,n)}},Ji=Array.isArray,Ki=Cl(!0),Zi=Cl(!1),to=Hu(eo={}),no=Hu(eo),ro=Hu(eo),io=Hu(0),oo=null,ao=null,so=!1,uo=[],lo=Tt.ReactCurrentDispatcher,co=Tt.ReactCurrentBatchConfig,fo=0,ho=null,po=null,mo=null,go=!1,yo=!1,vo={readContext:dl,useCallback:jl,useContext:jl,useEffect:jl,useImperativeHandle:jl,useLayoutEffect:jl,useMemo:jl,useReducer:jl,useRef:jl,useState:jl,useDebugValue:jl,useDeferredValue:jl,useTransition:jl,useMutableSource:jl,useOpaqueIdentifier:jl,unstable_isNewReconciler:!1},bo={readContext:dl,useCallback:function(e,t){return Wl().memoizedState=[e,void 0===t?null:t],e},useContext:dl,useEffect:ic,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,nc(4,2,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var n=Wl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=hc.bind(null,ho,e),[r.memoizedState,e]},useRef:ec,useState:Kl,useDebugValue:lc,useDeferredValue:function(e){var t=Kl(e),n=t[0],r=t[1];return ic((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Kl(!1),t=e[0];return ec(e=dc.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Wl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ql(r,e,t,n)},useOpaqueIdentifier:function(){if(so){var e=!1,t=function(e){return{$$typeof:Yt,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(ci++).toString(36))),Error(Da(355))})),n=Kl(t)[1];return 0==(2&ho.mode)&&(ho.flags|=516,Zl(5,(function(){n("r:"+(ci++).toString(36))}),void 0,null)),t}return Kl(t="r:"+(ci++).toString(36)),t},unstable_isNewReconciler:!1},xo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Gl,useRef:tc,useState:function(){return Gl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Gl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Gl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Gl(Vl)[0]},unstable_isNewReconciler:!1},wo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Yl,useRef:tc,useState:function(){return Yl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Yl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Yl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Yl(Vl)[0]},unstable_isNewReconciler:!1},_o=Tt.ReactCurrentOwner,ko=!1,Eo={dehydrated:null,retryLane:0},So=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Co=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(to.current);var o,a=null;switch(n){case"input":i=Wa(e,i),r=Wa(e,r),a=[];break;case"option":i=Qa(e,i),r=Qa(e,r),a=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":i=Ka(e,i),r=Ka(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Tu)}for(l in ss(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(At.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(At.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Su("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Yt?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)},Mo="function"==typeof WeakMap?WeakMap:Map,Fo="function"==typeof WeakSet?WeakSet:Set,No=Math.ceil,Oo=Tt.ReactCurrentDispatcher,$o=Tt.ReactCurrentOwner,To=0,zo=null,Ro=null,Po=0,Lo=0,Bo=Hu(0),Io=0,jo=null,Uo=0,qo=0,Wo=0,Ho=0,Vo=null,Go=0,Yo=1/0,Xo=null,Qo=!1,Jo=null,Ko=null,Zo=!1,ea=null,ta=90,na=[],ra=[],ia=null,oa=0,aa=null,sa=-1,ua=0,la=0,ca=null,fa=!1,da=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ko=!0;else{if(0==(n&r)){switch(ko=!1,t.tag){case 3:kc(t),Bl();break;case 5:Nl(t);break;case 1:Xu(t.type)&&Zu(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Gu(Wi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ec(e,t,n):(Gu(io,1&io.current),null!==(t=Nc(e,t,n))?t.sibling:null);Gu(io,1&io.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Fc(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gu(io,io.current),r)break;return null;case 23:case 24:return t.lanes=0,vc(e,t,n)}return Nc(e,t,n)}ko=0!=(16384&e.flags)}else ko=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Yu(t,bi.current),fl(t,n),i=ql(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xu(r)){var o=!0;Zu(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hl(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&xl(t,r,a,e),i.updater=Qi,t.stateNode=i,i._reactInternals=t,El(t,r,e,n),t=_c(null,t,r,!0,o,n)}else t.tag=0,pc(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Tf(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ut)return 11;if(e===Ht)return 14}return 2}(i),e=sl(i,e),o){case 0:t=xc(null,t,i,e,n);break e;case 1:t=wc(null,t,i,e,n);break e;case 11:t=mc(null,t,i,e,n);break e;case 14:t=gc(null,t,i,sl(i.type,e),r,n);break e}throw Error(Da(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,xc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 1:return r=t.type,i=t.pendingProps,wc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 3:if(kc(t),r=t.updateQueue,null===e||null===r)throw Error(Da(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,pl(e,t),vl(t,r,null,n),(r=t.memoizedState.element)===i)Bl(),t=Nc(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ao=Lu(t.stateNode.containerInfo.firstChild),oo=t,o=so=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],uo.push(o);for(n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else pc(e,t,r,n),Bl();t=t.child}return t;case 5:return Nl(t),null===e&&Rl(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Ru(r,i)?a=null:null!==o&&Ru(r,o)&&(t.flags|=16),bc(e,t),pc(e,t,a,n),t.child;case 6:return null===e&&Rl(t),null;case 13:return Ec(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):pc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,mc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 7:return pc(e,t,t.pendingProps,n),t.child;case 8:case 12:return pc(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Gu(Wi,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Yr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!xi.current){t=Nc(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=ml(-1,n&-n)).tag=2,gl(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cl(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}pc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,fl(t,n),r=r(i=dl(i,o.unstable_observedBits)),t.flags|=1,pc(e,t,r,n),t.child;case 14:return o=sl(i=t.type,t.pendingProps),gc(e,t,i,o=sl(i.type,o),r,n);case 15:return yc(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sl(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Xu(r)?(e=!0,Zu(t)):e=!1,fl(t,n),_l(t,r,i),El(t,r,i,n),_c(null,t,r,!0,e,n);case 19:return Fc(e,t,n);case 23:case 24:return vc(e,t,n)}throw Error(Da(156,t.tag))},Yf.prototype.render=function(e){qf(e,this._internalRoot,null,null)},Yf.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qf(null,e,null,(function(){t[pi]=null}))},_n=function(e){13===e.tag&&(nf(e,4,ef()),Vf(e,4))},kn=function(e){13===e.tag&&(nf(e,67108864,ef()),Vf(e,67108864))},En=function(e){if(13===e.tag){var t=ef(),n=tf(e);nf(e,n,t),Vf(e,n)}},Sn=function(e,t){return t()},ln=function(e,t,n){switch(t){case"input":if(Ga(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qu(r);if(!i)throw Error(Da(90));Ua(r),Ga(r,i)}}}break;case"textarea":es(e,n);break;case"select":null!=(t=n.value)&&Ja(e,!!n.multiple,t,!1)}},hs=lf,ps=function(e,t,n,r,i){var o=To;To|=4;try{return rl(98,e.bind(null,t,n,r,i))}finally{0===(To=o)&&(Zc(),ol())}},ms=function(){0==(49&To)&&(function(){if(null!==ia){var e=ia;ia=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,of(e,Ui())}))}ol()}(),Ef())},dn=function(e,t){var n=To;To|=2;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}},ha={Events:[ju,Uu,qu,fs,ds,Ef,{current:!1}]},ma={bundleType:(pa={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ks(e))?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||Gf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(ga=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&ga.supportsFiber)try{_i=ga.inject(ma),ki=ga}catch(e){}ya=ha,_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ya,va=Jf,_t.createPortal=va,ba=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Da(188));throw Error(Da(268,Object.keys(e)))}return e=null===(e=ks(t))?null:e.stateNode},_t.findDOMNode=ba,xa=function(e,t){var n=To;if(0!=(48&n))return e(t);To|=1;try{if(e)return rl(99,e.bind(null,t))}finally{To=n,ol()}},_t.flushSync=xa,wa=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!0,n)},_t.hydrate=wa,_a=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!1,n)},_t.render=_a,ka=function(e){if(!Xf(e))throw Error(Da(40));return!!e._reactRootContainer&&(cf((function(){Qf(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},_t.unmountComponentAtNode=ka,Ea=lf,_t.unstable_batchedUpdates=Ea,Sa=function(e,t){return Jf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},_t.unstable_createPortal=Sa,Aa=function(e,t,n,r){if(!Xf(n))throw Error(Da(200));if(null==e||void 0===e._reactInternals)throw Error(Da(38));return Qf(e,t,n,!1,r)},_t.unstable_renderSubtreeIntoContainer=Aa,"17.0.2",_t.version="17.0.2"}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ca||(Ca=!0,Kf());var Zf=e(_t);xe();var ed={},td={};function nd(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function rd(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function id(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function od(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+id(-t,6):t>9999?"+"+id(t,6):id(t,4))+"-"+id(e.getUTCMonth()+1,2)+"-"+id(e.getUTCDate(),2)+(o?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"."+id(o,3)+"Z":i?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"Z":r||n?"T"+id(n,2)+":"+id(r,2)+"Z":"")}var ad=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return td;if(l)return l=!1,ed;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))l=!0;else if(13===r)l=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==td;){for(var f=[];r!==ed&&r!==td;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?od(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=nd(e);return function(r,i){return t(n(r),i,e)}}(e,t):nd(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=rd(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=rd(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},sd=ad(","),ud=sd.parse,ld=(sd.parseRows,sd.format,sd.formatBody,sd.formatRows,sd.formatRow,sd.formatValue,ad("\t")),cd=ld.parse;ld.parseRows,ld.format,ld.formatBody,ld.formatRows,ld.formatRow,ld.formatValue;function fd(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var dd=function(e,t){return fetch(e,t).then(fd)};function hd(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),dd(t,n).then((function(t){return e(t,r)}))}}var pd=hd(ud);hd(cd);xe();const md=e=>{const[t,n]=xe().useState([]),[r,i]=xe().useState(!0);return xe().useEffect((()=>{!async function(){const t=await pd(e);n(t),i(!1)}()}),[]),[t,r]};var gd=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},yd=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>gd(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}};var vd=function(e){return null===e?NaN:+e};const bd=yd(gd),xd=bd.right,wd=bd.left;yd(vd).center;class _d{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}var kd=Array.prototype,Ed=(kd.slice,kd.map,Math.sqrt(50)),Sd=Math.sqrt(10),Ad=Math.sqrt(2),Cd=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=Dd(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o};function Dd(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Ed?10:o>=Sd?5:o>=Ad?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Ed?10:o>=Sd?5:o>=Ad?2:1)}function Md(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Ed?i*=10:o>=Sd?i*=5:o>=Ad&&(i*=2),t<e?-i:i}function Fd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Nd(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Od(e,t,n=0,r=e.length-1,i=gd){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Od(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}const o=e[t];let a=n,s=r;for($d(e,n,t),i(e[r],o)>0&&$d(e,n,r);a<s;){for($d(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?$d(e,n,s):(++s,$d(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function $d(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Td(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return Nd(e);if(t>=1)return Fd(e);var r,i=(r-1)*t,o=Math.floor(i),a=Fd(Od(e,o).subarray(0,o+1));return a+(Nd(e.subarray(o+1))-a)*(i-o)}}function zd(e,t,n=vd){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var Rd=function(e,t){return Td(e,.5,t)};function Pd(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var Ld=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function Bd(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var Id={},jd=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Ud(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qd(){}var Wd=.7,Hd=1.4285714285714286,Vd="\\s*([+-]?\\d+)\\s*",Gd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Yd="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xd=/^#([0-9a-f]{3,8})$/,Qd=new RegExp("^rgb\\("+[Vd,Vd,Vd]+"\\)$"),Jd=new RegExp("^rgb\\("+[Yd,Yd,Yd]+"\\)$"),Kd=new RegExp("^rgba\\("+[Vd,Vd,Vd,Gd]+"\\)$"),Zd=new RegExp("^rgba\\("+[Yd,Yd,Yd,Gd]+"\\)$"),eh=new RegExp("^hsl\\("+[Gd,Yd,Yd]+"\\)$"),th=new RegExp("^hsla\\("+[Gd,Yd,Yd,Gd]+"\\)$"),nh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function rh(){return this.rgb().formatHex()}function ih(){return this.rgb().formatRgb()}function oh(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Xd.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?ah(t):3===n?new ch(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?sh(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?sh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Qd.exec(e))?new ch(t[1],t[2],t[3],1):(t=Jd.exec(e))?new ch(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Kd.exec(e))?sh(t[1],t[2],t[3],t[4]):(t=Zd.exec(e))?sh(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=eh.exec(e))?ph(t[1],t[2]/100,t[3]/100,1):(t=th.exec(e))?ph(t[1],t[2]/100,t[3]/100,t[4]):nh.hasOwnProperty(e)?ah(nh[e]):"transparent"===e?new ch(NaN,NaN,NaN,0):null}function ah(e){return new ch(e>>16&255,e>>8&255,255&e,1)}function sh(e,t,n,r){return r<=0&&(e=t=n=NaN),new ch(e,t,n,r)}function uh(e){return e instanceof qd||(e=oh(e)),e?new ch((e=e.rgb()).r,e.g,e.b,e.opacity):new ch}function lh(e,t,n,r){return 1===arguments.length?uh(e):new ch(e,t,n,null==r?1:r)}function ch(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function fh(){return"#"+hh(this.r)+hh(this.g)+hh(this.b)}function dh(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function hh(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ph(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new yh(e,t,n,r)}function mh(e){if(e instanceof yh)return new yh(e.h,e.s,e.l,e.opacity);if(e instanceof qd||(e=oh(e)),!e)return new yh;if(e instanceof yh)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new yh(a,s,u,e.opacity)}function gh(e,t,n,r){return 1===arguments.length?mh(e):new yh(e,t,n,null==r?1:r)}function yh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function vh(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}jd(qd,oh,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:rh,formatHex:rh,formatHsl:function(){return mh(this).formatHsl()},formatRgb:ih,toString:ih}),jd(ch,lh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new ch(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new ch(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fh,formatHex:fh,formatRgb:dh,toString:dh})),jd(yh,gh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new yh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new yh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ch(vh(e>=240?e-240:e+120,i,r),vh(e,i,r),vh(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const bh=Math.PI/180,xh=180/Math.PI,wh=.96422,_h=.82521,kh=4/29,Eh=6/29,Sh=.12841854934601665;function Ah(e){if(e instanceof Dh)return new Dh(e.l,e.a,e.b,e.opacity);if(e instanceof zh)return Rh(e);e instanceof ch||(e=uh(e));var t,n,r=Oh(e.r),i=Oh(e.g),o=Oh(e.b),a=Mh((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Mh((.4360747*r+.3850649*i+.1430804*o)/wh),n=Mh((.0139322*r+.0971045*i+.7141733*o)/_h)),new Dh(116*a-16,500*(t-a),200*(a-n),e.opacity)}function Ch(e,t,n,r){return 1===arguments.length?Ah(e):new Dh(e,t,n,null==r?1:r)}function Dh(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Mh(e){return e>.008856451679035631?Math.pow(e,1/3):e/Sh+kh}function Fh(e){return e>Eh?e*e*e:Sh*(e-kh)}function Nh(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Oh(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function $h(e){if(e instanceof zh)return new zh(e.h,e.c,e.l,e.opacity);if(e instanceof Dh||(e=Ah(e)),0===e.a&&0===e.b)return new zh(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*xh;return new zh(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Th(e,t,n,r){return 1===arguments.length?$h(e):new zh(e,t,n,null==r?1:r)}function zh(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Rh(e){if(isNaN(e.h))return new Dh(e.l,0,0,e.opacity);var t=e.h*bh;return new Dh(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}jd(Dh,Ch,Ud(qd,{brighter:function(e){return new Dh(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Dh(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new ch(Nh(3.1338561*(t=wh*Fh(t))-1.6168667*(e=1*Fh(e))-.4906146*(n=_h*Fh(n))),Nh(-.9787684*t+1.9161415*e+.033454*n),Nh(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),jd(zh,Th,Ud(qd,{brighter:function(e){return new zh(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new zh(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Rh(this).rgb()}}));var Ph=-.14861,Lh=1.78277,Bh=-.29227,Ih=-.90649,jh=1.97294,Uh=-1.7884503806,qh=3.5172982438,Wh=-.6557636667999999;function Hh(e){if(e instanceof Gh)return new Gh(e.h,e.s,e.l,e.opacity);e instanceof ch||(e=uh(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Wh*r+Uh*t-qh*n)/-5.9615122912,o=r-i,a=(jh*(n-i)-Bh*o)/Ih,s=Math.sqrt(a*a+o*o)/(jh*i*(1-i)),u=s?Math.atan2(a,o)*xh-120:NaN;return new Gh(u<0?u+360:u,s,i,e.opacity)}function Vh(e,t,n,r){return 1===arguments.length?Hh(e):new Gh(e,t,n,null==r?1:r)}function Gh(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Yh(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}jd(Gh,Vh,Ud(qd,{brighter:function(e){return e=null==e?Hd:Math.pow(Hd,e),new Gh(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Wd:Math.pow(Wd,e),new Gh(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*bh,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ch(255*(t+n*(Ph*r+Lh*i)),255*(t+n*(Bh*r+Ih*i)),255*(t+n*(jh*r)),this.opacity)}}));var Xh=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Yh((n-r/t)*t,a,i,o,s)}},Qh=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Yh((n-r/t)*t,i,o,a,s)}},Jh=e=>()=>e;function Kh(e,t){return function(n){return e+n*t}}function Zh(e,t){var n=t-e;return n?Kh(e,n>180||n<-180?n-360*Math.round(n/360):n):Jh(isNaN(e)?t:e)}function ep(e){return 1==(e=+e)?tp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Jh(isNaN(t)?n:t)}}function tp(e,t){var n=t-e;return n?Kh(e,n):Jh(isNaN(e)?t:e)}var np=function e(t){var n=ep(t);function r(e,t){var r=n((e=lh(e)).r,(t=lh(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=tp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function rp(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=lh(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var ip=rp(Xh),op=rp(Qh),ap=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function sp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var up=function(e,t){return(sp(t)?ap:lp)(e,t)};function lp(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=yp(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var cp=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},fp=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},dp=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=yp(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},hp=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,pp=new RegExp(hp.source,"g");var mp,gp=function(e,t){var n,r,i,o=hp.lastIndex=pp.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=hp.exec(e))&&(r=pp.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:fp(n,r)})),o=pp.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},yp=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Jh(t):("number"===r?fp:"string"===r?(n=oh(t))?(t=n,np):gp:t instanceof oh?np:t instanceof Date?cp:sp(t)?ap:Array.isArray(t)?lp:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?dp:fp)(e,t)},vp=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},bp=function(e,t){var n=Zh(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},xp=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},wp=180/Math.PI,_p={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},kp=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*wp,skewX:Math.atan(u)*wp,scaleX:a,scaleY:s}};function Ep(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:fp(e,i)},{i:u-2,x:fp(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:fp(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:fp(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:fp(e,n)},{i:s-2,x:fp(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var Sp=Ep((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?_p:kp(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Ap=Ep((function(e){return null==e?_p:(mp||(mp=document.createElementNS("http://www.w3.org/2000/svg","g")),mp.setAttribute("transform",e),(e=mp.transform.baseVal.consolidate())?(e=e.matrix,kp(e.a,e.b,e.c,e.d,e.e,e.f)):_p)}),", ",")",")");function Cp(e){return((e=Math.exp(e))+1/e)/2}var Dp=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],c=i[0],f=i[1],d=i[2],h=c-s,p=f-u,m=h*h+p*p;if(m<1e-12)a=Math.log(d/l)/t,o=function(e){return[s+e*h,u+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,o=function(e){var r,i=e*a,o=Cp(b),c=l/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*h,u+c*p,l*o/Cp(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Mp(e){return function(t,n){var r=e((t=gh(t)).h,(n=gh(n)).h),i=tp(t.s,n.s),o=tp(t.l,n.l),a=tp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Fp=Mp(Zh),Np=Mp(tp);function Op(e,t){var n=tp((e=Ch(e)).l,(t=Ch(t)).l),r=tp(e.a,t.a),i=tp(e.b,t.b),o=tp(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function $p(e){return function(t,n){var r=e((t=Th(t)).h,(n=Th(n)).h),i=tp(t.c,n.c),o=tp(t.l,n.l),a=tp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Tp=$p(Zh),zp=$p(tp);function Rp(e){return function t(n){function r(t,r){var i=e((t=Vh(t)).h,(r=Vh(r)).h),o=tp(t.s,r.s),a=tp(t.l,r.l),s=tp(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var Pp=Rp(Zh),Lp=Rp(tp);function Bp(e,t){void 0===t&&(t=e,e=yp);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var Ip=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};function jp(e){return+e}t(Id,"interpolate",(function(){return yp})),t(Id,"interpolateArray",(function(){return up})),t(Id,"interpolateBasis",(function(){return Xh})),t(Id,"interpolateBasisClosed",(function(){return Qh})),t(Id,"interpolateDate",(function(){return cp})),t(Id,"interpolateDiscrete",(function(){return vp})),t(Id,"interpolateHue",(function(){return bp})),t(Id,"interpolateNumber",(function(){return fp})),t(Id,"interpolateNumberArray",(function(){return ap})),t(Id,"interpolateObject",(function(){return dp})),t(Id,"interpolateRound",(function(){return xp})),t(Id,"interpolateString",(function(){return gp})),t(Id,"interpolateTransformSvg",(function(){return Ap})),t(Id,"interpolateTransformCss",(function(){return Sp})),t(Id,"interpolateZoom",(function(){return Dp})),t(Id,"interpolateRgbBasisClosed",(function(){return op})),t(Id,"interpolateRgbBasis",(function(){return ip})),t(Id,"interpolateRgb",(function(){return np})),t(Id,"interpolateHslLong",(function(){return Np})),t(Id,"interpolateHsl",(function(){return Fp})),t(Id,"interpolateLab",(function(){return Op})),t(Id,"interpolateHclLong",(function(){return zp})),t(Id,"interpolateHcl",(function(){return Tp})),t(Id,"interpolateCubehelixLong",(function(){return Lp})),t(Id,"interpolateCubehelix",(function(){return Pp})),t(Id,"piecewise",(function(){return Bp})),t(Id,"quantize",(function(){return Ip}));var Up=[0,1];function qp(e){return e}function Wp(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Hp(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=Wp(i,r),o=n(a,o)):(r=Wp(r,i),o=n(o,a)),function(e){return o(r(e))}}function Vp(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Wp(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=xd(e,t,1,r)-1;return o[n](i[n](t))}}function Gp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Yp(){var e,t,n,r,i,o,a=Up,s=Up,u=yp,l=qp;function c(){var e,t,n,u=Math.min(a.length,s.length);return l!==qp&&(e=a[0],t=a[u-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?Vp:Hp,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),fp)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,jp),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=xp,c()},f.clamp=function(e){return arguments.length?(l=!!e||qp,c()):l!==qp},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function Xp(){return Yp()(qp,qp)}function Qp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function Jp(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function Kp(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var Zp=function(e){return(e=Kp(Math.abs(e)))?e[1]:NaN},em=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function tm(e){if(!(t=em.exec(e)))throw new Error("invalid format: "+e);var t;return new nm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function nm(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}tm.prototype=nm.prototype,nm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var rm,im,om,am,sm=function(e,t){var n=Kp(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},um={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>sm(100*e,t),r:sm,s:function(e,t){var n=Kp(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(rm=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Kp(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},lm=function(e){return e},cm=Array.prototype.map,fm=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],dm=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?lm:(t=cm.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?lm:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(cm.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=tm(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):um[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?u:"",w=um[v],_=/[defgprs%]/.test(v);function k(e){var i,o,u,d=b,k=x;if("c"===v)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===v?fm[8+rm/3]:"")+k+(E&&"("===f?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!h&&(e=r(e,1/0));var S=d.length+e.length+k.length,A=S<p?new Array(p-S+1).join(t):"";switch(m&&h&&(e=r(A+e,A.length?p-k.length:1/0),A=""),n){case"<":e=d+e+k+A;break;case"=":e=d+A+e+k;break;case"^":e=A.slice(0,S=A.length>>1)+d+e+k+A.slice(S);break;default:e=A+d+e+k}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=tm(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Zp(t)/3))),i=Math.pow(10,-r),o=fm[8+r/3];return function(e){return n(i*e)+o}}}};im=dm({thousands:",",grouping:[3],currency:["$",""]}),om=im.format,am=im.formatPrefix;var hm=function(e){return Math.max(0,-Zp(Math.abs(e)))},pm=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Zp(t)/3)))-Zp(Math.abs(e)))},mm=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zp(t)-Zp(e))+1};function gm(e,t,n,r){var i,o=Md(e,t,n);switch((r=tm(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=pm(o,a))||(r.precision=i),am(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=mm(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=hm(o))||(r.precision=i-2*("%"===r.type))}return om(r)}function ym(e){var t=e.domain;return e.ticks=function(e){var n=t();return Cd(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return gm(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=Dd(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function vm(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function bm(e){return Math.log(e)}function xm(e){return Math.exp(e)}function wm(e){return-Math.log(-e)}function _m(e){return-Math.exp(-e)}function km(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Em(e){return function(t){return-e(-t)}}function Sm(e){var t,n,r=e(bm,xm),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?km:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Em(t),n=Em(n),e(wm,_m)):e(bm,xm),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<o;++c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(c=o-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=Cd(s,u,p))}else m=Cd(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=om(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(vm(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Am(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Cm(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Dm(e){var t=1,n=e(Am(t),Cm(t));return n.constant=function(n){return arguments.length?e(Am(t=+n),Cm(t)):t},ym(n)}const Mm=Symbol("implicit");function Fm(){var e=new Map,t=[],n=[],r=Mm;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==Mm)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Fm(t,n).unknown(r)},Qp.apply(i,arguments),i}function Nm(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Om(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function $m(e){return e<0?-e*e:e*e}function Tm(e){var t=e(qp,qp),n=1;function r(){return 1===n?e(qp,qp):.5===n?e(Om,$m):e(Nm(n),Nm(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},ym(t)}function zm(){var e=Tm(Yp());return e.copy=function(){return Gp(e,zm()).exponent(e.exponent())},Qp.apply(e,arguments),e}var Rm=new Date,Pm=new Date;function Lm(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return Lm((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return Rm.setTime(+t),Pm.setTime(+r),e(Rm),e(Pm),Math.floor(n(Rm,Pm))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var Bm=Lm((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));Bm.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?Lm((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):Bm:null};Bm.range;const Im=1e3,jm=6e4,Um=36e5,qm=864e5,Wm=6048e5,Hm=2592e6,Vm=31536e6;var Gm=Lm((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*Im)}),(function(e,t){return(t-e)/Im}),(function(e){return e.getUTCSeconds()})),Ym=(Gm.range,Lm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Im)}),(function(e,t){e.setTime(+e+t*jm)}),(function(e,t){return(t-e)/jm}),(function(e){return e.getMinutes()}))),Xm=(Ym.range,Lm((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Im-e.getMinutes()*jm)}),(function(e,t){e.setTime(+e+t*Um)}),(function(e,t){return(t-e)/Um}),(function(e){return e.getHours()}))),Qm=(Xm.range,Lm((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jm)/qm),(e=>e.getDate()-1)));Qm.range;function Jm(e){return Lm((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jm)/Wm}))}var Km=Jm(0),Zm=Jm(1),eg=Jm(2),tg=Jm(3),ng=Jm(4),rg=Jm(5),ig=Jm(6),og=(Km.range,Zm.range,eg.range,tg.range,ng.range,rg.range,ig.range,Lm((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),ag=(og.range,Lm((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));ag.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Lm((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};ag.range;var sg=Lm((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*jm)}),(function(e,t){return(t-e)/jm}),(function(e){return e.getUTCMinutes()})),ug=(sg.range,Lm((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Um)}),(function(e,t){return(t-e)/Um}),(function(e){return e.getUTCHours()}))),lg=(ug.range,Lm((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/qm}),(function(e){return e.getUTCDate()-1})));lg.range;function cg(e){return Lm((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Wm}))}var fg=cg(0),dg=cg(1),hg=cg(2),pg=cg(3),mg=cg(4),gg=cg(5),yg=cg(6),vg=(fg.range,dg.range,hg.range,pg.range,mg.range,gg.range,yg.range,Lm((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),bg=(vg.range,Lm((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));bg.every=function(e){return isFinite(e=Math.floor(e))&&e>0?Lm((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};bg.range;function xg(e,t,n,r,i,o){const a=[[Gm,1,Im],[Gm,5,5e3],[Gm,15,15e3],[Gm,30,3e4],[o,1,jm],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,Um],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,qm],[r,2,1728e5],[n,1,Wm],[t,1,Hm],[t,3,7776e6],[e,1,Vm]];function s(t,n,r){const i=Math.abs(n-t)/r,o=yd((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(Md(t/Vm,n/Vm,r));if(0===o)return Bm.every(Math.max(Md(t,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[wg,_g]=xg(bg,vg,fg,lg,ug,sg),[kg,Eg]=xg(ag,og,Km,Qm,Xm,Ym);function Sg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ag(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Cg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Dg(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=Ig(i),c=jg(i),f=Ig(o),d=jg(o),h=Ig(a),p=jg(a),m=Ig(s),g=jg(s),y=Ig(u),v=jg(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:uy,e:uy,f:hy,g:Ey,G:Ay,H:ly,I:cy,j:fy,L:dy,m:py,M:my,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Xy,s:Qy,S:gy,u:yy,U:vy,V:xy,w:wy,W:_y,x:null,X:null,y:ky,Y:Sy,Z:Cy,"%":Yy},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Dy,e:Dy,f:$y,g:Wy,G:Vy,H:My,I:Fy,j:Ny,L:Oy,m:Ty,M:zy,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Xy,s:Qy,S:Ry,u:Py,U:Ly,V:Iy,w:jy,W:Uy,x:null,X:null,y:qy,Y:Hy,Z:Gy,"%":Yy},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Kg,e:Kg,f:iy,g:Yg,G:Gg,H:ey,I:ey,j:Zg,L:ry,m:Jg,M:ty,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:Qg,Q:ay,s:sy,S:ny,u:qg,U:Wg,V:Hg,w:Ug,W:Vg,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:Yg,Y:Gg,Z:Xg,"%":oy};function _(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Tg[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=Cg(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ag(Cg(o.y,0,1))).getUTCDay(),r=i>4||0===i?dg.ceil(r):dg(r),r=lg.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Sg(Cg(o.y,0,1))).getDay(),r=i>4||0===i?Zm.ceil(r):Zm(r),r=Qm.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ag(Cg(o.y,0,1)).getUTCDay():Sg(Cg(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ag(o)):Sg(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Tg?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var Mg,Fg,Ng,Og,$g,Tg={"-":"",_:" ",0:"0"},zg=/^\s*\d+/,Rg=/^%/,Pg=/[\\^$*+?|[\]().{}]/g;function Lg(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Bg(e){return e.replace(Pg,"\\$&")}function Ig(e){return new RegExp("^(?:"+e.map(Bg).join("|")+")","i")}function jg(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function Ug(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function qg(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Hg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Vg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Gg(e,t,n){var r=zg.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Yg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Xg(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Qg(e,t,n){var r=zg.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Jg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Kg(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Zg(e,t,n){var r=zg.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function ey(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function ty(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function ny(e,t,n){var r=zg.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ry(e,t,n){var r=zg.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function iy(e,t,n){var r=zg.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function oy(e,t,n){var r=Rg.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function ay(e,t,n){var r=zg.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function sy(e,t,n){var r=zg.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function uy(e,t){return Lg(e.getDate(),t,2)}function ly(e,t){return Lg(e.getHours(),t,2)}function cy(e,t){return Lg(e.getHours()%12||12,t,2)}function fy(e,t){return Lg(1+Qm.count(ag(e),e),t,3)}function dy(e,t){return Lg(e.getMilliseconds(),t,3)}function hy(e,t){return dy(e,t)+"000"}function py(e,t){return Lg(e.getMonth()+1,t,2)}function my(e,t){return Lg(e.getMinutes(),t,2)}function gy(e,t){return Lg(e.getSeconds(),t,2)}function yy(e){var t=e.getDay();return 0===t?7:t}function vy(e,t){return Lg(Km.count(ag(e)-1,e),t,2)}function by(e){var t=e.getDay();return t>=4||0===t?ng(e):ng.ceil(e)}function xy(e,t){return e=by(e),Lg(ng.count(ag(e),e)+(4===ag(e).getDay()),t,2)}function wy(e){return e.getDay()}function _y(e,t){return Lg(Zm.count(ag(e)-1,e),t,2)}function ky(e,t){return Lg(e.getFullYear()%100,t,2)}function Ey(e,t){return Lg((e=by(e)).getFullYear()%100,t,2)}function Sy(e,t){return Lg(e.getFullYear()%1e4,t,4)}function Ay(e,t){var n=e.getDay();return Lg((e=n>=4||0===n?ng(e):ng.ceil(e)).getFullYear()%1e4,t,4)}function Cy(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Lg(t/60|0,"0",2)+Lg(t%60,"0",2)}function Dy(e,t){return Lg(e.getUTCDate(),t,2)}function My(e,t){return Lg(e.getUTCHours(),t,2)}function Fy(e,t){return Lg(e.getUTCHours()%12||12,t,2)}function Ny(e,t){return Lg(1+lg.count(bg(e),e),t,3)}function Oy(e,t){return Lg(e.getUTCMilliseconds(),t,3)}function $y(e,t){return Oy(e,t)+"000"}function Ty(e,t){return Lg(e.getUTCMonth()+1,t,2)}function zy(e,t){return Lg(e.getUTCMinutes(),t,2)}function Ry(e,t){return Lg(e.getUTCSeconds(),t,2)}function Py(e){var t=e.getUTCDay();return 0===t?7:t}function Ly(e,t){return Lg(fg.count(bg(e)-1,e),t,2)}function By(e){var t=e.getUTCDay();return t>=4||0===t?mg(e):mg.ceil(e)}function Iy(e,t){return e=By(e),Lg(mg.count(bg(e),e)+(4===bg(e).getUTCDay()),t,2)}function jy(e){return e.getUTCDay()}function Uy(e,t){return Lg(dg.count(bg(e)-1,e),t,2)}function qy(e,t){return Lg(e.getUTCFullYear()%100,t,2)}function Wy(e,t){return Lg((e=By(e)).getUTCFullYear()%100,t,2)}function Hy(e,t){return Lg(e.getUTCFullYear()%1e4,t,4)}function Vy(e,t){var n=e.getUTCDay();return Lg((e=n>=4||0===n?mg(e):mg.ceil(e)).getUTCFullYear()%1e4,t,4)}function Gy(){return"+0000"}function Yy(){return"%"}function Xy(e){return+e}function Qy(e){return Math.floor(+e/1e3)}function Jy(e){return new Date(e)}function Ky(e){return e instanceof Date?+e:+new Date(+e)}function Zy(e,t,n,r,i,o,a,s,u,l){var c=Xp(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?h:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(Array.from(e,Ky)):d().map(Jy)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(vm(n,e)):c},c.copy=function(){return Gp(c,Zy(e,t,n,r,i,o,a,s,u,l))},c}function ev(){var e,t,n,r,i,o=0,a=1,s=qp,u=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(yp),l.rangeRound=c(xp),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function tv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nv(){var e=ym(ev()(qp));return e.copy=function(){return tv(e,nv())},Jp.apply(e,arguments)}function rv(){var e=Tm(ev());return e.copy=function(){return tv(e,rv()).exponent(e.exponent())},Jp.apply(e,arguments)}function iv(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=qp,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=Bp(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,l]=a,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h):[s,u,l]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(yp),h.rangeRound=p(xp),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h}}function ov(){var e=Tm(iv());return e.copy=function(){return tv(e,ov()).exponent(e.exponent())},Jp.apply(e,arguments)}!function(e){Mg=Dg(e),Fg=Mg.format,Ng=Mg.parse,Og=Mg.utcFormat,$g=Mg.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var av={value:()=>{}};function sv(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new uv(r)}function uv(e){this._=e}function lv(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function cv(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function fv(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=av,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}uv.prototype=sv.prototype={constructor:uv,on:function(e,t){var n,r=this._,i=lv(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=fv(r[n],e.name,t);else if(null==t)for(n in r)r[n]=fv(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=cv(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uv(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var dv=function(e){return function(){return this.matches(e)}};function hv(e){return function(t){return t.matches(e)}}var pv="http://www.w3.org/1999/xhtml",mv={svg:"http://www.w3.org/2000/svg",xhtml:pv,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},gv=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),mv.hasOwnProperty(t)?{space:mv[t],local:e}:e};function yv(){}var vv=function(e){return null==e?yv:function(){return this.querySelector(e)}},bv=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function xv(){return[]}var wv=function(e){return null==e?xv:function(){return this.querySelectorAll(e)}};var _v=Array.prototype.find;function kv(){return this.firstElementChild}var Ev=Array.prototype.filter;function Sv(){return this.children}var Av=function(e){return new Array(e.length)};function Cv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Cv.prototype={constructor:Cv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Dv=function(e){return function(){return e}};function Mv(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Cv(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Fv(e,t,n,r,i,o,a){var s,u,l,c=new Map,f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new Cv(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function Nv(e){return e.__data__}function Ov(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function $v(e){return function(){this.removeAttribute(e)}}function Tv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function zv(e,t){return function(){this.setAttribute(e,t)}}function Rv(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Pv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Lv(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Bv=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Iv(e){return function(){this.style.removeProperty(e)}}function jv(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Uv(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function qv(e,t){return e.style.getPropertyValue(t)||Bv(e).getComputedStyle(e,null).getPropertyValue(t)}function Wv(e){return function(){delete this[e]}}function Hv(e,t){return function(){this[e]=t}}function Vv(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Gv(e){return e.trim().split(/^|\s+/)}function Yv(e){return e.classList||new Xv(e)}function Xv(e){this._node=e,this._names=Gv(e.getAttribute("class")||"")}function Qv(e,t){for(var n=Yv(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Jv(e,t){for(var n=Yv(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Kv(e){return function(){Qv(this,e)}}function Zv(e){return function(){Jv(this,e)}}function eb(e,t){return function(){(t.apply(this,arguments)?Qv:Jv)(this,e)}}Xv.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function tb(){this.textContent=""}function nb(e){return function(){this.textContent=e}}function rb(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ib(){this.innerHTML=""}function ob(e){return function(){this.innerHTML=e}}function ab(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function sb(){this.nextSibling&&this.parentNode.appendChild(this)}function ub(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lb(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===pv&&t.documentElement.namespaceURI===pv?t.createElement(e):t.createElementNS(n,e)}}function cb(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var fb=function(e){var t=gv(e);return(t.local?cb:lb)(t)};function db(){return null}function hb(){var e=this.parentNode;e&&e.removeChild(this)}function pb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function mb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function gb(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function yb(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function vb(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function bb(e,t,n){var r=Bv(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xb(e,t){return function(){return bb(this,e,t)}}function wb(e,t){return function(){return bb(this,e,t.apply(this,arguments))}}var _b=[null];function kb(e,t){this._groups=e,this._parents=t}function Eb(){return new kb([[document.documentElement]],_b)}kb.prototype=Eb.prototype={constructor:kb,select:function(e){"function"!=typeof e&&(e=vv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new kb(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:bv(t)}}(e):wv(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new kb(r,i)},selectChild:function(e){return this.select(null==e?kv:function(e){return function(){return _v.call(this.children,e)}}("function"==typeof e?e:hv(e)))},selectChildren:function(e){return this.selectAll(null==e?Sv:function(e){return function(){return Ev.call(this.children,e)}}("function"==typeof e?e:hv(e)))},filter:function(e){"function"!=typeof e&&(e=dv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new kb(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Nv);var n=t?Fv:Mv,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Dv(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=bv(e.call(c,c&&c.__data__,l,r)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);v._next=b||null}}return(a=new kb(a,r))._enter=s,a._exit=u,a},enter:function(){return new kb(this._enter||this._groups.map(Av),this._parents)},exit:function(){return new kb(this._exit||this._groups.map(Av),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof kb))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new kb(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ov);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new kb(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=gv(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Tv:$v:"function"==typeof t?n.local?Lv:Pv:n.local?Rv:zv)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Iv:"function"==typeof t?Uv:jv)(e,t,null==n?"":n)):qv(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Wv:"function"==typeof t?Vv:Hv)(e,t)):this.node()[e]},classed:function(e,t){var n=Gv(e+"");if(arguments.length<2){for(var r=Yv(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?eb:t?Kv:Zv)(n,t))},text:function(e){return arguments.length?this.each(null==e?tb:("function"==typeof e?rb:nb)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ib:("function"==typeof e?ab:ob)(e)):this.node().innerHTML},raise:function(){return this.each(sb)},lower:function(){return this.each(ub)},append:function(e){var t="function"==typeof e?e:fb(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:fb(e),r=null==t?db:"function"==typeof t?t:vv(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(hb)},clone:function(e){return this.select(e?mb:pb)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=gb(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?vb:yb,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?wb:xb)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Sb=function(e){return"string"==typeof e?new kb([[document.querySelector(e)]],[document.documentElement]):new kb([[e]],_b)};var Ab,Cb,Db=0,Mb=0,Fb=0,Nb=0,Ob=0,$b=0,Tb="object"==typeof performance&&performance.now?performance:Date,zb="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rb(){return Ob||(zb(Pb),Ob=Tb.now()+$b)}function Pb(){Ob=0}function Lb(){this._call=this._time=this._next=null}function Bb(e,t,n){var r=new Lb;return r.restart(e,t,n),r}function Ib(){Ob=(Nb=Tb.now())+$b,Db=Mb=0;try{!function(){Rb(),++Db;for(var e,t=Ab;t;)(e=Ob-t._time)>=0&&t._call.call(null,e),t=t._next;--Db}()}finally{Db=0,function(){var e,t,n=Ab,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Ab=t);Cb=e,Ub(r)}(),Ob=0}}function jb(){var e=Tb.now(),t=e-Nb;t>1e3&&($b-=t,Nb=e)}function Ub(e){Db||(Mb&&(Mb=clearTimeout(Mb)),e-Ob>24?(e<1/0&&(Mb=setTimeout(Ib,e-Tb.now()-$b)),Fb&&(Fb=clearInterval(Fb))):(Fb||(Nb=Tb.now(),Fb=setInterval(jb,1e3)),Db=1,zb(Ib)))}Lb.prototype=Bb.prototype={constructor:Lb,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Rb():+n)+(null==t?0:+t),this._next||Cb===this||(Cb?Cb._next=this:Ab=this,Cb=this),this._call=e,this._time=n,Ub()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ub())}};var qb=function(e,t,n){var r=new Lb;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r},Wb=sv("start","end","cancel","interrupt"),Hb=[],Vb=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,f,d;if(1!==n.state)return u();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return qb(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(qb((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Bb(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Wb,tween:Hb,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Gb(e,t){var n=Xb(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Yb(e,t){var n=Xb(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Xb(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var Qb=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};function Jb(e,t){var n,r;return function(){var i=Yb(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function Kb(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Yb(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function Zb(e,t,n){var r=e._id;return e.each((function(){var e=Yb(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Xb(e,r).value[t]}}var ex=function(e,t){var n;return("number"==typeof t?fp:t instanceof oh?np:(n=oh(t))?(t=n,np):gp)(e,t)};function tx(e){return function(){this.removeAttribute(e)}}function nx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function rx(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function ix(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function ox(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function ax(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function sx(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ux(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function lx(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ux(e,i)),n}return i._value=t,i}function cx(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&sx(e,i)),n}return i._value=t,i}function fx(e,t){return function(){Gb(this,e).delay=+t.apply(this,arguments)}}function dx(e,t){return t=+t,function(){Gb(this,e).delay=t}}function hx(e,t){return function(){Yb(this,e).duration=+t.apply(this,arguments)}}function px(e,t){return t=+t,function(){Yb(this,e).duration=t}}function mx(e,t){if("function"!=typeof t)throw new Error;return function(){Yb(this,e).ease=t}}function gx(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Gb:Yb;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var yx=Eb.prototype.constructor;function vx(e){return function(){this.style.removeProperty(e)}}function bx(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xx(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bx(e,o,n)),r}return o._value=t,o}function wx(e){return function(t){this.textContent=e.call(this,t)}}function _x(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&wx(r)),t}return r._value=e,r}var kx=0;function Ex(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Sx(){return++kx}var Ax=Eb.prototype;Ex.prototype=function(e){return Eb().transition(e)}.prototype={constructor:Ex,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=vv(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,Vb(f[d],t,n,d,f,Xb(s,n)));return new Ex(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=wv(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=Xb(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&Vb(d,t,n,m,h,p);o.push(h),a.push(u)}return new Ex(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=dv(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Ex(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new Ex(a,this._parents,this._name,this._id)},selection:function(){return new yx(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Sx(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Xb(a,t);Vb(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Ex(r,this._parents,e,n)},call:Ax.call,nodes:Ax.nodes,node:Ax.node,size:Ax.size,empty:Ax.empty,each:Ax.each,on:function(e,t){var n=this._id;return arguments.length<2?Xb(this.node(),n).on.on(e):this.each(gx(n,e,t))},attr:function(e,t){var n=gv(e),r="transform"===n?Ap:ex;return this.attrTween(e,"function"==typeof t?(n.local?ax:ox)(n,r,Zb(this,"attr."+e,t)):null==t?(n.local?nx:tx)(n):(n.local?ix:rx)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=gv(e);return this.tween(n,(r.local?lx:cx)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Sp:ex;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=qv(this,e),a=(this.style.removeProperty(e),qv(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,vx(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=qv(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=qv(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,Zb(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=Yb(this,e),l=u.on,c=null==u.value[a]?o||(o=vx(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=qv(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,xx(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(Zb(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,_x(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Xb(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?Jb:Kb)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?fx:dx)(t,e)):Xb(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?hx:px)(t,e)):Xb(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(mx(t,e)):Xb(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Yb(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Yb(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Ax[Symbol.iterator]};var Cx={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Dx(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Eb.prototype.interrupt=function(e){return this.each((function(){Qb(this,e)}))},Eb.prototype.transition=function(e){var t,n;e instanceof Ex?(t=e._id,e=e._name):(t=Sx(),(n=Cx).time=Rb(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Vb(a,e,t,l,s,n||Dx(a,t));return new Ex(r,this._parents,e,t)};const{abs:Mx,max:Fx,min:Nx}=Math;["w","e"].map(Ox),["n","s"].map(Ox),["n","w","e","s","nw","ne","sw","se"].map(Ox);function Ox(e){return{type:e}}function $x(e,t,n){this.k=e,this.x=t,this.y=n}$x.prototype={constructor:$x,scale:function(e){return 1===e?this:new $x(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new $x(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new $x(1,0,0);$x.prototype;xe();class Tx extends xe().Component{componentDidMount(){this.drawBarChart([6043,5153,5507,5431,5743,4951])}drawBarChart(e){const t=600,n=Fm(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",40).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>45*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>45*t+10)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["edm","latin","pop","r&b","rap","rock"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",510).attr("cy",(function(e,t){return 100+25*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",530).attr("y",(function(e,t){return 100+25*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",300).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Genre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class zx extends xe().Component{componentDidMount(){this.drawBarChart([1065,1206,1296,1298,1511,1408,1456,1485,1322,1256,1672,1655,1262,1637,1133,1105,1517,1129,1809,948,1674,1291,1288,1405])}drawBarChart(e){const t=1050,n=Fm(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["album rock","big room","classic rock","dance pop","electro house","electropop","gangster rap","hard rock","hip hop","hip pop","indie poptimism","latin hip hop","latin pop","neo soul","new jack swing","permanent wave","pop edm","post-teen pop","progressive electro house","reggaeton","southern hip hop","trap","tropical","urban contemporary"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",870).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",885).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",525).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class Rx extends xe().Component{componentDidMount(){this.drawBarChart([1206,1511,1517,1809,1655,1262,948,1288,1298,1408,1672,1129,1256,1637,1133,1405,1456,1322,1674,1291,1065,1296,1485,1105])}drawBarChart(e){const t=1050,n=Fm(["#383867","#383867","#383867","#383867","#584c77","#584c77","#584c77","#584c77","#33431e","#33431e","#33431e","#33431e","#a36629","#a36629","#a36629","#a36629","#92462f","#92462f","#92462f","#92462f","#b63e36","#b63e36","#b63e36","#b63e36"]),r=Sb(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["big room","electro house","pop edm","progressive electro house","latin hip hop","latin pop","reggaeton","tropical","dance pop","electropop","indie poptimism","post-teen pop","hip pop","neo soul","new jack swing","urban contemporary","gangster rap","hip hop","southern hip hop","trap","album rock","classic rock","hard rock","permanent wave"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",870).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",885).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",525).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();var Px,Lx={},Bx=(Px=function(e,t){return(Px=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Px(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ix=Object.prototype.hasOwnProperty;
/*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017 Joachim Wester
  * MIT license
  */function jx(e,t){return Ix.call(e,t)}function Ux(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)jx(e,r)&&t.push(r);return t}function qx(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Wx(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function Hx(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Vx(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Gx(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Gx(e[t]))return!0}else if("object"==typeof e){var r=Ux(e),i=r.length;for(t=0;t<i;t++)if(Gx(e[r[t]]))return!0}return!1}function Yx(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}t(Lx,"hasOwnProperty",(function(){return jx})),t(Lx,"_objectKeys",(function(){return Ux})),t(Lx,"_deepClone",(function(){return qx})),t(Lx,"isInteger",(function(){return Wx})),t(Lx,"escapePathComponent",(function(){return Hx})),t(Lx,"unescapePathComponent",(function(){return Vx})),t(Lx,"hasUndefined",(function(){return Gx}));var Xx=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,Yx(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=Yx(t,{name:n,index:r,operation:i,tree:o}),s}return Bx(t,e),t}(Error);t(Lx,"PatchError",(function(){return Xx}));var Qx=Lx.PatchError,Jx={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Zx(n,this.path);r&&(r=Lx._deepClone(r));var i=ew(n,{op:"remove",path:this.from}).removed;return ew(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Zx(n,this.from);return ew(n,{op:"add",path:this.path,value:Lx._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:rw(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Kx={add:function(e,t,n){return Lx.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Jx.move,copy:Jx.copy,test:Jx.test,_get:Jx._get};function Zx(e,t){if(""==t)return e;var n={op:"_get",path:t};return ew(e,n),n.value}function ew(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):nw(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=Zx(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=rw(e,t.value),!1===a.test)throw new Qx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new Qx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=Lx._deepClone(e));var s=(t.path||"").split("/"),u=e,l=1,c=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:nw;;){if(d=s[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,l).join("/"):l==c-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),l++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!Lx.isInteger(d))throw new Qx("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Lx.isInteger(d)&&(d=~~d)}if(l>=c){if(n&&"add"===t.op&&d>u.length)throw new Qx("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=Kx[t.op].call(t,u,d,e)).test)throw new Qx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=Lx.unescapePathComponent(d)),l>=c){if(!1===(a=Jx[t.op].call(t,u,d,e)).test)throw new Qx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function tw(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new Qx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Lx._deepClone(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=ew(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function nw(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Qx("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!Jx[e.op])throw new Qx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Qx("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Qx('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Qx("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Qx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Lx.hasUndefined(e.value))throw new Qx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Qx("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Qx("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=function(e,t,n){try{if(!Array.isArray(e))throw new Qx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)tw(Lx._deepClone(t),Lx._deepClone(e),n||!0);else{n=n||nw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof Qx)return e;throw e}}([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Qx("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function rw(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!rw(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!rw(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;Object.assign({},Y2,Y2,{JsonPatchError:Lx.PatchError,deepClone:Lx._deepClone,escapePathComponent:Lx.escapePathComponent,unescapePathComponent:Lx.unescapePathComponent});var iw,ow,aw,sw,uw=/("(?:[^\\"]|\\.)*")|[:,]/g,lw=e((function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,a){var s,u,l,c,f,d,h,p,m,g,y,v;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,i)))return y;if(h=r-o.length-a,y.length<=h&&(m=y.replace(uw,(function(e,t){return t||e+" "}))).length<=h)return m;if(null!=i&&(t=JSON.parse(y),i=void 0),"object"==typeof t&&null!==t){if(p=o+n,l=[],u=0,Array.isArray(t))for(g="[",s="]",h=t.length;u<h;u++)l.push(e(t[u],p,u===h-1?0:1)||"null");else for(g="{",s="}",h=(d=Object.keys(t)).length;u<h;u++)c=d[u],f=JSON.stringify(c)+": ",void 0!==(v=e(t[c],p,f.length+(u===h-1?0:1)))&&l.push(f+v);if(l.length>0)return[g,n+l.join(",\n"+p),s].join("\n"+o)}return y}(e,"",0)})),cw={},fw={};const dw=Number.MAX_SAFE_INTEGER||9007199254740991;sw={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:dw,MAX_SAFE_COMPONENT_LENGTH:16};var hw,pw,mw,gw={};function yw(){throw new Error("setTimeout has not been defined")}function vw(){throw new Error("clearTimeout has not been defined")}function bw(e){if(pw===setTimeout)return setTimeout(e,0);if((pw===yw||!pw)&&setTimeout)return pw=setTimeout,setTimeout(e,0);try{return pw(e,0)}catch(t){try{return pw.call(null,e,0)}catch(t){return pw.call(this,e,0)}}}!function(){try{pw="function"==typeof setTimeout?setTimeout:yw}catch(e){pw=yw}try{mw="function"==typeof clearTimeout?clearTimeout:vw}catch(e){mw=vw}}();var xw,ww=[],_w=!1,kw=-1;function Ew(){_w&&xw&&(_w=!1,xw.length?ww=xw.concat(ww):kw=-1,ww.length&&Sw())}function Sw(){if(!_w){var e=bw(Ew);_w=!0;for(var t=ww.length;t;){for(xw=ww,ww=[];++kw<t;)xw&&xw[kw].run();kw=-1,t=ww.length}xw=null,_w=!1,function(e){if(mw===clearTimeout)return clearTimeout(e);if((mw===vw||!mw)&&clearTimeout)return mw=clearTimeout,clearTimeout(e);try{mw(e)}catch(t){try{return mw.call(null,e)}catch(t){return mw.call(this,e)}}}(e)}}function Aw(e,t){this.fun=e,this.array=t}function Cw(){}gw.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];ww.push(new Aw(e,t)),1!==ww.length||_w||bw(Sw)},Aw.prototype.run=function(){this.fun.apply(null,this.array)},gw.title="browser",gw.browser=!0,gw.env={},gw.argv=[],gw.version="",gw.versions={},gw.on=Cw,gw.addListener=Cw,gw.once=Cw,gw.off=Cw,gw.removeListener=Cw,gw.removeAllListeners=Cw,gw.emit=Cw,gw.prependListener=Cw,gw.prependOnceListener=Cw,gw.listeners=function(e){return[]},gw.binding=function(e){throw new Error("process.binding is not supported")},gw.cwd=function(){return"/"},gw.chdir=function(e){throw new Error("process.chdir is not supported")},gw.umask=function(){return 0};const Dw=hw=()=>{};fw={};const Mw=(iw=[],fw.re=iw),Fw=(ow=[],fw.src=ow),Nw=(aw={},fw.t=aw);let Ow=0;const $w=(e,t,n)=>{const r=Ow++;Dw(r,t),Nw[e]=r,Fw[r]=t,Mw[r]=new RegExp(t,n?"g":void 0)};$w("NUMERICIDENTIFIER","0|[1-9]\\d*"),$w("NUMERICIDENTIFIERLOOSE","[0-9]+"),$w("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),$w("MAINVERSION",`(${Fw[Nw.NUMERICIDENTIFIER]})\\.(${Fw[Nw.NUMERICIDENTIFIER]})\\.(${Fw[Nw.NUMERICIDENTIFIER]})`),$w("MAINVERSIONLOOSE",`(${Fw[Nw.NUMERICIDENTIFIERLOOSE]})\\.(${Fw[Nw.NUMERICIDENTIFIERLOOSE]})\\.(${Fw[Nw.NUMERICIDENTIFIERLOOSE]})`),$w("PRERELEASEIDENTIFIER",`(?:${Fw[Nw.NUMERICIDENTIFIER]}|${Fw[Nw.NONNUMERICIDENTIFIER]})`),$w("PRERELEASEIDENTIFIERLOOSE",`(?:${Fw[Nw.NUMERICIDENTIFIERLOOSE]}|${Fw[Nw.NONNUMERICIDENTIFIER]})`),$w("PRERELEASE",`(?:-(${Fw[Nw.PRERELEASEIDENTIFIER]}(?:\\.${Fw[Nw.PRERELEASEIDENTIFIER]})*))`),$w("PRERELEASELOOSE",`(?:-?(${Fw[Nw.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Fw[Nw.PRERELEASEIDENTIFIERLOOSE]})*))`),$w("BUILDIDENTIFIER","[0-9A-Za-z-]+"),$w("BUILD",`(?:\\+(${Fw[Nw.BUILDIDENTIFIER]}(?:\\.${Fw[Nw.BUILDIDENTIFIER]})*))`),$w("FULLPLAIN",`v?${Fw[Nw.MAINVERSION]}${Fw[Nw.PRERELEASE]}?${Fw[Nw.BUILD]}?`),$w("FULL",`^${Fw[Nw.FULLPLAIN]}$`),$w("LOOSEPLAIN",`[v=\\s]*${Fw[Nw.MAINVERSIONLOOSE]}${Fw[Nw.PRERELEASELOOSE]}?${Fw[Nw.BUILD]}?`),$w("LOOSE",`^${Fw[Nw.LOOSEPLAIN]}$`),$w("GTLT","((?:<|>)?=?)"),$w("XRANGEIDENTIFIERLOOSE",`${Fw[Nw.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),$w("XRANGEIDENTIFIER",`${Fw[Nw.NUMERICIDENTIFIER]}|x|X|\\*`),$w("XRANGEPLAIN",`[v=\\s]*(${Fw[Nw.XRANGEIDENTIFIER]})(?:\\.(${Fw[Nw.XRANGEIDENTIFIER]})(?:\\.(${Fw[Nw.XRANGEIDENTIFIER]})(?:${Fw[Nw.PRERELEASE]})?${Fw[Nw.BUILD]}?)?)?`),$w("XRANGEPLAINLOOSE",`[v=\\s]*(${Fw[Nw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Fw[Nw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Fw[Nw.XRANGEIDENTIFIERLOOSE]})(?:${Fw[Nw.PRERELEASELOOSE]})?${Fw[Nw.BUILD]}?)?)?`),$w("XRANGE",`^${Fw[Nw.GTLT]}\\s*${Fw[Nw.XRANGEPLAIN]}$`),$w("XRANGELOOSE",`^${Fw[Nw.GTLT]}\\s*${Fw[Nw.XRANGEPLAINLOOSE]}$`),$w("COERCE",`(^|[^\\d])(\\d{1,${sw.MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${sw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${sw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),$w("COERCERTL",Fw[Nw.COERCE],!0),$w("LONETILDE","(?:~>?)"),$w("TILDETRIM",`(\\s*)${Fw[Nw.LONETILDE]}\\s+`,!0);fw.tildeTrimReplace="$1~",$w("TILDE",`^${Fw[Nw.LONETILDE]}${Fw[Nw.XRANGEPLAIN]}$`),$w("TILDELOOSE",`^${Fw[Nw.LONETILDE]}${Fw[Nw.XRANGEPLAINLOOSE]}$`),$w("LONECARET","(?:\\^)"),$w("CARETTRIM",`(\\s*)${Fw[Nw.LONECARET]}\\s+`,!0);fw.caretTrimReplace="$1^",$w("CARET",`^${Fw[Nw.LONECARET]}${Fw[Nw.XRANGEPLAIN]}$`),$w("CARETLOOSE",`^${Fw[Nw.LONECARET]}${Fw[Nw.XRANGEPLAINLOOSE]}$`),$w("COMPARATORLOOSE",`^${Fw[Nw.GTLT]}\\s*(${Fw[Nw.LOOSEPLAIN]})$|^$`),$w("COMPARATOR",`^${Fw[Nw.GTLT]}\\s*(${Fw[Nw.FULLPLAIN]})$|^$`),$w("COMPARATORTRIM",`(\\s*)${Fw[Nw.GTLT]}\\s*(${Fw[Nw.LOOSEPLAIN]}|${Fw[Nw.XRANGEPLAIN]})`,!0);fw.comparatorTrimReplace="$1$2$3",$w("HYPHENRANGE",`^\\s*(${Fw[Nw.XRANGEPLAIN]})\\s+-\\s+(${Fw[Nw.XRANGEPLAIN]})\\s*$`),$w("HYPHENRANGELOOSE",`^\\s*(${Fw[Nw.XRANGEPLAINLOOSE]})\\s+-\\s+(${Fw[Nw.XRANGEPLAINLOOSE]})\\s*$`),$w("STAR","(<|>)?=?\\s*\\*"),$w("GTE0","^\\s*>=\\s*0.0.0\\s*$"),$w("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");var Tw;const zw=hw;var Rw;const Pw=["includePrerelease","loose","rtl"],Lw=Rw=e=>e?"object"!=typeof e?{loose:!0}:Pw.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};var Bw;const Iw=/^[0-9]+$/,jw=(e,t)=>{const n=Iw.test(e),r=Iw.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};Bw={compareIdentifiers:jw,rcompareIdentifiers:(e,t)=>jw(t,e)};class Uw{constructor(e,t){if(t=Lw(t),e instanceof Uw){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>sw.MAX_LENGTH)throw new TypeError(`version is longer than ${sw.MAX_LENGTH} characters`);zw("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?fw.re[fw.t.LOOSE]:fw.re[fw.t.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>sw.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>sw.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>sw.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<sw.MAX_SAFE_INTEGER)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(zw("SemVer.compare",this.version,this.options,e),!(e instanceof Uw)){if("string"==typeof e&&e===this.version)return 0;e=new Uw(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof Uw||(e=new Uw(e,this.options)),Bw.compareIdentifiers(this.major,e.major)||Bw.compareIdentifiers(this.minor,e.minor)||Bw.compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof Uw||(e=new Uw(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(zw("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Bw.compareIdentifiers(n,r)}while(++t)}compareBuild(e){e instanceof Uw||(e=new Uw(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(zw("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Bw.compareIdentifiers(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var qw;const Ww=Tw=Uw,Hw=Rw;var Vw;const Gw=qw=(e,t)=>{if(t=Hw(t),e instanceof Ww)return e;if("string"!=typeof e)return null;if(e.length>sw.MAX_LENGTH)return null;if(!(t.loose?fw.re[fw.t.LOOSE]:fw.re[fw.t.FULL]).test(e))return null;try{return new Ww(e,t)}catch(e){return null}};Vw=(e,t)=>{const n=Gw(e,t);return n?n.version:null};var Yw;const Xw=qw;Yw=(e,t)=>{const n=Xw(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var Qw;const Jw=Tw;Qw=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new Jw(e,n).inc(t,r).version}catch(e){return null}};var Kw;const Zw=qw;var e_,t_;const n_=Tw,r_=t_=(e,t,n)=>new n_(e,n).compare(new n_(t,n)),i_=e_=(e,t,n)=>0===r_(e,t,n);Kw=(e,t)=>{if(i_(e,t))return null;{const n=Zw(e),r=Zw(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}};var o_;const a_=Tw;o_=(e,t)=>new a_(e,t).major;var s_;const u_=Tw;s_=(e,t)=>new u_(e,t).minor;var l_;const c_=Tw;l_=(e,t)=>new c_(e,t).patch;var f_;const d_=qw;f_=(e,t)=>{const n=d_(e,t);return n&&n.prerelease.length?n.prerelease:null};var h_;const p_=t_;h_=(e,t,n)=>p_(t,e,n);var m_;const g_=t_;m_=(e,t)=>g_(e,t,!0);var y_;const v_=Tw;var b_;const x_=y_=(e,t,n)=>{const r=new v_(e,n),i=new v_(t,n);return r.compare(i)||r.compareBuild(i)};b_=(e,t)=>e.sort(((e,n)=>x_(e,n,t)));var w_;const __=y_;w_=(e,t)=>e.sort(((e,n)=>__(n,e,t)));var k_;const E_=t_;var S_;const A_=t_;var C_;const D_=t_;var M_;const F_=t_;var N_;const O_=t_;var $_;const T_=e_,z_=C_=(e,t,n)=>0!==D_(e,t,n),R_=k_=(e,t,n)=>E_(e,t,n)>0,P_=M_=(e,t,n)=>F_(e,t,n)>=0,L_=S_=(e,t,n)=>A_(e,t,n)<0,B_=N_=(e,t,n)=>O_(e,t,n)<=0;$_=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return T_(e,n,r);case"!=":return z_(e,n,r);case">":return R_(e,n,r);case">=":return P_(e,n,r);case"<":return L_(e,n,r);case"<=":return B_(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var I_;const j_=Tw,U_=qw;I_=(e,t)=>{if(e instanceof j_)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=fw.re[fw.t.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),fw.re[fw.t.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;fw.re[fw.t.COERCERTL].lastIndex=-1}else n=e.match(fw.re[fw.t.COERCE]);return null===n?null:U_(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var q_;const W_=Symbol("SemVer ANY");class H_{static get ANY(){return W_}constructor(e,t){if(t=V_(t),e instanceof H_){if(e.loose===!!t.loose)return e;e=e.value}Y_("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===W_?this.value="":this.value=this.operator+this.semver.version,Y_("comp",this)}parse(e){const t=this.options.loose?fw.re[fw.t.COMPARATORLOOSE]:fw.re[fw.t.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new X_(n[2],this.options.loose):this.semver=W_}toString(){return this.value}test(e){if(Y_("Comparator.test",e,this.options.loose),this.semver===W_||e===W_)return!0;if("string"==typeof e)try{e=new X_(e,this.options)}catch(e){return!1}return G_(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof H_))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new Wk(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new Wk(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=G_(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=G_(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}q_=H_;const V_=Rw,G_=$_,Y_=hw,X_=Tw;var Q_;class J_{constructor(e,t){if(t=Sk(t),e instanceof J_)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new J_(e.raw,t);if(e instanceof Ak)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!Mk(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&Fk(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=Ek.get(t);if(n)return n;const r=this.options.loose,i=r?fw.re[fw.t.HYPHENRANGELOOSE]:fw.re[fw.t.HYPHENRANGE];e=e.replace(i,Uk(this.options.includePrerelease)),Ck("hyphen replace",e),e=e.replace(fw.re[fw.t.COMPARATORTRIM],fw.comparatorTrimReplace),Ck("comparator trim",e,fw.re[fw.t.COMPARATORTRIM]),e=(e=(e=e.replace(fw.re[fw.t.TILDETRIM],fw.tildeTrimReplace)).replace(fw.re[fw.t.CARETTRIM],fw.caretTrimReplace)).split(/\s+/).join(" ");const o=r?fw.re[fw.t.COMPARATORLOOSE]:fw.re[fw.t.COMPARATOR],a=e.split(" ").map((e=>Ok(e,this.options))).join(" ").split(/\s+/).map((e=>jk(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new Ak(e,this.options))),s=(a.length,new Map);for(const e of a){if(Mk(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");const u=[...s.values()];return Ek.set(t,u),u}intersects(e,t){if(!(e instanceof J_))throw new TypeError("a Range is required");return this.set.some((n=>Nk(n,t)&&e.set.some((e=>Nk(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Dk(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(qk(this.set[t],e,this.options))return!0;return!1}}Q_=J_;var K_,Z_=!1;var ek;function tk(e){var t=this;if(t instanceof tk||(t=new tk),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function nk(e,t,n){var r=t===e.head?new ok(n,null,t,e):new ok(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function rk(e,t){e.tail=new ok(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ik(e,t){e.head=new ok(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ok(e,t,n,r){if(!(this instanceof ok))return new ok(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}ek=tk,tk.Node=ok,tk.create=tk,tk.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},tk.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},tk.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},tk.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)rk(this,arguments[e]);return this.length},tk.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ik(this,arguments[e]);return this.length},tk.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},tk.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},tk.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},tk.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},tk.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},tk.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},tk.prototype.map=function(e,t){t=t||this;for(var n=new tk,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},tk.prototype.mapReverse=function(e,t){t=t||this;for(var n=new tk,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},tk.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},tk.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},tk.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},tk.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},tk.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new tk;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},tk.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new tk;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},tk.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=nk(this,i,n[r]);return o},tk.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(Z_||(Z_=!0,K_={},K_=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),K_)(tk)}catch(e){}const ak=ek,sk=Symbol("max"),uk=Symbol("length"),lk=Symbol("lengthCalculator"),ck=Symbol("allowStale"),fk=Symbol("maxAge"),dk=Symbol("dispose"),hk=Symbol("noDisposeOnSet"),pk=Symbol("lruList"),mk=Symbol("cache"),gk=Symbol("updateAgeOnGet"),yk=()=>1;const vk=(e,t,n)=>{const r=e[mk].get(t);if(r){const t=r.value;if(bk(e,t)){if(wk(e,r),!e[ck])return}else n&&(e[gk]&&(r.value.now=Date.now()),e[pk].unshiftNode(r));return t.value}},bk=(e,t)=>{if(!t||!t.maxAge&&!e[fk])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[fk]&&n>e[fk]},xk=e=>{if(e[uk]>e[sk])for(let t=e[pk].tail;e[uk]>e[sk]&&null!==t;){const n=t.prev;wk(e,t),t=n}},wk=(e,t)=>{if(t){const n=t.value;e[dk]&&e[dk](n.key,n.value),e[uk]-=n.length,e[mk].delete(n.key),e[pk].removeNode(t)}};class _k{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const kk=(e,t,n,r)=>{let i=n.value;bk(e,i)&&(wk(e,n),e[ck]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},Ek=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[sk]=e.max||1/0;const t=e.length||yk;if(this[lk]="function"!=typeof t?yk:t,this[ck]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[fk]=e.maxAge||0,this[dk]=e.dispose,this[hk]=e.noDisposeOnSet||!1,this[gk]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[sk]=e||1/0,xk(this)}get max(){return this[sk]}set allowStale(e){this[ck]=!!e}get allowStale(){return this[ck]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[fk]=e,xk(this)}get maxAge(){return this[fk]}set lengthCalculator(e){"function"!=typeof e&&(e=yk),e!==this[lk]&&(this[lk]=e,this[uk]=0,this[pk].forEach((e=>{e.length=this[lk](e.value,e.key),this[uk]+=e.length}))),xk(this)}get lengthCalculator(){return this[lk]}get length(){return this[uk]}get itemCount(){return this[pk].length}rforEach(e,t){t=t||this;for(let n=this[pk].tail;null!==n;){const r=n.prev;kk(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[pk].head;null!==n;){const r=n.next;kk(this,e,n,t),n=r}}keys(){return this[pk].toArray().map((e=>e.key))}values(){return this[pk].toArray().map((e=>e.value))}reset(){this[dk]&&this[pk]&&this[pk].length&&this[pk].forEach((e=>this[dk](e.key,e.value))),this[mk]=new Map,this[pk]=new ak,this[uk]=0}dump(){return this[pk].map((e=>!bk(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[pk]}set(e,t,n){if((n=n||this[fk])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[lk](t,e);if(this[mk].has(e)){if(i>this[sk])return wk(this,this[mk].get(e)),!1;const o=this[mk].get(e).value;return this[dk]&&(this[hk]||this[dk](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[uk]+=i-o.length,o.length=i,this.get(e),xk(this),!0}const o=new _k(e,t,i,r,n);return o.length>this[sk]?(this[dk]&&this[dk](e,t),!1):(this[uk]+=o.length,this[pk].unshift(o),this[mk].set(e,this[pk].head),xk(this),!0)}has(e){if(!this[mk].has(e))return!1;const t=this[mk].get(e).value;return!bk(this,t)}get(e){return vk(this,e,!0)}peek(e){return vk(this,e,!1)}pop(){const e=this[pk].tail;return e?(wk(this,e),e.value):null}del(e){wk(this,this[mk].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[mk].forEach(((e,t)=>vk(this,t,!1)))}}({max:1e3}),Sk=Rw,Ak=q_,Ck=hw,Dk=Tw,Mk=e=>"<0.0.0-0"===e.value,Fk=e=>""===e.value,Nk=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},Ok=(e,t)=>(Ck("comp",e,t),e=Rk(e,t),Ck("caret",e),e=Tk(e,t),Ck("tildes",e),e=Lk(e,t),Ck("xrange",e),e=Ik(e,t),Ck("stars",e),e),$k=e=>!e||"x"===e.toLowerCase()||"*"===e,Tk=(e,t)=>e.trim().split(/\s+/).map((e=>zk(e,t))).join(" "),zk=(e,t)=>{const n=t.loose?fw.re[fw.t.TILDELOOSE]:fw.re[fw.t.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return Ck("tilde",e,t,n,r,i,o),$k(n)?a="":$k(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:$k(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(Ck("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,Ck("tilde return",a),a}))},Rk=(e,t)=>e.trim().split(/\s+/).map((e=>Pk(e,t))).join(" "),Pk=(e,t)=>{Ck("caret",e,t);const n=t.loose?fw.re[fw.t.CARETLOOSE]:fw.re[fw.t.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return Ck("caret",e,t,n,i,o,a),$k(n)?s="":$k(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:$k(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(Ck("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(Ck("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),Ck("caret return",s),s}))},Lk=(e,t)=>(Ck("replaceXRanges",e,t),e.split(/\s+/).map((e=>Bk(e,t))).join(" ")),Bk=(e,t)=>{e=e.trim();const n=t.loose?fw.re[fw.t.XRANGELOOSE]:fw.re[fw.t.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{Ck("xRange",e,n,r,i,o,a,s);const u=$k(i),l=u||$k(o),c=l||$k(a),f=c;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),Ck("xRange return",n),n}))},Ik=(e,t)=>(Ck("replaceStars",e,t),e.trim().replace(fw.re[fw.t.STAR],"")),jk=(e,t)=>(Ck("replaceGTE0",e,t),e.trim().replace(fw.re[t.includePrerelease?fw.t.GTE0PRE:fw.t.GTE0],"")),Uk=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>`${n=$k(r)?"":$k(i)?`>=${r}.0.0${e?"-0":""}`:$k(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=$k(l)?"":$k(c)?`<${+l+1}.0.0-0`:$k(f)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${f}-${d}`:e?`<${l}.${c}.${+f+1}-0`:`<=${u}`}`.trim(),qk=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(Ck(e[n].semver),e[n].semver!==Ak.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},Wk=Q_;var Hk;const Vk=Q_;Hk=(e,t,n)=>{try{t=new Vk(t,n)}catch(e){return!1}return t.test(e)};var Gk;const Yk=Q_;Gk=(e,t)=>new Yk(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var Xk;const Qk=Tw,Jk=Q_;Xk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Jk(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new Qk(r,n)))})),r};var Kk;const Zk=Tw,eE=Q_;Kk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new eE(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new Zk(r,n)))})),r};var tE;const nE=Tw,rE=Q_,iE=k_;tE=(e,t)=>{e=new rE(e,t);let n=new nE("0.0.0");if(e.test(n))return n;if(n=new nE("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new nE(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!iE(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!iE(n,i)||(n=i)}return n&&e.test(n)?n:null};var oE;const aE=Q_;oE=(e,t)=>{try{return new aE(e,t).range||"*"}catch(e){return null}};var sE;const uE=Tw,lE=q_,{ANY:cE}=lE,fE=Q_,dE=Hk,hE=k_,pE=S_,mE=N_,gE=M_;var yE;const vE=sE=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new uE(e,r),t=new fE(t,r),n){case">":i=hE,o=mE,a=pE,s=">",u=">=";break;case"<":i=pE,o=gE,a=hE,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(dE(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const l=t.set[n];let c=null,f=null;if(l.forEach((e=>{e.semver===cE&&(e=new lE(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,r)?c=e:a(e.semver,f.semver,r)&&(f=e)})),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0};yE=(e,t,n)=>vE(e,t,">",n);var bE;const xE=sE;bE=(e,t,n)=>xE(e,t,"<",n);var wE;const _E=Q_;wE=(e,t,n)=>(e=new _E(e,n),t=new _E(t,n),e.intersects(t));var kE;const EE=Hk,SE=t_;kE=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort(((e,t)=>SE(e,t,n)));for(const e of a){EE(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const s=[];for(const[e,t]of r)e===t?s.push(e):t||e!==a[0]?t?e===a[0]?s.push(`<=${t}`):s.push(`${e} - ${t}`):s.push(`>=${e}`):s.push("*");const u=s.join(" || "),l="string"==typeof t.raw?t.raw:String(t);return u.length<l.length?u:t};var AE;const CE=Q_,DE=q_,{ANY:ME}=DE,FE=Hk,NE=t_,OE=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===ME){if(1===t.length&&t[0].semver===ME)return!0;e=n.includePrerelease?[new DE(">=0.0.0-0")]:[new DE(">=0.0.0")]}if(1===t.length&&t[0].semver===ME){if(n.includePrerelease)return!0;t=[new DE(">=0.0.0")]}const r=new Set;let i,o,a,s,u,l,c;for(const t of e)">"===t.operator||">="===t.operator?i=$E(i,t,n):"<"===t.operator||"<="===t.operator?o=TE(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(a=NE(i.semver,o.semver,n),a>0)return null;if(0===a&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!FE(e,String(i),n))return null;if(o&&!FE(e,String(o),n))return null;for(const r of t)if(!FE(e,String(r),n))return!1;return!0}let f=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,d=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;f&&1===f.prerelease.length&&"<"===o.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,i)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(s=$E(i,e,n),s===e&&s!==i)return!1}else if(">="===i.operator&&!FE(i.semver,String(e),n))return!1;if(o)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if(u=TE(o,e,n),u===e&&u!==o)return!1}else if("<="===o.operator&&!FE(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==a)return!1}return!(i&&l&&!o&&0!==a)&&(!(o&&c&&!i&&0!==a)&&(!d&&!f))},$E=(e,t,n)=>{if(!e)return t;const r=NE(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},TE=(e,t,n)=>{if(!e)return t;const r=NE(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};AE=(e,t,n={})=>{if(e===t)return!0;e=new CE(e,n),t=new CE(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=OE(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},cw={re:fw.re,src:fw.src,tokens:fw.t,SEMVER_SPEC_VERSION:sw.SEMVER_SPEC_VERSION,SemVer:Tw,compareIdentifiers:Bw.compareIdentifiers,rcompareIdentifiers:Bw.rcompareIdentifiers,parse:qw,valid:Vw,clean:Yw,inc:Qw,diff:Kw,major:o_,minor:s_,patch:l_,prerelease:f_,compare:t_,rcompare:h_,compareLoose:m_,compareBuild:y_,sort:b_,rsort:w_,gt:k_,lt:S_,eq:e_,neq:C_,gte:M_,lte:N_,cmp:$_,coerce:I_,Comparator:q_,Range:Q_,satisfies:Hk,toComparators:Gk,maxSatisfying:Xk,minSatisfying:Kk,minVersion:tE,validRange:oE,outside:sE,gtr:yE,ltr:bE,intersects:wE,simplifyRange:kE,subset:AE};var zE={},RE={};function PE(e,t,n){return e.fields=t||[],e.fname=n,e}function LE(e){return null==e?null:e.fname}function BE(e){return null==e?null:e.fields}function IE(e){return 1===e.length?jE(e[0]):UE(e)}const jE=e=>function(t){return t[e]},UE=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function qE(e){throw Error(e)}function WE(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function l(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||qE("Access path missing open bracket: "+e),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&qE("Access path missing closing bracket: "+e),a&&qE("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function HE(e,t,n){const r=WE(e);return e=1===r.length?r[0]:e,PE((n&&n.get||IE)(r),[e],t||e)}const VE=HE("id"),GE=PE((e=>e),[],"identity"),YE=PE((()=>0),[],"zero"),XE=PE((()=>1),[],"one"),QE=PE((()=>!0),[],"true"),JE=PE((()=>!1),[],"false");function KE(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}function ZE(e,t){let n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&KE(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&KE(t||"warn","WARN",arguments),this},info:function(){return n>=3&&KE(t||"log","INFO",arguments),this},debug:function(){return n>=4&&KE(t||"log","DEBUG",arguments),this}}}var eS=Array.isArray;function tS(e){return e===Object(e)}const nS=e=>"__proto__"!==e;function rS(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=oS(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;iS(e,n,t[n],r)}return e}),{})}function iS(e,t,n,r){if(!nS(t))return;let i,o;if(tS(n)&&!eS(n))for(i in o=tS(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?iS(o,i,n[i]):nS(i)&&(o[i]=n[i]);else e[t]=n}function oS(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function aS(e){return e[e.length-1]}function sS(e){return null==e||""===e?null:+e}const uS=e=>t=>e*Math.exp(t),lS=e=>t=>Math.log(e*t),cS=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),fS=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,dS=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function hS(e,t,n,r){const i=n(e[0]),o=n(aS(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function pS(e,t){return hS(e,t,sS,GE)}function mS(e,t){var n=Math.sign(e[0]);return hS(e,t,lS(n),uS(n))}function gS(e,t,n){return hS(e,t,dS(n),dS(1/n))}function yS(e,t,n){return hS(e,t,cS(n),fS(n))}function vS(e,t,n,r,i){const o=r(e[0]),a=r(aS(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function bS(e,t,n){return vS(e,t,n,sS,GE)}function xS(e,t,n){const r=Math.sign(e[0]);return vS(e,t,n,lS(r),uS(r))}function wS(e,t,n,r){return vS(e,t,n,dS(r),dS(1/r))}function _S(e,t,n,r){return vS(e,t,n,cS(r),fS(r))}function kS(e){return 1+~~(new Date(e).getMonth()/3)}function ES(e){return 1+~~(new Date(e).getUTCMonth()/3)}function SS(e){return null!=e?eS(e)?e:[e]:[]}function AS(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function CS(e){return"function"==typeof e}function DS(e,t,n){n=n||{},t=SS(t)||[];const r=[],i=[],o={},a=n.comparator||FS;return SS(e).forEach(((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=CS(e)?e:HE(e,null,n)),(BE(e)||[]).forEach((e=>o[e]=1)))})),0===i.length?null:PE(a(i,r),Object.keys(o))}const MS=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),FS=(e,t)=>1===e.length?NS(e[0],t[0]):OS(e,t,e.length),NS=(e,t)=>function(n,r){return MS(e(n),e(r))*t},OS=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=MS(o(r),o(i));return a*t[s]});function $S(e){return CS(e)?e:()=>e}function TS(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function zS(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function RS(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function PS(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const LS=Object.prototype.hasOwnProperty;function BS(e,t){return LS.call(e,t)}const IS={};function jS(e){let t,n={};function r(e){return BS(n,e)&&n[e]!==IS}const i={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++i.size,n[e]===IS&&--i.empty),n[e]=t,this},delete:function(e){return r(e)&&(--i.size,++i.empty,n[e]=IS),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(e){return arguments.length?(t=e,i):t},clean:function(){const e={};let r=0;for(const i in n){const o=n[i];o===IS||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function US(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],l=aS(e);l<u&&(s=u,u=l,l=s),s=Math.abs(t-u);const c=Math.abs(l-t);return s<c&&s<=a?r:c<=a?i:o}function qS(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),zS(r,n)}function WS(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function HS(e){return"boolean"==typeof e}function VS(e){return"[object Date]"===Object.prototype.toString.call(e)}function GS(e){return e&&CS(e[Symbol.iterator])}function YS(e){return"number"==typeof e}function XS(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function QS(e){return"string"==typeof e}function JS(e,t,n){e&&(e=t?SS(e).map((e=>e.replace(/\\(.)/g,"$1"))):SS(e));const r=e&&e.length,i=n&&n.get||IE,o=e=>i(t?[e]:WE(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return PE(a,e,"key")}function KS(e,t){const n=e[0],r=aS(e),i=+t;return i?1===i?r:n+i*(r-n):n}function ZS(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>BS(t,e)||BS(n,e),get:e=>BS(t,e)?t[e]:BS(n,e)?o(e,n[e]):void 0,set:(e,n)=>BS(t,e)?t[e]=n:o(e,n)}}function eA(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function tA(e,t){let n="";for(;--t>=0;)n+=e;return n}function nA(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?tA(i,a)+o:"center"===r?tA(i,~~(a/2))+o+tA(i,Math.ceil(a/2)):o+tA(i,a)}function rA(e){return e&&aS(e)-e[0]||0}function iA(e){return eS(e)?"["+e.map(iA)+"]":tS(e)||QS(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function oA(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const aA=e=>YS(e)||VS(e)?e:Date.parse(e);function sA(e,t){return t=t||aA,null==e||""===e?null:t(e)}function uA(e){return null==e||""===e?null:e+""}function lA(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function cA(e,t,n,r){const i=null!=r?r:"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function fA(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}t(RE,"zoomSymlog",(function(){return _S})),t(RE,"zoomPow",(function(){return wS})),t(RE,"zoomLog",(function(){return xS})),t(RE,"zoomLinear",(function(){return bS})),t(RE,"zero",(function(){return YE})),t(RE,"writeConfig",(function(){return iS})),t(RE,"visitArray",(function(){return fA})),t(RE,"utcquarter",(function(){return ES})),t(RE,"truthy",(function(){return QE})),t(RE,"truncate",(function(){return cA})),t(RE,"toString",(function(){return uA})),t(RE,"toSet",(function(){return lA})),t(RE,"toNumber",(function(){return sS})),t(RE,"toDate",(function(){return sA})),t(RE,"toBoolean",(function(){return oA})),t(RE,"stringValue",(function(){return iA})),t(RE,"splitAccessPath",(function(){return WE})),t(RE,"span",(function(){return rA})),t(RE,"repeat",(function(){return tA})),t(RE,"quarter",(function(){return kS})),t(RE,"peek",(function(){return aS})),t(RE,"panSymlog",(function(){return yS})),t(RE,"panPow",(function(){return gS})),t(RE,"panLog",(function(){return mS})),t(RE,"panLinear",(function(){return pS})),t(RE,"pad",(function(){return nA})),t(RE,"one",(function(){return XE})),t(RE,"mergeConfig",(function(){return rS})),t(RE,"merge",(function(){return eA})),t(RE,"lruCache",(function(){return ZS})),t(RE,"logger",(function(){return ZE})),t(RE,"lerp",(function(){return KS})),t(RE,"key",(function(){return JS})),t(RE,"isString",(function(){return QS})),t(RE,"isRegExp",(function(){return XS})),t(RE,"isObject",(function(){return tS})),t(RE,"isNumber",(function(){return YS})),t(RE,"isIterable",(function(){return GS})),t(RE,"isFunction",(function(){return CS})),t(RE,"isDate",(function(){return VS})),t(RE,"isBoolean",(function(){return HS})),t(RE,"isArray",(function(){return eS})),t(RE,"inrange",(function(){return WS})),t(RE,"inherits",(function(){return qS})),t(RE,"identity",(function(){return GE})),t(RE,"id",(function(){return VE})),t(RE,"hasOwnProperty",(function(){return BS})),t(RE,"flush",(function(){return US})),t(RE,"field",(function(){return HE})),t(RE,"fastmap",(function(){return jS})),t(RE,"falsy",(function(){return JE})),t(RE,"extentIndex",(function(){return PS})),t(RE,"extent",(function(){return RS})),t(RE,"extend",(function(){return zS})),t(RE,"error",(function(){return qE})),t(RE,"debounce",(function(){return TS})),t(RE,"constant",(function(){return $S})),t(RE,"compare",(function(){return DS})),t(RE,"clampRange",(function(){return AS})),t(RE,"ascending",(function(){return MS})),t(RE,"array",(function(){return SS})),t(RE,"accessorName",(function(){return LE})),t(RE,"accessorFields",(function(){return BE})),t(RE,"accessor",(function(){return PE})),t(RE,"Warn",(function(){return 2})),t(RE,"None",(function(){return 0})),t(RE,"Info",(function(){return 3})),t(RE,"Error",(function(){return 1})),t(RE,"Debug",(function(){return 4})),n(zE,RE);var dA={};const hA=/^([A-Za-z]+:)?\/\//,pA=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,mA=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,gA="file://";async function yA(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function vA(e,t){t=zS({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=pA.test(e.replace(mA,""));null!=e&&"string"==typeof e&&s||qE("Sanitize failure, invalid URI: "+iA(e));const u=hA.test(e);return(a=t.baseURL)&&!u&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith(gA))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(gA.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function bA(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):xA}async function xA(){qE("No file system access.")}function wA(e){return e?async function(t,n){const r=zS({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?CS(o[i])?o[i]():o.text():qE(o.status+""+o.statusText)}:_A}async function _A(){qE("No HTTP fetch method available.")}const kA=e=>!(Number.isNaN(+e)||e instanceof Date),EA={boolean:oA,integer:sS,number:sS,date:sA,string:uA,unknown:GE},SA=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>kA(e)&&Number.isInteger(+e),kA,e=>!Number.isNaN(Date.parse(e))],AA=["boolean","integer","number","date"];function CA(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=SA.length,i=SA.map(((e,t)=>t+1));for(let a,s,u=0,l=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&(null!=(o=s)&&o==o)&&!SA[a](s)&&(i[a]=0,++l,l===SA.length))return"string";var o;return AA[i.reduce(((e,t)=>0===e?t:e),0)-1]}function DA(e,t){return t.reduce(((t,n)=>(t[n]=CA(e,n),t)),{})}function MA(e){const t=function(t,n){const r={delimiter:e};return FA(t,n?zS(n,r):r)};return t.responseType="text",t}function FA(e,t){return t.header&&(e=t.header.map(iA).join(t.delimiter)+"\n"+e),ad(t.delimiter).parse(e+"")}FA.responseType="text";for(var NA=function(e){var t,n,r=BA(e),i=r[0],o=r[1],a=new zA(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=TA[e.charCodeAt(n)]<<18|TA[e.charCodeAt(n+1)]<<12|TA[e.charCodeAt(n+2)]<<6|TA[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=TA[e.charCodeAt(n)]<<2|TA[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=TA[e.charCodeAt(n)]<<10|TA[e.charCodeAt(n+1)]<<4|TA[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},OA=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(IA(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push($A[t>>2]+$A[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push($A[t>>10]+$A[t>>4&63]+$A[t<<2&63]+"="));return i.join("")},$A=[],TA=[],zA="undefined"!=typeof Uint8Array?Uint8Array:Array,RA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",PA=0,LA=RA.length;PA<LA;++PA)$A[PA]=RA[PA],TA[RA.charCodeAt(PA)]=PA;function BA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function IA(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push($A[(i=r)>>18&63]+$A[i>>12&63]+$A[i>>6&63]+$A[63&i]);return o.join("")}TA["-".charCodeAt(0)]=62,TA["_".charCodeAt(0)]=63;var jA=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},UA=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m},qA="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,WA=GA,HA=2147483647;function VA(e){if(e>HA)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,GA.prototype),t}function GA(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return QA(e)}return YA(e,t,n)}function YA(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!GA.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|eC(e,t),r=VA(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(AC(e,Uint8Array)){var t=new Uint8Array(e);return KA(t.buffer,t.byteOffset,t.byteLength)}return JA(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(AC(e,ArrayBuffer)||e&&AC(e.buffer,ArrayBuffer))return KA(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(AC(e,SharedArrayBuffer)||e&&AC(e.buffer,SharedArrayBuffer)))return KA(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return GA.from(r,t,n);var i=function(e){if(GA.isBuffer(e)){var t=0|ZA(e.length),n=VA(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||CC(e.length)?VA(0):JA(e);if("Buffer"===e.type&&Array.isArray(e.data))return JA(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return GA.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function XA(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function QA(e){return XA(e),VA(e<0?0:0|ZA(e))}function JA(e){for(var t=e.length<0?0:0|ZA(e.length),n=VA(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function KA(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,GA.prototype),r}function ZA(e){if(e>=HA)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+HA.toString(16)+" bytes");return 0|e}function eC(e,t){if(GA.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||AC(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return kC(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return EC(e).length;default:if(i)return r?-1:kC(e).length;t=(""+t).toLowerCase(),i=!0}}function tC(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return mC(this,t,n);case"utf8":case"utf-8":return fC(this,t,n);case"ascii":return hC(this,t,n);case"latin1":case"binary":return pC(this,t,n);case"base64":return cC(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gC(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function nC(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function rC(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),CC(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=GA.from(t,r)),GA.isBuffer(t))return 0===t.length?-1:iC(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):iC(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function iC(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function oC(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(CC(s))return a;e[n+a]=s}return a}function aC(e,t,n,r){return SC(kC(t,e.length-n),e,n,r)}function sC(e,t,n,r){return SC(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function uC(e,t,n,r){return SC(EC(t),e,n,r)}function lC(e,t,n,r){return SC(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function cC(e,t,n){return 0===t&&n===e.length?OA(e):OA(e.slice(t,n))}function fC(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=dC)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=dC));return n}(r)}GA.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),GA.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(GA.prototype,"parent",{enumerable:!0,get:function(){if(GA.isBuffer(this))return this.buffer}}),Object.defineProperty(GA.prototype,"offset",{enumerable:!0,get:function(){if(GA.isBuffer(this))return this.byteOffset}}),GA.poolSize=8192,GA.from=function(e,t,n){return YA(e,t,n)},Object.setPrototypeOf(GA.prototype,Uint8Array.prototype),Object.setPrototypeOf(GA,Uint8Array),GA.alloc=function(e,t,n){return function(e,t,n){return XA(e),e<=0?VA(e):void 0!==t?"string"==typeof n?VA(e).fill(t,n):VA(e).fill(t):VA(e)}(e,t,n)},GA.allocUnsafe=function(e){return QA(e)},GA.allocUnsafeSlow=function(e){return QA(e)},GA.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==GA.prototype},GA.compare=function(e,t){if(AC(e,Uint8Array)&&(e=GA.from(e,e.offset,e.byteLength)),AC(t,Uint8Array)&&(t=GA.from(t,t.offset,t.byteLength)),!GA.isBuffer(e)||!GA.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},GA.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},GA.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return GA.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=GA.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(AC(o,Uint8Array))i+o.length>r.length?GA.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!GA.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},GA.byteLength=eC,GA.prototype._isBuffer=!0,GA.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)nC(this,t,t+1);return this},GA.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)nC(this,t,t+3),nC(this,t+1,t+2);return this},GA.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)nC(this,t,t+7),nC(this,t+1,t+6),nC(this,t+2,t+5),nC(this,t+3,t+4);return this},GA.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?fC(this,0,e):tC.apply(this,arguments)},GA.prototype.toLocaleString=GA.prototype.toString,GA.prototype.equals=function(e){if(!GA.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===GA.compare(this,e)},GA.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},qA&&(GA.prototype[qA]=GA.prototype.inspect),GA.prototype.compare=function(e,t,n,r,i){if(AC(e,Uint8Array)&&(e=GA.from(e,e.offset,e.byteLength)),!GA.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},GA.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},GA.prototype.indexOf=function(e,t,n){return rC(this,e,t,n,!0)},GA.prototype.lastIndexOf=function(e,t,n){return rC(this,e,t,n,!1)},GA.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return oC(this,e,t,n);case"utf8":case"utf-8":return aC(this,e,t,n);case"ascii":case"latin1":case"binary":return sC(this,e,t,n);case"base64":return uC(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return lC(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},GA.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var dC=4096;function hC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function pC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function mC(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=DC[e[o]];return i}function gC(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function yC(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function vC(e,t,n,r,i,o){if(!GA.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function bC(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function xC(e,t,n,r,i){return t=+t,n>>>=0,i||bC(e,0,n,4),UA(e,t,n,r,23,4),n+4}function wC(e,t,n,r,i){return t=+t,n>>>=0,i||bC(e,0,n,8),UA(e,t,n,r,52,8),n+8}GA.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,GA.prototype),r},GA.prototype.readUintLE=GA.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||yC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},GA.prototype.readUintBE=GA.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||yC(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},GA.prototype.readUint8=GA.prototype.readUInt8=function(e,t){return e>>>=0,t||yC(e,1,this.length),this[e]},GA.prototype.readUint16LE=GA.prototype.readUInt16LE=function(e,t){return e>>>=0,t||yC(e,2,this.length),this[e]|this[e+1]<<8},GA.prototype.readUint16BE=GA.prototype.readUInt16BE=function(e,t){return e>>>=0,t||yC(e,2,this.length),this[e]<<8|this[e+1]},GA.prototype.readUint32LE=GA.prototype.readUInt32LE=function(e,t){return e>>>=0,t||yC(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},GA.prototype.readUint32BE=GA.prototype.readUInt32BE=function(e,t){return e>>>=0,t||yC(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},GA.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||yC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},GA.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||yC(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},GA.prototype.readInt8=function(e,t){return e>>>=0,t||yC(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},GA.prototype.readInt16LE=function(e,t){e>>>=0,t||yC(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},GA.prototype.readInt16BE=function(e,t){e>>>=0,t||yC(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},GA.prototype.readInt32LE=function(e,t){return e>>>=0,t||yC(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},GA.prototype.readInt32BE=function(e,t){return e>>>=0,t||yC(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},GA.prototype.readFloatLE=function(e,t){return e>>>=0,t||yC(e,4,this.length),jA(this,e,!0,23,4)},GA.prototype.readFloatBE=function(e,t){return e>>>=0,t||yC(e,4,this.length),jA(this,e,!1,23,4)},GA.prototype.readDoubleLE=function(e,t){return e>>>=0,t||yC(e,8,this.length),jA(this,e,!0,52,8)},GA.prototype.readDoubleBE=function(e,t){return e>>>=0,t||yC(e,8,this.length),jA(this,e,!1,52,8)},GA.prototype.writeUintLE=GA.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||vC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},GA.prototype.writeUintBE=GA.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||vC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},GA.prototype.writeUint8=GA.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,1,255,0),this[t]=255&e,t+1},GA.prototype.writeUint16LE=GA.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},GA.prototype.writeUint16BE=GA.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},GA.prototype.writeUint32LE=GA.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},GA.prototype.writeUint32BE=GA.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},GA.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);vC(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},GA.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);vC(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},GA.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},GA.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},GA.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},GA.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},GA.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||vC(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},GA.prototype.writeFloatLE=function(e,t,n){return xC(this,e,t,!0,n)},GA.prototype.writeFloatBE=function(e,t,n){return xC(this,e,t,!1,n)},GA.prototype.writeDoubleLE=function(e,t,n){return wC(this,e,t,!0,n)},GA.prototype.writeDoubleBE=function(e,t,n){return wC(this,e,t,!1,n)},GA.prototype.copy=function(e,t,n,r){if(!GA.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},GA.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!GA.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=GA.isBuffer(e)?e:GA.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var _C=/[^+/0-9A-Za-z-_]/g;function kC(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function EC(e){return NA(function(e){if((e=(e=e.split("=")[0]).trim().replace(_C,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function SC(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function AC(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function CC(e){return e!=e}var DC=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),MC=WA;function FC(e,t){const n=t&&t.property?HE(t.property):GE;return!tS(e)||(r=e,"function"==typeof MC&&CS(MC.isBuffer)&&MC.isBuffer(r))?n(JSON.parse(e)):function(e,t){!eS(e)&&GS(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}FC.responseType="json";var NC=function(e){return e},OC=function(e){if(null==e)return NC;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;u<l;)c[u]=e[u],++u;return c}},$C=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return TC(e,t)}))}:TC(e,t)};function TC(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=zC(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function zC(e,t){var n=OC(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}var RC=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},PC=function(e){return zC(e,LC.apply(this,arguments))};function LC(e,t,n){var r,i,o;if(arguments.length>1)r=BC(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:RC(e,r)}}function BC(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}const IC={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function jC(e,t){let n,r,i,o;return e=FC(e,t),t&&t.feature?(n=$C,i=t.feature):t&&t.mesh?(n=PC,i=t.mesh,o=IC[t.filter]):qE("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):qE("Invalid TopoJSON object: "+i),r&&r.features||[r]}jC.responseType="json";const UC={dsv:FA,csv:MA(","),tsv:MA("\t"),json:FC,topojson:jC};function qC(e,t){return arguments.length>1?(UC[e]=t,this):BS(UC,e)?UC[e]:null}function WC(e){const t=qC(e);return t&&t.responseType||"text"}var HC={};const VC="year",GC="quarter",YC="month",XC="week",QC="date",JC="day",KC="dayofyear",ZC="hours",eD="minutes",tD="seconds",nD="milliseconds",rD=[VC,GC,YC,XC,QC,JC,KC,ZC,eD,tD,nD],iD=rD.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function oD(e){const t=SS(e).slice(),n={};t.length||qE("Missing time unit."),t.forEach((e=>{BS(iD,e)?n[e]=1:qE("Invalid time unit: ".concat(e,"."))}));return(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&qE("Incompatible time units: ".concat(e)),t.sort(((e,t)=>iD[e]-iD[t])),t}const aD={[VC]:"%Y ",[GC]:"Q%q ",[YC]:"%b ",[QC]:"%d ",[XC]:"W%U ",[JC]:"%a ",[KC]:"%j ",[ZC]:"%H:00",[eD]:"00:%M",[tD]:":%S",[nD]:".%L",["".concat(VC,"-").concat(YC)]:"%Y-%m ",["".concat(VC,"-").concat(YC,"-").concat(QC)]:"%Y-%m-%d ",["".concat(ZC,"-").concat(eD)]:"%H:%M"};function sD(e,t){const n=zS({},aD,t),r=oD(e),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const uD=new Date;function lD(e){return uD.setFullYear(e),uD.setMonth(0),uD.setDate(1),uD.setHours(0,0,0,0),uD}function cD(e){return dD(new Date(e))}function fD(e){return hD(new Date(e))}function dD(e){return Qm.count(lD(e.getFullYear())-1,e)}function hD(e){return Km.count(lD(e.getFullYear())-1,e)}function pD(e){return lD(e).getDay()}function mD(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function gD(e){return vD(new Date(e))}function yD(e){return bD(new Date(e))}function vD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return lg.count(t-1,e)}function bD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return fg.count(t-1,e)}function xD(e){return uD.setTime(Date.UTC(e,0,1)),uD.getUTCDay()}function wD(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function _D(e,t,n,r,i){const o=t||1,a=aS(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),u=new Date,l=lA(e),c=l.year?s(VC):$S(2012),f=l.month?s(YC):l.quarter?s(GC):YE,d=l.week&&l.day?s(JC,1,"weekday"):l.week?s(XC,1):l.day?s(JC,1):l.date?s(QC,1):l.dayofyear?s(KC,1):XE,h=l.hours?s(ZC):YE,p=l.minutes?s(eD):YE,m=l.seconds?s(tD):YE,g=l.milliseconds?s(nD):YE;return function(e){u.setTime(+e);const t=c(u);return i(t,f(u),d(u,t),h(u),p(u),m(u),g(u))}}function kD(e,t,n){return t+7*e-(n+6)%7}const ED={[VC]:e=>e.getFullYear(),[GC]:e=>Math.floor(e.getMonth()/3),[YC]:e=>e.getMonth(),[QC]:e=>e.getDate(),[ZC]:e=>e.getHours(),[eD]:e=>e.getMinutes(),[tD]:e=>e.getSeconds(),[nD]:e=>e.getMilliseconds(),[KC]:e=>dD(e),[XC]:e=>hD(e),weekday:(e,t)=>kD(hD(e),e.getDay(),pD(t)),[JC]:(e,t)=>kD(1,e.getDay(),pD(t))},SD={[GC]:e=>3*e,[XC]:(e,t)=>kD(e,0,pD(t))};function AD(e,t){return _D(e,t||1,ED,SD,mD)}const CD={[VC]:e=>e.getUTCFullYear(),[GC]:e=>Math.floor(e.getUTCMonth()/3),[YC]:e=>e.getUTCMonth(),[QC]:e=>e.getUTCDate(),[ZC]:e=>e.getUTCHours(),[eD]:e=>e.getUTCMinutes(),[tD]:e=>e.getUTCSeconds(),[nD]:e=>e.getUTCMilliseconds(),[KC]:e=>vD(e),[XC]:e=>bD(e),[JC]:(e,t)=>kD(1,e.getUTCDay(),xD(t)),weekday:(e,t)=>kD(bD(e),e.getUTCDay(),xD(t))},DD={[GC]:e=>3*e,[XC]:(e,t)=>kD(e,0,xD(t))};function MD(e,t){return _D(e,t||1,CD,DD,wD)}const FD={[VC]:ag,[GC]:og.every(3),[YC]:og,[XC]:Km,[QC]:Qm,[JC]:Qm,[KC]:Qm,[ZC]:Xm,[eD]:Ym,[tD]:Gm,[nD]:Bm},ND={[VC]:bg,[GC]:vg.every(3),[YC]:vg,[XC]:fg,[QC]:lg,[JC]:lg,[KC]:lg,[ZC]:ug,[eD]:sg,[tD]:Gm,[nD]:Bm};function OD(e){return FD[e]}function $D(e){return ND[e]}function TD(e,t,n){return e?e.offset(t,n):void 0}function zD(e,t,n){return TD(OD(e),t,n)}function RD(e,t,n){return TD($D(e),t,n)}function PD(e,t,n,r){return e?e.range(t,n,r):void 0}function LD(e,t,n,r){return PD(OD(e),t,n,r)}function BD(e,t,n,r){return PD($D(e),t,n,r)}const ID=1e3,jD=6e4,UD=36e5,qD=864e5,WD=2592e6,HD=31536e6,VD=[VC,YC,QC,ZC,eD,tD,nD],GD=VD.slice(0,-1),YD=GD.slice(0,-1),XD=YD.slice(0,-1),QD=XD.slice(0,-1),JD=[VC,YC],KD=[VC],ZD=[[GD,1,ID],[GD,5,5e3],[GD,15,15e3],[GD,30,3e4],[YD,1,jD],[YD,5,3e5],[YD,15,9e5],[YD,30,18e5],[XD,1,UD],[XD,3,108e5],[XD,6,216e5],[XD,12,432e5],[QD,1,qD],[[VC,XC],1,6048e5],[JD,1,WD],[JD,3,7776e6],[KD,1,HD]];function eM(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(rA(t))/n;let i,o,a=yd((e=>e[2])).right(ZD,r);return a===ZD.length?(i=KD,o=Md(t[0]/HD,t[1]/HD,n)):a?(a=ZD[r/ZD[a-1][2]<ZD[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=VD,o=Math.max(Md(t[0],t[1],n),1)),{units:i,step:o}}function tM(e){const t={};return n=>t[n]||(t[n]=e(n))}function nM(e){const t=tM(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){const n=tm(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan:function(e,r,i,o){o=tm(null==o?",f":o);const a=Md(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=pm(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=mm(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=hm(a))||(o.precision=u-2*("%"===o.type))}return t(o)}}}let rM,iM;function oM(){return rM=nM({format:om,formatPrefix:am})}function aM(e){return nM(dm(e))}function sM(e){return arguments.length?rM=aM(e):rM}function uM(e,t,n){tS(n=n||{})||qE("Invalid time multi-format specifier: ".concat(n));const r=t(tD),i=t(eD),o=t(ZC),a=t(QC),s=t(XC),u=t(YC),l=t(GC),c=t(VC),f=e(n.milliseconds||".%L"),d=e(n.seconds||":%S"),h=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),m=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),y=e(n.month||"%B"),v=e(n.quarter||"%B"),b=e(n.year||"%Y");return e=>(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?p:u(e)<e?s(e)<e?m:g:c(e)<e?l(e)<e?y:v:b)(e)}function lM(e){const t=tM(e.format),n=tM(e.utcFormat);return{timeFormat:e=>QS(e)?t(e):uM(t,OD,e),utcFormat:e=>QS(e)?n(e):uM(n,$D,e),timeParse:tM(e.parse),utcParse:tM(e.utcParse)}}function cM(){return iM=lM({format:Fg,parse:Ng,utcFormat:Og,utcParse:$g})}function fM(e){return lM(Dg(e))}function dM(e){return arguments.length?iM=fM(e):iM}t(HC,"week",(function(){return fD})),t(HC,"utcweek",(function(){return yD})),t(HC,"utcdayofyear",(function(){return gD})),t(HC,"utcSequence",(function(){return BD})),t(HC,"utcOffset",(function(){return RD})),t(HC,"utcInterval",(function(){return $D})),t(HC,"utcFloor",(function(){return MD})),t(HC,"timeUnits",(function(){return oD})),t(HC,"timeUnitSpecifier",(function(){return sD})),t(HC,"timeSequence",(function(){return LD})),t(HC,"timeOffset",(function(){return zD})),t(HC,"timeInterval",(function(){return OD})),t(HC,"timeFloor",(function(){return AD})),t(HC,"timeBin",(function(){return eM})),t(HC,"dayofyear",(function(){return cD})),t(HC,"YEAR",(function(){return VC})),t(HC,"WEEK",(function(){return XC})),t(HC,"TIME_UNITS",(function(){return rD})),t(HC,"SECONDS",(function(){return tD})),t(HC,"QUARTER",(function(){return GC})),t(HC,"MONTH",(function(){return YC})),t(HC,"MINUTES",(function(){return eD})),t(HC,"MILLISECONDS",(function(){return nD})),t(HC,"HOURS",(function(){return ZC})),t(HC,"DAYOFYEAR",(function(){return KC})),t(HC,"DAY",(function(){return JC})),t(HC,"DATE",(function(){return QC})),oM(),cM();const hM=(e,t)=>zS({},e,t);function pM(e,t){const n=e?aM(e):sM(),r=t?fM(t):dM();return hM(n,r)}function mM(e,t){const n=arguments.length;return n&&2!==n&&qE("defaultLocale expects either zero or two arguments."),n?hM(sM(e),dM(t)):hM(sM(),dM())}function gM(){return oM(),cM(),mM()}var yM=function(e,t,n,r){const i=qC((t=t||{}).type||"json");return i||qE("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=dM();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,l,c,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=DA(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!EA[i])throw Error("Illegal format pattern: "+e+":"+i);return EA[i]}));for(s=0,l=e.length,c=f.length;s<l;++s)for(o=e[s],u=0;u<c;++u)a=f[u],o[a]=d[u](o[a])}(e,t.parse,n,r),BS(e,"columns")&&delete e.columns,e};const vM=function(e,t){return n=>({options:n||{},sanitize:vA,load:yA,fileAccess:!!t,file:bA(t),http:wA(e)})}("undefined"!=typeof fetch&&fetch,null);function bM(e){const t=e||GE,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function xM(e,t){try{await t(e)}catch(t){e.error(t)}}t(dA,"loader",(function(){return vM})),t(dA,"read",(function(){return yM})),t(dA,"typeParsers",(function(){return EA})),t(dA,"inferTypes",(function(){return DA})),t(dA,"inferType",(function(){return CA})),t(dA,"responseType",(function(){return WC})),t(dA,"formats",(function(){return qC})),t(dA,"format",(function(){return UC}));const wM=Symbol("vega_id");let _M=1;function kM(e){return!(!e||!EM(e))}function EM(e){return e[wM]}function SM(e,t){return e[wM]=t,e}function AM(e){const t=e===Object(e)?e:{data:e};return EM(t)?t:SM(t,_M++)}function CM(e){return DM(e,AM({}))}function DM(e,t){for(const n in e)t[n]=e[n];return t}function MM(e,t){return SM(t,EM(e))}function FM(e,t){return e?t?(n,r)=>e(n,r)||EM(t(n))-EM(t(r)):(t,n)=>e(t,n)||EM(t)-EM(n):null}function NM(e){return e&&e.constructor===OM}function OM(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:OM,insert:function(t){const n=SS(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove:function(e){const n=CS(e)?r:t,i=SS(e),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify:function(e,t,r){const o={field:t,value:$S(r)};return CS(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return CS(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return o=e,this},reflow:function(){return a=!0,this},pulse:function(s,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[EM(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[EM(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach((e=>{p(e)&&(l[EM(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=EM(m),l[g]?l[g]=1:s.add.push(AM(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[EM(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[EM(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[EM(m)],g>0&&(y(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach((e=>{p(e)&&l[EM(e)]>0&&y(e,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter((e=>l[EM(e)]>0)):u.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const $M="_:mod:_";function TM(){Object.defineProperty(this,$M,{writable:!0,value:{}})}TM.prototype={set:function(e,t,n,r){const i=this,o=i[e],a=i["_:mod:_"];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=eS(n)?1+n.length:-1),i},modified:function(e,t){const n=this["_:mod:_"];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(eS(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this["_:mod:_"]={},this}};let zM=0;const RM=new TM;function PM(e,t,n,r){this.id=++zM,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function LM(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}PM.prototype={targets:function(){return this._targets||(this._targets=bM(VE))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:LM(1),modified:LM(2),parameters:function(e,t,n){t=!1!==t;const r=this._argval=this._argval||new TM,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(e,n,a)=>{a instanceof PM?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)SS(s).forEach((e=>{e instanceof PM?e!==this&&(e.targets().add(this),o.push(e)):qE("Pulse parameters must be operator instances.")})),this.source=s;else if(eS(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall:function(e){const t=this._argval||RM,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach:function(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let BM=0;function IM(e,t,n){this.id=++BM,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function jM(e,t,n){return new IM(e,t,n)}IM.prototype={_filter:QE,_apply:GE,targets:function(){return this._targets||(this._targets=bM(VE))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){const t=jM(e);return this.targets().add(t),t},apply:function(e){const t=jM(null,e);return this.targets().add(t),t},merge:function(){const e=jM();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){const t=jM();return this.targets().add(jM(null,null,TS(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){let n=!1;return e.targets().add(jM(null,null,(()=>n=!0))),t.targets().add(jM(null,null,(()=>n=!1))),this.filter((()=>n))},detach:function(){this._filter=QE,this._targets=null}};const UM={skip:!0};function qM(e,t,n,r,i,o){const a=zS({},o,UM);let s,u;CS(n)||(n=$S(n)),void 0===r?s=t=>e.touch(n(t)):CS(r)?(u=new PM(null,r,i,!1),s=t=>{u.evaluate(t);const r=n(t),i=u.value;NM(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function WM(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new PM(null,function(e,t){return t=CS(t)?t:$S(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const HM={};function VM(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function GM(e,t){const n=[];return fA(e,t,(e=>n.push(e))),n}function YM(e,t){const n={};return e.visit(t,(e=>{n[EM(e)]=1})),e=>n[EM(e)]?null:e}function XM(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function QM(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let e=0;e<o;++e){const r=n[e];if(r.stamp===t){if(r.fields){const e=i.fields||(i.fields={});for(const t in r.fields)e[t]=1}r.changed(i.ADD)&&(a|=i.ADD),r.changed(i.REM)&&(a|=i.REM),r.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function JM(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}VM.prototype={StopPropagation:HM,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new VM(this.dataflow).init(this,e)},clone:function(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new VM(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init:function(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,YM(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){const t=this.fields||(this.fields={});return eS(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified:function(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?eS(e)?e.some((e=>n[e])):n[e]:!!n)},filter:function(e,t){const n=this;return 1&e&&(n.addF=XM(n.addF,t)),2&e&&(n.remF=XM(n.remF,t)),4&e&&(n.modF=XM(n.modF,t)),16&e&&(n.srcF=XM(n.srcF,t)),n},materialize:function(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=GM(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=GM(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=GM(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){const n=this,r=t;if(16&e)return fA(n.source,n.srcF,r),n;1&e&&fA(n.add,n.addF,r),2&e&&fA(n.rem,n.remF,r),4&e&&fA(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||fA(i,e?YM(n,5):n.srcF,r)}return n}},qS(QM,VM,{fork:function(e){const t=new VM(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed:function(e){return this.changes&e},modified:function(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?eS(e)?e.some((e=>n[e])):n[e]:0},filter:function(){qE("MultiPulse does not support filtering.")},materialize:function(){qE("MultiPulse does not support materialization.")},visit:function(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const KM={skip:!1,force:!1};function ZM(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),eF(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,eF(e,r,t,n)}(t,0,e)):r=n,r}}}function eF(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function tF(){this.logger(ZE()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=mM();try{this._loader=vM()}catch(e){}this._touched=bM(VE),this._input={},this._pulse=null,this._heap=ZM(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function nF(e){return function(){return this._log[e].apply(this,arguments)}}function rF(e,t){PM.call(this,e,null,t)}tF.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:nF("error"),warn:nF("warn"),info:nF("info"),debug:nF("debug"),logLevel:nF("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof PM?i=e:e&&e.prototype instanceof PM?i=new e:CS(e)?i=new PM(null,e):(o=0,i=new PM(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&qE("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||KM);const r=new VM(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||KM;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||KM;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:OM,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return yM(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(QE).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:WC(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=jM(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):SS(e);const u=s.length;for(let e=0;e<u;++e)s[e].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof PM?WM:qM)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return JM(r);if(r._pending&&await r._pending,t&&await xM(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new VM(r,o,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=bM(VE);let a,s,u,l=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=HM),s!==HM&&a._targets&&a._targets.forEach((e=>r._enqueue(e))),++l):r._enqueue(a,!0)}catch(e){r._heap.clear(),u=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${l} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await xM(r,e[t].callback)}return n&&await xM(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?JM(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&eS(n)?new QM(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==HM&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},qS(rF,PM,{run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate:function(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});const iF={};function oF(e){const t=aF(e);return t&&t.Definition||null}function aF(e){return e=e&&e.toLowerCase(),BS(iF,e)?iF[e]:null}var sF={},uF={};function*lF(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function cF(e,t,n){const r=Float64Array.from(lF(e,n));return r.sort(gd),t.map((e=>zd(r,e)))}function fF(e,t){return cF(e,[.25,.5,.75],t)}function dF(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,o+=n*(t-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=fF(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function hF(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,l,c,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,l=0,c=e.steps.length;l<c&&e.steps[l]<u;++l);o=e.steps[Math.max(0,l-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(l=0,c=i.length;l<c;++l)u=o/i[l],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+m)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var pF=Math.random;function mF(e){pF=e}function gF(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(lF(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(pF()*o)];c[l]=s/o}return c.sort(gd),[Td(c,n/2),Td(c,1-n/2)]}function yF(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,l=r(e[0]),c=l,f=l+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(c=(l+c)/2;s<u;++s)o[s]=c;f=a+t,l=a}c=a}for(c=(l+c)/2;s<u;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}function vF(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function bF(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min:function(e){return arguments.length?(n=e||0,i=r-n,o):n},max:function(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:function(){return n+Math.floor(i*pF())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},cdf:function(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN}};return o.min(e).max(t)}const xF=Math.sqrt(2*Math.PI),wF=Math.SQRT2;let _F=NaN;function kF(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(_F==_F)i=_F,_F=NaN;else{do{i=2*pF()-1,o=2*pF()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,_F=o*r}return e+i*t}function EF(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*xF)}function SF(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function AF(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*wF*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function CF(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>kF(n,r),pdf:e=>EF(e,n,r),cdf:e=>SF(e,n,r),icdf:e=>AF(e,n,r)};return i.mean(e).stdev(t)}function DF(e,t){const n=CF();let r=0;const i={data:function(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=dF(e)),i):t},sample:function(){return e[~~(pF()*r)]+t*n.sample()},pdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(e)}function MF(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+kF()*t)}function FF(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*xF*e)}function NF(e,t,n){return SF(Math.log(e),t,n)}function OF(e,t,n){return Math.exp(AF(e,t,n))}function $F(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>MF(n,r),pdf:e=>FF(e,n,r),cdf:e=>NF(e,n,r),icdf:e=>OF(e,n,r)};return i.mean(e).stdev(t)}function TF(e,t){let n,r=0;function i(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}const o={weights:function(e){return arguments.length?(n=i(t=e||[]),o):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),o.weights(t)):e},sample:function(){const t=pF();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function zF(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*pF()}function RF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function PF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function LF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function BF(e,t){let n,r;const i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>zF(n,r),pdf:e=>RF(e,n,r),cdf:e=>PF(e,n,r),icdf:e=>LF(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function IF(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function jF(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,l,c=0,f=0,d=0;for(l of e)o[c]=s=+t(l),a[c]=u=+n(l),++c,f+=(s-f)/c,d+=(u-d)/c;for(c=0;c<i;++c)o[c]-=f,a[c]-=d;return[o,a,f,d]}function UF(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function qF(e,t,n,r,i){let o=0,a=0;return UF(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function WF(e,t,n){let r=0,i=0,o=0,a=0,s=0;UF(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=IF(r,i,o,a),l=e=>u[0]+u[1]*e;return{coef:u,predict:l,rSquared:qF(e,t,n,i,l)}}function HF(e,t,n){let r=0,i=0,o=0,a=0,s=0;UF(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=IF(r,i,o,a),l=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:l,rSquared:qF(e,t,n,i,l)}}function VF(e,t,n){const[r,i,o,a]=jF(e,t,n);let s,u,l,c=0,f=0,d=0,h=0,p=0;UF(e,t,n,((e,t)=>{s=r[p++],u=Math.log(t),l=s*t,c+=(t*u-c)/p,f+=(l-f)/p,d+=(l*u-d)/p,h+=(s*l-h)/p}));const[m,g]=IF(f/a,c/a,d/a,h/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:qF(e,t,n,a,y)}}function GF(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;UF(e,t,n,((e,t)=>{const n=Math.log(e),l=Math.log(t);++u,r+=(n-r)/u,i+=(l-i)/u,o+=(n*l-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const l=IF(r,i,o,a),c=e=>l[0]*Math.pow(e,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:qF(e,t,n,s,c)}}function YF(e,t,n){const[r,i,o,a]=jF(e,t,n),s=r.length;let u,l,c,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)l=r[u],c=i[u++],f=l*l,d+=(f-d)/u,h+=(f*l-h)/u,p+=(f*f-p)/u,m+=(l*c-m)/u,g+=(f*c-g)/u;const y=p-d*d,v=d*y-h*h,b=(g*d-m*h)/v,x=(m*y-g*h)/v,w=-b*d,_=e=>b*(e-=o)*e+x*e+w+a;return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:qF(e,t,n,a,_)}}function XF(e,t,n,r){if(1===r)return WF(e,t,n);if(2===r)return YF(e,t,n);const[i,o,a,s]=jF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(d=3;d<f;++d)t+=y[d]*Math.pow(e,d);return t};return{coef:QF(f,y,-a,s),predict:v,rSquared:qF(e,t,n,s,v)}}function QF(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function JF(e,t,n,r){const[i,o,a,s]=jF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let e=-1;++e<=2;){const t=[0,l-1];for(let e=0;e<u;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let u=0,l=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=KF(Math.abs(n-t)*g)*d[e],s=t*a;u+=a,l+=s,h+=r*a,p+=r*s,m+=t*s}const[y,v]=IF(l/u,h/u,p/u,m/u);c[e]=y+v*n,f[e]=Math.abs(o[e]-c[e]),ZF(i,e+1,t)}if(2===e)break;const n=Rd(f);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<u;++r)e=f[r]/(6*n),d[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,l=[];for(;s<i;++s)a=e[s]+n,l[0]===a?l[1]+=(t[s]-l[1])/++u:(u=0,l[1]+=r,l=[a,t[s]],o.push(l));return l[1]+=r,o}(i,c,a,s)}function KF(e){return(e=1-e*e*e)*e*e}function ZF(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const eN=.1*Math.PI/180;function tN(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)l.push(i(o+e/n*s));return l.push(i(a)),l}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=l[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&nN(f,e,d)>eN?c.push(e):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function nN(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function rN(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function iN(e,t,n){return n||e+(t?"_"+t:"")}t(uF,"setRandom",(function(){return mF})),t(uF,"sampleUniform",(function(){return zF})),t(uF,"sampleNormal",(function(){return kF})),t(uF,"sampleLogNormal",(function(){return MF})),t(uF,"sampleCurve",(function(){return tN})),t(uF,"regressionQuad",(function(){return YF})),t(uF,"regressionPow",(function(){return GF})),t(uF,"regressionPoly",(function(){return XF})),t(uF,"regressionLog",(function(){return HF})),t(uF,"regressionLoess",(function(){return JF})),t(uF,"regressionLinear",(function(){return WF})),t(uF,"regressionExp",(function(){return VF})),t(uF,"randomUniform",(function(){return BF})),t(uF,"randomNormal",(function(){return CF})),t(uF,"randomMixture",(function(){return TF})),t(uF,"randomLogNormal",(function(){return $F})),t(uF,"randomLCG",(function(){return vF})),t(uF,"randomKDE",(function(){return DF})),t(uF,"randomInteger",(function(){return bF})),t(uF,"random",(function(){return pF})),t(uF,"quartiles",(function(){return fF})),t(uF,"quantiles",(function(){return cF})),t(uF,"quantileUniform",(function(){return LF})),t(uF,"quantileNormal",(function(){return AF})),t(uF,"quantileLogNormal",(function(){return OF})),t(uF,"dotbin",(function(){return yF})),t(uF,"densityUniform",(function(){return RF})),t(uF,"densityNormal",(function(){return EF})),t(uF,"densityLogNormal",(function(){return FF})),t(uF,"cumulativeUniform",(function(){return PF})),t(uF,"cumulativeNormal",(function(){return SF})),t(uF,"cumulativeLogNormal",(function(){return NF})),t(uF,"bootstrapCI",(function(){return gF})),t(uF,"bin",(function(){return hF})),t(uF,"bandwidthNRD",(function(){return dF}));const oN=()=>{},aN={init:oN,add:oN,rem:oN,idx:0},sN={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},uN=Object.keys(sN);function lN(e,t){return sN[e](t)}function cN(e,t){return e.idx-t.idx}function fN(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function dN(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function hN(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function pN(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function mN(e,t){const n=t||GE,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=sN[e]())}))};return e.forEach(n),Object.values(t).sort(cN)}(e),i=e.slice().sort(cN);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=fN,o.prototype.add=dN,o.prototype.rem=hN,o.prototype.set=pN,o.prototype.get=n,o.fields=e.map((e=>e.out)),o}function gN(e){this._key=e?HE(e):EM,this.reset()}uN.forEach((e=>{sN[e]=function(e,t){return n=>zS({name:e,out:n||e},aN,t)}(e,sN[e])}));const yN=gN.prototype;function vN(e){rF.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}yN.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},yN.add=function(e){this._add.push(e)},yN.rem=function(e){this._rem.push(e)},yN.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o},yN.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",BS(n,r)||(n[r]=1,++o);return o},yN.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=PS(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},yN.argmin=function(e){return this.extent(e)[0]||{}},yN.argmax=function(e){return this.extent(e)[1]||{}},yN.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},yN.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},yN.quartile=function(e){return this._get===e&&this._q||(this._q=fF(this.values(),e),this._get=e),this._q},yN.q1=function(e){return this.quartile(e)[0]},yN.q2=function(e){return this.quartile(e)[1]},yN.q3=function(e){return this.quartile(e)[2]},yN.ci=function(e){return this._get===e&&this._ci||(this._ci=gF(this.values(),1e3,.05,e),this._get=e),this._ci},yN.ci0=function(e){return this.ci(e)[0]},yN.ci1=function(e){return this.ci(e)[1]},vN.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:uN},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},qS(vN,rF,{transform:function(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross:function(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,u){const l=n[u],c=r[u++];for(const n in c){const r=a?a+"|"+n:n;s[l]=c[n],u<i?o(r,s,u):t[r]||e.cell(r,s)}}("",{},0)},init:function(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=SS(BE(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=SS(e.groupby),this._dnames=this._dims.map((e=>{const t=LE(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:rN(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,m;for(u!==a.length&&qE("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)c=o[m],f=a[m],null==c&&"count"!==f&&qE("Null aggregate field specified."),h=LE(c),p=iN(f,h,s[m]),n.push(p),"count"!==f?(d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(lN(f,p))):this._counts.push(p);return this._measures=this._measures.map((e=>mN(e,e.field))),{}},cellkey:rN(),cell:function(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new gN),n},newtuple:function(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let t=0;t<i;++t)o[n[t]]=r[t](e);return t?MM(t.tuple,o):AM(o)},clean:function(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple:function(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes:function(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],i&&!u.num||a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(0===u.num&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function bN(e){rF.call(this,null,e)}function xN(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!a[r(e)])),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?eA(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function wN(e){rF.call(this,[],e)}function _N(e){PM.call(this,null,kN,e)}function kN(e){return this.value&&!e.modified()?this.value:DS(e.fields,e.orders)}function EN(e){rF.call(this,null,e)}function SN(e){rF.call(this,null,e)}bN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},qS(bN,rF,{transform:function(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(BE(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?e=>{const t=r(e);e[s]=t,e[u]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=hF(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(e){let n=sS(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=PE(u,BE(t),e.name||"bin_"+LE(t))}}),wN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},qS(wN,rF,{transform:function(e,t){const n=t.fork(t.ALL),r=xN(EM,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(FM(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),qS(_N,PM),EN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},qS(EN,rF,{transform:function(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],u=0,l=i.length;u<l;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n((e=>i[e]=1+(i[e]||0))),c=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck:function(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=AM({}),u[i]=s,u[o]=l,a.add.push(u)):0===l?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}}),SN.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},qS(SN,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=o=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(a.push(AM(s)),(s={})[t]=o);return a}(s,i,o,e.filter||QE)):n.mod=s,n.source=this.value,n.modifies(r)}});const AN={kde:DF,mixture:TF,normal:CF,lognormal:$F,uniform:BF},CN="function";function DN(e,t){const n=e.function;BS(AN,n)||qE("Unknown distribution function: "+n);const r=AN[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>DN(e,t)))):typeof r[n]===CN&&r[n](e[n]);return r}function MN(e){rF.call(this,null,e)}const FN=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],NN={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:FN},{name:"weights",type:"number",array:!0}]};function ON(e,t){return e?e.map(((e,n)=>t[n]||LE(e))):null}function $N(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,l,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}MN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:FN.concat(NN)},{name:"as",type:"string",array:!0,default:["value","density"]}]},qS(MN,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=DN(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&qE("Invalid density method: "+a),e.extent||r.data||qE("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=tN(a,e.extent||RS(r.data()),i,o).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],AM(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function TN(e){rF.call(this,null,e)}TN.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function zN(e){PM.call(this,null,RN,e),this.modified(!0)}function RN(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:PE((n=>t(n,e)),BE(t),LE(t))}function PN(e){rF.call(this,[void 0,void 0],e)}function LN(e,t){PM.call(this,e),this.parent=t,this.count=0}function BN(e){rF.call(this,{},e),this._keys=jS();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function IN(e){PM.call(this,null,jN,e)}function jN(e){return this.value&&!e.modified()?this.value:eS(e.name)?SS(e.name).map((e=>HE(e))):HE(e.name,e.as)}function UN(e){rF.call(this,jS(),e)}function qN(e){rF.call(this,[],e)}function WN(e){rF.call(this,[],e)}function HN(e){rF.call(this,null,e)}function VN(e){rF.call(this,[],e)}qS(TN,rF,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=$N(t.source,e.groupby,GE),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>rA(RS(e,t))/30)(n,o),s=FM(((e,t)=>o(e)-o(t))),u=e.as||"bin",l=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<l;++h){const e=r[h].sort(s);c=-1;for(const t of yF(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][u]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(u)}}),qS(zN,PM),PN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},qS(PN,rF,{transform:function(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=sS(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=LE(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),qS(LN,PM,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),qS(BN,rF,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){const i=this.value;let o,a,s=BS(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new LN(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean:function(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets:function(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform:function(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=EM(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);o.set(EM(e),t),s(t).add(e)})),a||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=EM(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(o.get(EM(e))).mod(e)})),a&&t.visit(t.REFLOW,(e=>{const t=EM(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),o.clean()})):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),qS(IN,PM),UN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},qS(UN,rF,{transform:function(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;function c(t){const n=EM(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(e=>{const t=EM(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(t=>{u(t,e)?o.push(t):r.set(EM(t),1)})),t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),qN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},qS(qN,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ON(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let u,l,c,f=0;for(;f<s;++f){for(l=CM(e),u=0;u<a;++u)l[i[u]]=null==(c=t[u][f])?null:c;o&&(l[o]=f),n.add.push(l)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),WN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},qS(WN,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(LE),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,o=0;o<u;++o)t=CM(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)}}),HN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},qS(HN,rF,{transform:function(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),qS(VN,rF,{transform:function(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,u=e.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=AM(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const GN={value:"value",median:Rd,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Nd,max:Fd},YN=[];function XN(e){rF.call(this,[],e)}function QN(e){vN.call(this,e)}function JN(e){rF.call(this,null,e)}function KN(e){PM.call(this,null,ZN,e)}function ZN(e){return this.value&&!e.modified()?this.value:JS(e.fields,e.flat)}function eO(e){rF.call(this,[],e),this._pending=null}function tO(e,t,n){n.forEach(AM);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function nO(e){rF.call(this,{},e)}function rO(e){PM.call(this,null,iO,e)}function iO(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function oO(e){PM.call(this,null,aO,e)}function aO(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function sO(e){rF.call(this,null,e)}function uO(e){vN.call(this,e)}function lO(e){BN.call(this,e)}function cO(e){rF.call(this,null,e)}function fO(e){rF.call(this,null,e)}function dO(e){rF.call(this,null,e)}XN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},qS(XN,rF,{transform:function(e,t){var n,r,i,o,a,s,u,l,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||GN.value;if(null!=GN[n])return n===GN.value?(t=void 0!==e.value?e.value:0,()=>t):GN[n];qE("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=LE(e.field),g=LE(e.key),y=(e.groupby||[]).map(LE),v=function(e,t,n,r){var i,o,a,s,u,l,c,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,c=e.length;s<c;++s)l=n(f=e[s]),u=m[l]||(m[l]=p.push(l)),(a=g[o=(i=t?t.map(d):YN)+""])||(a=g[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=v.domain.length;for(a=0,l=v.length;a<l;++a)for(i=(n=v[a]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=v.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[g]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(AM(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),QN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:uN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},qS(QN,vN,{transform:function(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{zS(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes:function(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),JN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},qS(JN,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=$N(r,e.groupby,e.field),o=(e.groupby||[]).map(LE),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&qE("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=RS(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=DF(t,a)[s],r=e.counts?t.length:1;tN(n,c||RS(t),f,d).forEach((e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(AM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),qS(KN,PM),qS(eO,rF,{transform:function(e,t){const n=t.dataflow;if(this._pending)return tO(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return tO(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then((e=>(this._pending=SS(e.data),e=>e.touch(this))))}}return n.request(e.url,e.format).then((e=>tO(this,t,SS(e.data))))}}),nO.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},qS(nO,rF,{transform:function(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let u,l,c,f=a?t.SOURCE:t.ADD,d=t,h=e.as;return i?(l=i.length,s>1&&!h&&qE('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*l&&qE('The "as" parameter has too few output field names.'),h=h||i.map(LE),u=function(e){for(var t,a,u=0,c=0;u<s;++u)if(null==(a=r.get(n[u](e))))for(t=0;t<l;++t,++c)e[h[c]]=o;else for(t=0;t<l;++t,++c)e[h[c]]=i[t](a)}):(h||qE("Missing output field names."),u=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?o:t}),a?d=t.reflow(!0):(c=n.some((e=>t.modified(e.fields))),f|=c?t.MOD:0),t.visit(f,u),d.modifies(h)}}),qS(rO,PM),qS(oO,PM),qS(sO,rF,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),uO.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:uN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},qS(uO,vN,{_transform:vN.prototype.transform,transform:function(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=BE(n).concat(BE(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(MS),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((()=>i)),fields:a.map((e=>function(e,t,n,r){return PE((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,o))),as:a.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),qS(lO,BN,{transform:function(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(EM(e),n,t,e);return(e.modified("field")||r&&t.modified(BE(r)))&&qE("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(AM(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),cO.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},qS(cO,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=ON(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):DM;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,(e=>{const t=EM(e);n.rem.push(a[t]),a[t]=null})),t.visit(t.ADD,(e=>{const t=o(e,AM({}));a[EM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(o(e,a[EM(e)]))})),n}}),qS(fO,rF,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),dO.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function hO(e){rF.call(this,null,e)}function pO(e){rF.call(this,[],e),this.count=0}function mO(e){rF.call(this,null,e)}function gO(e){rF.call(this,null,e),this.modified(!0)}function yO(e){rF.call(this,null,e)}qS(dO,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=$N(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(LE),a=[],s=e.step||.01,u=e.probs||Ld(s/2,1-1e-14,s),l=u.length;return i.forEach((e=>{const t=cF(e,u);for(let n=0;n<l;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=u[n],i[r[1]]=t[n],a.push(AM(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),qS(hO,rF,{transform:function(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=EM(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=CM(e);r[EM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[EM(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),pO.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},qS(pO,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce(((e,t)=>(e[EM(t)]=1,e)),{});let a=this.value,s=this.count,u=0;function l(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*pF()),r<a.length&&r>=u&&(t=a[r],o[EM(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=EM(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s})),a=a.filter((e=>-1!==o[EM(e)]))),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,(e=>{o[EM(e)]||l(e)})),u=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[EM(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{o[EM(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter((e=>!o[EM(e)]))),this.count=s,this.value=n.source=a,n}}),mO.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},qS(mO,rF,{transform:function(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ld(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,AM(t)})),n.add=t.add.concat(this.value),n}}),qS(gO,rF,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const vO=["unit0","unit1"];function bO(e){rF.call(this,jS(),e)}function xO(e){rF.call(this,null,e)}yO.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:rD,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:vO}]},qS(yO,rF,{transform:function(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?$D:OD)(o.unit).offset,s=e.as||vO,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(BE(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[u]=null,r&&(e[l]=null)):(e[u]=i=s=o(t),r&&(e[l]=s=a(i,c)),i<f&&(f=i),s>d&&(d=s))})),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor:function(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:eM({extent:e.extent||RS(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=oD(r),a=this.value||{},s=(n?MD:AD)(o,i);return s.unit=aS(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),qS(bO,rF,{transform:function(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),qS(xO,rF,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(FM(e.sort)):t.source).map(e.field))}});const wO={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=wO.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||qE("ntile num must be greater than zero.");const n=wO.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||qE("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const _O=Object.keys(wO);function kO(e){const t=SS(e.ops),n=SS(e.fields),r=SS(e.params),i=SS(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(e){SS(BE(e)).forEach((e=>s[e]=1))}d(e.sort),t.forEach(((e,t)=>{const s=n[t],h=LE(s),p=iN(e,h,i[t]);if(d(s),o.push(p),BS(wO,e))a.push(function(e,t,n,r){const i=wO[e](t,n);return{init:i.init||YE,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],p));else{if(null==s&&"count"!==e&&qE("Null aggregate field specified."),"count"===e)return void l.push(p);f=!1;let t=u[h];t||(t=u[h]=[],t.field=s,c.push(t)),t.push(lN(e,p))}})),(l.length||c.length)&&(this.cell=function(e,t,n){e=e.map((e=>mN(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new gN;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(c,l,f)),this.inputs=Object.keys(s)}const EO=kO.prototype;function SO(e){rF.call(this,{},e),this._mlen=0,this._mods=[]}function AO(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?yd(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||$S(-1)};t.init();for(let e=0;e<u;++e)CO(c,a,e,u),o&&DO(c,l),t.update(c,s[e])}function CO(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function DO(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}EO.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},EO.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},SO.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:_O.concat(uN)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},qS(SO,rF,{transform:function(e,t){this.stamp=t.stamp;const n=e.modified(),r=FM(e.sort),i=rN(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new kO(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,(e=>o(e).add(e)))):(t.visit(t.REM,(e=>o(e).remove(e))),t.visit(t.ADD,(e=>o(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)AO(this._mods[t],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group:function(e){let t=this.value[e];return t||(t=this.value[e]=xN(EM),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),t(sF,"window",(function(){return SO})),t(sF,"values",(function(){return xO})),t(sF,"tupleindex",(function(){return bO})),t(sF,"timeunit",(function(){return yO})),t(sF,"subflow",(function(){return LN})),t(sF,"sieve",(function(){return gO})),t(sF,"sequence",(function(){return mO})),t(sF,"sample",(function(){return pO})),t(sF,"relay",(function(){return hO})),t(sF,"quantile",(function(){return dO})),t(sF,"proxy",(function(){return fO})),t(sF,"project",(function(){return cO})),t(sF,"prefacet",(function(){return lO})),t(sF,"pivot",(function(){return uO})),t(sF,"params",(function(){return sO})),t(sF,"multivalues",(function(){return oO})),t(sF,"multiextent",(function(){return rO})),t(sF,"lookup",(function(){return nO})),t(sF,"load",(function(){return eO})),t(sF,"key",(function(){return KN})),t(sF,"kde",(function(){return JN})),t(sF,"joinaggregate",(function(){return QN})),t(sF,"impute",(function(){return XN})),t(sF,"generate",(function(){return VN})),t(sF,"formula",(function(){return HN})),t(sF,"fold",(function(){return WN})),t(sF,"flatten",(function(){return qN})),t(sF,"filter",(function(){return UN})),t(sF,"field",(function(){return IN})),t(sF,"facet",(function(){return BN})),t(sF,"extent",(function(){return PN})),t(sF,"expression",(function(){return zN})),t(sF,"dotbin",(function(){return TN})),t(sF,"density",(function(){return MN})),t(sF,"cross",(function(){return SN})),t(sF,"countpattern",(function(){return EN})),t(sF,"compare",(function(){return _N})),t(sF,"collect",(function(){return wN})),t(sF,"bin",(function(){return bN})),t(sF,"aggregate",(function(){return vN}));var MO={},FO={};const NO=Math.PI,OO=2*NO,$O=1e-6,TO=OO-$O;function zO(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function RO(){return new zO}zO.prototype=RO.prototype={constructor:zO,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>$O)if(Math.abs(c*s-u*l)>$O&&i){var d=n-o,h=r-a,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((NO-Math.acos((p+f-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>$O&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>$O||Math.abs(this._y1-l)>$O)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%OO+OO),f>TO?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>$O&&(this._+="A"+n+","+n+",0,"+ +(f>=NO)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var PO=function(e){return function(){return e}},LO=Math.abs,BO=Math.atan2,IO=Math.cos,jO=Math.max,UO=Math.min,qO=Math.sin,WO=Math.sqrt,HO=1e-12,VO=Math.PI,GO=VO/2,YO=2*VO;function XO(e){return e>1?0:e<-1?VO:Math.acos(e)}function QO(e){return e>=1?GO:e<=-1?-GO:Math.asin(e)}function JO(e){return e.innerRadius}function KO(e){return e.outerRadius}function ZO(e){return e.startAngle}function e$(e){return e.endAngle}function t$(e){return e&&e.padAngle}function n$(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<HO))return[e+(d=(c*(t-o)-f*(e-i))/d)*u,t+d*l]}function r$(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/WO(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,w=i-o,_=d*m-p*h,k=(b<0?-1:1)*WO(jO(0,w*w*x-_*_)),E=(_*b-v*k)/x,S=(-_*v-b*k)/x,A=(_*b+v*k)/x,C=(-_*v+b*k)/x,D=E-g,M=S-y,F=A-g,N=C-y;return D*D+M*M>F*F+N*N&&(E=A,S=C),{cx:E,cy:S,x01:-c,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}Array.prototype.slice;var i$=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function o$(e){this._context=e}o$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var a$=function(e){return new o$(e)};function s$(e){return e[0]}function u$(e){return e[1]}var l$=function(e,t){var n=PO(!0),r=null,i=a$,o=null;function a(a){var s,u,l,c=(a=i$(a)).length,f=!1;for(null==r&&(o=i(l=RO())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?s$:PO(e),t="function"==typeof t?t:void 0===t?u$:PO(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:PO(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:PO(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:PO(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},c$=function(e,t,n){var r=null,i=PO(!0),o=null,a=a$,s=null;function u(u){var l,c,f,d,h,p=(u=i$(u)).length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=RO())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+e(d,l,u),y[l]=+t(d,l,u),s.point(r?+r(d,l,u):g[l],n?+n(d,l,u):y[l]))}if(h)return s=null,h+""||null}function l(){return l$().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?s$:PO(+e),t="function"==typeof t?t:PO(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?u$:PO(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:PO(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:PO(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:PO(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:PO(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:PO(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:PO(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:PO(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u},f$={draw:function(e,t){var n=Math.sqrt(t/VO);e.moveTo(n,0),e.arc(0,0,n,0,YO)}},d$=(Math.sqrt(1/3),Math.sin(VO/10)/Math.sin(7*VO/10)),h$=(Math.sin(YO/10),Math.cos(YO/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function p$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function m$(e){this._context=e}m$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:p$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:p$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g$(e){this._context=e}g$.prototype={areaStart:h$,areaEnd:h$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:p$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y$(e){this._context=e}y$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:p$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function v$(e,t){this._basis=new m$(e),this._beta=t}v$.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var b$=function e(t){function n(e){return 1===t?new m$(e):new v$(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function x$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function w$(e,t){this._context=e,this._k=(1-t)/6}w$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:x$(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:x$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var _$=function e(t){function n(e){return new w$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function k$(e,t){this._context=e,this._k=(1-t)/6}k$.prototype={areaStart:h$,areaEnd:h$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:x$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var E$=function e(t){function n(e){return new k$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function S$(e,t){this._context=e,this._k=(1-t)/6}S$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:x$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var A$=function e(t){function n(e){return new S$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function C$(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>HO){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>HO){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function D$(e,t){this._context=e,this._alpha=t}D$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:C$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var M$=function e(t){function n(e){return t?new D$(e,t):new w$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function F$(e,t){this._context=e,this._alpha=t}F$.prototype={areaStart:h$,areaEnd:h$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:C$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var N$=function e(t){function n(e){return t?new F$(e,t):new k$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function O$(e,t){this._context=e,this._alpha=t}O$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:C$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $$=function e(t){function n(e){return t?new O$(e,t):new S$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function T$(e){this._context=e}T$.prototype={areaStart:h$,areaEnd:h$,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function z$(e){return e<0?-1:1}function R$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(z$(o)+z$(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function P$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function L$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function B$(e){this._context=e}function I$(e){this._context=new j$(e)}function j$(e){this._context=e}function U$(e){this._context=e}function q$(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}B$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:L$(this,this._t0,P$(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,L$(this,P$(this,n=R$(this,e,t)),n);break;default:L$(this,this._t0,n=R$(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(I$.prototype=Object.create(B$.prototype)).point=function(e,t){B$.prototype.point.call(this,t,e)},j$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},U$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=q$(e),i=q$(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function W$(e,t){this._context=e,this._t=t}W$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function H$(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const V$=()=>"undefined"!=typeof Image?Image:null;function G$(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const Y$="linear",X$="log",Q$="pow",J$="sqrt",K$="symlog",Z$="time",eT="utc",tT="sequential",nT="diverging",rT="quantile",iT="quantize",oT="threshold",aT="ordinal",sT="point",uT="band",lT="bin-ordinal",cT="continuous",fT="discrete",dT="discretizing",hT="interpolating",pT="temporal";function mT(){const e=Fm().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){const e=t().length,c=o[1]<o[0],f=o[1-c],d=G$(e,s,u);let h=o[c-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*l,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=Ld(e).map((e=>h+r*e));return n(c?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,l,c,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(c=f,f=d,d=c),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,xd(a,f)-1),l=f===d?u:xd(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(c=u,u=s-l,l=s-c),u>l?void 0:t().slice(u,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return mT().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function gT(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return gT(t())},e}var yT=Array.prototype.map;function vT(e){return yT.call(e,sS)}const bT=Array.prototype.slice;const xT={};function wT(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],l=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(l<0&&(l=o),r=o);if(!(l<0))return s=e.invertExtent(n[l]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=e,n};return r.metadata=lA(SS(n)),r}function _T(e,t,n){return arguments.length>1?(xT[e]=wT(e,t,n),this):kT(e)?xT[e]:void 0}function kT(e){return BS(xT,e)}function ET(e,t){const n=xT[e];return n&&n.metadata[t]}function ST(e){return ET(e,cT)}function AT(e){return ET(e,fT)}function CT(e){return ET(e,dT)}function DT(e){return ET(e,X$)}function MT(e){return ET(e,hT)}function FT(e){return ET(e,rT)}_T("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,jp),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,jp):[0,1],ym(r)})),_T(Y$,(function e(){var t=Xp();return t.copy=function(){return Gp(t,e())},Qp.apply(t,arguments),ym(t)}),cT),_T(X$,(function e(){var t=Sm(Yp()).domain([1,10]);return t.copy=function(){return Gp(t,e()).base(t.base())},Qp.apply(t,arguments),t}),[cT,X$]),_T(Q$,zm,cT),_T(J$,(function(){return zm.apply(null,arguments).exponent(.5)}),cT),_T(K$,(function e(){var t=Dm(Yp());return t.copy=function(){return Gp(t,e()).constant(t.constant())},Qp.apply(t,arguments)}),cT),_T(Z$,(function(){return Qp.apply(Zy(kg,Eg,ag,og,Km,Qm,Xm,Ym,Gm,Fg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[cT,pT]),_T(eT,(function(){return Qp.apply(Zy(wg,_g,bg,vg,fg,lg,ug,sg,Gm,Og).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[cT,pT]),_T(tT,nv,[cT,hT]),_T("".concat(tT,"-").concat(Y$),nv,[cT,hT]),_T("".concat(tT,"-").concat(X$),(function e(){var t=Sm(ev()).domain([1,10]);return t.copy=function(){return tv(t,e()).base(t.base())},Jp.apply(t,arguments)}),[cT,hT,X$]),_T("".concat(tT,"-").concat(Q$),rv,[cT,hT]),_T("".concat(tT,"-").concat(J$),(function(){return rv.apply(null,arguments).exponent(.5)}),[cT,hT]),_T("".concat(tT,"-").concat(K$),(function e(){var t=Dm(ev());return t.copy=function(){return tv(t,e()).constant(t.constant())},Jp.apply(t,arguments)}),[cT,hT]),_T("".concat(nT,"-").concat(Y$),(function e(){var t=ym(iv()(qp));return t.copy=function(){return tv(t,e())},Jp.apply(t,arguments)}),[cT,hT]),_T("".concat(nT,"-").concat(X$),(function e(){var t=Sm(iv()).domain([.1,1,10]);return t.copy=function(){return tv(t,e()).base(t.base())},Jp.apply(t,arguments)}),[cT,hT,X$]),_T("".concat(nT,"-").concat(Q$),ov,[cT,hT]),_T("".concat(nT,"-").concat(J$),(function(){return ov.apply(null,arguments).exponent(.5)}),[cT,hT]),_T("".concat(nT,"-").concat(K$),(function e(){var t=Dm(iv());return t.copy=function(){return tv(t,e()).constant(t.constant())},Jp.apply(t,arguments)}),[cT,hT]),_T(rT,(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=zd(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[xd(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(gd),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},Qp.apply(a,arguments)}),[dT,rT]),_T(iT,(function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[xd(o,e,0,i)]:t}function u(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,u()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,u()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},Qp.apply(ym(s),arguments)}),dT),_T(oT,(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[xd(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},Qp.apply(o,arguments)}),dT),_T(lT,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(xd(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=vT(e),r):t.slice()},r.range=function(e){return arguments.length?(n=bT.call(e),r):n.slice()},r.tickFormat=function(e,n){return gm(t[0],aS(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[fT,dT]),_T(aT,Fm,fT),_T(uT,mT,fT),_T(sT,(function(){return gT(mT().paddingInner(1))}),fT);const NT=["clamp","base","constant","exponent"];function OT(e,t){const n=t[0],r=aS(t)-n;return function(t){return e(n+t*r)}}function $T(e,t,n){return Bp(RT(t||"rgb",n),e)}function TT(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function zT(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=_T(o)().domain([t,n]).range([0,1]),NT.forEach((t=>e[t]?a[t](e[t]()):0)),a):$S(.5)}function RT(e,t){const n=Id[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function PT(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function LT(e,t){for(const n in e)IT(n,t(e[n]))}const BT={};function IT(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(BT[e]=t,this):BT[e]}LT({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},PT),LT({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>$T(PT(e))));const jT="symbol",UT=e=>eS(e)?e.map((e=>String(e))):String(e),qT=(e,t)=>e[1]-t[1],WT=(e,t)=>t[1]-e[1];function HT(e,t,n){let r;return YS(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(rA(e.domain())/n||1)))),tS(t)&&(r=t.step,t=t.interval),QS(t)&&(t=e.type===Z$?OD(t):e.type==eT?$D(t):qE("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function VT(e,t,n){let r=e.range(),i=r[0],o=aS(r),a=qT;if(i>o&&(r=o,o=i,i=r,a=WT),i=Math.floor(i),o=Math.ceil(o),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=o)).sort(a).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],aS(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function GT(e,t){return e.bins?VT(e,e.bins):e.ticks?e.ticks(t):e.domain()}function YT(e,t,n,r,i,o){const a=t.type;let s=UT;if(a===Z$||i===Z$)s=e.timeFormat(r);else if(a===eT||i===eT)s=e.utcFormat(r);else if(DT(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=XT(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function XT(e,t,n){const r=GT(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const QT={[rT]:"quantiles",[iT]:"thresholds",[oT]:"domain"},JT={[rT]:"quantiles",[iT]:"domain"};function KT(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=aS(e),t}(e.bins):e.type===X$?XT(e,t,!0):QT[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[QT[e.type]]()):GT(e,t)}function ZT(e,t,n,r,i,o,a){const s=JT[t.type]&&o!==Z$&&o!==eT?function(e,t,n){const r=t[JT[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):YT(e,t,n,i,o,a);return r===jT&&(e=>QT[e.type]||e.bins)(t)?ez(s):"discrete"===r?nz(s):rz(s)}const ez=e=>(t,n,r)=>{const i=tz(r[n+1],tz(r.max,1/0)),o=iz(t,e),a=iz(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},tz=(e,t)=>null!=e?e:t,nz=e=>(t,n)=>n?e(t):null,rz=e=>t=>e(t),iz=(e,t)=>Number.isFinite(e)?t(e):null;function oz(e,t,n,r){const i=r||t.type;return QS(n)&&ET(i,pT)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==Z$?n||i!==eT?ZT(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function az(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=oz(e,t,n.format,n.formatType);if(CT(t.type)){const e=KT(t).slice(1).map(i),n=e.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(e.join(", "))}if(AT(t.type)){const e=t.domain(),n=e.length,o=n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const e=t.domain();return"values from ".concat(i(e[0])," to ").concat(i(aS(e)))}}let sz=0;const uz="p_";function lz(e){return e&&e.gradient}function cz(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?uz:"";return i||(i=e.id="gradient_"+sz++,"radial"===r?(e.x1=fz(e.x1,.5),e.y1=fz(e.y1,.5),e.r1=fz(e.r1,0),e.x2=fz(e.x2,.5),e.y2=fz(e.y2,.5),e.r2=fz(e.r2,.5),o=uz):(e.x1=fz(e.x1,0),e.y1=fz(e.y1,0),e.x2=fz(e.x2,1),e.y2=fz(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function fz(e,t){return null!=e?e:t}function dz(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const hz={basis:{curve:function(e){return new m$(e)}},"basis-closed":{curve:function(e){return new g$(e)}},"basis-open":{curve:function(e){return new y$(e)}},bundle:{curve:b$,tension:"beta",value:.85},cardinal:{curve:_$,tension:"tension",value:0},"cardinal-open":{curve:A$,tension:"tension",value:0},"cardinal-closed":{curve:E$,tension:"tension",value:0},"catmull-rom":{curve:M$,tension:"alpha",value:.5},"catmull-rom-closed":{curve:N$,tension:"alpha",value:.5},"catmull-rom-open":{curve:$$,tension:"alpha",value:.5},linear:{curve:a$},"linear-closed":{curve:function(e){return new T$(e)}},monotone:{horizontal:function(e){return new I$(e)},vertical:function(e){return new B$(e)}},natural:{curve:function(e){return new U$(e)}},step:{curve:function(e){return new W$(e,.5)}},"step-after":{curve:function(e){return new W$(e,1)}},"step-before":{curve:function(e){return new W$(e,0)}}};function pz(e,t,n){var r=BS(hz,e)&&hz[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const mz={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},gz=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function yz(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(gz[0],"###$1").split(gz[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(gz[2],"$1###$2").replace(gz[3],"$1###$2").split(gz[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=mz[a.toLowerCase()],i.length-1>s){const e=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a="M"===a?"L":"m"===a?"l":a;l<e;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const vz=Math.PI/180,bz=Math.PI/2,xz=2*Math.PI,wz=Math.sqrt(3)/2;var _z={},kz={},Ez=[].join;function Sz(e){const t=Ez.call(e);if(kz[t])return kz[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),x=8/3*b*b/Math.sin(v),w=n+p-x*m,_=r+m+x*p,k=n+g,E=r+y,S=k+x*y,A=E-x*g;return kz[t]=[c*w+f*_,d*w+h*_,c*S+f*A,d*S+h*A,c*k+f*E,d*k+h*E]}const Az=["l",0,0,0,0,0,0,0];function Cz(e,t,n){const r=Az[0]=e[0];if("a"===r||"A"===r)Az[1]=t*e[1],Az[2]=n*e[2],Az[3]=e[3],Az[4]=e[4],Az[5]=e[5],Az[6]=t*e[6],Az[7]=n*e[7];else if("h"===r||"H"===r)Az[1]=t*e[1];else if("v"===r||"V"===r)Az[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Az[i]=(i%2==1?t:n)*e[i];return Az}function Dz(e,t,n,r,i,o){var a,s,u,l,c,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(a=t[g],1===i&&1===o||(a=Cz(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],m=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],m=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],m=h+a[2],e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-l,m=2*h-c):"q"===f[0]&&(p=2*d-p,m=2*h-m),l=p,c=m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),h=u,p=(d=s)+a[1],m=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":Mz(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":Mz(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function Mz(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,u){const l=Ez.call(arguments);if(_z[l])return _z[l];const c=a*vz,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*s+y*u,w=v*s+b*u,_=g*e+y*t,k=v*e+b*t;let E=1/((_-x)*(_-x)+(k-w)*(k-w))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const A=.5*(x+_)-S*(k-w),C=.5*(w+k)+S*(_-x),D=Math.atan2(w-C,x-A);let M=Math.atan2(k-C,_-A)-D;M<0&&1===o?M+=xz:M>0&&0===o&&(M-=xz);const F=Math.ceil(Math.abs(M/(bz+.001))),N=[];for(let e=0;e<F;++e){const t=D+e*M/F,i=D+(e+1)*M/F;N[e]=[A,C,t,i,n,r,f,d]}return _z[l]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=Sz(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const Fz=.5773502691896257,Nz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,xz)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n,i=r-n*Fz,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n,i=r-n*Fz;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=wz*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Oz(e){return BS(Nz,e)?Nz[e]:function(e){if(!BS($z,e)){const t=yz(e);$z[e]={draw:function(e,n){Dz(e,t,0,0,Math.sqrt(n)/2)}}}return $z[e]}(e)}var $z={};const Tz=.448084975506;function zz(e){return e.x}function Rz(e){return e.y}function Pz(e){return e.width}function Lz(e){return e.height}function Bz(e){return"function"==typeof e?e:()=>+e}function Iz(e,t,n){return Math.max(t,Math.min(e,n))}function jz(){var e=zz,t=Rz,n=Pz,r=Lz,i=Bz(0),o=i,a=i,s=i,u=null;function l(l,c,f){var d,h=null!=c?c:+e.call(this,l),p=null!=f?f:+t.call(this,l),m=+n.call(this,l),g=+r.call(this,l),y=Math.min(m,g)/2,v=Iz(+i.call(this,l),0,y),b=Iz(+o.call(this,l),0,y),x=Iz(+a.call(this,l),0,y),w=Iz(+s.call(this,l),0,y);if(u||(u=d=RO()),v<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var _=h+m,k=p+g;u.moveTo(h+v,p),u.lineTo(_-b,p),u.bezierCurveTo(_-Tz*b,p,_,p+Tz*b,_,p+b),u.lineTo(_,k-w),u.bezierCurveTo(_,k-Tz*w,_-Tz*w,k,_-w,k),u.lineTo(h+x,k),u.bezierCurveTo(h+Tz*x,k,h,k-Tz*x,h,k-x),u.lineTo(h,p+v),u.bezierCurveTo(h,p+Tz*v,h+Tz*v,p,h+v,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(t){return arguments.length?(e=Bz(t),l):e},l.y=function(e){return arguments.length?(t=Bz(e),l):t},l.width=function(e){return arguments.length?(n=Bz(e),l):n},l.height=function(e){return arguments.length?(r=Bz(e),l):r},l.cornerRadius=function(e,t,n,r){return arguments.length?(i=Bz(e),o=null!=t?Bz(t):i,s=null!=n?Bz(n):i,a=null!=r?Bz(r):o,l):i},l.context=function(e){return arguments.length?(u=null==e?null:e,l):u},l}function Uz(){var e,t,n,r,i,o,a,s,u=null;function l(e,t,n){const r=n/2;if(i){var l=a-t,c=e-o;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(o-d,a-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(e,t,r,0,xz);u.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==u&&(u=c=RO()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&l(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return u=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function qz(e,t){return null!=e?e:t}const Wz=e=>e.x||0,Hz=e=>e.y||0,Vz=e=>!(!1===e.defined),Gz=function(){var e=JO,t=KO,n=PO(0),r=null,i=ZO,o=e$,a=t$,s=null;function u(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-GO,h=o.apply(this,arguments)-GO,p=LO(h-d),m=h>d;if(s||(s=u=RO()),f<c&&(l=f,f=c,c=l),f>HO)if(p>YO-HO)s.moveTo(f*IO(d),f*qO(d)),s.arc(0,0,f,d,h,!m),c>HO&&(s.moveTo(c*IO(h),c*qO(h)),s.arc(0,0,c,h,d,m));else{var g,y,v=d,b=h,x=d,w=h,_=p,k=p,E=a.apply(this,arguments)/2,S=E>HO&&(r?+r.apply(this,arguments):WO(c*c+f*f)),A=UO(LO(f-c)/2,+n.apply(this,arguments)),C=A,D=A;if(S>HO){var M=QO(S/c*qO(E)),F=QO(S/f*qO(E));(_-=2*M)>HO?(x+=M*=m?1:-1,w-=M):(_=0,x=w=(d+h)/2),(k-=2*F)>HO?(v+=F*=m?1:-1,b-=F):(k=0,v=b=(d+h)/2)}var N=f*IO(v),O=f*qO(v),$=c*IO(w),T=c*qO(w);if(A>HO){var z,R=f*IO(b),P=f*qO(b),L=c*IO(x),B=c*qO(x);if(p<VO&&(z=n$(N,O,L,B,R,P,$,T))){var I=N-z[0],j=O-z[1],U=R-z[0],q=P-z[1],W=1/qO(XO((I*U+j*q)/(WO(I*I+j*j)*WO(U*U+q*q)))/2),H=WO(z[0]*z[0]+z[1]*z[1]);C=UO(A,(c-H)/(W-1)),D=UO(A,(f-H)/(W+1))}}k>HO?D>HO?(g=r$(L,B,N,O,f,D,m),y=r$(R,P,$,T,f,D,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),D<A?s.arc(g.cx,g.cy,D,BO(g.y01,g.x01),BO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,D,BO(g.y01,g.x01),BO(g.y11,g.x11),!m),s.arc(0,0,f,BO(g.cy+g.y11,g.cx+g.x11),BO(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,D,BO(y.y11,y.x11),BO(y.y01,y.x01),!m))):(s.moveTo(N,O),s.arc(0,0,f,v,b,!m)):s.moveTo(N,O),c>HO&&_>HO?C>HO?(g=r$($,T,R,P,c,-C,m),y=r$(N,O,L,B,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,BO(g.y01,g.x01),BO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,BO(g.y01,g.x01),BO(g.y11,g.x11),!m),s.arc(0,0,c,BO(g.cy+g.y11,g.cx+g.x11),BO(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,BO(y.y11,y.x11),BO(y.y01,y.x01),!m))):s.arc(0,0,c,w,x,m):s.lineTo($,T)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-VO/2;return[IO(r)*n,qO(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:PO(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:PO(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:PO(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:PO(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:PO(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:PO(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:PO(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),Yz=c$().x(Wz).y1(Hz).y0((e=>(e.y||0)+(e.height||0))).defined(Vz),Xz=c$().y(Hz).x1(Wz).x0((e=>(e.x||0)+(e.width||0))).defined(Vz),Qz=l$().x(Wz).y(Hz).defined(Vz),Jz=jz().x(Wz).y(Hz).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>qz(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>qz(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>qz(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>qz(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),Kz=function(e,t){var n=null;function r(){var r;if(n||(n=r=RO()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:PO(e||f$),t="function"==typeof t?t:PO(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:PO(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:PO(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>Oz(e.shape||"circle"))).size((e=>qz(e.size,64))),Zz=Uz().x(Wz).y(Hz).defined(Vz).size((e=>e.size||1));function eR(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function tR(e,t,n,r){return Jz.context(e)(t,n,r)}var nR=1;function rR(){nR=1}function iR(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+nR++),a=i.clipping[o]||(i.clipping[o]={id:o});return CS(r)?a.path=r(null):eR(n)?a.path=tR(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function oR(e){this.clear(),e&&this.union(e)}function aR(e){this.mark=e,this.bounds=this.bounds||new oR}function sR(e){aR.call(this,e),this.items=this.items||[]}function uR(e){this._pending=0,this._loader=e||vM()}function lR(e){e._pending+=1}function cR(e){e._pending-=1}function fR(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}oR.prototype={clone:function(){return new oR(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},qS(sR,aR),uR.prototype={pending:function(){return this._pending},sanitizeURL:function(e){const t=this;return lR(t),t._loader.sanitize(e,{context:"href"}).then((e=>(cR(t),e))).catch((()=>(cR(t),null)))},loadImage:function(e){const t=this,n=V$();return lR(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=BS(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>cR(t),i.onerror=()=>cR(t),i.src=r,i})).catch((e=>(cR(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready:function(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}};const dR=xz-1e-8;let hR,pR,mR,gR,yR,vR,bR,xR;const wR=(e,t)=>hR.add(e,t),_R=(e,t)=>wR(pR=e,mR=t),kR=e=>wR(e,hR.y1),ER=e=>wR(hR.x1,e),SR=(e,t)=>yR*e+bR*t,AR=(e,t)=>vR*e+xR*t,CR=(e,t)=>wR(SR(e,t),AR(e,t)),DR=(e,t)=>_R(SR(e,t),AR(e,t));function MR(e,t){return hR=e,t?(gR=t*vz,yR=xR=Math.cos(gR),vR=Math.sin(gR),bR=-vR):(yR=xR=1,gR=vR=bR=0),FR}const FR={beginPath:function(){},closePath:function(){},moveTo:DR,lineTo:DR,rect:function(e,t,n,r){gR?(CR(e+n,t),CR(e+n,t+r),CR(e,t+r),DR(e,t)):(wR(e+n,t+r),_R(e,t))},quadraticCurveTo:function(e,t,n,r){const i=SR(e,t),o=AR(e,t),a=SR(n,r),s=AR(n,r);NR(pR,i,a,kR),NR(mR,o,s,ER),_R(a,s)},bezierCurveTo:function(e,t,n,r,i,o){const a=SR(e,t),s=AR(e,t),u=SR(n,r),l=AR(n,r),c=SR(i,o),f=AR(i,o);OR(pR,a,u,c,kR),OR(mR,s,l,f,ER),_R(c,f)},arc:function(e,t,n,r,i,o){if(r+=gR,i+=gR,pR=n*Math.cos(i)+e,mR=n*Math.sin(i)+t,Math.abs(i-r)>dR)wR(e-n,t-n),wR(e+n,t+n);else{const a=r=>wR(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=xz)<0&&(r+=xz),(i%=xz)<0&&(i+=xz),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=xz,s=r-r%bz,u=0;u<4&&s>i;++u,s-=bz)a(s);else for(s=r-r%bz+bz,u=0;u<4&&s<i;++u,s+=bz)a(s)}}};function NR(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function OR(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),l=(-a+u)/o,c=(-a-u)/o)):l=.5*s/a,0<l&&l<1&&i($R(l,e,t,n,r)),0<c&&c<1&&i($R(c,e,t,n,r))}function $R(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var TR=(TR=H$(1,1))?TR.getContext("2d"):null;const zR=new oR;function RR(e){return function(t,n){if(!TR)return!0;e(TR,t),zR.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=zR;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(TR.isPointInPath(t,e))return!0;return!1}}function PR(e,t){return t.contains(e.x||0,e.y||0)}function LR(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(zR.set(n,r,n+i,r+o))}function BR(e,t){const n=e.x||0,r=e.y||0;return IR(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function IR(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-l,d=-(o-t)),1===p&&(f=l,d=s-t),2===p&&(f=-c,d=-(a-n)),3===p&&(f=c,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function jR(e,t){e.globalCompositeOperation=t.blend||"source-over"}function UR(e,t){return null==e?t:e}function qR(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function WR(e,t,n){return lz(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+UR(t.x1,.5)*r,n.y1+UR(t.y1,.5)*i,Math.max(r,i)*UR(t.r1,0),n.x1+UR(t.x2,.5)*r,n.y1+UR(t.y2,.5)*i,Math.max(r,i)*UR(t.r2,.5));else{const a=UR(t.x1,0),s=UR(t.y1,0),u=UR(t.x2,1),l=UR(t.y2,0);if(a!==u&&s!==l&&r!==i){const n=H$(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=qR(o.createLinearGradient(a,s,u,l),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i)}return qR(o,t.stops)}(e,n,t.bounds):n}function HR(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=WR(e,t,t.fill),!0)}var VR=[];function GR(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=WR(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||VR),e.lineDashOffset=t.strokeDashOffset||0),!0))}function YR(e,t){return e.zindex-t.zindex||e.index-t.index}function XR(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(YR)}function QR(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=XR(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function JR(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=XR(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function KR(e){return function(t,n,r){QR(n,(n=>{r&&!r.intersects(n.bounds)||ZR(e,t,n,n)}))}}function ZR(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(jR(t,n),n.fill&&HR(t,n,i)&&t.fill(),n.stroke&&GR(t,n,i)&&t.stroke()))}function eP(e){return e=e||QE,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,JR(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function tP(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function nP(e){return eP(tP(e))}function rP(e,t){return"translate("+e+","+t+")"}function iP(e){return"rotate("+e+")"}function oP(e){return rP(e.x||0,e.y||0)}function aP(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=vz),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return rP(e.x||0,e.y||0)+(e.angle?" "+iP(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(MR(e,n.angle),n),fR(e,n).translate(n.x||0,n.y||0)},draw:KR(r),pick:nP(r),isect:n||RR(r)}}var sP=aP("arc",(function(e,t){return Gz.context(e)(t)}));function uP(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=tP(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(MR(e),r),fR(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||ZR(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:PR,tip:n};var o}var lP=uP("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Xz:Yz).curve(pz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function cP(e,t){e.beginPath(),eR(t)?tR(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function fP(e){const t=UR(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function dP(e,t){const n=fP(t);e("d",tR(null,t,n,n))}function hP(e,t,n,r){const i=fP(t);e.beginPath(),tR(e,t,(n||0)+i,(r||0)+i)}const pP=tP(hP),mP=tP(hP,!1),gP=tP(hP,!0);var yP={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",oP(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),fR(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){QR(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(hP(e,t,r,i),jR(e,t),t.fill&&HR(e,t,a)&&e.fill(),t.stroke&&!o&&GR(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&cP(e,t),n&&n.translate(-r,-i),QR(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(hP(e,t,r,i),jR(e,t),GR(e,t,a)&&e.stroke())}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return JR(t,(u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&eR(u)&&!gP(e,u,a,s))return e.restore(),null;const g=u.strokeForeground,y=!1!==t.interactive;return y&&g&&u.stroke&&mP(e,u,a,s)?(e.restore(),u):(l=JR(u,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,f)?this.pick(e,n,r,c,f):null)),!l&&y&&(u.fill||!g&&u.stroke)&&pP(e,u,a,s)&&(l=u),e.restore(),l||null)}))},isect:LR,content:function(e,t,n){e("clip-path",t.clip?iR(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),dP(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?dP(e,t):e("d","")}},vP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function bP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function xP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function wP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function _P(e,t){return"center"===e?t/2:"right"===e?t:0}function kP(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var EP={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=bP(t,n),i=xP(t,r),o=wP(t,r),a=(t.x||0)-_P(t.align,i),s=(t.y||0)-kP(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",vP["xmlns:xlink"],"xlink:href"),e("transform",rP(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=xP(t,n),i=wP(t,n),o=(t.x||0)-_P(t.align,r),a=(t.y||0)-kP(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){QR(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=bP(t,this);let i=xP(t,r),o=wP(t,r);if(0===i||0===o)return;let a,s,u,l,c=(t.x||0)-_P(t.align,i),f=(t.y||0)-kP(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,u=t.width/t.height,s==s&&u==u&&s!==u&&(u<s?(l=i/s,f+=(o-l)/2,o=l):(l=o*s,c+=(i-l)/2,i=l))),(r.complete||r.toDataURL)&&(jR(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,f,i,o))}))},pick:eP(),isect:QE,get:bP,xOffset:_P,yOffset:kP},SP=uP("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return Qz.curve(pz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function AP(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*vz,u=t.pathCache;u&&u.path===n||((t.pathCache=u=yz(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Dz(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Dz(e,u,r,i,o,a)}var CP={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return rP(e.x||0,e.y||0)+(e.angle?" "+iP(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return AP(MR(e,t.angle),t)?e.set(0,0,0,0):fR(e,t,!0)},draw:KR(AP),pick:nP(AP),isect:RR(AP)};function DP(e,t){e.beginPath(),tR(e,t)}var MP={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",tR(null,t))},bound:function(e,t){var n,r;return fR(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:KR(DP),pick:nP(DP),isect:LR};function FP(e,t,n){var r,i,o,a;return!(!t.stroke||!GR(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var NP={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",oP(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return fR(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){QR(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&FP(e,t,r)&&(jR(e,t),e.stroke())}}))},pick:eP((function(e,t,n,r){return!!e.isPointInStroke&&(FP(e,t,1)&&e.isPointInStroke(n,r))})),isect:BR},OP=aP("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),$P=aP("symbol",(function(e,t){return Kz.context(e)(t)}),PR);const TP=ZS();var zP={height:jP,measureWidth:BP,estimateWidth:PP,width:PP,canvas:RP};function RP(e){zP.width=e&&TR?BP:PP}function PP(e,t){return LP(HP(e,t),jP(e))}function LP(e,t){return~~(.8*e.length*t)}function BP(e,t){return jP(e)<=0||!(t=HP(e,t))?0:IP(t,GP(e))}function IP(e,t){const n=`(${t}) ${e}`;let r=TP.get(n);return void 0===r&&(TR.font=t,r=TR.measureText(e).width,TP.set(n,r)),r}function jP(e){return null!=e.fontSize?+e.fontSize||0:11}function UP(e){return null!=e.lineHeight?e.lineHeight:jP(e)+2}function qP(e){return t=e.lineBreak&&e.text&&!eS(e.text)?e.text.split(e.lineBreak):e.text,eS(t)?t.length>1?t:t[0]:t;var t}function WP(e){const t=qP(e);return(eS(t)?t.length-1:0)*UP(e)}function HP(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(zP.width===BP){const t=GP(e);return e=>IP(e,t)}{const t=jP(e);return e=>LP(e,t)}}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"…",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}(e,n):n}function VP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function GP(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+jP(e)+"px "+VP(e,t)}function YP(e){var t=e.baseline,n=jP(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*UP(e):"line-bottom"===t?.29*n-.5*UP(e):0)}RP(!0);const XP={left:"start",center:"middle",right:"end"},QP=new oR;function JP(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-bz,n+=i*Math.cos(t),r+=i*Math.sin(t)),QP.x1=n,QP.y1=r,QP}function KP(e,t,n){var r,i=zP.height(t),o=t.align,a=JP(t),s=a.x1,u=a.y1,l=t.dx||0,c=(t.dy||0)+YP(t)-Math.round(.8*i),f=qP(t);if(eS(f)?(i+=UP(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,zP.width(t,n))),0)):r=zP.width(t,f),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*vz,s,u);else if(2===n)return e.rotatedPoints(t.angle*vz,s,u);return e}var ZP={arc:sP,area:lP,group:yP,image:EP,line:SP,path:CP,rect:MP,rule:NP,shape:OP,symbol:$P,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+YP(t),o=JP(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",XP[t.align]||"start"),u?(n=rP(a,s)+" "+iP(u),(r||i)&&(n+=" "+rP(r,i))):n=rP(a+r,s+i),e("transform",n)},bound:KP,draw:function(e,t,n){QR(t,(t=>{var r,i,o,a,s,u,l,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=GP(t),e.textAlign=t.align||"left",i=(r=JP(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*vz),i=o=0),i+=t.dx||0,o+=(t.dy||0)+YP(t),u=qP(t),jR(e,t),eS(u))for(s=UP(t),a=0;a<u.length;++a)l=HP(t,u[a]),t.fill&&HR(e,t,c)&&e.fillText(l,i,o),t.stroke&&GR(e,t,c)&&e.strokeText(l,i,o),o+=s;else l=HP(t,u),t.fill&&HR(e,t,c)&&e.fillText(l,i,o),t.stroke&&GR(e,t,c)&&e.strokeText(l,i,o);t.angle&&e.restore()}}))},pick:eP((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=JP(t),s=a.x1,u=a.y1,l=KP(QP,t,1),c=-t.angle*vz,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)})),isect:function(e,t){const n=KP(QP,e,2);return IR(t,n[0],n[1],n[2],n[3])||IR(t,n[0],n[1],n[4],n[5])||IR(t,n[4],n[5],n[6],n[7])||IR(t,n[2],n[3],n[6],n[7])}},trail:uP("trail",(function(e,t){return Zz.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))};function eL(e,t,n){var r=ZP[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new oR),e,n)}var tL={mark:null};function nL(e,t,n){var r,i,o,a,s=ZP[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?o=l[0]:(tL.mark=e,o=tL),a=eL(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new oR,c)for(r=0,i=l.length;r<i;++r)t.union(eL(l[r],u,n));return e.bounds=t}const rL=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function iL(e,t){return JSON.stringify(e,rL,t)}function oL(e){return aL("string"==typeof e?JSON.parse(e):e)}function aL(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&aL(o[n]);return i&&nL(e),e}function sL(e){arguments.length?this.root=oL(e):(this.root=uL({marktype:"group",name:"root",role:"frame"}),this.root.items=[new sR(this.root)])}function uL(e,t){const n={bounds:new oR,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function lL(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function cL(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function fL(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=lL(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function dL(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function hL(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function pL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function mL(e,t){this._active=null,this._handlers={},this._loader=e||vM(),this._tooltip=t||gL}function gL(e,t,n,r){e.element().setAttribute("title",r||"")}function yL(e){this._el=null,this._bgcolor=null,this._loader=new uR(e)}sL.prototype={toJSON:function(e){return iL(this.root,e||0)},mark:function(e,t,n){const r=uL(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},mL.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName:function(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=lL(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=ZP[a.marktype]).tip){for((o=pL(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},yL.prototype={initialize:function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};const vL="dragenter",bL="dragleave",xL="dragover",wL="mousedown",_L="mousemove",kL="mouseout",EL="mouseover",SL="click",AL="mousewheel",CL="touchstart",DL="touchmove",ML="touchend",FL=_L,NL=kL,OL=SL;function $L(e,t){mL.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function TL(e,t){(e=>e===CL||e===DL||e===ML?[CL,DL,ML]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function zL(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function RL(e){return function(t){this.fire(e,t),this._active=null}}qS($L,mL,{initialize:function(e,t,n){return this._canvas=e&&cL(e,"canvas"),[SL,wL,_L,kL,bL].forEach((e=>TL(this,e))),mL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",vL,bL,xL,wL,"mouseup",_L,kL,EL,SL,"dblclick","wheel",AL,CL,DL,ML],DOMMouseScroll:function(e){this.fire(AL,e)},mousemove:zL(_L,EL,kL),dragover:zL(xL,vL,bL),mouseout:RL(kL),dragleave:RL(bL),mousedown:function(e){this._down=this._active,this.fire(wL,e)},click:function(e){this._down===this._active&&(this.fire(SL,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(CL,e,!0)},touchmove:function(e){this.fire(DL,e,!0)},touchend:function(e){this.fire(ML,e,!0),this._touch=null},fire:function(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===OL&&r&&r.href?this.handleHref(t,r,r.href):e!==FL&&e!==NL||this.handleTooltip(t,r,e!==NL),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)},on:function(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(TL(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent:function(e){const t=pL(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,i){const o=this.context();return ZP[e.marktype].pick.call(this,o,e,t,n,r,i)}});var PL="undefined"!=typeof window&&window.devicePixelRatio||1;function LL(e){yL.call(this,e),this._options={},this._redraw=!1,this._dirty=new oR,this._tempb=new oR}const BL=yL.prototype;function IL(e,t){mL.call(this,e,t);const n=this;n._hrefHandler=jL(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=jL(n,((e,t)=>{n.handleTooltip(e,t,e.type!==NL)}))}qS(LL,yL,{initialize:function(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:H$(1,1,this._options.type),e&&this._canvas&&(dL(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),BL.initialize.call(this,e,t,n,r,i)},resize:function(e,t,n,r){if(BL.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?PL:i;e.width=t*u,e.height=n*u;for(const e in o)s[e]=o[e];a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||qE("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=(s=n,u=r,l=i,(new oR).set(0,0,u,l).translate(-s[0],-s[1]));var s,u,l;t.save();const c=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,c),t.restore(),o.clear(),this},draw:function(e,t,n){const r=ZP[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),CS(n)?(e.beginPath(),n(e),e.clip()):cP(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const jL=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};qS(IL,mL,{initialize:function(e,t,n){let r=this._svg;return r&&(r.removeEventListener(OL,this._hrefHandler),r.removeEventListener(FL,this._tooltipHandler),r.removeEventListener(NL,this._tooltipHandler)),this._svg=r=e&&cL(e,"svg"),r&&(r.addEventListener(OL,this._hrefHandler),r.addEventListener(FL,this._tooltipHandler),r.addEventListener(NL,this._tooltipHandler)),mL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:jL(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const UL="aria-hidden",qL="aria-label",WL="role",HL="aria-roledescription",VL="graphics-object",GL="graphics-symbol",YL=(e,t,n)=>({[WL]:e,[HL]:t,[qL]:n||void 0}),XL=lA(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),QL={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?tB(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${AT(s)?"discrete":s} scale`+` with ${az(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?tB(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return l=r,(l.length?l[0].toUpperCase()+l.slice(1):l)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+aS(e)}(o)}`+` with ${az(u,s,e)}`;var l}},"title-text":{desc:"title",caption:e=>`Title text '${eB(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${eB(e)}'`}},JL={ariaRole:WL,ariaRoleDescription:HL,description:qL};function KL(e,t){const n=!1===t.aria;if(e(UL,n||void 0),n||null==t.description)for(const t in JL)e(JL[t],void 0);else{const n=t.mark.marktype;e(qL,t.description),e(WL,t.ariaRole||("group"===n?VL:GL)),e(HL,t.ariaRoleDescription||`${n} mark`)}}function ZL(e){return!1===e.aria?{[UL]:!0}:XL[e.role]?null:QL[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return YL(t.role||GL,t.desc,n.description||r(n))}catch(e){return null}}(e,QL[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return YL(n?VL:GL,`${t} mark container`,e.description)}(e)}function eB(e){return SS(e.text).join(" ")}function tB(e){try{return SS(aS(e.items).items[0].text).join(" ")}catch(e){return null}}const nB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function rB(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,nB(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open:function(s,...u){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(const e of u)for(const t in e)o(t,e[t]);return a},close:function(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=nB(e),a),toString:()=>e};return a}const iB=e=>oB(rB(),e)+"";function oB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):oB(e,r)}}return e.close()}const aB={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},sB={fill:"none","stroke-miterlimit":10},uB="http://www.w3.org/2000/xmlns/",lB=vP.xmlns;function cB(e){yL.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const fB=yL.prototype;function dB(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function hB(e,t,n){let r,i,o;if("radial"===t.gradient){let r=fL(e,n++,"pattern",lB);wB(r,{id:uz+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=fL(r,0,"rect",lB),wB(r,{width:1,height:1,fill:`url(${kB()}#${t.id})`}),wB(e=fL(e,n++,"radialGradient",lB),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else wB(e=fL(e,n++,"linearGradient",lB),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=fL(e,r,"stop",lB),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return dL(e,r),n}function pB(e,t,n){let r;return(e=fL(e,n,"clipPath",lB)).setAttribute("id",t.id),t.path?(r=fL(e,0,"path",lB),r.setAttribute("d",t.path)):(r=fL(e,0,"rect",lB),wB(r,{x:0,y:0,width:t.width,height:t.height})),dL(e,1),n+1}function mB(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=lL(o,r,lB),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=lL(o,"path",lB);a.appendChild(t),t.__data__=e;const n=lL(o,"g",lB);a.appendChild(n),n.__data__=e;const r=lL(o,"path",lB);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}qS(cB,yL,{initialize:function(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=fL(e,0,"svg",lB),this._svg.setAttributeNS(uB,"xmlns",lB),this._svg.setAttributeNS(uB,"xmlns:xlink",vP["xmlns:xlink"]),this._svg.setAttribute("version",vP.version),this._svg.setAttribute("class","marks"),dL(e,1),this._root=fL(this._svg,0,"g",lB),wB(this._root,sB),dL(this._svg,1)),this.background(this._bgcolor),fB.initialize.call(this,e,t,n,r,i)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),fB.background.apply(this,arguments)},resize:function(e,t,n,r){return fB.resize.call(this,e,t,n,r),this._svg&&(wB(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=fL(e,0,"rect",lB),wB(n,{width:this._width,height:this._height,fill:t}));const r=iB(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),dL(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=ZP[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,dB(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,dB(n,t)),n._update=t)));return!this._dirtyAll},mark:function(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=ZP[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const l=mB(t,e,n,"g",r);l.setAttribute("class",hL(t));const c=ZL(t);for(const e in c)_B(l,e,c[e]);a||_B(l,"pointer-events",o),_B(l,"clip-path",t.clip?iR(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=mB(e,l,s,i.tag,r);t&&(this._update(i,n,e),a&&function(e,t,n){t=t.lastChild.previousSibling;let r,i=0;QR(n,(n=>{r=e.mark(t,n,r),++i})),dL(t,1+i)}(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):QR(t,f),dL(l,u),l},_update:function(e,t,n){gB=t,yB=t.__values__,KL(bB,n),e.attr(bB,n,this);const r=vB[e.type];r&&r.call(this,e,t,n),gB&&this.style(gB,n)},style:function(e,t){if(null!=t)for(const n in aB){let r="font"===n?VP(t):t[n];if(r===yB[n])continue;const i=aB[n];null==r?e.removeAttribute(i):(lz(r)&&(r=cz(r,this._defs.gradient,kB())),e.setAttribute(i,r+"")),yB[n]=r}},defs:function(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=fL(e,1,"defs",lB)),r=hB(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=fL(e,1,"defs",lB)),r=pB(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):dL(n,r))},_clearDefs:function(){const e=this._defs;e.gradient={},e.clipping={}}});let gB=null,yB=null;const vB={group:function(e,t,n){const r=gB=t.childNodes[2];yB=r.__values__,e.foreground(bB,n,this),yB=t.__values__,gB=t.childNodes[1],e.content(bB,n,this);const i=gB=t.childNodes[0];e.background(bB,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==yB.events&&(_B(r,"pointer-events",o),_B(i,"pointer-events",o),yB.events=o),n.strokeForeground&&n.stroke){const e=n.fill;_B(r,"display",null),this.style(i,n),_B(i,"stroke",null),e&&(n.fill=null),yB=r.__values__,this.style(r,n),e&&(n.fill=e),gB=null}else _B(r,"display","none")},image:function(e,t,n){!1===n.smooth?(xB(t,"image-rendering","optimizeSpeed"),xB(t,"image-rendering","pixelated")):xB(t,"image-rendering",null)},text:function(e,t,n){const r=qP(n);let i,o,a,s;eS(r)?(o=r.map((e=>HP(n,e))),i=o.join("\n"),i!==yB.text&&(dL(t,0),a=t.ownerDocument,s=UP(n),o.forEach(((e,r)=>{const i=lL(a,"tspan",lB);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),yB.text=i)):(o=HP(n,r),o!==yB.text&&(t.textContent=o,yB.text=o)),_B(t,"font-family",VP(n)),_B(t,"font-size",jP(n)+"px"),_B(t,"font-style",n.fontStyle),_B(t,"font-variant",n.fontVariant),_B(t,"font-weight",n.fontWeight)}};function bB(e,t,n){t!==yB[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(gB,e,t,n):_B(gB,e,t),yB[e]=t)}function xB(e,t,n){n!==yB[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),yB[t]=n)}function wB(e,t){for(const n in t)_B(e,n,t[n])}function _B(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function kB(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function EB(e){yL.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}qS(EB,yL,{svg:function(){return this._text},_render:function(e){const t=rB();t.open("svg",zS({},vP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",sB,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){const n=ZP[t.marktype],r=n.tag,i=[KL,n.attr];e.open("g",{class:hL(t),"clip-path":t.clip?iR(this,t,t.group):null},ZL(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=qP(o);if(eS(t)){const n={x:0,dy:UP(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(HP(o,t[r])).close()}else e.text(HP(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),QR(o,(t=>this.mark(e,t))),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):QR(t,o),e.close()},href:function(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr:function(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&function(e,t,n,r,i){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=VP(t),e["font-size"]=jP(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in aB){let r=t[n];const o=aB[n];("transparent"!==r||"fill"!==o&&"stroke"!==o)&&null!=r&&(lz(r)&&(r=cz(r,i.gradient,"")),e[o]=r)}}(i,t,e,r,this._defs),i},defs:function(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:uz+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const SB="canvas",AB="none",CB={Canvas:SB,PNG:"png",SVG:"svg",None:AB},DB={};function MB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(DB[e]=t,this):DB[e]}function FB(e,t,n){const r=[],i=(new oR).union(t),o=e.marktype;return o?NB(e,i,n,r):"group"===o?OB(e,i,n,r):qE("Intersect scene must be mark node or group item.")}function NB(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)OB(i[s],t,n,r);else for(const e=ZP[o].isect;s<a;++s){const n=i[s];$B(n,t,e)&&r.push(n)}}return r}function OB(e,t,n,r){n&&n(e.mark)&&$B(e,t,ZP.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)NB(i[e],t,n,r);t.translate(a,s)}return r}function $B(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}DB.canvas=DB.png={renderer:LL,headless:LL,handler:$L},DB.svg={renderer:cB,headless:EB,handler:IL},DB.none={};const TB=new oR;function zB(e){const t=e.clip;if(CS(t))t(MR(TB.clear()));else{if(!t)return;TB.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(TB)}function RB(e,t,n){return e===t||("path"===n?PB(e,t):e instanceof Date&&t instanceof Date?+e==+t:YS(e)&&YS(t)?Math.abs(e-t)<=1e-9:e&&t&&(tS(e)||tS(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!RB(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function PB(e,t){return RB(yz(e),yz(t))}function LB(){rR(),sz=0}t(FO,"textMetrics",(function(){return zP})),t(FO,"serializeXML",(function(){return iB})),t(FO,"sceneZOrder",(function(){return XR})),t(FO,"sceneVisit",(function(){return QR})),t(FO,"sceneToJSON",(function(){return iL})),t(FO,"scenePickVisit",(function(){return JR})),t(FO,"sceneFromJSON",(function(){return oL})),t(FO,"sceneEqual",(function(){return RB})),t(FO,"resetSVGDefIds",(function(){return LB})),t(FO,"resetSVGClipId",(function(){return rR})),t(FO,"renderModule",(function(){return MB})),t(FO,"point",(function(){return pL})),t(FO,"pathTrail",(function(){return Uz})),t(FO,"pathSymbols",(function(){return Oz})),t(FO,"pathRender",(function(){return Dz})),t(FO,"pathRectangle",(function(){return jz})),t(FO,"pathParse",(function(){return yz})),t(FO,"pathEqual",(function(){return PB})),t(FO,"pathCurves",(function(){return pz})),t(FO,"multiLineOffset",(function(){return WP})),t(FO,"markup",(function(){return rB})),t(FO,"lineHeight",(function(){return UP})),t(FO,"intersectRule",(function(){return BR})),t(FO,"intersectPoint",(function(){return PR})),t(FO,"intersectPath",(function(){return RR})),t(FO,"intersectBoxLine",(function(){return IR})),t(FO,"intersect",(function(){return FB})),t(FO,"fontSize",(function(){return jP})),t(FO,"fontFamily",(function(){return VP})),t(FO,"font",(function(){return GP})),t(FO,"domFind",(function(){return cL})),t(FO,"domCreate",(function(){return lL})),t(FO,"domClear",(function(){return dL})),t(FO,"domChild",(function(){return fL})),t(FO,"boundStroke",(function(){return fR})),t(FO,"boundMark",(function(){return nL})),t(FO,"boundItem",(function(){return eL})),t(FO,"boundContext",(function(){return MR})),t(FO,"boundClip",(function(){return zB})),t(FO,"Scenegraph",(function(){return sL})),t(FO,"SVGStringRenderer",(function(){return EB})),t(FO,"SVGRenderer",(function(){return cB})),t(FO,"SVGHandler",(function(){return IL})),t(FO,"ResourceLoader",(function(){return uR})),t(FO,"Renderer",(function(){return yL})),t(FO,"RenderType",(function(){return CB})),t(FO,"Marks",(function(){return ZP})),t(FO,"Item",(function(){return aR})),t(FO,"Handler",(function(){return mL})),t(FO,"GroupItem",(function(){return sR})),t(FO,"Gradient",(function(){return dz})),t(FO,"CanvasRenderer",(function(){return LL})),t(FO,"CanvasHandler",(function(){return $L})),t(FO,"Bounds",(function(){return oR}));const BB="top",IB="left",jB="right",UB="bottom",qB="start",WB="middle",HB="end",VB="group",GB="axis",YB="title",XB="frame",QB="scope",JB="legend",KB="row-header",ZB="row-footer",eI="row-title",tI="column-header",nI="column-footer",rI="column-title",iI="padding",oI="fit",aI="fit-x",sI="fit-y",uI="none",lI="all",cI="each",fI="flush",dI="column",hI="row";function pI(e){rF.call(this,null,e)}function mI(e,t,n){return t(e.bounds.clear(),e,n)}qS(pI,rF,{transform:function(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=ZP[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=mI(r,a),r.items.forEach((e=>{e.bounds.clear().union(u)}));else if(i===VB||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),u.clear(),r.items.forEach((e=>u.union(mI(e,a)))),r.role){case GB:case JB:case YB:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{u.union(mI(e,a))})),t.visit(t.MOD,(e=>{s=s||u.alignsWith(e.bounds),n.dirty(e),u.union(mI(e,a))})),s&&(u.clear(),r.items.forEach((e=>u.union(e.bounds))));return zB(r),t.modifies("bounds")}});function gI(e){rF.call(this,0,e)}function yI(e){rF.call(this,null,e)}function vI(e){rF.call(this,null,e)}gI.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},qS(gI,rF,{transform:function(e,t){const n=(i=t.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++o)),n.set(this.value=o),t}}),qS(yI,rF,{transform:function(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===VB?sR:aR;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const bI={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&xI(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},xI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),wI=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(xI(o,n=e[r].bounds,t))return!0},_I=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},kI=e=>(e.forEach((e=>e.opacity=1)),e),EI=(e,t)=>e.reflow(t.modified()).modifies("opacity");function SI(e){rF.call(this,null,e)}qS(vI,rF,{transform:function(e,t){const n=bI[e.method]||bI.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(kI(a),t=EI(t,e)),t;if(a=a.filter(_I),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=kI(a),t=EI(t,e),i.length>=3&&wI(i,r)){do{i=n(i,r)}while(i.length>=3&&wI(i,r));i.length<3&&!aS(a).opacity&&(i.length>1&&(aS(i).opacity=0),aS(a).opacity=1)}var s,u,l,c,f;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,u=e.boundOrient,l=+e.boundTolerance,c=s.range(),f=new oR,u===BB||u===UB?f.set(c[0],-1/0,c[1],1/0):f.set(-1/0,c[0],1/0,c[1]),f.expand(l||1),o=e=>f.encloses(e.bounds),a.forEach((e=>{o(e)||(e.opacity=0)})));const d=i[0].mark.bounds.clear();return a.forEach((e=>{e.opacity&&d.union(e.bounds)})),t}}),qS(SI,rF,{transform:function(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const AI=new oR;function CI(e,t,n){return e[t]===n?0:(e[t]=n,1)}function DI(e){var t=e.items[0].orient;return t===IB||t===jB}function MI(e,t,n,r){var i,o,a=t.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,l=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&WP(g),x=0,w=0;switch(AI.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),l){case BB:x=h||0,w=-d,o=Math.max(p,Math.min(m,-v.y1)),v.add(0,-o).add(f,0),g&&FI(e,g,o,y,b,0,-1,v);break;case IB:x=-d,w=h||0,o=Math.max(p,Math.min(m,-v.x1)),v.add(-o,0).add(0,f),g&&FI(e,g,o,y,b,1,-1,v);break;case jB:x=n+d,w=h||0,o=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(o,f),g&&FI(e,g,o,y,b,1,1,v);break;case UB:x=h||0,w=r+d,o=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(f,o),g&&FI(e,g,o,y,0,0,1,v);break;default:x=a.x,w=a.y}return fR(v.translate(x,w),a),CI(a,"x",x+u)|CI(a,"y",w+u)&&(a.bounds=AI,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function FI(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let l=0,c=0;e.dirty(t),o?l=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-l,-c)),e.dirty(t)}s.union(u)}const NI=(e,t)=>Math.floor(Math.min(e,t)),OI=(e,t)=>Math.ceil(Math.max(e,t));function $I(e){return(new oR).set(0,0,e.width||0,e.height||0)}function TI(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function zI(e,t,n){const r=tS(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function RI(e){return e<0?Math.ceil(-e):0}function PI(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=!n.nodirty,m=n.bounds===fI?$I:TI,g=AI.set(0,0,0,0),y=zI(n.align,dI),v=zI(n.align,hI),b=zI(n.padding,dI),x=zI(n.padding,hI),w=n.columns||t.length,_=w<=0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),A=0,C=Array(k),D=Array(_),M=0,F=Array(k),N=Array(k),O=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<_;++i)D[i]=0;for(i=0;i<k;++i)u=t[i],s=O[i]=m(u),u.x=u.x||0,F[i]=0,u.y=u.y||0,N[i]=0,o=i%w,a=~~(i/w),A=Math.max(A,l=Math.ceil(s.x2)),M=Math.max(M,c=Math.ceil(s.y2)),S[o]=Math.max(S[o],l),D[a]=Math.max(D[a],c),E[i]=b+RI(s.x1),C[i]=x+RI(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%w==0&&(E[i]=0),i<w&&(C[i]=0);if(y===cI)for(o=1;o<w;++o){for(h=0,i=o;i<k;i+=w)h<E[i]&&(h=E[i]);for(i=o;i<k;i+=w)E[i]=h+S[o-1]}else if(y===lI){for(h=0,i=0;i<k;++i)i%w&&h<E[i]&&(h=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=h+A)}else for(y=!1,o=1;o<w;++o)for(i=o;i<k;i+=w)E[i]+=S[o-1];if(v===cI)for(a=1;a<_;++a){for(h=0,r=(i=a*w)+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=a*w;i<r;++i)C[i]=h+D[a-1]}else if(v===lI){for(h=0,i=w;i<k;++i)h<C[i]&&(h=C[i]);for(i=w;i<k;++i)C[i]=h+M}else for(v=!1,a=1;a<_;++a)for(r=(i=a*w)+w;i<r;++i)C[i]+=D[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),F[i]+=f-t[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<k;i+=w)d+=C[i],N[i]+=d-t[i].y;if(y&&zI(n.center,dI)&&_>1)for(i=0;i<k;++i)(f=(s=y===lI?A:S[i%w])-O[i].x2-t[i].x-F[i])>0&&(F[i]+=f/2);if(v&&zI(n.center,hI)&&1!==w)for(i=0;i<k;++i)(d=(s=v===lI?M:D[~~(i/w)])-O[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)g.union(O[i].translate(F[i],N[i]));switch(f=zI(n.anchor,"x"),d=zI(n.anchor,"y"),zI(n.anchor,dI)){case HB:f-=g.width();break;case WB:f-=g.width()/2}switch(zI(n.anchor,hI)){case HB:d-=g.height();break;case WB:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=F[i]+=f,u.y+=N[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(F[i],N[i]))),p&&e.dirty(u);return g}function LI(e,t,n){var r,i,o,a,s,u,l,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===VB)switch(t.role){case GB:case JB:case YB:break;case KB:a.rowheaders.push(...n);break;case ZB:a.rowfooters.push(...n);break;case tI:a.colheaders.push(...n);break;case nI:a.colfooters.push(...n);break;case eI:a.rowtitle=n[0];break;case rI:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===fI?BI:II,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const y=PI(e,f,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(u=zI(n.headerBand,hI,null),r=jI(e,c.rowheaders,f,p,m,-zI(h,"rowHeader"),NI,0,d,"x1",0,p,1,u)),c.colheaders&&(u=zI(n.headerBand,dI,null),i=jI(e,c.colheaders,f,p,p,-zI(h,"columnHeader"),NI,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=zI(n.footerBand,hI,null),o=jI(e,c.rowfooters,f,p,m,zI(h,"rowFooter"),OI,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=zI(n.footerBand,dI,null),a=jI(e,c.colfooters,f,p,p,zI(h,"columnFooter"),OI,1,d,"y2",g-p,1,p,u)),c.rowtitle&&(s=zI(n.titleAnchor,hI),l=zI(h,"rowTitle"),l=s===HB?o+l:r-l,u=zI(n.titleBand,hI,.5),UI(e,c.rowtitle,l,0,y,u)),c.coltitle&&(s=zI(n.titleAnchor,dI),l=zI(h,"columnTitle"),l=s===HB?a+l:i-l,u=zI(n.titleBand,dI,.5),UI(e,c.coltitle,l,1,y,u))}function BI(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function II(e,t){return e.bounds[t]}function jI(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,m,g,y,v,b,x,w,_,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=a(E,u(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=c,m=0,y=t.length;m<y;++m,p+=f){for(v=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=E):(w=E,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),v.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),S=a(S,v[l])}return S}function UI(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function qI(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),u=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",qB),c=l===HB?1:l===WB?.5:0,f={align:cI,bounds:s("bounds",fI),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case IB:f.anchor={x:Math.floor(r.x1)-u,column:HB,y:c*(a||r.height()+2*r.y1),row:l};break;case jB:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case BB:f.anchor={y:Math.floor(i.y1)-u,row:HB,x:c*(o||i.width()+2*i.x1),column:l};break;case UB:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:HB};break;case"bottom-left":f.anchor={x:u,y:a-u,row:HB};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:HB,row:HB}}return f}function WI(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case IB:i+=Math.ceil(a.bounds.width())+u;break;case jB:case UB:break;default:o+=a.bounds.height()+u}switch((i||o)&&VI(e,n,i,o),a.orient){case IB:c+=HI(t,n,a,s,1,1);break;case jB:l+=HI(t,n,a,HB,0,0)+u,c+=HI(t,n,a,s,1,1);break;case UB:l+=HI(t,n,a,s,0,0),c+=HI(t,n,a,HB,-1,0,1)+u;break;default:l+=HI(t,n,a,s,0,0)}(l||c)&&VI(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(VI(e,n,-l,0),VI(e,a,-l,0))}else(i||o)&&VI(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),a!==uI&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,fR(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function HI(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!o&&u||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:WP(n);return Math.round(r===qB?c:r===HB?f-d:.5*(l-d))}function VI(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function GI(e){rF.call(this,null,e)}qS(GI,rF,{transform:function(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&LI(n,t,e.layout),function(e,t,n){var r,i,o,a,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new oR).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case GB:(DI(i)?d:h).union(MI(e,i,l,c));break;case YB:r=i;break;case JB:p.push(WI(e,i));break;case XB:case QB:case KB:case ZB:case eI:case tI:case nI:case rI:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(o=e.orient||jB)!==uI&&(t[o]||(t[o]=[])).push(e)}));for(const r in t){const i=t[r];PI(e,i,qI(i,r,n.legends,d,h,l,c))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===oI)switch(t.orient){case IB:case jB:f.add(r.x1,0).add(r.x2,0);break;case BB:case UB:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,u=a.orient,l=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===IB||u===jB?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==VB?u===IB?(m=i.y2,p=i.y1):u===jB?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===IB&&(m=r,p=0),o=l===qB?m:l===HB?p:(m+p)/2,h&&h.text){switch(u){case BB:case UB:b=d.bounds.height()+f;break;case IB:v=d.bounds.width()+f;break;case jB:v=-d.bounds.width()-f}AI.clear().union(h.bounds),AI.translate(v-(h.x||0),b-(h.y||0)),CI(h,"x",v)|CI(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(AI),h.mark.bounds.clear().union(AI),e.dirty(h)),AI.clear().union(h.bounds)}else AI.clear();switch(AI.union(d.bounds),u){case BB:g=o,y=i.y1-AI.height()-c;break;case IB:g=i.x1-AI.width()-c,y=o;break;case jB:g=i.x2+AI.width()+c,y=o;break;case UB:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return CI(a,"x",g)|CI(a,"y",y)&&(AI.translate(g,y),e.dirty(a),a.bounds.clear().union(AI),t.bounds.clear().union(AI),e.dirty(a)),a.bounds}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===iI){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===uI?(l=0,f=0,u=a,c=s):o===oI?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===aI?(u=Math.max(0,a-l-d),s=c+f+h):o===sI?(a=u+l+d,c=Math.max(0,s-f-h)):"pad"===o&&(a=u+l+d,s=c+f+h);e._resizeView(a,s,u,c,[l,f],i.resize)}(e,t,f,n)}(n,t,e)})),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}}),t(MO,"viewlayout",(function(){return GI})),t(MO,"render",(function(){return SI})),t(MO,"overlap",(function(){return vI})),t(MO,"mark",(function(){return yI})),t(MO,"identifier",(function(){return gI})),t(MO,"bound",(function(){return pI}));var YI={};function XI(e){rF.call(this,null,e)}function QI(e){rF.call(this,null,e)}function JI(){return AM({})}function KI(e){rF.call(this,null,e)}function ZI(e){rF.call(this,[],e)}qS(XI,rF,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=HT(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||YT(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?VT(o,e.values,a):GT(o,a);return i&&(r.rem=i),i=u.map(((e,t)=>AM({index:t/(u.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(AM({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),qS(QI,rF,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||JI,o=e.key||EM,a=this.value;return eS(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&qE("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=jS().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,(e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),qS(KI,rF,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(eS(o)){if(!n.changed()&&!o.every((e=>i[e])))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||JE,u=i.enter||JE,l=i.exit||JE,c=(o&&!a?i[o]:s)||JE;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==JE&&c!==s&&(t.visit(t.ADD,(t=>{c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==JE&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),a||c!==JE){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,(t=>{const i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(i,(t=>{(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),qS(ZI,rF,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),u=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||jT,f=e.scale,d=+e.limit,h=HT(f,null==e.count?5:e.count,e.minstep),p=!!e.values||c===jT,m=e.format||ZT(s,f,h,c,e.formatSpecifier,e.formatType,p),g=e.values||KT(f,h);return l&&(u.rem=l),c===jT?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=g.slice(0,d-1),a=!0):l=g,CS(i=e.size)?(e.values||0!==f(l[0])||(l=l.slice(1)),o=l.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=$S(o=i||8),l=l.map(((t,n)=>AM({index:n,label:m(t,n,l),value:t,offset:o,size:i(t,e)}))),a&&(a=g[l.length],l.push(AM({index:l.length,label:"…".concat(g.length-l.length," entries"),value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=f.domain(),r=zT(f,n[0],aS(n)),g.length<3&&!e.values&&n[0]!==aS(n)&&(g=[n[0],aS(n)]),l=g.map(((e,t)=>AM({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+aS(t),o=i-r;if(e.type===oT){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(f),l=g.map(((e,t)=>AM({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),u.source=l,u.add=l,this.value=l,u}});const ej=e=>e.source.x,tj=e=>e.source.y,nj=e=>e.target.x,rj=e=>e.target.y;function ij(e){rF.call(this,{},e)}ij.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},qS(ij,rF,{transform:function(e,t){var n=e.sourceX||ej,r=e.sourceY||tj,i=e.targetX||nj,o=e.targetY||rj,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=uj.get(u+"-"+s)||uj.get(u);return l||qE("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[a]=l(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)}});const oj=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,aj=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},sj=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},uj=jS({line:oj,"line-radial":(e,t,n,r)=>oj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:aj,"arc-radial":(e,t,n,r)=>aj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:sj,"curve-radial":(e,t,n,r)=>sj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function lj(e){rF.call(this,null,e)}lj.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},qS(lj,rF,{transform:function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],u=e.field||XE,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,m=(c-l)/Bd(d),g=Ld(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[a]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(o)}});function cj(e){return ST(e)&&e!==tT}const fj=lA(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function dj(e){rF.call(this,null,e),this.modified(!0)}function hj(e,t,n){DT(e)&&(Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&n.warn("Log scale domain includes zero: "+iA(t)));return t}function pj(e,t,n){return CS(e)&&(t||n)?OT(e,mj(t||[0,1],n)):e}function mj(e,t){return t?e.slice().reverse():e}function gj(e){rF.call(this,null,e)}qS(dj,rF,{transform:function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===tT)return"sequential-linear";(function(e){const t=e.type;return ST(t)&&t!==Z$&&t!==eT&&(e.scheme||e.range&&e.range.length&&e.range.every(QS))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||Y$).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=_T(i)()),e)if(!fj[i]){if("padding"===i&&cj(r.type))continue;CS(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==uT&&e!==sT&&qE("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===sT?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*G$(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;eS(t.scheme)?r=$T(t.scheme,t.interpolate,t.interpolateGamma):(r=IT(t.scheme.toLowerCase()))||qE("Unrecognized scheme name: ".concat(t.scheme));return n=e===oT?n+1:e===lT?n-1:e===rT||e===iT?+t.schemeCount||5:n,MT(e)?pj(r,i,t.reverse):CS(r)?TT(pj(r,i),n):e===aT?r:r.slice(0,n)}(r,t,n),CS(o))){if(e.interpolator)return e.interpolator(o);qE("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&MT(r))return e.interpolator($T(mj(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(RT(t.interpolate,t.interpolateGamma)):CS(e.round)?e.round(i):CS(e.rangeRound)&&e.interpolate(i?xp:yp);o&&e.range(mj(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!eS(r)){const t=e.domain(),n=t[0],i=aS(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||qE("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=Ld(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===lT&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(hj(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===Y$||t===Q$||t===J$)}(e);if(!a)return 0;cj(s)&&t.padding&&a[0]!==aS(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(aS(n)-n[0]),s=a/(a-2*r),u=e===X$?xS(t,null,s):e===J$?wS(t,null,s,.5):e===Q$?wS(t,null,s,i||1):e===K$?_S(t,null,s,o||1):bS(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));if((u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}e.domain(hj(s,a,n)),s===aT&&e.unknown(t.domainImplicit?Mm:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&HT(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),qS(gj,rF,{transform:function(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(FM(e.sort)),this.modified(n),t}});const yj="zero",vj="center",bj="normalize",xj=["y0","y1"];function wj(e){rF.call(this,null,e)}function _j(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function kj(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(o=e[l])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function Ej(e,t,n,r,i){for(var o,a,s=0,u=0,l=e.length,c=0;c<l;++c)(o=+n(a=e[c]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}wj.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:yj,values:[yj,vj,bj]},{name:"as",type:"string",array:!0,length:2,default:xj}]},qS(wj,rF,{transform:function(e,t){var n,r,i,o,a=e.as||xj,s=a[0],u=a[1],l=FM(e.sort),c=e.field||XE,f=e.offset===vj?_j:e.offset===bj?kj:Ej;for(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(o=0,f=0,a=(c=h[l]).length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,u);return t.reflow(e.modified()).modifies(a)}}),t(YI,"stack",(function(){return wj})),t(YI,"sortitems",(function(){return gj})),t(YI,"scale",(function(){return dj})),t(YI,"pie",(function(){return lj})),t(YI,"linkpath",(function(){return ij})),t(YI,"legendentries",(function(){return ZI})),t(YI,"encode",(function(){return KI})),t(YI,"datajoin",(function(){return QI})),t(YI,"axisticks",(function(){return XI}));var Sj={},Aj=1e-6,Cj=1e-12,Dj=Math.PI,Mj=Dj/2,Fj=Dj/4,Nj=2*Dj,Oj=180/Dj,$j=Dj/180,Tj=Math.abs,zj=Math.atan,Rj=Math.atan2,Pj=Math.cos,Lj=Math.ceil,Bj=Math.exp,Ij=(Math.floor,Math.hypot),jj=Math.log,Uj=Math.pow,qj=Math.sin,Wj=Math.sign||function(e){return e>0?1:e<0?-1:0},Hj=Math.sqrt,Vj=Math.tan;function Gj(e){return e>1?0:e<-1?Dj:Math.acos(e)}function Yj(e){return e>1?Mj:e<-1?-Mj:Math.asin(e)}function Xj(){}function Qj(e,t){e&&Kj.hasOwnProperty(e.type)&&Kj[e.type](e,t)}var Jj={Feature:function(e,t){Qj(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Qj(n[r].geometry,t)}},Kj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Zj(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Zj(n[r],t,0)},Polygon:function(e,t){eU(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)eU(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Qj(n[r],t)}};function Zj(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function eU(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Zj(e[n],t,1);t.polygonEnd()}var tU,nU,rU,iU,oU,aU=function(e,t){e&&Jj.hasOwnProperty(e.type)?Jj[e.type](e,t):Qj(e,t)},sU=new _d,uU=new _d,lU={point:Xj,lineStart:Xj,lineEnd:Xj,polygonStart:function(){sU=new _d,lU.lineStart=cU,lU.lineEnd=fU},polygonEnd:function(){var e=+sU;uU.add(e<0?Nj+e:e),this.lineStart=this.lineEnd=this.point=Xj},sphere:function(){uU.add(Nj)}};function cU(){lU.point=dU}function fU(){hU(tU,nU)}function dU(e,t){lU.point=hU,tU=e,nU=t,rU=e*=$j,iU=Pj(t=(t*=$j)/2+Fj),oU=qj(t)}function hU(e,t){var n=(e*=$j)-rU,r=n>=0?1:-1,i=r*n,o=Pj(t=(t*=$j)/2+Fj),a=qj(t),s=oU*a,u=iU*o+s*Pj(i),l=s*r*qj(i);sU.add(Rj(l,u)),rU=e,iU=o,oU=a}var pU,mU,gU,yU,vU,bU,xU,wU,_U,kU,EU;function SU(e){return[Rj(e[1],e[0]),Yj(e[2])]}function AU(e){var t=e[0],n=e[1],r=Pj(n);return[r*Pj(t),r*qj(t),qj(n)]}function CU(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function DU(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function MU(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function FU(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function NU(e){var t=Hj(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var OU={point:$U,lineStart:zU,lineEnd:RU,polygonStart:function(){OU.point=PU,OU.lineStart=LU,OU.lineEnd=BU,_U=new _d,lU.polygonStart()},polygonEnd:function(){lU.polygonEnd(),OU.point=$U,OU.lineStart=zU,OU.lineEnd=RU,sU<0?(pU=-(gU=180),mU=-(yU=90)):_U>Aj?yU=90:_U<-1e-6&&(mU=-90),EU[0]=pU,EU[1]=gU},sphere:function(){pU=-(gU=180),mU=-(yU=90)}};function $U(e,t){kU.push(EU=[pU=e,gU=e]),t<mU&&(mU=t),t>yU&&(yU=t)}function TU(e,t){var n=AU([e*$j,t*$j]);if(wU){var r=DU(wU,n),i=DU([r[1],-r[0],0],r);NU(i),i=SU(i);var o,a=e-vU,s=a>0?1:-1,u=i[0]*Oj*s,l=Tj(a)>180;l^(s*vU<u&&u<s*e)?(o=i[1]*Oj)>yU&&(yU=o):l^(s*vU<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*Oj)<mU&&(mU=o):(t<mU&&(mU=t),t>yU&&(yU=t)),l?e<vU?IU(pU,e)>IU(pU,gU)&&(gU=e):IU(e,gU)>IU(pU,gU)&&(pU=e):gU>=pU?(e<pU&&(pU=e),e>gU&&(gU=e)):e>vU?IU(pU,e)>IU(pU,gU)&&(gU=e):IU(e,gU)>IU(pU,gU)&&(pU=e)}else kU.push(EU=[pU=e,gU=e]);t<mU&&(mU=t),t>yU&&(yU=t),wU=n,vU=e}function zU(){OU.point=TU}function RU(){EU[0]=pU,EU[1]=gU,OU.point=$U,wU=null}function PU(e,t){if(wU){var n=e-vU;_U.add(Tj(n)>180?n+(n>0?360:-360):n)}else bU=e,xU=t;lU.point(e,t),TU(e,t)}function LU(){lU.lineStart()}function BU(){PU(bU,xU),lU.lineEnd(),Tj(_U)>Aj&&(pU=-(gU=180)),EU[0]=pU,EU[1]=gU,wU=null}function IU(e,t){return(t-=e)<0?t+360:t}function jU(e,t){return e[0]-t[0]}function UU(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var qU,WU,HU,VU,GU,YU,XU,QU,JU,KU,ZU,eq,tq,nq,rq,iq,oq={sphere:Xj,point:aq,lineStart:uq,lineEnd:fq,polygonStart:function(){oq.lineStart=dq,oq.lineEnd=hq},polygonEnd:function(){oq.lineStart=uq,oq.lineEnd=fq}};function aq(e,t){e*=$j;var n=Pj(t*=$j);sq(n*Pj(e),n*qj(e),qj(t))}function sq(e,t,n){++qU,HU+=(e-HU)/qU,VU+=(t-VU)/qU,GU+=(n-GU)/qU}function uq(){oq.point=lq}function lq(e,t){e*=$j;var n=Pj(t*=$j);nq=n*Pj(e),rq=n*qj(e),iq=qj(t),oq.point=cq,sq(nq,rq,iq)}function cq(e,t){e*=$j;var n=Pj(t*=$j),r=n*Pj(e),i=n*qj(e),o=qj(t),a=Rj(Hj((a=rq*o-iq*i)*a+(a=iq*r-nq*o)*a+(a=nq*i-rq*r)*a),nq*r+rq*i+iq*o);WU+=a,YU+=a*(nq+(nq=r)),XU+=a*(rq+(rq=i)),QU+=a*(iq+(iq=o)),sq(nq,rq,iq)}function fq(){oq.point=aq}function dq(){oq.point=pq}function hq(){mq(eq,tq),oq.point=aq}function pq(e,t){eq=e,tq=t,e*=$j,t*=$j,oq.point=mq;var n=Pj(t);nq=n*Pj(e),rq=n*qj(e),iq=qj(t),sq(nq,rq,iq)}function mq(e,t){e*=$j;var n=Pj(t*=$j),r=n*Pj(e),i=n*qj(e),o=qj(t),a=rq*o-iq*i,s=iq*r-nq*o,u=nq*i-rq*r,l=Ij(a,s,u),c=Yj(l),f=l&&-c/l;JU.add(f*a),KU.add(f*s),ZU.add(f*u),WU+=c,YU+=c*(nq+(nq=r)),XU+=c*(rq+(rq=i)),QU+=c*(iq+(iq=o)),sq(nq,rq,iq)}function gq(e,t,n){var r=Ld(e,t-Aj,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function yq(e,t,n){var r=Ld(e,t-Aj,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}var vq,bq,xq,wq,_q=e=>e,kq=new _d,Eq=new _d,Sq={point:Xj,lineStart:Xj,lineEnd:Xj,polygonStart:function(){Sq.lineStart=Aq,Sq.lineEnd=Mq},polygonEnd:function(){Sq.lineStart=Sq.lineEnd=Sq.point=Xj,kq.add(Tj(Eq)),Eq=new _d},result:function(){var e=kq/2;return kq=new _d,e}};function Aq(){Sq.point=Cq}function Cq(e,t){Sq.point=Dq,vq=xq=e,bq=wq=t}function Dq(e,t){Eq.add(wq*e-xq*t),xq=e,wq=t}function Mq(){Dq(vq,bq)}var Fq=1/0,Nq=Fq,Oq=-Fq,$q=Oq,Tq={point:function(e,t){e<Fq&&(Fq=e);e>Oq&&(Oq=e);t<Nq&&(Nq=t);t>$q&&($q=t)},lineStart:Xj,lineEnd:Xj,polygonStart:Xj,polygonEnd:Xj,result:function(){var e=[[Fq,Nq],[Oq,$q]];return Oq=$q=-(Nq=Fq=1/0),e}};var zq,Rq,Pq,Lq,Bq=0,Iq=0,jq=0,Uq=0,qq=0,Wq=0,Hq=0,Vq=0,Gq=0,Yq={point:Xq,lineStart:Qq,lineEnd:Zq,polygonStart:function(){Yq.lineStart=eW,Yq.lineEnd=tW},polygonEnd:function(){Yq.point=Xq,Yq.lineStart=Qq,Yq.lineEnd=Zq},result:function(){var e=Gq?[Hq/Gq,Vq/Gq]:Wq?[Uq/Wq,qq/Wq]:jq?[Bq/jq,Iq/jq]:[NaN,NaN];return Bq=Iq=jq=Uq=qq=Wq=Hq=Vq=Gq=0,e}};function Xq(e,t){Bq+=e,Iq+=t,++jq}function Qq(){Yq.point=Jq}function Jq(e,t){Yq.point=Kq,Xq(Pq=e,Lq=t)}function Kq(e,t){var n=e-Pq,r=t-Lq,i=Hj(n*n+r*r);Uq+=i*(Pq+e)/2,qq+=i*(Lq+t)/2,Wq+=i,Xq(Pq=e,Lq=t)}function Zq(){Yq.point=Xq}function eW(){Yq.point=nW}function tW(){rW(zq,Rq)}function nW(e,t){Yq.point=rW,Xq(zq=Pq=e,Rq=Lq=t)}function rW(e,t){var n=e-Pq,r=t-Lq,i=Hj(n*n+r*r);Uq+=i*(Pq+e)/2,qq+=i*(Lq+t)/2,Wq+=i,Hq+=(i=Lq*e-Pq*t)*(Pq+e),Vq+=i*(Lq+t),Gq+=3*i,Xq(Pq=e,Lq=t)}function iW(e){this._context=e}iW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Nj)}},result:Xj};var oW,aW,sW,uW,lW,cW=new _d,fW={point:Xj,lineStart:function(){fW.point=dW},lineEnd:function(){oW&&hW(aW,sW),fW.point=Xj},polygonStart:function(){oW=!0},polygonEnd:function(){oW=null},result:function(){var e=+cW;return cW=new _d,e}};function dW(e,t){fW.point=hW,aW=uW=e,sW=lW=t}function hW(e,t){uW-=e,lW-=t,cW.add(Hj(uW*uW+lW*lW)),uW=e,lW=t}function pW(){this._string=[]}function mW(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}pW.prototype={_radius:4.5,_circle:mW(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=mW(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var gW=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),aU(e,n(r))),r.result()}return o.area=function(e){return aU(e,n(Sq)),Sq.result()},o.measure=function(e){return aU(e,n(fW)),fW.result()},o.bounds=function(e){return aU(e,n(Tq)),Tq.result()},o.centroid=function(e){return aU(e,n(Yq)),Yq.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,_q):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new pW):new iW(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},yW=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Xj,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},vW=function(e,t){return Tj(e[0]-t[0])<Aj&&Tj(e[1]-t[1])<Aj};function bW(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var xW=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(vW(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new bW(r,e,null,!0)),u.push(n.o=new bW(r,null,n,!1)),s.push(n=new bW(a,e,null,!1)),u.push(n.o=new bW(a,null,n,!0))}})),s.length){for(u.sort(t),wW(s),wW(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function wW(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function _W(e){return Tj(e[0])<=Dj?e[0]:Wj(e[0])*((Tj(e[0])+Dj)%Nj-Dj)}var kW=function(e,t,n,r){return function(i){var o,a,s,u=t(i),l=yW(),c=t(l),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=Pd(a);var e=function(e,t){var n=_W(t),r=t[1],i=qj(r),o=[qj(n),-Pj(n),0],a=0,s=0,u=new _d;1===i?r=Mj+Aj:-1===i&&(r=-Mj-Aj);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=_W(h),m=h[1]/2+Fj,g=qj(m),y=Pj(m),v=0;v<d;++v,p=x,g=_,y=k,h=b){var b=f[v],x=_W(b),w=b[1]/2+Fj,_=qj(w),k=Pj(w),E=x-p,S=E>=0?1:-1,A=S*E,C=A>Dj,D=g*_;if(u.add(Rj(D*S*qj(A),y*k+D*Pj(A))),a+=C?E+S*Nj:E,C^p>=n^x>=n){var M=DU(AU(h),AU(b));NU(M);var F=DU(o,M);NU(F);var N=(C^E>=0?-1:1)*Yj(F[2]);(r>N||r===N&&(M[0]||M[1]))&&(s+=C^E>=0?1:-1)}}return(a<-1e-6||a<Aj&&u<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),xW(a,SW,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(EW))}return d}};function EW(e){return e.length>1}function SW(e,t){return((e=e.x)[0]<0?e[1]-Mj-Aj:Mj-e[1])-((t=t.x)[0]<0?t[1]-Mj-Aj:Mj-t[1])}var AW=kW((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Dj:-Dj,u=Tj(o-n);Tj(u-Dj)<Aj?(e.point(n,r=(r+a)/2>0?Mj:-Mj),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Dj&&(Tj(n-i)<Aj&&(n-=i*Aj),Tj(o-s)<Aj&&(o-=s*Aj),r=function(e,t,n,r){var i,o,a=qj(e-n);return Tj(a)>Aj?zj((qj(t)*(o=Pj(r))*qj(n)-qj(r)*(i=Pj(t))*qj(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Mj,r.point(-Dj,i),r.point(0,i),r.point(Dj,i),r.point(Dj,0),r.point(Dj,-i),r.point(0,-i),r.point(-Dj,-i),r.point(-Dj,0),r.point(-Dj,i);else if(Tj(e[0]-t[0])>Aj){var o=e[0]<t[0]?Dj:-Dj;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-Dj,-Mj]);var CW=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function DW(e,t){return[Tj(e)>Dj?e+Math.round(-e/Nj)*Nj:e,t]}function MW(e,t,n){return(e%=Nj)?t||n?CW(NW(e),OW(t,n)):NW(e):t||n?OW(t,n):DW}function FW(e){return function(t,n){return[(t+=e)>Dj?t-Nj:t<-Dj?t+Nj:t,n]}}function NW(e){var t=FW(e);return t.invert=FW(-e),t}function OW(e,t){var n=Pj(e),r=qj(e),i=Pj(t),o=qj(t);function a(e,t){var a=Pj(t),s=Pj(e)*a,u=qj(e)*a,l=qj(t),c=l*n+s*r;return[Rj(u*i-c*o,s*n-l*r),Yj(c*i+u*o)]}return a.invert=function(e,t){var a=Pj(t),s=Pj(e)*a,u=qj(e)*a,l=qj(t),c=l*i-u*o;return[Rj(u*i+l*o,s*n+c*r),Yj(c*n-s*r)]},a}DW.invert=DW;function $W(e,t){(t=AU(t))[0]-=e,NU(t);var n=Gj(-t[1]);return((-t[2]<0?-n:n)+Nj-Aj)%Nj}var TW=function(e){var t=Pj(e),n=6*$j,r=t>0,i=Tj(t)>Aj;function o(e,n){return Pj(e)*Pj(n)>t}function a(e,n,r){var i=[1,0,0],o=DU(AU(e),AU(n)),a=CU(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=DU(i,o),d=FU(i,l);MU(d,FU(o,c));var h=f,p=CU(d,h),m=CU(h,h),g=p*p-m*(CU(d,d)-1);if(!(g<0)){var y=Hj(g),v=FU(h,(-p-y)/m);if(MU(v,d),v=SU(v),!r)return v;var b,x=e[0],w=n[0],_=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=Tj(E-Dj)<Aj;if(!S&&k<_&&(b=_,_=k,k=b),S||E<Aj?S?_+k>0^v[1]<(Tj(v[0]-x)<Aj?_:k):_<=v[1]&&v[1]<=k:E>Dj^(x<=v[0]&&v[0]<=w)){var A=FU(h,(-p+y)/m);return MU(A,d),[v,SU(A)]}}}function s(t,n){var i=r?e:Dj-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return kW(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?Dj:-Dj),d):0;if(!t&&(l=u=m)&&e.lineStart(),m!==u&&(!(h=a(t,p))||vW(t,h)||vW(p,h))&&(p[2]=1),m!==u)c=0,m?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var y;g&n||!(y=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&vW(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=Pj(t),s=qj(t),u=r*n;null==i?(i=t+r*Nj,o=t-u/2):(i=$W(a,i),o=$W(a,o),(r>0?i<o:i>o)&&(i+=r*Nj));for(var l,c=i;r>0?c>o:c<o;c-=u)l=SU([a,-s*Pj(c),-s*qj(c)]),e.point(l[0],l[1])}}(o,e,n,i,t,r)}),r?[0,-e]:[-Dj,e-Dj])},zW=1e9,RW=-1e9;function PW(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return Tj(r[0]-e)<Aj?i>0?0:3:Tj(r[0]-n)<Aj?i>0?2:1:Tj(r[1]-t)<Aj?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,m,g,y,v,b=a,x=yW(),w={point:_,lineStart:function(){w.point=k,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=Pd(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&xW(u,s,t,o,a),a.polygonEnd());b=a,u=l=c=null}};function _(e,t){i(e,t)&&b.point(e,t)}function k(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,d=a,h=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var u=[p=Math.max(RW,Math.min(zW,p)),m=Math.max(RW,Math.min(zW,m))],x=[o=Math.max(RW,Math.min(zW,o)),a=Math.max(RW,Math.min(zW,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),v=!1)}p=o,m=a,g=s}return w}}function LW(e){return function(t){var n=new BW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function BW(){}function IW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),aU(n,e.stream(Tq)),t(Tq.result()),null!=r&&e.clipExtent(r),e}function jW(e,t,n){return IW(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function UW(e,t,n){return jW(e,[[0,0],t],n)}function qW(e,t,n){return IW(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function WW(e,t,n){return IW(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}BW.prototype={constructor:BW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var HW=Pj(30*$j),VW=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=a+d,w=s+h,_=u+p,k=Hj(x*x+w*w+_*_),E=Yj(_/=k),S=Tj(Tj(_)-1)<Aj||Tj(o-f)<Aj?(o+f)/2:Rj(w,x),A=e(S,E),C=A[0],D=A[1],M=C-r,F=D-i,N=v*M-y*F;(N*N/b>t||Tj((y*M+v*F)/b-.5)>.3||a*d+s*h+u*p<HW)&&(n(r,i,o,a,s,u,C,D,S,x/=k,w/=k,_,m,g),g.point(C,D),n(C,D,S,x,w,_,l,c,f,d,h,p,m,g))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=AU([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],16,t),t.point(c,f)}function b(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=_}function w(e,t){v(r=e,t),i=c,o=f,a=d,s=h,u=p,m.point=v}function _(){n(c,f,l,d,h,p,i,o,r,a,s,u,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return LW({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var GW=LW({point:function(e,t){this.stream.point(e*$j,t*$j)}});function YW(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=Pj(o),s=qj(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(e,o){return[u*(e*=r)-l*(o*=i)+t,n-l*e-u*o]}return p.invert=function(e,t){return[r*(c*e-f*t+d),i*(h-f*e-c*t)]},p}function XW(e){return QW((function(){return e}))()}function QW(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,m=0,g=0,y=0,v=0,b=0,x=1,w=1,_=null,k=AW,E=null,S=_q,A=.5;function C(e){return u(e[0]*$j,e[1]*$j)}function D(e){return(e=u.invert(e[0],e[1]))&&[e[0]*Oj,e[1]*Oj]}function M(){var e=YW(f,0,0,x,w,b).apply(null,t(p,m)),r=YW(f,d-e[0],h-e[1],x,w,b);return n=MW(g,y,v),s=CW(t,r),u=CW(n,s),a=VW(s,A),F()}function F(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=GW(function(e){return LW({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(c=e)))))},C.preclip=function(e){return arguments.length?(k=e,_=void 0,F()):k},C.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,F()):S},C.clipAngle=function(e){return arguments.length?(k=+e?TW(_=e*$j):(_=null,AW),F()):_*Oj},C.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,_q):PW(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),F()):null==E?null:[[E,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,M()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],M()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*$j,m=e[1]%360*$j,M()):[p*Oj,m*Oj]},C.rotate=function(e){return arguments.length?(g=e[0]%360*$j,y=e[1]%360*$j,v=e.length>2?e[2]%360*$j:0,M()):[g*Oj,y*Oj,v*Oj]},C.angle=function(e){return arguments.length?(b=e%360*$j,M()):b*Oj},C.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},C.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},C.precision=function(e){return arguments.length?(a=VW(s,A=e*e),F()):Hj(A)},C.fitExtent=function(e,t){return jW(C,e,t)},C.fitSize=function(e,t){return UW(C,e,t)},C.fitWidth=function(e,t){return qW(C,e,t)},C.fitHeight=function(e,t){return WW(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&D,M()}}function JW(e){var t=0,n=Dj/3,r=QW(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*$j,n=e[1]*$j):[t*Oj,n*Oj]},i}function KW(e,t){var n=qj(e),r=(n+qj(t))/2;if(Tj(r)<Aj)return function(e){var t=Pj(e);function n(e,n){return[e*t,qj(n)/t]}return n.invert=function(e,n){return[e/t,Yj(n*t)]},n}(e);var i=1+n*(2*r-n),o=Hj(i)/r;function a(e,t){var n=Hj(i-2*r*qj(t))/r;return[n*qj(e*=r),o-n*Pj(e)]}return a.invert=function(e,t){var n=o-t,a=Rj(e,Tj(n))*Wj(n);return n*r<0&&(a-=Dj*Wj(e)*Wj(n)),[a/r,Yj((i-(e*e+n*n)*r*r)/(2*r))]},a}var ZW=function(){return JW(KW).scale(155.424).center([0,33.6442])},eH=function(){return ZW().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function tH(e){return function(t,n){var r=Pj(t),i=Pj(n),o=e(r*i);return o===1/0?[2,0]:[o*i*qj(t),o*qj(n)]}}function nH(e){return function(t,n){var r=Hj(t*t+n*n),i=e(r),o=qj(i),a=Pj(i);return[Rj(t*o,r*a),Yj(r&&n*o/r)]}}var rH=tH((function(e){return Hj(2/(1+e))}));rH.invert=nH((function(e){return 2*Yj(e/2)}));var iH=tH((function(e){return(e=Gj(e))&&e/qj(e)}));iH.invert=nH((function(e){return e}));function oH(e,t){return[e,jj(Vj((Mj+t)/2))]}oH.invert=function(e,t){return[e,2*zj(Bj(t))-Mj]};function aH(e){var t,n,r,i=XW(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Dj*a(),s=i(function(e){function t(t){return(t=e(t[0]*$j,t[1]*$j))[0]*=Oj,t[1]*=Oj,t}return e=MW(e[0]*$j,e[1]*$j,e.length>2?e[2]*$j:0),t.invert=function(t){return(t=e.invert(t[0]*$j,t[1]*$j))[0]*=Oj,t[1]*=Oj,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===oH?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function sH(e){return Vj((Mj+e)/2)}function uH(e,t){var n=Pj(e),r=e===t?qj(e):jj(n/Pj(t))/jj(sH(t)/sH(e)),i=n*Uj(sH(e),r)/r;if(!r)return oH;function o(e,t){i>0?t<-Mj+Aj&&(t=-Mj+Aj):t>Mj-Aj&&(t=Mj-Aj);var n=i/Uj(sH(t),r);return[n*qj(r*e),i-n*Pj(r*e)]}return o.invert=function(e,t){var n=i-t,o=Wj(r)*Hj(e*e+n*n),a=Rj(e,Tj(n))*Wj(n);return n*r<0&&(a-=Dj*Wj(e)*Wj(n)),[a/r,2*zj(Uj(i/o,1/r))-Mj]},o}function lH(e,t){return[e,t]}lH.invert=lH;function cH(e,t){var n=Pj(e),r=e===t?qj(e):(n-Pj(t))/(t-e),i=n/r+e;if(Tj(r)<Aj)return lH;function o(e,t){var n=i-t,o=r*e;return[n*qj(o),i-n*Pj(o)]}return o.invert=function(e,t){var n=i-t,o=Rj(e,Tj(n))*Wj(n);return n*r<0&&(o-=Dj*Wj(e)*Wj(n)),[o/r,i-Wj(r)*Hj(e*e+n*n)]},o}var fH=1.340264,dH=-.081106,hH=893e-6,pH=.003796,mH=Hj(3)/2;function gH(e,t){var n=Yj(mH*qj(t)),r=n*n,i=r*r*r;return[e*Pj(n)/(mH*(fH+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(fH+dH*r+i*(hH+pH*r))]}gH.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(fH+dH*i+o*(hH+pH*i))-t)/(fH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i)))*r)*i*i,!(Tj(n)<Cj));++a);return[mH*e*(fH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))/Pj(r),Yj(qj(r)/mH)]};function yH(e,t){var n=Pj(t),r=Pj(e)*n;return[n*qj(e)/r,qj(t)/r]}yH.invert=nH(zj);function vH(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}vH.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Tj(n)>Aj&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function bH(e,t){return[Pj(t)*qj(e),qj(t)]}bH.invert=nH(Yj);function xH(e,t){var n=Pj(t),r=1+Pj(e)*n;return[n*qj(e)/r,qj(t)/r]}xH.invert=nH((function(e){return 2*zj(e)}));function wH(e,t){return[jj(Vj((Mj+t)/2)),-e]}wH.invert=function(e,t){return[-t,2*zj(Bj(e))-Mj]};var _H=Math.abs,kH=(Math.atan,Math.atan2,Math.ceil,Math.cos),EH=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),SH=(Math.tan,Math.PI),AH=SH/2,CH=(Math.SQRT1_2,MH(2));MH(SH);function DH(e){return e>1?AH:e<-1?-AH:Math.asin(e)}function MH(e){return e>0?Math.sqrt(e):0}function FH(e,t){var n,r=e*EH(t),i=30;do{t-=n=(t+EH(t)-r)/(1+kH(t))}while(_H(n)>1e-6&&--i>0);return t/2}var NH=function(e,t,n){function r(r,i){return[e*r*kH(i=FH(n,i)),t*EH(i)]}return r.invert=function(r,i){return i=DH(i/t),[r/(e*kH(i)),DH((2*i+EH(2*i))/n)]},r}(CH/AH,CH,SH);const OH=gW(),$H=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function TH(e,t){return function n(){const r=t();return r.type=e,r.path=gW().projection(r),r.copy=r.copy||function(){const e=n();return $H.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function zH(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(PH[e]=TH(e,t),this):PH[e]||null}function RH(e){return e&&e.path||OH}const PH={albers:eH,albersusa:function(){var e,t,n,r,i,o,a=eH(),s=ZW().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=ZW().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+Aj,c+.12*t+Aj],[o-.214*t-Aj,c+.234*t-Aj]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+Aj,c+.166*t+Aj],[o-.115*t-Aj,c+.234*t-Aj]]).stream(l),f()},c.fitExtent=function(e,t){return jW(c,e,t)},c.fitSize=function(e,t){return UW(c,e,t)},c.fitWidth=function(e,t){return qW(c,e,t)},c.fitHeight=function(e,t){return WW(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return XW(rH).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return XW(iH).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return JW(uH).scale(109.5).parallels([30,30])},conicequalarea:ZW,conicequidistant:function(){return JW(cH).scale(131.154).center([0,13.9389])},equalEarth:function(){return XW(gH).scale(177.158)},equirectangular:function(){return XW(lH).scale(152.63)},gnomonic:function(){return XW(yH).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,m=1,g=LW({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=_q;function v(){return p=s*c,m=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+u,i+l]}return b.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/p,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,h=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=r=i=null,_q):PW(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(u=+e[0],l=+e[1],v()):[u,l]},b.angle=function(n){return arguments.length?(t=qj(d=n%360*$j),e=Pj(d),v()):d*Oj},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,v()):f<0},b.fitExtent=function(e,t){return jW(b,e,t)},b.fitSize=function(e,t){return UW(b,e,t)},b.fitWidth=function(e,t){return qW(b,e,t)},b.fitHeight=function(e,t){return WW(b,e,t)},b},mercator:function(){return aH(oH).scale(961/Nj)},mollweide:function(){return XW(NH).scale(169.529)},naturalEarth1:function(){return XW(vH).scale(175.295)},orthographic:function(){return XW(bH).scale(249.5).clipAngle(90.000001)},stereographic:function(){return XW(xH).scale(250).clipAngle(142)},transversemercator:function(){var e=aH(wH),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in PH)zH(e,PH[e]);function LH(){}const BH=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function IH(){var e=1,t=1,n=a;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,BH[l<<1].forEach(p);for(;++a<e-1;)u=l,l=n[a+1]>=r,BH[u|l<<1].forEach(p);BH[l<<0].forEach(p);for(;++s<t-1;){for(a=-1,l=n[s*e+e]>=r,c=n[s*e]>=r,BH[l<<1|c<<2].forEach(p);++a<e-1;)u=l,l=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,BH[u|l<<1|c<<2|f<<3].forEach(p);BH[l|c<<3].forEach(p)}a=-1,c=n[s*e]>=r,BH[c<<2].forEach(p);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,BH[c<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],l=o(r),c=o(u);(t=h[l])?(n=d[c])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(u),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=c]=t):(t=d[c])?(n=h[l])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(u),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=l]=t):d[l]=h[c]={start:l,end:c,ring:[r,u]}}BH[c<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==jH((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(o=r[l*e+u-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&l===s&&(o=r[(l-1)*e+u],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||qE("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:LH,r):n===a},r}function jH(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=UH(e,t[r]))return n;return 0}function UH(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(qH(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function qH(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function WH(e,t,n){return function(r){var i=RS(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?Md(o,a,e):s/(e+1);return Ld(o+u,a,u)}}function HH(e){rF.call(this,null,e)}function VH(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(l)}function l(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function GH(e,t,n){const r=e>=0?e:dF(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function YH(e){return CS(e)?e:$S(+e)}function XH(){var e=e=>e[0],t=e=>e[1],n=XE,r=[-1,-1],i=960,o=500,a=2;function s(s,u){const l=GH(r[0],s,e)>>a,c=GH(r[1],s,t)>>a,f=l?l+2:0,d=c?c+2:0,h=2*f+(i>>a),p=2*d+(o>>a),m=new Float32Array(h*p),g=new Float32Array(h*p);let y=m;s.forEach((r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(m[i+o*h]+=+n(r))})),l>0&&c>0?(QH(h,p,m,g,l),JH(h,p,g,m,c),QH(h,p,m,g,l),JH(h,p,g,m,c),QH(h,p,m,g,l),JH(h,p,g,m,c)):l>0?(QH(h,p,m,g,l),QH(h,p,g,m,l),QH(h,p,m,g,l),y=g):c>0&&(JH(h,p,m,g,c),JH(h,p,g,m,c),JH(h,p,m,g,c),y=g);const v=u?Math.pow(2,-2*a):1/Bd(y);for(let e=0,t=h*p;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=YH(t),s):e},s.y=function(e){return arguments.length?(t=YH(e),s):t},s.weight=function(e){return arguments.length?(n=YH(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||qE("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||qE("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=SS(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&qE("invalid bandwidth"),r=e,s):r},s}function QH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function JH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function KH(e){rF.call(this,null,e)}HH.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},qS(HH,rF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||GE,o=IH().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=WH(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>Fd(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",u=[];return r.forEach((t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,eS(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;CS(i)&&(i=i(n,r));CS(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(YS(i)?i:i[0])||1,s=(YS(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(VH(t,a,s,u,l))}(r,n,t,e),r.forEach((e=>{u.push(DM(t,AM(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),KH.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ZH=["x","y","weight","size","cellSize","bandwidth"];function eV(e,t){return ZH.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function tV(e){rF.call(this,null,e)}qS(KH,rF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,u=[],l=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(LE),a=eV(XH(),e),s=e.as||"grid";return n=i.map((t=>AM(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),tV.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},qS(tV,rF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=IH().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||WH(e.count||10,e.nice,!!a),u=e.size;return a||(a=t.materialize(t.SOURCE).source,r=VH(n=eV(XH(),e)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=eS(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(AM),i}});const nV="Feature",rV="FeatureCollection";function iV(e){rF.call(this,null,e)}function oV(e){rF.call(this,null,e)}function aV(e){rF.call(this,null,e)}function sV(e){rF.call(this,null,e)}function uV(e){rF.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Ld(Lj(r/p)*p,n,p).map(c).concat(Ld(Lj(s/m)*m,a,m).map(f)).concat(Ld(Lj(t/d)*d,e,d).filter((function(e){return Tj(e%p)>Aj})).map(u)).concat(Ld(Lj(o/h)*h,i,h).filter((function(e){return Tj(e%m)>Aj})).map(l))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=gq(o,i,90),l=yq(t,e,g),c=gq(s,a,90),f=yq(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function lV(e){rF.call(this,null,e)}function cV(e){if(!CS(e))return!1;const t=lA(BE(e));return t.$x||t.$y||t.$value||t.$max}function fV(e){rF.call(this,null,e),this.modified(!0)}function dV(e,t,n){CS(e[t])&&e[t](n)}iV.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},qS(iV,rF,{transform:function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],u=e.geojson||!o&&GE,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(BE(u))||a&&t.modified(BE(a))||s&&t.modified(BE(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(e=>r.push(u(e)))),a&&s&&(t.visit(l,(e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:nV,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:rV,features:r}}}),oV.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},qS(oV,rF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||GE,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=RH(e.projection),n.materialize().reflow()):a=i===GE||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(e=>e[o]=r(i(e)))),r.pointRadius(s),n.modifies(o)}}),aV.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},qS(aV,rF,{transform:function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function l(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),sV.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},qS(sV,rF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}(RH(e.projection),e.field||HE("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(e=>e[i]=r)),n.modifies(i)}}),uV.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},qS(uV,rF,{transform:function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)CS(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(MM(r[0],n)):t.add.push(AM(n)),r[0]=n,t}}),lV.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},qS(lV,rF,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||GE,o=function(e,t){let n;CS(e)?(n=n=>e(n,t),n.dep=cV(e)):e?n=$S(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;CS(e)?(n=n=>lh(e(n,t)),n.dep=cV(e)):n=$S(lh(e||"#888"));return n}(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Fd(n.map((e=>Fd(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=zS({},e,u);r||(n.$max=Fd(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?e=>c[e]:YE,d=H$(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),m=p.data;for(let e=s,o=0;e<l;++e){t.$y=e-s;for(let s=a,l=e*i;s<u;++s,o+=4){t.$x=s-a,t.$value=f(s+l);const e=n(t);m[o+0]=e.r,m[o+1]=e.g,m[o+2]=e.b,m[o+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,a.dep?a:$S(a(n)),o.dep?o:$S(o(n)))})),t.reflow(!0).modifies(s)}}),qS(fV,rF,{transform:function(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=zH((e||"mercator").toLowerCase());t||qE("Unrecognized projection type: "+e);return t()}(e.type),$H.forEach((t=>{null!=e[t]&&dV(n,t,e[t])}))):$H.forEach((t=>{e.modified(t)&&dV(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return 1===(e=SS(e)).length?e[0]:{type:rV,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===rV?e.features:SS(e).filter((e=>null!=e)).map((e=>e.type===nV?e:{type:nV,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),t(Sj,"projection",(function(){return fV})),t(Sj,"kde2d",(function(){return KH})),t(Sj,"isocontour",(function(){return HH})),t(Sj,"heatmap",(function(){return lV})),t(Sj,"graticule",(function(){return uV})),t(Sj,"geoshape",(function(){return sV})),t(Sj,"geopoint",(function(){return aV})),t(Sj,"geopath",(function(){return oV})),t(Sj,"geojson",(function(){return iV})),t(Sj,"contour",(function(){return tV}));var hV={};function pV(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}var mV=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function gV(e){return e[0]}function yV(e){return e[1]}function vV(e,t,n){var r=new bV(null==t?gV:t,null==n?yV:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function bV(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function xV(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var wV=vV.prototype=bV.prototype;wV.copy=function(){var e,t,n=new bV(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=xV(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=xV(t));return n},wV.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return pV(this.cover(t,n),t,n,e)},wV.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)pV(this,a[n],s[n],e[n]);return this},wV.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},wV.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},wV.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},wV.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new mV(m,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new mV(m[3],g,y,a,s),new mV(m[2],i,y,g,s),new mV(m[1],g,o,a,y),new mV(m[0],i,o,g,y)),(l=(t>=y)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=m.data}}return r},wV.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},wV.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},wV.root=function(){return this._root},wV.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},wV.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new mV(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new mV(n,l,c,o,a)),(n=u[2])&&s.push(new mV(n,r,c,l,a)),(n=u[1])&&s.push(new mV(n,l,i,o,c)),(n=u[0])&&s.push(new mV(n,r,i,l,c))}return this},wV.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new mV(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new mV(o,a,s,c,f)),(o=i[1])&&n.push(new mV(o,c,s,u,f)),(o=i[2])&&n.push(new mV(o,a,f,c,l)),(o=i[3])&&n.push(new mV(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},wV.x=function(e){return arguments.length?(this._x=e,this):this._x},wV.y=function(e){return arguments.length?(this._y=e,this):this._y};var _V=function(e){return function(){return e}},kV=function(e){return 1e-6*(e()-.5)};function EV(e){return e.x+e.vx}function SV(e){return e.y+e.vy}function AV(e){return e.index}function CV(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const DV=4294967296;function MV(e){return e.x}function FV(e){return e.y}var NV=Math.PI*(3-Math.sqrt(5)),OV=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=Bb(f),l=sv("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%DV)/DV}();function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*NV;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}};const $V={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,u,l,c,f,d,h=t.length,p=0;p<o;++p)for(a=vV(t,EV,SV).visitAfter(s),e=0;e<h;++e)u=t[e],f=n[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,h=e.r,p=f+h;if(!s)return t>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=kV(r))*m),0===g&&(y+=(g=kV(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=_V(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,u()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:_V(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i,o=_V(-30),a=1,s=1/0,u=.81;function l(n){var i,o=e.length,a=vV(e,MV,FV).visitAfter(f);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function f(e){var t,n,r,o,a,s=0,u=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,o+=n*t.y);e.x=r/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,l,c){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=c-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=kV(n))*f),0===d&&(p+=(d=kV(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===f&&(p+=(f=kV(n))*f),0===d&&(p+=(d=kV(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(h=i[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:_V(+e),c(),l):o},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l},link:function(e){var t,n,r,i,o,a,s=AV,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=_V(30),c=1;function f(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,f,d,h,p,m,g=0;g<s;++g)l=(u=e[g]).source,d=(f=u.target).x+f.vx-l.x-l.vx||kV(a),h=f.y+f.vy-l.y-l.vy||kV(a),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,f.vx-=d*(m=o[g]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function d(){if(r){var a,u,l=r.length,c=e.length,f=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(l);a<c;++a)(u=e[a]).index=a,"object"!=typeof u.source&&(u.source=CV(f,u.source)),"object"!=typeof u.target&&(u.target=CV(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=e[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,a=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(s=e,f):s},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:_V(+e),h(),f):u},f.distance=function(e){return arguments.length?(l="function"==typeof e?e:_V(+e),p(),f):l},f},x:function(e){var t,n,r,i=_V(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=_V(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:_V(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:_V(+t),a(),o):e},o},y:function(e){var t,n,r,i=_V(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=_V(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:_V(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:_V(+t),a(),o):e},o}},TV="forces",zV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],RV=["static","iterations"],PV=["x","y","vx","vy"];function LV(e){rF.call(this,null,e)}function BV(e,t,n,r){var i,o,a,s,u=SS(t.forces);for(i=0,o=zV.length;i<o;++i)(a=zV[i])!==TV&&t.modified(a)&&e[a](t[a]);for(i=0,o=u.length;i<o;++i)s=TV+i,(a=n||t.modified(TV,i)?jV(u[i]):r&&IV(u[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(TV+i,null);return e.numForces=u.length,e}function IV(e,t){var n,r;for(n in e)if(CS(r=e[n])&&t.modified(BE(r)))return 1;return 0}function jV(e){var t,n;for(n in BS($V,e.force)||qE("Unrecognized force: "+e.force),t=$V[e.force](),e)CS(t[n])&&UV(t[n],e[n],e);return t}function UV(e,t,n){e(CS(t)?e=>t(e,n):t)}LV.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:PV}]},qS(LV,rF,{transform:function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(zV),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&BV(i,e,0,t)):(this.value=i=function(e,t){const n=OV(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),BV(n,t,!0).on("end",(()=>o=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(RV)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,u=t.length;s<u;++s)if(e=t[s],e.name===TV&&"link"===e.op._argval.force)for(var r,i=e.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(PV)}}),t(hV,"force",(function(){return LV}));var qV={};function WV(e,t){return e.parent===t.parent?1:2}function HV(e,t){return e+t.x}function VV(e,t){return Math.max(e,t.y)}function GV(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function YV(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=QV)):void 0===t&&(t=XV);for(var n,r,i,o,a,s=new ZV(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new ZV(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(KV)}function XV(e){return e.children}function QV(e){return Array.isArray(e)?e[1]:null}function JV(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function KV(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function ZV(e){this.data=e,this.depth=this.height=0,this.parent=null}ZV.prototype=YV.prototype={constructor:ZV,count:function(){return this.eachAfter(GV)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return YV(this).eachBefore(JV)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var eG=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&rG(n,t)?++r:(n=oG(o=tG(o,t)),r=0);return n};function tG(e,t){var n,r;if(iG(t,e))return[t];for(n=0;n<e.length;++n)if(nG(t,e[n])&&iG(aG(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(nG(aG(e[n],e[r]),t)&&nG(aG(e[n],t),e[r])&&nG(aG(e[r],t),e[n])&&iG(sG(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function nG(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function rG(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function iG(e,t){for(var n=0;n<t.length;++n)if(!rG(e,t[n]))return!1;return!0}function oG(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return aG(e[0],e[1]);case 3:return sG(e[0],e[1],e[2])}var t}function aG(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function sG(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*m,_=(p*x-m*b)/(2*w)-r,k=(m*g-p*y)/w,E=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,A=k*k+S*S-1,C=2*(o+_*k+E*S),D=_*_+E*E-o*o,M=-(A?(C+Math.sqrt(C*C-4*A*D))/(2*A):D/C);return{x:r+_+k*M,y:i+E+S*M,r:M}}function uG(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function lG(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function cG(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function fG(e){this._=e,this.next=null,this.previous=null}function dG(e){if(!(o=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f,d;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;uG(r,n,i=e[2]),n=new fG(n),r=new fG(r),i=new fG(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){uG(n._,r._,i=e[u]),i=new fG(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(lG(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(lG(c._,i._)){(n=c).next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=cG(n);(i=i.next)!==r;)(s=cG(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=eG(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function hG(e){return null==e?null:pG(e)}function pG(e){if("function"!=typeof e)throw new Error;return e}function mG(){return 0}var gG=function(e){return function(){return e}};function yG(e){return Math.sqrt(e.value)}function vG(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function bG(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=dG(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function xG(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var wG=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},_G=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l},kG={depth:-1},EG={};function SG(e){return e.id}function AG(e){return e.parentId}var CG=function(){var e=SG,t=AG;function n(n){var r,i,o,a,s,u,l,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],s=c[i]=new ZV(r),null!=(u=e(r,i,n))&&(u+="")&&(l=s.id=u,d.set(l,d.has(l)?EG:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=c[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===EG)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=kG,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(KV),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=pG(t),n):e},n.parentId=function(e){return arguments.length?(t=pG(e),n):t},n};function DG(e,t){return e.parent===t.parent?1:2}function MG(e){var t=e.children;return t?t[0]:e.t}function FG(e){var t=e.children;return t?t[t.length-1]:e.t}function NG(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function OG(e,t,n){return e.a.parent===t.parent?e.a:n}function $G(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}$G.prototype=Object.create(ZV.prototype);var TG=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l},zG=(1+Math.sqrt(5))/2;function RG(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,m,g,y=[],v=t.children,b=0,x=0,w=v.length,_=t.value;b<w;){u=i-n,l=o-r;do{c=v[x++].value}while(!c&&x<w);for(f=d=c,g=c*c*(m=Math.max(l/u,u/l)/(_*e)),p=Math.max(d/g,g/f);x<w;++x){if(c+=s=v[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}y.push(a={value:c,dice:u<l,children:v.slice(b,x)}),a.dice?_G(a,n,r,i,_?r+=l*c/_:o):TG(a,n,r,_?n+=u*c/_:i,o),_-=c,b=x}return y}var PG=function e(t){function n(e,n,r,i,o){RG(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(zG),LG=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?_G(s,n,r,i,h?r+=(o-r)*s.value/h:o):TG(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=RG(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(zG);function BG(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function IG(e){rF.call(this,null,e)}IG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const jG=e=>e.values;function UG(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,l,c,f=-1;for(;++f<i;)u=o(l=t[f])+"",(c=a[u])?c.push(l):a[u]=[l];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function qG(e){rF.call(this,null,e)}qS(IG,rF,{transform:function(e,t){t.source||qE("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each((e=>{e.children&&kM(e.data)&&i.rem.push(e.data)})),this.value=o=YV({values:SS(e.keys).reduce(((e,t)=>(e.key(t),e)),UG()).entries(i.source)},jG),n&&o.each((e=>{e.children&&(e=AM(e.data),i.add.push(e),i.source.push(e))})),BG(o,EM,EM)),i.source.root=o,i}});const WG=(e,t)=>e.parent===t.parent?1:2;qS(qG,rF,{transform:function(e,t){t.source&&t.source.root||qE(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(FM(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?WG:XE);try{this.value=n(i)}catch(e){qE(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o))),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const HG=["x","y","r","depth","children"];function VG(e){qG.call(this,e)}VG.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:HG.length,default:HG}]},qS(VG,qG,{layout:function(){var e=null,t=1,n=1,r=mG;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(vG(e)).eachAfter(bG(r,.5)).eachBefore(xG(1)):i.eachBefore(vG(yG)).eachAfter(bG(mG,1)).eachAfter(bG(r,i.r/Math.min(t,n))).eachBefore(xG(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=hG(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:gG(+e),i):r},i},params:["radius","size","padding"],fields:HG});const GG=["x0","y0","x1","y1","depth","children"];function YG(e){qG.call(this,e)}function XG(e){rF.call(this,null,e)}YG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GG.length,default:GG}]},qS(YG,qG,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&_G(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(wG),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:GG}),XG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},qS(XG,rF,{transform:function(e,t){t.source||qE("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?BG(CG().id(e.key).parentId(e.parentKey)(i.source),e.key,QE):BG(CG()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const QG={tidy:function(){var e=DG,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new $G(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new $G(r[i],i)),n.parent=t;return(a.parent=new $G(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=FG(s),o=MG(o),s&&o;)u=MG(u),(a=FG(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(NG(OG(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!FG(a)&&(a.t=s,a.m+=f-c),o&&!MG(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=WV,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(HV,0)/e.length}(n),t.y=function(e){return 1+e.reduce(VV,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},JG=["x","y","depth","children"];function KG(e){qG.call(this,e)}function ZG(e){rF.call(this,[],e)}KG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:JG.length,default:JG}]},qS(KG,qG,{layout:function(e){const t=e||"tidy";if(BS(QG,t))return QG[t]();qE("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:JG}),ZG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},qS(ZG,rF,{transform:function(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||qE("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>o[EM(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[EM(t)]&&o[EM(n)]&&i.add.push(AM({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>o[EM(e)]=1)),n.forEach((e=>{(o[EM(e.source)]||o[EM(e.target)])&&i.mod.push(e)}))),i}});const eY={binary:function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;l[m]<d?h=m+1:p=m}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;e(t,h,g,i,o,v,u),e(h,n,y,v,o,a,u)}else{var b=r?(o*y+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,y,i,b,a,u)}}(0,u,e.value,t,n,r,i)},dice:_G,slice:TG,slicedice:function(e,t,n,r,i){(1&e.depth?TG:_G)(e,t,n,r,i)},squarify:PG,resquarify:LG},tY=["x0","y0","x1","y1","depth","children"];function nY(e){qG.call(this,e)}nY.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tY.length,default:tY}]},qS(nY,qG,{layout:function(){const e=function(){var e=PG,t=!1,n=1,r=1,i=[0],o=mG,a=mG,s=mG,u=mG,l=mG;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(wG),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=pG(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:gG(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:gG(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:gG(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:gG(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:gG(+e),c):l},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{BS(eY,t)?e.tile(eY[t]):qE("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:tY}),t(qV,"treemap",(function(){return nY})),t(qV,"treelinks",(function(){return ZG})),t(qV,"tree",(function(){return KG})),t(qV,"stratify",(function(){return XG})),t(qV,"partition",(function(){return YG})),t(qV,"pack",(function(){return VG})),t(qV,"nest",(function(){return IG}));var rY={};function iY(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=H$(i,o).getContext("2d");t.forEach((e=>oY(s,e,a)));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,m;for(d=0;d<o;++d)for(f=0;f<i;++f)m=4278190080&u[d*i+f],m&&(h=e(f),p=e(d),r||l.set(h,p),a&&268435456^m&&c.set(h,p));return[l,c]}function oY(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>oY(e,t.items,n)))})):ZP[r].draw(e,{items:n?t.map(aY):t})}function aY(e){const t=DM(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const sY=31,uY=new Uint32Array(33),lY=new Uint32Array(33);lY[0]=0,uY[0]=~lY[0];for(let e=1;e<=32;++e)lY[e]=lY[e-1]<<1|1,uY[e]=~lY[e];function cY(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&sY)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&sY))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&sY)))},getRange:(t,r,i,o)=>{let a,s,u,l,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,u=a>>>5,l=s>>>5,u===l){if(n[u]&uY[a&sY]&lY[1+(s&sY)])return!0}else{if(n[u]&uY[a&sY])return!0;if(n[l]&lY[1+(s&sY)])return!0;for(let e=u+1;e<l;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>5,l=s>>>5,u===l)r(u,uY[a&sY]&lY[1+(s&sY)]);else for(r(u,uY[a&sY]),r(l,lY[1+(s&sY)]),c=u+1;c<l;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>5,l=s>>>5,u===l)i(u,lY[a&sY]|uY[1+(s&sY)]);else for(i(u,lY[a&sY]),i(l,uY[1+(s&sY)]),c=u+1;c<l;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function fY(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function dY(e,t,n,r,i,o,a,s){const u=i*o/(2*r),l=e(t-u),c=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}const hY=[-1,-1,1,1],pY=[-1,1,-1,1];const mY=["right","center","left"],gY=["bottom","middle","top"];function yY(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!function(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}(a,u,s,l,c):i.getRange(e,n,t,r)))}const vY={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},bY={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=zP.width(e.datum,e.datum.text);let u,l,c,f,d,h,p,m=0;for(let r=0;r<n;++r)u=t[r].x,c=t[r].y,l=void 0===t[r].x2?u:t[r].x2,f=void 0===t[r].y2?c:t[r].y2,d=(u+l)/2,h=(c+f)/2,p=Math.abs(l-u+f-c),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=a/2,u=e.x-d,l=e.x+d,c=e.y-h,f=e.y+h,e.align="center",u<0&&l<=i?e.align="left":0<=u&&i<l&&(e.align="right"),e.baseline="middle",c<0&&f<=o?e.baseline="top":0<=c&&o<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(t,n,r,u,l){const c=e.invert(t),f=e.invert(n);let d,h=r,p=o;if(!fY(c,f,u,l,i,o)&&!dY(e,c,f,l,u,h,a,s)&&!dY(e,c,f,l,u,l,a,null)){for(;p-h>=1;)d=(h+p)/2,dY(e,c,f,l,u,d,a,s)?p=d:h=d;if(h>r)return[c,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,l=s.length,c=t.datum.fontSize,f=zP.width(t.datum,t.datum.text);let d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M=n?c:0,F=!1,N=!1,O=0;for(let r=0;r<l;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(D=d,d=h,h=D),p>m&&(D=p,p=m,m=D),x=e(d),_=e(h),w=~~((x+_)/2),k=e(p),S=e(m),E=~~((k+S)/2),v=w;v>=x;--v)for(b=E;b>=k;--b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);for(v=w;v<=_;++v)for(b=E;b<=S;++b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);F||n||(A=Math.abs(h-d+m-p),g=(d+h)/2,y=(p+m)/2,A>=O&&!fY(g,y,f,c,i,o)&&!dY(e,g,y,c,f,c,a,null)&&(O=A,t.x=g,t.y=y,N=!0))}return!(!F&&!N)&&(g=f/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(t){const l=t.datum.datum.items[r].items,c=l.length,f=t.datum.fontSize,d=zP.width(t.datum,t.datum.text),h=[];let p,m,g,y,v,b,x,w,_,k,E,S,A=n?f:0,C=!1,D=!1,M=0;for(let r=0;r<c;++r){for(p=l[r].x,g=l[r].y,m=void 0===l[r].x2?p:l[r].x2,y=void 0===l[r].y2?g:l[r].y2,h.push([e((p+m)/2),e((g+y)/2)]);h.length;)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let e=0;e<4;++e)v=x+hY[e],b=w+pY[e],u.outOfBounds(v,b,v,b)||h.push([v,b]);if(v=e.invert(x),b=e.invert(w),_=A,k=o,!fY(v,b,d,f,i,o)&&!dY(e,v,b,f,d,_,a,s)&&!dY(e,v,b,f,d,f,a,null)){for(;k-_>=1;)E=(_+k)/2,dY(e,v,b,f,d,E,a,s)?k=E:_=E;_>A&&(t.x=v,t.y=b,A=_,C=!0)}}C||n||(S=Math.abs(m-p+y-g),v=(p+m)/2,b=(g+y)/2,S>=M&&!fY(v,b,d,f,i,o)&&!dY(e,v,b,f,d,f,a,null)&&(M=S,t.x=v,t.y=b,D=!0))}return!(!C&&!D)&&(v=d/2,b=f/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function xY(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=vY[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[u].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,u),v=cY(t[0],t[1],l),b=g&&"naive"===c;var x;const w=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)})));let _;if(!b){n&&w.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;p&&(a||g)&&(o=[e.map((e=>e.datum))].concat(o)),_=o.length?iY(v,o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(v,a&&w)}const k=g?bY[c](v,_,a,u):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(t){const l=t.boundary,c=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>o)return!1;let f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=l[1+f]+r[i]*f*p,w=l[4+d]+m*c*d/2+r[i]*d*p,v=w-c/2,b=w+c/2,_=e(g),E=e(v),S=e(b),!A){if(!yY(_,_,E,S,a,s,g,g,v,b,l,h))continue;A=zP.width(t.datum,t.datum.text)}if(x=g+m*A*f/2,g=x-A/2,y=x+A/2,_=e(g),k=e(y),yY(_,k,E,S,a,s,g,y,v,b,l,h))return t.x=f?f*m<0?y:g:x,t.y=d?d*m<0?b:v:w,t.align=mY[f*m+1],t.baseline=gY[d*m+1],a.setRange(_,E,k,S),!0}return!1}}(v,_,h,d);return w.forEach((e=>e.opacity=+k(e))),w}const wY=["x","y","opacity","align","baseline"],_Y=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function kY(e){rF.call(this,null,e)}kY.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:_Y},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:wY.length,default:wY}]},qS(kY,rF,{transform:function(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return CS(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||qE("Size parameter should be specified as a [width, height] array.");const r=e.as||wY;return xY(t.materialize(t.SOURCE).source,e.size,e.sort,SS(e.offset||1),SS(e.anchor||_Y),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),t(rY,"label",(function(){return kY}));var EY={};function SY(e,t){var n,r,i,o,a,s,u=[],l=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function AY(e){rF.call(this,null,e)}AY.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},qS(AY,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=SY(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(LE),o=i.length,a=e.as||[LE(e.x),LE(e.y)],s=[];r.forEach((t=>{JF(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<o;++e)n[i[e]]=t.dims[e];n[a[0]]=e[0],n[a[1]]=e[1],s.push(AM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const CY={linear:WF,log:HF,exp:VF,pow:GF,quad:YF,poly:XF};function DY(e){rF.call(this,null,e)}DY.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(CY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},qS(DY,rF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=SY(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(LE),o=e.method||"linear",a=e.order||3,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),u=e.as||[LE(e.x),LE(e.y)],l=CY[o],c=[];let f=e.extent;BS(CY,o)||qE("Invalid regression method: "+o),null!=f&&"log"===o&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=l(n,e.x,e.y,a);if(e.params)return void c.push(AM({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||RS(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],c.push(AM(t))};"linear"===o?d.forEach((e=>h([e,r.predict(e)]))):tN(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),t(EY,"regression",(function(){return DY})),t(EY,"loess",(function(){return AY}));var MY={};const FY=Math.pow(2,-52),NY=new Uint32Array(512);class OY{static from(e,t=IY,n=jY){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new OY(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[t]=t}const c=(a+u)/2,f=(s+l)/2;let d,h,p,m=1/0;for(let t=0;t<o;t++){const n=$Y(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],y=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=$Y(g,y,e[2*t],e[2*t+1]);n<m&&n>0&&(h=t,m=n)}let v=e[2*h],b=e[2*h+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===h)continue;const n=PY(g,y,v,b,e[2*t],e[2*t+1]);n<x&&(p=t,x=n)}let w=e[2*p],_=e[2*p+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];LY(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(zY(g,y,v,b,w,_)){const e=h,t=v,n=b;h=p,v=w,b=_,p=e,w=t,_=n}const k=function(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(a*f-u*c)*d}}(g,y,v,b,w,_);this._cx=k.x,this._cy=k.y;for(let t=0;t<o;t++)this._dists[t]=$Y(e[2*t],e[2*t+1],k.x,k.y);LY(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=d,i[this._hashKey(v,b)]=h,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=e[2*u],c=e[2*u+1];if(s>0&&Math.abs(l-o)<=FY&&Math.abs(c-a)<=FY)continue;if(o=l,a=c,u===d||u===h||u===p)continue;let f=0;for(let e=0,t=this._hashKey(l,c);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],!zY(l,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],zY(l,c,e[2*v],e[2*v+1],e[2*m],e[2*m+1]);)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=t[g],zY(l,c,e[2*m],e[2*m+1],e[2*g],e[2*g+1]);)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=t[u]=g,n[g]=t[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=NY[--i];continue}const u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,f=t[o],d=t[e],h=t[l],p=t[c];if(RY(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<NY.length&&(NY[i++]=s)}else{if(0===i)break;e=NY[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function $Y(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function TY(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function zY(e,t,n,r,i,o){return(TY(i,o,e,t,n,r)||TY(e,t,n,r,i,o)||TY(n,r,i,o,e,t))<0}function RY(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+(u*u+l*l)*(c*h-f*d)<0}function PY(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function LY(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;BY(e,n+r>>1,i),t[e[n]]>t[e[r]]&&BY(e,n,r),t[e[i]]>t[e[r]]&&BY(e,i,r),t[e[n]]>t[e[i]]&&BY(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;BY(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(LY(e,t,i,r),LY(e,t,n,o-1)):(LY(e,t,n,o-1),LY(e,t,i,r))}}function BY(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function IY(e){return e[0]}function jY(e){return e[1]}const UY=1e-6;class qY{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>UY||Math.abs(this._y1-i)>UY)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class WY{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class HY{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=e[s],f=e[s+1],d=e[u],h=e[u+1],p=e[l],m=e[l+1],g=d-c,y=h-f,v=p-c,b=m-f,x=g*g+y*y,w=v*v+b*b,_=2*(g*b-y*v);if(_)if(Math.abs(_)<1e-8)t=(c+p)/2,r=(f+m)/2;else{const e=1/_;t=c+(b*x-y*w)*e,r=f+(g*w-v*x)*e}else t=(c+p)/2-1e8*b,r=(f+m)/2+1e8*v;i[a]=t,i[a+1]=r}let o,a,s,u=t[t.length-1],l=4*u,c=e[2*u],f=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],o=l,a=c,s=f,l=4*u,c=e[2*u],f=e[2*u+1],r[o+2]=r[l]=s-f,r[o+3]=r[l+1]=c-a}render(e){const t=null==e?e=new qY:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,e)}let s,u=i[i.length-1];for(let t=0;t<i.length;++t){s=u,u=i[t];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,d=this._project(l,c,a[f+2],a[f+3]);d&&this._renderSegment(l,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new qY:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new qY:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new WY;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]==e[o]&&t[r+1]==e[o+1]&&t[(r+2)%i]==e[(o+a-2)%a]&&t[(r+3)%i]==e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,u=null,l=t[n-2],c=t[n-1],f=this._regioncode(l,c);for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],o=f,f=this._regioncode(l,c),0===o&&0===f)a=s,s=0,u?u.push(l,c):u=[l,c];else{let t,n,d,h,p;if(0===o){if(null===(t=this._clipSegment(r,i,l,c,o,f)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,f,o)))continue;[h,p,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(e,a,s,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const VY=2*Math.PI,GY=Math.pow;function YY(e){return e[0]}function XY(e){return e[1]}function QY(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class JY{static from(e,t=YY,n=XY,r){return new JY("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new OY(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=QY(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new OY(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new HY(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(u!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let l=e,c=GY(t-u[2*e],2)+GY(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=GY(t-u[2*r],2)+GY(n-u[2*r+1],2);if(f<c&&(c=f,l=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&GY(t-u[2*d],2)+GY(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}render(e){const t=null==e?e=new qY:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new qY:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,VY)}return n&&n.value()}renderHull(e){const t=null==e?e=new qY:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new WY;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new qY:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new WY;return this.renderTriangle(e,t),t.value()}}function KY(e){rF.call(this,null,e)}KY.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const ZY=[-1e5,-1e5,1e5,1e5];function eX(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}qS(KY,rF,{transform:function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:ZY;const o=this.value=JY.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?eX(t):null}return t.reflow(e.modified()).modifies(n)}}),t(MY,"voronoi",(function(){return KY}));var tX={},nX=Math.PI/180,rX=2048;function iX(){var e,t,n,r,i,o,a,s=[256,256],u=uX,l=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=c()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=h));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&aX(t,e,s[0])||n&&(l=n,!((a=t).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y)))){for(var y,v=t.sprite,b=t.width>>5,x=s[0]>>5,w=t.x-(b<<4),_=127&w,k=32-_,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),A=0;A<E;A++){y=0;for(var C=0;C<=b;C++)e[S+C]|=y<<k|(C<b?(y=v[A*b+C])>>>_:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=rX/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(H$()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,m=-1,g=[],y=l.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,oX(u,v,y,m),v.hasText&&d(f,v,h)&&(g.push(v),h?sX(h,v):h=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=lX(e),f):t},f.fontStyle=function(e){return arguments.length?(r=lX(e),f):r},f.fontWeight=function(e){return arguments.length?(i=lX(e),f):i},f.rotate=function(e){return arguments.length?(o=lX(e),f):o},f.text=function(t){return arguments.length?(e=lX(t),f):e},f.spiral=function(e){return arguments.length?(u=cX[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=lX(e),f):n},f.padding=function(e){return arguments.length?(a=lX(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f}function oX(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,rX/o);var a,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,u=t.size<<1,t.rotate){var m=Math.sin(t.rotate*nX),g=Math.cos(t.rotate*nX),y=a*g,v=a*m,b=u*g,x=u*m;a=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,u=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=2048&&(f=0,d+=h,h=0),d+u>=rX)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),t.rotate&&i.rotate(t.rotate*nX),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=u,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var w=i.getImageData(0,0,2048/o,rX/o).data,_=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)_[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(c=0;c<u;c++){for(l=0;l<a;l++){var S=s*c+(l>>5),A=w[2048*(d+c)+(f+l)<<2]?1<<31-l%32:0;_[S]|=A,k|=A}k?E=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+E,t.sprite=_.slice(0,(t.y1-t.y0)*s)}}}function aX(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function sX(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function uX(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function lX(e){return"function"==typeof e?e:function(){return e}}var cX={archimedean:uX,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const fX=["x","y","font","fontSize","fontStyle","fontWeight","angle"],dX=["text","font","rotate","fontSize","fontStyle","fontWeight"];function hX(e){rF.call(this,iX(),e)}hX.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:fX}]},qS(hX,rF,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||qE("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||dX.some((function(n){const r=e[n];return CS(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||fX;let a,s=e.fontSize||14;if(CS(s)?a=e.fontSizeRange:s=$S(s),a){const e=s,t=_T("sqrt")().domain(RS(r,e)).range(a);s=n=>t(e(n))}r.forEach((e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));const u=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(pF).layout(),l=i.size(),c=l[0]>>1,f=l[1]>>1,d=u.length;for(let e,t,n=0;n<d;++n)e=u[n],t=e.datum,t[o[0]]=e.x+c,t[o[1]]=e.y+f,t[o[2]]=e.font,t[o[3]]=e.size,t[o[4]]=e.style,t[o[5]]=e.weight,t[o[6]]=e.rotate;return t.reflow(n).modifies(o)}}),t(tX,"wordcloud",(function(){return hX}));var pX={};const mX=e=>new Uint8Array(e),gX=e=>new Uint16Array(e),yX=e=>new Uint32Array(e);function vX(e,t,n){const r=(t<257?mX:t<65537?gX:yX)(e);return n&&r.set(n),r}function bX(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let l;for(l=0;l<a;++l)t[o[l]]|=r;for(l=s;l<u;++l)t[o[l]]|=r;return n}}}function xX(){let e=yX(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=yX(s);let l,c,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,u),a)l=t,c=e,t=Array(a+s),e=yX(a+s),function(e,t,n,r,i,o,a,s,u){let l,c=0,f=0;for(l=0;c<r&&f<a;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=o[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<a;++f,++l)s[l]=i[f],u[l]=o[f]+e}(o,l,c,a,d,u,s,t,e);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;t=d,e=u}return n=a+s,{index:u,value:d}},remove:function(r,i){const o=n;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,t[u]=t[s],++u);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[wd(r,e[0],0,i),xd(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function wX(e){rF.call(this,function(){let e=8,t=[],n=yX(0),r=vX(0,e),i=vX(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){const o=t.length,a=Array(o-e),s=t;let u,l,c;for(l=0;!n[l]&&l<o;++l)a[l]=t[l],s[l]=l;for(c=l;l<o;++l)u=t[l],n[l]?s[l]=-1:(s[l]=c,r[c]=r[l],i[c]=i[l],a[c]=u,u._index=c++),r[l]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=vX(t,e,r),i=vX(t,e))}}}(),e),this._indices=null,this._dims=null}function _X(e){rF.call(this,null,e)}wX.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},qS(wX,rF,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,l=0;for(;l<a;++l)s=n[l].fname,u=i[s]||(i[s]=xX()),o.push(bX(u,l,r[l]));return this.eval(e,t)},reinit:function(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,w,_,k;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,_=v.length;w<_;++w)x[v[w]._index]=1;for(w=0;w<h;++w)k=r[w],(!a[w]||e.modified("fields",w)||t.modified(k.fields))&&(y=k.fname,(m=p[y])||(o[y]=g=xX(),p[y]=m=g.insert(k,t.source,0)),a[w]=bX(g,w,i[w]).onAdd(m,u));for(w=0,_=s.data().length;w<_;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval:function(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d,h,p,m=i.size();i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,m)),o[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&l.push(m)},modify:function(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove:function(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex:function(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update:function(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,l=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++l);if(1===l)l=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,l=0;u<a;++u)e.modified("query",u)&&(l|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return l},incrementAll:function(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne:function(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],l=s[1],c=a[0],f=a[1],d=e.one;let h,p,m;if(u<c)for(h=u,p=Math.min(c,l);h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(u>c)for(h=c,p=Math.min(u,f);h<p;++h)m=o[h],i[m]^=d,r.push(m);if(l>f)for(h=Math.max(u,f),p=l;h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(l<f)for(h=Math.max(c,l),p=f;h<p;++h)m=o[h],i[m]^=d,r.push(m);e.range=t.slice()}}),_X.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},qS(_X,rF,{transform:function(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=e=>s[e]&n?null:a[e];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return t&&!(t^t^u[e]&n)?a[e]:null}))):(o.filter(o.ADD,l),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>l(e._index)))}}),t(pX,"resolvefilter",(function(){return _X})),t(pX,"crossfilter",(function(){return wX})),n(zE,uF),n(zE,HC),n(zE,dA),n(zE,FO);const kX="RawCode",EX="Literal",SX="Property",AX="Identifier",CX="ArrayExpression",DX="BinaryExpression",MX="CallExpression",FX="ConditionalExpression",NX="LogicalExpression",OX="MemberExpression",$X="ObjectExpression",TX="UnaryExpression";function zX(e){this.type=e}var RX,PX,LX,BX,IX;zX.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case CX:return e.elements;case DX:case NX:return[e.left,e.right];case MX:return[e.callee].concat(e.arguments);case FX:return[e.test,e.consequent,e.alternate];case OX:return[e.object,e.property];case $X:return e.properties;case SX:return[e.key,e.value];case TX:return[e.argument];case AX:case EX:case kX:default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(RX={})[1]="Boolean",RX[2]="<end>",RX[3]="Identifier",RX[4]="Keyword",RX[5]="Null",RX[6]="Numeric",RX[7]="Punctuator",RX[8]="String",RX[9]="RegularExpression";var jX="Identifier",UX="Unexpected token %0",qX="Invalid regular expression",WX="Invalid regular expression: missing /",HX="Octal literals are not allowed in strict mode.",VX="ILLEGAL",GX="Disabled.",YX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),XX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function QX(e,t){if(!e)throw new Error("ASSERT: "+t)}function JX(e){return e>=48&&e<=57}function KX(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function ZX(e){return"01234567".indexOf(e)>=0}function eQ(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function tQ(e){return 10===e||13===e||8232===e||8233===e}function nQ(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&YX.test(String.fromCharCode(e))}function rQ(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&XX.test(String.fromCharCode(e))}const iQ={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function oQ(){for(;LX<BX;){const e=PX.charCodeAt(LX);if(!eQ(e)&&!tQ(e))break;++LX}}function aQ(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)LX<BX&&KX(PX[LX])?(r=PX[LX++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):_Q({},UX,VX);return String.fromCharCode(i)}function sQ(){var e,t,n,r;for(t=0,"}"===(e=PX[LX])&&_Q({},UX,VX);LX<BX&&KX(e=PX[LX++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&_Q({},UX,VX),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function uQ(){var e,t;for(e=PX.charCodeAt(LX++),t=String.fromCharCode(e),92===e&&(117!==PX.charCodeAt(LX)&&_Q({},UX,VX),++LX,(e=aQ("u"))&&"\\"!==e&&nQ(e.charCodeAt(0))||_Q({},UX,VX),t=e);LX<BX&&rQ(e=PX.charCodeAt(LX));)++LX,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==PX.charCodeAt(LX)&&_Q({},UX,VX),++LX,(e=aQ("u"))&&"\\"!==e&&rQ(e.charCodeAt(0))||_Q({},UX,VX),t+=e);return t}function lQ(){var e,t;return e=LX,{type:1===(t=92===PX.charCodeAt(LX)?uQ():function(){var e,t;for(e=LX++;LX<BX;){if(92===(t=PX.charCodeAt(LX)))return LX=e,uQ();if(!rQ(t))break;++LX}return PX.slice(e,LX)}()).length?3:iQ.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:LX}}function cQ(){var e,t,n,r,i=LX,o=PX.charCodeAt(LX),a=PX[LX];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++LX,{type:7,value:String.fromCharCode(o),start:i,end:LX};default:if(61===(e=PX.charCodeAt(LX+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return LX+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:LX};case 33:case 61:return LX+=2,61===PX.charCodeAt(LX)&&++LX,{type:7,value:PX.slice(i,LX),start:i,end:LX}}}return">>>="===(r=PX.substr(LX,4))?{type:7,value:r,start:i,end:LX+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:LX+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:7,value:t,start:i,end:LX+=2}:("//"===t&&_Q({},UX,VX),"<>=!+-*%&|^/".indexOf(a)>=0?{type:7,value:a,start:i,end:++LX}:void _Q({},UX,VX))}function fQ(){var e,t,n;if(QX(JX((n=PX[LX]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=LX,e="","."!==n){if(e=PX[LX++],n=PX[LX],"0"===e){if("x"===n||"X"===n)return++LX,function(e){let t="";for(;LX<BX&&KX(PX[LX]);)t+=PX[LX++];return 0===t.length&&_Q({},UX,VX),nQ(PX.charCodeAt(LX))&&_Q({},UX,VX),{type:6,value:parseInt("0x"+t,16),start:e,end:LX}}(t);if(ZX(n))return function(e){let t="0"+PX[LX++];for(;LX<BX&&ZX(PX[LX]);)t+=PX[LX++];return(nQ(PX.charCodeAt(LX))||JX(PX.charCodeAt(LX)))&&_Q({},UX,VX),{type:6,value:parseInt(t,8),octal:!0,start:e,end:LX}}(t);n&&JX(n.charCodeAt(0))&&_Q({},UX,VX)}for(;JX(PX.charCodeAt(LX));)e+=PX[LX++];n=PX[LX]}if("."===n){for(e+=PX[LX++];JX(PX.charCodeAt(LX));)e+=PX[LX++];n=PX[LX]}if("e"===n||"E"===n)if(e+=PX[LX++],"+"!==(n=PX[LX])&&"-"!==n||(e+=PX[LX++]),JX(PX.charCodeAt(LX)))for(;JX(PX.charCodeAt(LX));)e+=PX[LX++];else _Q({},UX,VX);return nQ(PX.charCodeAt(LX))&&_Q({},UX,VX),{type:6,value:parseFloat(e),start:t,end:LX}}function dQ(){var e,t,n,r;return IX=null,oQ(),e=LX,t=function(){var e,t,n,r;for(QX("/"===(e=PX[LX]),"Regular expression literal must start with a slash"),t=PX[LX++],n=!1,r=!1;LX<BX;)if(t+=e=PX[LX++],"\\"===e)tQ((e=PX[LX++]).charCodeAt(0))&&_Q({},WX),t+=e;else if(tQ(e.charCodeAt(0)))_Q({},WX);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||_Q({},WX),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";LX<BX&&rQ((e=PX[LX]).charCodeAt(0));)++LX,"\\"===e&&LX<BX?_Q({},UX,VX):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&_Q({},qX,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";_Q({},qX)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){_Q({},qX)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:LX}}function hQ(){if(oQ(),LX>=BX)return{type:2,start:LX,end:LX};const e=PX.charCodeAt(LX);return nQ(e)?lQ():40===e||41===e||59===e?cQ():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(QX("'"===(e=PX[LX])||'"'===e,"String literal must starts with a quote"),t=LX,++LX;LX<BX;){if((n=PX[LX++])===e){e="";break}if("\\"===n)if((n=PX[LX++])&&tQ(n.charCodeAt(0)))"\r"===n&&"\n"===PX[LX]&&++LX;else switch(n){case"u":case"x":"{"===PX[LX]?(++LX,i+=sQ()):i+=aQ(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:ZX(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),LX<BX&&ZX(PX[LX])&&(o=!0,r=8*r+"01234567".indexOf(PX[LX++]),"0123".indexOf(n)>=0&&LX<BX&&ZX(PX[LX])&&(r=8*r+"01234567".indexOf(PX[LX++]))),i+=String.fromCharCode(r)):i+=n}else{if(tQ(n.charCodeAt(0)))break;i+=n}}return""!==e&&_Q({},UX,VX),{type:8,value:i,octal:o,start:t,end:LX}}():46===e?JX(PX.charCodeAt(LX+1))?fQ():cQ():JX(e)?fQ():cQ()}function pQ(){const e=IX;return LX=e.end,IX=hQ(),LX=e.end,e}function mQ(){const e=LX;IX=hQ(),LX=e}function gQ(e,t,n){const r=new zX("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function yQ(e,t){const n=new zX("CallExpression");return n.callee=e,n.arguments=t,n}function vQ(e){const t=new zX(jX);return t.name=e,t}function bQ(e){const t=new zX("Literal");return t.value=e.value,t.raw=PX.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function xQ(e,t,n){const r=new zX("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function wQ(e,t,n){const r=new zX("Property");return r.key=t,r.value=n,r.kind=e,r}function _Q(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(QX(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=LX,n.description=i,n}function kQ(e){2===e.type&&_Q(e,"Unexpected end of input"),6===e.type&&_Q(e,"Unexpected number"),8===e.type&&_Q(e,"Unexpected string"),3===e.type&&_Q(e,"Unexpected identifier"),4===e.type&&_Q(e,"Unexpected reserved word"),_Q(e,UX,e.value)}function EQ(e){const t=pQ();7===t.type&&t.value===e||kQ(t)}function SQ(e){return 7===IX.type&&IX.value===e}function AQ(e){return 4===IX.type&&IX.value===e}function CQ(){const e=[];for(LX=IX.start,EQ("[");!SQ("]");)SQ(",")?(pQ(),e.push(null)):(e.push(BQ()),SQ("]")||EQ(","));return pQ(),function(e){const t=new zX("ArrayExpression");return t.elements=e,t}(e)}function DQ(){LX=IX.start;const e=pQ();return 8===e.type||6===e.type?(e.octal&&_Q(e,HX),bQ(e)):vQ(e.value)}function MQ(){var e,t,n;return LX=IX.start,3===(e=IX).type?(n=DQ(),EQ(":"),wQ("init",n,BQ())):2!==e.type&&7!==e.type?(t=DQ(),EQ(":"),wQ("init",t,BQ())):void kQ(e)}function FQ(){var e,t,n=[],r={},i=String;for(LX=IX.start,EQ("{");!SQ("}");)t="$"+((e=MQ()).key.type===jX?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?_Q({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),SQ("}")||EQ(",");return EQ("}"),function(e){const t=new zX("ObjectExpression");return t.properties=e,t}(n)}const NQ={if:1};function OQ(){var e,t,n;if(SQ("("))return function(){EQ("(");const e=IQ();return EQ(")"),e}();if(SQ("["))return CQ();if(SQ("{"))return FQ();if(e=IX.type,LX=IX.start,3===e||NQ[IX.value])n=vQ(pQ().value);else if(8===e||6===e)IX.octal&&_Q(IX,HX),n=bQ(pQ());else{if(4===e)throw new Error(GX);1===e?((t=pQ()).value="true"===t.value,n=bQ(t)):5===e?((t=pQ()).value=null,n=bQ(t)):SQ("/")||SQ("/=")?(n=bQ(dQ()),mQ()):kQ(pQ())}return n}function $Q(){const e=[];if(EQ("("),!SQ(")"))for(;LX<BX&&(e.push(BQ()),!SQ(")"));)EQ(",");return EQ(")"),e}function TQ(){return EQ("."),function(){LX=IX.start;const e=pQ();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||kQ(e),vQ(e.value)}()}function zQ(){EQ("[");const e=IQ();return EQ("]"),e}function RQ(){const e=function(){var e;for(e=OQ();;)if(SQ("."))e=xQ(".",e,TQ());else if(SQ("("))e=yQ(e,$Q());else{if(!SQ("["))break;e=xQ("[",e,zQ())}return e}();if(7===IX.type&&(SQ("++")||SQ("--")))throw new Error(GX);return e}function PQ(){var e,t;if(7!==IX.type&&4!==IX.type)t=RQ();else{if(SQ("++")||SQ("--"))throw new Error(GX);if(SQ("+")||SQ("-")||SQ("~")||SQ("!"))e=pQ(),t=PQ(),t=function(e,t){const n=new zX("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(AQ("delete")||AQ("void")||AQ("typeof"))throw new Error(GX);t=RQ()}}return t}function LQ(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function BQ(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,u,l;if(e=IX,u=PQ(),0===(i=LQ(r=IX)))return u;for(r.prec=i,pQ(),t=[e,IX],o=[u,r,a=PQ()];(i=LQ(IX))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=gQ(s,u,a),o.push(n);(r=pQ()).prec=i,o.push(r),t.push(IX),n=PQ(),o.push(n)}for(n=o[l=o.length-1],t.pop();l>1;)t.pop(),n=gQ(o[l-1].value,o[l-2],n),l-=2;return n}(),SQ("?")&&(pQ(),t=BQ(),EQ(":"),e=function(e,t,n){const r=new zX("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,BQ())),e}function IQ(){const e=BQ();if(SQ(","))throw new Error(GX);return e}function jQ(e){LX=0,BX=(PX=e).length,IX=null,mQ();const t=IQ();if(2!==IX.type)throw new Error("Unexpect token after expression.");return t}var UQ={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function qQ(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&qE("Missing arguments to clamp function."),t.length>3&&qE("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&qE("Missing arguments to if function."),t.length>3&&qE("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function WQ(e){const t=(e=e||{}).allowed?lA(e.allowed):{},n=e.forbidden?lA(e.forbidden):{},r=e.constants||UQ,i=(e.functions||qQ)(f),o=e.globalvar,a=e.fieldvar,s=CS(o)?o:e=>"".concat(o,'["').concat(e,'"]');let u={},l={},c=0;function f(e){if(QS(e))return e;const t=d[e.type];return null==t&&qE("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:BS(n,i)?qE("Illegal identifier: "+i):BS(r,i)?r[i]:BS(t,i)?i:(u[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(c+=1);const r=f(e.property);return n===a&&(l[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&qE("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=BS(i,t)&&i[t];return r||qE("Unrecognized function: "+t),CS(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{c+=1;const t=f(e.key);return c-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},t}return h.functions=i,h.constants=r,h}const HQ="intersect",VQ="union";function GQ(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=HE.getter||HE(r.field),VS(n=r.getter(e))&&(n=sS(n)),VS(o[s])&&(o[s]=sS(o[s])),VS(o[s][0])&&(o[s]=o[s].map(sS)),"E"===r.type){if(eS(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!WS(n,o[s]))return!1}else if("R-RE"===r.type){if(!WS(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!WS(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!WS(n,o[s],!1,!0))return!1;return!0}const YQ=HE("_vgsid_"),XQ=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>{return(r=e(t))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}(YQ),QQ=XQ.left,JQ=XQ.right;var KQ={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=sS(t[0]),r=sS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=sS(t[0]),r=sS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function ZQ(e,t,n,r){t[0].type!==EX&&qE("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@unit",s=":"+i;(t.length>=2&&aS(t).value)!==HQ||BS(r,a)||(r["@unit"]=n.getData(i).indataRef(n,o)),BS(r,s)||(r[s]=n.getData(i).tuplesRef())}function eJ(e){const t=this.context.data[e];return t?t.values.value:[]}const tJ=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},nJ=tJ("format"),rJ=tJ("timeFormat"),iJ=tJ("utcFormat"),oJ=tJ("timeParse"),aJ=tJ("utcParse"),sJ=new Date(2e3,0,1);function uJ(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(sJ.setYear(2e3),sJ.setMonth(e),sJ.setDate(t),rJ.call(this,sJ,n)):""}function lJ(e,t,n,r){t[0].type!==EX&&qE("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!BS(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function cJ(e,t,n,r){if(t[0].type===EX)fJ(n,r,t[0].value);else for(e in n.scales)fJ(n,r,e)}function fJ(e,t,n){const r="%"+n;if(!BS(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function dJ(e,t){let n;return CS(e)?e:QS(e)?(n=t.scales[e])&&n.value:void 0}function hJ(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=cJ,n._range=cJ,n._scale=cJ;const r=t=>"_["+(t.type===EX?iA("%"+t.value):iA("%")+"+"+e(t))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(r(e[0]),")"),_range:e=>"".concat(r(e[0]),".range()"),_scale:t=>"".concat(r(t[0]),"(").concat(e(t[1]),")")}}function pJ(e,t){return function(n,r,i){if(n){const t=dJ(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const mJ=pJ("area",(function(e){return uU=new _d,aU(e,lU),2*uU})),gJ=pJ("bounds",(function(e){var t,n,r,i,o,a,s;if(yU=gU=-(pU=mU=1/0),kU=[],aU(e,OU),n=kU.length){for(kU.sort(jU),t=1,o=[r=kU[0]];t<n;++t)UU(r,(i=kU[t])[0])||UU(r,i[1])?(IU(r[0],i[1])>IU(r[0],r[1])&&(r[1]=i[1]),IU(i[0],r[1])>IU(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=IU(r[1],i[0]))>a&&(a=s,pU=i[0],gU=r[1])}return kU=EU=null,pU===1/0||mU===1/0?[[NaN,NaN],[NaN,NaN]]:[[pU,mU],[gU,yU]]})),yJ=pJ("centroid",(function(e){qU=WU=HU=VU=GU=YU=XU=QU=0,JU=new _d,KU=new _d,ZU=new _d,aU(e,oq);var t=+JU,n=+KU,r=+ZU,i=Ij(t,n,r);return i<Cj&&(t=YU,n=XU,r=QU,WU<Aj&&(t=HU,n=VU,r=GU),(i=Ij(t,n,r))<Cj)?[NaN,NaN]:[Rj(n,t)*Oj,Yj(r/i)*Oj]}));function vJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function bJ(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function xJ(e){const t=lh(e);return.2126*bJ(t.r)+.7152*bJ(t.g)+.0722*bJ(t.b)}function wJ(e,t){return e===t||e!=e&&t!=t||(eS(e)?!(!eS(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!wJ(e[n],t[n]))return!1;return!0}(e,t):!(!tS(e)||!tS(t))&&_J(e,t))}function _J(e,t){for(const n in e)if(!wJ(e[n],t[n]))return!1;return!0}function kJ(e){return t=>_J(e,t)}const EJ={};function SJ(e){return eS(e)||ArrayBuffer.isView(e)?e:null}function AJ(e){return SJ(e)||(QS(e)?e:null)}const CJ=e=>e.data;function DJ(e,t){const n=eJ.call(t,e);return n.root&&n.root.lookup||{}}const MJ=()=>"undefined"!=typeof window&&window||null;const FJ={random:function(){return pF()},cumulativeNormal:SF,cumulativeLogNormal:NF,cumulativeUniform:PF,densityNormal:EF,densityLogNormal:FF,densityUniform:RF,quantileNormal:AF,quantileLogNormal:OF,quantileUniform:LF,sampleNormal:kF,sampleLogNormal:MF,sampleUniform:zF,isArray:eS,isBoolean:HS,isDate:VS,isDefined:function(e){return void 0!==e},isNumber:YS,isObject:tS,isRegExp:XS,isString:QS,isTuple:kM,isValid:function(e){return null!=e&&e==e},toBoolean:oA,toDate:sA,toNumber:sS,toString:uA,indexof:function(e,...t){return AJ(e).indexOf(...t)},join:function(e,...t){return SJ(e).join(...t)},lastindexof:function(e,...t){return AJ(e).lastIndexOf(...t)},replace:function(e,t,n){return CS(n)&&qE("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return SJ(e).slice().reverse()},slice:function(e,...t){return AJ(e).slice(...t)},flush:US,lerp:KS,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),zS(...e)},pad:nA,peek:aS,pluck:function(e,t){const n=EJ[t]||(EJ[t]=HE(t));return eS(e)?e.map(n):n(e)},span:rA,inrange:WS,truncate:cA,rgb:lh,lab:Ch,hcl:Th,hsl:gh,luminance:xJ,contrast:function(e,t){const n=xJ(e),r=xJ(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Ld,format:nJ,utcFormat:iJ,utcParse:aJ,utcOffset:RD,utcSequence:BD,timeFormat:rJ,timeParse:oJ,timeOffset:zD,timeSequence:LD,timeUnitSpecifier:sD,monthFormat:function(e){return uJ.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return uJ.call(this,e,1,"%b")},dayFormat:function(e){return uJ.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return uJ.call(this,0,2+e,"%a")},quarter:kS,utcquarter:ES,week:fD,utcweek:yD,dayofyear:cD,utcdayofyear:gD,warn:function(){return vJ(this.context.dataflow,"warn",arguments)},info:function(){return vJ(this.context.dataflow,"info",arguments)},debug:function(){return vJ(this.context.dataflow,"debug",arguments)},extent:RS,inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new oR).set(r[0],r[1],i[0],i[1]);return FB(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=SS(e.marktype),r=SS(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))},clampRange:AS,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=MJ();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=MJ();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return G$(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(QE).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?Dz(n,t=t||yz(e)):e}},panLinear:pS,panLog:mS,panPow:gS,panSymlog:yS,zoomLinear:bS,zoomLog:xS,zoomPow:wS,zoomSymlog:_S,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c,f,d=s.changes;if(!1===a._trigger||!(u.value.length||t||r))return 0;if((!d||d.stamp<l)&&(s.changes=d=a.changeset(),d.stamp=l,a.runAfter((()=>{s.modified=!0,a.pulse(u,d).run()}),!0,1)),n&&(c=!0===n?QE:eS(n)||kM(n)?n:kJ(n),d.remove(c)),t&&d.insert(t),r&&(c=kJ(r),u.value.some(c)?d.remove(c):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}},NJ=["view","item","group","xy","x","y"],OJ="this.",$J={},TJ={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(iA("$"+e),"]"),functions:function(e){const t=qQ(e);NJ.forEach((e=>t[e]="event.vega."+e));for(const e in FJ)t[e]=OJ+e;return zS(t,hJ(e,FJ,$J)),t},constants:UQ,visitors:$J},zJ=WQ(TJ);function RJ(e,t,n){return 1===arguments.length?FJ[e]:(FJ[e]=t,n&&($J[e]=n),zJ&&(zJ.functions[e]=OJ+e),this)}function PJ(e,t){const n={};let r;try{r=jQ(e=QS(e)?e:iA(e)+"")}catch(t){qE("Expression parse error: "+e)}r.visit((e=>{if(e.type!==MX)return;const r=e.callee.name,i=TJ.visitors[r];i&&i(r,e.arguments,t,n)}));const i=zJ(r);return i.globals.forEach((e=>{const r="$"+e;!BS(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:zS({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}RJ("bandwidth",(function(e,t){const n=dJ(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),cJ),RJ("copy",(function(e,t){const n=dJ(e,(t||this).context);return n?n.copy():void 0}),cJ),RJ("domain",(function(e,t){const n=dJ(e,(t||this).context);return n?n.domain():[]}),cJ),RJ("range",(function(e,t){const n=dJ(e,(t||this).context);return n&&n.range?n.range():[]}),cJ),RJ("invert",(function(e,t,n){const r=dJ(e,(n||this).context);return r?eS(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),cJ),RJ("scale",(function(e,t,n){const r=dJ(e,(n||this).context);return r?r(t):void 0}),cJ),RJ("gradient",(function(e,t,n,r,i){e=dJ(e,(i||this).context);const o=dz(t,n);let a=e.domain(),s=a[0],u=aS(a),l=GE;return u-s?l=zT(e,s,u):e=(e.interpolator?_T("sequential")().interpolator(e.interpolator()):_T("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==aS(a)&&a.push(u)),a.forEach((t=>o.stop(l(t),e(t)))),o}),cJ),RJ("geoArea",mJ,cJ),RJ("geoBounds",gJ,cJ),RJ("geoCentroid",yJ,cJ),RJ("geoShape",(function(e,t,n){const r=dJ(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),cJ),RJ("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==EX&&qE("First argument to indata must be a string literal."),t[1].type!==EX&&qE("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;BS(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),RJ("data",eJ,lJ),RJ("treePath",(function(e,t,n){const r=DJ(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(CJ):void 0}),lJ),RJ("treeAncestors",(function(e,t){const n=DJ(e,this)[t];return n?n.ancestors().map(CJ):void 0}),lJ),RJ("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u["index:unit"]&&u["index:unit"].value:void 0,f=n===HQ,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=GQ(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=GQ(t,r)))return s;return d&&f}),ZQ),RJ("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,a=n===HQ,s=YQ(t),u=QQ(i,s);if(u===i.length)return!1;if(YQ(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(JQ(i,s)-u<o.size)return!1}return!0}),ZQ),RJ("vlSelectionResolve",(function(e,t,n,r){for(var i,o,a,s,u,l,c,f,d,h,p,m=this.context.data[e],g=m?m.values.value:[],y={},v={},b={},x=g.length,w=0;w<x;++w){for(s=(i=g[w]).unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=(l=y[u.field]||(y[u.field]={}))[s]||(l[s]=[]),b[u.field]=f=u.type.charAt(0),d=KQ[f+"_union"],l[s]=d(c,SS(a[h]));n&&(c=v[s]||(v[s]=[])).push(SS(a).reduce(((e,t,n)=>(e[o[n].field]=t,e)),{}))}if(t=t||VQ,Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:KQ[b[e]+"_"+t](n,r)))})),g=Object.keys(v),n&&g.length){y[r?"vlPoint":"vlMulti"]=t===VQ?{or:g.reduce(((e,t)=>(e.push(...v[t]),e)),[])}:{and:g.map((e=>({or:v[e]})))}}return y}),ZQ),RJ("vlSelectionTuples",(function(e,t){return e.map((e=>zS({values:t.fields.map((t=>(t.getter||(t.getter=HE(t.field)))(e.datum)))},t)))}));const LJ=lA(["rule"]),BJ=lA(["group","image","rect"]);function IJ(e){return(e+"").toLowerCase()}function jJ(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var UJ={operator:(e,t)=>jJ(e,["_"],t.code),parameter:(e,t)=>jJ(e,["datum","_"],t.code),event:(e,t)=>jJ(e,["event"],t.code),handler:(e,t)=>jJ(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+iA(e)+"]";i+="$=".concat(r[e].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(e,t){let n="";return LJ[t]||(e.x2&&(e.x?(BJ[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(BJ[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",jJ(e,["item","_"],i)},codegen:{get:function(e){const t="[".concat(e.map(iA).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,a,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function qJ(e,t,n){if(!e||!tS(e))return e;for(let r,i=0,o=WJ.length;i<o;++i)if(r=WJ[i],BS(e,r.key))return r.parse(e,t,n);return e}var WJ=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||qE("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=JS(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=PE(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=HE(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=PE(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=SS(e.$compare).map((e=>e&&e.$tupleid?EM:e));return t.fn[n]||(t.fn[n]=DS(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return EM}}];const HJ={skip:!0};function VJ(e,t,n,r){return new GJ(e,t,n,r)}function GJ(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||UJ,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function YJ(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function XJ(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}GJ.prototype=YJ.prototype={fork:function(){const e=new YJ(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===IJ(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve:function(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[IJ(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;"operator"!==IJ(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||qE("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=eS(i)?i.map((e=>qJ(e,n,t))):qJ(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map((e=>n.get(e))))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&qE("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=tS(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||qE("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],HJ)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(QE).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};const QJ="default";function JJ(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function KJ(e,t){var n=e._runtime.data;return BS(n,t)||qE("Unrecognized data set: "+t),n[t]}function ZJ(e,t){NM(t)||qE("Second argument to changes must be a changeset.");const n=KJ(this,e);return n.modified=!0,this.pulse(n.input,t)}function eK(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function tK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function nK(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function rK(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=nK(e),(r=pL(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;QS(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:$S(e),item:$S(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const iK="view",oK={trap:!1};function aK(e,t,n,r){e._eventListeners.push({type:n,sources:SS(t),handler:r})}function sK(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||tS(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function uK(e){return e.item}function lK(e){return e.item.mark.source}function cK(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function fK(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function dK(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),aK(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function hK(e,t,n,r){const i=r.signal(n.signal),o=fK("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(fK("label"));a.appendChild(fK("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=pK;switch(n.input){case"checkbox":s=mK;break;case"select":s=gK;break;case"radio":s=yK;break;case"range":s=vK}s(e,a,n,i)}function pK(e,t,n,r){const i=fK("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function mK(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=fK("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function gK(e,t,n,r){const i=fK("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};bK(e,r)&&(n.selected=!0),i.appendChild(fK("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(bK(n.options[t],e))return void(i.selectedIndex=t)}}function yK(e,t,n,r){const i=fK("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};bK(t,r)&&(s.checked=!0);const u=fK("input",s);u.addEventListener("change",(()=>e.update(t)));const l=fK("label",{},(o[a]||t)+"");return l.prepend(u),i.appendChild(l),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)bK(n[e].value,t)&&(n[e].checked=!0)}}function vK(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Md(o,i,100),s=fK("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=fK("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=e=>{s.value=e,u.textContent=e}}function bK(e,t){return e===t||e+""==t+""}function xK(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,eK(e),tK(e),nK(e),i,o).background(e.background())}function wK(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function _K(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const kK=e=>+e||0;function EK(e){return tS(e)?{top:kK(e.top),bottom:kK(e.bottom),left:kK(e.left),right:kK(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(kK(e))}async function SK(e,t,n,r){const i=MB(t),o=i&&i.headless;return o||qE("Unrecognized renderer type: "+t),await e.runAsync(),xK(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var AK="width",CK="height",DK="padding",MK={skip:!0};function FK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===DK?r.left+r.right:0)}function NK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===DK?r.top+r.bottom:0)}function OK(e,t){return t.modified&&eS(t.input.value)&&e.indexOf("_:vega:_")}function $K(e,t){return!("parent"===e||t instanceof iF.proxy)}function TK(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":eS(e)?zK(e):tS(e)&&!VS(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(eS(n)?zK(n):RK(n))})).join("\n")):e+"";var t}(r))}function zK(e){return"["+e.map(RK).join(", ")+"]"}function RK(e){return eS(e)?"[…]":tS(e)&&!VS(e)?"{…}":e}function PK(e,t){const n=this;if(t=t||{},tF.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=zS({},e.locale,t.locale);n.locale(pM(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||CB.Canvas,n._scenegraph=new sL;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||TK,n._redraw=!0,n._handler=(new $L).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=zS({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{eS(e[t])&&(e[t]=lA(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return VJ(e,iF,FJ,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:zS({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=FK(n,n._width),n._viewHeight=NK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=FK(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=NK(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:QJ,item:null}));e.on(e.events("view","mousemove"),t,((e,n)=>{const r=t.value,i=r?QS(r)?r:r.user:QJ,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return QS(n)||(r=n.item,n=n.user),JJ(e,n&&n!==QJ?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function LK(e,t){return BS(e._signals,t)?e._signals[t]:qE("Unrecognized signal name: "+iA(t))}function BK(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function IK(e,t,n,r){let i=BK(n,r);return i||(i=wK(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function jK(e,t,n){const r=BK(t,n);return r&&t._targets.remove(r),e}qS(PK,tF,{evaluate:async function(e,t,n){if(await tF.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=nK(r=this),o=eK(r),a=tK(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((e=>{try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&xM(this,n),this},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&XJ(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){const r=LK(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",EK(e)):EK(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(MB(e)||qE("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(tF.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(LK(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(AK,n,MK),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(CK,r,MK),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)},addEventListener:function(e,t,n){let r=t;return n&&!1===n.trap||(r=wK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return IK(this,e,LK(this,e),t)},removeSignalListener:function(e,t){return jK(this,LK(this,e),t)},addDataListener:function(e,t){return IK(this,e,KJ(this,e).values,t)},removeDataListener:function(e,t){return jK(this,KJ(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){const t=JJ(this,null);this._globalCursor=!!e,t&&JJ(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new Lb,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?Rb():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,o=new IM(n),a=function(n,r){i.runAsync(null,(()=>{e===iK&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(rK(i,n,r))}))};if("timer"===e)sK(i,"timer",t)&&i.timer(a,t);else if(e===iK)sK(i,"view",t)&&i.addEventListener(t,a,oK);else if("window"===e?sK(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&sK(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,a);aK(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",uK),lK,cK(e)),this.on(this.events("view","mouseout",uK),lK,cK(t)),this},data:function(e,t){return arguments.length<2?KJ(this,e).values.value:ZJ.call(this,e,OM().remove(QE).insert(t))},change:ZJ,insert:function(e,t){return ZJ.call(this,e,OM().insert(t))},remove:function(e,t){return ZJ.call(this,e,OM().remove(t))},scale:function(e){var t=this._runtime.scales;return BS(t,e)||qE("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=MB(r);e=n._el=e?_K(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),XJ(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||$L,s=e?o.renderer:o.headless;return n._renderer=s?xK(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),wK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,nK(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=_K(n,t,!0):e.appendChild(fK("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=_K(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=TS(r.debounce,i.update))),(null==r.input&&r.element?dK:hK)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==CB.Canvas&&e!==CB.SVG&&e!==CB.PNG&&qE("Unrecognized image type: "+e);const n=await SK(this,e,t);return e===CB.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await SK(this,CB.Canvas,e,t)).canvas()},toSVG:async function(e){return(await SK(this,CB.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:OK,signals:$K,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}});const UK="[",qK="]",WK=/[[\]{}]/,HK={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let VK,GK;function YK(e,t,n){return VK=t||"view",GK=n||HK,QK(e.trim()).map(JK)}function XK(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function QK(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=XK(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function JK(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=XK(e,r,qK,UK,qK),r===t)throw"Empty between selector: "+e;if(n=QK(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;n=n.map(JK);const i=JK(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:VK},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,l=0;if("}"===e[u-1]){if(l=e.lastIndexOf("{"),!(l>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,u-1))}catch(t){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,l).trim()).length,l=0}if(!u)throw e;"@"===e[0]&&(a=++l);r=XK(e,l,":"),r<u&&(n.push(e.substring(s,r).trim()),s=l=++r);if(l=XK(e,l,UK),l===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,l).trim()),i=[],s=++l,s===u)throw"Unmatched left bracket: "+e;for(;l<u;){if(l=XK(e,l,qK),l===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==UK)throw"Expected left bracket: "+e;s=++l}if(!(u=n.length)||WK.test(n[u-1]))throw"Invalid event selector: "+e;u>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],GK[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function KK(e){return tS(e)?e:{type:e||"pad"}}const ZK=e=>+e||0;function eZ(e){return tS(e)?e.signal?e:{top:ZK(e.top),bottom:ZK(e.bottom),left:ZK(e.left),right:ZK(e.right)}:{top:t=ZK(e),bottom:t,left:t,right:t};var t}const tZ=e=>tS(e)&&!eS(e)?zS({},e):{value:e};function nZ(e,t,n,r){if(null!=n){return tS(n)&&!eS(n)||eS(n)&&n.length&&tS(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function rZ(e,t,n){for(const n in t)nZ(e,n,t[n]);for(const t in n)nZ(e,t,n[t],"update")}function iZ(e,t,n){for(const r in t)n&&BS(n,r)||(e[r]=zS(e[r]||{},t[r]));return e}function oZ(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const aZ="mark",sZ="frame",uZ="scope",lZ="legend-label",cZ="title-text",fZ="title-subtitle";function dZ(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const hZ=e=>QS(e)?iA(e):e.signal?"(".concat(e.signal,")"):yZ(e);function pZ(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:iA(e)));for(;t.length&&null==aS(t);)t.pop();return t.unshift(hZ(e.gradient)),"gradient(".concat(t.join(","),")")}(e);let t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?mZ("hcl",e.h,e.c,e.l):e.h||e.s?mZ("hsl",e.h,e.s,e.l):e.l||e.a?mZ("lab",e.l,e.a,e.b):e.r||e.g||e.b?mZ("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?yZ(e.field):void 0!==e.value?iA(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=hZ(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1==+e.band?"":"*"+gZ(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(gZ(e.exponent),")")),null!=e.mult&&(t+="*".concat(gZ(e.mult))),null!=e.offset&&(t+="+".concat(gZ(e.offset))),e.round&&(t="round(".concat(t,")")),t}const mZ=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(pZ).join(","),")+'')");function gZ(e){return tS(e)?"("+pZ(e)+")":e}function yZ(e){return vZ(tS(e)?e:{datum:e})}function vZ(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):qE("Invalid field reference: "+iA(e));return e.signal||(r=QS(r)?WE(r).map(iA).join("]["):vZ(r)),t+"["+r+"]"}function bZ(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,u,l,c;for(u in u="lineBreak","text"!==t||null==i[u]||oZ(u,e)||dZ(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===sZ?i.group:n===aZ?zS({},i.mark,i[t]):null,c)l=oZ(u,e)||("fill"===u||"stroke"===u)&&(oZ("fill",e)||oZ("stroke",e)),l||dZ(o,u,c[u]);for(u in SS(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)oZ(t,e)||dZ(o,t,n[t])})),e=zS({},e),o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=zS(a,e.enter),s&&(e.update=zS(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)a[n]=xZ(e[n],t,o,i);return o}function xZ(e,t,n,r){const i={},o={};for(const t in e)null!=e[t]&&(i[t]=wZ((a=e[t],eS(a)?function(e){let t="";return e.forEach((e=>{const n=pZ(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===aS(t)&&(t+="null"),t}(a):pZ(a)),r,n,o));var a;return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function wZ(e,t,n,r){const i=PJ(e,t);return i.$fields.forEach((e=>r[e]=1)),zS(n,i.$params),i.$expr}const _Z=["value","update","init","react","bind"];function kZ(e,t){qE(e+' for "outer" push: '+iA(t))}function EZ(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||kZ("No prior signal definition",n),_Z.forEach((t=>{void 0!==e[t]&&kZ("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function SZ(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function AZ(e,t,n,r){return new SZ(e,t,n,r)}function CZ(e,t){return AZ("operator",e,t)}function DZ(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function MZ(e,t){return t?{$field:e,$name:t}:{$field:e}}const FZ=MZ("key");function NZ(e,t){return{$compare:e,$order:t}}function OZ(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const $Z="scope",TZ="view";function zZ(e){return e&&e.signal}function RZ(e){if(zZ(e))return!0;if(tS(e))for(const t in e)if(RZ(e[t]))return!0;return!1}function PZ(e,t){return null!=e?e:t}function LZ(e){return e&&e.signal||e}const BZ="timer";function IZ(e,t){return(e.merge?jZ:e.stream?UZ:e.type?qZ:qE("Invalid stream specification: "+iA(e)))(e,t)}function jZ(e,t){const n=WZ({merge:e.merge.map((e=>IZ(e,t)))},e,t);return t.addStream(n).id}function UZ(e,t){const n=WZ({stream:IZ(e.stream,t)},e,t);return t.addStream(n).id}function qZ(e,t){let n;var r;e.type===BZ?(n=t.event(BZ,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===$Z?TZ:r||TZ,e.type);const i=WZ({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function WZ(e,t,n){let r=t.between;return r&&(2!==r.length&&qE('Stream "between" parameter must have 2 entries: '+iA(t)),e.between=[IZ(r[0],n),IZ(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===$Z&&r.push("inScope(event.item)"),r.length&&(e.filter=PJ("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const HZ={code:"_.$value",ast:{type:"Identifier",value:"value"}};function VZ(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||qE("Signal update missing events specification."),QS(o)&&(o=YK(o,t.isSubscope()?$Z:TZ)),o=SS(o).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[GZ(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&qE("Signal encode and update are mutually exclusive."),a="encode(item(),"+iA(r)+")"),i.update=QS(a)?PJ(a,t):null!=a.expr?PJ(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:HZ,$params:{$value:t.signalRef(a.signal)}}:qE("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(zS(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):IZ(e,t)}}(e,t),i))))}function GZ(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const YZ=e=>(t,n,r)=>AZ(e,n,t||void 0,r),XZ=YZ("aggregate"),QZ=YZ("axisticks"),JZ=YZ("bound"),KZ=YZ("collect"),ZZ=YZ("compare"),e0=YZ("datajoin"),t0=YZ("encode"),n0=YZ("expression"),r0=YZ("facet"),i0=YZ("field"),o0=YZ("key"),a0=YZ("legendentries"),s0=YZ("load"),u0=YZ("mark"),l0=YZ("multiextent"),c0=YZ("multivalues"),f0=YZ("overlap"),d0=YZ("params"),h0=YZ("prefacet"),p0=YZ("projection"),m0=YZ("proxy"),g0=YZ("relay"),y0=YZ("render"),v0=YZ("scale"),b0=YZ("sieve"),x0=YZ("sortitems"),w0=YZ("viewlayout"),_0=YZ("values");let k0=0;const E0={min:"min",max:"max",count:"sum"};function S0(e,t){const n=t.getScale(e.name).params;let r;var i;for(r in n.domain=M0(e.domain,e,t),null!=e.range&&(n.range=P0(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=A0(e.type||e),null!=e.gamma&&(t.interpolateGamma=A0(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=tS(i=e.nice)?{interval:A0(i.interval),step:A0(i.step)}:A0(i)),null!=e.bins&&(n.bins=function(e,t){return e.signal||eS(e)?C0(e,t):t.objectProperty(e)}(e.bins,t)),e)BS(n,r)||"name"===r||(n[r]=A0(e[r],t))}function A0(e,t){return tS(e)?e.signal?t.signalRef(e.signal):qE("Unsupported object: "+iA(e)):e}function C0(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>A0(e,t)))}function D0(e){qE("Can not find data set: "+iA(e))}function M0(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(eS(e)?F0:e.fields?O0:N0)(e,t,n);null==t.domainMin&&null==t.domainMax||qE("No scale domain defined for domainMin/domainMax to override.")}function F0(e,t,n){return e.map((e=>A0(e,n)))}function N0(e,t,n){const r=n.getData(e.data);return r||D0(e.data),AT(t.type)?r.valuesRef(n,e.field,T0(e.sort,!1)):FT(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function O0(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=QS(t)?{data:r,field:t}:eS(t)||t.signal?function(e,t){const n="_:vega:_"+k0++,r=KZ({});if(eS(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+iA(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,b0({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(AT(t.type)?$0:FT(t.type)?z0:R0)(e,n,i)}function $0(e,t,n){const r=T0(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||D0(e.data),n.countsRef(t,e.field,r)})),s={groupby:FZ,pulse:a};r&&(i=r.op||"count",o=r.field?OZ(i,r.field):"count",s.ops=[E0[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(XZ(s));const u=t.add(KZ({pulse:DZ(i)}));return o=t.add(_0({field:FZ,sort:t.sortRef(r),pulse:DZ(u)})),DZ(o)}function T0(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!E0[e.op]&&qE("Multiple domain scales can not be sorted using "+e.op):qE("No field provided for sort aggregate op: "+e.op):tS(e)?e.field="key":e={field:"key"}),e}function z0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||D0(e.data),n.domainRef(t,e.field)}));return DZ(t.add(c0({values:r})))}function R0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||D0(e.data),n.extentRef(t,e.field)}));return DZ(t.add(l0({extents:r})))}function P0(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(QS(i)){if(r&&BS(r,i))return P0(e=zS({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=AT(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:qE("Unrecognized scale range value: "+iA(i))}else{if(i.scheme)return n.scheme=eS(i.scheme)?C0(i.scheme,t):A0(i.scheme,t),i.extent&&(n.schemeExtent=C0(i.extent,t)),void(i.count&&(n.schemeCount=A0(i.count,t)));if(i.step)return void(n.rangeStep=A0(i.step,t));if(AT(e.type)&&!eS(i))return M0(i,e,t);eS(i)||qE("Unsupported range type: "+iA(i))}return i.map((e=>(eS(e)?C0:A0)(e,t)))}function L0(e,t,n){return eS(e)?e.map((e=>L0(e,t,n))):tS(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:qE("Unsupported parameter object: "+iA(e)):e}const B0="top",I0="left",j0="right",U0="bottom",q0="center",W0="index",H0="label",V0="perc",G0="value",Y0="guide-label",X0="guide-title",Q0="group-title",J0="group-subtitle",K0="symbol",Z0="gradient",e1="discrete",t1="size",n1=[t1,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],r1={name:1,style:1,interactive:1},i1={value:0},o1={value:1},a1="group",s1="rect",u1="rule",l1="text";function c1(e){return e.type=a1,e.interactive=e.interactive||!1,e}function f1(e,t){const n=(n,r)=>PZ(e[n],PZ(t[n],r));return n.isVertical=n=>"vertical"===PZ(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>PZ(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>PZ(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>PZ(e.columns,PZ(t.columns,+n.isVertical(!0))),n}function d1(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function h1(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}const p1=h1(iA(I0),iA(j0),iA(q0));function m1(e,t){return t?e?tS(e)?Object.assign({},e,{offset:m1(e.offset,t)}):{value:e,offset:t}:t:e}function g1(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=iZ(e.encode,t,r1)):e.interactive=!1,e}function y1(e,t,n,r){const i=f1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:i1,x:i1,y:i1,width:tZ(f),height:tZ(d)},update:zS({},u,{opacity:o1,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:i1}};return rZ(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),g1({type:s1,role:"legend-gradient",encode:h},r)}function v1(e,t,n,r,i){const o=f1(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:i1,fill:{scale:t,field:G0}};p[l]={signal:h+"datum."+V0,mult:u},p[c]=i1,p[f]={signal:h+"datum.perc2",mult:u},p[d]=tZ(s);const m={enter:p,update:zS({},p,{opacity:o1}),exit:{opacity:i1}};return rZ(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),g1({type:s1,role:"legend-band",key:G0,from:i,encode:m},r)}const b1="datum.".concat(V0,'<=0?"').concat(I0,'":datum.').concat(V0,'>=1?"').concat(j0,'":"').concat(q0,'"'),x1="datum.".concat(V0,'<=0?"').concat(U0,'":datum.').concat(V0,'>=1?"').concat(B0,'":"').concat("middle",'"');function w1(e,t,n,r){const i=f1(e,t),o=i.isVertical(),a=tZ(i.gradientThickness()),s=i.gradientLength();let u,l,c,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:i1},update:l={opacity:o1,text:{field:H0}},exit:{opacity:i1}};return rZ(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:PZ(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=l.baseline={signal:x1},c="y",f="x",h="1-"):(u.align=l.align={signal:b1},u.baseline={value:"top"},c="x",f="y"),u[c]=l[c]={signal:h+"datum."+V0,mult:s},u[f]=l[f]=a,a.offset=PZ(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum.index"}:void 0,g1({type:l1,role:lZ,style:Y0,key:G0,from:r,encode:p,overlap:d},n)}function _1(e,t,n,r,i){const o=f1(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(t1),h=l?tZ(l):{field:t1},p="datum.".concat(W0),m="max(1, ".concat(i,")");let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:i1,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:o1,x:y.x,y:y.y},exit:{opacity:i1}};let w=null,_=null;e.fill||(w=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),rZ(g,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),n1.forEach((t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:G0})}));const k=g1({type:"symbol",role:"legend-symbol",key:G0,from:f,clip:!!l||void 0,encode:g},n.symbols),E=tZ(c);E.offset=o("labelOffset"),g={enter:y={opacity:i1,x:{signal:d,offset:E},y:h},update:v={opacity:o1,text:{field:H0},x:y.x,y:y.y},exit:{opacity:i1}},rZ(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=g1({type:l1,role:lZ,style:Y0,key:G0,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:i1,height:l?tZ(l):i1,opacity:i1},exit:{opacity:i1},update:v={opacity:o1,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),x={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),c1({role:uZ,from:r={facet:{data:r,name:"value",groupby:W0}},encode:iZ(g,a,r1),marks:[k,S],name:u,interactive:s,sort:x})}const k1='item.orient === "left"',E1='item.orient === "right"',S1="(".concat(k1," || ").concat(E1,")"),A1="datum.vgrad && ".concat(S1),C1=h1('"top"','"bottom"','"middle"'),D1=h1('"right"','"left"','"center"'),M1="datum.vgrad && ".concat(E1," ? (").concat(D1,") : (").concat(S1," && !(datum.vgrad && ").concat(k1,')) ? "left" : ').concat(p1),F1="item._anchor || (".concat(S1,' ? "middle" : "start")'),N1="".concat(A1," ? (").concat(k1," ? -90 : 90) : 0"),O1="".concat(S1," ? (datum.vgrad ? (").concat(E1,' ? "bottom" : "top") : ').concat(C1,') : "top"');function $1(e,t){let n;return tS(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+T1(e.path)+")":e.sphere&&(n="geoShape("+T1(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function T1(e){return tS(e)&&e.signal?e.signal:iA(e)}function z1(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===a1?uZ:t||aZ:t}function R1(e){return{marktype:e.type,name:e.name||void 0,role:e.role||z1(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function P1(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function L1(e,t){const n=oF(e.type);n||qE("Unrecognized transform type: "+iA(e.type));const r=AZ(n.type.toLowerCase(),null,B1(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function B1(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=I1(i,t,n)}return r}function I1(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){QS(t.from)||qE('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(eS(r)||qE("Expected an array of sub-parameters. Instead: "+iA(r)),r.map((t=>U1(e,t,n)))):U1(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!zZ(i)?i.map((t=>j1(e,t,n))):j1(e,i,n):void(e.required&&qE("Missing required "+iA(t.type)+" parameter: "+iA(e.name)))}function j1(e,t,n){const r=e.type;if(zZ(t))return V1(r)?qE("Expression references can not be signals."):G1(r)?n.fieldRef(t):Y1(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||G1(r);return i&&q1(t)?n.exprRef(t.expr,t.as):i&&W1(t)?MZ(t.field,t.as):V1(r)?PJ(t,n):H1(r)?DZ(n.getData(t).values):G1(r)?MZ(t):Y1(r)?n.compareRef(t):t}}function U1(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||qE("Unsupported parameter: "+iA(t));const o=zS(B1(i,t,n),i.key);return DZ(n.add(d0(o)))}const q1=e=>e&&e.expr,W1=e=>e&&e.field,H1=e=>"data"===e,V1=e=>"expr"===e,G1=e=>"field"===e,Y1=e=>"compare"===e;function X1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:DZ(t.getData(e.data).output)}function Q1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function J1(e){return QS(e)?e:null}function K1(e,t,n){const r=OZ(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Z1(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=function(e){return tS(e)?("descending"===e.order?"-":"+")+OZ(e.op,e.field):""}(o);let l,c,f=J1(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",l=s[f]),!l){const n=o?{field:FZ,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:DZ(t.output)};u&&(n.sort=e.sortRef(o)),c=e.add(AZ(r,void 0,n)),a&&(t.index[i]=c),l=DZ(c),null!=f&&(s[f]=l)}return l}function e2(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(CZ()),l=PJ("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map((e=>null==e?"null":e)).join(",")+"),0)",t);u.update=l.$expr,u.params=l.$params}function t2(e,t){const n=z1(e),r=e.type===a1,i=e.from&&e.from.facet,o=e.overlap;let a,s,u,l,c,f,d,h=e.layout||n===uZ||n===sZ;const p=n===aZ||h||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||qE("Only group marks can be faceted."),null!=r.field?a=s=X1(r,n):(e.data?s=DZ(n.getData(e.data).aggregate):(o=L1(zS({type:"aggregate",groupby:SS(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=X1(r,n),a=s=DZ(n.add(o))),i=n.keyRef(r.groupby,!0))):a=DZ(n.add(KZ(null,[{}]))),a||(a=X1(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(e0({key:m.key||(e.key?MZ(e.key):void 0),pulse:m.pulse,clean:!r}));const g=DZ(s);s=u=t.add(KZ({pulse:g})),s=t.add(u0({markdef:R1(e),interactive:P1(e.interactive,t),clip:$1(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:DZ(s)}));const y=DZ(s);s=l=t.add(t0(bZ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=L1(e,t),r=n.metadata;(r.generates||r.changes)&&qE("Mark transforms should not generate new data."),r.nomod||(l.params.mod=!0),n.params.pulse=DZ(s),t.add(s=n)})),e.sort&&(s=t.add(x0({sort:t.compareRef(e.sort),pulse:DZ(s)})));const v=DZ(s);(i||h)&&(h=t.add(w0({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=DZ(h));const b=t.add(JZ({mark:y,pulse:f||v}));d=DZ(b),r&&(p&&(a=t.operators,a.pop(),h&&a.pop()),t.pushState(v,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=X1(r,t);let a;r.name||qE("Facet must have a name: "+iA(r)),r.data||qE("Facet must reference a data set: "+iA(r)),r.field?a=t.add(h0({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(r0({key:t.keyRef(r.groupby),group:DZ(t.proxy(n.parent)),pulse:o})):qE("Facet must specify groupby or field: "+iA(r));const s=t.fork(),u=s.add(KZ()),l=s.add(b0({pulse:DZ(u)}));s.addData(i,new Q1(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(h0({pulse:n.pulse})),i=t.fork();i.add(b0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&a.push(h),a.push(b))),o&&(d=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:zZ(o)?n.signalRef(o.signal):o,method:zZ(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=zZ(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return DZ(n.add(f0(a)))}(o,d,t));const x=t.add(y0({pulse:d})),w=t.add(b0({pulse:DZ(x)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new Q1(t,u,x,w)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&qE("Marks only support modify triggers."),e2(e,t,c)})))}function n2(e,t){const n=t.config.legend,r=e.encode||{},i=f1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c,f,d,h=0;n1.forEach((t=>e[t]?(l[t]=e[t],h=h||e[t]):0)),h||qE("Missing valid scale for legend.");const p=function(e,t){let n=e.type||K0;e.type||1!==function(e){return n1.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=ST(t)?Z0:CT(t)?e1:K0);return n!==Z0?n:CT(t)?e1:Z0}(e,t.scaleType(h)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=DZ(t.add(KZ(null,[m]))),y=DZ(t.add(a0(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===Z0?(d=[y1(e,h,n,r.gradient),w1(e,n,r.labels,y)],f.count=f.count||t.signalRef("max(2,2*floor((".concat(LZ(i.gradientLength()),")/100))"))):p===e1?d=[v1(e,h,n,r.gradient,y),w1(e,n,r.labels,y)]:(c=function(e,t){const n=f1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[_1(e,n,r,y,LZ(c.columns))],f.size=function(e,t,n){const r=LZ(i2("size",e,n)),i=LZ(i2("strokeWidth",e,n)),o=LZ(function(e,t,n){return d1("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,Y0));return PJ("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),t)}(e,t,d[0].marks)),d=[c1({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=f1(e,t),o={enter:{opacity:i1},update:{opacity:o1,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:i1}};return rZ(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:F1},angle:{signal:N1},align:{signal:M1},baseline:{signal:O1},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),g1({type:l1,role:"legend-title",style:X0,from:r,encode:o},n)}(e,n,r.title,g)),t2(c1({role:"legend",from:g,encode:iZ(r2(i,e,n),o,r1),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function r2(e,t,n){const r={enter:{},update:{}};return rZ(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function i2(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):d1(e,n[0].encode)}Q1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=DZ(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new Q1(e,o,i,r,a)},Q1.prototype={countsRef:function(e,t,n){const r=this,i=r.counts||(r.counts={}),o=J1(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&K1(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:DZ(r.output)},n&&n.field&&K1(e,u,n),s=e.add(XZ(u)),a=e.add(KZ({pulse:DZ(s)})),a={agg:s,ref:DZ(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef:function(){return DZ(this.values)},extentRef:function(e,t){return Z1(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return Z1(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return Z1(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return Z1(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return Z1(e,this,"indata","tupleindex",t,!0,!0)}};const o2='item.orient==="'.concat(I0,'"?-90:item.orient==="').concat(j0,'"?90:0');function a2(e,t){const n=f1(e=QS(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l=DZ(t.add(KZ(null,[{}])));return u.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),g1({type:l1,role:cZ,style:Q0,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||zS({name:e.name,interactive:e.interactive,style:e.style},t)}(e),l)),e.subtitle&&u.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return rZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),g1({type:l1,role:fZ,style:J0,from:r,encode:a},n)}(e,n,r.subtitle,l)),t2(c1({role:"title",from:l,encode:s2(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function s2(e,t){const n={enter:{},update:{}};return rZ(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:p1},angle:{signal:o2},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),iZ(n,t,r1)}function u2(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(L1(e,t))})),e.on&&e.on.forEach((n=>{e2(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,u,l=null,c=!1,f=!1;e.values?zZ(e.values)||RZ(e.format)?(r.push(c2(t,e)),r.push(l=l2())):r.push(l=l2({$ingest:e.values,$format:e.format})):e.url?RZ(e.url)||RZ(e.format)?(r.push(c2(t,e)),r.push(l=l2())):r.push(l=l2({$request:e.url,$format:e.format})):e.source&&(l=i=SS(e.source).map((e=>DZ(t.getData(e).output))),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,l||u.source||r.push(l=l2()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=s:u.changes&&(l=null);i&&(a=i.length-1,r[0]=g0({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,l2()));l||r.push(l2());return r.push(b0({})),r}(e,t,n))}function l2(e){const t=KZ({},e);return t.metadata={source:!0},t}function c2(e,t){return s0({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const f2=e=>e===U0||e===B0,d2=(e,t,n)=>zZ(e)?v2(e.signal,t,n):e===I0||e===B0?t:n,h2=(e,t,n)=>zZ(e)?g2(e.signal,t,n):f2(e)?t:n,p2=(e,t,n)=>zZ(e)?y2(e.signal,t,n):f2(e)?n:t,m2=(e,t,n)=>zZ(e)?b2(e.signal,t,n):e===B0?{value:t}:{value:n},g2=(e,t,n)=>w2("".concat(e," === '").concat(B0,"' || ").concat(e," === '").concat(U0,"'"),t,n),y2=(e,t,n)=>w2("".concat(e," !== '").concat(B0,"' && ").concat(e," !== '").concat(U0,"'"),t,n),v2=(e,t,n)=>k2("".concat(e," === '").concat(I0,"' || ").concat(e," === '").concat(B0,"'"),t,n),b2=(e,t,n)=>k2("".concat(e," === '").concat(B0,"'"),t,n),x2=(e,t,n)=>k2("".concat(e," === '").concat(j0,"'"),t,n),w2=(e,t,n)=>(t=null!=t?tZ(t):t,n=null!=n?tZ(n):n,_2(t)&&_2(n)?(t=t?t.signal||iA(t.value):null,n=n?n.signal||iA(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[zS({test:e},t)].concat(n||[])),_2=e=>null==e||1===Object.keys(e).length,k2=(e,t,n)=>({signal:"".concat(e," ? (").concat(E2(t),") : (").concat(E2(n),")")}),E2=e=>zZ(e)?e.signal:null==e?null:iA(e),S2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function A2(e,t,n,r){let i;if(t&&BS(t,e))return t[e];if(BS(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][i]}return null}function C2(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function D2(e,t){return{scale:e.scale,range:t}}function M2(e,t,n,r,i){const o=f1(e,t),a=e.orient,s=e.gridScale,u=d2(a,1,-1),l=function(e,t){if(1===t);else if(tS(e)){let n=e=zS({},e);for(;null!=n.mult;){if(!tS(n.mult))return n.mult=zZ(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=zS({},n.mult)}n.mult=t}else e=zZ(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,u);let c,f,d;const h={enter:c={opacity:i1},update:d={opacity:o1},exit:f={opacity:i1}};rZ(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:G0,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=h2(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:zS(m,{mult:u,offset:l});return c.x=d.x=h2(a,p,g),c.y=d.y=p2(a,p,g),c.x2=d.x2=p2(a,y),c.y2=d.y2=h2(a,y),f.x=h2(a,p),f.y=p2(a,p),g1({type:u1,role:"axis-grid",key:G0,from:r,encode:h},n)}function F2(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function N2(e,t,n,r,i,o){const a=f1(e,t),s=e.orient,u=e.scale,l=d2(s,-1,1),c=LZ(a("labelFlush")),f=LZ(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,m=0===c||!!c;const g=tZ(i);g.mult=l,g.offset=tZ(a("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:G0,band:.5,offset:m1(o.offset,a("labelOffset"))},v=h2(s,m?F2(u,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>zZ(e)?x2(e.signal,t,n):e===j0?{value:t}:{value:n})(s,"left","right")),b=h2(s,m2(s,"bottom","top"),m?F2(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=F2(u,c,"-(".concat(f,")"),f,0);m=m&&f;const w={opacity:i1,x:h2(s,y,g),y:p2(s,y,g)},_={enter:w,update:p={opacity:o1,text:{field:H0},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:i1,x:w.x,y:w.y}};rZ(_,{dx:!d&&m?h2(s,x):null,dy:!h&&m?p2(s,x):null}),rZ(_,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let E=a("labelOverlap");return E=E||k?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:u,orient:s,tolerance:k}:null}:void 0,p.align!==v&&(p.align=S2(p.align,v)),p.baseline!==b&&(p.baseline=S2(p.baseline,b)),g1({type:l1,role:"axis-label",style:Y0,key:G0,from:r,encode:_,overlap:E},n)}function O2(e,t,n,r){const i=f1(e,t),o=e.orient,a=d2(o,-1,1);let s,u;const l={enter:s={opacity:i1,anchor:tZ(i("titleAnchor",null)),align:{signal:p1}},update:u=zS({},s,{opacity:o1,text:tZ(e.title)}),exit:{opacity:i1}},c={signal:'lerp(range("'.concat(e.scale,'"), ').concat(h1(0,1,.5),")")};return u.x=h2(o,c),u.y=p2(o,c),s.angle=h2(o,i1,((e,t)=>0===t?0:zZ(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t})(a,90)),s.baseline=h2(o,m2(o,U0,B0),{value:U0}),u.angle=s.angle,u.baseline=s.baseline,rZ(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=S2(tZ(e),n.update[t]),!1):!oZ(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?tZ(a):h2(t,tZ(a),tZ(o))}(i,o,l,n),l.update.align=S2(l.update.align,s.align),l.update.angle=S2(l.update.angle,s.angle),l.update.baseline=S2(l.update.baseline,s.baseline),g1({type:l1,role:"axis-title",style:X0,from:r,encode:l},n)}function $2(e,t){const n=function(e,t){var n,r,i,o,a,s,u,l,c=t.config,f=c.style,d=c.axis,h="band"===t.scaleType(e.scale)&&c.axisBand,p=e.orient;if(zZ(p)){const e=C2([c.axisX,c.axisY]),t=C2([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},e))n[i]=h2(p,A2(i,c.axisX,d,f),A2(i,c.axisY,d,f));for(i of(r={},t))r[i]=(o=p.signal,a=A2(i,c.axisTop,d,f),s=A2(i,c.axisBottom,d,f),u=A2(i,c.axisLeft,d,f),l=A2(i,c.axisRight,d,f),{signal:(null!=u?"".concat(o," === '").concat(I0,"' ? (").concat(E2(u),") : "):"")+(null!=s?"".concat(o," === '").concat(U0,"' ? (").concat(E2(s),") : "):"")+(null!=l?"".concat(o," === '").concat(j0,"' ? (").concat(E2(l),") : "):"")+(null!=a?"".concat(o," === '").concat(B0,"' ? (").concat(E2(a),") : "):"")+"(null)"})}else n=p===B0||p===U0?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?zS({},d,n,r,h):d}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=f1(e,n),l=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:"(".concat(t.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(t.signal,") === 'extent'")},tS(i)||(i={signal:"(".concat(t.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=DZ(t.add(KZ({},[c]))),d=DZ(t.add(QZ({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(M2(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(function(e,t,n,r,i,o){const a=f1(e,t),s=e.orient,u=d2(s,-1,1);let l,c,f;const d={enter:l={opacity:i1},update:f={opacity:o1},exit:c={opacity:i1}};rZ(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=tZ(i);h.mult=u;const p={scale:e.scale,field:G0,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=h2(s,i1,p),f.y2=l.y2=h2(s,h),c.x=h2(s,p),f.x=l.x=p2(s,i1,p),f.x2=l.x2=p2(s,h),c.y=p2(s,p),g1({type:u1,role:"axis-tick",key:G0,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(N2(e,n,r.labels,d,p,l))),c.domain&&h.push(function(e,t,n,r){const i=f1(e,t),o=e.orient;let a,s;const u={enter:a={opacity:i1},update:s={opacity:o1},exit:{opacity:i1}};rZ(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=D2(e,0),c=D2(e,1);return a.x=s.x=h2(o,l,i1),a.x2=s.x2=h2(o,c),a.y=s.y=p2(o,l,i1),a.y2=s.y2=p2(o,c),g1({type:u1,role:"axis-domain",from:r,encode:u},n)}(e,n,r.domain,f)),c.title&&h.push(O2(e,n,r.title,f)),t2(c1({role:"axis",from:f,encode:iZ(T2(u,e),i,r1),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function T2(e,t){const n={enter:{},update:{}};return rZ(n,{orient:e("orient"),offset:e("offset")||0,position:PZ(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function z2(e,t,n){const r=SS(e.signals),i=SS(e.scales);return n||r.forEach((e=>EZ(e,t))),SS(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=L0(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=L0(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";kT(n)||qE("Unrecognized scale type: "+iA(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),SS(e.data).forEach((e=>u2(e,t))),i.forEach((e=>S0(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?qE("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=PJ(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>VZ(e,t,n.id)))}(e,t))),SS(e.axes).forEach((e=>$2(e,t))),SS(e.marks).forEach((e=>t2(e,t))),SS(e.legends).forEach((e=>n2(e,t))),e.title&&a2(e.title,t),t.parseLambdas(),t}function R2(e,t){const n=t.config,r=DZ(t.root=t.add(CZ())),i=function(e,t){const n=n=>PZ(e[n],t[n]),r=[P2("background",n("background")),P2("autosize",KK(n("autosize"))),P2("padding",eZ(n("padding"))),P2("width",n("width")||0),P2("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),o={};return SS(e.signals).forEach((e=>{BS(i,e.name)?e=zS(i[e.name],e):r.push(e),o[e.name]=e})),SS(t.signals).forEach((e=>{BS(o,e.name)||BS(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>EZ(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(KZ()),a=t.add(t0(bZ((e=>iZ({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),a1,sZ,e.style,t,{pulse:DZ(o)}))),s=t.add(w0({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:DZ(a)}));t.operators.pop(),t.pushState(DZ(a),DZ(s),null),z2(e,t,i),t.operators.push(s);let u=t.add(JZ({mark:r,pulse:DZ(s)}));return u=t.add(y0({pulse:DZ(u)})),u=t.add(b0({pulse:DZ(u)})),t.addData("root",new Q1(t,o,o,u)),t}function P2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function L2(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function B2(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function I2(e){return(eS(e)?j2:U2)(e)}function j2(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(tS(t)?t.signal||I2(t):iA(t))}return n+"]"}function U2(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+iA(t)+":"+(tS(n)?n.signal||I2(n):iA(n));return r+"}"}function q2(e,t,n){return tS(e)||qE("Input Vega specification must be an object."),R2(e,new L2(t=rS(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}L2.prototype=B2.prototype={parse:function(e){return z2(e,this)},fork:function(){return new B2(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy:function(e){const t=e instanceof SZ?DZ(e):e;return this.add(m0({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState:function(e,t,n){this._encode.push(DZ(this.add(b0({pulse:e})))),this._parent.push(t),this._lookup.push(n?DZ(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return aS(this._parent)},encode:function(){return aS(this._encode)},lookup:function(){return aS(this._lookup)},markpath:function(){const e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(QS(e))return MZ(e,t);e.signal||qE("Unsupported field reference: "+iA(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=DZ(this.add(i0(e)))}return r},compareRef:function(e){let t=!1;const n=e=>zZ(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=SS(e.field).map(n),i=SS(e.order).map(n);return t?DZ(this.add(ZZ({fields:r,orders:i}))):NZ(r,i)},keyRef:function(e,t){let n=!1;const r=this.signals;return e=SS(e).map((e=>zZ(e)?(n=!0,DZ(r[e.signal])):e)),n?DZ(this.add(o0({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;const t=OZ(e.op,e.field),n=e.order||"ascending";return n.signal?DZ(this.add(ZZ({fields:t,orders:this.signalRef(n.signal)}))):NZ(t,n)},event:function(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return BS(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&qE("Duplicate signal name: "+iA(e));const n=t instanceof SZ?t:this.add(CZ(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||qE("Unrecognized signal name: "+iA(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?DZ(this.signals[e]):(BS(this.lambdas,e)||(this.lambdas[e]=this.add(CZ(null))),DZ(this.lambdas[e]))},parseLambdas:function(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=PJ(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&tS(e)?this.signalRef(e.signal||I2(e)):e},exprRef:function(e,t){const n={expr:PJ(e,this)};return t&&(n.expr.$name=t),DZ(this.add(n0(n)))},addBinding:function(e,t){this.bindings||qE("Nested signals do not support binding: "+iA(e)),this.bindings.push(zS({signal:e},t))},addScaleProj:function(e,t){BS(this.scales,e)&&qE("Duplicate scale or projection name: "+iA(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,v0(t))},addProjection:function(e,t){this.addScaleProj(e,p0(t))},getScale:function(e){return this.scales[e]||qE("Unrecognized scale name: "+iA(e)),this.scales[e]},scaleRef:function(e){return DZ(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return BS(this.data,e)&&qE("Duplicate data set name: "+iA(e)),this.data[e]=t},getData:function(e){return this.data[e]||qE("Undefined data set name: "+iA(e)),this.data[e]},addDataPipeline:function(e,t){return BS(this.data,e)&&qE("Duplicate data set name: "+iA(e)),this.addData(e,Q1.fromEntries(this,t))}},t(zE,"tupleid",(function(){return EM})),t(zE,"transforms",(function(){return iF})),t(zE,"transform",(function(){return aF})),t(zE,"isTuple",(function(){return kM})),t(zE,"ingest",(function(){return AM})),t(zE,"definition",(function(){return oF})),t(zE,"changeset",(function(){return OM})),t(zE,"Transform",(function(){return rF})),t(zE,"Pulse",(function(){return VM})),t(zE,"Parameters",(function(){return TM})),t(zE,"Operator",(function(){return PM})),t(zE,"MultiPulse",(function(){return QM})),t(zE,"EventStream",(function(){return IM})),t(zE,"Dataflow",(function(){return tF})),t(zE,"scheme",(function(){return IT})),t(zE,"scale",(function(){return _T})),t(zE,"quantizeInterpolator",(function(){return TT})),t(zE,"interpolateRange",(function(){return OT})),t(zE,"interpolateColors",(function(){return $T})),t(zE,"interpolate",(function(){return RT})),t(zE,"projection",(function(){return zH})),t(zE,"View",(function(){return PK})),t(zE,"timeFormatLocale",(function(){return dM})),t(zE,"resetDefaultLocale",(function(){return gM})),t(zE,"locale",(function(){return pM})),t(zE,"formatLocale",(function(){return sM})),t(zE,"defaultLocale",(function(){return mM})),t(zE,"expressionFunction",(function(){return RJ})),t(zE,"parse",(function(){return q2})),t(zE,"runtimeContext",(function(){return VJ})),t(zE,"parseExpression",(function(){return jQ})),t(zE,"codegenExpression",(function(){return WQ})),t(zE,"parseSelector",(function(){return YK}));var W2="5.20.2";zS(iF,sF,MO,YI,Sj,hV,rY,qV,EY,MY,tX,pX);const H2=W2;t(zE,"version",(function(){return H2}));var V2={},G2=e(JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.1.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && del-cli \'site/data/*\' \'examples/compiled/*.png\' && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"del-cli \'build/*\' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.15","@babel/preset-env":"^7.13.15","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.1","@types/chai":"^4.2.16","@types/d3":"^6.3.0","@types/jest":"^26.0.22","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0","ajv":"^8.1.0","ajv-formats":"^2.0.2","chai":"^4.3.4","cheerio":"^1.0.0-rc.6","conventional-changelog-cli":"^2.1.1","d3":"^6.7.0","del-cli":"^3.0.1","eslint":"^7.24.0","eslint-config-prettier":"^8.2.0","eslint-plugin-jest":"^24.3.5","eslint-plugin-prettier":"^3.4.0","gh-pages":"^3.1.0","highlight.js":"^10.7.2","jest":"^26.6.3","jest-dev-server":"^5.0.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^8.0.0","rollup":"^2.45.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.1","ts-json-schema-generator":"^0.90.0","typescript":"~4.2.4","vega-cli":"^5.20.2","vega-datasets":"~2.2.0","vega-embed":"^6.17.0","vega-tooltip":"^0.25.1","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.2.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.1","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.20.0"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')),Y2={};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var X2={},Q2=WA,J2=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var f=[],d=[],h=void 0!==Q2;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,p){if(null===u)return null;if(0===p)return u;var m,g;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(u))m=[];else if(i.__isRegExp(u))m=new RegExp(u.source,a(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(i.__isDate(u))m=new Date(u.getTime());else{if(h&&Q2.isBuffer(u))return m=Q2.allocUnsafe?Q2.allocUnsafe(u.length):new Q2(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var y=f.indexOf(u);if(-1!=y)return d[y];f.push(u),d.push(m)}for(var v in e(u,t)&&u.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,p-1);m.add(t)})),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=o(u[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(v=0;v<x.length;v++){var w=x[v];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||c)&&(m[w]=o(u[w],p-1),k.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(u);for(v=0;v<_.length;v++){var k,E=_[v];(k=Object.getOwnPropertyDescriptor(u,E))&&k.enumerable||(m[E]=o(u[E],p-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();X2&&(X2=J2);var K2=e(X2),Z2=e((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n})),e3=e((function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}));function t3(e){return!!e.or}function n3(e){return!!e.and}function r3(e){return!!e.not}function i3(e,t){if(r3(e))i3(e.not,t);else if(n3(e))for(const n of e.and)i3(n,t);else if(t3(e))for(const n of e.or)i3(n,t);else t(e)}function o3(e,t){return r3(e)?{not:o3(e.not,t)}:n3(e)?{and:e.and.map((e=>o3(e,t)))}:t3(e)?{or:e.or.map((e=>o3(e,t)))}:t(e)}const a3=Z2;t(Y2,"deepEqual",(function(){return a3}));const s3=K2;function u3(e,t){const n={};for(const r of t)BS(e,r)&&(n[r]=e[r]);return n}function l3(e,t){const n={...e};for(const e of t)delete n[e];return n}t(Y2,"duplicate",(function(){return s3})),t(Y2,"pick",(function(){return u3})),t(Y2,"omit",(function(){return l3})),Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>e3(e))).join(",")})`};const c3=e3;function f3(e){if(YS(e))return e;const t=QS(e)?e:e3(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function d3(e){return!1===e||null===e}function h3(e,t){return e.includes(t)}function p3(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function m3(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function g3(e,...t){for(const n of t)y3(e,n??{});return e}function y3(e,t){for(const n of S3(t))iS(e,n,t[n],!0)}function v3(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function b3(e,t){const n=S3(e),r=S3(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function x3(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function w3(e,t){for(const n of e)if(t.has(n))return!0;return!1}function _3(e){const t=new Set;for(const n of e){const e=WE(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function k3(e,t){return void 0===e||void 0===t||w3(_3(e),_3(t))}function E3(e){return 0===S3(e).length}t(Y2,"stringify",(function(){return c3})),t(Y2,"hash",(function(){return f3})),t(Y2,"isNullOrFalse",(function(){return d3})),t(Y2,"contains",(function(){return h3})),t(Y2,"some",(function(){return p3})),t(Y2,"every",(function(){return m3})),t(Y2,"mergeDeep",(function(){return g3})),t(Y2,"unique",(function(){return v3})),t(Y2,"isEqual",(function(){return b3})),t(Y2,"setEqual",(function(){return x3})),t(Y2,"hasIntersection",(function(){return w3})),t(Y2,"prefixGenerator",(function(){return _3})),t(Y2,"fieldIntersection",(function(){return k3})),t(Y2,"isEmpty",(function(){return E3}));const S3=Object.keys;t(Y2,"keys",(function(){return S3}));const A3=Object.values;t(Y2,"vals",(function(){return A3}));const C3=Object.entries;function D3(e){return!0===e||!1===e}function M3(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function F3(e,t){return r3(e)?`!(${F3(e.not,t)})`:n3(e)?`(${e.and.map((e=>F3(e,t))).join(") && (")})`:t3(e)?`(${e.or.map((e=>F3(e,t))).join(") || (")})`:t(e)}function N3(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&N3(e[n],t)&&delete e[n],E3(e)}function O3(e){return e.charAt(0).toUpperCase()+e.substr(1)}function $3(e,t="datum"){const n=WE(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(iA).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function T3(e,t="datum"){return`${t}[${iA(WE(e).join("."))}]`}function z3(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function R3(e){return`${WE(e).map(z3).join("\\.")}`}function P3(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function L3(e){return`${WE(e).join(".")}`}function B3(e){return e?WE(e).length:0}function I3(...e){for(const t of e)if(void 0!==t)return t}t(Y2,"entries",(function(){return C3})),t(Y2,"isBoolean",(function(){return D3})),t(Y2,"varName",(function(){return M3})),t(Y2,"logicalExpr",(function(){return F3})),t(Y2,"deleteNestedProperty",(function(){return N3})),t(Y2,"titleCase",(function(){return O3})),t(Y2,"accessPathWithDatum",(function(){return $3})),t(Y2,"flatAccessWithDatum",(function(){return T3})),t(Y2,"replacePathInField",(function(){return R3})),t(Y2,"replaceAll",(function(){return P3})),t(Y2,"removePathFromField",(function(){return L3})),t(Y2,"accessPathDepth",(function(){return B3})),t(Y2,"getFirstDefined",(function(){return I3}));let j3=42;function U3(e){const t=++j3;return e?String(e)+t:t}function q3(){j3=42}function W3(e){return H3(e)?e:`__${e}`}function H3(e){return e.startsWith("__")}function V3(e){if(void 0!==e)return(e%360+360)%360}function G3(e){return!!YS(e)||!isNaN(e)&&!isNaN(parseFloat(e))}t(Y2,"uniqueId",(function(){return U3})),t(Y2,"resetIdCounter",(function(){return q3})),t(Y2,"internalField",(function(){return W3})),t(Y2,"isInternalField",(function(){return H3})),t(Y2,"normalizeAngle",(function(){return V3})),t(Y2,"isNumeric",(function(){return G3}));const Y3="row",X3="column",Q3="facet",J3="x",K3="y",Z3="x2",e5="y2",t5="radius",n5="radius2",r5="theta",i5="theta2",o5="latitude",a5="longitude",s5="latitude2",u5="longitude2",l5="color",c5="fill",f5="stroke",d5="shape",h5="size",p5="angle",m5="opacity",g5="fillOpacity",y5="strokeOpacity",v5="strokeWidth",b5="strokeDash",x5="text",w5="order",_5="detail",k5="key",E5="tooltip",S5="href",A5="url",C5="description",D5={theta:1,theta2:1,radius:1,radius2:1};function M5(e){return e in D5}const F5={longitude:1,longitude2:1,latitude:1,latitude2:1};const N5=S3(F5),O5={x:1,y:1,x2:1,y2:1,...D5,...F5,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function $5(e){return e===l5||e===c5||e===f5}const T5={row:1,column:1,facet:1},z5=S3(T5),R5={...O5,...T5},P5=S3(R5),{order:L5,detail:B5,tooltip:I5,...j5}=R5,{row:U5,column:q5,facet:W5,...H5}=j5;S3(j5),S3(H5);function V5(e){return!!R5[e]}const G5=[Z3,e5,s5,u5,i5,n5];function Y5(e){return X5(e)!==e}function X5(e){switch(e){case Z3:return J3;case e5:return K3;case s5:return o5;case u5:return a5;case i5:return r5;case n5:return t5}return e}function Q5(e){if(M5(e))switch(e){case r5:return"startAngle";case i5:return"endAngle";case t5:return"outerRadius";case n5:return"innerRadius"}return e}function J5(e){switch(e){case J3:return Z3;case K3:return e5;case o5:return s5;case a5:return u5;case r5:return i5;case t5:return n5}}function K5(e){switch(e){case J3:case Z3:return"width";case K3:case e5:return"height"}}S3(O5);const{x:Z5,y:e6,x2:t6,y2:n6,latitude:r6,longitude:i6,latitude2:o6,longitude2:a6,theta:s6,theta2:u6,radius:l6,radius2:c6,...f6}=O5,d6=S3(f6),h6={x:1,y:1},p6=S3(h6);function m6(e){return e in h6}const g6={theta:1,radius:1},y6=S3(g6);function v6(e){return"width"===e?J3:K3}const{text:b6,tooltip:x6,href:w6,url:_6,description:k6,detail:E6,key:S6,order:A6,...C6}=f6,D6=S3(C6);const M6={...h6,...g6,...C6},F6=S3(M6);function N6(e){return!!M6[e]}function O6(e,t){return function(e){switch(e){case l5:case c5:case f5:case C5:case _5:case k5:case E5:case S5:case w5:case m5:case g5:case y5:case v5:case Q3:case Y3:case X3:return $6;case J3:case K3:case o5:case a5:return z6;case Z3:case e5:case s5:case u5:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case h5:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case b5:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case d5:return{point:"always",geoshape:"always"};case x5:return{text:"always"};case p5:return{point:"always",square:"always",text:"always"};case A5:return{image:"always"};case r5:case t5:return{text:"always",arc:"always"};case i5:case n5:return{arc:"always"}}}(e)[t]}const $6={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:T6,...z6}=$6;function R6(e){switch(e){case J3:case K3:case r5:case t5:case h5:case p5:case v5:case m5:case g5:case y5:case Z3:case e5:case i5:case n5:return;case Q3:case Y3:case X3:case d5:case b5:case x5:case E5:case S5:case A5:case C5:return"discrete";case l5:case c5:case f5:return"flexible";case o5:case a5:case s5:case u5:case _5:case k5:case w5:return}}const P6={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},L6={count:1,min:1,max:1};function B6(e){return!!e&&!!e.argmin}function I6(e){return!!e&&!!e.argmax}S3(P6);function j6(e){return QS(e)&&!!P6[e]}const U6=["count","valid","missing","distinct"];function q6(e){return QS(e)&&h3(U6,e)}const W6=["count","sum","distinct","valid","missing"],H6=lA(["mean","average","median","q1","q3","min","max"]);function V6(e){return HS(e)&&(e=Iee(e,void 0)),"bin"+S3(e).map((t=>Q6(e[t])?M3(`_${t}_${C3(e[t])}`):M3(`_${t}_${e[t]}`))).join("")}function G6(e){return!0===e||X6(e)&&!e.binned}function Y6(e){return"binned"===e||X6(e)&&!0===e.binned}function X6(e){return tS(e)}function Q6(e){return e?.param}function J6(e){switch(e){case Y3:case X3:case h5:case l5:case c5:case f5:case v5:case m5:case g5:case y5:case d5:return 6;case b5:return 4;default:return 10}}function K6(e){return e&&!!e.expr}function Z6(e){const t=S3(e||{}),n={};for(const r of t)n[r]=l4(e[r]);return n}function e4(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d,...h}=e,p={...h,...o?{fill:o}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{}},g={...a?{subtitleColor:a}:{},...s?{subtitleFont:s}:{},...u?{subtitleFontSize:u}:{},...l?{subtitleFontStyle:l}:{},...c?{subtitleFontWeight:c}:{},...f?{subtitleLineHeight:f}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:p,subtitleMarkConfig:u3(p,["align","baseline","dx","dy","limit"]),nonMark:m,subtitle:g}}function t4(e){return QS(e)||eS(e)&&QS(e[0])}function n4(e){return e&&!!e.signal}function r4(e){return!!e.step}function i4(e){return!eS(e)&&("field"in e&&"data"in e)}const o4=S3({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),a4={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},s4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function u4(e){const t=eS(e.condition)?e.condition.map(c4):c4(e.condition);return{...l4(e),condition:t}}function l4(e){if(K6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function c4(e){if(K6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function f4(e){if(K6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return n4(e)?e:void 0!==e?{value:e}:void 0}function d4(e){return n4(e)?e.signal:iA(e.value)}function h4(e){return n4(e)?e.signal:null==e?null:iA(e)}function p4(e,t,n){for(const r of n){const n=y4(r,t.markDef,t.config);void 0!==n&&(e[r]=f4(n))}return e}function m4(e){return[].concat(e.type,e.style??[])}function g4(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?y4(e,t,n,r):void 0}function y4(e,t,n,{vgChannel:r}={}){return I3(r?v4(e,t,n.style):void 0,v4(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function v4(e,t,n){return b4(e,m4(t),n)}function b4(e,t,n){let r;t=SS(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function x4(e,t){return SS(e).reduce(((e,n)=>(e.field.push(Aee(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function w4(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(a3(t,e))return;n.push(e)})),n}function _4(e,t){return a3(e,t)||!t?e:e?[...SS(e),...SS(t)].join(", "):t}function k4(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((t4(n)||n4(n))&&(t4(r)||n4(r)))return{explicit:e.explicit,value:_4(n,r)};if(t4(n)||n4(n))return{explicit:e.explicit,value:n};if(t4(r)||n4(r))return{explicit:e.explicit,value:r};if(!(t4(n)||n4(n)||t4(r)||n4(r)))return{explicit:e.explicit,value:w4(n,r)};throw new Error("It should never reach here")}var E4={},S4={};function A4(e){return`Invalid specification ${c3(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}t(S4,"invalidSpec",(function(){return A4}));function C4(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function D4(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function M4(e){return e?`Dropping "fit-${e}" because spec has discrete ${K5(e)}.`:'Dropping "fit" because spec has discrete size.'}function F4(e){return`Unknown field for ${e}. Cannot calculate view size.`}function N4(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function O4(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function $4(e){return`The "nearest" transform is not supported for ${e} marks.`}function T4(e){return`Selection not supported for ${e} yet.`}function z4(e){return`Cannot find a selection named "${e}".`}t(S4,"FIT_NON_SINGLE",(function(){return'Autosize "fit" only works for single views and layered views.'})),t(S4,"containerSizeNonSingle",(function(){return C4})),t(S4,"containerSizeNotCompatibleWithAutosize",(function(){return D4})),t(S4,"droppingFit",(function(){return M4})),t(S4,"unknownField",(function(){return F4})),t(S4,"cannotProjectOnChannelWithoutField",(function(){return N4})),t(S4,"cannotProjectAggregate",(function(){return O4})),t(S4,"nearestNotSupportForContinuous",(function(){return $4})),t(S4,"selectionNotSupported",(function(){return T4})),t(S4,"selectionNotFound",(function(){return z4}));t(S4,"SCALE_BINDINGS_CONTINUOUS",(function(){return"Scale bindings are currently only supported for scales with unbinned, continuous domains."}));function R4(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function P4(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}t(S4,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return"Legend bindings are only supported for selections over an individual field or encoding channel."})),t(S4,"cannotLookupVariableParameter",(function(){return R4})),t(S4,"noSameUnitLookup",(function(){return P4}));t(S4,"NEEDS_SAME_SELECTION",(function(){return"The same selection must be used to override scale domains in a layered view."}));function L4(e){return`Unknown repeated value "${e}".`}function B4(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}t(S4,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return'Interval selections should be initialized using "x" and/or "y" keys.'})),t(S4,"noSuchRepeatedValue",(function(){return L4})),t(S4,"columnsNotSupportByRowCol",(function(){return B4}));function I4(e){return`Unrecognized parse "${e}".`}function j4(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}t(S4,"CONCAT_CANNOT_SHARE_AXIS",(function(){return"Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."})),t(S4,"unrecognizedParse",(function(){return I4})),t(S4,"differentParse",(function(){return j4}));function U4(e){return`Ignoring an invalid transform: ${c3(e)}.`}t(S4,"ADD_SAME_CHILD_TWICE",(function(){return"Attempt to add the same child twice."})),t(S4,"invalidTransformIgnored",(function(){return U4}));function q4(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function W4(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${c3(t)} is overridden by a child projection ${c3(n)}.`}t(S4,"NO_FIELDS_NEEDS_AS",(function(){return'If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'})),t(S4,"customFormatTypeNotAllowed",(function(){return q4})),t(S4,"projectionOverridden",(function(){return W4}));function H4(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${c3(n)}}.`}function V4(e){return`Invalid field type "${e}".`}function G4(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Y4(e){return`Invalid aggregation operator "${e}".`}function X4(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function Q4(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function J4(e){return`Position range does not support relative band size for ${e}.`}function K4(e,t){return`Dropping ${c3(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}t(S4,"REPLACE_ANGLE_WITH_THETA",(function(){return"Arc marks uses theta channel rather than angle, replacing angle with theta."})),t(S4,"primitiveChannelDef",(function(){return H4})),t(S4,"invalidFieldType",(function(){return V4})),t(S4,"invalidFieldTypeForCountAggregate",(function(){return G4})),t(S4,"invalidAggregate",(function(){return Y4})),t(S4,"missingFieldType",(function(){return X4})),t(S4,"droppingColor",(function(){return Q4})),t(S4,"relativeBandSizeNotSupported",(function(){return J4})),t(S4,"emptyFieldDef",(function(){return K4}));function Z4(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function e8(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function t8(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function n8(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function r8(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function i8(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function o8(e){return`The ${e} for range marks cannot be an expression`}function a8(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function s8(e,t){return`Specified orient "${e}" overridden with "${t}".`}t(S4,"LINE_WITH_VARYING_SIZE",(function(){return"Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."})),t(S4,"incompatibleChannel",(function(){return Z4})),t(S4,"invalidEncodingChannel",(function(){return e8})),t(S4,"channelShouldBeDiscrete",(function(){return t8})),t(S4,"channelShouldBeDiscreteOrDiscretizing",(function(){return n8})),t(S4,"facetChannelDropped",(function(){return r8})),t(S4,"discreteChannelCannotEncode",(function(){return i8})),t(S4,"rangeMarkAlignmentCannotBeExpression",(function(){return o8})),t(S4,"lineWithRange",(function(){return a8})),t(S4,"orientOverridden",(function(){return s8}));function u8(e){return`Cannot use the scale property "${e}" with non-color channel.`}function l8(e){return`Cannot use the relative band size with ${e} scale.`}function c8(e){return`Using unaggregated domain with raw field has no effect (${c3(e)}).`}function f8(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function d8(e){return`Unaggregated domain is currently unsupported for log scale (${c3(e)}).`}function h8(e){return`Cannot apply size to non-oriented mark "${e}".`}function p8(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function m8(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function g8(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function y8(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function v8(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function b8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${c3(n)} and ${c3(r)}). Using ${c3(n)}.`}function x8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${c3(n)} and ${c3(r)}). Using the union of the two domains.`}function w8(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function _8(e){return`Dropping sort property ${c3(e)} as unioned domains only support boolean or op "count", "min", and "max".`}t(S4,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return"Custom domain scale cannot be unioned with default field-based domain."})),t(S4,"cannotUseScalePropertyWithNonColor",(function(){return u8})),t(S4,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return l8})),t(S4,"unaggregateDomainHasNoEffectForRawField",(function(){return c8})),t(S4,"unaggregateDomainWithNonSharedDomainOp",(function(){return f8})),t(S4,"unaggregatedDomainWithLogScale",(function(){return d8})),t(S4,"cannotApplySizeToNonOrientedMark",(function(){return h8})),t(S4,"scaleTypeNotWorkWithChannel",(function(){return p8})),t(S4,"scaleTypeNotWorkWithFieldDef",(function(){return m8})),t(S4,"scalePropertyNotWorkWithScaleType",(function(){return g8})),t(S4,"scaleTypeNotWorkWithMark",(function(){return y8})),t(S4,"stepDropped",(function(){return v8})),t(S4,"mergeConflictingProperty",(function(){return b8})),t(S4,"mergeConflictingDomainProperty",(function(){return x8})),t(S4,"independentScaleMeansIndependentGuide",(function(){return w8})),t(S4,"domainSortDropped",(function(){return _8}));t(S4,"MORE_THAN_ONE_SORT",(function(){return"Domains that should be unioned has conflicting sort properties. Sort will be set to true."}));t(S4,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."}));t(S4,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."}));t(S4,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return"Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."}));function k8(e){return`Cannot stack "${e}" if there is already "${e}2".`}function E8(e){return`Cannot stack non-linear scale (${e}).`}function S8(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function A8(e,t){return`Invalid ${e}: ${c3(t)}.`}function C8(e){return`Dropping day from datetime ${c3(e)} as day cannot be combined with other units.`}function D8(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function M8(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function F8(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function N8(e){return`1D error band does not support ${e}.`}function O8(e){return`Channel ${e} is required for "binned" bin.`}function $8(e){return`Channel ${e} should not be used with "binned" bin.`}function T8(e){return`Domain for ${e} is required for threshold scale.`}t(S4,"INVALID_CHANNEL_FOR_AXIS",(function(){return"Invalid channel for axis."})),t(S4,"cannotStackRangedMark",(function(){return k8})),t(S4,"cannotStackNonLinearScale",(function(){return E8})),t(S4,"stackNonSummativeAggregate",(function(){return S8})),t(S4,"invalidTimeUnit",(function(){return A8})),t(S4,"droppedDay",(function(){return C8})),t(S4,"errorBarCenterAndExtentAreNotNeeded",(function(){return D8})),t(S4,"errorBarCenterIsUsedWithWrongExtent",(function(){return M8})),t(S4,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return F8})),t(S4,"errorBand1DNotSupport",(function(){return N8})),t(S4,"channelRequiredForBinned",(function(){return O8})),t(S4,"channelShouldNotBeUsedForBinned",(function(){return $8})),t(S4,"domainRequiredForThresholdScale",(function(){return T8}));t(E4,"message",(function(){return S4}));const z8=ZE(2);let R8=z8;function P8(e){return R8=e,R8}function L8(){return R8=z8,R8}function B8(...e){R8.warn(...e)}function I8(...e){R8.debug(...e)}function j8(e){if(e&&tS(e))for(const t of X8)if(t in e)return!0;return!1}new WeakMap,t(E4,"set",(function(){return P8})),t(E4,"reset",(function(){return L8})),t(E4,"warn",(function(){return B8})),t(E4,"debug",(function(){return I8}));const U8=["january","february","march","april","may","june","july","august","september","october","november","december"],q8=U8.map((e=>e.substr(0,3))),W8=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],H8=W8.map((e=>e.substr(0,3)));function V8(e,t){const n=[];if(t&&void 0!==e.day&&S3(e).length>1&&(E4.warn(S4.droppedDay(e)),delete(e=s3(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(G3(e)&&(e=+e),YS(e))return e-1;{const t=e.toLowerCase(),n=U8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=q8.indexOf(r);if(-1!==i)return i;throw new Error(S4.invalidTimeUnit("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(G3(e)&&(e=+e),YS(e))return e>4&&E4.warn(S4.invalidTimeUnit("quarter",e)),e-1;throw new Error(S4.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(YS(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(G3(e)&&(e=+e),YS(e))return e%7;{const t=e.toLowerCase(),n=W8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=H8.indexOf(r);if(-1!==i)return i;throw new Error(S4.invalidTimeUnit("day",e))}}(e.day):e.day;n.push(YS(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function G8(e){const t=V8(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const Y8={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},X8=S3(Y8);function Q8(e){return e.startsWith("utc")}const J8={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function K8(e){return X8.filter((t=>Z8(e,t)))}function Z8(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function e9(e,t,{end:n}={end:!1}){const r=$3(t),i=Q8(e)?"utc":"";let o;const a={};for(const t of X8)Z8(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=V8(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function t9(e){if(!e)return;const t=K8(e);return`timeUnitSpecifier(${c3(t)}, ${c3(J8)})`}function n9(e){if(!e)return;let t;return QS(e)?t={unit:e}:tS(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Q8(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function r9(e){return e&&!!e.field&&void 0!==e.equal}function i9(e){return e&&!!e.field&&void 0!==e.lt}function o9(e){return e&&!!e.field&&void 0!==e.lte}function a9(e){return e&&!!e.field&&void 0!==e.gt}function s9(e){return e&&!!e.field&&void 0!==e.gte}function u9(e){if(e&&e.field){if(eS(e.range)&&2===e.range.length)return!0;if(n4(e.range))return!0}return!1}function l9(e){return e&&!!e.field&&(eS(e.oneOf)||eS(e.in))}function c9(e){return l9(e)||r9(e)||u9(e)||i9(e)||a9(e)||o9(e)||s9(e)}function f9(e,t){return qee(e,{timeUnit:t,wrapTime:!0})}function d9(e,t=!0){const{field:n}=e,r=n9(e.timeUnit)?.unit,i=r?`time(${e9(r,n)})`:Aee(e,{expr:"datum"});if(r9(e))return`${i}===${f9(e.equal,r)}`;if(i9(e)){return`${i}<${f9(e.lt,r)}`}if(a9(e)){return`${i}>${f9(e.gt,r)}`}if(o9(e)){return`${i}<=${f9(e.lte,r)}`}if(s9(e)){return`${i}>=${f9(e.gte,r)}`}if(l9(e))return`indexof([${function(e,t){return e.map((e=>f9(e,t)))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return h9(i,e.valid);if(u9(e)){const{range:n}=e,o=n4(n)?{signal:`${n.signal}[0]`}:n[0],a=n4(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==o&&null!==a&&t)return"inrange("+i+", ["+f9(o,r)+", "+f9(a,r)+"])";const s=[];return null!==o&&s.push(`${i} >= ${f9(o,r)}`),null!==a&&s.push(`${i} <= ${f9(a,r)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${c3(e)}`)}function h9(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function p9(e){return c9(e)&&e.timeUnit?{...e,timeUnit:n9(e.timeUnit)?.unit}:e}const m9={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},g9=m9.quantitative,y9=m9.ordinal,v9=m9.temporal,b9=m9.nominal,x9=m9.geojson;S3(m9);const w9="linear",_9="log",k9="pow",E9="sqrt",S9="symlog",A9="time",C9="utc",D9="quantile",M9="quantize",F9="threshold",N9="point",O9="band",$9={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};S3($9);function T9(e,t){const n=$9[e],r=$9[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const z9={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function R9(e){return z9[e]}const P9=["linear","log","pow","sqrt","symlog","time","utc"],L9=lA(P9),B9=lA(["linear","log","pow","sqrt","symlog"]);const I9=lA(["quantile","quantize","threshold"]),j9=lA(P9.concat(["quantile","quantize","threshold","sequential","identity"])),U9=lA(["ordinal","bin-ordinal","point","band"]);function q9(e){return e in U9}function W9(e){return e in j9}function H9(e){return e in L9}function V9(e){return e in I9}function G9(e){return e?.param}const Y9={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:X9,domain:Q9,range:J9,rangeMax:K9,rangeMin:Z9,scheme:e7,...t7}=(S3(Y9),Y9),n7=S3(t7);function r7(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return H9(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return H9(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return H9(e);case"nice":return H9(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return W9(e)&&!h3(["log","time","utc","threshold","quantile"],e)}}function i7(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return $5(e)?void 0:S4.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const o7={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},a7=o7.arc,s7=o7.area,u7=o7.bar,l7=o7.image,c7=o7.line,f7=o7.point,d7=o7.rect,h7=o7.rule,p7=o7.text,m7=o7.tick,g7=o7.trail,y7=o7.circle,v7=o7.square,b7=o7.geoshape;function x7(e){return["line","area","trail"].includes(e)}function w7(e){return["rect","bar","image","arc"].includes(e)}const _7=S3(o7);function k7(e){return e.type}lA(_7);const E7=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],S7=S3({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),A7=S3({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function C7(e){return e&&null!=e.band}const D7={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},M7={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},F7={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function N7(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=P7(e);return hee(n)&&!q6(n.aggregate)&&i&&H9(i.get("type"))&&!1===i.get("zero")?O7({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function O7({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(x7(n.type))return r;return null===g4("invalid",n,i)?r:[$7(e,t),r]}function $7(e,t){return{test:T7(e,!0),..."y"===X5(t)?{field:{group:"height"}}:{value:0}}}function T7(e,t=!0){return h9(QS(e)?e:Aee(e,{expr:"datum"}),!t)}function z7(e,t,n,r){const i={};if(t&&(i.scale=t),mee(e)){const{datum:t}=e;j8(t)?i.signal=G8(t):n4(t)?i.signal=t.signal:K6(t)?i.signal=t.expr:i.value=t}else i.field=Aee(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function R7({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=Aee(t,{expr:a,suffix:i}),u=void 0!==n?Aee(n,{expr:a}):Aee(t,{suffix:"end",expr:a}),l={};if(0===o||1===o){l.scale=e;const t=0===o?s:u;l.field=t}else{const t=n4(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${t})`}return r&&(l.offset=r),l}function P7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(vee(t)){if(bee(t)){c??(c=see({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:l,type:f}=t;if(G6(a)||c&&l&&f===v9)return s&&s.impute?z7(t,o,{binSuffix:"mid"},{offset:u}):c?R7({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):z7(t,o,Hee(t,e)?{binSuffix:"range"}:{},{offset:u});if(Y6(a)){if(hee(n))return R7({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});{const t=e===J3?Z3:e5;E4.warn(S4.channelRequiredForBinned(t))}}}const l=a?.get?.("type");return z7(t,o,q9(l)?{binSuffix:"range"}:{},{offset:u,band:"band"===l?c??t.bandPosition??.5:void 0})}if(xee(t)){const n=u?{offset:u}:{};return{...L7(e,t.value),...n}}}return CS(l)&&(l=l()),l?{...l,...u?{offset:u}:{}}:l}function L7(e,t){return h3(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:h3(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:f4(t)}function B7(e){return e&&"number"!==e&&"time"!==e}function I7(e,t,n){return`${e}(${t}${n?`, ${c3(n)}`:""})`}function j7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(B7(n))return q7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=U7(e,r,i);if(Uee(e)){const n=function(e,t,n,r,i){return!t||n?`${i?"utc":"time"}Format(${e}, '${n=QS(n)?n:r}')`:function(e,t,n){if(!e)return;const r=t9(e);return`${n||Q8(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,i)}(a,hee(e)?n9(e.timeUnit)?.unit:void 0,t,o.timeFormat,wee(e)&&e.scale?.type===C9);return n?{signal:n}:void 0}if(t=V7(pee(e),t,o),hee(e)&&G6(e.bin)){return{signal:X7(a,Aee(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===pee(e)?{signal:`${G7(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function U7(e,t,n){return hee(e)?n?`${Aee(e,{expr:t,suffix:"end"})}-${Aee(e,{expr:t,suffix:"start"})}`:Aee(e,{expr:t}):function(e){const{datum:t}=e;return j8(t)?G8(t):`${c3(t)}`}(e)}function q7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=U7(e,r,i)),hee(e)&&G6(e.bin)){return{signal:X7(a,Aee(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:I7(n,a,t)}}function W7(e,t,n,r,i,o){if(!B7(r)){if(Uee(e)){return function(e,t,n,r){if(e)return e;if(t)return{signal:t9(t)};return r?void 0:n.timeFormat}(n,hee(e)?n9(e.timeUnit)?.unit:void 0,i,o)}return V7(t,n,i)}}function H7(e,t,n){return e&&(n4(e)||"number"===e||"time"===e)?e:Uee(t)&&"time"!==n&&"utc"!==n?"time":void 0}function V7(e,t,n){return QS(t)?t:e===g9?n.numberFormat:void 0}function G7(e,t){return`format(${e}, "${t||""}")`}function Y7(e,t,n,r){return B7(n)?I7(n,e,t):G7(e,(QS(t)?t:void 0)??r.numberFormat)}function X7(e,t,n,r,i){const o=Y7(e,n,r,i),a=Y7(t,n,r,i);return`${h9(e,!1)} ? "null" : ${o} + " – " + ${a}`}const Q7="min",J7={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function K7(e){return e in J7}function Z7(e){return!!e&&!!e.encoding}function eee(e){return!(!e||"count"!==e.op&&!e.field)}function tee(e){return!!e&&eS(e)}function nee(e){return"row"in e||"column"in e}function ree(e){return!!e&&"header"in e}function iee(e){return"facet"in e}function oee(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function aee(e){return"sort"in e}function see({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(vee(e)&&void 0!==e.bandPosition)return e.bandPosition;if(hee(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return w7(n.type)?0:y4("timeUnitBandPosition",n,r);if(G6(o))return.5}}function uee({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=K5(e),u=g4(a?"size":s,r,i,{vgChannel:s});if(void 0!==u)return u;if(hee(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:y4("timeUnitBandSize",r,i)};if(G6(a)&&!q9(o))return{band:1}}return w7(r.type)?o?q9(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function lee(e,t,n,r){return!!(G6(e.bin)||e.timeUnit&&bee(e)&&"temporal"===e.type)&&void 0!==see({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function cee(e){return!!e&&"condition"in e}function fee(e){const t=e&&e.condition;return!!t&&!eS(t)&&hee(t)}function dee(e){const t=e&&e.condition;return!!t&&!eS(t)&&vee(t)}function hee(e){return!(!e||!e.field&&"count"!==e.aggregate)}function pee(e){return e&&e.type}function mee(e){return!!e&&"datum"in e}function gee(e){return bee(e)&&!Cee(e)||yee(e)}function yee(e){return mee(e)&&YS(e.datum)}function vee(e){return hee(e)||mee(e)}function bee(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function xee(e){return e&&"value"in e&&"value"in e}function wee(e){return!!e&&("scale"in e||"sort"in e)}function _ee(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function kee(e){return!!e&&"legend"in e}function Eee(e){return!!e&&("format"in e||"formatType"in e)}function See(e){return l3(e,["legend","axis","header","scale"])}function Aee(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=W3("count");else{let r;if(!t.nofn)if(function(e){return"op"in e}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:u}=e;G6(a)?(r=V6(a),i=(t.binSuffix??"")+(t.suffix??"")):s?I6(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):B6(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):u&&(r=function(e){const{utc:t,...n}=n9(e);return n.unit?(t?"utc":"")+S3(n).map((e=>M3(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+S3(n).map((e=>M3(`_${e}_${n[e]}`))).join("")}(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?L3(n):t.expr?T3(n,t.expr)+o:R3(n)+o}function Cee(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return hee(e)&&!!e.bin;case"temporal":return!1}throw new Error(S4.invalidFieldType(e.type))}const Dee=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(I6(t))return`${i} for argmax(${t.argmax})`;if(B6(t))return`${i} for argmin(${t.argmin})`;const o=n9(r),a=t||o?.unit||o?.maxbins&&"timeunit"||G6(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(G6(r))return`${n} (binned)`;if(i){const e=n9(i)?.unit;if(e)return`${n} (${K8(e).join("-")})`}else if(o)return I6(o)?`${n} for max ${o.argmax}`:B6(o)?`${n} for min ${o.argmin}`:`${O3(o)} of ${n}`;return n}(e,t)}};let Mee=Dee;function Fee(e){Mee=e}function Nee(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=Oee(e)?.title;if(!hee(e))return i;const o=e,a=r?$ee(o,t):void 0;return n?I3(i,o.title,a):i??o.title??a}function Oee(e){return _ee(e)&&e.axis?e.axis:kee(e)&&e.legend?e.legend:ree(e)&&e.header?e.header:void 0}function $ee(e,t){return Mee(e,t)}function Tee(e){if(Eee(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Oee(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function zee(e){return hee(e)?e:fee(e)?e.condition:void 0}function Ree(e){return vee(e)?e:dee(e)?e.condition:void 0}function Pee(e,t,n,r={}){if(QS(e)||YS(e)||HS(e)){const n=QS(e)?"string":YS(e)?"number":"boolean";return E4.warn(S4.primitiveChannelDef(t,n,e)),{value:e}}return vee(e)?Lee(e,t,n,r):dee(e)?{...e,condition:Lee(e.condition,t,n,r)}:e}function Lee(e,t,n,r){if(Eee(e)){const{format:i,formatType:o,...a}=e;if(B7(o)&&!n.customFormatTypes)return E4.warn(S4.customFormatTypeNotAllowed(t)),Lee(a,t,n,r)}else{const i=_ee(e)?"axis":kee(e)?"legend":ree(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(B7(a)&&!n.customFormatTypes)return E4.warn(S4.customFormatTypeNotAllowed(t)),Lee({...e,[i]:s},t,n,r)}}return hee(e)?Bee(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=YS(n)?"quantitative":QS(n)?"nominal":j8(n)?"temporal":void 0,{...e,type:t}}(e)}function Bee(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||j6(r)||I6(r)||B6(r)||(E4.warn(S4.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=n9(i)),a&&(s.field=`${a}`),G6(o)&&(s.bin=Iee(o,t)),Y6(o)&&!m6(t)&&E4.warn(S4.channelShouldNotBeUsedForBinned(t)),bee(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case g9:return"quantitative";case"t":case v9:return"temporal";case"o":case y9:return"ordinal";case"n":case b9:return"nominal";case x9:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&q6(r)&&(E4.warn(S4.invalidFieldTypeForCountAggregate(e,r)),s.type="quantitative")}else if(!Y5(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(aee(e)&&eS(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!I6(n)&&!B6(n))return"quantitative";if(wee(e)&&e.scale?.type)switch($9[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(bee(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Y3:case X3:case Q3:return Cee(e)?jee:{compatible:!1,warning:S4.channelShouldBeDiscrete(t)};case J3:case K3:case l5:case c5:case f5:case x5:case _5:case k5:case E5:case S5:case A5:case p5:case r5:case t5:case C5:return jee;case a5:case u5:case o5:case s5:return n!==g9?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:jee;case m5:case g5:case y5:case v5:case h5:case i5:case n5:case Z3:case e5:return"nominal"!==n||e.sort?jee:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case d5:case b5:return Cee(e)||wee(r=e)&&V9(r.scale?.type)?jee:{compatible:!1,warning:S4.channelShouldBeDiscreteOrDiscretizing(t)};case w5:return"nominal"!==e.type||"sort"in e?jee:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r}(s,t)||{};!1===e&&E4.warn(n)}if(aee(s)&&QS(s.sort)){const{sort:e}=s;if(K7(e))return{...s,sort:{encoding:e}};const t=e.substr(1);if("-"===e.charAt(0)&&K7(t))return{...s,sort:{encoding:t,order:"descending"}}}if(ree(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function Iee(e,t){return HS(e)?{maxbins:J6(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:J6(t)}}const jee={compatible:!0};function Uee(e){const{formatType:t}=Tee(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||hee(n)&&!!n.timeUnit));var n}function qee(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&n9(t)?.unit;let a,s=o||"temporal"===n;return K6(e)?a=e.expr:n4(e)?a=e.signal:j8(e)?(s=!0,a=G8(e)):(QS(e)||YS(e))&&s&&(a=`datetime(${c3(e)})`,function(e){return!!Y8[e]}(o)&&(YS(e)&&e<1e4||QS(e)&&isNaN(Date.parse(e)))&&(a=G8({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:c3(e)}function Wee(e,t){const{type:n}=e;return t.map((t=>{const r=qee(t,{timeUnit:hee(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Hee(e,t){return G6(e.bin)?N6(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Vee={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Gee(e){return e&&e.condition}const Yee=["domain","grid","labels","ticks","title"],Xee={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Qee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Jee={...Qee,style:1,labelExpr:1,encoding:1};function Kee(e){return!!Jee[e]}S3(Jee);const Zee=S3({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function ete(e){return"mark"in e}class tte{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!ete(e)&&(k7(t=e.mark)?t.type:t)===this.name;var t}}function nte(e,t){const n=e&&e[t];return!!n&&(eS(n)?p3(n,(e=>!!e.field)):hee(n)||fee(n))}function rte(e){return p3(P5,(t=>{if(nte(e,t)){const n=e[t];if(eS(n))return p3(n,(e=>!!e.aggregate));{const e=zee(n);return e&&!!e.aggregate}}return!1}))}function ite(e,t){const n=[],r=[],i=[],o=[],a={};return ste(e,((s,u)=>{if(hee(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=s;if(c||d||f){const e=Oee(s),p=e&&e.title;let m=Aee(s,{forAs:!0});const g={...p?[]:{title:Nee(s,t,{allowDisabling:!0})},...h,field:m};if(c){let e;if(I6(c)?(e="argmax",m=Aee({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):B6(c)?(e="argmin",m=Aee({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};l&&(t.field=l),o.push(t)}}else if(n.push(m),bee(s)&&G6(f)){if(r.push({bin:f,field:l,as:m}),n.push(Aee(s,{binSuffix:"end"})),Hee(s,u)&&n.push(Aee(s,{binSuffix:"range"})),m6(u)){const e={field:`${m}_end`};a[`${u}2`]=e}g.bin="binned",Y5(u)||(g.type=g9)}else if(d){i.push({timeUnit:d,field:l,as:m});const e=bee(s)&&s.type!==v9&&"time";e&&(u===x5||u===E5?g.formatType=e:!function(e){return!!f6[e]}(u)?m6(u)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[u]=g}else n.push(l),a[u]=e[u]}else a[u]=e[u]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function ote(e,t,n,r){return S3(e).reduce(((i,o)=>{if(!V5(o))return E4.warn(S4.invalidEncodingChannel(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(E4.warn(S4.REPLACE_ANGLE_WITH_THETA),o=r5),!function(e,t,n){const r=O6(t,n);if(!r)return!1;if("binned"===r){const n=e[t===Z3?J3:K3];return!!(hee(n)&&hee(e[t])&&Y6(n.bin))}return!0}(e,o,t))return E4.warn(S4.incompatibleChannel(o,t)),i;if(o===h5&&"line"===t){if(zee(e[o])?.aggregate)return E4.warn(S4.LINE_WITH_VARYING_SIZE),i}if(o===l5&&(n?"fill"in e:"stroke"in e))return E4.warn(S4.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===_5||o===w5&&!eS(a)&&!xee(a)||o===E5&&eS(a))a&&(i[o]=SS(a).reduce(((e,t)=>(hee(t)?e.push(Bee(t,o)):E4.warn(S4.emptyFieldDef(t,o)),e)),[]));else{if(o===E5&&null===a)i[o]=null;else if(!(hee(a)||mee(a)||xee(a)||cee(a)||n4(a)))return E4.warn(S4.emptyFieldDef(a,o)),i;i[o]=Pee(a,o,r)}return i}),{})}function ate(e,t){const n={};for(const r of S3(e)){const i=Pee(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ste(e,t,n){if(e)for(const r of S3(e)){const i=e[r];if(eS(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function ute(e,t){return S3(t).reduce(((n,r)=>{switch(r){case J3:case K3:case S5:case C5:case A5:case Z3:case e5:case r5:case i5:case t5:case n5:case o5:case a5:case s5:case u5:case x5:case d5:case p5:case E5:return n;case w5:if("line"===e||"trail"===e)return n;case _5:case k5:{const e=t[r];if(eS(e)||hee(e))for(const t of SS(e))t.aggregate||n.push(Aee(t,{}));return n}case h5:if("trail"===e)return n;case l5:case c5:case f5:case m5:case g5:case y5:case b5:case v5:{const e=zee(t[r]);return e&&!e.aggregate&&n.push(Aee(e,{})),n}}}),[])}function lte(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${cte(t)}`:"";return{field:e+t.field,type:t.type,title:n4(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...v3(function(e){const t=[];for(const n of S3(e))if(nte(e,n)){const r=SS(e[n]);for(const e of r)hee(e)?t.push(e):fee(e)&&t.push(e.condition)}return t}(n).map(See),f3)]}}function cte(e){const{title:t,field:n}=e;return I3(t,n)}function fte(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c,extraEncoding:f={}})=>{const d=cte(n);return dte(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...QS(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function dte(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...k7(r.mark)?r.mark:{type:r.mark},style:`${s}-${t}`,...HS(e[t])?{}:e[t]}}]:[]}function hte(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:pte(o,n),continuousAxisChannelDef2:pte(a,n),continuousAxisChannelDefError:pte(s,n),continuousAxisChannelDefError2:pte(u,n),continuousAxis:i}}function pte(e,t){if(e&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&E4.warn(S4.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function mte(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(k7(n)&&n.orient)return n.orient;if(gee(i)){if(gee(o)){const e=hee(i)&&i.aggregate,n=hee(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return Uee(o)&&!Uee(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(gee(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const gte="boxplot",yte=new tte(gte,bte);function vte(e){return YS(e)?"tukey":e}function bte(e,{config:t}){e={...e,encoding:ate(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=k7(n)?n:{type:n};i&&E4.warn(S4.selectionNotSupported("boxplot"));const u=s.extent??t.boxplot.extent,l=g4("size",s,t),c=vte(u),{bins:f,timeUnits:d,transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=mte(e,gte),{continuousAxisChannelDef:i,continuousAxis:o}=hte(e,r,gte),a=i.field,s=vte(t),u=[...xte(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],l="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(eS(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return eS(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=ite(h,n),b="vertical"===r?"horizontal":"vertical",x=r,w=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:w,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:d}}(e,u,t),{color:_,size:k,...E}=v,S=e=>fte(s,m,p,e,t.boxplot),A=S(E),C=S(v),D=S({...E,...k?{size:k}:{}}),M=lte([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,v),F={type:"tick",color:"black",opacity:1,orient:b,invalid:null,aria:!1},N="min-max"===c?M:lte([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,v),O=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],$=[..."tukey"!==c?O:[],...C({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:null,...tS(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if("min-max"===c)return{...a,transform:(a.transform??[]).concat(h),layer:$};const T=`datum["lower_box_${p.field}"]`,z=`datum["upper_box_${p.field}"]`,R=`(${z} - ${T})`,P=`${T} - ${u} * ${R}`,L=`${z} + ${u} * ${R}`,B=`datum["${p.field}"]`,I={joinaggregate:xte(p.field),groupby:g},j={transform:[{filter:`(${P} <= ${B}) && (${B} <= ${L})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:g}],layer:O},{tooltip:U,...q}=E,{scale:W,axis:H}=p,V=cte(p),G=l3(H,["title"]),Y=dte(s,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${P}) || (${B} > ${L})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...void 0!==V?{title:V}:{},...void 0!==W?{scale:W}:{},...E3(G)?{}:{axis:G}},...q,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let X;const Q=[...f,...d,I];return Y?X={transform:Q,layer:[Y,j]}:(X=j,X.transform.unshift(...Q)),{...a,layer:[X,{transform:h,layer:$}]}}function xte(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const wte="errorbar",_te=new tte(wte,kte);function kte(e,{config:t}){e={...e,encoding:ate(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=Ste(e,wte,t);delete o.size;const c=fte(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:a,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function Ete(e,t){const{encoding:n}=e;if(function(e){return(vee(e.x)||vee(e.y))&&!vee(e.x2)&&!vee(e.y2)&&!vee(e.xError)&&!vee(e.xError2)&&!vee(e.yError)&&!vee(e.yError2)}(n))return{orient:mte(e,t),inputType:"raw"};const r=function(e){return vee(e.x2)||vee(e.y2)}(n),i=function(e){return vee(e.xError)||vee(e.xError2)||vee(e.yError)||vee(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(vee(e)&&vee(r))throw new Error(`${t} cannot have both x2 and y2`);if(vee(e)){if(gee(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(vee(r)){if(gee(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(vee(r)&&!vee(e))throw new Error(`${t} cannot have xError2 without xError`);if(vee(s)&&!vee(i))throw new Error(`${t} cannot have yError2 without yError`);if(vee(e)&&vee(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(vee(e)){if(gee(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(vee(i)){if(gee(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Ste(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=k7(r)?r:{type:r};o&&E4.warn(S4.selectionNotSupported(t));const{orient:l,inputType:c}=Ete(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=hte(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&E4.warn(S4.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:O3(t)},{fieldPrefix:"upper_",titlePrefix:Ate(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:Ate(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),u=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Nee({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nee({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nee({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&E4.warn(S4.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const e of l)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:P3(P3(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,f,d,h,p,c,t,n),{[m]:x,["x"===m?"x2":"y2"]:w,["x"===m?"xError":"yError"]:_,["x"===m?"xError2":"yError2"]:k,...E}=i,{bins:S,timeUnits:A,aggregate:C,groupby:D,encoding:M}=ite(E,n),F=[...C,...g],N="raw"!==c?[]:D,O=lte(v,f,M,b);return{transform:[...s.transform??[],...S,...A,...0===F.length?[]:[{aggregate:F,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:O}}function Ate(e,t,n){return`${O3(e)} ${n} ${t}`}const Cte="errorband",Dte=new tte(Cte,Mte);function Mte(e,{config:t}){e={...e,encoding:ate(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=Ste(e,Cte,t),l=a,c=fte(l,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?E4.warn(S4.errorBand1DNotSupport("interpolate")):l.tension&&E4.warn(S4.errorBand1DNotSupport("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Fte={};function Nte(e,t,n){const r=new tte(e,t);Fte[e]={normalizer:r,parts:n}}Nte(gte,bte,["box","median","outliers","rule","ticks"]),Nte(wte,kte,["ticks","rule"]),Nte(Cte,Mte,["band","borders"]);const Ote=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],$te={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Tte={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},zte=S3($te),Rte=S3(Tte),Pte=S3({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Lte=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Bte={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ite=(S3(Bte),"_vgsid_"),jte={point:{on:"click",fields:[Ite],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ute(e){return!(!e||"legend"!==e&&!e.legend)}function qte(e){return Ute(e)&&tS(e)}function Wte(e){return!!e.select}function Hte(e){const t=[];for(const n of e||[]){if(Wte(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function Vte(e){return"concat"in e}function Gte(e){return"vconcat"in e}function Yte(e){return"hconcat"in e}function Xte(e){return tS(e)&&void 0!==e.step}function Qte(e){return e.view||e.width||e.height}const Jte=S3({align:1,bounds:1,center:1,columns:1,spacing:1});function Kte(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function Zte(e,t){const n=ene(e,t);return Xte(n)?n.step:tne}function ene(e,t){return I3(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const tne=20,nne={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:tne},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:M7,circle:{},geoshape:{},image:{},line:{},point:{},rect:F7,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:jte,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},rne=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],ine={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},one={blue:rne[0],orange:rne[1],red:rne[2],teal:rne[3],green:rne[4],yellow:rne[5],purple:rne[6],pink:rne[7],brown:rne[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function ane(e){const t=S3(e||{}),n={};for(const r of t){const t=e[r];n[r]=Gee(t)?u4(t):l4(t)}return n}const sne=[...A7,...Zee,...Pte,"background","padding","legend","lineBreak","scale","style","title","view"];function une(e={}){const{color:t,font:n,fontSize:r,...i}=e,o=rS({},nne,n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:tS(e)?{...one,...e}:one}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:tS(e)?{...ine,...e}:ine}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),a=l3(o,sne);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=l4(o[e]));for(const e of A7)o[e]&&(a[e]=Z6(o[e]));for(const e of Zee)o[e]&&(a[e]=ane(o[e]));for(const e of Pte)o[e]&&(a[e]=Z6(o[e]));return o.legend&&(a.legend=Z6(o.legend)),o.scale&&(a.scale=Z6(o.scale)),o.style&&(a.style=function(e){const t=S3(e),n={};for(const r of t)n[r]=ane(e[r]);return n}(o.style)),o.title&&(a.title=Z6(o.title)),o.view&&(a.view=Z6(o.view)),a}const lne=["view",..._7],cne=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],fne={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function dne(e){e=s3(e);for(const t of cne)delete e[t];if(e.axis)for(const t in e.axis)Gee(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Ote)delete e.legend[t];if(e.mark){for(const t of S7)delete e.mark[t];e.mark.tooltip&&tS(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Hte(e.params)),delete e.params);for(const t of lne){for(const n of S7)delete e[t][n];const n=fne[t];if(n)for(const r of n)delete e[t][r];hne(e,t)}for(const t of S3(Fte))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=e4(e.title);E3(t)||(e.style["group-title"]={...e.style["group-title"],...t});E3(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});E3(r)?delete e.title:e.title=r}(e);for(const t in e)tS(e[t])&&E3(e[t])&&delete e[t];return E3(e)?void 0:e}function hne(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};E3(i)||(e.style[n??t]=i),r||delete e[t]}function pne(e){return"layer"in e}class mne{map(e,t){return iee(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Yte(e)?this.mapHConcat(e,t):Gte(e)?this.mapVConcat(e,t):Vte(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(pne(e))return this.mapLayer(e,t);if(ete(e))return this.mapUnit(e,t);throw new Error(S4.invalidSpec(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const gne={zero:1,center:1,normalize:1};const yne=new Set([a7,u7,s7,h7,f7,y7,v7,c7,p7,m7]),vne=new Set([u7,s7,a7]);function bne(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(hee(r)&&hee(i))if("quantitative"===pee(r)&&"quantitative"===pee(i)){if(r.stack)return t;if(i.stack)return n;const e=hee(r)&&!!r.aggregate;if(e!==(hee(i)&&!!i.aggregate))return e?t:n;{const e=r.scale?.type,o=i.scale?.type;if(e&&"linear"!==e)return n;if(o&&"linear"!==o)return t}}else{if("quantitative"===pee(r))return t;if("quantitative"===pee(i))return n}else{if("quantitative"===pee(r))return t;if("quantitative"===pee(i))return n}}function xne(e,t,n={}){const r=k7(e)?e.type:e;if(!yne.has(r))return null;const i=bne(t,"x")||bne(t,"theta");if(!i)return null;const o=t[i],a=hee(o)?Aee(o,{}):void 0;let s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),u=t[s],l=hee(u)?Aee(u,{}):void 0;l===a&&(l=void 0,u=void 0,s=void 0);const c=d6.reduce(((e,n)=>{if("tooltip"!==n&&nte(t,n)){const r=t[n];for(const t of SS(r)){const r=zee(t);if(r.aggregate)continue;const i=Aee(r,{});i&&i===l||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;if(void 0!==o.stack?f=HS(o.stack)?o.stack?"zero":null:o.stack:vne.has(r)&&(f="zero"),!f||!(f in gne))return null;if(rte(t)&&0===c.length)return null;if(o?.scale?.type&&o?.scale?.type!==w9){if(n.disallowNonLinearStack)return null;E4.warn(S4.cannotStackNonLinearScale(o.scale.type))}return vee(t[J5(i)])?(void 0!==o.stack&&E4.warn(S4.cannotStackRangedMark(i)),null):(hee(o)&&o.aggregate&&!h3(W6,o.aggregate)&&E4.warn(S4.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&x7(r),stackBy:c,offset:f})}function wne(e){const{point:t,line:n,...r}=e;return S3(r).length>1?r:r.type}function _ne(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:l3(e[t],["point","line"])});return e}function kne(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?tS(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?tS(t.point)?t.point:{}:void 0}function Ene(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class Sne{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(ete(e)){const{mark:n,encoding:r}=e,i=k7(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!kne(i,t[i.type],r);case"area":return!!kne(i,t[i.type],r)||!!Ene(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s,...u}=e,l=ate(s,r),c=k7(a)?a:{type:a},f=kne(c,r[c.type],l),d="area"===c.type&&Ene(c,r[c.type]),h=[{...i?{params:i}:{},mark:wne({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:l3(l,["shape"])}],p=xne(c,l);let m=l;if(p){const{fieldChannel:e,offset:t}=p;m={...l,[e]:{...l[e],...t?{stack:t}:{}}}}return d&&h.push({...o?{projection:o}:{},mark:{type:"line",...u3(c,["clip","interpolate","tension","tooltip"]),...d},encoding:m}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...u3(c,["clip","tooltip"]),...f},encoding:m}),n({...u,layer:h},{...t,config:_ne(r)})}}function Ane(e,t){return t?nee(e)?One(e,t):Mne(e,t):e}function Cne(e,t){return t?One(e,t):e}function Dne(e,t,n){const r=t[e];return(i=r)&&!QS(i)&&"repeat"in i?r.repeat in n?{...t,[e]:n[r.repeat]}:void E4.warn(S4.noSuchRepeatedValue(r.repeat)):t;var i}function Mne(e,t){if(void 0!==(e=Dne("field",e,t))){if(null===e)return null;if(aee(e)&&eee(e.sort)){const n=Dne("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Fne(e,t){if(hee(e))return Mne(e,t);{const n=Dne("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function Nne(e,t){if(!vee(e)){if(dee(e)){const n=Fne(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=Fne(e,t);if(n)return n;if(cee(e))return{condition:e.condition}}}function One(e,t){const n={};for(const r in e)if(BS(e,r)){const i=e[r];if(eS(i))n[r]=i.map((e=>Nne(e,t))).filter((e=>e));else{const e=Nne(i,t);void 0!==e&&(n[r]=e)}}return n}class $ne{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(ete(e)){const{encoding:t,mark:n}=e;if("line"===n||k7(n)&&"line"===n.type)for(const e of G5){const n=t[X5(e)];if(t[e]&&(hee(n)&&!Y6(n.bin)||mee(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;return E4.warn(S4.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n({...e,mark:tS(i)?{...i,type:"rule"}:"rule"},t)}}function Tne({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...S3(e),...S3(t)]);for(const o of i){const i=t[o],a=e[o];if(vee(i)){const e={...a,...i};r[o]=e}else dee(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||xee(a)||n4(a)||vee(a)||eS(a))&&(r[o]=a)}}else r=t;return!r||E3(r)?void 0:r}function zne(e){const{parentProjection:t,projection:n}=e;return t&&n&&E4.warn(S4.projectionOverridden({parentProjection:t,projection:n})),n??t}function Rne(e){return"filter"in e}function Pne(e){return"lookup"in e}function Lne(e){return"pivot"in e}function Bne(e){return"density"in e}function Ine(e){return"quantile"in e}function jne(e){return"regression"in e}function Une(e){return"loess"in e}function qne(e){return"sample"in e}function Wne(e){return"window"in e}function Hne(e){return"joinaggregate"in e}function Vne(e){return"flatten"in e}function Gne(e){return"calculate"in e}function Yne(e){return"bin"in e}function Xne(e){return"impute"in e}function Qne(e){return"timeUnit"in e}function Jne(e){return"aggregate"in e}function Kne(e){return"stack"in e}function Zne(e){return"fold"in e}function ere(e,t){const{transform:n,...r}=e;if(n){return{...r,transform:n.map((e=>{if(Rne(e))return{filter:rre(e,t)};if(Yne(e)&&X6(e.bin))return{...e,bin:nre(e.bin)};if(Pne(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}))}}return e}function tre(e,t){const n=s3(e);if(hee(n)&&X6(n.bin)&&(n.bin=nre(n.bin)),wee(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(cee(n))if(eS(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:rre(e,t)}}));else{const{selection:e,param:r,test:i,...o}=tre(n.condition,t);n.condition=r?n.condition:{...o,test:rre(n.condition,t)}}return n}function nre(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function rre(e,t){const n=e=>o3(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):o3(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class ire extends mne{map(e,t){const n=t.selections??[];if(e.params&&!ete(e)){const t=[];for(const r of e.params)Wte(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,ore(e,t))}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(QS(n)&&(n===e.name||r.indexOf(n)>=0)||eS(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=ire.prototype[e];ire.prototype[e]=function(e,n){return t.call(this,e,ore(e,n))}}function ore(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function are(e,t){void 0===t&&(t=une(e.config));const n=function(e,t={}){const n={config:t};return lre.map(sre.map(ure.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=ete(e)||pne(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(E4.warn(S4.containerSizeNonSingle("width")),r=void 0),"container"==i&&(E4.warn(S4.containerSizeNonSingle("height")),i=void 0));const s={type:"pad",...a,...n?cre(n.autosize):{},...cre(e.autosize)};"fit"!==s.type||o||(E4.warn(S4.FIT_NON_SINGLE),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&E4.warn(S4.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&E4.warn(S4.containerSizeNotCompatibleWithAutosize("height"));if(a3(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const sre=new class extends mne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[yte,_te,Dte,new Sne,new $ne]}map(e,t){if(ete(e)){const n=nte(e.encoding,Y3),r=nte(e.encoding,X3),i=nte(e.encoding,Q3);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=Cne(e.encoding,t.repeater),o={...e,...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!eS(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:l=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...u,layer:e},i=`${(r.name||"")+l}child__layer_${M3(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!eS(n)&&e.columns&&(e=l3(e,["columns"]),E4.warn(S4.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:s={},repeaterPrefix:u=""}=t,l=!eS(n)&&n.row||[s?s.row:null],c=!eS(n)&&n.column||[s?s.column:null],f=eS(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of l)for(const o of c){const l={repeat:e,row:i,column:o,layer:s.layer},c=(r.name||"")+u+"child__"+(eS(n)?`${M3(e)}`:(n.row?`row_${M3(i)}`:"")+(n.column?`column_${M3(o)}`:"")),f=this.map(r,{...t,repeater:l,repeaterPrefix:c});f.name=c,a.push(l3(f,["data"]))}const d=eS(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:d,concat:a}}mapFacet(e,t){const{facet:n}=e;return nee(n)&&e.columns&&(e=l3(e,["columns"]),E4.warn(S4.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=zne({parentProjection:o,projection:r}),u=Tne({parentEncoding:i,encoding:Cne(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:u,height:l,view:c,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=Cne(o,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...l?{height:l}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&E4.warn(S4.facetChannelDropped([...n?[Y3]:[],...r?[X3]:[]]));const t={},o={};for(const n of[Y3,X3]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...u}=r;t[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:Ane(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:Tne({parentEncoding:t,encoding:i,layer:!0}),parentProjection:zne({parentProjection:n,projection:o})};return super.mapLayer(a,s)}},ure=new class extends mne{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=ere(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=ere(e,t)).encoding){const n={};for(const[r,i]of C3(e.encoding))n[r]=tre(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:C3(n).map((([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const n of A3(t.selectionPredicates[e]??{}))n.empty="none"!==o;return{name:e,value:r,select:a,bind:i}}))}:e}},lre=new ire;function cre(e){return QS(e)?{type:e}:e??{}}const fre=["background","padding"];function dre(e,t){const n={};for(const t of fre)e&&void 0!==e[t]&&(n[t]=l4(e[t]));return t&&(n.params=e.params),n}class hre{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new hre(s3(this.explicit),s3(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return I3(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of S3(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function pre(e){return{explicit:!0,value:e}}function mre(e){return{explicit:!1,value:e}}function gre(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:yre(t,n,r,i)}}function yre(e,t,n,r){return e.explicit&&t.explicit&&E4.warn(S4.mergeConflictingProperty(n,r,e.value,t.value)),e}function vre(e,t,n,r,i=yre){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:a3(e.value,t.value)?e:i(e,t,n,r)}class bre extends hre{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function xre(e){return"url"in e}function wre(e){return"values"in e}function _re(e){return"name"in e&&!xre(e)&&!wre(e)&&!kre(e)}function kre(e){return e&&(Ere(e)||Sre(e)||Are(e))}function Ere(e){return"sequence"in e}function Sre(e){return"sphere"in e}function Are(e){return"graticule"in e}var Cre,Dre;function Mre(e,t=!0,n=GE){if(eS(e)){const r=e.map((e=>Mre(e,t,n)));return t?`[${r.join(", ")}]`:r}return j8(e)?n(t?G8(e):function(e){const t=V8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(c3(e)):e}function Fre(e,t){for(const n of A3(e.component.selection??{})){const r=n.name;let i=`${r}${jie}, ${"global"===n.resolve?"true":`{unit: ${Hie(e)}}`}`;for(const r of Wie)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+Uie,on:[{events:{signal:n.name+jie},update:`modify(${iA(n.name+Iie)}, ${i})`}]})}return $re(t)}function Nre(e,t){if(e.component.selection&&S3(e.component.selection).length){const n=iA(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:YK("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return $re(t)}function Ore(e,t){for(const n of A3(e.component.selection??{}))for(const r of Wie)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function $re(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}(Dre=Cre||(Cre={}))[Dre.Raw=0]="Raw",Dre[Dre.Main=1]="Main",Dre[Dre.Row=2]="Row",Dre[Dre.Column=3]="Column",Dre[Dre.Lookup=4]="Lookup";class Tre{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?E4.warn(S4.ADD_SAME_CHILD_TWICE):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class zre extends Tre{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${U3()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class Rre extends Tre{constructor(e,t){super(e),this.formula=t}clone(){return new Rre(null,s3(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=Aee(t,{forAs:!0});e[f3({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return E3(n)?null:new Rre(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:n9(n)};return new Rre(e,{[f3(i)]:i})}merge(e){this.formula={...this.formula};for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of C3(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(A3(this.formula).map((e=>e.as)))}dependentFields(){return new Set(A3(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${f3(this.formula)}`}assemble(){const e=[];for(const t of A3(this.formula)){const{field:n,as:r,timeUnit:i}=t,{unit:o,utc:a,...s}=n9(i);e.push({field:R3(n),type:"timeunit",...o?{units:K8(o)}:{},...a?{timezone:"utc"}:{},...s,as:[r,`${r}_end`]})}return e}}const Pre="_tuple_fields";class Lre{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}}const Bre={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Lre),o={},a={},s=new Set,u=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=M3(`${r}_${n}`);for(let e=1;s.has(i);e++)i=M3(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},l=t.type,c=e.config.selection[l],f=void 0!==n.value?SS(n.value):null;let{fields:d,encodings:h}=tS(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(tS(e))for(const t of S3(e))H5[t]?(h||(h=[])).push(t):"interval"===l?(E4.warn(S4.INTERVAL_INITIALIZED_WITH_X_Y),h=c.encodings):(d||(d=[])).push(t);d||h||(h=c.encodings,d=c.fields);for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){E4.warn(S4.cannotProjectAggregate(t,n.aggregate));continue}if(!r){E4.warn(S4.cannotProjectOnChannelWithoutField(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};a[f3(i)]=i}if(!o[r]){let a="E";if("interval"===l){W9(e.getScaleComponent(t).get("type"))&&(a="R")}else n.bin&&(a="R-RE");const s={field:r,channel:t,type:a};s.signals={...u(s,"data"),...u(s,"visual")},i.items.push(o[r]=s),i.hasField[r]=i.hasChannel[t]=o[r]}}else E4.warn(S4.cannotProjectOnChannelWithoutField(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e};t.signals={...u(t,"data")},i.items.push(t),i.hasField[e]=t}f&&(t.init=f.map((e=>i.items.map((t=>tS(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),E3(a)||(i.timeUnit=new Rre(null,a))},signals:(e,t,n)=>{const r=t.name+Pre;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n,...r}=e;return r.field=R3(r.field),r}))})}},Ire={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!N6(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&W9(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):E4.warn(S4.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||Ure(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(qie)>=0)i.update=`{${r.map((e=>`${iA(R3(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${iA(R3(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!Ure(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}};function jre(e,t){return`domain(${iA(e.scaleName(t))})`}function Ure(e){return(e.parent&&Fse(e.parent)&&!e.parent.parent)??Ure(e.parent.parent)}const qre="_brush",Wre="_scale_trigger",Hre={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Pre,o=Ire.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${iA(r+qre)}`;Vre(t,((t,n)=>{var r;const i=SS((r=n.between[0]).filter??(r.filter=[]));return i.includes(e)||i.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==J3&&o!==K3)return void E4.warn("Interval selections only support x and y encoding channels.");const l=a?a[i]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Ire.defined(t),u=iA(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=e=>`scale(${u}, ${e})`,d=e.getSizeSignalRef(i===J3?"width":"height").signal,h=`${i}(unit)`,p=Vre(t,((e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]));return p.push({events:{signal:t.name+Wre},update:W9(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[{name:o,...r?{init:Mre(r,!0,f)}:{value:[]},on:p},{name:a,...r?{init:Mre(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(e,t,r,l),f=r.signals.data,d=r.signals.visual,h=iA(e.scaleName(o)),p=W9(e.getScaleComponent(o).get("type"))?"+":"";n.push(...c),s.push(f),u.push({scaleName:e.scaleName(o),expr:`(!isArray(${f}) || (${p}invert(${h}, ${d})[0] === ${p}${f}[0] && ${p}invert(${h}, ${d})[1] === ${p}${f}[1]))`})})),o||n.push({name:r+Wre,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:`${u.map((e=>e.expr)).join(" && ")} ? ${r+Wre} : {}`}]});const l=`unit: ${Hie(e)}, fields: ${i}, values`;return n.concat({name:r+jie,...a?{init:`{${l}: ${Mre(a)}}`}:{},on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]})},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${iA(t.name+Iie)})`;if(Ire.defined(t))return n;const l={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of S3(l))l[t]=[{test:`${u}.length && ${u}[0].unit === ${Hie(e)}`,...l[t]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=S3(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+qre}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+qre,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Vre(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(E4.warn(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Gre={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Pre,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=o.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${a}[${iA(e.vgField(t.channel,{}))}], ${a}[${iA(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${iA(t.field)}]`})).join(", "),u=`unit: ${Hie(e)}, fields: ${i}, values`,l=t.events;return n.concat([{name:r+jie,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${u}: [${s}]} : null`,force:!0}]:[]}])}};function Yre(e,t,n,r){const i=cee(t)&&t.condition,o=r(t);if(i){return{[n]:[...SS(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t;return{test:Kie(e,{param:r,empty:i}),...n}}return{test:eoe(e,t.test),...n}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function Xre(e,t="text"){const n=e.encoding[t];return Yre(e,n,t,(t=>Qre(t,e.config)))}function Qre(e,t,n="datum"){if(e){if(xee(e))return f4(e.value);if(vee(e)){const{format:r,formatType:i}=Tee(e);return j7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Jre(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(eS(a))return{tooltip:Zre({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Yre(e,a,"tooltip",(e=>{const a=Qre(e,i,s);if(a)return a;if(null===e)return;let u=g4("tooltip",r,i);return!0===u&&(u={content:"encoding"}),QS(u)?{value:u}:tS(u)?n4(u)?u:"encoding"===u.content?Zre(n,o,i,t):{signal:s}:void 0}))}}function Kre(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=X5(s),l=bee(r)?r:{...r,type:e[u].type},c=SS(l.title||$ee(l,n)).join(", ");let f;if(m6(s)){const r="x"===s?"x2":"y2",a=zee(e[r]);if(Y6(l.bin)&&a){const e=Aee(l,{expr:o}),t=Aee(a,{expr:o}),{format:s,formatType:u}=Tee(l);f=X7(e,t,s,u,n),i[r]=!0}else if(t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=Tee(l);f=j7({fieldOrDatumDef:l,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}}f??(f=Qre(l,n,o).signal),a.push({channel:s,key:c,value:f})}ste(e,((e,t)=>{hee(e)?s(e,t):fee(e)&&s(e.condition,t)}));const u={};for(const{channel:e,key:t,value:n}of a)i[e]||u[t]||(u[t]=n);return u}function Zre(e,t,n,{reactiveGeom:r}={}){const i=Kre(e,t,n,{reactiveGeom:r}),o=C3(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function eie(e){const{markDef:t,config:n}=e,r=g4("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...tie(e),...nie(e)}}function tie(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=g4("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in a4?{}:{ariaRoleDescription:{value:t}}}function nie(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Yre(e,o,"description",(t=>Qre(t,e.config)));const a=g4("description",n,r);if(null!=a)return{description:f4(a)};if(!1===r.aria)return{};const s=Kre(t,i,r);return E3(s)?void 0:{description:{signal:C3(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function rie(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u??(u=g4(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=f4(u)));const l=i[e];return Yre(t,l,a??e,(n=>P7({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function iie(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??g4("filled",n,i),s=h3(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=g4(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,l=g4(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",f={...u?{fill:f4(u)}:{},...l?{stroke:f4(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&E4.warn(S4.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...rie("color",e,{vgChannel:c,defaultValue:a?u:l}),...rie("fill",e,{defaultValue:r.fill?u:void 0}),...rie("stroke",e,{defaultValue:r.stroke?l:void 0})}}function oie(e){const{encoding:t,mark:n}=e,r=t.order;return!x7(n)&&xee(r)?Yre(e,r,"zindex",(e=>f4(e.value))):{}}function aie(e,t){const n=t[function(e){switch(e){case J3:return"xOffset";case K3:return"yOffset";case Z3:return"x2Offset";case e5:return"y2Offset";case r5:return"thetaOffset";case t5:return"radiusOffset";case i5:return"theta2Offset";case n5:return"radius2Offset"}}(e)];if(n)return n}function sie(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[J5(e)],c=t.scaleName(e),f=t.getScaleComponent(e),d=aie(e,o),h=uie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&m6(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(vee(n)&&i&&t===i.fieldChannel){if(hee(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return R7({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return z7(n,r,{suffix:"end"},{offset:o})}return N7(e)}({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||e]:p}:void 0}function uie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=X5(n),u=Q5(n),l=g4(n,o,a,{vgChannel:u});if(void 0!==l)return L7(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(h3([_9,A9,C9],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[K5(n)],mult:.5}}}}const lie={left:"x",center:"xc",right:"x2"},cie={top:"y",middle:"yc",bottom:"y2"};function fie(e,t,n,r="middle"){if("radius"===e||"theta"===e)return Q5(e);const i="x"===e?"align":"baseline",o=g4(i,t,n);let a;return n4(o)?(E4.warn(S4.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,"x"===e?lie[a||("top"===r?"left":"center")]:cie[a||r]}function die(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?hie(e,t,{defaultPos:n,defaultPos2:r}):sie(e,t,{defaultPos:n})}function hie(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=J5(e),s=K5(e),u=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=X5(n),l=K5(n),c=Q5(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=aie(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=K5(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){if(vee(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return z7(t,o,{suffix:"start"},{offset:u});return N7({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});if(void 0!==m)return{[c]:m};return pie(n,o)||pie(n,{[n]:v4(n,o,s.style),[l]:v4(l,o,s.style)})||pie(n,s[i])||pie(n,s.mark)||{[c]:uie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,a);return{...sie(e,t,{defaultPos:n,vgChannel:u[s]?fie(e,i,o):Q5(e)}),...u}}function pie(e,t){const n=K5(e),r=Q5(e);if(void 0!==t[r])return{[r]:L7(e,t[r])};if(void 0!==t[e])return{[r]:L7(e,t[e])};if(t[n]){const r=t[n];if(!C7(r))return{[n]:L7(e,r)};E4.warn(S4.relativeBandSizeNotSupported(n))}}function mie(e,t,n){const{config:r,encoding:i,markDef:o}=e,a=J5(t),s=K5(t),u=i[t],l=i[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=o.orient,p=i[s]??i.size??g4("size",o,r,{vgChannel:s}),m="bar"===n&&("x"===t?"vertical"===h:"horizontal"===h);if(!hee(u)||!(G6(u.bin)||Y6(u.bin)||u.timeUnit&&!l)||p&&!C7(p)||q9(f))return(vee(u)&&q9(f)||m)&&!l?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=K5(t),f=J5(t),d="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let h;(i.size||r.size)&&(d?h=rie("size",n,{vgChannel:c,defaultRef:f4(r.size)}):E4.warn(S4.cannotApplySizeToNonOrientedMark(r.type)));const p=uee({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l?.get?.("type"),useVlSizeChannel:d});h=h||{[c]:gie(c,u,l,o,p)};const m="band"===l?.get?.("type")&&"band"in h[c]?"top":"middle",g=fie(t,r,o,m),y="xc"===g||"yc"===g,v=aie(t,r),b=N7({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:v,defaultRef:uie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:y?.5:n4(p)?{signal:`(1-${p})/2`}:C7(p)?(1-p.band)/2:0});if(c)return{[g]:b,...h};{const e=Q5(f),t=h[c],n=v?{...t,offset:v}:t;return{[g]:b,[e]:eS(b)?[b[0],{...b[1],offset:n}]:{...b,offset:n}}}}(u,t,e):hie(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});return function({fieldDef:e,fieldDef2:t,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:l}){const c=J5(n),f=Q5(n),d=Q5(c),h=aie(n,o),p=n4(r)?{signal:`(1-${r.signal})/2`}:C7(r)?(1-r.band)/2:.5;if(G6(e.bin)||e.timeUnit)return{[d]:vie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:p,offset:yie(c,a,u,s,h),config:l}),[f]:vie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:n4(p)?{signal:`1-${p.signal}`}:1-p,offset:yie(n,a,u,s,h),config:l})};if(Y6(e.bin)){const r=z7(e,i,{},{offset:yie(c,a,u,s,h)});if(hee(t))return{[d]:r,[f]:z7(t,i,{},{offset:yie(n,a,u,s,h)})};if(X6(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${Aee(e,{expr:"datum"})} + ${e.bin.step})`,offset:yie(n,a,u,s,h)}}}return void E4.warn(S4.channelRequiredForBinned(c))}({fieldDef:u,fieldDef2:l,channel:t,markDef:o,scaleName:d,bandSize:uee({channel:t,fieldDef:u,markDef:o,config:r,scaleType:f}),axisTranslate:e.component.axes[t]?.[0]?.get?.("translate")??.5,spacing:m6(t)?g4("binSpacing",o,r):void 0,reverse:c.get("reverse"),config:r})}function gie(e,t,n,r,i){if(C7(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e)return{scale:t,band:i.band};1!==i.band&&(E4.warn(S4.cannotUseRelativeBandSizeWithNonBandScale(e)),i=void 0)}}else{if(n4(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(r4(e)&&YS(e.step))return{value:e.step-2}}return{value:Zte(r.view,e)-2}}function yie(e,t,n,r,i){if(M5(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(n4(n)||n4(i)||n4(r)){const e=h4(n),t=h4(i),a=h4(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function vie({channel:e,fieldDef:t,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){return O7({fieldDef:t,channel:e,markDef:r,ref:R7({scaleName:n,fieldOrDatumDef:t,bandPosition:i,offset:o}),config:a})}const bie=new Set(["aria","width","height"]);function xie(e,t){const{fill:n,stroke:r}="include"===t.color?iie(e):{};return{..._ie(e.markDef,t),...wie(e,"fill",n),...wie(e,"stroke",r),...rie("opacity",e),...rie("fillOpacity",e),...rie("strokeOpacity",e),...rie("strokeWidth",e),...rie("strokeDash",e),...oie(e),...Jre(e),...Xre(e,"href"),...eie(e)}}function wie(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===g4("invalid",o,r)&&n&&!x7(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&W9(i)&&(t[o]=!0)}return t}),{}),i=S3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>T7(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:F6});if(r)return{[t]:[{test:r,value:null},...SS(n)]}}return n?{[t]:n}:{}}function _ie(e,t){return o4.reduce(((n,r)=>(bie.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=f4(e[r])),n)),{})}function kie(e){const{config:t,markDef:n}=e;if(g4("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&W9(i)&&(t[o]=!0)}return t}),{}),i=S3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>T7(e,t))).join(` ${e} `)}return}(e,{channels:p6});if(t)return{defined:{signal:t}}}return{}}function Eie(e,t){if(void 0!==t)return{[e]:f4(t)}}const Sie="voronoi",Aie={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Sie)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(x7(o))return E4.warn(S4.nearestNotSupportForContinuous(o)),n;const a={name:e.getName(Sie),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Jre(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.indexOf(Sie)>=0&&(u=!0)})),u||n.splice(s+1,0,a),n}},Cie={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!Ute(e.bind),parse:(e,t,n)=>Gie(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=Aie.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const u=M3(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift({name:u,...a?{init:Mre(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${iA(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+jie))[0],a=r+Pre,s=i.items.map((e=>M3(`${r}_${e.field}`))),u=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Die="_toggle",Mie={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Die,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+jie,r=t.name+Die;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Hie(e)}}, `)+`${r} ? ${n} : null`}},Fie={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=QS(t.clear)?YK(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Cie.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===M3(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+jie));r(e,"null"),Mie.defined(t)&&(e=n.findIndex((e=>e.name===t.name+Die)),r(e,"false"))}return n}},Nie={defined:e=>{const t="global"===e.resolve&&e.bind&&Ute(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Ite;return t&&!n&&E4.warn(S4.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{const r=s3(n);if(r.select=QS(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Gie(t,r),tS(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=SS(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=qte(t.bind)?t.bind.legend:"click",o=QS(i)?YK(i,"view"):SS(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=qte(t.bind)&&t.bind.legend,o=e=>t=>{const n=s3(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${M3(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+jie)),a=r+Pre,s=i.items.filter((e=>e.hasLegend)).map((e=>M3(`${r}_${M3(e.field)}_legend`))),u=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const l=n.find((e=>e.name===r+Die)),c=qte(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:c}):l.on[0].events=c),n}};const Oie="_translate_anchor",$ie="_translate_delta",Tie={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Ire.defined(t),o=r+Oie,{x:a,y:s}=t.project.hasChannel;let u=YK(t.translate,"scope");return i||(u=u.map((e=>(e.between[0].markname=r+qre,e)))),n.push({name:o,value:{},on:[{events:u.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?jre(e,J3):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?jre(e,K3):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+$ie,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&zie(e,t,a,"width",n),void 0!==s&&zie(e,t,s,"height",n),n}};function zie(e,t,n,r,i){const o=t.name,a=o+Oie,s=o+$ie,u=n.channel,l=Ire.defined(t),c=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=d.get("reverse"),m=`${a}.extent_${u}`,g=`${l?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${l?u===J3?p?"":"-":p?"-":"":""}${s}.${u} / ${l?`${f}`:`span(${m})`}`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:l?g:`clampRange(${g}, 0, ${f})`})}const Rie="_zoom_anchor",Pie="_zoom_delta",Lie={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Ire.defined(t),o=r+Pie,{x:a,y:s}=t.project.hasChannel,u=iA(e.scaleName(J3)),l=iA(e.scaleName(K3));let c=YK(t.zoom,"scope");return i||(c=c.map((e=>(e.markname=r+qre,e)))),n.push({name:r+Rie,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Bie(e,t,a,"width",n),void 0!==s&&Bie(e,t,s,"height",n),n}};function Bie(e,t,n,r,i){const o=t.name,a=n.channel,s=Ire.defined(t),u=i.filter((e=>e.name===n.signals[s?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c.get("type"),d=s?jre(e,a):u.name,h=o+Pie,p=`${s?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${o}_zoom_anchor.${a}`}, ${h}${s?"pow"===f?`, ${c.get("exponent")??1}`:"symlog"===f?`, ${c.get("constant")??1}`:"":""})`;u.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${l})`})}const Iie="_store",jie="_tuple",Uie="_modify",qie="vlSelectionResolve",Wie=[Gre,Hre,Bre,Mie,Cie,Ire,Nie,Fie,Tie,Lie,Aie];function Hie(e,{escape:t}={escape:!0}){let n=t?iA(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!Dse(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of z5)e[t]&&(n+=` + '__facet_${t}_' + (facet[${iA(r.vgField(t))}])`)}return n}function Vie(e){return A3(e.component.selection??{}).reduce(((e,t)=>e||t.project.items.some((e=>e.field===Ite))),!1)}function Gie(e,t){!QS(t.select)&&t.select.on||delete e.events,!QS(t.select)&&t.select.clear||delete e.clear,!QS(t.select)&&t.select.toggle||delete e.toggle}function Yie(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...Yie(e.object)),t.push(...Yie(e.property))),t)}function Xie(e){return"MemberExpression"===e.object.type?Xie(e.object):"datum"===e.object.name}function Qie(e){const t=jQ(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&Xie(e)&&n.add(Yie(e).slice(1).join("."))})),n}class Jie extends Tre{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=eoe(this.model,this.filter,this),this._dependentFields=Qie(this.expr)}clone(){return new Jie(null,this.model,s3(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Kie(e,t,n,r="datum"){const i=QS(t)?t:t.param,o=M3(i),a=iA(o+Iie);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const u=`vlSelectionTest(${a}, ${r}${"global"===s.resolve?")":`, ${iA(s.resolve)})`}`,l=`length(data(${a}))`;return!1===t.empty?`${l} && ${u}`:`!${l} || ${u}`}function Zie(e,t,n){const r=M3(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,E4.warn((e.length?"Multiple ":"No ")+`matching ${iA(i)} encoding found for selection ${iA(n.param)}. `+`Using "field": ${iA(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&E4.warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${iA(a)}.`);return`${o.name}[${iA(R3(a))}]`}function eoe(e,t,n){return F3(t,(t=>QS(t)?t:function(e){return e?.param}(t)?Kie(e,t,n):d9(t)))}function toe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function noe(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const e in c){const n=Xee[e],r=c[e];if(n&&n!==t&&"both"!==n)delete c[e];else if(Gee(r)){const{condition:t,...n}=r,i=SS(t),o=Vee[e];if(o){const{vgProp:t,part:r}=o;toe(c,r,t,[...i.map((e=>{const{test:t,...n}=e;return{test:eoe(null,t),...n}})),n]),delete c[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t,...n}=e;return`${eoe(null,t)} ? ${d4(n)} : `})).join("")+d4(n)};c[e]=t}}else if(n4(r)){const t=Vee[e];if(t){const{vgProp:n,part:i}=t;toe(c,i,n,r),delete c[e]}}h3(["labelAlign","labelBaseline"],e)&&null===c[e]&&delete c[e]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:e}=c.encode;c.encode={...e?{grid:e}:{}},E3(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:I3(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;c.encode?.labels?.update&&n4(c.encode.labels.update.text)&&(e=P3(s,"datum.label",c.encode.labels.update.text.signal)),toe(c,"labels","text",{signal:e})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const t of Yee)e.hasAxisPart(t)||delete c.encode[t];E3(c.encode)&&delete c.encode}const t=function(e,t){if(e)return eS(e)&&!t4(e)?e.map((e=>$ee(e,t))).join(", "):e}(u,n);return{scale:a,orient:o,grid:!1,...t?{title:t}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:I3(l,0)}}}}function roe(e){const{axes:t}=e.component,n=[];for(const r of p6)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function ioe(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...S3(i),...S3(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${h4(i[t])} : ${h4(o[t])}`};return s}return t[e]}))])}function ooe(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in B9?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[];const o="x"===e?"axisX":"axisY",a=n4(n)?"axisOrient":`axis${O3(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:ioe(s,r,e,n),vgAxisConfig:ioe(u,r,e,n),axisConfigStyle:aoe([...u,...s],r)}}function aoe(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=SS(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function soe(e,t,n,r={}){const i=b4(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const uoe={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return W7(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return H7(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!q9(e)&&hee(t)&&!G6(t?.bin)&&!Y6(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||foe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||coe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&h3(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!tS(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,hee(t)&&!!t.timeUnit,hee(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!q9(t)&&"log"!==t){if(hee(e)){if(G6(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&h3(["month","hours","day","quarter"],n9(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=doe(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return w4(i?[oee(i)]:[],hee(a)?[oee(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(eS(n))return Wee(t,n);if(n4(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&Cee(t))return 1;return 0}(n,t)};function loe(e){return`(((${e.signal} % 360) + 360) % 360)`}function coe(e,t,n,r){if(void 0!==e){if("x"===n){if(n4(e)){const n=loe(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${n4(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(n4(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(n4(e)){const n=loe(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${n4(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(n4(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function foe(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(n4(e)){const n=loe(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${n4(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(n4(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function doe(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?_4(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class hoe extends Tre{constructor(e,t){super(e),this.transform=t,this._dependentFields=Qie(this.transform.calculate)}clone(){return new hoe(null,s3(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(wee(t)&&tee(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${d9({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new hoe(e,{calculate:a,as:poe(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${f3(this.transform)}`}}function poe(e,t,n){return Aee(e,{prefix:t,suffix:"sort_index",...n??{}})}function moe(e,t){return h3(["top","bottom"],t)?"column":h3(["left","right"],t)||"row"===e?"row":"column"}function goe(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return I3((t||{})[e],i[e],n.header[e])}function yoe(e,t,n,r){const i={};for(const o of e){const e=goe(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const voe=["row","column"],boe=["header","footer"];function xoe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=yoe(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=moe(t,s),l=V3(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",..._oe(l,u),...woe(u,l,o),...Moe(r,i,t,zte,$te)}}}function woe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=foe(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function _oe(e,t){const n=coe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function koe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of boe)if(n[i])for(const o of n[i]){const a=Aoe(e,t,i,n,o);null!=a&&r.push(a)}return r}function Eoe(e,t){const{sort:n}=e;return eee(n)?{field:Aee(n,{expr:"datum"}),order:n.order??"ascending"}:eS(n)?{field:poe(e,t,{expr:"datum"}),order:"ascending"}:{field:Aee(e,{expr:"datum"}),order:n??"ascending"}}function Soe(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=yoe(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=j7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=moe(t,s);return{text:{signal:u?P3(P3(u,"datum.label",l),"datum.value",Aee(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",..._oe(o,c),...woe(c,o,a),...Moe(n,e,t,Rte,Tte)}}function Aoe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=yoe(["labelOrient"],a.header,s,t);("row"===t&&!h3(["top","bottom"],e)||"column"===t&&!h3(["left","right"],e))&&(o=Soe(a,t,s))}const u=Dse(e)&&!nee(e.facet),l=i.axes,c=l?.length>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:Eoe(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Coe={column:{start:0,end:1},row:{start:1,end:0}};function Doe(e,t){return Coe[t][e]}function Moe(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=goe(a,t?.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function Foe(e){return[...Noe(e,"width"),...Noe(e,"height"),...Noe(e,"childWidth"),...Noe(e,"childHeight")]}function Noe(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(q9(r)&&r4(o)){const r=e.scaleName(n);if(Dse(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Ooe(r,o)]}return[Ooe(r,o),{name:i,update:$oe(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${Kte(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Ooe(e,t){return{name:`${e}_step`,value:t.step}}function $oe(e,t,n){const r=t.get("type"),i=t.get("padding"),o=I3(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${h4(a)}, ${h4(o)}) * ${e}_step`}function Toe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function zoe(e,t){return S3(e).reduce(((n,r)=>{const i=e[r];return{...n,...Yre(t,i,r,(e=>f4(e.value)))}}),{})}function Roe(e,t){if(Fse(t)||Dse(t))return"shared";if(Mse(t))return m6(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Poe(e,t){const n=e.scale[t],r=m6(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&E4.warn(S4.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}const Loe={...Bte,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Boe=S3(Loe);class Ioe extends hre{}const joe={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&"trail"!==l;let f={...p4({},n,E7),...iie(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=void 0===d?Uoe(s.opacity)??a.opacity:void 0;if(f.fill)if("fill"===r||c&&r===l5)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=f4(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=f4(m??1));else if(eS(f.fill)){const e=qoe(s.fill??s.color)??a.fill??(c&&a.color);e&&(f.fill=f4(e))}if(f.stroke)if("stroke"===r||!c&&r===l5)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(eS(f.stroke)){const e=I3(qoe(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(f.stroke={value:e})}if(r!==m5){const e=hee(t)&&Hoe(n,i,t);e?f.opacity=[{test:e,...f4(m??1)},f4(u.legend.unselectedOpacity)]:m&&(f.opacity=f4(m))}return f={...f,...e},E3(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?Uoe(a.opacity)||o.opacity:void 0;u&&(s.opacity=f4(u));return s={...s,...e},E3(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=hee(t)?Hoe(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=B7(c)?q7({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return E3(d)?void 0:d},entries:function(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function Uoe(e){return Woe(e,((e,t)=>Math.max(e,t.value)))}function qoe(e){return Woe(e,((e,t)=>I3(e,t.value)))}function Woe(e,t){return function(e){const t=e&&e.condition;return!!t&&(eS(t)||xee(t))}(e)?SS(e.condition).reduce(t,e.value):xee(e)?e.value:void 0}function Hoe(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=iA(n.field);return r.map((e=>`(!length(data(${iA(M3(e)+Iie)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const Voe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return W7(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return H7(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(H9(i))return"horizontal"===n?"top"===r||"bottom"===r?Xoe(t,"width",a,o):a:Xoe(t,"height",u,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(h3(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=qoe(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nee(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if($5(n)&&H9(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(eS(n))return Wee(t,n);if(n4(n))return n;return}(t,e)};function Goe(e){const{legend:t}=e;return I3(t.type,function({channel:e,timeUnit:t,scaleType:n}){if($5(e)){if(h3(["quarter","month","day"],t))return"symbol";if(H9(n))return"gradient"}return"symbol"}(e))}function Yoe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function Xoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Qoe(e){const t=Cse(e)?function(e){const{encoding:t}=e,n={};for(const r of[l5,...Lte]){const i=Ree(t[r]);i&&e.getScaleComponent(r)&&(r===d5&&hee(i)&&i.type===x9||(n[r]=Koe(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Qoe(r);for(const i of S3(r.component.legends))n.legend[i]=Poe(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Zoe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of S3(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function Joe(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function Koe(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new Ioe({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of A3(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&Nie.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const u=void 0!==n?!n:a.disable;if(s.set("disable",u,void 0!==n),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ree(i[t]),f=hee(c)?n9(c.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",h=Goe({legend:n,channel:t,timeUnit:f,scaleType:l}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:h,direction:Yoe({legend:n,legendType:h,orient:d,legendConfig:a})};for(const r of Boe){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in Voe?Voe[r](p):n[r];if(void 0!==i){const a=Joe(i,r,n,e.fieldDef(t));(a||void 0===o.legend[r])&&s.set(r,i,a)}}const m=n?.encoding??{},g=s.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=zoe(m[t]??{},e),r=t in joe?joe[t](n,v):n;void 0===r||E3(r)||(y[t]={...g?.length&&hee(c)?{name:`${M3(c.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return E3(y)||s.set("encode",y,!!n?.encoding),s}function Zoe(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of Boe){const r=vre(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return eae(e,t);case"title":return k4(e,t);case"type":return i=!0,mre("symbol")}return yre(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&N3(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&N3(e.explicit,["encode","gradient"])),e}function eae(e,t){return"circle"===t.value?t:e}function tae(e){const t=e.component.legends,n={};for(const r of S3(t)){const i=e.getScaleComponent(r),o=c3(i.get("domains"));if(n[o])for(const e of n[o]){Zoe(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return A3(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(n)return;!1===t.aria&&null==o.aria&&(o.aria=!1);if(o.encode?.symbols){const e=o.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||o.stroke||(e.stroke={value:"transparent"});for(const t of Lte)o[t]&&delete e[t]}o.title||delete o.title;if(void 0!==r){let e=r;o.encode?.labels?.update&&n4(o.encode.labels.update.text)&&(e=P3(r,"datum.label",o.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(o,"labels","text",{signal:e})}return o}(t,e.config))).filter((e=>void 0!==e))}function nae(e){return Fse(e)||Mse(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),rae(e))}(e):rae(e)}function rae(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=n4(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return h3(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const iae=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class oae extends hre{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function aae(e){e.component.projection=Cse(e)?function(e){if(e.hasProjection){const t=Z6(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[a5,o5],[u5,s5]])(Ree(n[r[0]])||Ree(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(d5)&&e.typedFieldDef(d5).type===x9&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(Cre.Main));return t}(e):void 0,o=new oae(e.projectionName(!0),{...Z6(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)aae(t);const n=m3(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=m3(iae,(n=>!BS(e.explicit,n)&&!BS(t.explicit,n)||!!(BS(e.explicit,n)&&BS(t.explicit,n)&&a3(e.get(n),t.get(n)))));if(a3(e.size,t.size)){if(n)return e;if(a3(e.explicit,{}))return t;if(a3(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new oae(n,t.specifiedProjection,t.size,s3(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function sae(e,t,n,r){if(Hee(t,n)){const i=Cse(e)?e.axis(n)??e.legend(n)??{}:{},o=Aee(t,{expr:"datum"}),a=Aee(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Aee(t,{binSuffix:"range",forAs:!0}),formula:X7(o,a,i.format,i.formatType,r)}}return{}}function uae(e,t){return`${V6(e)}_${t}`}function lae(e,t,n){const r=uae(Iee(n,void 0)??{},t);return e.getName(`${r}_bins`)}function cae(e,t,n){let r,i;r=function(e){return"as"in e}(e)?QS(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[Aee(e,{forAs:!0}),Aee(e,{binSuffix:"end",forAs:!0})];const o={...Iee(t,void 0)},a=uae(o,e.field),{signal:s,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(Q6(o.extent)){const e=o.extent;i=Zie(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}}}}class fae extends Tre{constructor(e,t){super(e),this.bins=t}clone(){return new fae(null,s3(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(bee(n)&&G6(n.bin)){const{key:i,binComponent:o}=cae(n,n.bin,t);e[i]={...o,...e[i],...sae(t,n,r,t.config)}}return e}),{});return E3(n)?null:new fae(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=cae(t,t.bin,n);return new fae(e,{[r]:i})}merge(e,t){for(const n of S3(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=v3([...this.bins[n].as,...e.bins[n].as],f3)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(A3(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(A3(this.bins).map((e=>e.field)))}hash(){return`Bin ${f3(this.bins)}`}assemble(){return A3(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:R3(e.field),as:n,signal:e.signal,...Q6(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:R3(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:Aee({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function dae(e,t,n,r){const i=Cse(r)?r.encoding[J5(t)]:void 0;if(bee(n)&&Cse(r)&&lee(n,i,r.markDef,r.config))e.add(Aee(n,{})),e.add(Aee(n,{suffix:"end"})),n.bin&&Hee(n,t)&&e.add(Aee(n,{binSuffix:"range"}));else if(t in F5){const n=function(e){switch(e){case o5:return"y";case s5:return"y2";case a5:return"x";case u5:return"x2"}}(t);e.add(r.getName(n))}else e.add(Aee(n));return e}class hae extends Tre{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new hae(null,new Set(this.dimensions),s3(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([Aee(e,{forAs:!0})]);else{if(B6(o)||I6(o)){const e=B6(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([Aee({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([Aee(e,{forAs:!0})]);N6(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([Aee({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([Aee({field:a,aggregate:"max"},{forAs:!0})]))}else dae(i,n,e,t)})),i.size+S3(r).length===0?null:new hae(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};for(const e of t.aggregate){const{op:t,field:n,as:i}=e;t&&("count"===t?(r["*"]??(r["*"]={}),r["*"].count=new Set([i||Aee(e,{forAs:!0})])):(r[n]??(r[n]={}),r[n][t]=new Set([i||Aee(e,{forAs:!0})])))}for(const e of t.groupby??[])n.add(e);return n.size+S3(r).length===0?null:new hae(e,n,r)}merge(e){return x3(this.dimensions,e.dimensions)?(function(e,t){for(const n of S3(t)){const r=t[n];for(const t of S3(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(E4.debug("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...S3(this.measures)])}producedFields(){const e=new Set;for(const t of S3(this.measures))for(const n of S3(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${f3({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of S3(this.measures))for(const i of S3(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:R3(r));return{type:"aggregate",groupby:[...this.dimensions].map(R3),ops:e,fields:t,as:n}}}class pae extends Tre{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of z5){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[Aee(n),...G6(r)?[Aee(n,{binSuffix:"end"})]:[]],...eee(i)?{sortField:i}:eS(i)?{sortIndexField:poe(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of z5)this[t]&&(e+=` ${t.charAt(0)}:${f3(this[t])}`);return e}get fields(){const e=[];for(const t of z5)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of z5)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of p6){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(q9(r)&&r4(i)){const n=ase(sse(this.childModel,t));n?e[t]=n:E4.warn(S4.unknownField(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:u}=this[e];if(s){const{op:e=Q7,field:t}=s;i.push(t),o.push(e),a.push(Aee(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of voe){for(const t of boe){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:o,column:a}=i;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[X3,Y3])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function mae(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function gae(e){const t={};return i3(e.filter,(e=>{if(c9(e)){let n=null;r9(e)?n=l4(e.equal):o9(e)?n=l4(e.lte):i9(e)?n=l4(e.lt):a9(e)?n=l4(e.gt):s9(e)?n=l4(e.gte):u9(e)?n=e.range[0]:l9(e)&&(n=(e.oneOf??e.in)[0]),n&&(j8(n)?t[e.field]="date":YS(n)?t[e.field]="number":QS(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function yae(e){const t={};function n(e){var n;Uee(e)?t[e.field]="date":"quantitative"===e.type&&(QS(n=e.aggregate)&&h3(["min","max"],n))?t[e.field]="number":B3(e.field)>1?e.field in t||(t[e.field]="flatten"):wee(e)&&eee(e.sort)&&B3(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Cse(e)||Dse(e))&&e.forEachFieldDef(((t,r)=>{if(bee(t))n(t);else{const i=X5(r),o=e.fieldDef(i);n({...t,type:o.type})}})),Cse(e)){const{mark:n,markDef:r,encoding:i}=e;if(x7(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];hee(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class vae extends Tre{constructor(e,t){super(e),this._parse=t}clone(){return new vae(null,s3(this._parse))}hash(){return`Parse ${f3(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!kre(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of S3(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:E4.warn(S4.differentParse(e,n[e],t.value)))}for(const e of S3(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:E4.warn(S4.differentParse(e,t[e],n)))}const i=new hre(t,n);r.copyAll(i);const o={};for(const e of S3(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===S3(o).length||r.parseNothing?null:new vae(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of S3(this._parse)){const n=this._parse[t];1===B3(t)&&(e[t]=n)}return e}producedFields(){return new Set(S3(this._parse))}dependentFields(){return new Set(S3(this._parse))}assembleTransforms(e=!1){return S3(this._parse).filter((t=>!e||B3(t)>1)).map((e=>{const t=function(e,t){const n=$3(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${mae(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${mae(t.slice(4,t.length))}')`;return E4.warn(S4.unrecognizedParse(t)),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:L3(e)}})).filter((e=>null!==e))}}class bae extends Tre{clone(){return new bae(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Ite])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ite}}}var xae={};class wae extends Tre{constructor(e,t){super(e),this.params=t}clone(){return new wae(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${f3(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class _ae extends Tre{constructor(e,t){super(e),this.params=t}clone(){return new _ae(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${f3(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class kae extends Tre{constructor(e){let t;if(super(null),e??(e={name:"source"}),kre(e)||(t=e.format?{...l3(e.format,["parse"])}:{}),wre(e))this._data={values:e.values};else if(xre(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];h3(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else Sre(e)?this._data={values:[{type:"Sphere"}]}:(_re(e)||kre(e))&&(this._data={});this._generator=kre(e),e.name&&(this._name=e.name),t&&!E3(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var Eae,Sae=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Aae=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function Cae(e){return e instanceof kae||e instanceof wae||e instanceof _ae}t(xae,"isDataSourceNode",(function(){return Cae}));class Dae{constructor(){Eae.set(this,void 0),Sae(this,Eae,!1)}setModified(){Sae(this,Eae,!0)}get modifiedFlag(){return Aae(this,Eae)}}t(xae,"Optimizer",(function(){return Dae})),Eae=new WeakMap;class Mae extends Dae{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}t(xae,"BottomUpOptimizer",(function(){return Mae}));class Fae extends Dae{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}t(xae,"TopDownOptimizer",(function(){return Fae}));class Nae extends xae.TopDownOptimizer{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of S3(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Oae extends xae.TopDownOptimizer{constructor(e){super(),this.requiresSelectionId=e&&Vie(e)}run(e){e instanceof bae&&(this.requiresSelectionId&&(xae.isDataSourceNode(e.parent)||e.parent instanceof hae||e.parent instanceof vae)||(this.setModified(),e.remove()))}}class $ae extends xae.Optimizer{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof Rre&&(n=e.producedFields(),w3(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class Tae extends xae.TopDownOptimizer{constructor(){super()}run(e){e instanceof zre&&!e.isRequired()&&(this.setModified(),e.remove())}}class zae extends xae.BottomUpOptimizer{run(e){if(!(xae.isDataSourceNode(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof vae)if(e instanceof vae)this.setModified(),e.merge(t);else{if(k3(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class Rae extends xae.BottomUpOptimizer{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof vae));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of S3(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!E3(r)){this.setModified();const n=new vae(e,r);for(const i of t){if(i instanceof vae)for(const e of S3(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof vae&&0===S3(i.parse).length&&i.remove()}}}}}class Pae extends xae.BottomUpOptimizer{run(e){e instanceof zre||e.numChildren()>0||e instanceof pae||e instanceof kae||(this.setModified(),e.remove())}}class Lae extends xae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof Rre)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class Bae extends xae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof hae)),n={};for(const e of t){const t=f3(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of S3(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Iae extends xae.BottomUpOptimizer{constructor(e){super(),this.model=e}run(e){const t=!(xae.isDataSourceNode(e)||e instanceof Jie||e instanceof vae||e instanceof bae),n=[],r=[];for(const i of e.children)i instanceof fae&&(t&&!k3(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof fae?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class jae extends xae.BottomUpOptimizer{run(e){const t=[...e.children];if(!p3(t,(e=>e instanceof zre))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof zre){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof zre))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class Uae extends Tre{constructor(e,t){super(e),this.transform=t}clone(){return new Uae(null,s3(this.transform))}addDimensions(e){this.transform.groupby=v3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??Aee(e)}hash(){return`JoinAggregateTransform ${f3(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class qae extends Tre{constructor(e,t){super(e),this._stack=t}clone(){return new qae(null,s3(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(I3(e.order,"ascending"));const u={field:a,order:s};let l;return l=function(e){return eS(e)&&e.every((e=>QS(e)))&&e.length>1}(i)?i:QS(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new qae(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:l})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){u=zee(r[i])}const l=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=Aee(t.fieldDef);return n&&e.push(n),e}),[])}(t),c=t.encoding.order;let f;return f=eS(c)||hee(c)?x4(c):l.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new qae(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:l,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${f3(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[Aee(e,{binSuffix:"mid"})]:[Aee(e,{}),Aee(e,{binSuffix:"end"})]:[Aee(e)]:n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+Aee(n,{expr:"datum"})+`+${1-o}*`+Aee(n,{expr:"datum",binSuffix:"end"}),as:Aee(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:Aee(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:u,offset:a}),e}}class Wae extends Tre{constructor(e,t){super(e),this.transform=t}clone(){return new Wae(null,s3(this.transform))}addDimensions(e){this.transform.groupby=v3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??Aee(e)}hash(){return`WindowTransform ${f3(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>j6(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)a.push(e.field),s.push(e.order??"ascending");const u={field:a,order:s},l=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:u,...void 0!==l?{ignorePeers:l}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Hae(e){if(e instanceof pae)if(1!==e.numChildren()||e.children[0]instanceof zre){const n=e.model.component.data.main;Vae(n);const r=(t=e,function e(n){if(!(n instanceof pae)){const r=n.clone();if(r instanceof zre){const e=Gae+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof hae||r instanceof qae||r instanceof Wae||r instanceof Uae)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof hae||t instanceof qae||t instanceof Wae||t instanceof Uae)&&t.addDimensions(e.fields),t.swapWithParent(),Hae(e)}else e.children.map(Hae);var t}function Vae(e){if(e instanceof zre&&e.type===Cre.Main&&1===e.numChildren()){const t=e.children[0];t instanceof pae||(t.swapWithParent(),Vae(e))}}const Gae="scale_";function Yae(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Yae(t.children))return!1}return!0}function Xae(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Qae(e,t,n){let r=e.sources,i=!1;return i=Xae(new Tae,r)||i,i=Xae(new Oae(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=Xae(new Pae,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=Xae(new zae,r)||i,i=Xae(new Iae(t),r)||i,i=Xae(new $ae,r)||i,i=Xae(new Rae,r)||i,i=Xae(new Bae,r)||i,i=Xae(new Lae,r)||i,i=Xae(new Nae,r)||i,i=Xae(new jae,r)||i),e.sources=r,i}class Jae{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new Jae((()=>e(t)))}}function Kae(e){Cse(e)?function(e){const t=e.component.scales;for(const n of S3(t)){const r=Zae(e,n);if(t[n].setWithExplicit("domains",r),rse(e,n),e.component.data.isFaceted){let t=e;for(;!Dse(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)i4(e)&&(e.data=Gae+e.data.replace(Gae,""))}}}(e):function(e){for(const t of e.children)Kae(t);const t=e.component.scales;for(const n of S3(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):vre(r,e.getWithExplicit("domains"),"domains","scale",ose);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&E4.warn(S4.NEEDS_SAME_SELECTION),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Zae(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=ise(t,n);if(!e)return void E4.warn(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=ise(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&Ree(r.x2)?Ree(r.x)?vre(tse(n,i,e,"x"),tse(n,i,e,"x2"),"domain","scale",ose):tse(n,i,e,"x2"):"y"===t&&Ree(r.y2)?Ree(r.y)?vre(tse(n,i,e,"y"),tse(n,i,e,"y2"),"domain","scale",ose):tse(n,i,e,"y2"):tse(n,i,e,t)}function ese(e,t,n){const r=n9(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${qee(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function tse(e,t,n,r){const{encoding:i}=n,o=Ree(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return e&&e.unionWith}(t)){const i=tse(e,void 0,n,r),o=ese(t.unionWith,a,s);return pre([...i.value,...o])}if(n4(t))return pre([t]);if(t&&"unaggregated"!==t&&!G9(t))return pre(ese(t,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return mre([[0,1]]);const e=n.requestDataName(Cre.Main);return mre([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const l=N6(r)&&hee(o)?function(e,t,n){if(!q9(n))return;const r=e.fieldDef(t),i=r.sort;if(tee(i))return{op:"min",field:poe(r,t),order:"ascending"};const{stack:o}=e,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(eee(i)){return nse(i,o&&!h3(a,i.field))}if(Z7(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:u}=r,l=o&&!h3(a,u);if(B6(s)||I6(s))return nse({field:Aee(r),order:n},l);if(j6(s)||!s)return nse({op:s,field:u,order:n},l)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(h3(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(mee(o)){return mre(ese([o.datum],a,s))}const c=o;if("unaggregated"===t){const e=n.requestDataName(Cre.Main),{field:t}=o;return mre([{data:e,field:Aee({field:t,aggregate:"min"})},{data:e,field:Aee({field:t,aggregate:"max"})}])}if(G6(c.bin)){if(q9(e))return mre("bin-ordinal"===e?[]:[{data:D3(l)?n.requestDataName(Cre.Main):n.requestDataName(Cre.Raw),field:n.vgField(r,Hee(c,r)?{binSuffix:"range"}:{}),sort:!0!==l&&tS(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=c;if(G6(e)){const t=lae(n,c.field,e);return mre([new Jae((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return mre([{data:n.requestDataName(Cre.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&h3(["time","utc"],e)&&lee(c,Cse(n)?n.encoding[J5(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(Cre.Main);return mre([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return mre(l?[{data:D3(l)?n.requestDataName(Cre.Main):n.requestDataName(Cre.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(Cre.Main),field:n.vgField(r)}])}function nse(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Q7),...r?{field:R3(r)}:{},...i?{order:i}:{}}}function rse(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=G9(r)&&r,a=X6(i)&&Q6(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function ise(e,t){const{aggregate:n,type:r}=e;return n?QS(n)&&!H6[n]?{valid:!1,reason:S4.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:S4.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:S4.unaggregateDomainHasNoEffectForRawField(e)}}function ose(e,t,n,r){return e.explicit&&t.explicit&&E4.warn(S4.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ase(e){if(i4(e)&&QS(e.field))return e.field;if(function(e){return!eS(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(i4(n)&&QS(n.field))if(t){if(t!==n.field)return E4.warn(S4.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=n.field;return E4.warn(S4.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!eS(e)&&"fields"in e&&"data"in e}(e)){E4.warn(S4.FACETED_INDEPENDENT_SAME_SOURCE);const t=e.fields[0];return QS(t)?t:void 0}}function sse(e,t){return function(e){const t=v3(e.map((e=>{if(i4(e)){const{sort:t,...n}=e;return n}return e})),f3),n=v3(e.map((e=>{if(i4(e)){const t=e.sort;return void 0===t||D3(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),f3);if(0===t.length)return;if(1===t.length){const t=e[0];if(i4(t)&&n.length>0){let e=n[0];if(n.length>1)E4.warn(S4.MORE_THAN_ONE_SORT),e=!0;else if(tS(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=v3(n.map((e=>D3(e)||!("op"in e)||QS(e.op)&&e.op in L6?e:(E4.warn(S4.domainSortDropped(e)),!0))),f3);let i;1===r.length?i=r[0]:r.length>1&&(E4.warn(S4.MORE_THAN_ONE_SORT),i=!0);const o=v3(e.map((e=>i4(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0])return{data:o[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}};return{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map((t=>(i4(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function use(e){return Fse(e)||Mse(e)?e.children.reduce(((e,t)=>e.concat(use(t))),lse(e)):lse(e)}function lse(e){return S3(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=function(e,t,n,r){if(m6(n)){if(r4(e))return{step:{signal:`${t}_step`}}}else if(tS(e)&&i4(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),h=sse(e,n),p=s?function(e,t,n,r){const i=Zie(e,t.param,t);return{signal:W9(n.get("type"))&&eS(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:o,type:a,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==c?{reverse:c}:{},...f}),t}),[])}class cse extends hre{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||p3(this.get("domains"),(e=>eS(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const fse=["range","scheme"];function dse(e){return"x"===e?"width":"y"===e?"height":void 0}function hse(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=dse(t),a=e.getName(o);if(tS(r)&&r.binned&&void 0!==r.step)return new Jae((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(G6(r)){const t=lae(e,i,r);return new Jae((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function pse(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of fse)if(void 0!==n[r]){const o=r7(i,r),a=i7(e,r);if(o)if(a)E4.warn(a);else switch(r){case"range":{const r=n.range;if(eS(r)){if(m6(e))return pre(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return Jae.fromName(r,n)}return e})))}else if(tS(r))return pre({data:t.requestDataName(Cre.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return pre(r)}case"scheme":return pre(mse(n[r]))}else E4.warn(S4.scalePropertyNotWorkWithScaleType(i,r,e))}if(e===J3||e===K3){const t=e===J3?"width":"height",n=r[t];if(Xte(n)){if(q9(i))return pre({step:n.step});E4.warn(S4.stepDropped(t))}}const{rangeMin:o,rangeMax:a}=n,s=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=Ree(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case J3:case K3:{if(h3(["point","band"],u))if(e!==J3||n.width){if(e===K3&&!n.height){const e=ene(r.view,"height");if(Xte(e))return e}}else{const e=ene(r.view,"width");if(Xte(e))return e}const i=dse(e),o=t.getName(i);return e===K3&&W9(u)?[Jae.fromName(a,o),0]:[0,Jae.fromName(a,o)]}case h5:{const o=gse(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:hse(n,"x"),y:hse(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=vse(t,i,r.view);return YS(e)?e-1:new Jae((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=vse(t,i,r.view);return YS(e)?Math.pow(yse*e,2):new Jae((()=>`pow(0.95 * ${e.signal}, 2)`))}}throw new Error(S4.incompatibleChannel("size",e))}(i,n,t,r);return V9(u)?function(e,t,n){const r=()=>{const r=h4(t),i=h4(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return n4(t)?new Jae(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&eS(n)?n.length+1:(E4.warn(S4.domainRequiredForThresholdScale(r)),3)}}(u,r,l,e)):[o,a]}case r5:return[0,2*Math.PI];case p5:return[0,360];case t5:return[0,new Jae((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case v5:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case b5:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case d5:return"symbol";case l5:case c5:case f5:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case m5:case g5:case y5:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t);return(void 0!==o||void 0!==a)&&r7(i,"rangeMin")&&eS(s)&&2===s.length?pre([o??s[0],a??s[1]]):mre(s)}function mse(e){return function(e){return!QS(e)&&!!e.name}(e)?{scheme:e.name,...l3(e,["name"])}:{scheme:e}}function gse(e,t,n){if(t)return n4(t)?{signal:`${t.signal} ? 0 : ${gse(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(S4.incompatibleChannel("size",e))}const yse=.95;function vse(e,t,n){const r=Xte(e.width)?e.width.step:Zte(n,"width"),i=Xte(e.height)?e.height.step:Zte(n,"height");return t.x||t.y?new Jae((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function bse(e,t){Cse(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of S3(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=Ree(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=r7(h,t),y=i7(s,t);if(void 0!==d&&(g?y&&E4.warn(y):E4.warn(S4.scalePropertyNotWorkWithScaleType(h,t,s))),g&&void 0===y)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":j8(u[t])||"temporal"===n||e?l.set(t,{signal:qee(u[t],{type:n,timeUnit:e})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const n=t in xse?xse[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}(e,t):_se(e,t)}const xse={bins:({model:e,fieldOrDatumDef:t})=>hee(t)?function(e,t){const n=t.bin;if(G6(n)){const r=lae(e,t.field,n);return new Jae((()=>e.getSignalName(r)))}if(Y6(n)&&X6(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(h3([l5,c5,f5],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:r})=>function(e,t,n,r){if(zee(r)?.bin||eS(n)||h3([A9,C9],e))return;return t in h6||void 0}(e,t,n,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(e in h6){if(H9(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!hee(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===N9)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>function(e,t,n,r){if(void 0!==e)return;if(t in h6){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return I3(e,"bar"===n?t:i)}return}(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>function(e,t,n,r,i,o){if(void 0!==e)return;if(t in h6&&n===O9){const{bandPaddingOuter:e}=o;return I3(e,n4(i)?{signal:`${i.signal}/2`}:i/2)}return}(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return W9(e)&&"descending"===t?n4(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(W9(e)&&"descending"===t)return!0;return}(t,hee(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&W9(i)){if(eS(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!V9(i))return!0;if((!hee(t)||!t.bin)&&h3([...p6,...y6],e)){const{orient:t,type:n}=r;return!h3(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function wse(e){Cse(e)?function(e){const t=e.component.scales;for(const n of F6){const r=t[n];if(!r)continue;const i=pse(n,e);r.setWithExplicit("range",i)}}(e):_se(e,"range")}function _se(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?wse(n):bse(n,t);for(const r of S3(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=vre(i,e.getWithExplicit(t),t,"scale",gre(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}n[r].setWithExplicit(t,i)}}function kse(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":if($5(e)||"discrete"===R6(e))return"shape"===e&&"ordinal"===t.type&&E4.warn(S4.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in h6){if(h3(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&e in g6)return"band";return C7(n[K5(e)])||_ee(t)&&t.axis?.tickBand?"band":"point";case"temporal":return $5(e)?"time":"discrete"===R6(e)?(E4.warn(S4.discreteChannelCannotEncode(e,"temporal")),"ordinal"):hee(t)&&t.timeUnit&&n9(t.timeUnit).utc?"utc":"time";case"quantitative":return $5(e)?hee(t)&&G6(t.bin)?"bin-ordinal":"linear":"discrete"===R6(e)?(E4.warn(S4.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(S4.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return N6(t)?void 0!==o?function(e,t){if(!N6(e))return!1;switch(e){case J3:case K3:case r5:case t5:return H9(t)||h3(["band","point"],t);case h5:case v5:case m5:case g5:case y5:case p5:return H9(t)||V9(t)||h3(["band","point","ordinal"],t);case l5:case c5:case f5:return"band"!==t;case b5:case d5:return"ordinal"===t||V9(t)}}(t,o)?hee(n)&&(a=o,s=n.type,!(h3([y9,b9],s)?void 0===a||q9(a):s===v9?h3([A9,C9,void 0],a):s!==g9||h3([_9,k9,E9,S9,D9,M9,F9,w9,void 0],a)))?(E4.warn(S4.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(E4.warn(S4.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null;var a,s}function Ese(e){Cse(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e;return F6.reduce(((i,o)=>{const a=Ree(t[o]);if(a&&n===b7&&o===d5&&a.type===x9)return i;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const t=kse(s,o,a,r);i[o]=new cse(e.scaleName(`${o}`,!0),{value:t,explicit:s.type===t})}return i}),{})}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){Ese(n);for(const o of S3(n.component.scales))if((t=i.scale)[o]??(t[o]=Roe(o,e)),"shared"===i.scale[o]){const e=r[o],t=n.component.scales[o].getWithExplicit("type");e?T9(e.value,t.value)?r[o]=vre(e,t,"type","scale",Sse):(i.scale[o]="independent",delete r[o]):r[o]=t}}for(const t of S3(r)){const i=e.scaleName(t,!0),o=r[t];n[t]=new cse(i,o);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const Sse=gre(((e,t)=>R9(e)-R9(t)));class Ase{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Cse(e){return"unit"===e?.type}function Dse(e){return"facet"===e?.type}function Mse(e){return"concat"===e?.type}function Fse(e){return"layer"===e?.type}class Nse{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=Z6(a),this.name=e.name??r,this.title=t4(e.title)?{text:e.title}:e.title?Z6(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new Ase,this.projectionNameMap=n?n.projectionNameMap:new Ase,this.signalNameMap=n?n.signalNameMap:new Ase,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map((e=>Rne(e)?{filter:o3(e.filter,p9)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(iee(e)&&!nee(e.facet)||Vte(e))&&(i.columns=a),Gte(e)&&(i.columns=1);for(const t of Jte)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=YS(n)?n:{row:n.row??o,column:n.column??o}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:iee(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new hre,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?s3(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){Ese(e),Kae(e);for(const t of n7)bse(e,t);t||wse(e)}(this)}parseProjection(){aae(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Qoe(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view?.style??"cell"}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of S3(n)){const t=n[e];void 0!==t&&(r[e]=f4(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=f4(this.description)),"unit"!==this.type&&"layer"!==this.type)?E3(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of z5){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:o}=yoe(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=moe(r,o),s=Doe(e,a);void 0!==s&&(n[a]=s)}}return E3(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of z5)e[n].title&&t.push(xoe(this,n));for(const e of voe)t=t.concat(koe(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>noe(e,"grid",t))),...r.map((e=>noe(e,"grid",t))),...n.map((e=>noe(e,"main",t))),...r.map((e=>noe(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return tae(this)}assembleProjections(){return nae(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...e4(this.config.title).nonMark,...t,...e?{encode:{update:e}}:{}};if(n.text)return h3(["unit","layer"],this.type)?h3(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),E3(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Dse(this.parent)?use(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return M3((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Cre[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(Dse(this.parent)){const t=v6(Toe(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(q9(e)&&r4(r)){const e=n.get("name"),r=ase(sse(this,t));if(r){return{signal:$oe(e,n,Aee({aggregate:"distinct",field:r},{expr:"datum"}))}}return E4.warn(S4.unknownField(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):V5(e)&&N6(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(S4.selectionNotFound(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some?.((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some?.((e=>e.hasOrientSignalRef()))}}class Ose extends Nse{vgField(e,t={}){const n=this.fieldDef(e);if(n)return Aee(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?S3(e).reduce(((n,i)=>{const o=e[i];return eS(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=zee(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){ste(this.getMapping(),((t,n)=>{const r=zee(t);r&&e(r,n)}),t)}}class $se extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"]}clone(){return new $se(null,s3(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${f3(this.transform)}`}assemble(){const{density:e,...t}=this.transform;return{type:"kde",field:e,...t}}}class Tse extends Tre{constructor(e,t){super(e),this.filter=t}clone(){return new Tse(null,{...this.filter})}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==g4("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=N6(i)&&t.getScaleComponent(i);if(o){W9(o.get("type"))&&"count"!==n.aggregate&&!x7(r)&&(e[n.field]=n)}return e}),{});return S3(o).length?new Tse(e,o):null}dependentFields(){return new Set(S3(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${f3(this.filter)}`}assemble(){const e=S3(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=Aee(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class zse extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}clone(){return new zse(this.parent,s3(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${f3(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class Rse extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}clone(){return new Rse(null,s3(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${f3(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Pse extends Tre{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Pse(null,s3(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[a5,o5],[u5,s5]]){const i=r.map((e=>{const n=Ree(t.encoding[e]);return hee(n)?n.field:mee(n)?{expr:`${n.datum}`}:xee(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Pse(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(d5)){const r=t.typedFieldDef(d5);r.type===x9&&(e=new Pse(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){const e=(this.fields??[]).filter(QS);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${f3(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Lse extends Tre{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new Lse(null,this.projection,s3(this.fields),s3(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[a5,o5],[u5,s5]]){const r=n.map((e=>{const n=Ree(t.encoding[e]);return hee(n)?n.field:mee(n)?{expr:`${n.datum}`}:xee(n)?{expr:`${n.value}`}:void 0})),i=n[0]===u5?"2":"";(r[0]||r[1])&&(e=new Lse(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(QS))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${f3(this.fields)} ${f3(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Bse extends Tre{constructor(e,t){super(e),this.transform=t}clone(){return new Bse(null,s3(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new Bse(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(hee(r)&&hee(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:l,keyvals:c}=o.impute,f=ute(t.mark,n);return new Bse(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==u?{value:u}:{},...l?{frame:l}:{},...void 0!==c?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${f3(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:(u=n,void 0!==u?.stop?this.processSequence(n):n)}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};var u;if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Ise extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}clone(){return new Ise(null,s3(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${f3(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class jse extends Tre{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new jse(null,s3(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=tue(o.data,i);e||(e=new kae(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new zre(e,n,Cre.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(M3(e),e)}catch(t){throw new Error(S4.cannotLookupVariableParameter(e))}if(a=r.materialized,!a)throw new Error(S4.noSameUnitLookup(e))}return new jse(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?SS(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${f3({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:SS(this.transform.as)}:{}};else{let t=this.transform.as;QS(t)||(E4.warn(S4.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class Use extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}clone(){return new Use(null,s3(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${f3(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class qse extends Tre{constructor(e,t){super(e),this.transform=t,this.transform=s3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}clone(){return new qse(null,s3(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${f3(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class Wse extends Tre{constructor(e,t){super(e),this.transform=t}clone(){return new Wse(null,s3(this.transform))}addDimensions(e){this.transform.groupby=v3((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${f3(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Hse extends Tre{constructor(e,t){super(e),this.transform=t}clone(){return new Hse(null,s3(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${f3(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Vse(e){let t=0;return function n(r,i){if(r instanceof kae&&!r.isGenerator&&!xre(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof vae&&(r.parent instanceof kae&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof pae)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof wae||r instanceof _ae||r instanceof Tse||r instanceof Jie||r instanceof hoe||r instanceof Lse||r instanceof hae||r instanceof jse||r instanceof Wae||r instanceof Uae||r instanceof Rse||r instanceof zse||r instanceof $se||r instanceof Ise||r instanceof Use||r instanceof qse||r instanceof bae||r instanceof Hse||r instanceof Wse)&&i.transform.push(r.assemble()),(r instanceof fae||r instanceof Rre||r instanceof Bse||r instanceof qae||r instanceof Pse)&&i.transform.push(...r.assemble()),r instanceof zre)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof zre)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof zre&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Gse(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=goe("title",null,r,t);let u=Nee(a,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(u=eS(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=goe("labelOrient",a.header,r,t),c=null!==a.header&&I3(a.header?.labels,r.header.labels,!0),f=h3(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[Yse(e,t,c)]}}}function Yse(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Xse(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Poe(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of n.component.axes[t]){const t="top"===(r=i.get("orient"))||"left"===r||n4(r)?"header":"footer";a[t]??(a[t]=[Yse(e,o,!1)]);const n=noe(i,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),i.mainExtracted=!0}}}var r}function Qse(e){for(const t of e.children)t.parseLayoutSize()}function Jse(e,t){const n=Toe(t),r=v6(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const t of e.children){const o=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??Roe(r,e);if("independent"===s&&"step"===o.value){a=void 0;break}if(a){if("independent"===s&&a.value!==o.value){a=void 0;break}a=vre(a,o,n,"")}else a=o}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Kse(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(q9(e)){const e=ene(r.view,t);return r4(n)||Xte(e)?"step":e}return Kte(r.view,t)}if(e.hasProjection||"arc"===e.mark)return Kte(r.view,t);{const e=ene(r.view,t);return Xte(e)?e.step:e}}function Zse(e,t,n){return Aee(t,{suffix:`by_${Aee(e)}`,...n??{}})}class eue extends Ose{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=Aue(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!nee(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=S3(e),n={};for(const r of t){if(![Y3,X3].includes(r)){E4.warn(S4.incompatibleChannel(r,"facet"));break}const t=e[r];if(void 0===t.field){E4.warn(S4.emptyFieldDef(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=Bee(e,t);return n.header?n.header=Z6(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=nue(this),this.child.parseData()}parseLayoutSize(){Qse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of z5)Gse(e,t);Xse(e,"x"),Xse(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of z5)for(const n of boe){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=goe("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=moe(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof eue)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof eue?{...this.channelHasField("column")?{encode:{update:{columns:{field:Aee(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof eue){if(this.child.channelHasField("column")){const r=Aee(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of p6){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(q9(o)&&r4(a)){const i=ase(sse(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):E4.warn(S4.unknownField(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of z5){const t=this.facet[e];if(t){s.push(Aee(t));const{bin:u,sort:l}=t;if(G6(u)&&s.push(Aee(t,{binSuffix:"end"})),eee(l)){const{field:e,op:s=Q7}=l,u=Zse(t,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(e),o.push(s),a.push(u))}else if(eS(l)){const n=poe(t,e);i.push(n),o.push("max"),a.push(n)}}}const u=!!n&&!!r;return{name:e,data:t,groupby:s,...u||i.length>0?{aggregate:{...u?{cross:u}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?eee(n.sort)?[Zse(n,n.sort,{expr:"datum"})]:eS(n.sort)?[poe(n,e,{expr:"datum"})]:[Aee(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(eee(e)?e.order:!eS(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return Soe(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of voe)if(e[r]){const i=goe("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return Soe(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=Vse(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:z5.map((e=>this.facetSortFields(e))).flat(),order:z5.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(Nre(this,[]))}]}getMapping(){return this.facet}}function tue(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const o=e.format?.feature;if((o||i)&&o!==i)continue;const a=t.format?.mesh;if(!r&&!a||r===a)if(wre(e)&&wre(t)){if(a3(e.values,t.values))return n}else if(xre(e)&&xre(t)){if(e.url===t.url)return n}else if(_re(e)&&e.name===n.dataName)return n}return null}function nue(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new kae({values:[]});return t.push(e),e}const n=tue(e.data,t);if(n)return kre(e.data)||(n.data.format=g3({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new kae(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.parent?e.parent.component.data.ancestorParse.clone():new bre,o=e.data;kre(o)?(Ere(o)?t=new _ae(t,o.sequence):Are(o)&&(t=new wae(t,o.graticule)),i.parseNothing=!0):null===o?.format?.parse&&(i.parseNothing=!0),t=vae.makeExplicit(t,e,i)??t,t=new bae(t);const a=e.parent&&Fse(e.parent);(Cse(e)||Dse(e))&&a&&(t=fae.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(Gne(i))a=e=new hoe(e,i),o="derived";else if(Rne(i)){const r=gae(i);a=e=vae.makeWithAncestors(e,{},r,n)??e,e=new Jie(e,t,i.filter)}else if(Yne(i))a=e=fae.makeFromTransform(e,i,t),o="number";else if(Qne(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new vae(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Rre.makeFromTransform(e,i);else if(Jne(i))a=e=hae.makeFromTransform(e,i),o="number",Vie(t)&&(e=new bae(e));else if(Pne(i))a=e=jse.make(e,t,i,r++),o="derived";else if(Wne(i))a=e=new Wae(e,i),o="number";else if(Hne(i))a=e=new Uae(e,i),o="number";else if(Kne(i))a=e=qae.makeFromTransform(e,i),o="derived";else if(Zne(i))a=e=new Rse(e,i),o="derived";else if(Vne(i))a=e=new zse(e,i),o="derived";else if(Lne(i))a=e=new Wse(e,i),o="derived";else if(qne(i))e=new Hse(e,i);else if(Xne(i))a=e=Bse.makeFromTransform(e,i),o="derived";else if(Bne(i))a=e=new $se(e,i),o="derived";else if(Ine(i))a=e=new Use(e,i),o="derived";else if(jne(i))a=e=new qse(e,i),o="derived";else{if(!Une(i)){E4.warn(S4.invalidTransformIgnored(i));continue}a=e=new Ise(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(t,e,i));const s=function(e){const t={};if(Cse(e)&&e.component.selection)for(const n of S3(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&B3(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=yae(e);t=vae.makeWithAncestors(t,{},{...s,...u},i)??t,Cse(e)&&(t=Pse.parseAll(t,e),t=Lse.parseAll(t,e)),(Cse(e)||Dse(e))&&(a||(t=fae.makeFromEncoding(t,e)??t),t=Rre.makeFromEncoding(t,e)??t,t=hoe.parseAllForSortIndex(t,e));const l=e.getDataName(Cre.Raw),c=new zre(t,l,Cre.Raw,r);if(n[l]=c,t=c,Cse(e)){const n=hae.makeFromEncoding(t,e);n&&(t=n,Vie(e)&&(t=new bae(t))),t=Bse.makeFromEncoding(t,e)??t,t=qae.makeFromEncoding(t,e)??t}Cse(e)&&(t=Tse.make(t,e)??t);const f=e.getDataName(Cre.Main),d=new zre(t,f,Cre.Main,r);n[f]=d,t=d,Cse(e)&&function(e,t){for(const[n,r]of C3(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new zre(new Jie(t,e,{param:n}),i,Cre.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let h=null;if(Dse(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(eee(i.sort)){const{field:n,op:r=Q7}=i.sort;e=t=new Uae(e,{joinaggregate:[{op:r,field:n,as:Zse(i,i.sort,{forAs:!0})}],groupby:[Aee(i)]})}return t}return null}(t,e.facet)??t,h=new pae(t,e,r,d.getSource()),n[r]=h}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:h,ancestorParse:i}}class rue extends Nse{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||E4.warn(S4.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map(((e,t)=>Aue(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=nue(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of S3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Gte(e)?e.vconcat:Yte(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){Qse(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Jse(e,t),Jse(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=Foe(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const iue={disable:1,gridScale:1,scale:1,...Qee,labelExpr:1,encode:1},oue=S3(iue);class aue extends hre{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new aue(s3(this.explicit),s3(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return n4(this.explicit.orient)}}const sue={bottom:"top",top:"bottom",left:"right",right:"left"};function uue(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=lue(n,i)}}}return e}function lue(e,t){for(const n of oue){const r=vre(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return k4(e,t);case"gridScale":return{explicit:e.explicit,value:I3(e.value,t.value)}}return yre(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function cue(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(n4(n.labelAngle)?n.labelAngle:V3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===doe(r,i))return!0}return e===n[t]}const fue=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function due(e,t){let n=t.axis(e);const r=new aue,i=Ree(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a["x"===e?"axisX":"axisY"]?.orient||a.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),u=t.getScaleComponent(e).get("type"),l=ooe(e,u,s,t.config),c=void 0!==n?!n:soe("disable",a.style,n?.style,l).configValue;if(r.set("disable",c,void 0!==n),c)return r;n=n||{};const f=function(e,t,n,r,i){const o=t?.labelAngle;if(void 0!==o)return n4(o)?o:V3(o);{const{configValue:o}=soe("labelAngle",r,t?.style,i);return void 0!==o?V3(o):n!==J3||!h3([b9,y9],e.type)||hee(e)&&e.timeUnit?void 0:270}}(i,n,e,a.style,l),d={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,mark:o,config:a};for(const i of oue){const o=i in uoe?uoe[i](d):Kee(i)?n[i]:void 0,s=void 0!==o,u=cue(o,i,n,t,e);if(s&&u)r.set(i,o,u);else{const{configValue:e,configFrom:t}=Kee(i)&&"values"!==i?soe(i,a.style,n.style,l):{},c=void 0!==e;s&&!c?r.set(i,o,u):("vgAxisConfig"!==t||fue.has(i)&&c||Gee(e)||n4(e))&&r.set(i,e,!1)}}const h=n.encoding??{},p=Yee.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const o=zoe(h[i]??{},t),a="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,o=Ree(r[t])??Ree(r[J5(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;return B7(u)?{text:q7({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n}:n}(t,e,o):o;return void 0===a||E3(a)||(n[i]={update:a}),n}),{});return E3(p)||r.set("encode",p,!!n.encoding||void 0!==n.labelAngle),r}function hue(e,t,n){const r=Z6(e),i=g4("orient",r,n);if(r.orient=function(e,t,n){switch(e){case f7:case y7:case v7:case p7:case d7:case l7:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case u7:if(hee(r)&&(Y6(r.bin)||hee(i)&&i.aggregate&&!r.aggregate))return"vertical";if(hee(i)&&(Y6(i.bin)||hee(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(hee(r)&&r.type===g9&&!G6(r.bin)||yee(r)))return"horizontal";if(!a&&(hee(i)&&i.type===g9&&!G6(i.bin)||yee(i)))return"vertical"}case h7:if(o&&(!hee(r)||!Y6(r.bin))&&a&&(!hee(i)||!Y6(i.bin)))return;case s7:if(a)return hee(i)&&Y6(i.bin)?"horizontal":"vertical";if(o)return hee(r)&&Y6(r.bin)?"vertical":"horizontal";if(e===h7){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case c7:case m7:{const t=gee(r),o=gee(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===v9,a=n.type===v9;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&E4.warn(S4.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const e=g4("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:D7[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===g4("opacity",r,n)&&(r.opacity=function(e,t){if(h3([f7,m7,y7,v7],e)&&!rte(t))return.7;return}(r.type,t));return void 0===g4("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||g4("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function pue(e,t){const{config:n}=e;return{...xie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sie("x",e,{defaultPos:"mid"}),...sie("y",e,{defaultPos:"mid"}),...rie("size",e),...rie("angle",e),...mue(e,n,t)}}function mue(e,t,n){return n?{shape:{value:n}}:rie("shape",e)}function gue(e,t,n){if(void 0===g4("align",e,n))return"center"}function yue(e,t,n){if(void 0===g4("baseline",e,n))return"middle"}function vue(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),a=g4("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==a)return a;{const e=o?o.get("range"):void 0;if(e&&r4(e)&&YS(e.step))return 3*e.step/4;return 3*Zte(t.view,i)/4}}const bue={arc:{vgMark:"arc",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sie("x",e,{defaultPos:"mid"}),...sie("y",e,{defaultPos:"mid"}),...mie(e,"radius","arc"),...mie(e,"theta","arc")})},area:{vgMark:"area",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...die("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...die("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...kie(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...mie(e,"x","bar"),...mie(e,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:e=>pue(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&hee(n)&&n.type===x9?{field:Aee(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...mie(e,"x","image"),...mie(e,"y","image"),...Xre(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...sie("x",e,{defaultPos:"mid"}),...sie("y",e,{defaultPos:"mid"}),...rie("size",e,{vgChannel:"strokeWidth"}),...kie(e)})},point:{vgMark:"symbol",encodeEntry:e=>pue(e)},rect:{vgMark:"rect",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...mie(e,"x","rect"),...mie(e,"y","rect")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...xie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...die("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...die("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...rie("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>pue(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...xie(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...sie("x",e,{defaultPos:"mid"}),...sie("y",e,{defaultPos:"mid"}),...Xre(e),...rie("size",e,{vgChannel:"fontSize"}),...rie("angle",e),...Eie("align",gue(e.markDef,n,t)),...Eie("baseline",yue(e.markDef,n,t)),...sie("radius",e,{defaultPos:null}),...sie("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return{...xie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sie("x",e,{defaultPos:"mid",vgChannel:"xc"}),...sie("y",e,{defaultPos:"mid",vgChannel:"yc"}),...rie("size",e,{defaultValue:vue(e),vgChannel:i}),[o]:f4(g4("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...xie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...sie("x",e,{defaultPos:"mid"}),...sie("y",e,{defaultPos:"mid"}),...rie("size",e),...kie(e)})}};function xue(e){if(h3([c7,s7,g7],e.mark)){const t=ute(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:wue+e.requestDataName(Cre.Main),data:e.requestDataName(Cre.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:kue(e,{fromPrefix:wue})}]}(e,t)}else if(e.mark===u7){const t=s4.some((t=>g4(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=kue(e,{fromPrefix:_ue}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let o,a;"x"===e.stack.fieldChannel?(o={...u3(t.encode.update,["y","yc","y2","height",...s4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...l3(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...u3(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...l3(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of s4){const r=y4(n,e.markDef,e.config);t.encode.update[n]?(o[n]=t.encode.update[n],delete t.encode.update[n]):r&&(o[n]=f4(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannel){const t=e.fieldDef(e.stack.groupbyChannel),n=Aee(t);n&&s.push(n),(t?.bin||t?.timeUnit)&&s.push(Aee(t,{binSuffix:"end"}))}o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=y4(r,e.markDef,e.config);return void 0!==t?{...n,[r]:f4(t)}:n}}),o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(Cre.Main),name:_ue+e.requestDataName(Cre.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}(e)}return kue(e)}const wue="faceted_path_";const _ue="stack_group_";function kue(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=I3(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=m4(r),u=i.key,l=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!eS(a)&&xee(a)&&d3(a.value)||!a&&d3(g4("order",i,o)))){if((eS(a)||hee(a))&&!n)return x4(a,{expr:"datum"});if(x7(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(hee(r)){const t=r.sort;return eS(t)?{field:Aee(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:eee(t)?{field:Aee({aggregate:rte(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:Z7(t)?{field:Aee(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:Aee(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}(e),c=function(e){if(!e.component.selection)return null;const t=S3(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=S3(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),f=g4("aria",r,o),d=bue[n].postEncodingTransform?bue[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:bue[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Cre.Main)},encode:{update:bue[n].encodeEntry(e)},...d?{transform:d}:{}}]}class Eue extends Ose{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,Qte(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=k7(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=y4("filled",e,t),i=e.type;return I3(r,i!==f7&&i!==c7&&i!==h7)}(o,i,{graticule:e.data&&Are(e.data)}));const s=this.encoding=ote(e.encoding||{},a,o.filled,i);this.markDef=hue(o,s,i),this.size=function({encoding:e,size:t}){for(const n of p6){const r=K5(n);Xte(t[r])&&gee(e[n])&&(delete t[r],E4.warn(S4.stepDropped(r)))}return t}({encoding:s,size:Qte(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=xne(a,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>Wte(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===b7,n=e&&N5.some((t=>vee(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return F6.reduce(((e,n)=>{const r=Ree(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=Z6(e);return eS(t)&&(r.domain=t.map(l4)),eS(n)&&(r.range=n.map(l4)),r}initAxes(e){return p6.reduce(((t,n)=>{const r=e[n];if(vee(r)||n===J3&&vee(e.x2)||n===K3&&vee(e.y2)){const e=vee(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=S3(e),n={};for(const r of t){const t=e[r];n[r]=Gee(t)?u4(t):l4(t)}return n}initLegends(e){return D6.reduce(((t,n)=>{const r=Ree(e[n]);if(r&&function(e){switch(e){case l5:case c5:case f5:case h5:case d5:case m5:case v5:case b5:return!0;case g5:case y5:case p5:return!1}}(n)){const e=r.legend;t[n]=e?Z6(e):e}return t}),{})}parseData(){this.component.data=nue(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of p6){const i=K5(r);if(t[i]){const e=t[i];n.layoutSize.set(i,Xte(e)?"step":e,!0)}else{const t=Kse(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=M3(i.name),o=i.select,a=QS(o)?o:o.type,s=tS(o)?s3(o):{type:a},{fields:u,encodings:l,...c}=r[a];for(const e in c)"mark"===e&&(s[e]={...c[e],...s[e]}),void 0!==s[e]&&!0!==s[e]||(s[e]=c[e]??s[e]);const f=n[t]={...s,name:t,type:a,init:i.value,bind:i.bind,events:QS(s.on)?YK(s.on,"scope"):SS(s3(s.on))};for(const t of Wie)t.defined(f)&&t.parse&&t.parse(e,f,i)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=xue(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,p6.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[due(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of A3(e.component.selection??{})){const i=r.name,o=iA(i+Iie);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${qie}(${o}, ${iA(e)}${n}`})}n=!0;for(const n of Wie)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return $re(t)}(this,e)}assembleSignals(){return[...roe(this),...Fre(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t];for(const t of A3(e.component.selection??{})){const r={name:t.name+Iie};if(t.init){const n=t.project.items.map((e=>{const{signals:t,...n}=e;return n}));r.values=t.init.map((t=>({unit:Hie(e,{escape:!1}),fields:n,values:Mre(t,!1)})))}n.filter((e=>e.name===t.name+Iie)).length||n.push(r)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return Foe(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&Fse(this.parent)||(e=Ore(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return nte(this.encoding,e)}fieldDef(e){return zee(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return bee(t)?t:null}}class Sue extends Nse{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(pne(e))return new Sue(e,this,this.getName(`layer_${t}`),o,i);if(ete(e))return new Eue(e,this,this.getName(`layer_${t}`),o,i);throw new Error(S4.invalidSpec(e))}))}parseData(){this.component.data=nue(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;Qse(e=this),Jse(e,"width"),Jse(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of S3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of S3(r.component.axes))n.axis[i]=Poe(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=uue(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of p6){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!n4(t)){if(r[t]>0&&!n){const n=sue[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const e of t[i])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),roe(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),Foe(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)Cse(n)&&(t=Ore(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),tae(this))}}function Aue(e,t,n,r,i){if(iee(e))return new eue(e,t,n,i);if(pne(e))return new Sue(e,t,n,r,i);if(ete(e))return new Eue(e,t,n,r,i);if(function(e){return Gte(e)||Yte(e)||Vte(e)}(e))return new rue(e,t,n,i);throw new Error(S4.invalidSpec(e))}function Cue(e,t={}){t.logger&&E4.set(t.logger),t.fieldTitle&&Fee(t.fieldTitle);try{const n=une(rS(t.config,e.config)),r=are(e,n),i=Aue(r,null,"",void 0,n);i.parse(),function(e,t){Yae(e.sources);let n=0,r=0;for(let r=0;r<5&&Qae(e,t,!0);r++)n++;e.sources.map(Hae);for(let n=0;n<5&&Qae(e,t,!1);n++)r++;Yae(e.sources),5===Math.max(n,r)&&E4.warn("Maximum optimization runs(5) reached.")}(i.component.data,i);return{spec:function(e,t,n={},r){const i=e.config?dne(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=Vse(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let o=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(o++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Hte(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):QS(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)E4.warn(S4.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";E4.warn(S4.droppingFit(v6(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${v6(e)}`:"fit"}(n)}var a;return{...1===S3(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...dre(n,!1),...dre(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&E4.reset(),t.fieldTitle&&Fee(Dee)}}n(V2,Y2);const Due=G2.version;t(V2,"version",(function(){return Due})),t(V2,"compile",(function(){return Cue})),t(V2,"normalize",(function(){return are}));var Mue=function(e){const[t,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}},Fue={};const Nue="#fff",Oue={background:"#333",title:{color:Nue,subtitleColor:Nue},style:{"guide-label":{fill:Nue},"guide-title":{fill:Nue}},axis:{domainColor:Nue,gridColor:"#888",tickColor:Nue}},$ue="#4572a7",Tue={background:"#fff",arc:{fill:$ue},area:{fill:$ue},line:{stroke:$ue,strokeWidth:2},path:{stroke:$ue},rect:{fill:$ue},shape:{stroke:$ue},symbol:{fill:$ue,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},zue="#30a2da",Rue="#cbcbcb",Pue="#f0f0f0",Lue="#333",Bue={arc:{fill:zue},area:{fill:zue},axis:{domainColor:Rue,grid:!0,gridColor:Rue,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:Rue,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Pue,group:{fill:Pue},legend:{labelColor:Lue,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Lue,titleFontSize:14,titlePadding:10},line:{stroke:zue,strokeWidth:2},path:{stroke:zue,strokeWidth:.5},rect:{fill:zue},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:zue},bar:{binSpacing:2,fill:zue,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Iue="#000",jue={group:{fill:"#e5e5e5"},arc:{fill:Iue},area:{fill:Iue},line:{stroke:Iue},path:{stroke:Iue},rect:{fill:Iue},shape:{stroke:Iue},symbol:{fill:Iue,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Uue="Benton Gothic, sans-serif",que="#82c6df",Wue="Benton Gothic Bold, sans-serif",Hue="normal",Vue={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Gue={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Wue,fontSize:22,fontWeight:"normal"},arc:{fill:que},area:{fill:que},line:{stroke:que,strokeWidth:2},path:{stroke:que},rect:{fill:que},shape:{stroke:que},symbol:{fill:que,size:30},axis:{labelFont:Uue,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Wue,titleFontSize:13,titleFontWeight:Hue},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:Uue,labelFontSize:11.5,symbolType:"square",titleFont:Wue,titleFontSize:13,titleFontWeight:Hue},range:{category:Vue["category-6"],diverging:Vue["fireandice-6"],heatmap:Vue["fire-7"],ordinal:Vue["fire-7"],ramp:Vue["fire-7"]}},Yue="#ab5787",Xue="#979797",Que={background:"#f9f9f9",arc:{fill:Yue},area:{fill:Yue},line:{stroke:Yue},path:{stroke:Yue},rect:{fill:Yue},shape:{stroke:Yue},symbol:{fill:Yue,size:30},axis:{domainColor:Xue,domainWidth:.5,gridWidth:.2,labelColor:Xue,tickColor:Xue,tickWidth:.2,titleColor:Xue},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Jue="#3e5c69",Kue={background:"#fff",arc:{fill:Jue},area:{fill:Jue},line:{stroke:Jue},path:{stroke:Jue},rect:{fill:Jue},shape:{stroke:Jue},symbol:{fill:Jue},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Zue="#1696d2",ele="#000000",tle="Lato",nle="Lato",rle={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},ile={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:tle},axisX:{domain:!0,domainColor:ele,domainWidth:1,grid:!1,labelFontSize:12,labelFont:nle,labelAngle:0,tickColor:ele,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:tle},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:nle,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:tle,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:nle,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:tle,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:rle["six-groups-cat-1"],diverging:rle["diverging-colors"],heatmap:rle["diverging-colors"],ordinal:rle["six-groups-seq"],ramp:rle["shades-blue"]},area:{fill:Zue},rect:{fill:Zue},line:{color:Zue,stroke:Zue,strokeWidth:5},trail:{color:Zue,stroke:Zue,strokeWidth:0,size:1},path:{stroke:Zue,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Zue,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Zue,stroke:null}},arc:{fill:Zue},shape:{stroke:Zue},symbol:{fill:Zue,size:30}},ole="#3366CC",ale="#ccc",sle="Arial, sans-serif",ule={arc:{fill:ole},area:{fill:ole},path:{stroke:ole},rect:{fill:ole},shape:{stroke:ole},symbol:{stroke:ole},circle:{fill:ole},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:sle,fontSize:12},"guide-title":{font:sle,fontSize:12},"group-title":{font:sle,fontSize:12}},title:{font:sle,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:ale,tickColor:ale,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},lle="2.10.0";t(Fue,"vox",(function(){return Kue})),t(Fue,"version",(function(){return lle})),t(Fue,"urbaninstitute",(function(){return ile})),t(Fue,"quartz",(function(){return Que})),t(Fue,"latimes",(function(){return Gue})),t(Fue,"googlecharts",(function(){return ule})),t(Fue,"ggplot2",(function(){return jue})),t(Fue,"fivethirtyeight",(function(){return Bue})),t(Fue,"excel",(function(){return Tue})),t(Fue,"dark",(function(){return Oue}));var cle="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const fle="vg-tooltip-element",dle={offsetX:10,offsetY:10,id:fle,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function hle(e,t,n){if(eS(e))return`[${e.map((e=>t(QS(e)?e:ple(e,n)))).join(", ")}]`;if(tS(e)){let r="";const i=e,{title:o,image:a}=i,s=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const e of u){let i=s[e];void 0!==i&&(tS(i)&&(i=ple(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function ple(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class mle{constructor(e){this.options=Object.assign(Object.assign({},dle),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return cle.toString().replace(fle,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));if((null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=hle(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function gle(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var yle,vle='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function ble(e,...t){for(const n of t)xle(e,n);return e}function xle(e,t){for(const n of Object.keys(t))iS(e,n,t[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const wle=zE;let _le=V2;const kle="undefined"!=typeof window?window:void 0;void 0===_le&&(null===(yle=null==kle?void 0:kle.vl)||void 0===yle?void 0:yle.compile)&&(_le=kle.vl);const Ele={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Sle={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ale={vega:"Vega","vega-lite":"Vega-Lite"},Cle={vega:wle.version,"vega-lite":_le?_le.version:"not available"},Dle={vega:e=>e,"vega-lite":(e,t)=>_le.compile(e,{config:t}).spec},Mle='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Fle="chart-wrapper";function Nle(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Ale[r]} JSON Source`}function Ole(e){return(t=e)&&"load"in t?e:wle.loader(e);var t}function $le(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function Tle(e,t,n={}){var r,i,o;return gle(this,void 0,void 0,(function*(){let a,s;QS(t)?(s=Ole(n.loader),a=JSON.parse(yield s.load(t))):a=t;const u=$le(a).loader;s&&!u||(s=Ole(null!==(r=n.loader)&&void 0!==r?r:u));const l=yield zle($le(a),s),c=yield zle(n,s),f=Object.assign(Object.assign({},ble(c,l)),{config:rS(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=l.config)&&void 0!==o?o:{})});return yield function(e,t,n={},r){var i,o,a,s,u,l;return gle(this,void 0,void 0,(function*(){const c=n.theme?rS(Fue[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,f=HS(n.actions)?n.actions:ble({},Ele,null!==(o=n.actions)&&void 0!==o?o:{}),d=Object.assign(Object.assign({},Sle),n.i18n),h=null!==(a=n.renderer)&&void 0!==a?a:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:wle.Warn,m=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization",g="string"==typeof e?document.querySelector(e):e;if(!g)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?vle.toString():n.defaultStyle,r.appendChild(t)}}const y=function(e,t){var n;if(e.$schema){const r=Mue(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${Ale[r.library]}, but mode argument sets ${null!==(n=Ale[t])&&void 0!==n?n:t}.`);const i=r.library;return cw.satisfies(Cle[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Ale[i]} ${r.version}, but the current version of ${Ale[i]} is v${Cle[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let v=Dle[y](t,c);if("vega-lite"===y&&v.$schema){const e=Mue(v.$schema);cw.satisfies(Cle.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${Cle.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions"),g.innerHTML="";let b=g;if(f){const e=document.createElement("div");e.classList.add(Fle),g.appendChild(e),b=e}const x=n.patch;x&&(v=x instanceof Function?x(v):tw(v,x,!0,!1).newDocument),n.formatLocale&&wle.formatLocale(n.formatLocale),n.timeFormatLocale&&wle.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,_=wle.parse(v,"vega-lite"===y?{}:c,{ast:w}),k=new(n.viewClass||wle.View)(_,Object.assign({loader:r,logLevel:p,renderer:h},w?{expr:wle.expressionInterpreter}:{}));if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new mle(!0===n.tooltip?{}:n.tooltip).call,k.tooltip(e)}let E,{hover:S}=n;if(void 0===S&&(S="vega"===y),S){const{hoverSet:e,updateSet:t}="boolean"==typeof S?{}:S;k.hover(e,t)}if(n&&(null!=n.width&&k.width(n.width),null!=n.height&&k.height(n.height),null!=n.padding&&k.padding(n.padding)),yield k.initialize(b,n.bind).runAsync(),!1!==f){let e=g;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=d.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const n=document.createElement("summary");n.innerHTML=Mle,t.append(n),E=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",E)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return gle(this,void 0,void 0,(function*(){t.preventDefault();const r=yield k.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===f||!1!==f.source){const e=document.createElement("a");e.text=d.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){var r,i;Nle(lw(t),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),e.preventDefault()})),r.append(e)}if("vega-lite"===y&&(!0===f||!1!==f.compiled)){const e=document.createElement("a");e.text=d.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,r;Nle(lw(v),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()})),r.append(e)}if(!0===f||!1!==f.editor){const e=null!==(l=n.editorUrl)&&void 0!==l?l:"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){!function(e,t,n){const r=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:c,mode:y,renderer:h,spec:lw(t)}),n.preventDefault()})),r.append(i)}}function A(){E&&document.removeEventListener("click",E),k.finalize()}return{view:k,spec:t,vgSpec:v,finalize:A}}))}(e,a,f,s)}))}function zle(e,t){var n;return gle(this,void 0,void 0,(function*(){const r=QS(e.config)?JSON.parse(yield t.load(e.config)):null!==(n=e.config)&&void 0!==n?n:{},i=QS(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})}))}class Rle extends xe().Component{componentDidMount(){this.drawChart(this.props.data,this.props.id)}drawChart(e,t){Tle("#"+t,e).then((e=>console.log(e))).catch(console.warn)}render(){return ve.createElement("div",{id:this.props.id})}}var Ple=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"A vertical box plot showing median, min, and max body mass of penguins.","data":{"url":"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv"},"mark":{"type":"boxplot","extent":"min-max"},"encoding":{"x":{"field":"playlist_genre","type":"nominal"},"color":{"field":"playlist_genre","type":"nominal","legend":null},"y":{"field":"track_popularity","type":"quantitative","scale":{"zero":false}}}}')),Lle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}')),Ble=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),Ile=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/info474-a2/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),jle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}'));const Ule=()=>{const[e,t]=md("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv");return ve.createElement("div",{className:"App"},ve.createElement("div",{className:"container"},ve.createElement("div",{className:"flex-child"},ve.createElement("h1",null,"Exploratory Data Analysis"),ve.createElement("p",null,"Assignment 2, INFO 474 Spring 2021"),ve.createElement("p",null,t&&"loading data!")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre Over Time (1957-2020)"),ve.createElement(Rle,{data:Ile,id:"vis7"}),ve.createElement("p",null,"The spotify_songs dataset spans across many decades, starting in 1957 and ending in 2020. The first few decades, until around 2000, are relatively uneventful for most of the genres, with the exception of rock. Around 2010, more and more songs were released, with EDM spiking the highest. It’s important to note that the steep drop at 2020 is due to the fact that very little information for that year was available at the time of this dataset’s release.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre Over Time (2010-2020)"),ve.createElement(Rle,{data:jle,id:"vis8"}),ve.createElement("p",null,"Because so much of the growth of music occurred in the most recent decade, it warranted a closer look. Here, it’s clear to see that EDM, latin, and rap music lead in terms of growth, with hundreds of song releases over the lowest genre, rock, in 2019.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre"),ve.createElement(Tx,null),ve.createElement("p",null,"EDM is the leader in number of songs released, with rap coming in second. It’s interesting to note that although latin had the second highest peak in 2019, it has one of the lowest song counts, which means that it hasn’t been as consistent across the years as pop or r&b music.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Subgenre"),ve.createElement(zx,null),ve.createElement("p",null,"Splitting up by subgenre can give us deeper insight into each genre; however, the way that the data is currently encoded makes it difficult to understand how the data is categorized.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Subgenre"),ve.createElement(Rx,null),ve.createElement("p",null,"By categorizing each subgenre by color, it’s easier to see the distinction between each separate subgenre and how they contribute to the total number of songs released in the genre as a whole. For example, because the latin genre has a relatively low total song count, it can be surprising to see latin hip hop with one of the highest number of songs released among the other subgenres, though this can be explained by the low song count of reggaeton.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity Distribution per Genre"),ve.createElement(Rle,{data:Ple,id:"vis1"}),ve.createElement("p",null,"This is a more indepth look into the different genres and how they differ in regards to the distribution of track popularity. By following the median, min, and max for each genre, we can analyze trends and compare and contrast the genres together.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity per Genre Over Time (1957-2020)"),ve.createElement(Rle,{data:Ble,id:"vis6"}),ve.createElement("p",null,"Throughout this visualization, the popularity for many of the genres spikes and dips quite violently, especially before the year 2000. It’s also interesting to note that some of the genres start later than 1957, which means that some of the popularity data is missing from the dataset.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity per Genre Over Time (2010-2020)"),ve.createElement(Rle,{data:Lle,id:"vis5"}),ve.createElement("p",null,"Because some of the data is incomplete, and because the wider view of this visualization is very chaotic, narrowing down the timeframe to focus on the 2010’s will give us a better view of the more recent popularity trends for each genre. Here, we can see that all of the genres but rock are beginning to trend higher."))))};Zf.render(ve.createElement(Ule,null),document.querySelector("#root"))}();
//# sourceMappingURL=index.6964b99f.js.map
