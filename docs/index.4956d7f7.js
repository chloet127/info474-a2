!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}function n(e,t){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var r,i,o,a,s=!1;function u(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function l(){r={},i=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,s=u(e),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))o.call(n,c)&&(s[c]=n[c]);if(i){r=i(n);for(var f=0;f<r.length;f++)a.call(n,r[f])&&(s[r[f]]=n[r[f]])}}return s}}function c(){return s||(s=!0,l()),r}var f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M,F,N,O,$,T,z,R,P,L,B,I,j,U,q,W,H,V,G,Y,X,Q,J,K,Z,ee,te,ne,re,ie=!1;function oe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ae(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function se(){}function ue(e,t,n){this.props=e,this.context=t,this.refs=C,this.updater=n||A}function le(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)F.call(t,r)&&!N.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:h,type:e,key:o,ref:a,props:i,_owner:M.current}}function ce(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}function fe(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function de(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case h:case p:a=!0}}if(a)return i=i(a=e),e=""===r?"."+fe(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),de(i,t,n,"",(function(e){return e}))):null!=i&&(ce(i)&&(i=function(e,t){return{$$typeof:h,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+fe(o=e[s],s);a+=de(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=de(o=o.value,t,n,u=r+fe(o,s++),i);else if("object"===o)throw t=""+e,Error(oe(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function he(e,t,n){if(null==e)return e;var r=[],i=0;return de(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function pe(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}function me(){var e=$.current;if(null===e)throw Error(oe(321));return e}function ge(){return ie||(ie=!0,f={},d=c(),h=60103,p=60106,m=60107,f.Fragment=m,g=60108,f.StrictMode=g,y=60114,f.Profiler=y,v=60109,b=60110,x=60112,w=60113,f.Suspense=w,_=60115,k=60116,"function"==typeof Symbol&&Symbol.for&&(E=Symbol.for,h=E("react.element"),p=E("react.portal"),m=E("react.fragment"),f.Fragment=m,g=E("react.strict_mode"),f.StrictMode=g,y=E("react.profiler"),f.Profiler=y,v=E("react.provider"),b=E("react.context"),x=E("react.forward_ref"),w=E("react.suspense"),f.Suspense=w,_=E("react.memo"),k=E("react.lazy")),S="function"==typeof Symbol&&Symbol.iterator,A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C={},ae.prototype.isReactComponent={},ae.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(oe(85));this.updater.enqueueSetState(this,e,t,"setState")},ae.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},se.prototype=ae.prototype,(D=ue.prototype=new se).constructor=ue,d(D,ae.prototype),D.isPureReactComponent=!0,M={current:null},F=Object.prototype.hasOwnProperty,N={key:!0,ref:!0,__self:!0,__source:!0},O=/\/+/g,T={ReactCurrentDispatcher:$={current:null},ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:d},z={map:he,forEach:function(e,t,n){he(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return he(e,(function(){t++})),t},toArray:function(e){return he(e,(function(e){return e}))||[]},only:function(e){if(!ce(e))throw Error(oe(143));return e}},f.Children=z,R=ae,f.Component=R,P=ue,f.PureComponent=P,L=T,f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,B=function(e,t,n){if(null==e)throw Error(oe(267,e));var r=d({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=M.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)F.call(t,u)&&!N.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:h,type:e.type,key:i,ref:o,props:r,_owner:a}},f.cloneElement=B,I=function(e,t){return void 0===t&&(t=null),(e={$$typeof:b,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:v,_context:e},e.Consumer=e},f.createContext=I,j=le,f.createElement=j,U=function(e){var t=le.bind(null,e);return t.type=e,t},f.createFactory=U,q=function(){return{current:null}},f.createRef=q,W=function(e){return{$$typeof:x,render:e}},f.forwardRef=W,H=ce,f.isValidElement=H,V=function(e){return{$$typeof:k,_payload:{_status:-1,_result:e},_init:pe}},f.lazy=V,G=function(e,t){return{$$typeof:_,type:e,compare:void 0===t?null:t}},f.memo=G,Y=function(e,t){return me().useCallback(e,t)},f.useCallback=Y,X=function(e,t){return me().useContext(e,t)},f.useContext=X,Q=function(){},f.useDebugValue=Q,J=function(e,t){return me().useEffect(e,t)},f.useEffect=J,K=function(e,t,n){return me().useImperativeHandle(e,t,n)},f.useImperativeHandle=K,Z=function(e,t){return me().useLayoutEffect(e,t)},f.useLayoutEffect=Z,ee=function(e,t){return me().useMemo(e,t)},f.useMemo=ee,te=function(e,t,n){return me().useReducer(e,t,n)},f.useReducer=te,ne=function(e){return me().useRef(e)},f.useRef=ne,re=function(e){return me().useState(e)},f.useState=re,"17.0.2",f.version="17.0.2"),f}var ye,ve,be=!1;function xe(){return be||(be=!0,ye={},ye=ge(),ve=e(ye)),ye}xe();var we,_e,ke,Ee,Se,Ae,Ce,De,Me,Fe,Ne,Oe,$e,Te,ze,Re,Pe,Le,Be,Ie,je,Ue,qe,We,He,Ve,Ge,Ye,Xe,Qe,Je,Ke,Ze,et,tt,nt,rt,it,ot,at,st,ut,lt,ct=!1;function ft(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<pt(i,t)))break e;e[r]=t,e[n]=i,n=r}}function dt(e){return void 0===(e=e[0])?null:e}function ht(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>pt(a,n))void 0!==u&&0>pt(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>pt(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function pt(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function mt(e){for(var t=dt(Ve);null!==t;){if(null===t.callback)ht(Ve);else{if(!(t.startTime<=e))break;ht(Ve),t.sortIndex=t.expirationTime,ft(He,t)}t=dt(Ve)}}function gt(e){if(Ke=!1,mt(e),!Je)if(null!==dt(He))Je=!0,Se(yt);else{var t=dt(Ve);null!==t&&Ae(gt,t.startTime-e)}}function yt(e,t){Je=!1,Ke&&(Ke=!1,Ce()),Qe=!0;var n=Xe;try{for(mt(t),Ye=dt(He);null!==Ye&&(!(Ye.expirationTime>t)||e&&!_e());){var r=Ye.callback;if("function"==typeof r){Ye.callback=null,Xe=Ye.priorityLevel;var i=r(Ye.expirationTime<=t);t=we(),"function"==typeof i?Ye.callback=i:Ye===dt(He)&&ht(He),mt(t)}else ht(He);Ye=dt(He)}if(null!==Ye)var o=!0;else{var a=dt(Ve);null!==a&&Ae(gt,a.startTime-t),o=!1}return o}finally{Ye=null,Xe=n,Qe=!1}}function vt(){return ct||(ct=!0,Ee={},"object"==typeof performance&&"function"==typeof performance.now?(Me=performance,we=function(){return Me.now()},Ee.unstable_now=we):(Fe=Date,Ne=Fe.now(),we=function(){return Fe.now()-Ne},Ee.unstable_now=we),"undefined"==typeof window||"function"!=typeof MessageChannel?(Oe=null,$e=null,Te=function(){if(null!==Oe)try{var e=we();Oe(!0,e),Oe=null}catch(e){throw setTimeout(Te,0),e}},Se=function(e){null!==Oe?setTimeout(Se,0,e):(Oe=e,setTimeout(Te,0))},Ae=function(e,t){$e=setTimeout(e,t)},Ce=function(){clearTimeout($e)},_e=function(){return!1},Ee.unstable_shouldYield=_e,ke=function(){},De=Ee.unstable_forceFrameRate=ke):(ze=window.setTimeout,Re=window.clearTimeout,"undefined"!=typeof console&&(Pe=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Pe&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Le=!1,Be=null,Ie=-1,je=5,Ue=0,_e=function(){return we()>=Ue},Ee.unstable_shouldYield=_e,De=function(){},ke=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):je=0<e?Math.floor(1e3/e):5},Ee.unstable_forceFrameRate=ke,qe=new MessageChannel,We=qe.port2,qe.port1.onmessage=function(){if(null!==Be){var e=we();Ue=e+je;try{Be(!0,e)?We.postMessage(null):(Le=!1,Be=null)}catch(e){throw We.postMessage(null),e}}else Le=!1},Se=function(e){Be=e,Le||(Le=!0,We.postMessage(null))},Ae=function(e,t){Ie=ze((function(){e(we())}),t)},Ce=function(){Re(Ie),Ie=-1}),He=[],Ve=[],Ge=1,Ye=null,Xe=3,Qe=!1,Je=!1,Ke=!1,Ze=De,5,Ee.unstable_IdlePriority=5,1,Ee.unstable_ImmediatePriority=1,4,Ee.unstable_LowPriority=4,3,Ee.unstable_NormalPriority=3,null,Ee.unstable_Profiling=null,2,Ee.unstable_UserBlockingPriority=2,et=function(e){e.callback=null},Ee.unstable_cancelCallback=et,tt=function(){Je||Qe||(Je=!0,Se(yt))},Ee.unstable_continueExecution=tt,nt=function(){return Xe},Ee.unstable_getCurrentPriorityLevel=nt,rt=function(){return dt(He)},Ee.unstable_getFirstCallbackNode=rt,it=function(e){switch(Xe){case 1:case 2:case 3:var t=3;break;default:t=Xe}var n=Xe;Xe=t;try{return e()}finally{Xe=n}},Ee.unstable_next=it,ot=function(){},Ee.unstable_pauseExecution=ot,at=Ze,Ee.unstable_requestPaint=at,st=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=Xe;Xe=e;try{return t()}finally{Xe=n}},Ee.unstable_runWithPriority=st,ut=function(e,t,n){var r=we();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:Ge++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>r?(e.sortIndex=n,ft(Ve,e),null===dt(He)&&e===dt(Ve)&&(Ke?Ce():Ke=!0,Ae(gt,n-r))):(e.sortIndex=i,ft(He,e),Je||Qe||(Je=!0,Se(yt))),e},Ee.unstable_scheduleCallback=ut,lt=function(e){var t=Xe;return function(){var n=Xe;Xe=t;try{return e.apply(this,arguments)}finally{Xe=n}}},Ee.unstable_wrapCallback=lt),Ee}var bt,xt=!1;function wt(){return xt||(xt=!0,bt={},bt=vt()),bt}var _t,kt,Et,St,At,Ct,Dt,Mt,Ft,Nt,Ot,$t,Tt,zt,Rt,Pt,Lt,Bt,It,jt,Ut,qt,Wt,Ht,Vt,Gt,Yt,Xt,Qt,Jt,Kt,Zt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,dn,hn,pn,mn,gn,yn,vn,bn,xn,wn,_n,kn,En,Sn,An,Cn,Dn,Mn,Fn,Nn,On,$n,Tn,zn,Rn,Pn,Ln,Bn,In,jn,Un,qn,Wn,Hn,Vn,Gn,Yn,Xn,Qn,Jn,Kn,Zn,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,fr,dr,hr,pr,mr,gr,yr,vr,br,xr,wr,_r,kr,Er,Sr,Ar,Cr,Dr,Mr,Fr,Nr,Or,$r,Tr,zr,Rr,Pr,Lr,Br,Ir,jr,Ur,qr,Wr,Hr,Vr,Gr,Yr,Xr,Qr,Jr,Kr,Zr,ei,ti,ni,ri,ii,oi,ai,si,ui,li,ci,fi,di,hi,pi,mi,gi,yi,vi,bi,xi,wi,_i,ki,Ei,Si,Ai,Ci,Di,Mi,Fi,Ni,Oi,$i,Ti,zi,Ri,Pi,Li,Bi,Ii,ji,Ui,qi,Wi,Hi,Vi,Gi,Yi,Xi,Qi,Ji,Ki,Zi,eo,to,no,ro,io,oo,ao,so,uo,lo,co,fo,ho,po,mo,go,yo,vo,bo,xo,wo,_o,ko,Eo,So,Ao,Co,Do,Mo,Fo,No,Oo,$o,To,zo,Ro,Po,Lo,Bo,Io,jo,Uo,qo,Wo,Ho,Vo,Go,Yo,Xo,Qo,Jo,Ko,Zo,ea,ta,na,ra,ia,oa,aa,sa,ua,la,ca,fa,da,ha,pa,ma,ga,ya,va,ba,xa,wa,_a,ka,Ea,Sa,Aa,Ca=!1;function Da(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ma(e,t){Fa(e,t),Fa(e+"Capture",t)}function Fa(e,t){for(At[e]=t,e=0;e<t.length;e++)St.add(t[e])}function Na(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}function Oa(e){return e[1].toUpperCase()}function $a(e,t,n,r){var i=Ot.hasOwnProperty(t)?Ot[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Mt.call(Nt,e)||!Mt.call(Ft,e)&&(Dt.test(e)?Nt[e]=!0:(Ft[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Ta(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Zt&&e[Zt]||e["@@iterator"])?e:null}function za(e){if(void 0===en)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);en=t&&t[1]||""}return"\n"+en+e}function Ra(e,t){if(!e||tn)return"";tn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{tn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?za(e):""}function Pa(e){switch(e.tag){case 5:return za(e.type);case 16:return za("Lazy");case 13:return za("Suspense");case 19:return za("SuspenseList");case 0:case 2:case 15:return e=Ra(e.type,!1);case 11:return e=Ra(e.type.render,!1);case 22:return e=Ra(e.type._render,!1);case 1:return e=Ra(e.type,!0);default:return""}}function La(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Pt:return"Fragment";case Rt:return"Portal";case Bt:return"Profiler";case Lt:return"StrictMode";case qt:return"Suspense";case Wt:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case jt:return(e.displayName||"Context")+".Consumer";case It:return(e._context.displayName||"Context")+".Provider";case Ut:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Ht:return La(e.type);case Gt:return La(e._render);case Vt:t=e._payload,e=e._init;try{return La(e(t))}catch(e){}}return null}function Ba(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ia(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ja(e){e._valueTracker||(e._valueTracker=function(e){var t=Ia(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ua(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Ia(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function qa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Wa(e,t){var n=t.checked;return Et({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ha(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ba(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Va(e,t){null!=(t=t.checked)&&$a(e,"checked",t,!1)}function Ga(e,t){Va(e,t);var n=Ba(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Xa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xa(e,t.type,Ba(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Ya(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Xa(e,t,n){"number"===t&&qa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Qa(e,t){return e=Et({children:void 0},t),(t=function(e){var t="";return kt.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ja(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ba(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Ka(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Da(91));return Et({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Za(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Da(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Da(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ba(n)}}function es(e,t){var n=Ba(t.value),r=Ba(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ts(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ns(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rs(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ns(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function is(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function os(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||an.hasOwnProperty(e)&&an[e]?(""+t).trim():t+"px"}function as(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=os(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function ss(e,t){if(t){if(un[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Da(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Da(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Da(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Da(62))}}function us(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function ls(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function cs(e){if(e=ju(e)){if("function"!=typeof ln)throw Error(Da(280));var t=e.stateNode;t&&(t=qu(t),ln(e.stateNode,e.type,t))}}function fs(e){cn?fn?fn.push(e):fn=[e]:cn=e}function ds(){if(cn){var e=cn,t=fn;if(fn=cn=null,cs(e),t)for(e=0;e<t.length;e++)cs(t[e])}}function hs(e,t){return e(t)}function ps(e,t,n,r,i){return e(t,n,r,i)}function ms(){}function gs(){null===cn&&null===fn||(ms(),ds())}function ys(e,t){var n=e.stateNode;if(null===n)return null;var r=qu(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Da(231,t,typeof n));return n}function vs(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}function bs(e,t,n,r,i,o,a,s,u){yn=!1,vn=null,vs.apply(wn,arguments)}function xs(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ws(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function _s(e){if(xs(e)!==e)throw Error(Da(188))}function ks(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=xs(e)))throw Error(Da(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return _s(i),e;if(o===r)return _s(i),t;o=o.sibling}throw Error(Da(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Da(189))}}if(n.alternate!==r)throw Error(Da(190))}if(3!==n.tag)throw Error(Da(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Es(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}function Ss(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function As(e,t){switch(e){case"focusin":case"focusout":Dn=null;break;case"dragenter":case"dragleave":Mn=null;break;case"mouseover":case"mouseout":Fn=null;break;case"pointerover":case"pointerout":Nn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":On.delete(t.pointerId)}}function Cs(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=Ss(t,n,r,i,o),null!==t&&(null!==(t=ju(t))&&kn(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ds(e){var t=Iu(e.target);if(null!==t){var n=xs(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ws(n)))return e.blockedOn=t,void Sn(e.lanePriority,(function(){wt().unstable_runWithPriority(e.priority,(function(){En(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ms(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ju(n))&&kn(t),e.blockedOn=n,!1;t.shift()}return!0}function Fs(e,t,n){Ms(e)&&n.delete(t)}function Ns(){for(An=!1;0<Cn.length;){var e=Cn[0];if(null!==e.blockedOn){null!==(e=ju(e.blockedOn))&&_n(e);break}for(var t=e.targetContainers;0<t.length;){var n=Ys(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Cn.shift()}null!==Dn&&Ms(Dn)&&(Dn=null),null!==Mn&&Ms(Mn)&&(Mn=null),null!==Fn&&Ms(Fn)&&(Fn=null),Nn.forEach(Fs),On.forEach(Fs)}function Os(e,t){e.blockedOn===t&&(e.blockedOn=null,An||(An=!0,wt().unstable_scheduleCallback(wt().unstable_NormalPriority,Ns)))}function $s(e){function t(t){return Os(t,e)}if(0<Cn.length){Os(Cn[0],e);for(var n=1;n<Cn.length;n++){var r=Cn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Dn&&Os(Dn,e),null!==Mn&&Os(Mn,e),null!==Fn&&Os(Fn,e),Nn.forEach(t),On.forEach(t),n=0;n<$n.length;n++)(r=$n[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)Ds(n),null===n.blockedOn&&$n.shift()}function Ts(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function zs(e){if(Rn[e])return Rn[e];if(!zn[e])return e;var t,n=zn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Pn)return Rn[e]=n[t];return e}function Rs(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),qn.set(r,t),Un.set(r,i),Ma(i,[r])}}function Ps(e){if(0!=(1&e))return Hn=15,1;if(0!=(2&e))return Hn=14,2;if(0!=(4&e))return Hn=13,4;var t=24&e;return 0!==t?(Hn=12,t):0!=(32&e)?(Hn=11,32):0!==(t=192&e)?(Hn=10,t):0!=(256&e)?(Hn=9,256):0!==(t=3584&e)?(Hn=8,t):0!=(4096&e)?(Hn=7,4096):0!==(t=4186112&e)?(Hn=6,t):0!==(t=62914560&e)?(Hn=5,t):67108864&e?(Hn=4,67108864):0!=(134217728&e)?(Hn=3,134217728):0!==(t=805306368&e)?(Hn=2,t):0!=(1073741824&e)?(Hn=1,1073741824):(Hn=8,e)}function Ls(e,t){var n=e.pendingLanes;if(0===n)return Hn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Hn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ps(u),i=Hn):0!==(s&=o)&&(r=Ps(s),i=Hn)}else 0!==(o=n&~a)?(r=Ps(o),i=Hn):0!==s&&(r=Ps(s),i=Hn);if(0===r)return 0;if(r=n&((0>(r=31-Vn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ps(t),i<=Hn)return t;Hn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Vn(t)),r|=e[n],t&=~i;return r}function Bs(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Is(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=js(24&~t))?Is(10,t):e;case 10:return 0===(e=js(192&~t))?Is(8,t):e;case 8:return 0===(e=js(3584&~t))&&(0===(e=js(4186112&~t))&&(e=512)),e;case 2:return 0===(t=js(805306368&~t))&&(t=268435456),t}throw Error(Da(358,e))}function js(e){return e&-e}function Us(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function qs(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Vn(t)]=n}function Ws(e){return 0===e?32:31-(Gn(e)/Yn|0)|0}function Hs(e,t,n,r){hn||ms();var i=Gs,o=hn;hn=!0;try{ps(i,e,t,n,r)}finally{(hn=o)||gs()}}function Vs(e,t,n,r){Qn(Xn,Gs.bind(null,e,t,n,r))}function Gs(e,t,n,r){var i;if(Jn)if((i=0==(4&t))&&0<Cn.length&&-1<Tn.indexOf(e))e=Ss(null,e,t,n,r),Cn.push(e);else{var o=Ys(e,t,n,r);if(null===o)i&&As(e,r);else{if(i){if(-1<Tn.indexOf(e))return e=Ss(o,e,t,n,r),void Cn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Dn=Cs(Dn,e,t,n,r,i),!0;case"dragenter":return Mn=Cs(Mn,e,t,n,r,i),!0;case"mouseover":return Fn=Cs(Fn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Nn.set(o,Cs(Nn.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,On.set(o,Cs(On.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;As(e,r)}Mu(e,t,r,null,n)}}}function Ys(e,t,n,r){var i=ls(r);if(null!==(i=Iu(i))){var o=xs(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=ws(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Mu(e,t,r,i,n),null}function Xs(){if(er)return er;var e,t,n=Zn,r=n.length,i="value"in Kn?Kn.value:Kn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return er=i.slice(e,1<t?1-t:void 0)}function Qs(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Js(){return!0}function Ks(){return!1}function Zs(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Js:Ks,this.isPropagationStopped=Ks,this}return Et(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Js)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Js)},persist:function(){},isPersistent:Js}),t}function eu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_r[e])&&!!t[e]}function tu(){return eu}function nu(e,t){switch(e){case"keyup":return-1!==$r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ru(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function iu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function ou(e,t,n,r){fs(r),0<(t=Nu(t,"onChange")).length&&(n=new nr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}function au(e){Eu(e,0)}function su(e){if(Ua(Uu(e)))return e}function uu(e,t){if("change"===e)return t}function lu(){Ur&&(Ur.detachEvent("onpropertychange",cu),qr=Ur=null)}function cu(e){if("value"===e.propertyName&&su(qr)){var t=[];if(ou(t,qr,e,ls(e)),e=au,hn)e(t);else{hn=!0;try{hs(e,t)}finally{hn=!1,gs()}}}}function fu(e,t,n){"focusin"===e?(lu(),qr=n,(Ur=t).attachEvent("onpropertychange",cu)):"focusout"===e&&lu()}function du(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return su(qr)}function hu(e,t){if("click"===e)return su(t)}function pu(e,t){if("input"===e||"change"===e)return su(t)}function mu(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function gu(e,t){if(Yr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Xr.call(t,n[r])||!Yr(e[n[r]],t[n[r]]))return!1;return!0}function yu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vu(e,t){var n,r=yu(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=yu(r)}}function bu(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?bu(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function xu(){for(var e=window,t=qa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=qa((e=t.contentWindow).document)}return t}function wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function _u(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ei||null==Jr||Jr!==qa(r)||("selectionStart"in(r=Jr)&&wu(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},Zr&&gu(Zr,r)||(Zr=r,0<(r=Nu(Kr,"onSelect")).length&&(t=new nr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Jr)))}function ku(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(bs.apply(this,arguments),yn){if(!yn)throw Error(Da(198));var l=vn;yn=!1,vn=null,bn||(bn=!0,xn=l)}}(r,t,void 0,e),e.currentTarget=null}function Eu(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;ku(i,s,l),o=u}}}if(bn)throw e=xn,bn=!1,xn=null,e}function Su(e,t){var n=Wu(t),r=e+"__bubble";n.has(r)||(Du(t,e,2,!1),n.add(r))}function Au(e){e[oi]||(e[oi]=!0,St.forEach((function(t){ii.has(t)||Cu(t,!1,e,null),Cu(t,!0,e,null)})))}function Cu(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&ii.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Wu(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Du(o,e,i,t),a.add(s))}function Du(e,t,n,r){var i=qn.get(t);switch(void 0===i?2:i){case 0:i=Hs;break;case 1:i=Vs;break;default:i=Gs}n=i.bind(null,t,n,e),i=void 0,!mn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Mu(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=Iu(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(pn)return e(t,n);pn=!0;try{dn(e,t,n)}finally{pn=!1,gs()}}((function(){var r=o,i=ls(n),a=[];e:{var s=Un.get(e);if(void 0!==s){var u=nr,l=e;switch(e){case"keypress":if(0===Qs(n))break e;case"keydown":case"keyup":u=Er;break;case"focusin":l="focus",u=hr;break;case"focusout":l="blur",u=hr;break;case"beforeblur":case"afterblur":u=hr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Dr;break;case Ln:case Bn:case In:u=mr;break;case jn:u=Fr;break;case"scroll":u=ir;break;case"wheel":u=Or;break;case"copy":case"cut":case"paste":u=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ar}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=ys(p,d))&&c.push(Fu(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!Iu(l)&&!l[pi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?Iu(l):null)&&(l!==(f=xs(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=lr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ar,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:Uu(u),h=null==l?s:Uu(l),(s=new c(m,p+"leave",u,n,i)).target=f,s.relatedTarget=h,m=null,Iu(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Ou(h))p++;for(h=0,m=d;m;m=Ou(m))h++;for(;0<p-h;)c=Ou(c),p--;for(;0<h-p;)d=Ou(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Ou(c),d=Ou(d)}c=null}else c=null;null!==u&&$u(a,s,u,c,!1),null!==l&&null!==f&&$u(a,f,l,c,!0)}if("select"===(u=(s=r?Uu(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=uu;else if(iu(s))if(Wr)g=pu;else{g=du;var y=fu}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=hu);switch(g&&(g=g(e,r))?ou(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&Xa(s,"number",s.value)),y=r?Uu(r):window,e){case"focusin":(iu(y)||"true"===y.contentEditable)&&(Jr=y,Kr=r,Zr=null);break;case"focusout":Zr=Kr=Jr=null;break;case"mousedown":ei=!0;break;case"contextmenu":case"mouseup":case"dragend":ei=!1,_u(a,n,i);break;case"selectionchange":if(Qr)break;case"keydown":case"keyup":_u(a,n,i)}var v;if(Tr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ir?nu(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Pr&&"ko"!==n.locale&&(Ir||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ir&&(v=Xs()):(Zn="value"in(Kn=i)?Kn.value:Kn.textContent,Ir=!0)),0<(y=Nu(r,b)).length&&(b=new br(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=ru(n))&&(b.data=v))),(v=Rr?function(e,t){switch(e){case"compositionend":return ru(t);case"keypress":return 32!==t.which?null:(Br=!0,Lr);case"textInput":return(e=t.data)===Lr&&Br?null:e;default:return null}}(e,n):function(e,t){if(Ir)return"compositionend"===e||!Tr&&nu(e,t)?(e=Xs(),er=Zn=Kn=null,Ir=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Pr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Nu(r,"onBeforeInput")).length&&(i=new br("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Eu(a,t)}))}function Fu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Nu(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=ys(e,n))&&r.unshift(Fu(e,o,i)),null!=(o=ys(e,t))&&r.push(Fu(e,o,i))),e=e.return}return r}function Ou(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $u(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=ys(n,o))&&a.unshift(Fu(n,u,s)):i||null!=(u=ys(n,o))&&a.push(Fu(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function Tu(){}function zu(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ru(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Pu(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Lu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Bu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function Iu(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Bu(e);null!==e;){if(n=e[di])return n;e=Bu(e)}return t}n=(e=n).parentNode}return null}function ju(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Uu(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Da(33))}function qu(e){return e[hi]||null}function Wu(e){var t=e[mi];return void 0===t&&(t=e[mi]=new Set),t}function Hu(e){return{current:e}}function Vu(e){0>yi||(e.current=gi[yi],gi[yi]=null,yi--)}function Gu(e,t){yi++,gi[yi]=e.current,e.current=t}function Yu(e,t){var n=e.type.contextTypes;if(!n)return vi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xu(e){return null!=(e=e.childContextTypes)}function Qu(){Vu(xi),Vu(bi)}function Ju(e,t,n){if(bi.current!==vi)throw Error(Da(168));Gu(bi,t),Gu(xi,n)}function Ku(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(Da(108,La(t)||"Unknown",i));return Et({},n,r)}function Zu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vi,wi=bi.current,Gu(bi,e),Gu(xi,xi.current),!0}function el(e,t,n){var r=e.stateNode;if(!r)throw Error(Da(169));n?(e=Ku(e,t,wi),r.__reactInternalMemoizedMergedChildContext=e,Vu(xi),Vu(bi),Gu(bi,e)):Vu(xi),Gu(xi,n)}function tl(){switch(Fi()){case Ni:return 99;case Oi:return 98;case $i:return 97;case Ti:return 96;case zi:return 95;default:throw Error(Da(332))}}function nl(e){switch(e){case 99:return Ni;case 98:return Oi;case 97:return $i;case 96:return Ti;case 95:return zi;default:throw Error(Da(332))}}function rl(e,t){return e=nl(e),Ei(e,t)}function il(e,t,n){return e=nl(e),Si(e,t,n)}function ol(){if(null!==Bi){var e=Bi;Bi=null,Ai(e)}al()}function al(){if(!Ii&&null!==Li){Ii=!0;var e=0;try{var t=Li;rl(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Li=null}catch(t){throw null!==Li&&(Li=Li.slice(e+1)),Si(Ni,ol),t}finally{Ii=!1}}}function sl(e,t){if(e&&e.defaultProps){for(var n in t=Et({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ul(){Gi=Vi=Hi=null}function ll(e){var t=Wi.current;Vu(Wi),e.type._context._currentValue=t}function cl(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function fl(e,t){Hi=e,Gi=Vi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(ko=!0),e.firstContext=null)}function dl(e,t){if(Gi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Gi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Vi){if(null===Hi)throw Error(Da(308));Vi=t,Hi.dependencies={lanes:0,firstContext:t,responders:null}}else Vi=Vi.next=t;return e._currentValue}function hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function pl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ml(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function gl(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function yl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function vl(e,t,n,r){var i=e.updateQueue;Yi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"==typeof(h=p.payload)){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=p.payload)?h.call(d,f,s):h))break e;f=Et({},f,s);break e;case 2:Yi=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,qo|=a,e.lanes=a,e.memoizedState=f}}function bl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Da(191,i));i.call(r)}}}function xl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Et({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function wl(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!gu(n,r)||!gu(i,o))}function _l(e,t,n){var r=!1,i=vi,o=t.contextType;return"object"==typeof o&&null!==o?o=dl(o):(i=Xu(t)?wi:bi.current,o=(r=null!=(r=t.contextTypes))?Yu(e,i):vi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Qi,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function kl(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Qi.enqueueReplaceState(t,t.state,null)}function El(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Xi,hl(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=dl(o):(o=Xu(t)?wi:bi.current,i.context=Yu(e,o)),vl(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(xl(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Qi.enqueueReplaceState(i,i.state,null),vl(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}function Sl(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Da(309));var r=n.stateNode}if(!r)throw Error(Da(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Xi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Da(284));if(!n._owner)throw Error(Da(290,e))}return e}function Al(e,t){if("textarea"!==e.type)throw Error(Da(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Cl(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=zf(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Bf(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Sl(e,t,n),r.return=e,r):((r=Rf(n.type,n.key,n.props,null,e.mode,r)).ref=Sl(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=If(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Pf(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Bf(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case zt:return(n=Rf(t.type,t.key,t.props,null,e.mode,n)).ref=Sl(e,null,t),n.return=e,n;case Rt:return(t=If(t,e.mode,n)).return=e,t}if(Ji(t)||Ta(t))return(t=Pf(t,e.mode,n,null)).return=e,t;Al(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case zt:return n.key===i?n.type===Pt?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case Rt:return n.key===i?l(e,t,n,r):null}if(Ji(n)||Ta(n))return null!==i?null:c(e,t,n,r,null);Al(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case zt:return e=e.get(null===r.key?n:r.key)||null,r.type===Pt?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case Rt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ji(r)||Ta(r))return c(t,e=e.get(n)||null,r,i,null);Al(t,r)}return null}function p(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=f(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=h(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}function m(i,a,s,u){var l=Ta(s);if("function"!=typeof l)throw Error(Da(150));if(null==(s=l.call(s)))throw Error(Da(151));for(var c=l=null,p=a,m=a=0,g=null,y=s.next();null!==p&&!y.done;m++,y=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),l;if(null===p){for(;!y.done;m++,y=s.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return l}for(p=r(i,p);!y.done;m++,y=s.next())null!==(y=h(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===Pt&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case zt:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===Pt){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Sl(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Pt?((r=Pf(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Rf(o.type,o.key,o.props,null,e.mode,s)).ref=Sl(e,r,o),s.return=e,e=s)}return a(e);case Rt:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=If(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=Bf(o,e.mode,s)).return=e,e=r),a(e);if(Ji(o))return p(e,r,o,s);if(Ta(o))return m(e,r,o,s);if(l&&Al(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Da(152,La(e.type)||"Component"))}return n(e,r)}}function Dl(e){if(e===eo)throw Error(Da(174));return e}function Ml(e,t){switch(Gu(ro,t),Gu(no,e),Gu(to,eo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:rs(null,"");break;default:t=rs(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Vu(to),Gu(to,t)}function Fl(){Vu(to),Vu(no),Vu(ro)}function Nl(e){Dl(ro.current);var t=Dl(to.current),n=rs(t,e.type);t!==n&&(Gu(no,e),Gu(to,n))}function Ol(e){no.current===e&&(Vu(to),Vu(no))}function $l(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Tl(e,t){var n=$f(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function zl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Rl(e){if(so){var t=ao;if(t){var n=t;if(!zl(e,t)){if(!(t=Lu(n.nextSibling))||!zl(e,t))return e.flags=-1025&e.flags|2,so=!1,void(oo=e);Tl(oo,n)}oo=e,ao=Lu(t.firstChild)}else e.flags=-1025&e.flags|2,so=!1,oo=e}}function Pl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;oo=e}function Ll(e){if(e!==oo)return!1;if(!so)return Pl(e),so=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ru(t,e.memoizedProps))for(t=ao;t;)Tl(e,t),t=Lu(t.nextSibling);if(Pl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Da(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ao=Lu(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ao=null}}else ao=oo?Lu(e.stateNode.nextSibling):null;return!0}function Bl(){ao=oo=null,so=!1}function Il(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}function jl(){throw Error(Da(321))}function Ul(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yr(e[n],t[n]))return!1;return!0}function ql(e,t,n,r,i,o){if(fo=o,ho=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lo.current=null===e||null===e.memoizedState?bo:xo,e=n(r,i),yo){o=0;do{if(yo=!1,!(25>o))throw Error(Da(301));o+=1,mo=po=null,t.updateQueue=null,lo.current=wo,e=n(r,i)}while(yo)}if(lo.current=vo,t=null!==po&&null!==po.next,fo=0,mo=po=ho=null,go=!1,t)throw Error(Da(300));return e}function Wl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?ho.memoizedState=mo=e:mo=mo.next=e,mo}function Hl(){if(null===po){var e=ho.alternate;e=null!==e?e.memoizedState:null}else e=po.next;var t=null===mo?ho.memoizedState:mo.next;if(null!==t)mo=t,po=e;else{if(null===e)throw Error(Da(310));e={memoizedState:(po=e).memoizedState,baseState:po.baseState,baseQueue:po.baseQueue,queue:po.queue,next:null},null===mo?ho.memoizedState=mo=e:mo=mo.next=e}return mo}function Vl(e,t){return"function"==typeof t?t(e):t}function Gl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=po,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((fo&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,ho.lanes|=l,qo|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Yr(r,t.memoizedState)||(ko=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Yl(e){var t=Hl(),n=t.queue;if(null===n)throw Error(Da(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Yr(o,t.memoizedState)||(ko=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Xl(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(fo&e)===e)&&(t._workInProgressVersionPrimary=r,uo.push(t))),e)return n(t._source);throw uo.push(t),Error(Da(350))}function Ql(e,t,n,r){var i=zo;if(null===i)throw Error(Da(349));var o=t._getVersion,a=o(t._source),s=lo.current,u=s.useState((function(){return Xl(i,t,n)})),l=u[1],c=u[0];u=mo;var f=e.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=ho;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!Yr(a,e)){e=n(t._source),Yr(c,e)||(l(e),e=tf(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Vn(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=tf(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Yr(h,n)&&Yr(p,t)&&Yr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:c}).dispatch=l=hc.bind(null,ho,e),u.queue=e,u.baseQueue=null,c=Xl(i,t,n),u.memoizedState=u.baseState=c),c}function Jl(e,t,n){return Ql(Hl(),e,t,n)}function Kl(e){var t=Wl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vl,lastRenderedState:e}).dispatch=hc.bind(null,ho,e),[t.memoizedState,e]}function Zl(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ho.updateQueue)?(t={lastEffect:null},ho.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ec(e){return e={current:e},Wl().memoizedState=e}function tc(){return Hl().memoizedState}function nc(e,t,n,r){var i=Wl();ho.flags|=e,i.memoizedState=Zl(1|t,n,void 0,void 0===r?null:r)}function rc(e,t,n,r){var i=Hl();r=void 0===r?null:r;var o=void 0;if(null!==po){var a=po.memoizedState;if(o=a.destroy,null!==r&&Ul(r,a.deps))return void Zl(t,n,o,r)}ho.flags|=e,i.memoizedState=Zl(1|t,n,o,r)}function ic(e,t){return nc(516,4,e,t)}function oc(e,t){return rc(516,4,e,t)}function ac(e,t){return rc(4,2,e,t)}function sc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function uc(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,2,sc.bind(null,t,e),n)}function lc(){}function cc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function fc(e,t){var n=Hl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ul(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function dc(e,t){var n=tl();rl(98>n?98:n,(function(){e(!0)})),rl(97<n?97:n,(function(){var n=co.transition;co.transition=1;try{e(!1),t()}finally{co.transition=n}}))}function hc(e,t,n){var r=ef(),i=tf(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===ho||null!==a&&a===ho)yo=go=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Yr(u,s))return}catch(e){}nf(e,i,r)}}function pc(e,t,n,r){t.child=null===e?Zi(t,null,n,r):Ki(t,e.child,n,r)}function mc(e,t,n,r,i){n=n.render;var o=t.ref;return fl(t,i),r=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function gc(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||Tf(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rf(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,yc(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:gu)(i,r)&&e.ref===t.ref)?Nc(e,t,o):(t.flags|=1,(e=zf(a,r)).ref=t.ref,e.return=t,t.child=e)}function yc(e,t,n,r,i,o){if(null!==e&&gu(e.memoizedProps,r)&&e.ref===t.ref){if(ko=!1,0==(o&i))return t.lanes=e.lanes,Nc(e,t,o);0!=(16384&e.flags)&&(ko=!0)}return xc(e,t,n,r,o)}function vc(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},ff(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},ff(t,e),null;t.memoizedState={baseLanes:0},ff(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,ff(t,r);return pc(e,t,i,n),t.child}function bc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function xc(e,t,n,r,i){var o=Xu(n)?wi:bi.current;return o=Yu(t,o),fl(t,i),n=ql(e,t,n,r,o,i),null===e||ko?(t.flags|=1,pc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Nc(e,t,i))}function wc(e,t,n,r,i){if(Xu(n)){var o=!0;Zu(t)}else o=!1;if(fl(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),_l(t,n,r),El(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=dl(l):l=Yu(t,l=Xu(n)?wi:bi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&kl(t,a,r,l),Yi=!1;var d=t.memoizedState;a.state=d,vl(t,r,a,i),u=t.memoizedState,s!==r||d!==u||xi.current||Yi?("function"==typeof c&&(xl(t,n,c,r),u=t.memoizedState),(s=Yi||wl(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,pl(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:sl(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=dl(u):u=Yu(t,u=Xu(n)?wi:bi.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==u)&&kl(t,a,r,u),Yi=!1,d=t.memoizedState,a.state=d,vl(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||xi.current||Yi?("function"==typeof h&&(xl(t,n,h,r),p=t.memoizedState),(l=Yi||wl(t,n,l,r,d,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return _c(e,t,n,r,o,i)}function _c(e,t,n,r,i,o){bc(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&el(t,n,!1),Nc(e,t,o);r=t.stateNode,_o.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ki(t,e.child,null,o),t.child=Ki(t,null,s,o)):pc(e,t,s,o),t.memoizedState=r.state,i&&el(t,n,!0),t.child}function kc(e){var t=e.stateNode;t.pendingContext?Ju(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ju(0,t.context,!1),Ml(e,t.containerInfo)}function Ec(e,t,n){var r,i=t.pendingProps,o=io.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Gu(io,1&o),null===e?(void 0!==i.fallback&&Rl(t),e=i.children,o=i.fallback,a?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,e):"number"==typeof i.unstable_expectedLoadTime?(e=Sc(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=Eo,t.lanes=33554432,e):((n=Lf({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Cc(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=Eo,i):(n=Ac(e,t,i.children,n),t.memoizedState=null,n))}function Sc(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Lf(t,i,0,null),n=Pf(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Ac(e,t,n,r){var i=e.child;return e=i.sibling,n=zf(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Cc(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=zf(a,s),null!==e?r=zf(e,r):(r=Pf(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Dc(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),cl(e.return,t)}function Mc(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Fc(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(pc(e,t,r.children,n),0!=(2&(r=io.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Dc(e,n);else if(19===e.tag)Dc(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Gu(io,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===$l(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Mc(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$l(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Mc(t,!0,n,null,o,t.lastEffect);break;case"together":Mc(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Nc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),qo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(Da(153));if(null!==t.child){for(n=zf(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zf(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Oc(e,t){if(!so)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $c(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xu(t.type)&&Qu(),null;case 3:return Fl(),Vu(xi),Vu(bi),Il(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ll(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Ao(t),null;case 5:Ol(t);var i=Dl(ro.current);if(n=t.type,null!==e&&null!=t.stateNode)Co(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(Da(166));return null}if(e=Dl(to.current),Ll(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[hi]=o,n){case"dialog":Su("cancel",r),Su("close",r);break;case"iframe":case"object":case"embed":Su("load",r);break;case"video":case"audio":for(e=0;e<ri.length;e++)Su(ri[e],r);break;case"source":Su("error",r);break;case"img":case"image":case"link":Su("error",r),Su("load",r);break;case"details":Su("toggle",r);break;case"input":Ha(r,o),Su("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Su("invalid",r);break;case"textarea":Za(r,o),Su("invalid",r)}for(var a in ss(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):At.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Su("scroll",r));switch(n){case"input":ja(r),Ya(r,o,!0);break;case"textarea":ja(r),ts(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Tu)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===nn.html&&(e=ns(n)),e===nn.html?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[di]=t,e[hi]=r,So(e,t,!1,!1),t.stateNode=e,a=us(n,r),n){case"dialog":Su("cancel",e),Su("close",e),i=r;break;case"iframe":case"object":case"embed":Su("load",e),i=r;break;case"video":case"audio":for(i=0;i<ri.length;i++)Su(ri[i],e);i=r;break;case"source":Su("error",e),i=r;break;case"img":case"image":case"link":Su("error",e),Su("load",e),i=r;break;case"details":Su("toggle",e),i=r;break;case"input":Ha(e,r),i=Wa(e,r),Su("invalid",e);break;case"option":i=Qa(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Et({},r,{value:void 0}),Su("invalid",e);break;case"textarea":Za(e,r),i=Ka(e,r),Su("invalid",e);break;default:i=r}ss(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?as(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&on(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&is(e,u):"number"==typeof u&&is(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(At.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Su("scroll",e):null!=u&&$a(e,o,u,a))}switch(n){case"input":ja(e),Ya(e,r,!1);break;case"textarea":ja(e),ts(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ba(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Ja(e,!!r.multiple,o,!1):null!=r.defaultValue&&Ja(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Tu)}zu(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Do(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Da(166));n=Dl(ro.current),Dl(to.current),Ll(t)?(r=t.stateNode,n=t.memoizedProps,r[di]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r)}return null;case 13:return Vu(io),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Ll(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&io.current)?0===Io&&(Io=3):(0!==Io&&3!==Io||(Io=4),null===zo||0==(134217727&qo)&&0==(134217727&Wo)||sf(zo,Po))),(r||n)&&(t.flags|=4),null);case 4:return Fl(),Ao(t),null===e&&Au(t.stateNode.containerInfo),null;case 10:return ll(t),null;case 17:return Xu(t.type)&&Qu(),null;case 19:if(Vu(io),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Oc(r,!1);else{if(0!==Io||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=$l(e))){for(t.flags|=64,Oc(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Gu(io,1&io.current|2),t.child}e=e.sibling}null!==r.tail&&Ui()>Yo&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=$l(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Oc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!so)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*Ui()-r.renderingStartTime>Yo&&1073741824!==n&&(t.flags|=64,o=!0,Oc(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=Ui(),n.sibling=null,t=io.current,Gu(io,o?1&t|2:1&t),n):null;case 23:case 24:return df(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(Da(156,t.tag))}function Tc(e){switch(e.tag){case 1:Xu(e.type)&&Qu();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Fl(),Vu(xi),Vu(bi),Il(),0!=(64&(t=e.flags)))throw Error(Da(285));return e.flags=-4097&t|64,e;case 5:return Ol(e),null;case 13:return Vu(io),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Vu(io),null;case 4:return Fl(),null;case 10:return ll(e),null;case 23:case 24:return df(),null;default:return null}}function zc(e,t){try{var n="",r=t;do{n+=Pa(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function Rc(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}function Pc(e,t,n){(n=ml(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Qo||(Qo=!0,Jo=r),Rc(0,t)},n}function Lc(e,t,n){(n=ml(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Rc(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Ko?Ko=new Set([this]):Ko.add(this),Rc(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Bc(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Mf(e,t)}else t.current=null}function Ic(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:sl(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Pu(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(Da(163))}function jc(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Af(n,e),Sf(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:sl(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&bl(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}bl(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&zu(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&$s(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Da(163))}function Uc(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=os("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function qc(e,t){if(ki&&"function"==typeof ki.onCommitFiberUnmount)try{ki.onCommitFiberUnmount(_i,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Af(t,n);else{r=t;try{i()}catch(e){Mf(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Bc(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Mf(t,e)}break;case 5:Bc(t);break;case 4:Xc(e,t)}}function Wc(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Hc(e){return 5===e.tag||3===e.tag||4===e.tag}function Vc(e){e:{for(var t=e.return;null!==t;){if(Hc(t))break e;t=t.return}throw Error(Da(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Da(161))}16&n.flags&&(is(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Hc(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Gc(e,n,t):Yc(e,n,t)}function Gc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Tu));else if(4!==r&&null!==(e=e.child))for(Gc(e,t,n),e=e.sibling;null!==e;)Gc(e,t,n),e=e.sibling}function Yc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Yc(e,t,n),e=e.sibling;null!==e;)Yc(e,t,n),e=e.sibling}function Xc(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(Da(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(qc(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(qc(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Qc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[hi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Va(n,r),us(e,i),t=us(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?as(n,s):"dangerouslySetInnerHTML"===a?on(n,s):"children"===a?is(n,s):$a(n,a,s,t)}switch(e){case"input":Ga(n,r);break;case"textarea":es(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Ja(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ja(n,!!r.multiple,r.defaultValue,!0):Ja(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Da(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,$s(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Go=Ui(),Uc(t.child,!0)),void Jc(t);case 19:return void Jc(t);case 17:return;case 23:case 24:return void Uc(t,null!==t.memoizedState)}throw Error(Da(163))}function Jc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Fo),t.forEach((function(t){var r=Nf.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Kc(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function Zc(){Yo=Ui()+500}function ef(){return 0!=(48&To)?Ui():-1!==sa?sa:sa=Ui()}function tf(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===tl()?1:2;if(0===ua&&(ua=Uo),0!==qi.transition){0!==la&&(la=null!==Vo?Vo.pendingLanes:0),e=ua;var t=4186112&~la;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=tl(),0!=(4&To)&&98===e?e=Is(12,ua):e=Is(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ua),e}function nf(e,t,n){if(50<oa)throw oa=0,aa=null,Error(Da(185));if(null===(e=rf(e,t)))return null;qs(e,t,n),e===zo&&(Wo|=t,4===Io&&sf(e,Po));var r=tl();1===t?0!=(8&To)&&0==(48&To)?uf(e):(of(e,n),0===To&&(Zc(),ol())):(0==(4&To)||98!==r&&99!==r||(null===ia?ia=new Set([e]):ia.add(e)),of(e,n)),Vo=e}function rf(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function of(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Vn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Ps(u);var c=Hn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Ls(e,e===zo?Po:0),t=Hn,0===r)null!==n&&(n!==Ri&&Ai(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Ri&&Ai(n)}15===t?(n=uf.bind(null,e),null===Li?(Li=[n],Bi=Si(Ni,al)):Li.push(n),n=Ri):14===t?n=il(99,uf.bind(null,e)):n=il(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Da(358,e))}}(t),af.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function af(e){if(sa=-1,la=ua=0,0!=(48&To))throw Error(Da(327));var t=e.callbackNode;if(Ef()&&e.callbackNode!==t)return null;var n=Ls(e,e===zo?Po:0);if(0===n)return null;var r=n,i=To;To|=16;var o=mf();for(zo===e&&Po===r||(Zc(),hf(e,r));;)try{vf();break}catch(t){pf(e,t)}if(ul(),Oo.current=o,To=i,null!==Ro?r=0:(zo=null,Po=0,r=Io),0!=(Uo&Wo))hf(e,0);else if(0!==r){if(2===r&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(n=Bs(e))&&(r=gf(e,n))),1===r)throw t=jo,hf(e,0),sf(e,n),of(e,Ui()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(Da(345));case 2:wf(e);break;case 3:if(sf(e,n),(62914560&n)===n&&10<(r=Go+500-Ui())){if(0!==Ls(e,0))break;if(((i=e.suspendedLanes)&n)!==n){ef(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ui(wf.bind(null,e),r);break}wf(e);break;case 4:if(sf(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Vn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=Ui()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*No(n/1960))-n)){e.timeoutHandle=ui(wf.bind(null,e),n);break}wf(e);break;case 5:wf(e);break;default:throw Error(Da(329))}}return of(e,Ui()),e.callbackNode===t?af.bind(null,e):null}function sf(e,t){for(t&=~Ho,t&=~Wo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vn(t),r=1<<n;e[n]=-1,t&=~r}}function uf(e){if(0!=(48&To))throw Error(Da(327));if(Ef(),e===zo&&0!=(e.expiredLanes&Po)){var t=Po,n=gf(e,t);0!=(Uo&Wo)&&(n=gf(e,t=Ls(e,t)))}else n=gf(e,t=Ls(e,0));if(0!==e.tag&&2===n&&(To|=64,e.hydrate&&(e.hydrate=!1,Pu(e.containerInfo)),0!==(t=Bs(e))&&(n=gf(e,t))),1===n)throw n=jo,hf(e,0),sf(e,t),of(e,Ui()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,wf(e),of(e,Ui()),null}function lf(e,t){var n=To;To|=1;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function cf(e,t){var n=To;To&=-2,To|=8;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}}function ff(e,t){Gu(Bo,Lo),Lo|=t,Uo|=t}function df(){Lo=Bo.current,Vu(Bo)}function hf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,li(n)),null!==Ro)for(n=Ro.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Qu();break;case 3:Fl(),Vu(xi),Vu(bi),Il();break;case 5:Ol(r);break;case 4:Fl();break;case 13:case 19:Vu(io);break;case 10:ll(r);break;case 23:case 24:df()}n=n.return}zo=e,Ro=zf(e.current,null),Po=Lo=Uo=t,Io=0,jo=null,Ho=Wo=qo=0}function pf(e,t){for(;;){var n=Ro;try{if(ul(),lo.current=vo,go){for(var r=ho.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(fo=0,mo=po=ho=null,yo=!1,$o.current=null,null===n||null===n.return){Io=1,jo=t,Ro=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Po,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&io.current),d=a;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=ml(-1,1);v.tag=2,gl(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Mo,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Ff.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((La(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Io&&(Io=2),u=zc(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Pc(0,o,t));break e;case 1:o=u;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Ko||!Ko.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,yl(d,Lc(d,o,t));break e}}d=d.return}while(null!==d)}xf(n)}catch(e){t=e,Ro===n&&null!==n&&(Ro=n=n.return);continue}break}}function mf(){var e=Oo.current;return Oo.current=vo,null===e?vo:e}function gf(e,t){var n=To;To|=16;var r=mf();for(zo===e&&Po===t||hf(e,t);;)try{yf();break}catch(t){pf(e,t)}if(ul(),To=n,Oo.current=r,null!==Ro)throw Error(Da(261));return zo=null,Po=0,Io}function yf(){for(;null!==Ro;)bf(Ro)}function vf(){for(;null!==Ro&&!Ci();)bf(Ro)}function bf(e){var t=da(e.alternate,e,Lo);e.memoizedProps=e.pendingProps,null===t?xf(e):Ro=t,$o.current=null}function xf(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$c(n,t,Lo)))return void(Ro=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Lo)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=Tc(t)))return n.flags&=2047,void(Ro=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ro=t);Ro=t=e}while(null!==t);0===Io&&(Io=5)}function wf(e){var t=tl();return rl(99,_f.bind(null,e,t)),null}function _f(e,t){do{Ef()}while(null!==ea);if(0!=(48&To))throw Error(Da(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Da(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Vn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==ia&&0==(24&r)&&ia.has(e)&&ia.delete(e),e===zo&&(Ro=zo=null,Po=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=To,To|=32,$o.current=null,ai=Jn,wu(a=xu())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=a,g=null;t:for(;;){for(var y;m!==s||0!==o&&3!==m.nodeType||(f=c+o),m!==u||0!==l&&3!==m.nodeType||(d=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===a)break t;if(g===s&&++h===o&&(f=c),g===u&&++p===l&&(d=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;si={focusedElem:a,selectionRange:s},Jn=!1,ca=null,fa=!1,Xo=r;do{try{kf()}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);ca=null,Xo=r;do{try{for(a=e;null!==Xo;){var v=Xo.flags;if(16&v&&is(Xo.stateNode,""),128&v){var b=Xo.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:Vc(Xo),Xo.flags&=-3;break;case 6:Vc(Xo),Xo.flags&=-3,Qc(Xo.alternate,Xo);break;case 1024:Xo.flags&=-1025;break;case 1028:Xo.flags&=-1025,Qc(Xo.alternate,Xo);break;case 4:Qc(Xo.alternate,Xo);break;case 8:Xc(a,s=Xo);var w=s.alternate;Wc(s),null!==w&&Wc(w)}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);if(x=si,b=xu(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&bu(v.ownerDocument.documentElement,v)){null!==a&&wu(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),s=v.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!x.extend&&w>a&&(s=a,a=w,w=s),s=vu(v,w),o=vu(v,a),s&&o&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Jn=!!ai,si=ai=null,e.current=n,Xo=r;do{try{for(v=e;null!==Xo;){var _=Xo.flags;if(36&_&&jc(v,Xo.alternate,Xo),128&_){b=void 0;var k=Xo.ref;if(null!==k){var E=Xo.stateNode;switch(Xo.tag){case 5:b=E;break;default:b=E}"function"==typeof k?k(b):k.current=b}}Xo=Xo.nextEffect}}catch(e){if(null===Xo)throw Error(Da(330));Mf(Xo,e),Xo=Xo.nextEffect}}while(null!==Xo);Xo=null,Pi(),To=i}else e.current=n;if(Zo)Zo=!1,ea=e,ta=t;else for(Xo=r;null!==Xo;)t=Xo.nextEffect,Xo.nextEffect=null,8&Xo.flags&&((_=Xo).sibling=null,_.stateNode=null),Xo=t;if(0===(r=e.pendingLanes)&&(Ko=null),1===r?e===aa?oa++:(oa=0,aa=e):oa=0,n=n.stateNode,ki&&"function"==typeof ki.onCommitFiberRoot)try{ki.onCommitFiberRoot(_i,n,void 0,64==(64&n.current.flags))}catch(e){}if(of(e,Ui()),Qo)throw Qo=!1,e=Jo,Jo=null,e;return 0!=(8&To)||ol(),null}function kf(){for(;null!==Xo;){var e=Xo.alternate;fa||null===ca||(0!=(8&Xo.flags)?Es(Xo,ca)&&(fa=!0):13===Xo.tag&&Kc(e,Xo)&&Es(Xo,ca)&&(fa=!0));var t=Xo.flags;0!=(256&t)&&Ic(e,Xo),0==(512&t)||Zo||(Zo=!0,il(97,(function(){return Ef(),null}))),Xo=Xo.nextEffect}}function Ef(){if(90!==ta){var e=97<ta?97:ta;return ta=90,rl(e,Cf)}return!1}function Sf(e,t){na.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Af(e,t){ra.push(t,e),Zo||(Zo=!0,il(97,(function(){return Ef(),null})))}function Cf(){if(null===ea)return!1;var e=ea;if(ea=null,0!=(48&To))throw Error(Da(331));var t=To;To|=32;var n=ra;ra=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(n=na,na=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===o)throw Error(Da(330));Mf(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return To=t,ol(),!0}function Df(e,t,n){gl(e,t=Pc(0,t=zc(n,t),1)),t=ef(),null!==(e=rf(e,1))&&(qs(e,1,t),of(e,t))}function Mf(e,t){if(3===e.tag)Df(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Df(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r))){var i=Lc(n,e=zc(t,e),1);if(gl(n,i),i=ef(),null!==(n=rf(n,1)))qs(n,1,i),of(n,i);else if("function"==typeof r.componentDidCatch&&(null===Ko||!Ko.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Ff(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ef(),e.pingedLanes|=e.suspendedLanes&n,zo===e&&(Po&n)===n&&(4===Io||3===Io&&(62914560&Po)===Po&&500>Ui()-Go?hf(e,0):Ho|=n),of(e,t)}function Nf(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===tl()?1:2:(0===ua&&(ua=Uo),0===(t=js(62914560&~ua))&&(t=4194304))),n=ef(),null!==(e=rf(e,t))&&(qs(e,t,n),of(e,n))}function Of(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $f(e,t,n,r){return new Of(e,t,n,r)}function Tf(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zf(e,t){var n=e.alternate;return null===n?((n=$f(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rf(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Tf(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Pt:return Pf(n.children,i,o,t);case Xt:a=8,i|=16;break;case Lt:a=8,i|=1;break;case Bt:return(e=$f(12,n,t,8|i)).elementType=Bt,e.type=Bt,e.lanes=o,e;case qt:return(e=$f(13,n,t,i)).type=qt,e.elementType=qt,e.lanes=o,e;case Wt:return(e=$f(19,n,t,i)).elementType=Wt,e.lanes=o,e;case Qt:return Lf(n,i,o,t);case Jt:return(e=$f(24,n,t,i)).elementType=Jt,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case It:a=10;break e;case jt:a=9;break e;case Ut:a=11;break e;case Ht:a=14;break e;case Vt:a=16,r=null;break e;case Gt:a=22;break e}throw Error(Da(130,null==e?e:typeof e,""))}return(t=$f(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pf(e,t,n,r){return(e=$f(7,e,r,t)).lanes=n,e}function Lf(e,t,n,r){return(e=$f(23,e,r,t)).elementType=Qt,e.lanes=n,e}function Bf(e,t,n){return(e=$f(6,e,null,t)).lanes=n,e}function If(e,t,n){return(t=$f(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jf(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Us(0),this.expirationTimes=Us(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Us(0),this.mutableSourceEagerHydrationData=null}function Uf(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Rt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function qf(e,t,n,r){var i=t.current,o=ef(),a=tf(i);e:if(n){t:{if(xs(n=n._reactInternals)!==n||1!==n.tag)throw Error(Da(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Xu(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Da(171))}if(1===n.tag){var u=n.type;if(Xu(u)){n=Ku(n,u,s);break e}}n=s}else n=vi;return null===t.context?t.context=n:t.pendingContext=n,(t=ml(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),gl(i,t),nf(i,a,o),a}function Wf(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Hf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Vf(e,t){Hf(e,t),(e=e.alternate)&&Hf(e,t)}function Gf(){return null}function Yf(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new jf(e,t,null!=n&&!0===n.hydrate),t=$f(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,hl(t),e[pi]=n.current,Au(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Xf(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Wf(a);s.call(e)}}qf(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Yf(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Wf(a);u.call(e)}}cf((function(){qf(t,a,e,i)}))}return Wf(a)}function Jf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xf(t))throw Error(Da(200));return Uf(e,t,null,n)}function Kf(){if(_t={},kt=xe(),Et=c(),wt(),!kt)throw Error(Da(227));var e;if(St=new Set,At={},Ct=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Dt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Mt=Object.prototype.hasOwnProperty,Ft={},Nt={},Ot={},"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Ot[e]=new Na(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Ot[t]=new Na(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Ot[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Ot[e]=new Na(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Ot[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Ot[e]=new Na(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Ot[e]=new Na(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){Ot[e]=new Na(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){Ot[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)})),$t=/[\-:]([a-z])/g,"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($t,Oa);Ot[t]=new Na(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)})),Ot.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){Ot[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)})),Tt=kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,zt=60103,Rt=60106,Pt=60107,Lt=60108,Bt=60114,It=60109,jt=60110,Ut=60112,qt=60113,Wt=60120,Ht=60115,Vt=60116,Gt=60121,Yt=60128,Xt=60129,Qt=60130,Jt=60131,"function"==typeof Symbol&&Symbol.for&&(Kt=Symbol.for,zt=Kt("react.element"),Rt=Kt("react.portal"),Pt=Kt("react.fragment"),Lt=Kt("react.strict_mode"),Bt=Kt("react.profiler"),It=Kt("react.provider"),jt=Kt("react.context"),Ut=Kt("react.forward_ref"),qt=Kt("react.suspense"),Wt=Kt("react.suspense_list"),Ht=Kt("react.memo"),Vt=Kt("react.lazy"),Gt=Kt("react.block"),Kt("react.scope"),Yt=Kt("react.opaque.id"),Xt=Kt("react.debug_trace_mode"),Qt=Kt("react.offscreen"),Jt=Kt("react.legacy_hidden")),Zt="function"==typeof Symbol&&Symbol.iterator,tn=!1,nn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},e=function(e,t){if(e.namespaceURI!==nn.svg||"innerHTML"in e)e.innerHTML=t;else{for((rn=rn||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rn.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},on="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e,an={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sn=["Webkit","ms","Moz","O"],Object.keys(an).forEach((function(e){sn.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),an[t]=an[e]}))})),un=Et({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ln=null,cn=null,fn=null,dn=hs,hn=!1,pn=!1,mn=!1,Ct)try{gn={},Object.defineProperty(gn,"passive",{get:function(){mn=!0}}),window.addEventListener("test",gn,gn),window.removeEventListener("test",gn,gn)}catch(e){mn=!1}yn=!1,vn=null,bn=!1,xn=null,wn={onError:function(e){yn=!0,vn=e}},An=!1,Cn=[],Dn=null,Mn=null,Fn=null,Nn=new Map,On=new Map,$n=[],Tn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),zn={animationend:Ts("Animation","AnimationEnd"),animationiteration:Ts("Animation","AnimationIteration"),animationstart:Ts("Animation","AnimationStart"),transitionend:Ts("Transition","TransitionEnd")},Rn={},Pn={},Ct&&(Pn=document.createElement("div").style,"AnimationEvent"in window||(delete zn.animationend.animation,delete zn.animationiteration.animation,delete zn.animationstart.animation),"TransitionEvent"in window||delete zn.transitionend.transition),Ln=zs("animationend"),Bn=zs("animationiteration"),In=zs("animationstart"),jn=zs("transitionend"),Un=new Map,qn=new Map,Wn=["abort","abort",Ln,"animationEnd",Bn,"animationIteration",In,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",jn,"transitionEnd","waiting","waiting"],(0,wt().unstable_now)(),Hn=8,Vn=Math.clz32?Math.clz32:Ws,Gn=Math.log,Yn=Math.LN2,Xn=wt().unstable_UserBlockingPriority,Qn=wt().unstable_runWithPriority,Jn=!0,Kn=null,Zn=null,er=null,nr=Zs(tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0}),rr=Et({},tr,{view:0,detail:0}),ir=Zs(rr),ur=Et({},rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tu,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sr&&(sr&&"mousemove"===e.type?(or=e.screenX-sr.screenX,ar=e.screenY-sr.screenY):ar=or=0,sr=e),or)},movementY:function(e){return"movementY"in e?e.movementY:ar}}),lr=Zs(ur),cr=Et({},ur,{dataTransfer:0}),fr=Zs(cr),dr=Et({},rr,{relatedTarget:0}),hr=Zs(dr),pr=Et({},tr,{animationName:0,elapsedTime:0,pseudoElement:0}),mr=Zs(pr),gr=Et({},tr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=Zs(gr),vr=Et({},tr,{data:0}),br=Zs(vr),xr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_r={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},kr=Et({},rr,{key:function(e){if(e.key){var t=xr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qs(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tu,charCode:function(e){return"keypress"===e.type?Qs(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qs(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Er=Zs(kr),Sr=Et({},ur,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ar=Zs(Sr),Cr=Et({},rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tu}),Dr=Zs(Cr),Mr=Et({},tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fr=Zs(Mr),Nr=Et({},ur,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Or=Zs(Nr),$r=[9,13,27,32],Tr=Ct&&"CompositionEvent"in window,zr=null,Ct&&"documentMode"in document&&(zr=document.documentMode),Rr=Ct&&"TextEvent"in window&&!zr,Pr=Ct&&(!Tr||zr&&8<zr&&11>=zr),Lr=String.fromCharCode(32),Br=!1,Ir=!1,jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ur=null,qr=null,Wr=!1,Ct&&(Ct?((Vr="oninput"in document)||((Gr=document.createElement("div")).setAttribute("oninput","return;"),Vr="function"==typeof Gr.oninput),Hr=Vr):Hr=!1,Wr=Hr&&(!document.documentMode||9<document.documentMode)),Yr="function"==typeof Object.is?Object.is:mu,Xr=Object.prototype.hasOwnProperty,Qr=Ct&&"documentMode"in document&&11>=document.documentMode,Jr=null,Kr=null,Zr=null,ei=!1,Rs("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rs("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rs(Wn,2);for(ti="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ni=0;ni<ti.length;ni++)qn.set(ti[ni],0);if(Fa("onMouseEnter",["mouseout","mouseover"]),Fa("onMouseLeave",["mouseout","mouseover"]),Fa("onPointerEnter",["pointerout","pointerover"]),Fa("onPointerLeave",["pointerout","pointerover"]),Ma("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ma("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ma("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ma("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ma("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" ")),ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ii=new Set("cancel close invalid load scroll toggle".split(" ").concat(ri)),oi="_reactListening"+Math.random().toString(36).slice(2),ai=null,si=null,ui="function"==typeof setTimeout?setTimeout:void 0,li="function"==typeof clearTimeout?clearTimeout:void 0,ci=0,fi=Math.random().toString(36).slice(2),di="__reactFiber$"+fi,hi="__reactProps$"+fi,pi="__reactContainer$"+fi,mi="__reactEvents$"+fi,gi=[],yi=-1,bi=Hu(vi={}),xi=Hu(!1),wi=vi,_i=null,ki=null,Ei=wt().unstable_runWithPriority,Si=wt().unstable_scheduleCallback,Ai=wt().unstable_cancelCallback,Ci=wt().unstable_shouldYield,Di=wt().unstable_requestPaint,Mi=wt().unstable_now,Fi=wt().unstable_getCurrentPriorityLevel,Ni=wt().unstable_ImmediatePriority,Oi=wt().unstable_UserBlockingPriority,$i=wt().unstable_NormalPriority,Ti=wt().unstable_LowPriority,zi=wt().unstable_IdlePriority,Ri={},Pi=void 0!==Di?Di:function(){},Li=null,Bi=null,Ii=!1,ji=Mi(),Ui=1e4>ji?Mi:function(){return Mi()-ji},qi=Tt.ReactCurrentBatchConfig,Wi=Hu(null),Hi=null,Vi=null,Gi=null,Yi=!1,Xi=(new kt.Component).refs,Qi={isMounted:function(e){return!!(e=e._reactInternals)&&xs(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ef(),i=tf(e),o=ml(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),gl(e,o),nf(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ef(),r=tf(e),i=ml(n,r);i.tag=2,null!=t&&(i.callback=t),gl(e,i),nf(e,r,n)}},Ji=Array.isArray,Ki=Cl(!0),Zi=Cl(!1),to=Hu(eo={}),no=Hu(eo),ro=Hu(eo),io=Hu(0),oo=null,ao=null,so=!1,uo=[],lo=Tt.ReactCurrentDispatcher,co=Tt.ReactCurrentBatchConfig,fo=0,ho=null,po=null,mo=null,go=!1,yo=!1,vo={readContext:dl,useCallback:jl,useContext:jl,useEffect:jl,useImperativeHandle:jl,useLayoutEffect:jl,useMemo:jl,useReducer:jl,useRef:jl,useState:jl,useDebugValue:jl,useDeferredValue:jl,useTransition:jl,useMutableSource:jl,useOpaqueIdentifier:jl,unstable_isNewReconciler:!1},bo={readContext:dl,useCallback:function(e,t){return Wl().memoizedState=[e,void 0===t?null:t],e},useContext:dl,useEffect:ic,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,nc(4,2,sc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nc(4,2,e,t)},useMemo:function(e,t){var n=Wl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Wl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=hc.bind(null,ho,e),[r.memoizedState,e]},useRef:ec,useState:Kl,useDebugValue:lc,useDeferredValue:function(e){var t=Kl(e),n=t[0],r=t[1];return ic((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Kl(!1),t=e[0];return ec(e=dc.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Wl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Ql(r,e,t,n)},useOpaqueIdentifier:function(){if(so){var e=!1,t=function(e){return{$$typeof:Yt,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(ci++).toString(36))),Error(Da(355))})),n=Kl(t)[1];return 0==(2&ho.mode)&&(ho.flags|=516,Zl(5,(function(){n("r:"+(ci++).toString(36))}),void 0,null)),t}return Kl(t="r:"+(ci++).toString(36)),t},unstable_isNewReconciler:!1},xo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Gl,useRef:tc,useState:function(){return Gl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Gl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Gl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Gl(Vl)[0]},unstable_isNewReconciler:!1},wo={readContext:dl,useCallback:cc,useContext:dl,useEffect:oc,useImperativeHandle:uc,useLayoutEffect:ac,useMemo:fc,useReducer:Yl,useRef:tc,useState:function(){return Yl(Vl)},useDebugValue:lc,useDeferredValue:function(e){var t=Yl(Vl),n=t[0],r=t[1];return oc((function(){var t=co.transition;co.transition=1;try{r(e)}finally{co.transition=t}}),[e]),n},useTransition:function(){var e=Yl(Vl)[0];return[tc().current,e]},useMutableSource:Jl,useOpaqueIdentifier:function(){return Yl(Vl)[0]},unstable_isNewReconciler:!1},_o=Tt.ReactCurrentOwner,ko=!1,Eo={dehydrated:null,retryLane:0},So=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ao=function(){},Co=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Dl(to.current);var o,a=null;switch(n){case"input":i=Wa(e,i),r=Wa(e,r),a=[];break;case"option":i=Qa(e,i),r=Qa(e,r),a=[];break;case"select":i=Et({},i,{value:void 0}),r=Et({},r,{value:void 0}),a=[];break;case"textarea":i=Ka(e,i),r=Ka(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Tu)}for(l in ss(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(At.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(At.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Su("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Yt?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Do=function(e,t,n,r){n!==r&&(t.flags|=4)},Mo="function"==typeof WeakMap?WeakMap:Map,Fo="function"==typeof WeakSet?WeakSet:Set,No=Math.ceil,Oo=Tt.ReactCurrentDispatcher,$o=Tt.ReactCurrentOwner,To=0,zo=null,Ro=null,Po=0,Lo=0,Bo=Hu(0),Io=0,jo=null,Uo=0,qo=0,Wo=0,Ho=0,Vo=null,Go=0,Yo=1/0,Xo=null,Qo=!1,Jo=null,Ko=null,Zo=!1,ea=null,ta=90,na=[],ra=[],ia=null,oa=0,aa=null,sa=-1,ua=0,la=0,ca=null,fa=!1,da=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||xi.current)ko=!0;else{if(0==(n&r)){switch(ko=!1,t.tag){case 3:kc(t),Bl();break;case 5:Nl(t);break;case 1:Xu(t.type)&&Zu(t);break;case 4:Ml(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Gu(Wi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Ec(e,t,n):(Gu(io,1&io.current),null!==(t=Nc(e,t,n))?t.sibling:null);Gu(io,1&io.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Fc(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Gu(io,io.current),r)break;return null;case 23:case 24:return t.lanes=0,vc(e,t,n)}return Nc(e,t,n)}ko=0!=(16384&e.flags)}else ko=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Yu(t,bi.current),fl(t,n),i=ql(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xu(r)){var o=!0;Zu(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,hl(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&xl(t,r,a,e),i.updater=Qi,t.stateNode=i,i._reactInternals=t,El(t,r,e,n),t=_c(null,t,r,!0,o,n)}else t.tag=0,pc(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return Tf(e)?1:0;if(null!=e){if((e=e.$$typeof)===Ut)return 11;if(e===Ht)return 14}return 2}(i),e=sl(i,e),o){case 0:t=xc(null,t,i,e,n);break e;case 1:t=wc(null,t,i,e,n);break e;case 11:t=mc(null,t,i,e,n);break e;case 14:t=gc(null,t,i,sl(i.type,e),r,n);break e}throw Error(Da(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,xc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 1:return r=t.type,i=t.pendingProps,wc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 3:if(kc(t),r=t.updateQueue,null===e||null===r)throw Error(Da(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,pl(e,t),vl(t,r,null,n),(r=t.memoizedState.element)===i)Bl(),t=Nc(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(ao=Lu(t.stateNode.containerInfo.firstChild),oo=t,o=so=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],uo.push(o);for(n=Zi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else pc(e,t,r,n),Bl();t=t.child}return t;case 5:return Nl(t),null===e&&Rl(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Ru(r,i)?a=null:null!==o&&Ru(r,o)&&(t.flags|=16),bc(e,t),pc(e,t,a,n),t.child;case 6:return null===e&&Rl(t),null;case 13:return Ec(e,t,n);case 4:return Ml(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ki(t,null,r,n):pc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,mc(e,t,r,i=t.elementType===r?i:sl(r,i),n);case 7:return pc(e,t,t.pendingProps,n),t.child;case 8:case 12:return pc(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Gu(Wi,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Yr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!xi.current){t=Nc(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=ml(-1,n&-n)).tag=2,gl(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cl(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}pc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,fl(t,n),r=r(i=dl(i,o.unstable_observedBits)),t.flags|=1,pc(e,t,r,n),t.child;case 14:return o=sl(i=t.type,t.pendingProps),gc(e,t,i,o=sl(i.type,o),r,n);case 15:return yc(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:sl(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Xu(r)?(e=!0,Zu(t)):e=!1,fl(t,n),_l(t,r,i),El(t,r,i,n),_c(null,t,r,!0,e,n);case 19:return Fc(e,t,n);case 23:case 24:return vc(e,t,n)}throw Error(Da(156,t.tag))},Yf.prototype.render=function(e){qf(e,this._internalRoot,null,null)},Yf.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;qf(null,e,null,(function(){t[pi]=null}))},_n=function(e){13===e.tag&&(nf(e,4,ef()),Vf(e,4))},kn=function(e){13===e.tag&&(nf(e,67108864,ef()),Vf(e,67108864))},En=function(e){if(13===e.tag){var t=ef(),n=tf(e);nf(e,n,t),Vf(e,n)}},Sn=function(e,t){return t()},ln=function(e,t,n){switch(t){case"input":if(Ga(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=qu(r);if(!i)throw Error(Da(90));Ua(r),Ga(r,i)}}}break;case"textarea":es(e,n);break;case"select":null!=(t=n.value)&&Ja(e,!!n.multiple,t,!1)}},hs=lf,ps=function(e,t,n,r,i){var o=To;To|=4;try{return rl(98,e.bind(null,t,n,r,i))}finally{0===(To=o)&&(Zc(),ol())}},ms=function(){0==(49&To)&&(function(){if(null!==ia){var e=ia;ia=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,of(e,Ui())}))}ol()}(),Ef())},dn=function(e,t){var n=To;To|=2;try{return e(t)}finally{0===(To=n)&&(Zc(),ol())}},ha={Events:[ju,Uu,qu,fs,ds,Ef,{current:!1}]},ma={bundleType:(pa={findFiberByHostInstance:Iu,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:pa.version,rendererPackageName:pa.rendererPackageName,rendererConfig:pa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Tt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=ks(e))?null:e.stateNode},findFiberByHostInstance:pa.findFiberByHostInstance||Gf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(ga=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&ga.supportsFiber)try{_i=ga.inject(ma),ki=ga}catch(e){}ya=ha,_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ya,va=Jf,_t.createPortal=va,ba=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Da(188));throw Error(Da(268,Object.keys(e)))}return e=null===(e=ks(t))?null:e.stateNode},_t.findDOMNode=ba,xa=function(e,t){var n=To;if(0!=(48&n))return e(t);To|=1;try{if(e)return rl(99,e.bind(null,t))}finally{To=n,ol()}},_t.flushSync=xa,wa=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!0,n)},_t.hydrate=wa,_a=function(e,t,n){if(!Xf(t))throw Error(Da(200));return Qf(null,e,t,!1,n)},_t.render=_a,ka=function(e){if(!Xf(e))throw Error(Da(40));return!!e._reactRootContainer&&(cf((function(){Qf(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},_t.unmountComponentAtNode=ka,Ea=lf,_t.unstable_batchedUpdates=Ea,Sa=function(e,t){return Jf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},_t.unstable_createPortal=Sa,Aa=function(e,t,n,r){if(!Xf(n))throw Error(Da(200));if(null==e||void 0===e._reactInternals)throw Error(Da(38));return Qf(e,t,n,!1,r)},_t.unstable_renderSubtreeIntoContainer=Aa,"17.0.2",_t.version="17.0.2"}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Ca||(Ca=!0,Kf());var Zf=e(_t);xe();var ed={},td={};function nd(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function rd(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function id(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function od(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+id(-t,6):t>9999?"+"+id(t,6):id(t,4))+"-"+id(e.getUTCMonth()+1,2)+"-"+id(e.getUTCDate(),2)+(o?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"."+id(o,3)+"Z":i?"T"+id(n,2)+":"+id(r,2)+":"+id(i,2)+"Z":r||n?"T"+id(n,2)+":"+id(r,2)+"Z":"")}var ad=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return td;if(l)return l=!1,ed;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))l=!0;else if(13===r)l=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==td;){for(var f=[];r!==ed&&r!==td;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?od(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=nd(e);return function(r,i){return t(n(r),i,e)}}(e,t):nd(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=rd(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=rd(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},sd=ad(","),ud=sd.parse,ld=(sd.parseRows,sd.format,sd.formatBody,sd.formatRows,sd.formatRow,sd.formatValue,ad("\t")),cd=ld.parse;ld.parseRows,ld.format,ld.formatBody,ld.formatRows,ld.formatRow,ld.formatValue;function fd(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var dd=function(e,t){return fetch(e,t).then(fd)};function hd(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),dd(t,n).then((function(t){return e(t,r)}))}}var pd=hd(ud);hd(cd);xe();const md=e=>{const[t,n]=xe().useState([]),[r,i]=xe().useState(!0);return xe().useEffect((()=>{!async function(){const t=await pd(e);n(t),i(!1)}()}),[]),[t,r]};xe();var gd={value:()=>{}};function yd(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new vd(r)}function vd(e){this._=e}function bd(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function xd(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function wd(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=gd,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}vd.prototype=yd.prototype={constructor:vd,on:function(e,t){var n,r=this._,i=bd(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=wd(r[n],e.name,t);else if(null==t)for(n in r)r[n]=wd(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=xd(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new vd(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var _d=function(e){return function(){return this.matches(e)}};function kd(e){return function(t){return t.matches(e)}}var Ed="http://www.w3.org/1999/xhtml",Sd={svg:"http://www.w3.org/2000/svg",xhtml:Ed,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Ad=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Sd.hasOwnProperty(t)?{space:Sd[t],local:e}:e};function Cd(){}var Dd=function(e){return null==e?Cd:function(){return this.querySelector(e)}},Md=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function Fd(){return[]}var Nd=function(e){return null==e?Fd:function(){return this.querySelectorAll(e)}};var Od=Array.prototype.find;function $d(){return this.firstElementChild}var Td=Array.prototype.filter;function zd(){return this.children}var Rd=function(e){return new Array(e.length)};function Pd(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Pd.prototype={constructor:Pd,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Ld=function(e){return function(){return e}};function Bd(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Pd(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Id(e,t,n,r,i,o,a){var s,u,l,c=new Map,f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new Pd(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function jd(e){return e.__data__}function Ud(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function qd(e){return function(){this.removeAttribute(e)}}function Wd(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hd(e,t){return function(){this.setAttribute(e,t)}}function Vd(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function Yd(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Xd=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function Qd(e){return function(){this.style.removeProperty(e)}}function Jd(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Kd(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Zd(e,t){return e.style.getPropertyValue(t)||Xd(e).getComputedStyle(e,null).getPropertyValue(t)}function eh(e){return function(){delete this[e]}}function th(e,t){return function(){this[e]=t}}function nh(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function rh(e){return e.trim().split(/^|\s+/)}function ih(e){return e.classList||new oh(e)}function oh(e){this._node=e,this._names=rh(e.getAttribute("class")||"")}function ah(e,t){for(var n=ih(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function sh(e,t){for(var n=ih(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function uh(e){return function(){ah(this,e)}}function lh(e){return function(){sh(this,e)}}function ch(e,t){return function(){(t.apply(this,arguments)?ah:sh)(this,e)}}oh.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function fh(){this.textContent=""}function dh(e){return function(){this.textContent=e}}function hh(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function ph(){this.innerHTML=""}function mh(e){return function(){this.innerHTML=e}}function gh(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function yh(){this.nextSibling&&this.parentNode.appendChild(this)}function vh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bh(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ed&&t.documentElement.namespaceURI===Ed?t.createElement(e):t.createElementNS(n,e)}}function xh(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var wh=function(e){var t=Ad(e);return(t.local?xh:bh)(t)};function _h(){return null}function kh(){var e=this.parentNode;e&&e.removeChild(this)}function Eh(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sh(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ah(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Ch(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function Dh(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function Mh(e,t,n){var r=Xd(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Fh(e,t){return function(){return Mh(this,e,t)}}function Nh(e,t){return function(){return Mh(this,e,t.apply(this,arguments))}}var Oh=[null];function $h(e,t){this._groups=e,this._parents=t}function Th(){return new $h([[document.documentElement]],Oh)}$h.prototype=Th.prototype={constructor:$h,select:function(e){"function"!=typeof e&&(e=Dd(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new $h(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:Md(t)}}(e):Nd(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new $h(r,i)},selectChild:function(e){return this.select(null==e?$d:function(e){return function(){return Od.call(this.children,e)}}("function"==typeof e?e:kd(e)))},selectChildren:function(e){return this.selectAll(null==e?zd:function(e){return function(){return Td.call(this.children,e)}}("function"==typeof e?e:kd(e)))},filter:function(e){"function"!=typeof e&&(e=_d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new $h(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,jd);var n=t?Id:Bd,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Ld(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=Md(e.call(c,c&&c.__data__,l,r)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);v._next=b||null}}return(a=new $h(a,r))._enter=s,a._exit=u,a},enter:function(){return new $h(this._enter||this._groups.map(Rd),this._parents)},exit:function(){return new $h(this._exit||this._groups.map(Rd),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof $h))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new $h(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Ud);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new $h(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=Ad(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Wd:qd:"function"==typeof t?n.local?Yd:Gd:n.local?Vd:Hd)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?Qd:"function"==typeof t?Kd:Jd)(e,t,null==n?"":n)):Zd(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?eh:"function"==typeof t?nh:th)(e,t)):this.node()[e]},classed:function(e,t){var n=rh(e+"");if(arguments.length<2){for(var r=ih(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?ch:t?uh:lh)(n,t))},text:function(e){return arguments.length?this.each(null==e?fh:("function"==typeof e?hh:dh)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?ph:("function"==typeof e?gh:mh)(e)):this.node().innerHTML},raise:function(){return this.each(yh)},lower:function(){return this.each(vh)},append:function(e){var t="function"==typeof e?e:wh(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:wh(e),r=null==t?_h:"function"==typeof t?t:Dd(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(kh)},clone:function(e){return this.select(e?Sh:Eh)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=Ah(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?Dh:Ch,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Nh:Fh)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var zh=function(e){return"string"==typeof e?new $h([[document.querySelector(e)]],[document.documentElement]):new $h([[e]],Oh)};var Rh={},Ph=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Lh(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bh(){}var Ih=.7,jh=1.4285714285714286,Uh="\\s*([+-]?\\d+)\\s*",qh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Wh="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hh=/^#([0-9a-f]{3,8})$/,Vh=new RegExp("^rgb\\("+[Uh,Uh,Uh]+"\\)$"),Gh=new RegExp("^rgb\\("+[Wh,Wh,Wh]+"\\)$"),Yh=new RegExp("^rgba\\("+[Uh,Uh,Uh,qh]+"\\)$"),Xh=new RegExp("^rgba\\("+[Wh,Wh,Wh,qh]+"\\)$"),Qh=new RegExp("^hsl\\("+[qh,Wh,Wh]+"\\)$"),Jh=new RegExp("^hsla\\("+[qh,Wh,Wh,qh]+"\\)$"),Kh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Zh(){return this.rgb().formatHex()}function ep(){return this.rgb().formatRgb()}function tp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hh.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?np(t):3===n?new ap(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?rp(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?rp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Vh.exec(e))?new ap(t[1],t[2],t[3],1):(t=Gh.exec(e))?new ap(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Yh.exec(e))?rp(t[1],t[2],t[3],t[4]):(t=Xh.exec(e))?rp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Qh.exec(e))?cp(t[1],t[2]/100,t[3]/100,1):(t=Jh.exec(e))?cp(t[1],t[2]/100,t[3]/100,t[4]):Kh.hasOwnProperty(e)?np(Kh[e]):"transparent"===e?new ap(NaN,NaN,NaN,0):null}function np(e){return new ap(e>>16&255,e>>8&255,255&e,1)}function rp(e,t,n,r){return r<=0&&(e=t=n=NaN),new ap(e,t,n,r)}function ip(e){return e instanceof Bh||(e=tp(e)),e?new ap((e=e.rgb()).r,e.g,e.b,e.opacity):new ap}function op(e,t,n,r){return 1===arguments.length?ip(e):new ap(e,t,n,null==r?1:r)}function ap(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function sp(){return"#"+lp(this.r)+lp(this.g)+lp(this.b)}function up(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function lp(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function cp(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new hp(e,t,n,r)}function fp(e){if(e instanceof hp)return new hp(e.h,e.s,e.l,e.opacity);if(e instanceof Bh||(e=tp(e)),!e)return new hp;if(e instanceof hp)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new hp(a,s,u,e.opacity)}function dp(e,t,n,r){return 1===arguments.length?fp(e):new hp(e,t,n,null==r?1:r)}function hp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function pp(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Ph(Bh,tp,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Zh,formatHex:Zh,formatHsl:function(){return fp(this).formatHsl()},formatRgb:ep,toString:ep}),Ph(ap,op,Lh(Bh,{brighter:function(e){return e=null==e?jh:Math.pow(jh,e),new ap(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Ih:Math.pow(Ih,e),new ap(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:sp,formatHex:sp,formatRgb:up,toString:up})),Ph(hp,dp,Lh(Bh,{brighter:function(e){return e=null==e?jh:Math.pow(jh,e),new hp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ih:Math.pow(Ih,e),new hp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ap(pp(e>=240?e-240:e+120,i,r),pp(e,i,r),pp(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const mp=Math.PI/180,gp=180/Math.PI,yp=.96422,vp=.82521,bp=4/29,xp=6/29,wp=.12841854934601665;function _p(e){if(e instanceof Ep)return new Ep(e.l,e.a,e.b,e.opacity);if(e instanceof Np)return Op(e);e instanceof ap||(e=ip(e));var t,n,r=Dp(e.r),i=Dp(e.g),o=Dp(e.b),a=Sp((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=Sp((.4360747*r+.3850649*i+.1430804*o)/yp),n=Sp((.0139322*r+.0971045*i+.7141733*o)/vp)),new Ep(116*a-16,500*(t-a),200*(a-n),e.opacity)}function kp(e,t,n,r){return 1===arguments.length?_p(e):new Ep(e,t,n,null==r?1:r)}function Ep(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function Sp(e){return e>.008856451679035631?Math.pow(e,1/3):e/wp+bp}function Ap(e){return e>xp?e*e*e:wp*(e-bp)}function Cp(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function Dp(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Mp(e){if(e instanceof Np)return new Np(e.h,e.c,e.l,e.opacity);if(e instanceof Ep||(e=_p(e)),0===e.a&&0===e.b)return new Np(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*gp;return new Np(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Fp(e,t,n,r){return 1===arguments.length?Mp(e):new Np(e,t,n,null==r?1:r)}function Np(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Op(e){if(isNaN(e.h))return new Ep(e.l,0,0,e.opacity);var t=e.h*mp;return new Ep(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ph(Ep,kp,Lh(Bh,{brighter:function(e){return new Ep(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new Ep(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new ap(Cp(3.1338561*(t=yp*Ap(t))-1.6168667*(e=1*Ap(e))-.4906146*(n=vp*Ap(n))),Cp(-.9787684*t+1.9161415*e+.033454*n),Cp(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Ph(Np,Fp,Lh(Bh,{brighter:function(e){return new Np(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Np(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Op(this).rgb()}}));var $p=-.14861,Tp=1.78277,zp=-.29227,Rp=-.90649,Pp=1.97294,Lp=-1.7884503806,Bp=3.5172982438,Ip=-.6557636667999999;function jp(e){if(e instanceof qp)return new qp(e.h,e.s,e.l,e.opacity);e instanceof ap||(e=ip(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Ip*r+Lp*t-Bp*n)/-5.9615122912,o=r-i,a=(Pp*(n-i)-zp*o)/Rp,s=Math.sqrt(a*a+o*o)/(Pp*i*(1-i)),u=s?Math.atan2(a,o)*gp-120:NaN;return new qp(u<0?u+360:u,s,i,e.opacity)}function Up(e,t,n,r){return 1===arguments.length?jp(e):new qp(e,t,n,null==r?1:r)}function qp(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Wp(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Ph(qp,Up,Lh(Bh,{brighter:function(e){return e=null==e?jh:Math.pow(jh,e),new qp(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Ih:Math.pow(Ih,e),new qp(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*mp,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new ap(255*(t+n*($p*r+Tp*i)),255*(t+n*(zp*r+Rp*i)),255*(t+n*(Pp*r)),this.opacity)}}));var Hp=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Wp((n-r/t)*t,a,i,o,s)}},Vp=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Wp((n-r/t)*t,i,o,a,s)}},Gp=e=>()=>e;function Yp(e,t){return function(n){return e+n*t}}function Xp(e,t){var n=t-e;return n?Yp(e,n>180||n<-180?n-360*Math.round(n/360):n):Gp(isNaN(e)?t:e)}function Qp(e){return 1==(e=+e)?Jp:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Gp(isNaN(t)?n:t)}}function Jp(e,t){var n=t-e;return n?Yp(e,n):Gp(isNaN(e)?t:e)}var Kp=function e(t){var n=Qp(t);function r(e,t){var r=n((e=op(e)).r,(t=op(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Jp(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Zp(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=op(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var em=Zp(Hp),tm=Zp(Vp),nm=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function rm(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var im=function(e,t){return(rm(t)?nm:om)(e,t)};function om(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=hm(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var am=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},sm=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},um=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=hm(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},lm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,cm=new RegExp(lm.source,"g");var fm,dm=function(e,t){var n,r,i,o=lm.lastIndex=cm.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=lm.exec(e))&&(r=cm.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:sm(n,r)})),o=cm.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},hm=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Gp(t):("number"===r?sm:"string"===r?(n=tp(t))?(t=n,Kp):dm:t instanceof tp?Kp:t instanceof Date?am:rm(t)?nm:Array.isArray(t)?om:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?um:sm)(e,t)},pm=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},mm=function(e,t){var n=Xp(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},gm=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},ym=180/Math.PI,vm={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},bm=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*ym,skewX:Math.atan(u)*ym,scaleX:a,scaleY:s}};function xm(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:sm(e,i)},{i:u-2,x:sm(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:sm(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:sm(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:sm(e,n)},{i:s-2,x:sm(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var wm=xm((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?vm:bm(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),_m=xm((function(e){return null==e?vm:(fm||(fm=document.createElementNS("http://www.w3.org/2000/svg","g")),fm.setAttribute("transform",e),(e=fm.transform.baseVal.consolidate())?(e=e.matrix,bm(e.a,e.b,e.c,e.d,e.e,e.f)):vm)}),", ",")",")");function km(e){return((e=Math.exp(e))+1/e)/2}var Em=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],c=i[0],f=i[1],d=i[2],h=c-s,p=f-u,m=h*h+p*p;if(m<1e-12)a=Math.log(d/l)/t,o=function(e){return[s+e*h,u+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,o=function(e){var r,i=e*a,o=km(b),c=l/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*h,u+c*p,l*o/km(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function Sm(e){return function(t,n){var r=e((t=dp(t)).h,(n=dp(n)).h),i=Jp(t.s,n.s),o=Jp(t.l,n.l),a=Jp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Am=Sm(Xp),Cm=Sm(Jp);function Dm(e,t){var n=Jp((e=kp(e)).l,(t=kp(t)).l),r=Jp(e.a,t.a),i=Jp(e.b,t.b),o=Jp(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function Mm(e){return function(t,n){var r=e((t=Fp(t)).h,(n=Fp(n)).h),i=Jp(t.c,n.c),o=Jp(t.l,n.l),a=Jp(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var Fm=Mm(Xp),Nm=Mm(Jp);function Om(e){return function t(n){function r(t,r){var i=e((t=Up(t)).h,(r=Up(r)).h),o=Jp(t.s,r.s),a=Jp(t.l,r.l),s=Jp(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var $m=Om(Xp),Tm=Om(Jp);function zm(e,t){void 0===t&&(t=e,e=hm);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var Rm=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};t(Rh,"interpolate",(function(){return hm})),t(Rh,"interpolateArray",(function(){return im})),t(Rh,"interpolateBasis",(function(){return Hp})),t(Rh,"interpolateBasisClosed",(function(){return Vp})),t(Rh,"interpolateDate",(function(){return am})),t(Rh,"interpolateDiscrete",(function(){return pm})),t(Rh,"interpolateHue",(function(){return mm})),t(Rh,"interpolateNumber",(function(){return sm})),t(Rh,"interpolateNumberArray",(function(){return nm})),t(Rh,"interpolateObject",(function(){return um})),t(Rh,"interpolateRound",(function(){return gm})),t(Rh,"interpolateString",(function(){return dm})),t(Rh,"interpolateTransformSvg",(function(){return _m})),t(Rh,"interpolateTransformCss",(function(){return wm})),t(Rh,"interpolateZoom",(function(){return Em})),t(Rh,"interpolateRgbBasisClosed",(function(){return tm})),t(Rh,"interpolateRgbBasis",(function(){return em})),t(Rh,"interpolateRgb",(function(){return Kp})),t(Rh,"interpolateHslLong",(function(){return Cm})),t(Rh,"interpolateHsl",(function(){return Am})),t(Rh,"interpolateLab",(function(){return Dm})),t(Rh,"interpolateHclLong",(function(){return Nm})),t(Rh,"interpolateHcl",(function(){return Fm})),t(Rh,"interpolateCubehelixLong",(function(){return Tm})),t(Rh,"interpolateCubehelix",(function(){return $m})),t(Rh,"piecewise",(function(){return zm})),t(Rh,"quantize",(function(){return Rm}));var Pm,Lm,Bm=0,Im=0,jm=0,Um=0,qm=0,Wm=0,Hm="object"==typeof performance&&performance.now?performance:Date,Vm="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Gm(){return qm||(Vm(Ym),qm=Hm.now()+Wm)}function Ym(){qm=0}function Xm(){this._call=this._time=this._next=null}function Qm(e,t,n){var r=new Xm;return r.restart(e,t,n),r}function Jm(){qm=(Um=Hm.now())+Wm,Bm=Im=0;try{!function(){Gm(),++Bm;for(var e,t=Pm;t;)(e=qm-t._time)>=0&&t._call.call(null,e),t=t._next;--Bm}()}finally{Bm=0,function(){var e,t,n=Pm,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Pm=t);Lm=e,Zm(r)}(),qm=0}}function Km(){var e=Hm.now(),t=e-Um;t>1e3&&(Wm-=t,Um=e)}function Zm(e){Bm||(Im&&(Im=clearTimeout(Im)),e-qm>24?(e<1/0&&(Im=setTimeout(Jm,e-Hm.now()-Wm)),jm&&(jm=clearInterval(jm))):(jm||(Um=Hm.now(),jm=setInterval(Km,1e3)),Bm=1,Vm(Jm)))}Xm.prototype=Qm.prototype={constructor:Xm,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Gm():+n)+(null==t?0:+t),this._next||Lm===this||(Lm?Lm._next=this:Pm=this,Lm=this),this._call=e,this._time=n,Zm()},stop:function(){this._call&&(this._call=null,this._time=1/0,Zm())}};var eg=function(e,t,n){var r=new Xm;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r},tg=yd("start","end","cancel","interrupt"),ng=[],rg=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,f,d;if(1!==n.state)return u();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return eg(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(eg((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=Qm(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:tg,tween:ng,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function ig(e,t){var n=ag(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function og(e,t){var n=ag(e,t);if(n.state>3)throw new Error("too late; already running");return n}function ag(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var sg=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};function ug(e,t){var n,r;return function(){var i=og(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function lg(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=og(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function cg(e,t,n){var r=e._id;return e.each((function(){var e=og(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return ag(e,r).value[t]}}var fg=function(e,t){var n;return("number"==typeof t?sm:t instanceof tp?Kp:(n=tp(t))?(t=n,Kp):dm)(e,t)};function dg(e){return function(){this.removeAttribute(e)}}function hg(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pg(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function mg(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function gg(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function yg(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function vg(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function bg(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function xg(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&bg(e,i)),n}return i._value=t,i}function wg(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&vg(e,i)),n}return i._value=t,i}function _g(e,t){return function(){ig(this,e).delay=+t.apply(this,arguments)}}function kg(e,t){return t=+t,function(){ig(this,e).delay=t}}function Eg(e,t){return function(){og(this,e).duration=+t.apply(this,arguments)}}function Sg(e,t){return t=+t,function(){og(this,e).duration=t}}function Ag(e,t){if("function"!=typeof t)throw new Error;return function(){og(this,e).ease=t}}function Cg(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?ig:og;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var Dg=Th.prototype.constructor;function Mg(e){return function(){this.style.removeProperty(e)}}function Fg(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ng(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Fg(e,o,n)),r}return o._value=t,o}function Og(e){return function(t){this.textContent=e.call(this,t)}}function $g(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Og(r)),t}return r._value=e,r}var Tg=0;function zg(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Rg(){return++Tg}var Pg=Th.prototype;zg.prototype=function(e){return Th().transition(e)}.prototype={constructor:zg,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Dd(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,rg(f[d],t,n,d,f,ag(s,n)));return new zg(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Nd(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=ag(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&rg(d,t,n,m,h,p);o.push(h),a.push(u)}return new zg(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=_d(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new zg(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new zg(a,this._parents,this._name,this._id)},selection:function(){return new Dg(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Rg(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=ag(a,t);rg(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new zg(r,this._parents,e,n)},call:Pg.call,nodes:Pg.nodes,node:Pg.node,size:Pg.size,empty:Pg.empty,each:Pg.each,on:function(e,t){var n=this._id;return arguments.length<2?ag(this.node(),n).on.on(e):this.each(Cg(n,e,t))},attr:function(e,t){var n=Ad(e),r="transform"===n?_m:fg;return this.attrTween(e,"function"==typeof t?(n.local?yg:gg)(n,r,cg(this,"attr."+e,t)):null==t?(n.local?hg:dg)(n):(n.local?mg:pg)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Ad(e);return this.tween(n,(r.local?xg:wg)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?wm:fg;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Zd(this,e),a=(this.style.removeProperty(e),Zd(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,Mg(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Zd(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Zd(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,cg(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=og(this,e),l=u.on,c=null==u.value[a]?o||(o=Mg(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Zd(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Ng(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(cg(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,$g(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=ag(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?ug:lg)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?_g:kg)(t,e)):ag(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Eg:Sg)(t,e)):ag(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(Ag(t,e)):ag(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;og(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=og(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Pg[Symbol.iterator]};var Lg={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Bg(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Th.prototype.interrupt=function(e){return this.each((function(){sg(this,e)}))},Th.prototype.transition=function(e){var t,n;e instanceof zg?(t=e._id,e=e._name):(t=Rg(),(n=Lg).time=Gm(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&rg(a,e,t,l,s,n||Bg(a,t));return new zg(r,this._parents,e,t)};const{abs:Ig,max:jg,min:Ug}=Math;["w","e"].map(qg),["n","s"].map(qg),["n","w","e","s","nw","ne","sw","se"].map(qg);function qg(e){return{type:e}}var Wg=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Hg=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Wg(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}};var Vg=function(e){return null===e?NaN:+e};const Gg=Hg(Wg),Yg=Gg.right,Xg=Gg.left;Hg(Vg).center;class Qg{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}function Jg(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Kg(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Zg(e,t,n=0,r=e.length-1,i=Wg){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Zg(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}const o=e[t];let a=n,s=r;for(ey(e,n,t),i(e[r],o)>0&&ey(e,n,r);a<s;){for(ey(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?ey(e,n,s):(++s,ey(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function ey(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ty(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return Kg(e);if(t>=1)return Jg(e);var r,i=(r-1)*t,o=Math.floor(i),a=Jg(Zg(e,o).subarray(0,o+1));return a+(Kg(e.subarray(o+1))-a)*(i-o)}}function ny(e,t,n=Vg){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var ry=function(e,t){return ty(e,.5,t)};function iy(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var oy=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function ay(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var sy=Math.sqrt(50),uy=Math.sqrt(10),ly=Math.sqrt(2),cy=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=fy(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o};function fy(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=sy?10:o>=uy?5:o>=ly?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=sy?10:o>=uy?5:o>=ly?2:1)}function dy(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=sy?i*=10:o>=uy?i*=5:o>=ly&&(i*=2),t<e?-i:i}function hy(e){return+e}var py=[0,1];function my(e){return e}function gy(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function yy(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=gy(i,r),o=n(a,o)):(r=gy(r,i),o=n(o,a)),function(e){return o(r(e))}}function vy(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=gy(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=Yg(e,t,1,r)-1;return o[n](i[n](t))}}function by(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function xy(){var e,t,n,r,i,o,a=py,s=py,u=hm,l=my;function c(){var e,t,n,u=Math.min(a.length,s.length);return l!==my&&(e=a[0],t=a[u-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?vy:yy,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),sm)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,hy),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=gm,c()},f.clamp=function(e){return arguments.length?(l=!!e||my,c()):l!==my},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function wy(){return xy()(my,my)}function _y(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ky(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function Ey(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var Sy=function(e){return(e=Ey(Math.abs(e)))?e[1]:NaN},Ay=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Cy(e){if(!(t=Ay.exec(e)))throw new Error("invalid format: "+e);var t;return new Dy({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Dy(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Cy.prototype=Dy.prototype,Dy.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var My,Fy,Ny,Oy,$y=function(e,t){var n=Ey(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Ty={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$y(100*e,t),r:$y,s:function(e,t){var n=Ey(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(My=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ey(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},zy=function(e){return e},Ry=Array.prototype.map,Py=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"],Ly=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?zy:(t=Ry.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?zy:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Ry.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=Cy(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Ty[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?u:"",w=Ty[v],_=/[defgprs%]/.test(v);function k(e){var i,o,u,d=b,k=x;if("c"===v)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===v?Py[8+My/3]:"")+k+(E&&"("===f?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!h&&(e=r(e,1/0));var S=d.length+e.length+k.length,A=S<p?new Array(p-S+1).join(t):"";switch(m&&h&&(e=r(A+e,A.length?p-k.length:1/0),A=""),n){case"<":e=d+e+k+A;break;case"=":e=d+A+e+k;break;case"^":e=A.slice(0,S=A.length>>1)+d+e+k+A.slice(S);break;default:e=A+d+e+k}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=Cy(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Sy(t)/3))),i=Math.pow(10,-r),o=Py[8+r/3];return function(e){return n(i*e)+o}}}};Fy=Ly({thousands:",",grouping:[3],currency:["$",""]}),Ny=Fy.format,Oy=Fy.formatPrefix;var By=function(e){return Math.max(0,-Sy(Math.abs(e)))},Iy=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Sy(t)/3)))-Sy(Math.abs(e)))},jy=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Sy(t)-Sy(e))+1};function Uy(e,t,n,r){var i,o=dy(e,t,n);switch((r=Cy(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=Iy(o,a))||(r.precision=i),Oy(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=jy(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=By(o))||(r.precision=i-2*("%"===r.type))}return Ny(r)}function qy(e){var t=e.domain;return e.ticks=function(e){var n=t();return cy(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return Uy(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=fy(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function Wy(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Hy(e){return Math.log(e)}function Vy(e){return Math.exp(e)}function Gy(e){return-Math.log(-e)}function Yy(e){return-Math.exp(-e)}function Xy(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qy(e){return function(t){return-e(-t)}}function Jy(e){var t,n,r=e(Hy,Vy),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?Xy:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=Qy(t),n=Qy(n),e(Gy,Yy)):e(Hy,Vy),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<o;++c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(c=o-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=cy(s,u,p))}else m=cy(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Ny(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(Wy(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Ky(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zy(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function ev(e){var t=1,n=e(Ky(t),Zy(t));return n.constant=function(n){return arguments.length?e(Ky(t=+n),Zy(t)):t},qy(n)}const tv=Symbol("implicit");function nv(){var e=new Map,t=[],n=[],r=tv;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==tv)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return nv(t,n).unknown(r)},_y.apply(i,arguments),i}function rv(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iv(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function ov(e){return e<0?-e*e:e*e}function av(e){var t=e(my,my),n=1;function r(){return 1===n?e(my,my):.5===n?e(iv,ov):e(rv(n),rv(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},qy(t)}function sv(){var e=av(xy());return e.copy=function(){return by(e,sv()).exponent(e.exponent())},_y.apply(e,arguments),e}var uv=new Date,lv=new Date;function cv(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return cv((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return uv.setTime(+t),lv.setTime(+r),e(uv),e(lv),Math.floor(n(uv,lv))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var fv=cv((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));fv.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?cv((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):fv:null};fv.range;const dv=1e3,hv=6e4,pv=36e5,mv=864e5,gv=6048e5,yv=2592e6,vv=31536e6;var bv=cv((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*dv)}),(function(e,t){return(t-e)/dv}),(function(e){return e.getUTCSeconds()})),xv=(bv.range,cv((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*dv)}),(function(e,t){e.setTime(+e+t*hv)}),(function(e,t){return(t-e)/hv}),(function(e){return e.getMinutes()}))),wv=(xv.range,cv((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*dv-e.getMinutes()*hv)}),(function(e,t){e.setTime(+e+t*pv)}),(function(e,t){return(t-e)/pv}),(function(e){return e.getHours()}))),_v=(wv.range,cv((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hv)/mv),(e=>e.getDate()-1)));_v.range;function kv(e){return cv((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*hv)/gv}))}var Ev=kv(0),Sv=kv(1),Av=kv(2),Cv=kv(3),Dv=kv(4),Mv=kv(5),Fv=kv(6),Nv=(Ev.range,Sv.range,Av.range,Cv.range,Dv.range,Mv.range,Fv.range,cv((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Ov=(Nv.range,cv((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Ov.every=function(e){return isFinite(e=Math.floor(e))&&e>0?cv((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Ov.range;var $v=cv((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*hv)}),(function(e,t){return(t-e)/hv}),(function(e){return e.getUTCMinutes()})),Tv=($v.range,cv((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*pv)}),(function(e,t){return(t-e)/pv}),(function(e){return e.getUTCHours()}))),zv=(Tv.range,cv((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/mv}),(function(e){return e.getUTCDate()-1})));zv.range;function Rv(e){return cv((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/gv}))}var Pv=Rv(0),Lv=Rv(1),Bv=Rv(2),Iv=Rv(3),jv=Rv(4),Uv=Rv(5),qv=Rv(6),Wv=(Pv.range,Lv.range,Bv.range,Iv.range,jv.range,Uv.range,qv.range,cv((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Hv=(Wv.range,cv((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Hv.every=function(e){return isFinite(e=Math.floor(e))&&e>0?cv((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Hv.range;function Vv(e,t,n,r,i,o){const a=[[bv,1,dv],[bv,5,5e3],[bv,15,15e3],[bv,30,3e4],[o,1,hv],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,pv],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,mv],[r,2,1728e5],[n,1,gv],[t,1,yv],[t,3,7776e6],[e,1,vv]];function s(t,n,r){const i=Math.abs(n-t)/r,o=Hg((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(dy(t/vv,n/vv,r));if(0===o)return fv.every(Math.max(dy(t,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[Gv,Yv]=Vv(Hv,Wv,Pv,zv,Tv,$v),[Xv,Qv]=Vv(Ov,Nv,Ev,_v,wv,xv);function Jv(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kv(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Zv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function eb(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=db(i),c=hb(i),f=db(o),d=hb(o),h=db(a),p=hb(a),m=db(s),g=hb(s),y=db(u),v=hb(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:Tb,e:Tb,f:Bb,g:Qb,G:Kb,H:zb,I:Rb,j:Pb,L:Lb,m:Ib,M:jb,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:wx,s:_x,S:Ub,u:qb,U:Wb,V:Vb,w:Gb,W:Yb,x:null,X:null,y:Xb,Y:Jb,Z:Zb,"%":xx},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:ex,e:ex,f:ox,g:gx,G:vx,H:tx,I:nx,j:rx,L:ix,m:ax,M:sx,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:wx,s:_x,S:ux,u:lx,U:cx,V:dx,w:hx,W:px,x:null,X:null,y:mx,Y:yx,Z:bx,"%":xx},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:Eb,e:Eb,f:Fb,g:xb,G:bb,H:Ab,I:Ab,j:Sb,L:Mb,m:kb,M:Cb,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:_b,Q:Ob,s:$b,S:Db,u:mb,U:gb,V:yb,w:pb,W:vb,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:xb,Y:bb,Z:wb,"%":Nb};function _(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=ab[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=Zv(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Kv(Zv(o.y,0,1))).getUTCDay(),r=i>4||0===i?Lv.ceil(r):Lv(r),r=zv.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Jv(Zv(o.y,0,1))).getDay(),r=i>4||0===i?Sv.ceil(r):Sv(r),r=_v.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Kv(Zv(o.y,0,1)).getUTCDay():Jv(Zv(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Kv(o)):Jv(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in ab?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var tb,nb,rb,ib,ob,ab={"-":"",_:" ",0:"0"},sb=/^\s*\d+/,ub=/^%/,lb=/[\\^$*+?|[\]().{}]/g;function cb(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function fb(e){return e.replace(lb,"\\$&")}function db(e){return new RegExp("^(?:"+e.map(fb).join("|")+")","i")}function hb(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function pb(e,t,n){var r=sb.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function mb(e,t,n){var r=sb.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function gb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function yb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function vb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function bb(e,t,n){var r=sb.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function xb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function wb(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function _b(e,t,n){var r=sb.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function kb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Eb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Sb(e,t,n){var r=sb.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Ab(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Cb(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Db(e,t,n){var r=sb.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Mb(e,t,n){var r=sb.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Fb(e,t,n){var r=sb.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Nb(e,t,n){var r=ub.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Ob(e,t,n){var r=sb.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function $b(e,t,n){var r=sb.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Tb(e,t){return cb(e.getDate(),t,2)}function zb(e,t){return cb(e.getHours(),t,2)}function Rb(e,t){return cb(e.getHours()%12||12,t,2)}function Pb(e,t){return cb(1+_v.count(Ov(e),e),t,3)}function Lb(e,t){return cb(e.getMilliseconds(),t,3)}function Bb(e,t){return Lb(e,t)+"000"}function Ib(e,t){return cb(e.getMonth()+1,t,2)}function jb(e,t){return cb(e.getMinutes(),t,2)}function Ub(e,t){return cb(e.getSeconds(),t,2)}function qb(e){var t=e.getDay();return 0===t?7:t}function Wb(e,t){return cb(Ev.count(Ov(e)-1,e),t,2)}function Hb(e){var t=e.getDay();return t>=4||0===t?Dv(e):Dv.ceil(e)}function Vb(e,t){return e=Hb(e),cb(Dv.count(Ov(e),e)+(4===Ov(e).getDay()),t,2)}function Gb(e){return e.getDay()}function Yb(e,t){return cb(Sv.count(Ov(e)-1,e),t,2)}function Xb(e,t){return cb(e.getFullYear()%100,t,2)}function Qb(e,t){return cb((e=Hb(e)).getFullYear()%100,t,2)}function Jb(e,t){return cb(e.getFullYear()%1e4,t,4)}function Kb(e,t){var n=e.getDay();return cb((e=n>=4||0===n?Dv(e):Dv.ceil(e)).getFullYear()%1e4,t,4)}function Zb(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+cb(t/60|0,"0",2)+cb(t%60,"0",2)}function ex(e,t){return cb(e.getUTCDate(),t,2)}function tx(e,t){return cb(e.getUTCHours(),t,2)}function nx(e,t){return cb(e.getUTCHours()%12||12,t,2)}function rx(e,t){return cb(1+zv.count(Hv(e),e),t,3)}function ix(e,t){return cb(e.getUTCMilliseconds(),t,3)}function ox(e,t){return ix(e,t)+"000"}function ax(e,t){return cb(e.getUTCMonth()+1,t,2)}function sx(e,t){return cb(e.getUTCMinutes(),t,2)}function ux(e,t){return cb(e.getUTCSeconds(),t,2)}function lx(e){var t=e.getUTCDay();return 0===t?7:t}function cx(e,t){return cb(Pv.count(Hv(e)-1,e),t,2)}function fx(e){var t=e.getUTCDay();return t>=4||0===t?jv(e):jv.ceil(e)}function dx(e,t){return e=fx(e),cb(jv.count(Hv(e),e)+(4===Hv(e).getUTCDay()),t,2)}function hx(e){return e.getUTCDay()}function px(e,t){return cb(Lv.count(Hv(e)-1,e),t,2)}function mx(e,t){return cb(e.getUTCFullYear()%100,t,2)}function gx(e,t){return cb((e=fx(e)).getUTCFullYear()%100,t,2)}function yx(e,t){return cb(e.getUTCFullYear()%1e4,t,4)}function vx(e,t){var n=e.getUTCDay();return cb((e=n>=4||0===n?jv(e):jv.ceil(e)).getUTCFullYear()%1e4,t,4)}function bx(){return"+0000"}function xx(){return"%"}function wx(e){return+e}function _x(e){return Math.floor(+e/1e3)}function kx(e){return new Date(e)}function Ex(e){return e instanceof Date?+e:+new Date(+e)}function Sx(e,t,n,r,i,o,a,s,u,l){var c=wy(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?h:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(Array.from(e,Ex)):d().map(kx)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Wy(n,e)):c},c.copy=function(){return by(c,Sx(e,t,n,r,i,o,a,s,u,l))},c}function Ax(){var e,t,n,r,i,o=0,a=1,s=my,u=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(hm),l.rangeRound=c(gm),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function Cx(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dx(){var e=qy(Ax()(my));return e.copy=function(){return Cx(e,Dx())},ky.apply(e,arguments)}function Mx(){var e=av(Ax());return e.copy=function(){return Cx(e,Mx()).exponent(e.exponent())},ky.apply(e,arguments)}function Fx(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=my,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=zm(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,l]=a,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h):[s,u,l]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(hm),h.rangeRound=p(gm),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h}}function Nx(){var e=av(Fx());return e.copy=function(){return Cx(e,Nx()).exponent(e.exponent())},ky.apply(e,arguments)}!function(e){tb=eb(e),nb=tb.format,rb=tb.parse,ib=tb.utcFormat,ob=tb.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Ox(e,t,n){this.k=e,this.x=t,this.y=n}Ox.prototype={constructor:Ox,scale:function(e){return 1===e?this:new Ox(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ox(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Ox(1,0,0);Ox.prototype;class $x extends xe().Component{componentDidMount(){this.drawBarChart([6043,5153,5507,5431,5743,4951])}drawBarChart(e){const t=600,n=nv(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=zh(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",40).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>45*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>45*t+10)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["edm","latin","pop","r&b","rap","rock"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",510).attr("cy",(function(e,t){return 100+25*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",530).attr("y",(function(e,t){return 100+25*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",300).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Genre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class Tx extends xe().Component{componentDidMount(){this.drawBarChart([1065,1206,1296,1298,1511,1408,1456,1485,1322,1256,1672,1655,1262,1637,1133,1105,1517,1129,1809,948,1674,1291,1288,1405])}drawBarChart(e){const t=1100,n=nv(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=zh(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["album rock","big room","classic rock","dance pop","electro house","electropop","gangster rap","hard rock","hip hop","hip pop","indie poptimism","latin hip hop","latin pop","neo soul","new jack swing","permanent wave","pop edm","post-teen pop","progressive electro house","reggaeton","southern hip hop","trap","tropical","urban contemporary"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",880).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",900).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",550).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();class zx extends xe().Component{componentDidMount(){this.drawBarChart([1206,1511,1517,1809,1655,1262,948,1288,1298,1408,1672,1129,1256,1637,1133,1405,1456,1322,1674,1291,1065,1296,1485,1105])}drawBarChart(e){const t=1100,n=nv(["#383867","#383867","#383867","#383867","#584c77","#584c77","#584c77","#584c77","#33431e","#33431e","#33431e","#33431e","#a36629","#a36629","#a36629","#a36629","#92462f","#92462f","#92462f","#92462f","#b63e36","#b63e36","#b63e36","#b63e36"]),r=zh(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["big room","electro house","pop edm","progressive electro house","latin hip hop","latin pop","reggaeton","tropical","dance pop","electropop","indie poptimism","post-teen pop","hip pop","neo soul","new jack swing","urban contemporary","gangster rap","hip hop","southern hip hop","trap","album rock","classic rock","hard rock","permanent wave"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",880).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",900).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",550).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return ve.createElement("div",{ref:"canvas"})}}xe();var Rx,Px={},Lx=(Rx=function(e,t){return(Rx=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Rx(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Bx=Object.prototype.hasOwnProperty;
/*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017 Joachim Wester
  * MIT license
  */function Ix(e,t){return Bx.call(e,t)}function jx(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)Ix(e,r)&&t.push(r);return t}function Ux(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function qx(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function Wx(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Hx(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Vx(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Vx(e[t]))return!0}else if("object"==typeof e){var r=jx(e),i=r.length;for(t=0;t<i;t++)if(Vx(e[r[t]]))return!0}return!1}function Gx(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}t(Px,"hasOwnProperty",(function(){return Ix})),t(Px,"_objectKeys",(function(){return jx})),t(Px,"_deepClone",(function(){return Ux})),t(Px,"isInteger",(function(){return qx})),t(Px,"escapePathComponent",(function(){return Wx})),t(Px,"unescapePathComponent",(function(){return Hx})),t(Px,"hasUndefined",(function(){return Vx}));var Yx=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,Gx(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=Gx(t,{name:n,index:r,operation:i,tree:o}),s}return Lx(t,e),t}(Error);t(Px,"PatchError",(function(){return Yx}));var Xx=Px.PatchError,Qx={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Kx(n,this.path);r&&(r=Px._deepClone(r));var i=Zx(n,{op:"remove",path:this.from}).removed;return Zx(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Kx(n,this.from);return Zx(n,{op:"add",path:this.path,value:Px._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:nw(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Jx={add:function(e,t,n){return Px.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Qx.move,copy:Qx.copy,test:Qx.test,_get:Qx._get};function Kx(e,t){if(""==t)return e;var n={op:"_get",path:t};return Zx(e,n),n.value}function Zx(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):tw(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=Kx(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=nw(e,t.value),!1===a.test)throw new Xx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new Xx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=Px._deepClone(e));var s=(t.path||"").split("/"),u=e,l=1,c=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:tw;;){if(d=s[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,l).join("/"):l==c-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),l++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!Px.isInteger(d))throw new Xx("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Px.isInteger(d)&&(d=~~d)}if(l>=c){if(n&&"add"===t.op&&d>u.length)throw new Xx("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=Jx[t.op].call(t,u,d,e)).test)throw new Xx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=Px.unescapePathComponent(d)),l>=c){if(!1===(a=Qx[t.op].call(t,u,d,e)).test)throw new Xx("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function ew(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new Xx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Px._deepClone(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Zx(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function tw(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Xx("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!Qx[e.op])throw new Xx("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Xx("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Xx('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Xx("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Xx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Px.hasUndefined(e.value))throw new Xx("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Xx("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Xx("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=function(e,t,n){try{if(!Array.isArray(e))throw new Xx("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)ew(Px._deepClone(t),Px._deepClone(e),n||!0);else{n=n||tw;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof Xx)return e;throw e}}([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Xx("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function nw(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!nw(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!nw(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;Object.assign({},G2,G2,{JsonPatchError:Px.PatchError,deepClone:Px._deepClone,escapePathComponent:Px.escapePathComponent,unescapePathComponent:Px.unescapePathComponent});var rw,iw,ow,aw,sw=/("(?:[^\\"]|\\.)*")|[:,]/g,uw=e((function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,a){var s,u,l,c,f,d,h,p,m,g,y,v;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,i)))return y;if(h=r-o.length-a,y.length<=h&&(m=y.replace(sw,(function(e,t){return t||e+" "}))).length<=h)return m;if(null!=i&&(t=JSON.parse(y),i=void 0),"object"==typeof t&&null!==t){if(p=o+n,l=[],u=0,Array.isArray(t))for(g="[",s="]",h=t.length;u<h;u++)l.push(e(t[u],p,u===h-1?0:1)||"null");else for(g="{",s="}",h=(d=Object.keys(t)).length;u<h;u++)c=d[u],f=JSON.stringify(c)+": ",void 0!==(v=e(t[c],p,f.length+(u===h-1?0:1)))&&l.push(f+v);if(l.length>0)return[g,n+l.join(",\n"+p),s].join("\n"+o)}return y}(e,"",0)})),lw={},cw={};const fw=Number.MAX_SAFE_INTEGER||9007199254740991;aw={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:fw,MAX_SAFE_COMPONENT_LENGTH:16};var dw,hw,pw,mw={};function gw(){throw new Error("setTimeout has not been defined")}function yw(){throw new Error("clearTimeout has not been defined")}function vw(e){if(hw===setTimeout)return setTimeout(e,0);if((hw===gw||!hw)&&setTimeout)return hw=setTimeout,setTimeout(e,0);try{return hw(e,0)}catch(t){try{return hw.call(null,e,0)}catch(t){return hw.call(this,e,0)}}}!function(){try{hw="function"==typeof setTimeout?setTimeout:gw}catch(e){hw=gw}try{pw="function"==typeof clearTimeout?clearTimeout:yw}catch(e){pw=yw}}();var bw,xw=[],ww=!1,_w=-1;function kw(){ww&&bw&&(ww=!1,bw.length?xw=bw.concat(xw):_w=-1,xw.length&&Ew())}function Ew(){if(!ww){var e=vw(kw);ww=!0;for(var t=xw.length;t;){for(bw=xw,xw=[];++_w<t;)bw&&bw[_w].run();_w=-1,t=xw.length}bw=null,ww=!1,function(e){if(pw===clearTimeout)return clearTimeout(e);if((pw===yw||!pw)&&clearTimeout)return pw=clearTimeout,clearTimeout(e);try{pw(e)}catch(t){try{return pw.call(null,e)}catch(t){return pw.call(this,e)}}}(e)}}function Sw(e,t){this.fun=e,this.array=t}function Aw(){}mw.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];xw.push(new Sw(e,t)),1!==xw.length||ww||vw(Ew)},Sw.prototype.run=function(){this.fun.apply(null,this.array)},mw.title="browser",mw.browser=!0,mw.env={},mw.argv=[],mw.version="",mw.versions={},mw.on=Aw,mw.addListener=Aw,mw.once=Aw,mw.off=Aw,mw.removeListener=Aw,mw.removeAllListeners=Aw,mw.emit=Aw,mw.prependListener=Aw,mw.prependOnceListener=Aw,mw.listeners=function(e){return[]},mw.binding=function(e){throw new Error("process.binding is not supported")},mw.cwd=function(){return"/"},mw.chdir=function(e){throw new Error("process.chdir is not supported")},mw.umask=function(){return 0};const Cw=dw=()=>{};cw={};const Dw=(rw=[],cw.re=rw),Mw=(iw=[],cw.src=iw),Fw=(ow={},cw.t=ow);let Nw=0;const Ow=(e,t,n)=>{const r=Nw++;Cw(r,t),Fw[e]=r,Mw[r]=t,Dw[r]=new RegExp(t,n?"g":void 0)};Ow("NUMERICIDENTIFIER","0|[1-9]\\d*"),Ow("NUMERICIDENTIFIERLOOSE","[0-9]+"),Ow("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),Ow("MAINVERSION",`(${Mw[Fw.NUMERICIDENTIFIER]})\\.(${Mw[Fw.NUMERICIDENTIFIER]})\\.(${Mw[Fw.NUMERICIDENTIFIER]})`),Ow("MAINVERSIONLOOSE",`(${Mw[Fw.NUMERICIDENTIFIERLOOSE]})\\.(${Mw[Fw.NUMERICIDENTIFIERLOOSE]})\\.(${Mw[Fw.NUMERICIDENTIFIERLOOSE]})`),Ow("PRERELEASEIDENTIFIER",`(?:${Mw[Fw.NUMERICIDENTIFIER]}|${Mw[Fw.NONNUMERICIDENTIFIER]})`),Ow("PRERELEASEIDENTIFIERLOOSE",`(?:${Mw[Fw.NUMERICIDENTIFIERLOOSE]}|${Mw[Fw.NONNUMERICIDENTIFIER]})`),Ow("PRERELEASE",`(?:-(${Mw[Fw.PRERELEASEIDENTIFIER]}(?:\\.${Mw[Fw.PRERELEASEIDENTIFIER]})*))`),Ow("PRERELEASELOOSE",`(?:-?(${Mw[Fw.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${Mw[Fw.PRERELEASEIDENTIFIERLOOSE]})*))`),Ow("BUILDIDENTIFIER","[0-9A-Za-z-]+"),Ow("BUILD",`(?:\\+(${Mw[Fw.BUILDIDENTIFIER]}(?:\\.${Mw[Fw.BUILDIDENTIFIER]})*))`),Ow("FULLPLAIN",`v?${Mw[Fw.MAINVERSION]}${Mw[Fw.PRERELEASE]}?${Mw[Fw.BUILD]}?`),Ow("FULL",`^${Mw[Fw.FULLPLAIN]}$`),Ow("LOOSEPLAIN",`[v=\\s]*${Mw[Fw.MAINVERSIONLOOSE]}${Mw[Fw.PRERELEASELOOSE]}?${Mw[Fw.BUILD]}?`),Ow("LOOSE",`^${Mw[Fw.LOOSEPLAIN]}$`),Ow("GTLT","((?:<|>)?=?)"),Ow("XRANGEIDENTIFIERLOOSE",`${Mw[Fw.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),Ow("XRANGEIDENTIFIER",`${Mw[Fw.NUMERICIDENTIFIER]}|x|X|\\*`),Ow("XRANGEPLAIN",`[v=\\s]*(${Mw[Fw.XRANGEIDENTIFIER]})(?:\\.(${Mw[Fw.XRANGEIDENTIFIER]})(?:\\.(${Mw[Fw.XRANGEIDENTIFIER]})(?:${Mw[Fw.PRERELEASE]})?${Mw[Fw.BUILD]}?)?)?`),Ow("XRANGEPLAINLOOSE",`[v=\\s]*(${Mw[Fw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Mw[Fw.XRANGEIDENTIFIERLOOSE]})(?:\\.(${Mw[Fw.XRANGEIDENTIFIERLOOSE]})(?:${Mw[Fw.PRERELEASELOOSE]})?${Mw[Fw.BUILD]}?)?)?`),Ow("XRANGE",`^${Mw[Fw.GTLT]}\\s*${Mw[Fw.XRANGEPLAIN]}$`),Ow("XRANGELOOSE",`^${Mw[Fw.GTLT]}\\s*${Mw[Fw.XRANGEPLAINLOOSE]}$`),Ow("COERCE",`(^|[^\\d])(\\d{1,${aw.MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${aw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${aw.MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),Ow("COERCERTL",Mw[Fw.COERCE],!0),Ow("LONETILDE","(?:~>?)"),Ow("TILDETRIM",`(\\s*)${Mw[Fw.LONETILDE]}\\s+`,!0);cw.tildeTrimReplace="$1~",Ow("TILDE",`^${Mw[Fw.LONETILDE]}${Mw[Fw.XRANGEPLAIN]}$`),Ow("TILDELOOSE",`^${Mw[Fw.LONETILDE]}${Mw[Fw.XRANGEPLAINLOOSE]}$`),Ow("LONECARET","(?:\\^)"),Ow("CARETTRIM",`(\\s*)${Mw[Fw.LONECARET]}\\s+`,!0);cw.caretTrimReplace="$1^",Ow("CARET",`^${Mw[Fw.LONECARET]}${Mw[Fw.XRANGEPLAIN]}$`),Ow("CARETLOOSE",`^${Mw[Fw.LONECARET]}${Mw[Fw.XRANGEPLAINLOOSE]}$`),Ow("COMPARATORLOOSE",`^${Mw[Fw.GTLT]}\\s*(${Mw[Fw.LOOSEPLAIN]})$|^$`),Ow("COMPARATOR",`^${Mw[Fw.GTLT]}\\s*(${Mw[Fw.FULLPLAIN]})$|^$`),Ow("COMPARATORTRIM",`(\\s*)${Mw[Fw.GTLT]}\\s*(${Mw[Fw.LOOSEPLAIN]}|${Mw[Fw.XRANGEPLAIN]})`,!0);cw.comparatorTrimReplace="$1$2$3",Ow("HYPHENRANGE",`^\\s*(${Mw[Fw.XRANGEPLAIN]})\\s+-\\s+(${Mw[Fw.XRANGEPLAIN]})\\s*$`),Ow("HYPHENRANGELOOSE",`^\\s*(${Mw[Fw.XRANGEPLAINLOOSE]})\\s+-\\s+(${Mw[Fw.XRANGEPLAINLOOSE]})\\s*$`),Ow("STAR","(<|>)?=?\\s*\\*"),Ow("GTE0","^\\s*>=\\s*0.0.0\\s*$"),Ow("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");var $w;const Tw=dw;var zw;const Rw=["includePrerelease","loose","rtl"],Pw=zw=e=>e?"object"!=typeof e?{loose:!0}:Rw.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};var Lw;const Bw=/^[0-9]+$/,Iw=(e,t)=>{const n=Bw.test(e),r=Bw.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};Lw={compareIdentifiers:Iw,rcompareIdentifiers:(e,t)=>Iw(t,e)};class jw{constructor(e,t){if(t=Pw(t),e instanceof jw){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>aw.MAX_LENGTH)throw new TypeError(`version is longer than ${aw.MAX_LENGTH} characters`);Tw("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?cw.re[cw.t.LOOSE]:cw.re[cw.t.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>aw.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>aw.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>aw.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<aw.MAX_SAFE_INTEGER)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(Tw("SemVer.compare",this.version,this.options,e),!(e instanceof jw)){if("string"==typeof e&&e===this.version)return 0;e=new jw(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof jw||(e=new jw(e,this.options)),Lw.compareIdentifiers(this.major,e.major)||Lw.compareIdentifiers(this.minor,e.minor)||Lw.compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof jw||(e=new jw(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(Tw("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Lw.compareIdentifiers(n,r)}while(++t)}compareBuild(e){e instanceof jw||(e=new jw(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(Tw("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return Lw.compareIdentifiers(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var Uw;const qw=$w=jw,Ww=zw;var Hw;const Vw=Uw=(e,t)=>{if(t=Ww(t),e instanceof qw)return e;if("string"!=typeof e)return null;if(e.length>aw.MAX_LENGTH)return null;if(!(t.loose?cw.re[cw.t.LOOSE]:cw.re[cw.t.FULL]).test(e))return null;try{return new qw(e,t)}catch(e){return null}};Hw=(e,t)=>{const n=Vw(e,t);return n?n.version:null};var Gw;const Yw=Uw;Gw=(e,t)=>{const n=Yw(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var Xw;const Qw=$w;Xw=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new Qw(e,n).inc(t,r).version}catch(e){return null}};var Jw;const Kw=Uw;var Zw,e_;const t_=$w,n_=e_=(e,t,n)=>new t_(e,n).compare(new t_(t,n)),r_=Zw=(e,t,n)=>0===n_(e,t,n);Jw=(e,t)=>{if(r_(e,t))return null;{const n=Kw(e),r=Kw(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}};var i_;const o_=$w;i_=(e,t)=>new o_(e,t).major;var a_;const s_=$w;a_=(e,t)=>new s_(e,t).minor;var u_;const l_=$w;u_=(e,t)=>new l_(e,t).patch;var c_;const f_=Uw;c_=(e,t)=>{const n=f_(e,t);return n&&n.prerelease.length?n.prerelease:null};var d_;const h_=e_;d_=(e,t,n)=>h_(t,e,n);var p_;const m_=e_;p_=(e,t)=>m_(e,t,!0);var g_;const y_=$w;var v_;const b_=g_=(e,t,n)=>{const r=new y_(e,n),i=new y_(t,n);return r.compare(i)||r.compareBuild(i)};v_=(e,t)=>e.sort(((e,n)=>b_(e,n,t)));var x_;const w_=g_;x_=(e,t)=>e.sort(((e,n)=>w_(n,e,t)));var __;const k_=e_;var E_;const S_=e_;var A_;const C_=e_;var D_;const M_=e_;var F_;const N_=e_;var O_;const $_=Zw,T_=A_=(e,t,n)=>0!==C_(e,t,n),z_=__=(e,t,n)=>k_(e,t,n)>0,R_=D_=(e,t,n)=>M_(e,t,n)>=0,P_=E_=(e,t,n)=>S_(e,t,n)<0,L_=F_=(e,t,n)=>N_(e,t,n)<=0;O_=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return $_(e,n,r);case"!=":return T_(e,n,r);case">":return z_(e,n,r);case">=":return R_(e,n,r);case"<":return P_(e,n,r);case"<=":return L_(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var B_;const I_=$w,j_=Uw;B_=(e,t)=>{if(e instanceof I_)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=cw.re[cw.t.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),cw.re[cw.t.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;cw.re[cw.t.COERCERTL].lastIndex=-1}else n=e.match(cw.re[cw.t.COERCE]);return null===n?null:j_(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var U_;const q_=Symbol("SemVer ANY");class W_{static get ANY(){return q_}constructor(e,t){if(t=H_(t),e instanceof W_){if(e.loose===!!t.loose)return e;e=e.value}G_("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===q_?this.value="":this.value=this.operator+this.semver.version,G_("comp",this)}parse(e){const t=this.options.loose?cw.re[cw.t.COMPARATORLOOSE]:cw.re[cw.t.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new Y_(n[2],this.options.loose):this.semver=q_}toString(){return this.value}test(e){if(G_("Comparator.test",e,this.options.loose),this.semver===q_||e===q_)return!0;if("string"==typeof e)try{e=new Y_(e,this.options)}catch(e){return!1}return V_(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof W_))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new qk(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new qk(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=V_(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=V_(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}U_=W_;const H_=zw,V_=O_,G_=dw,Y_=$w;var X_;class Q_{constructor(e,t){if(t=Ek(t),e instanceof Q_)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new Q_(e.raw,t);if(e instanceof Sk)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!Dk(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&Mk(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=kk.get(t);if(n)return n;const r=this.options.loose,i=r?cw.re[cw.t.HYPHENRANGELOOSE]:cw.re[cw.t.HYPHENRANGE];e=e.replace(i,jk(this.options.includePrerelease)),Ak("hyphen replace",e),e=e.replace(cw.re[cw.t.COMPARATORTRIM],cw.comparatorTrimReplace),Ak("comparator trim",e,cw.re[cw.t.COMPARATORTRIM]),e=(e=(e=e.replace(cw.re[cw.t.TILDETRIM],cw.tildeTrimReplace)).replace(cw.re[cw.t.CARETTRIM],cw.caretTrimReplace)).split(/\s+/).join(" ");const o=r?cw.re[cw.t.COMPARATORLOOSE]:cw.re[cw.t.COMPARATOR],a=e.split(" ").map((e=>Nk(e,this.options))).join(" ").split(/\s+/).map((e=>Ik(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new Sk(e,this.options))),s=(a.length,new Map);for(const e of a){if(Dk(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");const u=[...s.values()];return kk.set(t,u),u}intersects(e,t){if(!(e instanceof Q_))throw new TypeError("a Range is required");return this.set.some((n=>Fk(n,t)&&e.set.some((e=>Fk(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new Ck(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(Uk(this.set[t],e,this.options))return!0;return!1}}X_=Q_;var J_,K_=!1;var Z_;function ek(e){var t=this;if(t instanceof ek||(t=new ek),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function tk(e,t,n){var r=t===e.head?new ik(n,null,t,e):new ik(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function nk(e,t){e.tail=new ik(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function rk(e,t){e.head=new ik(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function ik(e,t,n,r){if(!(this instanceof ik))return new ik(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}Z_=ek,ek.Node=ik,ek.create=ek,ek.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},ek.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},ek.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},ek.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)nk(this,arguments[e]);return this.length},ek.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)rk(this,arguments[e]);return this.length},ek.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},ek.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},ek.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},ek.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},ek.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},ek.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},ek.prototype.map=function(e,t){t=t||this;for(var n=new ek,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},ek.prototype.mapReverse=function(e,t){t=t||this;for(var n=new ek,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},ek.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},ek.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},ek.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},ek.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},ek.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new ek;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},ek.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new ek;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},ek.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=tk(this,i,n[r]);return o},ek.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(K_||(K_=!0,J_={},J_=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),J_)(ek)}catch(e){}const ok=Z_,ak=Symbol("max"),sk=Symbol("length"),uk=Symbol("lengthCalculator"),lk=Symbol("allowStale"),ck=Symbol("maxAge"),fk=Symbol("dispose"),dk=Symbol("noDisposeOnSet"),hk=Symbol("lruList"),pk=Symbol("cache"),mk=Symbol("updateAgeOnGet"),gk=()=>1;const yk=(e,t,n)=>{const r=e[pk].get(t);if(r){const t=r.value;if(vk(e,t)){if(xk(e,r),!e[lk])return}else n&&(e[mk]&&(r.value.now=Date.now()),e[hk].unshiftNode(r));return t.value}},vk=(e,t)=>{if(!t||!t.maxAge&&!e[ck])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[ck]&&n>e[ck]},bk=e=>{if(e[sk]>e[ak])for(let t=e[hk].tail;e[sk]>e[ak]&&null!==t;){const n=t.prev;xk(e,t),t=n}},xk=(e,t)=>{if(t){const n=t.value;e[fk]&&e[fk](n.key,n.value),e[sk]-=n.length,e[pk].delete(n.key),e[hk].removeNode(t)}};class wk{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const _k=(e,t,n,r)=>{let i=n.value;vk(e,i)&&(xk(e,n),e[lk]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},kk=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ak]=e.max||1/0;const t=e.length||gk;if(this[uk]="function"!=typeof t?gk:t,this[lk]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[ck]=e.maxAge||0,this[fk]=e.dispose,this[dk]=e.noDisposeOnSet||!1,this[mk]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ak]=e||1/0,bk(this)}get max(){return this[ak]}set allowStale(e){this[lk]=!!e}get allowStale(){return this[lk]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[ck]=e,bk(this)}get maxAge(){return this[ck]}set lengthCalculator(e){"function"!=typeof e&&(e=gk),e!==this[uk]&&(this[uk]=e,this[sk]=0,this[hk].forEach((e=>{e.length=this[uk](e.value,e.key),this[sk]+=e.length}))),bk(this)}get lengthCalculator(){return this[uk]}get length(){return this[sk]}get itemCount(){return this[hk].length}rforEach(e,t){t=t||this;for(let n=this[hk].tail;null!==n;){const r=n.prev;_k(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[hk].head;null!==n;){const r=n.next;_k(this,e,n,t),n=r}}keys(){return this[hk].toArray().map((e=>e.key))}values(){return this[hk].toArray().map((e=>e.value))}reset(){this[fk]&&this[hk]&&this[hk].length&&this[hk].forEach((e=>this[fk](e.key,e.value))),this[pk]=new Map,this[hk]=new ok,this[sk]=0}dump(){return this[hk].map((e=>!vk(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[hk]}set(e,t,n){if((n=n||this[ck])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[uk](t,e);if(this[pk].has(e)){if(i>this[ak])return xk(this,this[pk].get(e)),!1;const o=this[pk].get(e).value;return this[fk]&&(this[dk]||this[fk](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[sk]+=i-o.length,o.length=i,this.get(e),bk(this),!0}const o=new wk(e,t,i,r,n);return o.length>this[ak]?(this[fk]&&this[fk](e,t),!1):(this[sk]+=o.length,this[hk].unshift(o),this[pk].set(e,this[hk].head),bk(this),!0)}has(e){if(!this[pk].has(e))return!1;const t=this[pk].get(e).value;return!vk(this,t)}get(e){return yk(this,e,!0)}peek(e){return yk(this,e,!1)}pop(){const e=this[hk].tail;return e?(xk(this,e),e.value):null}del(e){xk(this,this[pk].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[pk].forEach(((e,t)=>yk(this,t,!1)))}}({max:1e3}),Ek=zw,Sk=U_,Ak=dw,Ck=$w,Dk=e=>"<0.0.0-0"===e.value,Mk=e=>""===e.value,Fk=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},Nk=(e,t)=>(Ak("comp",e,t),e=zk(e,t),Ak("caret",e),e=$k(e,t),Ak("tildes",e),e=Pk(e,t),Ak("xrange",e),e=Bk(e,t),Ak("stars",e),e),Ok=e=>!e||"x"===e.toLowerCase()||"*"===e,$k=(e,t)=>e.trim().split(/\s+/).map((e=>Tk(e,t))).join(" "),Tk=(e,t)=>{const n=t.loose?cw.re[cw.t.TILDELOOSE]:cw.re[cw.t.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return Ak("tilde",e,t,n,r,i,o),Ok(n)?a="":Ok(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:Ok(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(Ak("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,Ak("tilde return",a),a}))},zk=(e,t)=>e.trim().split(/\s+/).map((e=>Rk(e,t))).join(" "),Rk=(e,t)=>{Ak("caret",e,t);const n=t.loose?cw.re[cw.t.CARETLOOSE]:cw.re[cw.t.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return Ak("caret",e,t,n,i,o,a),Ok(n)?s="":Ok(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:Ok(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(Ak("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(Ak("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),Ak("caret return",s),s}))},Pk=(e,t)=>(Ak("replaceXRanges",e,t),e.split(/\s+/).map((e=>Lk(e,t))).join(" ")),Lk=(e,t)=>{e=e.trim();const n=t.loose?cw.re[cw.t.XRANGELOOSE]:cw.re[cw.t.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{Ak("xRange",e,n,r,i,o,a,s);const u=Ok(i),l=u||Ok(o),c=l||Ok(a),f=c;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),Ak("xRange return",n),n}))},Bk=(e,t)=>(Ak("replaceStars",e,t),e.trim().replace(cw.re[cw.t.STAR],"")),Ik=(e,t)=>(Ak("replaceGTE0",e,t),e.trim().replace(cw.re[t.includePrerelease?cw.t.GTE0PRE:cw.t.GTE0],"")),jk=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>`${n=Ok(r)?"":Ok(i)?`>=${r}.0.0${e?"-0":""}`:Ok(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=Ok(l)?"":Ok(c)?`<${+l+1}.0.0-0`:Ok(f)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${f}-${d}`:e?`<${l}.${c}.${+f+1}-0`:`<=${u}`}`.trim(),Uk=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(Ak(e[n].semver),e[n].semver!==Sk.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},qk=X_;var Wk;const Hk=X_;Wk=(e,t,n)=>{try{t=new Hk(t,n)}catch(e){return!1}return t.test(e)};var Vk;const Gk=X_;Vk=(e,t)=>new Gk(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var Yk;const Xk=$w,Qk=X_;Yk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Qk(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new Xk(r,n)))})),r};var Jk;const Kk=$w,Zk=X_;Jk=(e,t,n)=>{let r=null,i=null,o=null;try{o=new Zk(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new Kk(r,n)))})),r};var eE;const tE=$w,nE=X_,rE=__;eE=(e,t)=>{e=new nE(e,t);let n=new tE("0.0.0");if(e.test(n))return n;if(n=new tE("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new tE(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!rE(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!rE(n,i)||(n=i)}return n&&e.test(n)?n:null};var iE;const oE=X_;iE=(e,t)=>{try{return new oE(e,t).range||"*"}catch(e){return null}};var aE;const sE=$w,uE=U_,{ANY:lE}=uE,cE=X_,fE=Wk,dE=__,hE=E_,pE=F_,mE=D_;var gE;const yE=aE=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new sE(e,r),t=new cE(t,r),n){case">":i=dE,o=pE,a=hE,s=">",u=">=";break;case"<":i=hE,o=mE,a=dE,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(fE(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const l=t.set[n];let c=null,f=null;if(l.forEach((e=>{e.semver===lE&&(e=new uE(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,r)?c=e:a(e.semver,f.semver,r)&&(f=e)})),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0};gE=(e,t,n)=>yE(e,t,">",n);var vE;const bE=aE;vE=(e,t,n)=>bE(e,t,"<",n);var xE;const wE=X_;xE=(e,t,n)=>(e=new wE(e,n),t=new wE(t,n),e.intersects(t));var _E;const kE=Wk,EE=e_;_E=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort(((e,t)=>EE(e,t,n)));for(const e of a){kE(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const s=[];for(const[e,t]of r)e===t?s.push(e):t||e!==a[0]?t?e===a[0]?s.push(`<=${t}`):s.push(`${e} - ${t}`):s.push(`>=${e}`):s.push("*");const u=s.join(" || "),l="string"==typeof t.raw?t.raw:String(t);return u.length<l.length?u:t};var SE;const AE=X_,CE=U_,{ANY:DE}=CE,ME=Wk,FE=e_,NE=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===DE){if(1===t.length&&t[0].semver===DE)return!0;e=n.includePrerelease?[new CE(">=0.0.0-0")]:[new CE(">=0.0.0")]}if(1===t.length&&t[0].semver===DE){if(n.includePrerelease)return!0;t=[new CE(">=0.0.0")]}const r=new Set;let i,o,a,s,u,l,c;for(const t of e)">"===t.operator||">="===t.operator?i=OE(i,t,n):"<"===t.operator||"<="===t.operator?o=$E(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(a=FE(i.semver,o.semver,n),a>0)return null;if(0===a&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!ME(e,String(i),n))return null;if(o&&!ME(e,String(o),n))return null;for(const r of t)if(!ME(e,String(r),n))return!1;return!0}let f=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,d=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;f&&1===f.prerelease.length&&"<"===o.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,i)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(s=OE(i,e,n),s===e&&s!==i)return!1}else if(">="===i.operator&&!ME(i.semver,String(e),n))return!1;if(o)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if(u=$E(o,e,n),u===e&&u!==o)return!1}else if("<="===o.operator&&!ME(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==a)return!1}return!(i&&l&&!o&&0!==a)&&(!(o&&c&&!i&&0!==a)&&(!d&&!f))},OE=(e,t,n)=>{if(!e)return t;const r=FE(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},$E=(e,t,n)=>{if(!e)return t;const r=FE(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};SE=(e,t,n={})=>{if(e===t)return!0;e=new AE(e,n),t=new AE(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=NE(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},lw={re:cw.re,src:cw.src,tokens:cw.t,SEMVER_SPEC_VERSION:aw.SEMVER_SPEC_VERSION,SemVer:$w,compareIdentifiers:Lw.compareIdentifiers,rcompareIdentifiers:Lw.rcompareIdentifiers,parse:Uw,valid:Hw,clean:Gw,inc:Xw,diff:Jw,major:i_,minor:a_,patch:u_,prerelease:c_,compare:e_,rcompare:d_,compareLoose:p_,compareBuild:g_,sort:v_,rsort:x_,gt:__,lt:E_,eq:Zw,neq:A_,gte:D_,lte:F_,cmp:O_,coerce:B_,Comparator:U_,Range:X_,satisfies:Wk,toComparators:Vk,maxSatisfying:Yk,minSatisfying:Jk,minVersion:eE,validRange:iE,outside:aE,gtr:gE,ltr:vE,intersects:xE,simplifyRange:_E,subset:SE};var TE={},zE={};function RE(e,t,n){return e.fields=t||[],e.fname=n,e}function PE(e){return null==e?null:e.fname}function LE(e){return null==e?null:e.fields}function BE(e){return 1===e.length?IE(e[0]):jE(e)}const IE=e=>function(t){return t[e]},jE=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function UE(e){throw Error(e)}function qE(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function l(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||UE("Access path missing open bracket: "+e),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&UE("Access path missing closing bracket: "+e),a&&UE("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function WE(e,t,n){const r=qE(e);return e=1===r.length?r[0]:e,RE((n&&n.get||BE)(r),[e],t||e)}const HE=WE("id"),VE=RE((e=>e),[],"identity"),GE=RE((()=>0),[],"zero"),YE=RE((()=>1),[],"one"),XE=RE((()=>!0),[],"true"),QE=RE((()=>!1),[],"false");function JE(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}function KE(e,t){let n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&JE(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&JE(t||"warn","WARN",arguments),this},info:function(){return n>=3&&JE(t||"log","INFO",arguments),this},debug:function(){return n>=4&&JE(t||"log","DEBUG",arguments),this}}}var ZE=Array.isArray;function eS(e){return e===Object(e)}const tS=e=>"__proto__"!==e;function nS(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=iS(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;rS(e,n,t[n],r)}return e}),{})}function rS(e,t,n,r){if(!tS(t))return;let i,o;if(eS(n)&&!ZE(n))for(i in o=eS(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?rS(o,i,n[i]):tS(i)&&(o[i]=n[i]);else e[t]=n}function iS(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function oS(e){return e[e.length-1]}function aS(e){return null==e||""===e?null:+e}const sS=e=>t=>e*Math.exp(t),uS=e=>t=>Math.log(e*t),lS=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),cS=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,fS=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function dS(e,t,n,r){const i=n(e[0]),o=n(oS(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function hS(e,t){return dS(e,t,aS,VE)}function pS(e,t){var n=Math.sign(e[0]);return dS(e,t,uS(n),sS(n))}function mS(e,t,n){return dS(e,t,fS(n),fS(1/n))}function gS(e,t,n){return dS(e,t,lS(n),cS(n))}function yS(e,t,n,r,i){const o=r(e[0]),a=r(oS(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function vS(e,t,n){return yS(e,t,n,aS,VE)}function bS(e,t,n){const r=Math.sign(e[0]);return yS(e,t,n,uS(r),sS(r))}function xS(e,t,n,r){return yS(e,t,n,fS(r),fS(1/r))}function wS(e,t,n,r){return yS(e,t,n,lS(r),cS(r))}function _S(e){return 1+~~(new Date(e).getMonth()/3)}function kS(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ES(e){return null!=e?ZE(e)?e:[e]:[]}function SS(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function AS(e){return"function"==typeof e}function CS(e,t,n){n=n||{},t=ES(t)||[];const r=[],i=[],o={},a=n.comparator||MS;return ES(e).forEach(((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=AS(e)?e:WE(e,null,n)),(LE(e)||[]).forEach((e=>o[e]=1)))})),0===i.length?null:RE(a(i,r),Object.keys(o))}const DS=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),MS=(e,t)=>1===e.length?FS(e[0],t[0]):NS(e,t,e.length),FS=(e,t)=>function(n,r){return DS(e(n),e(r))*t},NS=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=DS(o(r),o(i));return a*t[s]});function OS(e){return AS(e)?e:()=>e}function $S(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function TS(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function zS(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function RS(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const PS=Object.prototype.hasOwnProperty;function LS(e,t){return PS.call(e,t)}const BS={};function IS(e){let t,n={};function r(e){return LS(n,e)&&n[e]!==BS}const i={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++i.size,n[e]===BS&&--i.empty),n[e]=t,this},delete:function(e){return r(e)&&(--i.size,++i.empty,n[e]=BS),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(e){return arguments.length?(t=e,i):t},clean:function(){const e={};let r=0;for(const i in n){const o=n[i];o===BS||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function jS(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],l=oS(e);l<u&&(s=u,u=l,l=s),s=Math.abs(t-u);const c=Math.abs(l-t);return s<c&&s<=a?r:c<=a?i:o}function US(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),TS(r,n)}function qS(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function WS(e){return"boolean"==typeof e}function HS(e){return"[object Date]"===Object.prototype.toString.call(e)}function VS(e){return e&&AS(e[Symbol.iterator])}function GS(e){return"number"==typeof e}function YS(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function XS(e){return"string"==typeof e}function QS(e,t,n){e&&(e=t?ES(e).map((e=>e.replace(/\\(.)/g,"$1"))):ES(e));const r=e&&e.length,i=n&&n.get||BE,o=e=>i(t?[e]:qE(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return RE(a,e,"key")}function JS(e,t){const n=e[0],r=oS(e),i=+t;return i?1===i?r:n+i*(r-n):n}function KS(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>LS(t,e)||LS(n,e),get:e=>LS(t,e)?t[e]:LS(n,e)?o(e,n[e]):void 0,set:(e,n)=>LS(t,e)?t[e]=n:o(e,n)}}function ZS(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function eA(e,t){let n="";for(;--t>=0;)n+=e;return n}function tA(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?eA(i,a)+o:"center"===r?eA(i,~~(a/2))+o+eA(i,Math.ceil(a/2)):o+eA(i,a)}function nA(e){return e&&oS(e)-e[0]||0}function rA(e){return ZE(e)?"["+e.map(rA)+"]":eS(e)||XS(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function iA(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const oA=e=>GS(e)||HS(e)?e:Date.parse(e);function aA(e,t){return t=t||oA,null==e||""===e?null:t(e)}function sA(e){return null==e||""===e?null:e+""}function uA(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function lA(e,t,n,r){const i=null!=r?r:"",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function cA(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}t(zE,"zoomSymlog",(function(){return wS})),t(zE,"zoomPow",(function(){return xS})),t(zE,"zoomLog",(function(){return bS})),t(zE,"zoomLinear",(function(){return vS})),t(zE,"zero",(function(){return GE})),t(zE,"writeConfig",(function(){return rS})),t(zE,"visitArray",(function(){return cA})),t(zE,"utcquarter",(function(){return kS})),t(zE,"truthy",(function(){return XE})),t(zE,"truncate",(function(){return lA})),t(zE,"toString",(function(){return sA})),t(zE,"toSet",(function(){return uA})),t(zE,"toNumber",(function(){return aS})),t(zE,"toDate",(function(){return aA})),t(zE,"toBoolean",(function(){return iA})),t(zE,"stringValue",(function(){return rA})),t(zE,"splitAccessPath",(function(){return qE})),t(zE,"span",(function(){return nA})),t(zE,"repeat",(function(){return eA})),t(zE,"quarter",(function(){return _S})),t(zE,"peek",(function(){return oS})),t(zE,"panSymlog",(function(){return gS})),t(zE,"panPow",(function(){return mS})),t(zE,"panLog",(function(){return pS})),t(zE,"panLinear",(function(){return hS})),t(zE,"pad",(function(){return tA})),t(zE,"one",(function(){return YE})),t(zE,"mergeConfig",(function(){return nS})),t(zE,"merge",(function(){return ZS})),t(zE,"lruCache",(function(){return KS})),t(zE,"logger",(function(){return KE})),t(zE,"lerp",(function(){return JS})),t(zE,"key",(function(){return QS})),t(zE,"isString",(function(){return XS})),t(zE,"isRegExp",(function(){return YS})),t(zE,"isObject",(function(){return eS})),t(zE,"isNumber",(function(){return GS})),t(zE,"isIterable",(function(){return VS})),t(zE,"isFunction",(function(){return AS})),t(zE,"isDate",(function(){return HS})),t(zE,"isBoolean",(function(){return WS})),t(zE,"isArray",(function(){return ZE})),t(zE,"inrange",(function(){return qS})),t(zE,"inherits",(function(){return US})),t(zE,"identity",(function(){return VE})),t(zE,"id",(function(){return HE})),t(zE,"hasOwnProperty",(function(){return LS})),t(zE,"flush",(function(){return jS})),t(zE,"field",(function(){return WE})),t(zE,"fastmap",(function(){return IS})),t(zE,"falsy",(function(){return QE})),t(zE,"extentIndex",(function(){return RS})),t(zE,"extent",(function(){return zS})),t(zE,"extend",(function(){return TS})),t(zE,"error",(function(){return UE})),t(zE,"debounce",(function(){return $S})),t(zE,"constant",(function(){return OS})),t(zE,"compare",(function(){return CS})),t(zE,"clampRange",(function(){return SS})),t(zE,"ascending",(function(){return DS})),t(zE,"array",(function(){return ES})),t(zE,"accessorName",(function(){return PE})),t(zE,"accessorFields",(function(){return LE})),t(zE,"accessor",(function(){return RE})),t(zE,"Warn",(function(){return 2})),t(zE,"None",(function(){return 0})),t(zE,"Info",(function(){return 3})),t(zE,"Error",(function(){return 1})),t(zE,"Debug",(function(){return 4})),n(TE,zE);var fA={};const dA=/^([A-Za-z]+:)?\/\//,hA=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,pA=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,mA="file://";async function gA(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function yA(e,t){t=TS({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=hA.test(e.replace(pA,""));null!=e&&"string"==typeof e&&s||UE("Sanitize failure, invalid URI: "+rA(e));const u=dA.test(e);return(a=t.baseURL)&&!u&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith(mA))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(mA.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function vA(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):bA}async function bA(){UE("No file system access.")}function xA(e){return e?async function(t,n){const r=TS({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?AS(o[i])?o[i]():o.text():UE(o.status+""+o.statusText)}:wA}async function wA(){UE("No HTTP fetch method available.")}const _A=e=>!(Number.isNaN(+e)||e instanceof Date),kA={boolean:iA,integer:aS,number:aS,date:aA,string:sA,unknown:VE},EA=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>_A(e)&&Number.isInteger(+e),_A,e=>!Number.isNaN(Date.parse(e))],SA=["boolean","integer","number","date"];function AA(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=EA.length,i=EA.map(((e,t)=>t+1));for(let a,s,u=0,l=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&(null!=(o=s)&&o==o)&&!EA[a](s)&&(i[a]=0,++l,l===EA.length))return"string";var o;return SA[i.reduce(((e,t)=>0===e?t:e),0)-1]}function CA(e,t){return t.reduce(((t,n)=>(t[n]=AA(e,n),t)),{})}function DA(e){const t=function(t,n){const r={delimiter:e};return MA(t,n?TS(n,r):r)};return t.responseType="text",t}function MA(e,t){return t.header&&(e=t.header.map(rA).join(t.delimiter)+"\n"+e),ad(t.delimiter).parse(e+"")}MA.responseType="text";for(var FA=function(e){var t,n,r=LA(e),i=r[0],o=r[1],a=new TA(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=$A[e.charCodeAt(n)]<<18|$A[e.charCodeAt(n+1)]<<12|$A[e.charCodeAt(n+2)]<<6|$A[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=$A[e.charCodeAt(n)]<<2|$A[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=$A[e.charCodeAt(n)]<<10|$A[e.charCodeAt(n+1)]<<4|$A[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},NA=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(BA(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(OA[t>>2]+OA[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(OA[t>>10]+OA[t>>4&63]+OA[t<<2&63]+"="));return i.join("")},OA=[],$A=[],TA="undefined"!=typeof Uint8Array?Uint8Array:Array,zA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",RA=0,PA=zA.length;RA<PA;++RA)OA[RA]=zA[RA],$A[zA.charCodeAt(RA)]=RA;function LA(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function BA(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(OA[(i=r)>>18&63]+OA[i>>12&63]+OA[i>>6&63]+OA[63&i]);return o.join("")}$A["-".charCodeAt(0)]=62,$A["_".charCodeAt(0)]=63;var IA=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},jA=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m},UA="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,qA=VA,WA=2147483647;function HA(e){if(e>WA)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,VA.prototype),t}function VA(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return XA(e)}return GA(e,t,n)}function GA(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!VA.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|ZA(e,t),r=HA(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(SC(e,Uint8Array)){var t=new Uint8Array(e);return JA(t.buffer,t.byteOffset,t.byteLength)}return QA(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(SC(e,ArrayBuffer)||e&&SC(e.buffer,ArrayBuffer))return JA(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(SC(e,SharedArrayBuffer)||e&&SC(e.buffer,SharedArrayBuffer)))return JA(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return VA.from(r,t,n);var i=function(e){if(VA.isBuffer(e)){var t=0|KA(e.length),n=HA(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||AC(e.length)?HA(0):QA(e);if("Buffer"===e.type&&Array.isArray(e.data))return QA(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return VA.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function YA(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function XA(e){return YA(e),HA(e<0?0:0|KA(e))}function QA(e){for(var t=e.length<0?0:0|KA(e.length),n=HA(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function JA(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,VA.prototype),r}function KA(e){if(e>=WA)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+WA.toString(16)+" bytes");return 0|e}function ZA(e,t){if(VA.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||SC(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return _C(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return kC(e).length;default:if(i)return r?-1:_C(e).length;t=(""+t).toLowerCase(),i=!0}}function eC(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return pC(this,t,n);case"utf8":case"utf-8":return cC(this,t,n);case"ascii":return dC(this,t,n);case"latin1":case"binary":return hC(this,t,n);case"base64":return lC(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return mC(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function tC(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function nC(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),AC(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=VA.from(t,r)),VA.isBuffer(t))return 0===t.length?-1:rC(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):rC(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function rC(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function iC(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(AC(s))return a;e[n+a]=s}return a}function oC(e,t,n,r){return EC(_C(t,e.length-n),e,n,r)}function aC(e,t,n,r){return EC(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function sC(e,t,n,r){return EC(kC(t),e,n,r)}function uC(e,t,n,r){return EC(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function lC(e,t,n){return 0===t&&n===e.length?NA(e):NA(e.slice(t,n))}function cC(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=fC)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=fC));return n}(r)}VA.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),VA.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(VA.prototype,"parent",{enumerable:!0,get:function(){if(VA.isBuffer(this))return this.buffer}}),Object.defineProperty(VA.prototype,"offset",{enumerable:!0,get:function(){if(VA.isBuffer(this))return this.byteOffset}}),VA.poolSize=8192,VA.from=function(e,t,n){return GA(e,t,n)},Object.setPrototypeOf(VA.prototype,Uint8Array.prototype),Object.setPrototypeOf(VA,Uint8Array),VA.alloc=function(e,t,n){return function(e,t,n){return YA(e),e<=0?HA(e):void 0!==t?"string"==typeof n?HA(e).fill(t,n):HA(e).fill(t):HA(e)}(e,t,n)},VA.allocUnsafe=function(e){return XA(e)},VA.allocUnsafeSlow=function(e){return XA(e)},VA.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==VA.prototype},VA.compare=function(e,t){if(SC(e,Uint8Array)&&(e=VA.from(e,e.offset,e.byteLength)),SC(t,Uint8Array)&&(t=VA.from(t,t.offset,t.byteLength)),!VA.isBuffer(e)||!VA.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},VA.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},VA.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return VA.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=VA.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(SC(o,Uint8Array))i+o.length>r.length?VA.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!VA.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},VA.byteLength=ZA,VA.prototype._isBuffer=!0,VA.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)tC(this,t,t+1);return this},VA.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)tC(this,t,t+3),tC(this,t+1,t+2);return this},VA.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)tC(this,t,t+7),tC(this,t+1,t+6),tC(this,t+2,t+5),tC(this,t+3,t+4);return this},VA.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?cC(this,0,e):eC.apply(this,arguments)},VA.prototype.toLocaleString=VA.prototype.toString,VA.prototype.equals=function(e){if(!VA.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===VA.compare(this,e)},VA.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},UA&&(VA.prototype[UA]=VA.prototype.inspect),VA.prototype.compare=function(e,t,n,r,i){if(SC(e,Uint8Array)&&(e=VA.from(e,e.offset,e.byteLength)),!VA.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},VA.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},VA.prototype.indexOf=function(e,t,n){return nC(this,e,t,n,!0)},VA.prototype.lastIndexOf=function(e,t,n){return nC(this,e,t,n,!1)},VA.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return iC(this,e,t,n);case"utf8":case"utf-8":return oC(this,e,t,n);case"ascii":case"latin1":case"binary":return aC(this,e,t,n);case"base64":return sC(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uC(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},VA.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var fC=4096;function dC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function hC(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function pC(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=CC[e[o]];return i}function mC(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function gC(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function yC(e,t,n,r,i,o){if(!VA.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function vC(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function bC(e,t,n,r,i){return t=+t,n>>>=0,i||vC(e,0,n,4),jA(e,t,n,r,23,4),n+4}function xC(e,t,n,r,i){return t=+t,n>>>=0,i||vC(e,0,n,8),jA(e,t,n,r,52,8),n+8}VA.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,VA.prototype),r},VA.prototype.readUintLE=VA.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||gC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},VA.prototype.readUintBE=VA.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||gC(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},VA.prototype.readUint8=VA.prototype.readUInt8=function(e,t){return e>>>=0,t||gC(e,1,this.length),this[e]},VA.prototype.readUint16LE=VA.prototype.readUInt16LE=function(e,t){return e>>>=0,t||gC(e,2,this.length),this[e]|this[e+1]<<8},VA.prototype.readUint16BE=VA.prototype.readUInt16BE=function(e,t){return e>>>=0,t||gC(e,2,this.length),this[e]<<8|this[e+1]},VA.prototype.readUint32LE=VA.prototype.readUInt32LE=function(e,t){return e>>>=0,t||gC(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},VA.prototype.readUint32BE=VA.prototype.readUInt32BE=function(e,t){return e>>>=0,t||gC(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},VA.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||gC(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},VA.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||gC(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},VA.prototype.readInt8=function(e,t){return e>>>=0,t||gC(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},VA.prototype.readInt16LE=function(e,t){e>>>=0,t||gC(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},VA.prototype.readInt16BE=function(e,t){e>>>=0,t||gC(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},VA.prototype.readInt32LE=function(e,t){return e>>>=0,t||gC(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},VA.prototype.readInt32BE=function(e,t){return e>>>=0,t||gC(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},VA.prototype.readFloatLE=function(e,t){return e>>>=0,t||gC(e,4,this.length),IA(this,e,!0,23,4)},VA.prototype.readFloatBE=function(e,t){return e>>>=0,t||gC(e,4,this.length),IA(this,e,!1,23,4)},VA.prototype.readDoubleLE=function(e,t){return e>>>=0,t||gC(e,8,this.length),IA(this,e,!0,52,8)},VA.prototype.readDoubleBE=function(e,t){return e>>>=0,t||gC(e,8,this.length),IA(this,e,!1,52,8)},VA.prototype.writeUintLE=VA.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||yC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},VA.prototype.writeUintBE=VA.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||yC(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},VA.prototype.writeUint8=VA.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,1,255,0),this[t]=255&e,t+1},VA.prototype.writeUint16LE=VA.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},VA.prototype.writeUint16BE=VA.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},VA.prototype.writeUint32LE=VA.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},VA.prototype.writeUint32BE=VA.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},VA.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);yC(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},VA.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);yC(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},VA.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},VA.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},VA.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},VA.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},VA.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||yC(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},VA.prototype.writeFloatLE=function(e,t,n){return bC(this,e,t,!0,n)},VA.prototype.writeFloatBE=function(e,t,n){return bC(this,e,t,!1,n)},VA.prototype.writeDoubleLE=function(e,t,n){return xC(this,e,t,!0,n)},VA.prototype.writeDoubleBE=function(e,t,n){return xC(this,e,t,!1,n)},VA.prototype.copy=function(e,t,n,r){if(!VA.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},VA.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!VA.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=VA.isBuffer(e)?e:VA.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var wC=/[^+/0-9A-Za-z-_]/g;function _C(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function kC(e){return FA(function(e){if((e=(e=e.split("=")[0]).trim().replace(wC,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function EC(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function SC(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function AC(e){return e!=e}var CC=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),DC=qA;function MC(e,t){const n=t&&t.property?WE(t.property):VE;return!eS(e)||(r=e,"function"==typeof DC&&AS(DC.isBuffer)&&DC.isBuffer(r))?n(JSON.parse(e)):function(e,t){!ZE(e)&&VS(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}MC.responseType="json";var FC=function(e){return e},NC=function(e){if(null==e)return FC;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;u<l;)c[u]=e[u],++u;return c}},OC=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return $C(e,t)}))}:$C(e,t)};function $C(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=TC(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function TC(e,t){var n=NC(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}var zC=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},RC=function(e){return TC(e,PC.apply(this,arguments))};function PC(e,t,n){var r,i,o;if(arguments.length>1)r=LC(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:zC(e,r)}}function LC(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}const BC={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function IC(e,t){let n,r,i,o;return e=MC(e,t),t&&t.feature?(n=OC,i=t.feature):t&&t.mesh?(n=RC,i=t.mesh,o=BC[t.filter]):UE("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):UE("Invalid TopoJSON object: "+i),r&&r.features||[r]}IC.responseType="json";const jC={dsv:MA,csv:DA(","),tsv:DA("\t"),json:MC,topojson:IC};function UC(e,t){return arguments.length>1?(jC[e]=t,this):LS(jC,e)?jC[e]:null}function qC(e){const t=UC(e);return t&&t.responseType||"text"}var WC={};const HC="year",VC="quarter",GC="month",YC="week",XC="date",QC="day",JC="dayofyear",KC="hours",ZC="minutes",eD="seconds",tD="milliseconds",nD=[HC,VC,GC,YC,XC,QC,JC,KC,ZC,eD,tD],rD=nD.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function iD(e){const t=ES(e).slice(),n={};t.length||UE("Missing time unit."),t.forEach((e=>{LS(rD,e)?n[e]=1:UE("Invalid time unit: ".concat(e,"."))}));return(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&UE("Incompatible time units: ".concat(e)),t.sort(((e,t)=>rD[e]-rD[t])),t}const oD={[HC]:"%Y ",[VC]:"Q%q ",[GC]:"%b ",[XC]:"%d ",[YC]:"W%U ",[QC]:"%a ",[JC]:"%j ",[KC]:"%H:00",[ZC]:"00:%M",[eD]:":%S",[tD]:".%L",["".concat(HC,"-").concat(GC)]:"%Y-%m ",["".concat(HC,"-").concat(GC,"-").concat(XC)]:"%Y-%m-%d ",["".concat(KC,"-").concat(ZC)]:"%H:%M"};function aD(e,t){const n=TS({},oD,t),r=iD(e),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const sD=new Date;function uD(e){return sD.setFullYear(e),sD.setMonth(0),sD.setDate(1),sD.setHours(0,0,0,0),sD}function lD(e){return fD(new Date(e))}function cD(e){return dD(new Date(e))}function fD(e){return _v.count(uD(e.getFullYear())-1,e)}function dD(e){return Ev.count(uD(e.getFullYear())-1,e)}function hD(e){return uD(e).getDay()}function pD(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function mD(e){return yD(new Date(e))}function gD(e){return vD(new Date(e))}function yD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return zv.count(t-1,e)}function vD(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Pv.count(t-1,e)}function bD(e){return sD.setTime(Date.UTC(e,0,1)),sD.getUTCDay()}function xD(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function wD(e,t,n,r,i){const o=t||1,a=oS(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),u=new Date,l=uA(e),c=l.year?s(HC):OS(2012),f=l.month?s(GC):l.quarter?s(VC):GE,d=l.week&&l.day?s(QC,1,"weekday"):l.week?s(YC,1):l.day?s(QC,1):l.date?s(XC,1):l.dayofyear?s(JC,1):YE,h=l.hours?s(KC):GE,p=l.minutes?s(ZC):GE,m=l.seconds?s(eD):GE,g=l.milliseconds?s(tD):GE;return function(e){u.setTime(+e);const t=c(u);return i(t,f(u),d(u,t),h(u),p(u),m(u),g(u))}}function _D(e,t,n){return t+7*e-(n+6)%7}const kD={[HC]:e=>e.getFullYear(),[VC]:e=>Math.floor(e.getMonth()/3),[GC]:e=>e.getMonth(),[XC]:e=>e.getDate(),[KC]:e=>e.getHours(),[ZC]:e=>e.getMinutes(),[eD]:e=>e.getSeconds(),[tD]:e=>e.getMilliseconds(),[JC]:e=>fD(e),[YC]:e=>dD(e),weekday:(e,t)=>_D(dD(e),e.getDay(),hD(t)),[QC]:(e,t)=>_D(1,e.getDay(),hD(t))},ED={[VC]:e=>3*e,[YC]:(e,t)=>_D(e,0,hD(t))};function SD(e,t){return wD(e,t||1,kD,ED,pD)}const AD={[HC]:e=>e.getUTCFullYear(),[VC]:e=>Math.floor(e.getUTCMonth()/3),[GC]:e=>e.getUTCMonth(),[XC]:e=>e.getUTCDate(),[KC]:e=>e.getUTCHours(),[ZC]:e=>e.getUTCMinutes(),[eD]:e=>e.getUTCSeconds(),[tD]:e=>e.getUTCMilliseconds(),[JC]:e=>yD(e),[YC]:e=>vD(e),[QC]:(e,t)=>_D(1,e.getUTCDay(),bD(t)),weekday:(e,t)=>_D(vD(e),e.getUTCDay(),bD(t))},CD={[VC]:e=>3*e,[YC]:(e,t)=>_D(e,0,bD(t))};function DD(e,t){return wD(e,t||1,AD,CD,xD)}const MD={[HC]:Ov,[VC]:Nv.every(3),[GC]:Nv,[YC]:Ev,[XC]:_v,[QC]:_v,[JC]:_v,[KC]:wv,[ZC]:xv,[eD]:bv,[tD]:fv},FD={[HC]:Hv,[VC]:Wv.every(3),[GC]:Wv,[YC]:Pv,[XC]:zv,[QC]:zv,[JC]:zv,[KC]:Tv,[ZC]:$v,[eD]:bv,[tD]:fv};function ND(e){return MD[e]}function OD(e){return FD[e]}function $D(e,t,n){return e?e.offset(t,n):void 0}function TD(e,t,n){return $D(ND(e),t,n)}function zD(e,t,n){return $D(OD(e),t,n)}function RD(e,t,n,r){return e?e.range(t,n,r):void 0}function PD(e,t,n,r){return RD(ND(e),t,n,r)}function LD(e,t,n,r){return RD(OD(e),t,n,r)}const BD=1e3,ID=6e4,jD=36e5,UD=864e5,qD=2592e6,WD=31536e6,HD=[HC,GC,XC,KC,ZC,eD,tD],VD=HD.slice(0,-1),GD=VD.slice(0,-1),YD=GD.slice(0,-1),XD=YD.slice(0,-1),QD=[HC,GC],JD=[HC],KD=[[VD,1,BD],[VD,5,5e3],[VD,15,15e3],[VD,30,3e4],[GD,1,ID],[GD,5,3e5],[GD,15,9e5],[GD,30,18e5],[YD,1,jD],[YD,3,108e5],[YD,6,216e5],[YD,12,432e5],[XD,1,UD],[[HC,YC],1,6048e5],[QD,1,qD],[QD,3,7776e6],[JD,1,WD]];function ZD(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(nA(t))/n;let i,o,a=Hg((e=>e[2])).right(KD,r);return a===KD.length?(i=JD,o=dy(t[0]/WD,t[1]/WD,n)):a?(a=KD[r/KD[a-1][2]<KD[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=HD,o=Math.max(dy(t[0],t[1],n),1)),{units:i,step:o}}function eM(e){const t={};return n=>t[n]||(t[n]=e(n))}function tM(e){const t=eM(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){const n=Cy(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan:function(e,r,i,o){o=Cy(null==o?",f":o);const a=dy(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=Iy(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=jy(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=By(a))||(o.precision=u-2*("%"===o.type))}return t(o)}}}let nM,rM;function iM(){return nM=tM({format:Ny,formatPrefix:Oy})}function oM(e){return tM(Ly(e))}function aM(e){return arguments.length?nM=oM(e):nM}function sM(e,t,n){eS(n=n||{})||UE("Invalid time multi-format specifier: ".concat(n));const r=t(eD),i=t(ZC),o=t(KC),a=t(XC),s=t(YC),u=t(GC),l=t(VC),c=t(HC),f=e(n.milliseconds||".%L"),d=e(n.seconds||":%S"),h=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),m=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),y=e(n.month||"%B"),v=e(n.quarter||"%B"),b=e(n.year||"%Y");return e=>(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?p:u(e)<e?s(e)<e?m:g:c(e)<e?l(e)<e?y:v:b)(e)}function uM(e){const t=eM(e.format),n=eM(e.utcFormat);return{timeFormat:e=>XS(e)?t(e):sM(t,ND,e),utcFormat:e=>XS(e)?n(e):sM(n,OD,e),timeParse:eM(e.parse),utcParse:eM(e.utcParse)}}function lM(){return rM=uM({format:nb,parse:rb,utcFormat:ib,utcParse:ob})}function cM(e){return uM(eb(e))}function fM(e){return arguments.length?rM=cM(e):rM}t(WC,"week",(function(){return cD})),t(WC,"utcweek",(function(){return gD})),t(WC,"utcdayofyear",(function(){return mD})),t(WC,"utcSequence",(function(){return LD})),t(WC,"utcOffset",(function(){return zD})),t(WC,"utcInterval",(function(){return OD})),t(WC,"utcFloor",(function(){return DD})),t(WC,"timeUnits",(function(){return iD})),t(WC,"timeUnitSpecifier",(function(){return aD})),t(WC,"timeSequence",(function(){return PD})),t(WC,"timeOffset",(function(){return TD})),t(WC,"timeInterval",(function(){return ND})),t(WC,"timeFloor",(function(){return SD})),t(WC,"timeBin",(function(){return ZD})),t(WC,"dayofyear",(function(){return lD})),t(WC,"YEAR",(function(){return HC})),t(WC,"WEEK",(function(){return YC})),t(WC,"TIME_UNITS",(function(){return nD})),t(WC,"SECONDS",(function(){return eD})),t(WC,"QUARTER",(function(){return VC})),t(WC,"MONTH",(function(){return GC})),t(WC,"MINUTES",(function(){return ZC})),t(WC,"MILLISECONDS",(function(){return tD})),t(WC,"HOURS",(function(){return KC})),t(WC,"DAYOFYEAR",(function(){return JC})),t(WC,"DAY",(function(){return QC})),t(WC,"DATE",(function(){return XC})),iM(),lM();const dM=(e,t)=>TS({},e,t);function hM(e,t){const n=e?oM(e):aM(),r=t?cM(t):fM();return dM(n,r)}function pM(e,t){const n=arguments.length;return n&&2!==n&&UE("defaultLocale expects either zero or two arguments."),n?dM(aM(e),fM(t)):dM(aM(),fM())}function mM(){return iM(),lM(),pM()}var gM=function(e,t,n,r){const i=UC((t=t||{}).type||"json");return i||UE("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=fM();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,l,c,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=CA(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!kA[i])throw Error("Illegal format pattern: "+e+":"+i);return kA[i]}));for(s=0,l=e.length,c=f.length;s<l;++s)for(o=e[s],u=0;u<c;++u)a=f[u],o[a]=d[u](o[a])}(e,t.parse,n,r),LS(e,"columns")&&delete e.columns,e};const yM=function(e,t){return n=>({options:n||{},sanitize:yA,load:gA,fileAccess:!!t,file:vA(t),http:xA(e)})}("undefined"!=typeof fetch&&fetch,null);function vM(e){const t=e||VE,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function bM(e,t){try{await t(e)}catch(t){e.error(t)}}t(fA,"loader",(function(){return yM})),t(fA,"read",(function(){return gM})),t(fA,"typeParsers",(function(){return kA})),t(fA,"inferTypes",(function(){return CA})),t(fA,"inferType",(function(){return AA})),t(fA,"responseType",(function(){return qC})),t(fA,"formats",(function(){return UC})),t(fA,"format",(function(){return jC}));const xM=Symbol("vega_id");let wM=1;function _M(e){return!(!e||!kM(e))}function kM(e){return e[xM]}function EM(e,t){return e[xM]=t,e}function SM(e){const t=e===Object(e)?e:{data:e};return kM(t)?t:EM(t,wM++)}function AM(e){return CM(e,SM({}))}function CM(e,t){for(const n in e)t[n]=e[n];return t}function DM(e,t){return EM(t,kM(e))}function MM(e,t){return e?t?(n,r)=>e(n,r)||kM(t(n))-kM(t(r)):(t,n)=>e(t,n)||kM(t)-kM(n):null}function FM(e){return e&&e.constructor===NM}function NM(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:NM,insert:function(t){const n=ES(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove:function(e){const n=AS(e)?r:t,i=ES(e),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify:function(e,t,r){const o={field:t,value:OS(r)};return AS(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return AS(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return o=e,this},reflow:function(){return a=!0,this},pulse:function(s,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[kM(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[kM(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach((e=>{p(e)&&(l[kM(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=kM(m),l[g]?l[g]=1:s.add.push(SM(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[kM(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[kM(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[kM(m)],g>0&&(y(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach((e=>{p(e)&&l[kM(e)]>0&&y(e,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter((e=>l[kM(e)]>0)):u.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const OM="_:mod:_";function $M(){Object.defineProperty(this,OM,{writable:!0,value:{}})}$M.prototype={set:function(e,t,n,r){const i=this,o=i[e],a=i["_:mod:_"];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=ZE(n)?1+n.length:-1),i},modified:function(e,t){const n=this["_:mod:_"];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(ZE(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this["_:mod:_"]={},this}};let TM=0;const zM=new $M;function RM(e,t,n,r){this.id=++TM,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function PM(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}RM.prototype={targets:function(){return this._targets||(this._targets=vM(HE))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:PM(1),modified:PM(2),parameters:function(e,t,n){t=!1!==t;const r=this._argval=this._argval||new $M,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(e,n,a)=>{a instanceof RM?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)ES(s).forEach((e=>{e instanceof RM?e!==this&&(e.targets().add(this),o.push(e)):UE("Pulse parameters must be operator instances.")})),this.source=s;else if(ZE(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall:function(e){const t=this._argval||zM,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach:function(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let LM=0;function BM(e,t,n){this.id=++LM,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function IM(e,t,n){return new BM(e,t,n)}BM.prototype={_filter:XE,_apply:VE,targets:function(){return this._targets||(this._targets=vM(HE))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){const t=IM(e);return this.targets().add(t),t},apply:function(e){const t=IM(null,e);return this.targets().add(t),t},merge:function(){const e=IM();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){const t=IM();return this.targets().add(IM(null,null,$S(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){let n=!1;return e.targets().add(IM(null,null,(()=>n=!0))),t.targets().add(IM(null,null,(()=>n=!1))),this.filter((()=>n))},detach:function(){this._filter=XE,this._targets=null}};const jM={skip:!0};function UM(e,t,n,r,i,o){const a=TS({},o,jM);let s,u;AS(n)||(n=OS(n)),void 0===r?s=t=>e.touch(n(t)):AS(r)?(u=new RM(null,r,i,!1),s=t=>{u.evaluate(t);const r=n(t),i=u.value;FM(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function qM(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new RM(null,function(e,t){return t=AS(t)?t:OS(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const WM={};function HM(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function VM(e,t){const n=[];return cA(e,t,(e=>n.push(e))),n}function GM(e,t){const n={};return e.visit(t,(e=>{n[kM(e)]=1})),e=>n[kM(e)]?null:e}function YM(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function XM(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let e=0;e<o;++e){const r=n[e];if(r.stamp===t){if(r.fields){const e=i.fields||(i.fields={});for(const t in r.fields)e[t]=1}r.changed(i.ADD)&&(a|=i.ADD),r.changed(i.REM)&&(a|=i.REM),r.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function QM(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}HM.prototype={StopPropagation:WM,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new HM(this.dataflow).init(this,e)},clone:function(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new HM(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init:function(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,GM(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){const t=this.fields||(this.fields={});return ZE(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified:function(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?ZE(e)?e.some((e=>n[e])):n[e]:!!n)},filter:function(e,t){const n=this;return 1&e&&(n.addF=YM(n.addF,t)),2&e&&(n.remF=YM(n.remF,t)),4&e&&(n.modF=YM(n.modF,t)),16&e&&(n.srcF=YM(n.srcF,t)),n},materialize:function(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=VM(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=VM(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=VM(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){const n=this,r=t;if(16&e)return cA(n.source,n.srcF,r),n;1&e&&cA(n.add,n.addF,r),2&e&&cA(n.rem,n.remF,r),4&e&&cA(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||cA(i,e?GM(n,5):n.srcF,r)}return n}},US(XM,HM,{fork:function(e){const t=new HM(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed:function(e){return this.changes&e},modified:function(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ZE(e)?e.some((e=>n[e])):n[e]:0},filter:function(){UE("MultiPulse does not support filtering.")},materialize:function(){UE("MultiPulse does not support materialization.")},visit:function(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const JM={skip:!1,force:!1};function KM(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),ZM(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,ZM(e,r,t,n)}(t,0,e)):r=n,r}}}function ZM(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function eF(){this.logger(KE()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=pM();try{this._loader=yM()}catch(e){}this._touched=vM(HE),this._input={},this._pulse=null,this._heap=KM(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function tF(e){return function(){return this._log[e].apply(this,arguments)}}function nF(e,t){RM.call(this,e,null,t)}eF.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:tF("error"),warn:tF("warn"),info:tF("info"),debug:tF("debug"),logLevel:tF("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof RM?i=e:e&&e.prototype instanceof RM?i=new e:AS(e)?i=new RM(null,e):(o=0,i=new RM(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&UE("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||JM);const r=new HM(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||JM;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||JM;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:NM,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return gM(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(XE).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:qC(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=IM(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):ES(e);const u=s.length;for(let e=0;e<u;++e)s[e].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof RM?qM:UM)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return QM(r);if(r._pending&&await r._pending,t&&await bM(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new HM(r,o,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=vM(HE);let a,s,u,l=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=WM),s!==WM&&a._targets&&a._targets.forEach((e=>r._enqueue(e))),++l):r._enqueue(a,!0)}catch(e){r._heap.clear(),u=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${l} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await bM(r,e[t].callback)}return n&&await bM(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?QM(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&ZE(n)?new XM(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==WM&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},US(nF,RM,{run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate:function(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});const rF={};function iF(e){const t=oF(e);return t&&t.Definition||null}function oF(e){return e=e&&e.toLowerCase(),LS(rF,e)?rF[e]:null}var aF={},sF={};function*uF(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function lF(e,t,n){const r=Float64Array.from(uF(e,n));return r.sort(Wg),t.map((e=>ny(r,e)))}function cF(e,t){return lF(e,[.25,.5,.75],t)}function fF(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,o+=n*(t-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=cF(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function dF(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,l,c,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,l=0,c=e.steps.length;l<c&&e.steps[l]<u;++l);o=e.steps[Math.max(0,l-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(l=0,c=i.length;l<c;++l)u=o/i[l],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+m)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var hF=Math.random;function pF(e){hF=e}function mF(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(uF(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(hF()*o)];c[l]=s/o}return c.sort(Wg),[ty(c,n/2),ty(c,1-n/2)]}function gF(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,l=r(e[0]),c=l,f=l+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(c=(l+c)/2;s<u;++s)o[s]=c;f=a+t,l=a}c=a}for(c=(l+c)/2;s<u;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}function yF(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function vF(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min:function(e){return arguments.length?(n=e||0,i=r-n,o):n},max:function(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:function(){return n+Math.floor(i*hF())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},cdf:function(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN}};return o.min(e).max(t)}const bF=Math.sqrt(2*Math.PI),xF=Math.SQRT2;let wF=NaN;function _F(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(wF==wF)i=wF,wF=NaN;else{do{i=2*hF()-1,o=2*hF()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,wF=o*r}return e+i*t}function kF(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*bF)}function EF(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function SF(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*xF*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function AF(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>_F(n,r),pdf:e=>kF(e,n,r),cdf:e=>EF(e,n,r),icdf:e=>SF(e,n,r)};return i.mean(e).stdev(t)}function CF(e,t){const n=AF();let r=0;const i={data:function(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=fF(e)),i):t},sample:function(){return e[~~(hF()*r)]+t*n.sample()},pdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(e)}function DF(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+_F()*t)}function MF(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*bF*e)}function FF(e,t,n){return EF(Math.log(e),t,n)}function NF(e,t,n){return Math.exp(SF(e,t,n))}function OF(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>DF(n,r),pdf:e=>MF(e,n,r),cdf:e=>FF(e,n,r),icdf:e=>NF(e,n,r)};return i.mean(e).stdev(t)}function $F(e,t){let n,r=0;function i(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}const o={weights:function(e){return arguments.length?(n=i(t=e||[]),o):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),o.weights(t)):e},sample:function(){const t=hF();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function TF(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*hF()}function zF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function RF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function PF(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function LF(e,t){let n,r;const i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>TF(n,r),pdf:e=>zF(e,n,r),cdf:e=>RF(e,n,r),icdf:e=>PF(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function BF(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function IF(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,l,c=0,f=0,d=0;for(l of e)o[c]=s=+t(l),a[c]=u=+n(l),++c,f+=(s-f)/c,d+=(u-d)/c;for(c=0;c<i;++c)o[c]-=f,a[c]-=d;return[o,a,f,d]}function jF(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function UF(e,t,n,r,i){let o=0,a=0;return jF(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function qF(e,t,n){let r=0,i=0,o=0,a=0,s=0;jF(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=BF(r,i,o,a),l=e=>u[0]+u[1]*e;return{coef:u,predict:l,rSquared:UF(e,t,n,i,l)}}function WF(e,t,n){let r=0,i=0,o=0,a=0,s=0;jF(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=BF(r,i,o,a),l=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:l,rSquared:UF(e,t,n,i,l)}}function HF(e,t,n){const[r,i,o,a]=IF(e,t,n);let s,u,l,c=0,f=0,d=0,h=0,p=0;jF(e,t,n,((e,t)=>{s=r[p++],u=Math.log(t),l=s*t,c+=(t*u-c)/p,f+=(l-f)/p,d+=(l*u-d)/p,h+=(s*l-h)/p}));const[m,g]=BF(f/a,c/a,d/a,h/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:UF(e,t,n,a,y)}}function VF(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;jF(e,t,n,((e,t)=>{const n=Math.log(e),l=Math.log(t);++u,r+=(n-r)/u,i+=(l-i)/u,o+=(n*l-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const l=BF(r,i,o,a),c=e=>l[0]*Math.pow(e,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:UF(e,t,n,s,c)}}function GF(e,t,n){const[r,i,o,a]=IF(e,t,n),s=r.length;let u,l,c,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)l=r[u],c=i[u++],f=l*l,d+=(f-d)/u,h+=(f*l-h)/u,p+=(f*f-p)/u,m+=(l*c-m)/u,g+=(f*c-g)/u;const y=p-d*d,v=d*y-h*h,b=(g*d-m*h)/v,x=(m*y-g*h)/v,w=-b*d,_=e=>b*(e-=o)*e+x*e+w+a;return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:UF(e,t,n,a,_)}}function YF(e,t,n,r){if(1===r)return qF(e,t,n);if(2===r)return GF(e,t,n);const[i,o,a,s]=IF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(d=3;d<f;++d)t+=y[d]*Math.pow(e,d);return t};return{coef:XF(f,y,-a,s),predict:v,rSquared:UF(e,t,n,s,v)}}function XF(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function QF(e,t,n,r){const[i,o,a,s]=IF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let e=-1;++e<=2;){const t=[0,l-1];for(let e=0;e<u;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let u=0,l=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=JF(Math.abs(n-t)*g)*d[e],s=t*a;u+=a,l+=s,h+=r*a,p+=r*s,m+=t*s}const[y,v]=BF(l/u,h/u,p/u,m/u);c[e]=y+v*n,f[e]=Math.abs(o[e]-c[e]),KF(i,e+1,t)}if(2===e)break;const n=ry(f);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<u;++r)e=f[r]/(6*n),d[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,l=[];for(;s<i;++s)a=e[s]+n,l[0]===a?l[1]+=(t[s]-l[1])/++u:(u=0,l[1]+=r,l=[a,t[s]],o.push(l));return l[1]+=r,o}(i,c,a,s)}function JF(e){return(e=1-e*e*e)*e*e}function KF(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const ZF=.1*Math.PI/180;function eN(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)l.push(i(o+e/n*s));return l.push(i(a)),l}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=l[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&tN(f,e,d)>ZF?c.push(e):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function tN(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function nN(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function rN(e,t,n){return n||e+(t?"_"+t:"")}t(sF,"setRandom",(function(){return pF})),t(sF,"sampleUniform",(function(){return TF})),t(sF,"sampleNormal",(function(){return _F})),t(sF,"sampleLogNormal",(function(){return DF})),t(sF,"sampleCurve",(function(){return eN})),t(sF,"regressionQuad",(function(){return GF})),t(sF,"regressionPow",(function(){return VF})),t(sF,"regressionPoly",(function(){return YF})),t(sF,"regressionLog",(function(){return WF})),t(sF,"regressionLoess",(function(){return QF})),t(sF,"regressionLinear",(function(){return qF})),t(sF,"regressionExp",(function(){return HF})),t(sF,"randomUniform",(function(){return LF})),t(sF,"randomNormal",(function(){return AF})),t(sF,"randomMixture",(function(){return $F})),t(sF,"randomLogNormal",(function(){return OF})),t(sF,"randomLCG",(function(){return yF})),t(sF,"randomKDE",(function(){return CF})),t(sF,"randomInteger",(function(){return vF})),t(sF,"random",(function(){return hF})),t(sF,"quartiles",(function(){return cF})),t(sF,"quantiles",(function(){return lF})),t(sF,"quantileUniform",(function(){return PF})),t(sF,"quantileNormal",(function(){return SF})),t(sF,"quantileLogNormal",(function(){return NF})),t(sF,"dotbin",(function(){return gF})),t(sF,"densityUniform",(function(){return zF})),t(sF,"densityNormal",(function(){return kF})),t(sF,"densityLogNormal",(function(){return MF})),t(sF,"cumulativeUniform",(function(){return RF})),t(sF,"cumulativeNormal",(function(){return EF})),t(sF,"cumulativeLogNormal",(function(){return FF})),t(sF,"bootstrapCI",(function(){return mF})),t(sF,"bin",(function(){return dF})),t(sF,"bandwidthNRD",(function(){return fF}));const iN=()=>{},oN={init:iN,add:iN,rem:iN,idx:0},aN={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},sN=Object.keys(aN);function uN(e,t){return aN[e](t)}function lN(e,t){return e.idx-t.idx}function cN(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function fN(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function dN(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function hN(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function pN(e,t){const n=t||VE,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=aN[e]())}))};return e.forEach(n),Object.values(t).sort(lN)}(e),i=e.slice().sort(lN);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=cN,o.prototype.add=fN,o.prototype.rem=dN,o.prototype.set=hN,o.prototype.get=n,o.fields=e.map((e=>e.out)),o}function mN(e){this._key=e?WE(e):kM,this.reset()}sN.forEach((e=>{aN[e]=function(e,t){return n=>TS({name:e,out:n||e},oN,t)}(e,aN[e])}));const gN=mN.prototype;function yN(e){nF.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}gN.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},gN.add=function(e){this._add.push(e)},gN.rem=function(e){this._rem.push(e)},gN.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o},gN.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",LS(n,r)||(n[r]=1,++o);return o},gN.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=RS(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},gN.argmin=function(e){return this.extent(e)[0]||{}},gN.argmax=function(e){return this.extent(e)[1]||{}},gN.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},gN.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},gN.quartile=function(e){return this._get===e&&this._q||(this._q=cF(this.values(),e),this._get=e),this._q},gN.q1=function(e){return this.quartile(e)[0]},gN.q2=function(e){return this.quartile(e)[1]},gN.q3=function(e){return this.quartile(e)[2]},gN.ci=function(e){return this._get===e&&this._ci||(this._ci=mF(this.values(),1e3,.05,e),this._get=e),this._ci},gN.ci0=function(e){return this.ci(e)[0]},gN.ci1=function(e){return this.ci(e)[1]},yN.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:sN},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},US(yN,nF,{transform:function(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross:function(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,u){const l=n[u],c=r[u++];for(const n in c){const r=a?a+"|"+n:n;s[l]=c[n],u<i?o(r,s,u):t[r]||e.cell(r,s)}}("",{},0)},init:function(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=ES(LE(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=ES(e.groupby),this._dnames=this._dims.map((e=>{const t=PE(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:nN(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,m;for(u!==a.length&&UE("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)c=o[m],f=a[m],null==c&&"count"!==f&&UE("Null aggregate field specified."),h=PE(c),p=rN(f,h,s[m]),n.push(p),"count"!==f?(d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(uN(f,p))):this._counts.push(p);return this._measures=this._measures.map((e=>pN(e,e.field))),{}},cellkey:nN(),cell:function(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new mN),n},newtuple:function(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let t=0;t<i;++t)o[n[t]]=r[t](e);return t?DM(t.tuple,o):SM(o)},clean:function(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple:function(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes:function(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],i&&!u.num||a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(0===u.num&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function vN(e){nF.call(this,null,e)}function bN(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!a[r(e)])),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?ZS(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function xN(e){nF.call(this,[],e)}function wN(e){RM.call(this,null,_N,e)}function _N(e){return this.value&&!e.modified()?this.value:CS(e.fields,e.orders)}function kN(e){nF.call(this,null,e)}function EN(e){nF.call(this,null,e)}vN.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},US(vN,nF,{transform:function(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(LE(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?e=>{const t=r(e);e[s]=t,e[u]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=dF(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(e){let n=aS(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=RE(u,LE(t),e.name||"bin_"+PE(t))}}),xN.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},US(xN,nF,{transform:function(e,t){const n=t.fork(t.ALL),r=bN(kM,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(MM(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),US(wN,RM),kN.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},US(kN,nF,{transform:function(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],u=0,l=i.length;u<l;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n((e=>i[e]=1+(i[e]||0))),c=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck:function(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=SM({}),u[i]=s,u[o]=l,a.add.push(u)):0===l?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}}),EN.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},US(EN,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=o=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(a.push(SM(s)),(s={})[t]=o);return a}(s,i,o,e.filter||XE)):n.mod=s,n.source=this.value,n.modifies(r)}});const SN={kde:CF,mixture:$F,normal:AF,lognormal:OF,uniform:LF},AN="function";function CN(e,t){const n=e.function;LS(SN,n)||UE("Unknown distribution function: "+n);const r=SN[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>CN(e,t)))):typeof r[n]===AN&&r[n](e[n]);return r}function DN(e){nF.call(this,null,e)}const MN=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],FN={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:MN},{name:"weights",type:"number",array:!0}]};function NN(e,t){return e?e.map(((e,n)=>t[n]||PE(e))):null}function ON(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,l,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}DN.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:MN.concat(FN)},{name:"as",type:"string",array:!0,default:["value","density"]}]},US(DN,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=CN(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&UE("Invalid density method: "+a),e.extent||r.data||UE("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=eN(a,e.extent||zS(r.data()),i,o).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],SM(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function $N(e){nF.call(this,null,e)}$N.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function TN(e){RM.call(this,null,zN,e),this.modified(!0)}function zN(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:RE((n=>t(n,e)),LE(t),PE(t))}function RN(e){nF.call(this,[void 0,void 0],e)}function PN(e,t){RM.call(this,e),this.parent=t,this.count=0}function LN(e){nF.call(this,{},e),this._keys=IS();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function BN(e){RM.call(this,null,IN,e)}function IN(e){return this.value&&!e.modified()?this.value:ZE(e.name)?ES(e.name).map((e=>WE(e))):WE(e.name,e.as)}function jN(e){nF.call(this,IS(),e)}function UN(e){nF.call(this,[],e)}function qN(e){nF.call(this,[],e)}function WN(e){nF.call(this,null,e)}function HN(e){nF.call(this,[],e)}US($N,nF,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=ON(t.source,e.groupby,VE),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>nA(zS(e,t))/30)(n,o),s=MM(((e,t)=>o(e)-o(t))),u=e.as||"bin",l=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<l;++h){const e=r[h].sort(s);c=-1;for(const t of gF(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][u]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(u)}}),US(TN,RM),RN.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},US(RN,nF,{transform:function(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=aS(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=PE(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),US(PN,RM,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),US(LN,nF,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){const i=this.value;let o,a,s=LS(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new PN(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean:function(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets:function(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform:function(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=kM(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);o.set(kM(e),t),s(t).add(e)})),a||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=kM(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(o.get(kM(e))).mod(e)})),a&&t.visit(t.REFLOW,(e=>{const t=kM(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),o.clean()})):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),US(BN,RM),jN.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},US(jN,nF,{transform:function(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;function c(t){const n=kM(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(e=>{const t=kM(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(t=>{u(t,e)?o.push(t):r.set(kM(t),1)})),t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),UN.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},US(UN,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=NN(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let u,l,c,f=0;for(;f<s;++f){for(l=AM(e),u=0;u<a;++u)l[i[u]]=null==(c=t[u][f])?null:c;o&&(l[o]=f),n.add.push(l)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),qN.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},US(qN,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(PE),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,o=0;o<u;++o)t=AM(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)}}),WN.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},US(WN,nF,{transform:function(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),US(HN,nF,{transform:function(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,u=e.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=SM(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const VN={value:"value",median:ry,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Kg,max:Jg},GN=[];function YN(e){nF.call(this,[],e)}function XN(e){yN.call(this,e)}function QN(e){nF.call(this,null,e)}function JN(e){RM.call(this,null,KN,e)}function KN(e){return this.value&&!e.modified()?this.value:QS(e.fields,e.flat)}function ZN(e){nF.call(this,[],e),this._pending=null}function eO(e,t,n){n.forEach(SM);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function tO(e){nF.call(this,{},e)}function nO(e){RM.call(this,null,rO,e)}function rO(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function iO(e){RM.call(this,null,oO,e)}function oO(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function aO(e){nF.call(this,null,e)}function sO(e){yN.call(this,e)}function uO(e){LN.call(this,e)}function lO(e){nF.call(this,null,e)}function cO(e){nF.call(this,null,e)}function fO(e){nF.call(this,null,e)}YN.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},US(YN,nF,{transform:function(e,t){var n,r,i,o,a,s,u,l,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||VN.value;if(null!=VN[n])return n===VN.value?(t=void 0!==e.value?e.value:0,()=>t):VN[n];UE("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=PE(e.field),g=PE(e.key),y=(e.groupby||[]).map(PE),v=function(e,t,n,r){var i,o,a,s,u,l,c,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,c=e.length;s<c;++s)l=n(f=e[s]),u=m[l]||(m[l]=p.push(l)),(a=g[o=(i=t?t.map(d):GN)+""])||(a=g[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=v.domain.length;for(a=0,l=v.length;a<l;++a)for(i=(n=v[a]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=v.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[g]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(SM(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),XN.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:sN},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},US(XN,yN,{transform:function(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{TS(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes:function(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),QN.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},US(QN,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=ON(r,e.groupby,e.field),o=(e.groupby||[]).map(PE),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&UE("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=zS(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=CF(t,a)[s],r=e.counts?t.length:1;eN(n,c||zS(t),f,d).forEach((e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(SM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),US(JN,RM),US(ZN,nF,{transform:function(e,t){const n=t.dataflow;if(this._pending)return eO(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return eO(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then((e=>(this._pending=ES(e.data),e=>e.touch(this))))}}return n.request(e.url,e.format).then((e=>eO(this,t,ES(e.data))))}}),tO.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},US(tO,nF,{transform:function(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let u,l,c,f=a?t.SOURCE:t.ADD,d=t,h=e.as;return i?(l=i.length,s>1&&!h&&UE('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*l&&UE('The "as" parameter has too few output field names.'),h=h||i.map(PE),u=function(e){for(var t,a,u=0,c=0;u<s;++u)if(null==(a=r.get(n[u](e))))for(t=0;t<l;++t,++c)e[h[c]]=o;else for(t=0;t<l;++t,++c)e[h[c]]=i[t](a)}):(h||UE("Missing output field names."),u=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?o:t}),a?d=t.reflow(!0):(c=n.some((e=>t.modified(e.fields))),f|=c?t.MOD:0),t.visit(f,u),d.modifies(h)}}),US(nO,RM),US(iO,RM),US(aO,nF,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),sO.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:sN,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},US(sO,yN,{_transform:yN.prototype.transform,transform:function(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=LE(n).concat(LE(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(DS),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((()=>i)),fields:a.map((e=>function(e,t,n,r){return RE((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,o))),as:a.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),US(uO,LN,{transform:function(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(kM(e),n,t,e);return(e.modified("field")||r&&t.modified(LE(r)))&&UE("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(SM(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),lO.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},US(lO,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=NN(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):CM;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,(e=>{const t=kM(e);n.rem.push(a[t]),a[t]=null})),t.visit(t.ADD,(e=>{const t=o(e,SM({}));a[kM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(o(e,a[kM(e)]))})),n}}),US(cO,nF,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),fO.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function dO(e){nF.call(this,null,e)}function hO(e){nF.call(this,[],e),this.count=0}function pO(e){nF.call(this,null,e)}function mO(e){nF.call(this,null,e),this.modified(!0)}function gO(e){nF.call(this,null,e)}US(fO,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=ON(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(PE),a=[],s=e.step||.01,u=e.probs||oy(s/2,1-1e-14,s),l=u.length;return i.forEach((e=>{const t=lF(e,u);for(let n=0;n<l;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=u[n],i[r[1]]=t[n],a.push(SM(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),US(dO,nF,{transform:function(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=kM(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=AM(e);r[kM(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[kM(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),hO.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},US(hO,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce(((e,t)=>(e[kM(t)]=1,e)),{});let a=this.value,s=this.count,u=0;function l(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*hF()),r<a.length&&r>=u&&(t=a[r],o[kM(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=kM(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s})),a=a.filter((e=>-1!==o[kM(e)]))),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,(e=>{o[kM(e)]||l(e)})),u=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[kM(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{o[kM(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter((e=>!o[kM(e)]))),this.count=s,this.value=n.source=a,n}}),pO.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},US(pO,nF,{transform:function(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=oy(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,SM(t)})),n.add=t.add.concat(this.value),n}}),US(mO,nF,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const yO=["unit0","unit1"];function vO(e){nF.call(this,IS(),e)}function bO(e){nF.call(this,null,e)}gO.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:nD,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:yO}]},US(gO,nF,{transform:function(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?OD:ND)(o.unit).offset,s=e.as||yO,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(LE(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[u]=null,r&&(e[l]=null)):(e[u]=i=s=o(t),r&&(e[l]=s=a(i,c)),i<f&&(f=i),s>d&&(d=s))})),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor:function(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:ZD({extent:e.extent||zS(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=iD(r),a=this.value||{},s=(n?DD:SD)(o,i);return s.unit=oS(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),US(vO,nF,{transform:function(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),US(bO,nF,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(MM(e.sort)):t.source).map(e.field))}});const xO={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=xO.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||UE("ntile num must be greater than zero.");const n=xO.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||UE("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const wO=Object.keys(xO);function _O(e){const t=ES(e.ops),n=ES(e.fields),r=ES(e.params),i=ES(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(e){ES(LE(e)).forEach((e=>s[e]=1))}d(e.sort),t.forEach(((e,t)=>{const s=n[t],h=PE(s),p=rN(e,h,i[t]);if(d(s),o.push(p),LS(xO,e))a.push(function(e,t,n,r){const i=xO[e](t,n);return{init:i.init||GE,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],p));else{if(null==s&&"count"!==e&&UE("Null aggregate field specified."),"count"===e)return void l.push(p);f=!1;let t=u[h];t||(t=u[h]=[],t.field=s,c.push(t)),t.push(uN(e,p))}})),(l.length||c.length)&&(this.cell=function(e,t,n){e=e.map((e=>pN(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new mN;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(c,l,f)),this.inputs=Object.keys(s)}const kO=_O.prototype;function EO(e){nF.call(this,{},e),this._mlen=0,this._mods=[]}function SO(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?Hg(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||OS(-1)};t.init();for(let e=0;e<u;++e)AO(c,a,e,u),o&&CO(c,l),t.update(c,s[e])}function AO(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function CO(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}kO.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},kO.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},EO.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:wO.concat(sN)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},US(EO,nF,{transform:function(e,t){this.stamp=t.stamp;const n=e.modified(),r=MM(e.sort),i=nN(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new _O(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,(e=>o(e).add(e)))):(t.visit(t.REM,(e=>o(e).remove(e))),t.visit(t.ADD,(e=>o(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)SO(this._mods[t],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group:function(e){let t=this.value[e];return t||(t=this.value[e]=bN(kM),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),t(aF,"window",(function(){return EO})),t(aF,"values",(function(){return bO})),t(aF,"tupleindex",(function(){return vO})),t(aF,"timeunit",(function(){return gO})),t(aF,"subflow",(function(){return PN})),t(aF,"sieve",(function(){return mO})),t(aF,"sequence",(function(){return pO})),t(aF,"sample",(function(){return hO})),t(aF,"relay",(function(){return dO})),t(aF,"quantile",(function(){return fO})),t(aF,"proxy",(function(){return cO})),t(aF,"project",(function(){return lO})),t(aF,"prefacet",(function(){return uO})),t(aF,"pivot",(function(){return sO})),t(aF,"params",(function(){return aO})),t(aF,"multivalues",(function(){return iO})),t(aF,"multiextent",(function(){return nO})),t(aF,"lookup",(function(){return tO})),t(aF,"load",(function(){return ZN})),t(aF,"key",(function(){return JN})),t(aF,"kde",(function(){return QN})),t(aF,"joinaggregate",(function(){return XN})),t(aF,"impute",(function(){return YN})),t(aF,"generate",(function(){return HN})),t(aF,"formula",(function(){return WN})),t(aF,"fold",(function(){return qN})),t(aF,"flatten",(function(){return UN})),t(aF,"filter",(function(){return jN})),t(aF,"field",(function(){return BN})),t(aF,"facet",(function(){return LN})),t(aF,"extent",(function(){return RN})),t(aF,"expression",(function(){return TN})),t(aF,"dotbin",(function(){return $N})),t(aF,"density",(function(){return DN})),t(aF,"cross",(function(){return EN})),t(aF,"countpattern",(function(){return kN})),t(aF,"compare",(function(){return wN})),t(aF,"collect",(function(){return xN})),t(aF,"bin",(function(){return vN})),t(aF,"aggregate",(function(){return yN}));var DO={},MO={};const FO=Math.PI,NO=2*FO,OO=1e-6,$O=NO-OO;function TO(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function zO(){return new TO}TO.prototype=zO.prototype={constructor:TO,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>OO)if(Math.abs(c*s-u*l)>OO&&i){var d=n-o,h=r-a,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((FO-Math.acos((p+f-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>OO&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>OO||Math.abs(this._y1-l)>OO)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%NO+NO),f>$O?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>OO&&(this._+="A"+n+","+n+",0,"+ +(f>=FO)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var RO=function(e){return function(){return e}},PO=Math.abs,LO=Math.atan2,BO=Math.cos,IO=Math.max,jO=Math.min,UO=Math.sin,qO=Math.sqrt,WO=1e-12,HO=Math.PI,VO=HO/2,GO=2*HO;function YO(e){return e>1?0:e<-1?HO:Math.acos(e)}function XO(e){return e>=1?VO:e<=-1?-VO:Math.asin(e)}function QO(e){return e.innerRadius}function JO(e){return e.outerRadius}function KO(e){return e.startAngle}function ZO(e){return e.endAngle}function e$(e){return e&&e.padAngle}function t$(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<WO))return[e+(d=(c*(t-o)-f*(e-i))/d)*u,t+d*l]}function n$(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/qO(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,w=i-o,_=d*m-p*h,k=(b<0?-1:1)*qO(IO(0,w*w*x-_*_)),E=(_*b-v*k)/x,S=(-_*v-b*k)/x,A=(_*b+v*k)/x,C=(-_*v+b*k)/x,D=E-g,M=S-y,F=A-g,N=C-y;return D*D+M*M>F*F+N*N&&(E=A,S=C),{cx:E,cy:S,x01:-c,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}Array.prototype.slice;var r$=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function i$(e){this._context=e}i$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var o$=function(e){return new i$(e)};function a$(e){return e[0]}function s$(e){return e[1]}var u$=function(e,t){var n=RO(!0),r=null,i=o$,o=null;function a(a){var s,u,l,c=(a=r$(a)).length,f=!1;for(null==r&&(o=i(l=zO())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?a$:RO(e),t="function"==typeof t?t:void 0===t?s$:RO(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:RO(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:RO(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:RO(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},l$=function(e,t,n){var r=null,i=RO(!0),o=null,a=o$,s=null;function u(u){var l,c,f,d,h,p=(u=r$(u)).length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=zO())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+e(d,l,u),y[l]=+t(d,l,u),s.point(r?+r(d,l,u):g[l],n?+n(d,l,u):y[l]))}if(h)return s=null,h+""||null}function l(){return u$().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?a$:RO(+e),t="function"==typeof t?t:RO(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?s$:RO(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:RO(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:RO(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:RO(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:RO(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:RO(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:RO(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:RO(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u},c$={draw:function(e,t){var n=Math.sqrt(t/HO);e.moveTo(n,0),e.arc(0,0,n,0,GO)}},f$=(Math.sqrt(1/3),Math.sin(HO/10)/Math.sin(7*HO/10)),d$=(Math.sin(GO/10),Math.cos(GO/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function h$(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function p$(e){this._context=e}p$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:h$(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:h$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function m$(e){this._context=e}m$.prototype={areaStart:d$,areaEnd:d$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:h$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g$(e){this._context=e}g$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:h$(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function y$(e,t){this._basis=new p$(e),this._beta=t}y$.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var v$=function e(t){function n(e){return 1===t?new p$(e):new y$(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function b$(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function x$(e,t){this._context=e,this._k=(1-t)/6}x$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:b$(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:b$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var w$=function e(t){function n(e){return new x$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function _$(e,t){this._context=e,this._k=(1-t)/6}_$.prototype={areaStart:d$,areaEnd:d$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:b$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var k$=function e(t){function n(e){return new _$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function E$(e,t){this._context=e,this._k=(1-t)/6}E$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:b$(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var S$=function e(t){function n(e){return new E$(e,t)}return n.tension=function(t){return e(+t)},n}(0);function A$(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>WO){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>WO){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function C$(e,t){this._context=e,this._alpha=t}C$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:A$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var D$=function e(t){function n(e){return t?new C$(e,t):new x$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function M$(e,t){this._context=e,this._alpha=t}M$.prototype={areaStart:d$,areaEnd:d$,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:A$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var F$=function e(t){function n(e){return t?new M$(e,t):new _$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function N$(e,t){this._context=e,this._alpha=t}N$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:A$(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var O$=function e(t){function n(e){return t?new N$(e,t):new E$(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function $$(e){this._context=e}$$.prototype={areaStart:d$,areaEnd:d$,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function T$(e){return e<0?-1:1}function z$(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(T$(o)+T$(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function R$(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function P$(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function L$(e){this._context=e}function B$(e){this._context=new I$(e)}function I$(e){this._context=e}function j$(e){this._context=e}function U$(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}L$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:P$(this,this._t0,R$(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,P$(this,R$(this,n=z$(this,e,t)),n);break;default:P$(this,this._t0,n=z$(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(B$.prototype=Object.create(L$.prototype)).point=function(e,t){L$.prototype.point.call(this,t,e)},I$.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},j$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=U$(e),i=U$(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function q$(e,t){this._context=e,this._t=t}q$.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function W$(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const H$=()=>"undefined"!=typeof Image?Image:null;function V$(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const G$="linear",Y$="log",X$="pow",Q$="sqrt",J$="symlog",K$="time",Z$="utc",eT="sequential",tT="diverging",nT="quantile",rT="quantize",iT="threshold",oT="ordinal",aT="point",sT="band",uT="bin-ordinal",lT="continuous",cT="discrete",fT="discretizing",dT="interpolating",hT="temporal";function pT(){const e=nv().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){const e=t().length,c=o[1]<o[0],f=o[1-c],d=V$(e,s,u);let h=o[c-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*l,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=oy(e).map((e=>h+r*e));return n(c?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,l,c,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(c=f,f=d,d=c),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,Yg(a,f)-1),l=f===d?u:Yg(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(c=u,u=s-l,l=s-c),u>l?void 0:t().slice(u,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return pT().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function mT(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return mT(t())},e}var gT=Array.prototype.map;function yT(e){return gT.call(e,aS)}const vT=Array.prototype.slice;const bT={};function xT(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],l=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(l<0&&(l=o),r=o);if(!(l<0))return s=e.invertExtent(n[l]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=e,n};return r.metadata=uA(ES(n)),r}function wT(e,t,n){return arguments.length>1?(bT[e]=xT(e,t,n),this):_T(e)?bT[e]:void 0}function _T(e){return LS(bT,e)}function kT(e,t){const n=bT[e];return n&&n.metadata[t]}function ET(e){return kT(e,lT)}function ST(e){return kT(e,cT)}function AT(e){return kT(e,fT)}function CT(e){return kT(e,Y$)}function DT(e){return kT(e,dT)}function MT(e){return kT(e,nT)}wT("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,hy),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,hy):[0,1],qy(r)})),wT(G$,(function e(){var t=wy();return t.copy=function(){return by(t,e())},_y.apply(t,arguments),qy(t)}),lT),wT(Y$,(function e(){var t=Jy(xy()).domain([1,10]);return t.copy=function(){return by(t,e()).base(t.base())},_y.apply(t,arguments),t}),[lT,Y$]),wT(X$,sv,lT),wT(Q$,(function(){return sv.apply(null,arguments).exponent(.5)}),lT),wT(J$,(function e(){var t=ev(xy());return t.copy=function(){return by(t,e()).constant(t.constant())},_y.apply(t,arguments)}),lT),wT(K$,(function(){return _y.apply(Sx(Xv,Qv,Ov,Nv,Ev,_v,wv,xv,bv,nb).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[lT,hT]),wT(Z$,(function(){return _y.apply(Sx(Gv,Yv,Hv,Wv,Pv,zv,Tv,$v,bv,ib).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[lT,hT]),wT(eT,Dx,[lT,dT]),wT("".concat(eT,"-").concat(G$),Dx,[lT,dT]),wT("".concat(eT,"-").concat(Y$),(function e(){var t=Jy(Ax()).domain([1,10]);return t.copy=function(){return Cx(t,e()).base(t.base())},ky.apply(t,arguments)}),[lT,dT,Y$]),wT("".concat(eT,"-").concat(X$),Mx,[lT,dT]),wT("".concat(eT,"-").concat(Q$),(function(){return Mx.apply(null,arguments).exponent(.5)}),[lT,dT]),wT("".concat(eT,"-").concat(J$),(function e(){var t=ev(Ax());return t.copy=function(){return Cx(t,e()).constant(t.constant())},ky.apply(t,arguments)}),[lT,dT]),wT("".concat(tT,"-").concat(G$),(function e(){var t=qy(Fx()(my));return t.copy=function(){return Cx(t,e())},ky.apply(t,arguments)}),[lT,dT]),wT("".concat(tT,"-").concat(Y$),(function e(){var t=Jy(Fx()).domain([.1,1,10]);return t.copy=function(){return Cx(t,e()).base(t.base())},ky.apply(t,arguments)}),[lT,dT,Y$]),wT("".concat(tT,"-").concat(X$),Nx,[lT,dT]),wT("".concat(tT,"-").concat(Q$),(function(){return Nx.apply(null,arguments).exponent(.5)}),[lT,dT]),wT("".concat(tT,"-").concat(J$),(function e(){var t=ev(Fx());return t.copy=function(){return Cx(t,e()).constant(t.constant())},ky.apply(t,arguments)}),[lT,dT]),wT(nT,(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=ny(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[Yg(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Wg),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},_y.apply(a,arguments)}),[fT,nT]),wT(rT,(function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[Yg(o,e,0,i)]:t}function u(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,u()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,u()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},_y.apply(qy(s),arguments)}),fT),wT(iT,(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[Yg(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},_y.apply(o,arguments)}),fT),wT(uT,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(Yg(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=yT(e),r):t.slice()},r.range=function(e){return arguments.length?(n=vT.call(e),r):n.slice()},r.tickFormat=function(e,n){return Uy(t[0],oS(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[cT,fT]),wT(oT,nv,cT),wT(sT,pT,cT),wT(aT,(function(){return mT(pT().paddingInner(1))}),cT);const FT=["clamp","base","constant","exponent"];function NT(e,t){const n=t[0],r=oS(t)-n;return function(t){return e(n+t*r)}}function OT(e,t,n){return zm(zT(t||"rgb",n),e)}function $T(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function TT(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=wT(o)().domain([t,n]).range([0,1]),FT.forEach((t=>e[t]?a[t](e[t]()):0)),a):OS(.5)}function zT(e,t){const n=Rh[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function RT(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function PT(e,t){for(const n in e)BT(n,t(e[n]))}const LT={};function BT(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(LT[e]=t,this):LT[e]}PT({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},RT),PT({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>OT(RT(e))));const IT="symbol",jT=e=>ZE(e)?e.map((e=>String(e))):String(e),UT=(e,t)=>e[1]-t[1],qT=(e,t)=>t[1]-e[1];function WT(e,t,n){let r;return GS(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(nA(e.domain())/n||1)))),eS(t)&&(r=t.step,t=t.interval),XS(t)&&(t=e.type===K$?ND(t):e.type==Z$?OD(t):UE("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function HT(e,t,n){let r=e.range(),i=r[0],o=oS(r),a=UT;if(i>o&&(r=o,o=i,i=r,a=qT),i=Math.floor(i),o=Math.ceil(o),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=o)).sort(a).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],oS(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function VT(e,t){return e.bins?HT(e,e.bins):e.ticks?e.ticks(t):e.domain()}function GT(e,t,n,r,i,o){const a=t.type;let s=jT;if(a===K$||i===K$)s=e.timeFormat(r);else if(a===Z$||i===Z$)s=e.utcFormat(r);else if(CT(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=YT(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function YT(e,t,n){const r=VT(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const XT={[nT]:"quantiles",[rT]:"thresholds",[iT]:"domain"},QT={[nT]:"quantiles",[rT]:"domain"};function JT(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=oS(e),t}(e.bins):e.type===Y$?YT(e,t,!0):XT[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[XT[e.type]]()):VT(e,t)}function KT(e,t,n,r,i,o,a){const s=QT[t.type]&&o!==K$&&o!==Z$?function(e,t,n){const r=t[QT[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):GT(e,t,n,i,o,a);return r===IT&&(e=>XT[e.type]||e.bins)(t)?ZT(s):"discrete"===r?tz(s):nz(s)}const ZT=e=>(t,n,r)=>{const i=ez(r[n+1],ez(r.max,1/0)),o=rz(t,e),a=rz(i,e);return o&&a?o+"  "+a:a?"< "+a:" "+o},ez=(e,t)=>null!=e?e:t,tz=e=>(t,n)=>n?e(t):null,nz=e=>t=>e(t),rz=(e,t)=>Number.isFinite(e)?t(e):null;function iz(e,t,n,r){const i=r||t.type;return XS(n)&&kT(i,hT)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==K$?n||i!==Z$?KT(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function oz(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=iz(e,t,n.format,n.formatType);if(AT(t.type)){const e=JT(t).slice(1).map(i),n=e.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(e.join(", "))}if(ST(t.type)){const e=t.domain(),n=e.length,o=n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const e=t.domain();return"values from ".concat(i(e[0])," to ").concat(i(oS(e)))}}let az=0;const sz="p_";function uz(e){return e&&e.gradient}function lz(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?sz:"";return i||(i=e.id="gradient_"+az++,"radial"===r?(e.x1=cz(e.x1,.5),e.y1=cz(e.y1,.5),e.r1=cz(e.r1,0),e.x2=cz(e.x2,.5),e.y2=cz(e.y2,.5),e.r2=cz(e.r2,.5),o=sz):(e.x1=cz(e.x1,0),e.y1=cz(e.y1,0),e.x2=cz(e.x2,1),e.y2=cz(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function cz(e,t){return null!=e?e:t}function fz(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const dz={basis:{curve:function(e){return new p$(e)}},"basis-closed":{curve:function(e){return new m$(e)}},"basis-open":{curve:function(e){return new g$(e)}},bundle:{curve:v$,tension:"beta",value:.85},cardinal:{curve:w$,tension:"tension",value:0},"cardinal-open":{curve:S$,tension:"tension",value:0},"cardinal-closed":{curve:k$,tension:"tension",value:0},"catmull-rom":{curve:D$,tension:"alpha",value:.5},"catmull-rom-closed":{curve:F$,tension:"alpha",value:.5},"catmull-rom-open":{curve:O$,tension:"alpha",value:.5},linear:{curve:o$},"linear-closed":{curve:function(e){return new $$(e)}},monotone:{horizontal:function(e){return new B$(e)},vertical:function(e){return new L$(e)}},natural:{curve:function(e){return new j$(e)}},step:{curve:function(e){return new q$(e,.5)}},"step-after":{curve:function(e){return new q$(e,1)}},"step-before":{curve:function(e){return new q$(e,0)}}};function hz(e,t,n){var r=LS(dz,e)&&dz[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const pz={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},mz=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function gz(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(mz[0],"###$1").split(mz[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(mz[2],"$1###$2").replace(mz[3],"$1###$2").split(mz[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=pz[a.toLowerCase()],i.length-1>s){const e=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a="M"===a?"L":"m"===a?"l":a;l<e;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const yz=Math.PI/180,vz=Math.PI/2,bz=2*Math.PI,xz=Math.sqrt(3)/2;var wz={},_z={},kz=[].join;function Ez(e){const t=kz.call(e);if(_z[t])return _z[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),x=8/3*b*b/Math.sin(v),w=n+p-x*m,_=r+m+x*p,k=n+g,E=r+y,S=k+x*y,A=E-x*g;return _z[t]=[c*w+f*_,d*w+h*_,c*S+f*A,d*S+h*A,c*k+f*E,d*k+h*E]}const Sz=["l",0,0,0,0,0,0,0];function Az(e,t,n){const r=Sz[0]=e[0];if("a"===r||"A"===r)Sz[1]=t*e[1],Sz[2]=n*e[2],Sz[3]=e[3],Sz[4]=e[4],Sz[5]=e[5],Sz[6]=t*e[6],Sz[7]=n*e[7];else if("h"===r||"H"===r)Sz[1]=t*e[1];else if("v"===r||"V"===r)Sz[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Sz[i]=(i%2==1?t:n)*e[i];return Sz}function Cz(e,t,n,r,i,o){var a,s,u,l,c,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(a=t[g],1===i&&1===o||(a=Az(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],m=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],m=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],m=h+a[2],e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-l,m=2*h-c):"q"===f[0]&&(p=2*d-p,m=2*h-m),l=p,c=m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),h=u,p=(d=s)+a[1],m=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":Dz(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":Dz(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function Dz(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,u){const l=kz.call(arguments);if(wz[l])return wz[l];const c=a*yz,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*s+y*u,w=v*s+b*u,_=g*e+y*t,k=v*e+b*t;let E=1/((_-x)*(_-x)+(k-w)*(k-w))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const A=.5*(x+_)-S*(k-w),C=.5*(w+k)+S*(_-x),D=Math.atan2(w-C,x-A);let M=Math.atan2(k-C,_-A)-D;M<0&&1===o?M+=bz:M>0&&0===o&&(M-=bz);const F=Math.ceil(Math.abs(M/(vz+.001))),N=[];for(let e=0;e<F;++e){const t=D+e*M/F,i=D+(e+1)*M/F;N[e]=[A,C,t,i,n,r,f,d]}return wz[l]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=Ez(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const Mz=.5773502691896257,Fz={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,bz)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n,i=r-n*Mz,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n,i=r-n*Mz;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=xz*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function Nz(e){return LS(Fz,e)?Fz[e]:function(e){if(!LS(Oz,e)){const t=gz(e);Oz[e]={draw:function(e,n){Cz(e,t,0,0,Math.sqrt(n)/2)}}}return Oz[e]}(e)}var Oz={};const $z=.448084975506;function Tz(e){return e.x}function zz(e){return e.y}function Rz(e){return e.width}function Pz(e){return e.height}function Lz(e){return"function"==typeof e?e:()=>+e}function Bz(e,t,n){return Math.max(t,Math.min(e,n))}function Iz(){var e=Tz,t=zz,n=Rz,r=Pz,i=Lz(0),o=i,a=i,s=i,u=null;function l(l,c,f){var d,h=null!=c?c:+e.call(this,l),p=null!=f?f:+t.call(this,l),m=+n.call(this,l),g=+r.call(this,l),y=Math.min(m,g)/2,v=Bz(+i.call(this,l),0,y),b=Bz(+o.call(this,l),0,y),x=Bz(+a.call(this,l),0,y),w=Bz(+s.call(this,l),0,y);if(u||(u=d=zO()),v<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var _=h+m,k=p+g;u.moveTo(h+v,p),u.lineTo(_-b,p),u.bezierCurveTo(_-$z*b,p,_,p+$z*b,_,p+b),u.lineTo(_,k-w),u.bezierCurveTo(_,k-$z*w,_-$z*w,k,_-w,k),u.lineTo(h+x,k),u.bezierCurveTo(h+$z*x,k,h,k-$z*x,h,k-x),u.lineTo(h,p+v),u.bezierCurveTo(h,p+$z*v,h+$z*v,p,h+v,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(t){return arguments.length?(e=Lz(t),l):e},l.y=function(e){return arguments.length?(t=Lz(e),l):t},l.width=function(e){return arguments.length?(n=Lz(e),l):n},l.height=function(e){return arguments.length?(r=Lz(e),l):r},l.cornerRadius=function(e,t,n,r){return arguments.length?(i=Lz(e),o=null!=t?Lz(t):i,s=null!=n?Lz(n):i,a=null!=r?Lz(r):o,l):i},l.context=function(e){return arguments.length?(u=null==e?null:e,l):u},l}function jz(){var e,t,n,r,i,o,a,s,u=null;function l(e,t,n){const r=n/2;if(i){var l=a-t,c=e-o;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(o-d,a-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(e,t,r,0,bz);u.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==u&&(u=c=zO()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&l(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return u=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function Uz(e,t){return null!=e?e:t}const qz=e=>e.x||0,Wz=e=>e.y||0,Hz=e=>!(!1===e.defined),Vz=function(){var e=QO,t=JO,n=RO(0),r=null,i=KO,o=ZO,a=e$,s=null;function u(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-VO,h=o.apply(this,arguments)-VO,p=PO(h-d),m=h>d;if(s||(s=u=zO()),f<c&&(l=f,f=c,c=l),f>WO)if(p>GO-WO)s.moveTo(f*BO(d),f*UO(d)),s.arc(0,0,f,d,h,!m),c>WO&&(s.moveTo(c*BO(h),c*UO(h)),s.arc(0,0,c,h,d,m));else{var g,y,v=d,b=h,x=d,w=h,_=p,k=p,E=a.apply(this,arguments)/2,S=E>WO&&(r?+r.apply(this,arguments):qO(c*c+f*f)),A=jO(PO(f-c)/2,+n.apply(this,arguments)),C=A,D=A;if(S>WO){var M=XO(S/c*UO(E)),F=XO(S/f*UO(E));(_-=2*M)>WO?(x+=M*=m?1:-1,w-=M):(_=0,x=w=(d+h)/2),(k-=2*F)>WO?(v+=F*=m?1:-1,b-=F):(k=0,v=b=(d+h)/2)}var N=f*BO(v),O=f*UO(v),$=c*BO(w),T=c*UO(w);if(A>WO){var z,R=f*BO(b),P=f*UO(b),L=c*BO(x),B=c*UO(x);if(p<HO&&(z=t$(N,O,L,B,R,P,$,T))){var I=N-z[0],j=O-z[1],U=R-z[0],q=P-z[1],W=1/UO(YO((I*U+j*q)/(qO(I*I+j*j)*qO(U*U+q*q)))/2),H=qO(z[0]*z[0]+z[1]*z[1]);C=jO(A,(c-H)/(W-1)),D=jO(A,(f-H)/(W+1))}}k>WO?D>WO?(g=n$(L,B,N,O,f,D,m),y=n$(R,P,$,T,f,D,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),D<A?s.arc(g.cx,g.cy,D,LO(g.y01,g.x01),LO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,D,LO(g.y01,g.x01),LO(g.y11,g.x11),!m),s.arc(0,0,f,LO(g.cy+g.y11,g.cx+g.x11),LO(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,D,LO(y.y11,y.x11),LO(y.y01,y.x01),!m))):(s.moveTo(N,O),s.arc(0,0,f,v,b,!m)):s.moveTo(N,O),c>WO&&_>WO?C>WO?(g=n$($,T,R,P,c,-C,m),y=n$(N,O,L,B,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,LO(g.y01,g.x01),LO(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,LO(g.y01,g.x01),LO(g.y11,g.x11),!m),s.arc(0,0,c,LO(g.cy+g.y11,g.cx+g.x11),LO(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,LO(y.y11,y.x11),LO(y.y01,y.x01),!m))):s.arc(0,0,c,w,x,m):s.lineTo($,T)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-HO/2;return[BO(r)*n,UO(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:RO(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:RO(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:RO(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:RO(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:RO(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:RO(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:RO(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),Gz=l$().x(qz).y1(Wz).y0((e=>(e.y||0)+(e.height||0))).defined(Hz),Yz=l$().y(Wz).x1(qz).x0((e=>(e.x||0)+(e.width||0))).defined(Hz),Xz=u$().x(qz).y(Wz).defined(Hz),Qz=Iz().x(qz).y(Wz).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>Uz(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>Uz(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>Uz(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>Uz(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),Jz=function(e,t){var n=null;function r(){var r;if(n||(n=r=zO()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:RO(e||c$),t="function"==typeof t?t:RO(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:RO(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:RO(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>Nz(e.shape||"circle"))).size((e=>Uz(e.size,64))),Kz=jz().x(qz).y(Wz).defined(Hz).size((e=>e.size||1));function Zz(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function eR(e,t,n,r){return Qz.context(e)(t,n,r)}var tR=1;function nR(){tR=1}function rR(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+tR++),a=i.clipping[o]||(i.clipping[o]={id:o});return AS(r)?a.path=r(null):Zz(n)?a.path=eR(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function iR(e){this.clear(),e&&this.union(e)}function oR(e){this.mark=e,this.bounds=this.bounds||new iR}function aR(e){oR.call(this,e),this.items=this.items||[]}function sR(e){this._pending=0,this._loader=e||yM()}function uR(e){e._pending+=1}function lR(e){e._pending-=1}function cR(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}iR.prototype={clone:function(){return new iR(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},US(aR,oR),sR.prototype={pending:function(){return this._pending},sanitizeURL:function(e){const t=this;return uR(t),t._loader.sanitize(e,{context:"href"}).then((e=>(lR(t),e))).catch((()=>(lR(t),null)))},loadImage:function(e){const t=this,n=H$();return uR(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=LS(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>lR(t),i.onerror=()=>lR(t),i.src=r,i})).catch((e=>(lR(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready:function(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}};const fR=bz-1e-8;let dR,hR,pR,mR,gR,yR,vR,bR;const xR=(e,t)=>dR.add(e,t),wR=(e,t)=>xR(hR=e,pR=t),_R=e=>xR(e,dR.y1),kR=e=>xR(dR.x1,e),ER=(e,t)=>gR*e+vR*t,SR=(e,t)=>yR*e+bR*t,AR=(e,t)=>xR(ER(e,t),SR(e,t)),CR=(e,t)=>wR(ER(e,t),SR(e,t));function DR(e,t){return dR=e,t?(mR=t*yz,gR=bR=Math.cos(mR),yR=Math.sin(mR),vR=-yR):(gR=bR=1,mR=yR=vR=0),MR}const MR={beginPath:function(){},closePath:function(){},moveTo:CR,lineTo:CR,rect:function(e,t,n,r){mR?(AR(e+n,t),AR(e+n,t+r),AR(e,t+r),CR(e,t)):(xR(e+n,t+r),wR(e,t))},quadraticCurveTo:function(e,t,n,r){const i=ER(e,t),o=SR(e,t),a=ER(n,r),s=SR(n,r);FR(hR,i,a,_R),FR(pR,o,s,kR),wR(a,s)},bezierCurveTo:function(e,t,n,r,i,o){const a=ER(e,t),s=SR(e,t),u=ER(n,r),l=SR(n,r),c=ER(i,o),f=SR(i,o);NR(hR,a,u,c,_R),NR(pR,s,l,f,kR),wR(c,f)},arc:function(e,t,n,r,i,o){if(r+=mR,i+=mR,hR=n*Math.cos(i)+e,pR=n*Math.sin(i)+t,Math.abs(i-r)>fR)xR(e-n,t-n),xR(e+n,t+n);else{const a=r=>xR(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=bz)<0&&(r+=bz),(i%=bz)<0&&(i+=bz),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=bz,s=r-r%vz,u=0;u<4&&s>i;++u,s-=vz)a(s);else for(s=r-r%vz+vz,u=0;u<4&&s<i;++u,s+=vz)a(s)}}};function FR(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function NR(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),l=(-a+u)/o,c=(-a-u)/o)):l=.5*s/a,0<l&&l<1&&i(OR(l,e,t,n,r)),0<c&&c<1&&i(OR(c,e,t,n,r))}function OR(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var $R=($R=W$(1,1))?$R.getContext("2d"):null;const TR=new iR;function zR(e){return function(t,n){if(!$R)return!0;e($R,t),TR.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=TR;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if($R.isPointInPath(t,e))return!0;return!1}}function RR(e,t){return t.contains(e.x||0,e.y||0)}function PR(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(TR.set(n,r,n+i,r+o))}function LR(e,t){const n=e.x||0,r=e.y||0;return BR(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function BR(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-l,d=-(o-t)),1===p&&(f=l,d=s-t),2===p&&(f=-c,d=-(a-n)),3===p&&(f=c,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function IR(e,t){e.globalCompositeOperation=t.blend||"source-over"}function jR(e,t){return null==e?t:e}function UR(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function qR(e,t,n){return uz(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+jR(t.x1,.5)*r,n.y1+jR(t.y1,.5)*i,Math.max(r,i)*jR(t.r1,0),n.x1+jR(t.x2,.5)*r,n.y1+jR(t.y2,.5)*i,Math.max(r,i)*jR(t.r2,.5));else{const a=jR(t.x1,0),s=jR(t.y1,0),u=jR(t.x2,1),l=jR(t.y2,0);if(a!==u&&s!==l&&r!==i){const n=W$(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=UR(o.createLinearGradient(a,s,u,l),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i)}return UR(o,t.stops)}(e,n,t.bounds):n}function WR(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=qR(e,t,t.fill),!0)}var HR=[];function VR(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=qR(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||HR),e.lineDashOffset=t.strokeDashOffset||0),!0))}function GR(e,t){return e.zindex-t.zindex||e.index-t.index}function YR(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(GR)}function XR(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=YR(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function QR(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=YR(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function JR(e){return function(t,n,r){XR(n,(n=>{r&&!r.intersects(n.bounds)||KR(e,t,n,n)}))}}function KR(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(IR(t,n),n.fill&&WR(t,n,i)&&t.fill(),n.stroke&&VR(t,n,i)&&t.stroke()))}function ZR(e){return e=e||XE,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,QR(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function eP(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function tP(e){return ZR(eP(e))}function nP(e,t){return"translate("+e+","+t+")"}function rP(e){return"rotate("+e+")"}function iP(e){return nP(e.x||0,e.y||0)}function oP(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=yz),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return nP(e.x||0,e.y||0)+(e.angle?" "+rP(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(DR(e,n.angle),n),cR(e,n).translate(n.x||0,n.y||0)},draw:JR(r),pick:tP(r),isect:n||zR(r)}}var aP=oP("arc",(function(e,t){return Vz.context(e)(t)}));function sP(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=eP(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(DR(e),r),cR(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||KR(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:RR,tip:n};var o}var uP=sP("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?Yz:Gz).curve(hz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function lP(e,t){e.beginPath(),Zz(t)?eR(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function cP(e){const t=jR(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function fP(e,t){const n=cP(t);e("d",eR(null,t,n,n))}function dP(e,t,n,r){const i=cP(t);e.beginPath(),eR(e,t,(n||0)+i,(r||0)+i)}const hP=eP(dP),pP=eP(dP,!1),mP=eP(dP,!0);var gP={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",iP(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),cR(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){XR(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(dP(e,t,r,i),IR(e,t),t.fill&&WR(e,t,a)&&e.fill(),t.stroke&&!o&&VR(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&lP(e,t),n&&n.translate(-r,-i),XR(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(dP(e,t,r,i),IR(e,t),VR(e,t,a)&&e.stroke())}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return QR(t,(u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&Zz(u)&&!mP(e,u,a,s))return e.restore(),null;const g=u.strokeForeground,y=!1!==t.interactive;return y&&g&&u.stroke&&pP(e,u,a,s)?(e.restore(),u):(l=QR(u,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,f)?this.pick(e,n,r,c,f):null)),!l&&y&&(u.fill||!g&&u.stroke)&&hP(e,u,a,s)&&(l=u),e.restore(),l||null)}))},isect:PR,content:function(e,t,n){e("clip-path",t.clip?rR(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),fP(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?fP(e,t):e("d","")}},yP={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function vP(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function bP(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function xP(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function wP(e,t){return"center"===e?t/2:"right"===e?t:0}function _P(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var kP={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=vP(t,n),i=bP(t,r),o=xP(t,r),a=(t.x||0)-wP(t.align,i),s=(t.y||0)-_P(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",yP["xmlns:xlink"],"xlink:href"),e("transform",nP(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=bP(t,n),i=xP(t,n),o=(t.x||0)-wP(t.align,r),a=(t.y||0)-_P(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){XR(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=vP(t,this);let i=bP(t,r),o=xP(t,r);if(0===i||0===o)return;let a,s,u,l,c=(t.x||0)-wP(t.align,i),f=(t.y||0)-_P(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,u=t.width/t.height,s==s&&u==u&&s!==u&&(u<s?(l=i/s,f+=(o-l)/2,o=l):(l=o*s,c+=(i-l)/2,i=l))),(r.complete||r.toDataURL)&&(IR(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,f,i,o))}))},pick:ZR(),isect:XE,get:vP,xOffset:wP,yOffset:_P},EP=sP("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return Xz.curve(hz(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function SP(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*yz,u=t.pathCache;u&&u.path===n||((t.pathCache=u=gz(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Cz(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Cz(e,u,r,i,o,a)}var AP={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return nP(e.x||0,e.y||0)+(e.angle?" "+rP(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return SP(DR(e,t.angle),t)?e.set(0,0,0,0):cR(e,t,!0)},draw:JR(SP),pick:tP(SP),isect:zR(SP)};function CP(e,t){e.beginPath(),eR(e,t)}var DP={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",eR(null,t))},bound:function(e,t){var n,r;return cR(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:JR(CP),pick:tP(CP),isect:PR};function MP(e,t,n){var r,i,o,a;return!(!t.stroke||!VR(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var FP={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",iP(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return cR(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){XR(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&MP(e,t,r)&&(IR(e,t),e.stroke())}}))},pick:ZR((function(e,t,n,r){return!!e.isPointInStroke&&(MP(e,t,1)&&e.isPointInStroke(n,r))})),isect:LR},NP=oP("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),OP=oP("symbol",(function(e,t){return Jz.context(e)(t)}),RR);const $P=KS();var TP={height:IP,measureWidth:LP,estimateWidth:RP,width:RP,canvas:zP};function zP(e){TP.width=e&&$R?LP:RP}function RP(e,t){return PP(WP(e,t),IP(e))}function PP(e,t){return~~(.8*e.length*t)}function LP(e,t){return IP(e)<=0||!(t=WP(e,t))?0:BP(t,VP(e))}function BP(e,t){const n=`(${t}) ${e}`;let r=$P.get(n);return void 0===r&&($R.font=t,r=$R.measureText(e).width,$P.set(n,r)),r}function IP(e){return null!=e.fontSize?+e.fontSize||0:11}function jP(e){return null!=e.lineHeight?e.lineHeight:IP(e)+2}function UP(e){return t=e.lineBreak&&e.text&&!ZE(e.text)?e.text.split(e.lineBreak):e.text,ZE(t)?t.length>1?t:t[0]:t;var t}function qP(e){const t=UP(e);return(ZE(t)?t.length-1:0)*jP(e)}function WP(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(TP.width===LP){const t=VP(e);return e=>BP(e,t)}{const t=IP(e);return e=>PP(e,t)}}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}(e,n):n}function HP(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function VP(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+IP(e)+"px "+HP(e,t)}function GP(e){var t=e.baseline,n=IP(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*jP(e):"line-bottom"===t?.29*n-.5*jP(e):0)}zP(!0);const YP={left:"start",center:"middle",right:"end"},XP=new iR;function QP(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-vz,n+=i*Math.cos(t),r+=i*Math.sin(t)),XP.x1=n,XP.y1=r,XP}function JP(e,t,n){var r,i=TP.height(t),o=t.align,a=QP(t),s=a.x1,u=a.y1,l=t.dx||0,c=(t.dy||0)+GP(t)-Math.round(.8*i),f=UP(t);if(ZE(f)?(i+=jP(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,TP.width(t,n))),0)):r=TP.width(t,f),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*yz,s,u);else if(2===n)return e.rotatedPoints(t.angle*yz,s,u);return e}var KP={arc:aP,area:uP,group:gP,image:kP,line:EP,path:AP,rect:DP,rule:FP,shape:NP,symbol:OP,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+GP(t),o=QP(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",YP[t.align]||"start"),u?(n=nP(a,s)+" "+rP(u),(r||i)&&(n+=" "+nP(r,i))):n=nP(a+r,s+i),e("transform",n)},bound:JP,draw:function(e,t,n){XR(t,(t=>{var r,i,o,a,s,u,l,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=VP(t),e.textAlign=t.align||"left",i=(r=QP(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*yz),i=o=0),i+=t.dx||0,o+=(t.dy||0)+GP(t),u=UP(t),IR(e,t),ZE(u))for(s=jP(t),a=0;a<u.length;++a)l=WP(t,u[a]),t.fill&&WR(e,t,c)&&e.fillText(l,i,o),t.stroke&&VR(e,t,c)&&e.strokeText(l,i,o),o+=s;else l=WP(t,u),t.fill&&WR(e,t,c)&&e.fillText(l,i,o),t.stroke&&VR(e,t,c)&&e.strokeText(l,i,o);t.angle&&e.restore()}}))},pick:ZR((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=QP(t),s=a.x1,u=a.y1,l=JP(XP,t,1),c=-t.angle*yz,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)})),isect:function(e,t){const n=JP(XP,e,2);return BR(t,n[0],n[1],n[2],n[3])||BR(t,n[0],n[1],n[4],n[5])||BR(t,n[4],n[5],n[6],n[7])||BR(t,n[2],n[3],n[6],n[7])}},trail:sP("trail",(function(e,t){return Kz.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))};function ZP(e,t,n){var r=KP[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new iR),e,n)}var eL={mark:null};function tL(e,t,n){var r,i,o,a,s=KP[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?o=l[0]:(eL.mark=e,o=eL),a=ZP(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new iR,c)for(r=0,i=l.length;r<i;++r)t.union(ZP(l[r],u,n));return e.bounds=t}const nL=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function rL(e,t){return JSON.stringify(e,nL,t)}function iL(e){return oL("string"==typeof e?JSON.parse(e):e)}function oL(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&oL(o[n]);return i&&tL(e),e}function aL(e){arguments.length?this.root=iL(e):(this.root=sL({marktype:"group",name:"root",role:"frame"}),this.root.items=[new aR(this.root)])}function sL(e,t){const n={bounds:new iR,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function uL(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function lL(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function cL(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=uL(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function fL(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function dL(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function hL(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function pL(e,t){this._active=null,this._handlers={},this._loader=e||yM(),this._tooltip=t||mL}function mL(e,t,n,r){e.element().setAttribute("title",r||"")}function gL(e){this._el=null,this._bgcolor=null,this._loader=new sR(e)}aL.prototype={toJSON:function(e){return rL(this.root,e||0)},mark:function(e,t,n){const r=sL(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},pL.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName:function(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=uL(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=KP[a.marktype]).tip){for((o=hL(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},gL.prototype={initialize:function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};const yL="dragenter",vL="dragleave",bL="dragover",xL="mousedown",wL="mousemove",_L="mouseout",kL="mouseover",EL="click",SL="mousewheel",AL="touchstart",CL="touchmove",DL="touchend",ML=wL,FL=_L,NL=EL;function OL(e,t){pL.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function $L(e,t){(e=>e===AL||e===CL||e===DL?[AL,CL,DL]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function TL(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function zL(e){return function(t){this.fire(e,t),this._active=null}}US(OL,pL,{initialize:function(e,t,n){return this._canvas=e&&lL(e,"canvas"),[EL,xL,wL,_L,vL].forEach((e=>$L(this,e))),pL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",yL,vL,bL,xL,"mouseup",wL,_L,kL,EL,"dblclick","wheel",SL,AL,CL,DL],DOMMouseScroll:function(e){this.fire(SL,e)},mousemove:TL(wL,kL,_L),dragover:TL(bL,yL,vL),mouseout:zL(_L),dragleave:zL(vL),mousedown:function(e){this._down=this._active,this.fire(xL,e)},click:function(e){this._down===this._active&&(this.fire(EL,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(AL,e,!0)},touchmove:function(e){this.fire(CL,e,!0)},touchend:function(e){this.fire(DL,e,!0),this._touch=null},fire:function(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===NL&&r&&r.href?this.handleHref(t,r,r.href):e!==ML&&e!==FL||this.handleTooltip(t,r,e!==FL),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)},on:function(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&($L(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent:function(e){const t=hL(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,i){const o=this.context();return KP[e.marktype].pick.call(this,o,e,t,n,r,i)}});var RL="undefined"!=typeof window&&window.devicePixelRatio||1;function PL(e){gL.call(this,e),this._options={},this._redraw=!1,this._dirty=new iR,this._tempb=new iR}const LL=gL.prototype;function BL(e,t){pL.call(this,e,t);const n=this;n._hrefHandler=IL(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=IL(n,((e,t)=>{n.handleTooltip(e,t,e.type!==FL)}))}US(PL,gL,{initialize:function(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:W$(1,1,this._options.type),e&&this._canvas&&(fL(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),LL.initialize.call(this,e,t,n,r,i)},resize:function(e,t,n,r){if(LL.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?RL:i;e.width=t*u,e.height=n*u;for(const e in o)s[e]=o[e];a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||UE("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=(s=n,u=r,l=i,(new iR).set(0,0,u,l).translate(-s[0],-s[1]));var s,u,l;t.save();const c=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,c),t.restore(),o.clear(),this},draw:function(e,t,n){const r=KP[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),AS(n)?(e.beginPath(),n(e),e.clip()):lP(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const IL=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};US(BL,pL,{initialize:function(e,t,n){let r=this._svg;return r&&(r.removeEventListener(NL,this._hrefHandler),r.removeEventListener(ML,this._tooltipHandler),r.removeEventListener(FL,this._tooltipHandler)),this._svg=r=e&&lL(e,"svg"),r&&(r.addEventListener(NL,this._hrefHandler),r.addEventListener(ML,this._tooltipHandler),r.addEventListener(FL,this._tooltipHandler)),pL.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:IL(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const jL="aria-hidden",UL="aria-label",qL="role",WL="aria-roledescription",HL="graphics-object",VL="graphics-symbol",GL=(e,t,n)=>({[qL]:e,[WL]:t,[UL]:n||void 0}),YL=uA(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),XL={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?eB(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${ST(s)?"discrete":s} scale`+` with ${oz(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?eB(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return l=r,(l.length?l[0].toUpperCase()+l.slice(1):l)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+oS(e)}(o)}`+` with ${oz(u,s,e)}`;var l}},"title-text":{desc:"title",caption:e=>`Title text '${ZL(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${ZL(e)}'`}},QL={ariaRole:qL,ariaRoleDescription:WL,description:UL};function JL(e,t){const n=!1===t.aria;if(e(jL,n||void 0),n||null==t.description)for(const t in QL)e(QL[t],void 0);else{const n=t.mark.marktype;e(UL,t.description),e(qL,t.ariaRole||("group"===n?HL:VL)),e(WL,t.ariaRoleDescription||`${n} mark`)}}function KL(e){return!1===e.aria?{[jL]:!0}:YL[e.role]?null:XL[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return GL(t.role||VL,t.desc,n.description||r(n))}catch(e){return null}}(e,XL[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return GL(n?HL:VL,`${t} mark container`,e.description)}(e)}function ZL(e){return ES(e.text).join(" ")}function eB(e){try{return ES(oS(e.items).items[0].text).join(" ")}catch(e){return null}}const tB=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function nB(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,tB(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open:function(s,...u){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(const e of u)for(const t in e)o(t,e[t]);return a},close:function(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=tB(e),a),toString:()=>e};return a}const rB=e=>iB(nB(),e)+"";function iB(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):iB(e,r)}}return e.close()}const oB={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},aB={fill:"none","stroke-miterlimit":10},sB="http://www.w3.org/2000/xmlns/",uB=yP.xmlns;function lB(e){gL.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const cB=gL.prototype;function fB(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function dB(e,t,n){let r,i,o;if("radial"===t.gradient){let r=cL(e,n++,"pattern",uB);xB(r,{id:sz+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=cL(r,0,"rect",uB),xB(r,{width:1,height:1,fill:`url(${_B()}#${t.id})`}),xB(e=cL(e,n++,"radialGradient",uB),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else xB(e=cL(e,n++,"linearGradient",uB),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=cL(e,r,"stop",uB),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return fL(e,r),n}function hB(e,t,n){let r;return(e=cL(e,n,"clipPath",uB)).setAttribute("id",t.id),t.path?(r=cL(e,0,"path",uB),r.setAttribute("d",t.path)):(r=cL(e,0,"rect",uB),xB(r,{x:0,y:0,width:t.width,height:t.height})),fL(e,1),n+1}function pB(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=uL(o,r,uB),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=uL(o,"path",uB);a.appendChild(t),t.__data__=e;const n=uL(o,"g",uB);a.appendChild(n),n.__data__=e;const r=uL(o,"path",uB);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}US(lB,gL,{initialize:function(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=cL(e,0,"svg",uB),this._svg.setAttributeNS(sB,"xmlns",uB),this._svg.setAttributeNS(sB,"xmlns:xlink",yP["xmlns:xlink"]),this._svg.setAttribute("version",yP.version),this._svg.setAttribute("class","marks"),fL(e,1),this._root=cL(this._svg,0,"g",uB),xB(this._root,aB),fL(this._svg,1)),this.background(this._bgcolor),cB.initialize.call(this,e,t,n,r,i)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),cB.background.apply(this,arguments)},resize:function(e,t,n,r){return cB.resize.call(this,e,t,n,r),this._svg&&(xB(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=cL(e,0,"rect",uB),xB(n,{width:this._width,height:this._height,fill:t}));const r=rB(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),fL(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=KP[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,fB(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,fB(n,t)),n._update=t)));return!this._dirtyAll},mark:function(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=KP[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const l=pB(t,e,n,"g",r);l.setAttribute("class",dL(t));const c=KL(t);for(const e in c)wB(l,e,c[e]);a||wB(l,"pointer-events",o),wB(l,"clip-path",t.clip?rR(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=pB(e,l,s,i.tag,r);t&&(this._update(i,n,e),a&&function(e,t,n){t=t.lastChild.previousSibling;let r,i=0;XR(n,(n=>{r=e.mark(t,n,r),++i})),fL(t,1+i)}(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):XR(t,f),fL(l,u),l},_update:function(e,t,n){mB=t,gB=t.__values__,JL(vB,n),e.attr(vB,n,this);const r=yB[e.type];r&&r.call(this,e,t,n),mB&&this.style(mB,n)},style:function(e,t){if(null!=t)for(const n in oB){let r="font"===n?HP(t):t[n];if(r===gB[n])continue;const i=oB[n];null==r?e.removeAttribute(i):(uz(r)&&(r=lz(r,this._defs.gradient,_B())),e.setAttribute(i,r+"")),gB[n]=r}},defs:function(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=cL(e,1,"defs",uB)),r=dB(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=cL(e,1,"defs",uB)),r=hB(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):fL(n,r))},_clearDefs:function(){const e=this._defs;e.gradient={},e.clipping={}}});let mB=null,gB=null;const yB={group:function(e,t,n){const r=mB=t.childNodes[2];gB=r.__values__,e.foreground(vB,n,this),gB=t.__values__,mB=t.childNodes[1],e.content(vB,n,this);const i=mB=t.childNodes[0];e.background(vB,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==gB.events&&(wB(r,"pointer-events",o),wB(i,"pointer-events",o),gB.events=o),n.strokeForeground&&n.stroke){const e=n.fill;wB(r,"display",null),this.style(i,n),wB(i,"stroke",null),e&&(n.fill=null),gB=r.__values__,this.style(r,n),e&&(n.fill=e),mB=null}else wB(r,"display","none")},image:function(e,t,n){!1===n.smooth?(bB(t,"image-rendering","optimizeSpeed"),bB(t,"image-rendering","pixelated")):bB(t,"image-rendering",null)},text:function(e,t,n){const r=UP(n);let i,o,a,s;ZE(r)?(o=r.map((e=>WP(n,e))),i=o.join("\n"),i!==gB.text&&(fL(t,0),a=t.ownerDocument,s=jP(n),o.forEach(((e,r)=>{const i=uL(a,"tspan",uB);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),gB.text=i)):(o=WP(n,r),o!==gB.text&&(t.textContent=o,gB.text=o)),wB(t,"font-family",HP(n)),wB(t,"font-size",IP(n)+"px"),wB(t,"font-style",n.fontStyle),wB(t,"font-variant",n.fontVariant),wB(t,"font-weight",n.fontWeight)}};function vB(e,t,n){t!==gB[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(mB,e,t,n):wB(mB,e,t),gB[e]=t)}function bB(e,t,n){n!==gB[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),gB[t]=n)}function xB(e,t){for(const n in t)wB(e,n,t[n])}function wB(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function _B(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function kB(e){gL.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}US(kB,gL,{svg:function(){return this._text},_render:function(e){const t=nB();t.open("svg",TS({},yP,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",aB,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){const n=KP[t.marktype],r=n.tag,i=[JL,n.attr];e.open("g",{class:dL(t),"clip-path":t.clip?rR(this,t,t.group):null},KL(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=UP(o);if(ZE(t)){const n={x:0,dy:jP(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(WP(o,t[r])).close()}else e.text(WP(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),XR(o,(t=>this.mark(e,t))),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):XR(t,o),e.close()},href:function(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr:function(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&function(e,t,n,r,i){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=HP(t),e["font-size"]=IP(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in oB){let r=t[n];const o=oB[n];("transparent"!==r||"fill"!==o&&"stroke"!==o)&&null!=r&&(uz(r)&&(r=lz(r,i.gradient,"")),e[o]=r)}}(i,t,e,r,this._defs),i},defs:function(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:sz+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const EB="canvas",SB="none",AB={Canvas:EB,PNG:"png",SVG:"svg",None:SB},CB={};function DB(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(CB[e]=t,this):CB[e]}function MB(e,t,n){const r=[],i=(new iR).union(t),o=e.marktype;return o?FB(e,i,n,r):"group"===o?NB(e,i,n,r):UE("Intersect scene must be mark node or group item.")}function FB(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)NB(i[s],t,n,r);else for(const e=KP[o].isect;s<a;++s){const n=i[s];OB(n,t,e)&&r.push(n)}}return r}function NB(e,t,n,r){n&&n(e.mark)&&OB(e,t,KP.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)FB(i[e],t,n,r);t.translate(a,s)}return r}function OB(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}CB.canvas=CB.png={renderer:PL,headless:PL,handler:OL},CB.svg={renderer:lB,headless:kB,handler:BL},CB.none={};const $B=new iR;function TB(e){const t=e.clip;if(AS(t))t(DR($B.clear()));else{if(!t)return;$B.set(0,0,e.group.width,e.group.height)}e.bounds.intersect($B)}function zB(e,t,n){return e===t||("path"===n?RB(e,t):e instanceof Date&&t instanceof Date?+e==+t:GS(e)&&GS(t)?Math.abs(e-t)<=1e-9:e&&t&&(eS(e)||eS(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!zB(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function RB(e,t){return zB(gz(e),gz(t))}function PB(){nR(),az=0}t(MO,"textMetrics",(function(){return TP})),t(MO,"serializeXML",(function(){return rB})),t(MO,"sceneZOrder",(function(){return YR})),t(MO,"sceneVisit",(function(){return XR})),t(MO,"sceneToJSON",(function(){return rL})),t(MO,"scenePickVisit",(function(){return QR})),t(MO,"sceneFromJSON",(function(){return iL})),t(MO,"sceneEqual",(function(){return zB})),t(MO,"resetSVGDefIds",(function(){return PB})),t(MO,"resetSVGClipId",(function(){return nR})),t(MO,"renderModule",(function(){return DB})),t(MO,"point",(function(){return hL})),t(MO,"pathTrail",(function(){return jz})),t(MO,"pathSymbols",(function(){return Nz})),t(MO,"pathRender",(function(){return Cz})),t(MO,"pathRectangle",(function(){return Iz})),t(MO,"pathParse",(function(){return gz})),t(MO,"pathEqual",(function(){return RB})),t(MO,"pathCurves",(function(){return hz})),t(MO,"multiLineOffset",(function(){return qP})),t(MO,"markup",(function(){return nB})),t(MO,"lineHeight",(function(){return jP})),t(MO,"intersectRule",(function(){return LR})),t(MO,"intersectPoint",(function(){return RR})),t(MO,"intersectPath",(function(){return zR})),t(MO,"intersectBoxLine",(function(){return BR})),t(MO,"intersect",(function(){return MB})),t(MO,"fontSize",(function(){return IP})),t(MO,"fontFamily",(function(){return HP})),t(MO,"font",(function(){return VP})),t(MO,"domFind",(function(){return lL})),t(MO,"domCreate",(function(){return uL})),t(MO,"domClear",(function(){return fL})),t(MO,"domChild",(function(){return cL})),t(MO,"boundStroke",(function(){return cR})),t(MO,"boundMark",(function(){return tL})),t(MO,"boundItem",(function(){return ZP})),t(MO,"boundContext",(function(){return DR})),t(MO,"boundClip",(function(){return TB})),t(MO,"Scenegraph",(function(){return aL})),t(MO,"SVGStringRenderer",(function(){return kB})),t(MO,"SVGRenderer",(function(){return lB})),t(MO,"SVGHandler",(function(){return BL})),t(MO,"ResourceLoader",(function(){return sR})),t(MO,"Renderer",(function(){return gL})),t(MO,"RenderType",(function(){return AB})),t(MO,"Marks",(function(){return KP})),t(MO,"Item",(function(){return oR})),t(MO,"Handler",(function(){return pL})),t(MO,"GroupItem",(function(){return aR})),t(MO,"Gradient",(function(){return fz})),t(MO,"CanvasRenderer",(function(){return PL})),t(MO,"CanvasHandler",(function(){return OL})),t(MO,"Bounds",(function(){return iR}));const LB="top",BB="left",IB="right",jB="bottom",UB="start",qB="middle",WB="end",HB="group",VB="axis",GB="title",YB="frame",XB="scope",QB="legend",JB="row-header",KB="row-footer",ZB="row-title",eI="column-header",tI="column-footer",nI="column-title",rI="padding",iI="fit",oI="fit-x",aI="fit-y",sI="none",uI="all",lI="each",cI="flush",fI="column",dI="row";function hI(e){nF.call(this,null,e)}function pI(e,t,n){return t(e.bounds.clear(),e,n)}US(hI,nF,{transform:function(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=KP[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=pI(r,a),r.items.forEach((e=>{e.bounds.clear().union(u)}));else if(i===HB||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),u.clear(),r.items.forEach((e=>u.union(pI(e,a)))),r.role){case VB:case QB:case GB:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{u.union(pI(e,a))})),t.visit(t.MOD,(e=>{s=s||u.alignsWith(e.bounds),n.dirty(e),u.union(pI(e,a))})),s&&(u.clear(),r.items.forEach((e=>u.union(e.bounds))));return TB(r),t.modifies("bounds")}});function mI(e){nF.call(this,0,e)}function gI(e){nF.call(this,null,e)}function yI(e){nF.call(this,null,e)}mI.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},US(mI,nF,{transform:function(e,t){const n=(i=t.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++o)),n.set(this.value=o),t}}),US(gI,nF,{transform:function(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===HB?aR:oR;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const vI={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&bI(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},bI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),xI=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(bI(o,n=e[r].bounds,t))return!0},wI=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},_I=e=>(e.forEach((e=>e.opacity=1)),e),kI=(e,t)=>e.reflow(t.modified()).modifies("opacity");function EI(e){nF.call(this,null,e)}US(yI,nF,{transform:function(e,t){const n=vI[e.method]||vI.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(_I(a),t=kI(t,e)),t;if(a=a.filter(wI),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=_I(a),t=kI(t,e),i.length>=3&&xI(i,r)){do{i=n(i,r)}while(i.length>=3&&xI(i,r));i.length<3&&!oS(a).opacity&&(i.length>1&&(oS(i).opacity=0),oS(a).opacity=1)}var s,u,l,c,f;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,u=e.boundOrient,l=+e.boundTolerance,c=s.range(),f=new iR,u===LB||u===jB?f.set(c[0],-1/0,c[1],1/0):f.set(-1/0,c[0],1/0,c[1]),f.expand(l||1),o=e=>f.encloses(e.bounds),a.forEach((e=>{o(e)||(e.opacity=0)})));const d=i[0].mark.bounds.clear();return a.forEach((e=>{e.opacity&&d.union(e.bounds)})),t}}),US(EI,nF,{transform:function(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const SI=new iR;function AI(e,t,n){return e[t]===n?0:(e[t]=n,1)}function CI(e){var t=e.items[0].orient;return t===BB||t===IB}function DI(e,t,n,r){var i,o,a=t.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,l=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&qP(g),x=0,w=0;switch(SI.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),l){case LB:x=h||0,w=-d,o=Math.max(p,Math.min(m,-v.y1)),v.add(0,-o).add(f,0),g&&MI(e,g,o,y,b,0,-1,v);break;case BB:x=-d,w=h||0,o=Math.max(p,Math.min(m,-v.x1)),v.add(-o,0).add(0,f),g&&MI(e,g,o,y,b,1,-1,v);break;case IB:x=n+d,w=h||0,o=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(o,f),g&&MI(e,g,o,y,b,1,1,v);break;case jB:x=h||0,w=r+d,o=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(f,o),g&&MI(e,g,o,y,0,0,1,v);break;default:x=a.x,w=a.y}return cR(v.translate(x,w),a),AI(a,"x",x+u)|AI(a,"y",w+u)&&(a.bounds=SI,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function MI(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let l=0,c=0;e.dirty(t),o?l=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-l,-c)),e.dirty(t)}s.union(u)}const FI=(e,t)=>Math.floor(Math.min(e,t)),NI=(e,t)=>Math.ceil(Math.max(e,t));function OI(e){return(new iR).set(0,0,e.width||0,e.height||0)}function $I(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function TI(e,t,n){const r=eS(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function zI(e){return e<0?Math.ceil(-e):0}function RI(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=!n.nodirty,m=n.bounds===cI?OI:$I,g=SI.set(0,0,0,0),y=TI(n.align,fI),v=TI(n.align,dI),b=TI(n.padding,fI),x=TI(n.padding,dI),w=n.columns||t.length,_=w<=0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),A=0,C=Array(k),D=Array(_),M=0,F=Array(k),N=Array(k),O=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<_;++i)D[i]=0;for(i=0;i<k;++i)u=t[i],s=O[i]=m(u),u.x=u.x||0,F[i]=0,u.y=u.y||0,N[i]=0,o=i%w,a=~~(i/w),A=Math.max(A,l=Math.ceil(s.x2)),M=Math.max(M,c=Math.ceil(s.y2)),S[o]=Math.max(S[o],l),D[a]=Math.max(D[a],c),E[i]=b+zI(s.x1),C[i]=x+zI(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%w==0&&(E[i]=0),i<w&&(C[i]=0);if(y===lI)for(o=1;o<w;++o){for(h=0,i=o;i<k;i+=w)h<E[i]&&(h=E[i]);for(i=o;i<k;i+=w)E[i]=h+S[o-1]}else if(y===uI){for(h=0,i=0;i<k;++i)i%w&&h<E[i]&&(h=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=h+A)}else for(y=!1,o=1;o<w;++o)for(i=o;i<k;i+=w)E[i]+=S[o-1];if(v===lI)for(a=1;a<_;++a){for(h=0,r=(i=a*w)+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=a*w;i<r;++i)C[i]=h+D[a-1]}else if(v===uI){for(h=0,i=w;i<k;++i)h<C[i]&&(h=C[i]);for(i=w;i<k;++i)C[i]=h+M}else for(v=!1,a=1;a<_;++a)for(r=(i=a*w)+w;i<r;++i)C[i]+=D[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),F[i]+=f-t[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<k;i+=w)d+=C[i],N[i]+=d-t[i].y;if(y&&TI(n.center,fI)&&_>1)for(i=0;i<k;++i)(f=(s=y===uI?A:S[i%w])-O[i].x2-t[i].x-F[i])>0&&(F[i]+=f/2);if(v&&TI(n.center,dI)&&1!==w)for(i=0;i<k;++i)(d=(s=v===uI?M:D[~~(i/w)])-O[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)g.union(O[i].translate(F[i],N[i]));switch(f=TI(n.anchor,"x"),d=TI(n.anchor,"y"),TI(n.anchor,fI)){case WB:f-=g.width();break;case qB:f-=g.width()/2}switch(TI(n.anchor,dI)){case WB:d-=g.height();break;case qB:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=F[i]+=f,u.y+=N[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(F[i],N[i]))),p&&e.dirty(u);return g}function PI(e,t,n){var r,i,o,a,s,u,l,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===HB)switch(t.role){case VB:case QB:case GB:break;case JB:a.rowheaders.push(...n);break;case KB:a.rowfooters.push(...n);break;case eI:a.colheaders.push(...n);break;case tI:a.colfooters.push(...n);break;case ZB:a.rowtitle=n[0];break;case nI:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===cI?LI:BI,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const y=RI(e,f,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(u=TI(n.headerBand,dI,null),r=II(e,c.rowheaders,f,p,m,-TI(h,"rowHeader"),FI,0,d,"x1",0,p,1,u)),c.colheaders&&(u=TI(n.headerBand,fI,null),i=II(e,c.colheaders,f,p,p,-TI(h,"columnHeader"),FI,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=TI(n.footerBand,dI,null),o=II(e,c.rowfooters,f,p,m,TI(h,"rowFooter"),NI,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=TI(n.footerBand,fI,null),a=II(e,c.colfooters,f,p,p,TI(h,"columnFooter"),NI,1,d,"y2",g-p,1,p,u)),c.rowtitle&&(s=TI(n.titleAnchor,dI),l=TI(h,"rowTitle"),l=s===WB?o+l:r-l,u=TI(n.titleBand,dI,.5),jI(e,c.rowtitle,l,0,y,u)),c.coltitle&&(s=TI(n.titleAnchor,fI),l=TI(h,"columnTitle"),l=s===WB?a+l:i-l,u=TI(n.titleBand,fI,.5),jI(e,c.coltitle,l,1,y,u))}function LI(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function BI(e,t){return e.bounds[t]}function II(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,m,g,y,v,b,x,w,_,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=a(E,u(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=c,m=0,y=t.length;m<y;++m,p+=f){for(v=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=E):(w=E,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),v.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),S=a(S,v[l])}return S}function jI(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function UI(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),u=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",UB),c=l===WB?1:l===qB?.5:0,f={align:lI,bounds:s("bounds",cI),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case BB:f.anchor={x:Math.floor(r.x1)-u,column:WB,y:c*(a||r.height()+2*r.y1),row:l};break;case IB:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case LB:f.anchor={y:Math.floor(i.y1)-u,row:WB,x:c*(o||i.width()+2*i.x1),column:l};break;case jB:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:WB};break;case"bottom-left":f.anchor={x:u,y:a-u,row:WB};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:WB,row:WB}}return f}function qI(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case BB:i+=Math.ceil(a.bounds.width())+u;break;case IB:case jB:break;default:o+=a.bounds.height()+u}switch((i||o)&&HI(e,n,i,o),a.orient){case BB:c+=WI(t,n,a,s,1,1);break;case IB:l+=WI(t,n,a,WB,0,0)+u,c+=WI(t,n,a,s,1,1);break;case jB:l+=WI(t,n,a,s,0,0),c+=WI(t,n,a,WB,-1,0,1)+u;break;default:l+=WI(t,n,a,s,0,0)}(l||c)&&HI(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(HI(e,n,-l,0),HI(e,a,-l,0))}else(i||o)&&HI(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),a!==sI&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,cR(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function WI(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!o&&u||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:qP(n);return Math.round(r===UB?c:r===WB?f-d:.5*(l-d))}function HI(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function VI(e){nF.call(this,null,e)}US(VI,nF,{transform:function(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&PI(n,t,e.layout),function(e,t,n){var r,i,o,a,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new iR).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case VB:(CI(i)?d:h).union(DI(e,i,l,c));break;case GB:r=i;break;case QB:p.push(qI(e,i));break;case YB:case XB:case JB:case KB:case ZB:case eI:case tI:case nI:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(o=e.orient||IB)!==sI&&(t[o]||(t[o]=[])).push(e)}));for(const r in t){const i=t[r];RI(e,i,UI(i,r,n.legends,d,h,l,c))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===iI)switch(t.orient){case BB:case IB:f.add(r.x1,0).add(r.x2,0);break;case LB:case jB:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,u=a.orient,l=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===BB||u===IB?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==HB?u===BB?(m=i.y2,p=i.y1):u===IB?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===BB&&(m=r,p=0),o=l===UB?m:l===WB?p:(m+p)/2,h&&h.text){switch(u){case LB:case jB:b=d.bounds.height()+f;break;case BB:v=d.bounds.width()+f;break;case IB:v=-d.bounds.width()-f}SI.clear().union(h.bounds),SI.translate(v-(h.x||0),b-(h.y||0)),AI(h,"x",v)|AI(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(SI),h.mark.bounds.clear().union(SI),e.dirty(h)),SI.clear().union(h.bounds)}else SI.clear();switch(SI.union(d.bounds),u){case LB:g=o,y=i.y1-SI.height()-c;break;case BB:g=i.x1-SI.width()-c,y=o;break;case IB:g=i.x2+SI.width()+c,y=o;break;case jB:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return AI(a,"x",g)|AI(a,"y",y)&&(SI.translate(g,y),e.dirty(a),a.bounds.clear().union(SI),t.bounds.clear().union(SI),e.dirty(a)),a.bounds}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===rI){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===sI?(l=0,f=0,u=a,c=s):o===iI?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===oI?(u=Math.max(0,a-l-d),s=c+f+h):o===aI?(a=u+l+d,c=Math.max(0,s-f-h)):"pad"===o&&(a=u+l+d,s=c+f+h);e._resizeView(a,s,u,c,[l,f],i.resize)}(e,t,f,n)}(n,t,e)})),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}}),t(DO,"viewlayout",(function(){return VI})),t(DO,"render",(function(){return EI})),t(DO,"overlap",(function(){return yI})),t(DO,"mark",(function(){return gI})),t(DO,"identifier",(function(){return mI})),t(DO,"bound",(function(){return hI}));var GI={};function YI(e){nF.call(this,null,e)}function XI(e){nF.call(this,null,e)}function QI(){return SM({})}function JI(e){nF.call(this,null,e)}function KI(e){nF.call(this,[],e)}US(YI,nF,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=WT(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||GT(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?HT(o,e.values,a):VT(o,a);return i&&(r.rem=i),i=u.map(((e,t)=>SM({index:t/(u.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(SM({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),US(XI,nF,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||QI,o=e.key||kM,a=this.value;return ZE(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&UE("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=IS().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,(e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),US(JI,nF,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ZE(o)){if(!n.changed()&&!o.every((e=>i[e])))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||QE,u=i.enter||QE,l=i.exit||QE,c=(o&&!a?i[o]:s)||QE;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==QE&&c!==s&&(t.visit(t.ADD,(t=>{c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==QE&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),a||c!==QE){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,(t=>{const i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(i,(t=>{(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),US(KI,nF,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),u=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||IT,f=e.scale,d=+e.limit,h=WT(f,null==e.count?5:e.count,e.minstep),p=!!e.values||c===IT,m=e.format||KT(s,f,h,c,e.formatSpecifier,e.formatType,p),g=e.values||JT(f,h);return l&&(u.rem=l),c===IT?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=g.slice(0,d-1),a=!0):l=g,AS(i=e.size)?(e.values||0!==f(l[0])||(l=l.slice(1)),o=l.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=OS(o=i||8),l=l.map(((t,n)=>SM({index:n,label:m(t,n,l),value:t,offset:o,size:i(t,e)}))),a&&(a=g[l.length],l.push(SM({index:l.length,label:"".concat(g.length-l.length," entries"),value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=f.domain(),r=TT(f,n[0],oS(n)),g.length<3&&!e.values&&n[0]!==oS(n)&&(g=[n[0],oS(n)]),l=g.map(((e,t)=>SM({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+oS(t),o=i-r;if(e.type===iT){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(f),l=g.map(((e,t)=>SM({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),u.source=l,u.add=l,this.value=l,u}});const ZI=e=>e.source.x,ej=e=>e.source.y,tj=e=>e.target.x,nj=e=>e.target.y;function rj(e){nF.call(this,{},e)}rj.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},US(rj,nF,{transform:function(e,t){var n=e.sourceX||ZI,r=e.sourceY||ej,i=e.targetX||tj,o=e.targetY||nj,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=sj.get(u+"-"+s)||sj.get(u);return l||UE("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[a]=l(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)}});const ij=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,oj=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},aj=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},sj=IS({line:ij,"line-radial":(e,t,n,r)=>ij(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:oj,"arc-radial":(e,t,n,r)=>oj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:aj,"curve-radial":(e,t,n,r)=>aj(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function uj(e){nF.call(this,null,e)}uj.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},US(uj,nF,{transform:function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],u=e.field||YE,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,m=(c-l)/ay(d),g=oy(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[a]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(o)}});function lj(e){return ET(e)&&e!==eT}const cj=uA(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function fj(e){nF.call(this,null,e),this.modified(!0)}function dj(e,t,n){CT(e)&&(Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&n.warn("Log scale domain includes zero: "+rA(t)));return t}function hj(e,t,n){return AS(e)&&(t||n)?NT(e,pj(t||[0,1],n)):e}function pj(e,t){return t?e.slice().reverse():e}function mj(e){nF.call(this,null,e)}US(fj,nF,{transform:function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===eT)return"sequential-linear";(function(e){const t=e.type;return ET(t)&&t!==K$&&t!==Z$&&(e.scheme||e.range&&e.range.length&&e.range.every(XS))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||G$).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=wT(i)()),e)if(!cj[i]){if("padding"===i&&lj(r.type))continue;AS(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==sT&&e!==aT&&UE("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===aT?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*V$(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;ZE(t.scheme)?r=OT(t.scheme,t.interpolate,t.interpolateGamma):(r=BT(t.scheme.toLowerCase()))||UE("Unrecognized scheme name: ".concat(t.scheme));return n=e===iT?n+1:e===uT?n-1:e===nT||e===rT?+t.schemeCount||5:n,DT(e)?hj(r,i,t.reverse):AS(r)?$T(hj(r,i),n):e===oT?r:r.slice(0,n)}(r,t,n),AS(o))){if(e.interpolator)return e.interpolator(o);UE("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&DT(r))return e.interpolator(OT(pj(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(zT(t.interpolate,t.interpolateGamma)):AS(e.round)?e.round(i):AS(e.rangeRound)&&e.interpolate(i?gm:hm);o&&e.range(pj(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!ZE(r)){const t=e.domain(),n=t[0],i=oS(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||UE("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=oy(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===uT&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(dj(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===G$||t===X$||t===Q$)}(e);if(!a)return 0;lj(s)&&t.padding&&a[0]!==oS(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(oS(n)-n[0]),s=a/(a-2*r),u=e===Y$?bS(t,null,s):e===Q$?xS(t,null,s,.5):e===X$?xS(t,null,s,i||1):e===J$?wS(t,null,s,o||1):vS(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));if((u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}e.domain(dj(s,a,n)),s===oT&&e.unknown(t.domainImplicit?tv:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&WT(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),US(mj,nF,{transform:function(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(MM(e.sort)),this.modified(n),t}});const gj="zero",yj="center",vj="normalize",bj=["y0","y1"];function xj(e){nF.call(this,null,e)}function wj(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function _j(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(o=e[l])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function kj(e,t,n,r,i){for(var o,a,s=0,u=0,l=e.length,c=0;c<l;++c)(o=+n(a=e[c]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}xj.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:gj,values:[gj,yj,vj]},{name:"as",type:"string",array:!0,length:2,default:bj}]},US(xj,nF,{transform:function(e,t){var n,r,i,o,a=e.as||bj,s=a[0],u=a[1],l=MM(e.sort),c=e.field||YE,f=e.offset===yj?wj:e.offset===vj?_j:kj;for(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(o=0,f=0,a=(c=h[l]).length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,u);return t.reflow(e.modified()).modifies(a)}}),t(GI,"stack",(function(){return xj})),t(GI,"sortitems",(function(){return mj})),t(GI,"scale",(function(){return fj})),t(GI,"pie",(function(){return uj})),t(GI,"linkpath",(function(){return rj})),t(GI,"legendentries",(function(){return KI})),t(GI,"encode",(function(){return JI})),t(GI,"datajoin",(function(){return XI})),t(GI,"axisticks",(function(){return YI}));var Ej={},Sj=1e-6,Aj=1e-12,Cj=Math.PI,Dj=Cj/2,Mj=Cj/4,Fj=2*Cj,Nj=180/Cj,Oj=Cj/180,$j=Math.abs,Tj=Math.atan,zj=Math.atan2,Rj=Math.cos,Pj=Math.ceil,Lj=Math.exp,Bj=(Math.floor,Math.hypot),Ij=Math.log,jj=Math.pow,Uj=Math.sin,qj=Math.sign||function(e){return e>0?1:e<0?-1:0},Wj=Math.sqrt,Hj=Math.tan;function Vj(e){return e>1?0:e<-1?Cj:Math.acos(e)}function Gj(e){return e>1?Dj:e<-1?-Dj:Math.asin(e)}function Yj(){}function Xj(e,t){e&&Jj.hasOwnProperty(e.type)&&Jj[e.type](e,t)}var Qj={Feature:function(e,t){Xj(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Xj(n[r].geometry,t)}},Jj={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Kj(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Kj(n[r],t,0)},Polygon:function(e,t){Zj(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Zj(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Xj(n[r],t)}};function Kj(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function Zj(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Kj(e[n],t,1);t.polygonEnd()}var eU,tU,nU,rU,iU,oU=function(e,t){e&&Qj.hasOwnProperty(e.type)?Qj[e.type](e,t):Xj(e,t)},aU=new Qg,sU=new Qg,uU={point:Yj,lineStart:Yj,lineEnd:Yj,polygonStart:function(){aU=new Qg,uU.lineStart=lU,uU.lineEnd=cU},polygonEnd:function(){var e=+aU;sU.add(e<0?Fj+e:e),this.lineStart=this.lineEnd=this.point=Yj},sphere:function(){sU.add(Fj)}};function lU(){uU.point=fU}function cU(){dU(eU,tU)}function fU(e,t){uU.point=dU,eU=e,tU=t,nU=e*=Oj,rU=Rj(t=(t*=Oj)/2+Mj),iU=Uj(t)}function dU(e,t){var n=(e*=Oj)-nU,r=n>=0?1:-1,i=r*n,o=Rj(t=(t*=Oj)/2+Mj),a=Uj(t),s=iU*a,u=rU*o+s*Rj(i),l=s*r*Uj(i);aU.add(zj(l,u)),nU=e,rU=o,iU=a}var hU,pU,mU,gU,yU,vU,bU,xU,wU,_U,kU;function EU(e){return[zj(e[1],e[0]),Gj(e[2])]}function SU(e){var t=e[0],n=e[1],r=Rj(n);return[r*Rj(t),r*Uj(t),Uj(n)]}function AU(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function CU(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function DU(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function MU(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function FU(e){var t=Wj(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var NU={point:OU,lineStart:TU,lineEnd:zU,polygonStart:function(){NU.point=RU,NU.lineStart=PU,NU.lineEnd=LU,wU=new Qg,uU.polygonStart()},polygonEnd:function(){uU.polygonEnd(),NU.point=OU,NU.lineStart=TU,NU.lineEnd=zU,aU<0?(hU=-(mU=180),pU=-(gU=90)):wU>Sj?gU=90:wU<-1e-6&&(pU=-90),kU[0]=hU,kU[1]=mU},sphere:function(){hU=-(mU=180),pU=-(gU=90)}};function OU(e,t){_U.push(kU=[hU=e,mU=e]),t<pU&&(pU=t),t>gU&&(gU=t)}function $U(e,t){var n=SU([e*Oj,t*Oj]);if(xU){var r=CU(xU,n),i=CU([r[1],-r[0],0],r);FU(i),i=EU(i);var o,a=e-yU,s=a>0?1:-1,u=i[0]*Nj*s,l=$j(a)>180;l^(s*yU<u&&u<s*e)?(o=i[1]*Nj)>gU&&(gU=o):l^(s*yU<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*Nj)<pU&&(pU=o):(t<pU&&(pU=t),t>gU&&(gU=t)),l?e<yU?BU(hU,e)>BU(hU,mU)&&(mU=e):BU(e,mU)>BU(hU,mU)&&(hU=e):mU>=hU?(e<hU&&(hU=e),e>mU&&(mU=e)):e>yU?BU(hU,e)>BU(hU,mU)&&(mU=e):BU(e,mU)>BU(hU,mU)&&(hU=e)}else _U.push(kU=[hU=e,mU=e]);t<pU&&(pU=t),t>gU&&(gU=t),xU=n,yU=e}function TU(){NU.point=$U}function zU(){kU[0]=hU,kU[1]=mU,NU.point=OU,xU=null}function RU(e,t){if(xU){var n=e-yU;wU.add($j(n)>180?n+(n>0?360:-360):n)}else vU=e,bU=t;uU.point(e,t),$U(e,t)}function PU(){uU.lineStart()}function LU(){RU(vU,bU),uU.lineEnd(),$j(wU)>Sj&&(hU=-(mU=180)),kU[0]=hU,kU[1]=mU,xU=null}function BU(e,t){return(t-=e)<0?t+360:t}function IU(e,t){return e[0]-t[0]}function jU(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var UU,qU,WU,HU,VU,GU,YU,XU,QU,JU,KU,ZU,eq,tq,nq,rq,iq={sphere:Yj,point:oq,lineStart:sq,lineEnd:cq,polygonStart:function(){iq.lineStart=fq,iq.lineEnd=dq},polygonEnd:function(){iq.lineStart=sq,iq.lineEnd=cq}};function oq(e,t){e*=Oj;var n=Rj(t*=Oj);aq(n*Rj(e),n*Uj(e),Uj(t))}function aq(e,t,n){++UU,WU+=(e-WU)/UU,HU+=(t-HU)/UU,VU+=(n-VU)/UU}function sq(){iq.point=uq}function uq(e,t){e*=Oj;var n=Rj(t*=Oj);tq=n*Rj(e),nq=n*Uj(e),rq=Uj(t),iq.point=lq,aq(tq,nq,rq)}function lq(e,t){e*=Oj;var n=Rj(t*=Oj),r=n*Rj(e),i=n*Uj(e),o=Uj(t),a=zj(Wj((a=nq*o-rq*i)*a+(a=rq*r-tq*o)*a+(a=tq*i-nq*r)*a),tq*r+nq*i+rq*o);qU+=a,GU+=a*(tq+(tq=r)),YU+=a*(nq+(nq=i)),XU+=a*(rq+(rq=o)),aq(tq,nq,rq)}function cq(){iq.point=oq}function fq(){iq.point=hq}function dq(){pq(ZU,eq),iq.point=oq}function hq(e,t){ZU=e,eq=t,e*=Oj,t*=Oj,iq.point=pq;var n=Rj(t);tq=n*Rj(e),nq=n*Uj(e),rq=Uj(t),aq(tq,nq,rq)}function pq(e,t){e*=Oj;var n=Rj(t*=Oj),r=n*Rj(e),i=n*Uj(e),o=Uj(t),a=nq*o-rq*i,s=rq*r-tq*o,u=tq*i-nq*r,l=Bj(a,s,u),c=Gj(l),f=l&&-c/l;QU.add(f*a),JU.add(f*s),KU.add(f*u),qU+=c,GU+=c*(tq+(tq=r)),YU+=c*(nq+(nq=i)),XU+=c*(rq+(rq=o)),aq(tq,nq,rq)}function mq(e,t,n){var r=oy(e,t-Sj,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function gq(e,t,n){var r=oy(e,t-Sj,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}var yq,vq,bq,xq,wq=e=>e,_q=new Qg,kq=new Qg,Eq={point:Yj,lineStart:Yj,lineEnd:Yj,polygonStart:function(){Eq.lineStart=Sq,Eq.lineEnd=Dq},polygonEnd:function(){Eq.lineStart=Eq.lineEnd=Eq.point=Yj,_q.add($j(kq)),kq=new Qg},result:function(){var e=_q/2;return _q=new Qg,e}};function Sq(){Eq.point=Aq}function Aq(e,t){Eq.point=Cq,yq=bq=e,vq=xq=t}function Cq(e,t){kq.add(xq*e-bq*t),bq=e,xq=t}function Dq(){Cq(yq,vq)}var Mq=1/0,Fq=Mq,Nq=-Mq,Oq=Nq,$q={point:function(e,t){e<Mq&&(Mq=e);e>Nq&&(Nq=e);t<Fq&&(Fq=t);t>Oq&&(Oq=t)},lineStart:Yj,lineEnd:Yj,polygonStart:Yj,polygonEnd:Yj,result:function(){var e=[[Mq,Fq],[Nq,Oq]];return Nq=Oq=-(Fq=Mq=1/0),e}};var Tq,zq,Rq,Pq,Lq=0,Bq=0,Iq=0,jq=0,Uq=0,qq=0,Wq=0,Hq=0,Vq=0,Gq={point:Yq,lineStart:Xq,lineEnd:Kq,polygonStart:function(){Gq.lineStart=Zq,Gq.lineEnd=eW},polygonEnd:function(){Gq.point=Yq,Gq.lineStart=Xq,Gq.lineEnd=Kq},result:function(){var e=Vq?[Wq/Vq,Hq/Vq]:qq?[jq/qq,Uq/qq]:Iq?[Lq/Iq,Bq/Iq]:[NaN,NaN];return Lq=Bq=Iq=jq=Uq=qq=Wq=Hq=Vq=0,e}};function Yq(e,t){Lq+=e,Bq+=t,++Iq}function Xq(){Gq.point=Qq}function Qq(e,t){Gq.point=Jq,Yq(Rq=e,Pq=t)}function Jq(e,t){var n=e-Rq,r=t-Pq,i=Wj(n*n+r*r);jq+=i*(Rq+e)/2,Uq+=i*(Pq+t)/2,qq+=i,Yq(Rq=e,Pq=t)}function Kq(){Gq.point=Yq}function Zq(){Gq.point=tW}function eW(){nW(Tq,zq)}function tW(e,t){Gq.point=nW,Yq(Tq=Rq=e,zq=Pq=t)}function nW(e,t){var n=e-Rq,r=t-Pq,i=Wj(n*n+r*r);jq+=i*(Rq+e)/2,Uq+=i*(Pq+t)/2,qq+=i,Wq+=(i=Pq*e-Rq*t)*(Rq+e),Hq+=i*(Pq+t),Vq+=3*i,Yq(Rq=e,Pq=t)}function rW(e){this._context=e}rW.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Fj)}},result:Yj};var iW,oW,aW,sW,uW,lW=new Qg,cW={point:Yj,lineStart:function(){cW.point=fW},lineEnd:function(){iW&&dW(oW,aW),cW.point=Yj},polygonStart:function(){iW=!0},polygonEnd:function(){iW=null},result:function(){var e=+lW;return lW=new Qg,e}};function fW(e,t){cW.point=dW,oW=sW=e,aW=uW=t}function dW(e,t){sW-=e,uW-=t,lW.add(Wj(sW*sW+uW*uW)),sW=e,uW=t}function hW(){this._string=[]}function pW(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}hW.prototype={_radius:4.5,_circle:pW(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=pW(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var mW=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),oU(e,n(r))),r.result()}return o.area=function(e){return oU(e,n(Eq)),Eq.result()},o.measure=function(e){return oU(e,n(cW)),cW.result()},o.bounds=function(e){return oU(e,n($q)),$q.result()},o.centroid=function(e){return oU(e,n(Gq)),Gq.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,wq):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new hW):new rW(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},gW=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:Yj,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},yW=function(e,t){return $j(e[0]-t[0])<Sj&&$j(e[1]-t[1])<Sj};function vW(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var bW=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(yW(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new vW(r,e,null,!0)),u.push(n.o=new vW(r,null,n,!1)),s.push(n=new vW(a,e,null,!1)),u.push(n.o=new vW(a,null,n,!0))}})),s.length){for(u.sort(t),xW(s),xW(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function xW(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function wW(e){return $j(e[0])<=Cj?e[0]:qj(e[0])*(($j(e[0])+Cj)%Fj-Cj)}var _W=function(e,t,n,r){return function(i){var o,a,s,u=t(i),l=gW(),c=t(l),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=iy(a);var e=function(e,t){var n=wW(t),r=t[1],i=Uj(r),o=[Uj(n),-Rj(n),0],a=0,s=0,u=new Qg;1===i?r=Dj+Sj:-1===i&&(r=-Dj-Sj);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=wW(h),m=h[1]/2+Mj,g=Uj(m),y=Rj(m),v=0;v<d;++v,p=x,g=_,y=k,h=b){var b=f[v],x=wW(b),w=b[1]/2+Mj,_=Uj(w),k=Rj(w),E=x-p,S=E>=0?1:-1,A=S*E,C=A>Cj,D=g*_;if(u.add(zj(D*S*Uj(A),y*k+D*Rj(A))),a+=C?E+S*Fj:E,C^p>=n^x>=n){var M=CU(SU(h),SU(b));FU(M);var F=CU(o,M);FU(F);var N=(C^E>=0?-1:1)*Gj(F[2]);(r>N||r===N&&(M[0]||M[1]))&&(s+=C^E>=0?1:-1)}}return(a<-1e-6||a<Sj&&u<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),bW(a,EW,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(kW))}return d}};function kW(e){return e.length>1}function EW(e,t){return((e=e.x)[0]<0?e[1]-Dj-Sj:Dj-e[1])-((t=t.x)[0]<0?t[1]-Dj-Sj:Dj-t[1])}var SW=_W((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Cj:-Cj,u=$j(o-n);$j(u-Cj)<Sj?(e.point(n,r=(r+a)/2>0?Dj:-Dj),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=Cj&&($j(n-i)<Sj&&(n-=i*Sj),$j(o-s)<Sj&&(o-=s*Sj),r=function(e,t,n,r){var i,o,a=Uj(e-n);return $j(a)>Sj?Tj((Uj(t)*(o=Rj(r))*Uj(n)-Uj(r)*(i=Rj(t))*Uj(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*Dj,r.point(-Cj,i),r.point(0,i),r.point(Cj,i),r.point(Cj,0),r.point(Cj,-i),r.point(0,-i),r.point(-Cj,-i),r.point(-Cj,0),r.point(-Cj,i);else if($j(e[0]-t[0])>Sj){var o=e[0]<t[0]?Cj:-Cj;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-Cj,-Dj]);var AW=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function CW(e,t){return[$j(e)>Cj?e+Math.round(-e/Fj)*Fj:e,t]}function DW(e,t,n){return(e%=Fj)?t||n?AW(FW(e),NW(t,n)):FW(e):t||n?NW(t,n):CW}function MW(e){return function(t,n){return[(t+=e)>Cj?t-Fj:t<-Cj?t+Fj:t,n]}}function FW(e){var t=MW(e);return t.invert=MW(-e),t}function NW(e,t){var n=Rj(e),r=Uj(e),i=Rj(t),o=Uj(t);function a(e,t){var a=Rj(t),s=Rj(e)*a,u=Uj(e)*a,l=Uj(t),c=l*n+s*r;return[zj(u*i-c*o,s*n-l*r),Gj(c*i+u*o)]}return a.invert=function(e,t){var a=Rj(t),s=Rj(e)*a,u=Uj(e)*a,l=Uj(t),c=l*i-u*o;return[zj(u*i+l*o,s*n+c*r),Gj(c*n-s*r)]},a}CW.invert=CW;function OW(e,t){(t=SU(t))[0]-=e,FU(t);var n=Vj(-t[1]);return((-t[2]<0?-n:n)+Fj-Sj)%Fj}var $W=function(e){var t=Rj(e),n=6*Oj,r=t>0,i=$j(t)>Sj;function o(e,n){return Rj(e)*Rj(n)>t}function a(e,n,r){var i=[1,0,0],o=CU(SU(e),SU(n)),a=AU(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=CU(i,o),d=MU(i,l);DU(d,MU(o,c));var h=f,p=AU(d,h),m=AU(h,h),g=p*p-m*(AU(d,d)-1);if(!(g<0)){var y=Wj(g),v=MU(h,(-p-y)/m);if(DU(v,d),v=EU(v),!r)return v;var b,x=e[0],w=n[0],_=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=$j(E-Cj)<Sj;if(!S&&k<_&&(b=_,_=k,k=b),S||E<Sj?S?_+k>0^v[1]<($j(v[0]-x)<Sj?_:k):_<=v[1]&&v[1]<=k:E>Cj^(x<=v[0]&&v[0]<=w)){var A=MU(h,(-p+y)/m);return DU(A,d),[v,EU(A)]}}}function s(t,n){var i=r?e:Cj-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return _W(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?Cj:-Cj),d):0;if(!t&&(l=u=m)&&e.lineStart(),m!==u&&(!(h=a(t,p))||yW(t,h)||yW(p,h))&&(p[2]=1),m!==u)c=0,m?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var y;g&n||!(y=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&yW(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=Rj(t),s=Uj(t),u=r*n;null==i?(i=t+r*Fj,o=t-u/2):(i=OW(a,i),o=OW(a,o),(r>0?i<o:i>o)&&(i+=r*Fj));for(var l,c=i;r>0?c>o:c<o;c-=u)l=EU([a,-s*Rj(c),-s*Uj(c)]),e.point(l[0],l[1])}}(o,e,n,i,t,r)}),r?[0,-e]:[-Cj,e-Cj])},TW=1e9,zW=-1e9;function RW(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return $j(r[0]-e)<Sj?i>0?0:3:$j(r[0]-n)<Sj?i>0?2:1:$j(r[1]-t)<Sj?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,m,g,y,v,b=a,x=gW(),w={point:_,lineStart:function(){w.point=k,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=iy(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&bW(u,s,t,o,a),a.polygonEnd());b=a,u=l=c=null}};function _(e,t){i(e,t)&&b.point(e,t)}function k(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,d=a,h=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var u=[p=Math.max(zW,Math.min(TW,p)),m=Math.max(zW,Math.min(TW,m))],x=[o=Math.max(zW,Math.min(TW,o)),a=Math.max(zW,Math.min(TW,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),v=!1)}p=o,m=a,g=s}return w}}function PW(e){return function(t){var n=new LW;for(var r in e)n[r]=e[r];return n.stream=t,n}}function LW(){}function BW(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),oU(n,e.stream($q)),t($q.result()),null!=r&&e.clipExtent(r),e}function IW(e,t,n){return BW(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function jW(e,t,n){return IW(e,[[0,0],t],n)}function UW(e,t,n){return BW(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function qW(e,t,n){return BW(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}LW.prototype={constructor:LW,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var WW=Rj(30*Oj),HW=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=a+d,w=s+h,_=u+p,k=Wj(x*x+w*w+_*_),E=Gj(_/=k),S=$j($j(_)-1)<Sj||$j(o-f)<Sj?(o+f)/2:zj(w,x),A=e(S,E),C=A[0],D=A[1],M=C-r,F=D-i,N=v*M-y*F;(N*N/b>t||$j((y*M+v*F)/b-.5)>.3||a*d+s*h+u*p<WW)&&(n(r,i,o,a,s,u,C,D,S,x/=k,w/=k,_,m,g),g.point(C,D),n(C,D,S,x,w,_,l,c,f,d,h,p,m,g))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=SU([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],16,t),t.point(c,f)}function b(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=_}function w(e,t){v(r=e,t),i=c,o=f,a=d,s=h,u=p,m.point=v}function _(){n(c,f,l,d,h,p,i,o,r,a,s,u,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return PW({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var VW=PW({point:function(e,t){this.stream.point(e*Oj,t*Oj)}});function GW(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=Rj(o),s=Uj(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(e,o){return[u*(e*=r)-l*(o*=i)+t,n-l*e-u*o]}return p.invert=function(e,t){return[r*(c*e-f*t+d),i*(h-f*e-c*t)]},p}function YW(e){return XW((function(){return e}))()}function XW(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,m=0,g=0,y=0,v=0,b=0,x=1,w=1,_=null,k=SW,E=null,S=wq,A=.5;function C(e){return u(e[0]*Oj,e[1]*Oj)}function D(e){return(e=u.invert(e[0],e[1]))&&[e[0]*Nj,e[1]*Nj]}function M(){var e=GW(f,0,0,x,w,b).apply(null,t(p,m)),r=GW(f,d-e[0],h-e[1],x,w,b);return n=DW(g,y,v),s=AW(t,r),u=AW(n,s),a=HW(s,A),F()}function F(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=VW(function(e){return PW({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(c=e)))))},C.preclip=function(e){return arguments.length?(k=e,_=void 0,F()):k},C.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,F()):S},C.clipAngle=function(e){return arguments.length?(k=+e?$W(_=e*Oj):(_=null,SW),F()):_*Nj},C.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,wq):RW(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),F()):null==E?null:[[E,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,M()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],M()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*Oj,m=e[1]%360*Oj,M()):[p*Nj,m*Nj]},C.rotate=function(e){return arguments.length?(g=e[0]%360*Oj,y=e[1]%360*Oj,v=e.length>2?e[2]%360*Oj:0,M()):[g*Nj,y*Nj,v*Nj]},C.angle=function(e){return arguments.length?(b=e%360*Oj,M()):b*Nj},C.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},C.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},C.precision=function(e){return arguments.length?(a=HW(s,A=e*e),F()):Wj(A)},C.fitExtent=function(e,t){return IW(C,e,t)},C.fitSize=function(e,t){return jW(C,e,t)},C.fitWidth=function(e,t){return UW(C,e,t)},C.fitHeight=function(e,t){return qW(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&D,M()}}function QW(e){var t=0,n=Cj/3,r=XW(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Oj,n=e[1]*Oj):[t*Nj,n*Nj]},i}function JW(e,t){var n=Uj(e),r=(n+Uj(t))/2;if($j(r)<Sj)return function(e){var t=Rj(e);function n(e,n){return[e*t,Uj(n)/t]}return n.invert=function(e,n){return[e/t,Gj(n*t)]},n}(e);var i=1+n*(2*r-n),o=Wj(i)/r;function a(e,t){var n=Wj(i-2*r*Uj(t))/r;return[n*Uj(e*=r),o-n*Rj(e)]}return a.invert=function(e,t){var n=o-t,a=zj(e,$j(n))*qj(n);return n*r<0&&(a-=Cj*qj(e)*qj(n)),[a/r,Gj((i-(e*e+n*n)*r*r)/(2*r))]},a}var KW=function(){return QW(JW).scale(155.424).center([0,33.6442])},ZW=function(){return KW().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function eH(e){return function(t,n){var r=Rj(t),i=Rj(n),o=e(r*i);return o===1/0?[2,0]:[o*i*Uj(t),o*Uj(n)]}}function tH(e){return function(t,n){var r=Wj(t*t+n*n),i=e(r),o=Uj(i),a=Rj(i);return[zj(t*o,r*a),Gj(r&&n*o/r)]}}var nH=eH((function(e){return Wj(2/(1+e))}));nH.invert=tH((function(e){return 2*Gj(e/2)}));var rH=eH((function(e){return(e=Vj(e))&&e/Uj(e)}));rH.invert=tH((function(e){return e}));function iH(e,t){return[e,Ij(Hj((Dj+t)/2))]}iH.invert=function(e,t){return[e,2*Tj(Lj(t))-Dj]};function oH(e){var t,n,r,i=YW(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=Cj*a(),s=i(function(e){function t(t){return(t=e(t[0]*Oj,t[1]*Oj))[0]*=Nj,t[1]*=Nj,t}return e=DW(e[0]*Oj,e[1]*Oj,e.length>2?e[2]*Oj:0),t.invert=function(t){return(t=e.invert(t[0]*Oj,t[1]*Oj))[0]*=Nj,t[1]*=Nj,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===iH?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function aH(e){return Hj((Dj+e)/2)}function sH(e,t){var n=Rj(e),r=e===t?Uj(e):Ij(n/Rj(t))/Ij(aH(t)/aH(e)),i=n*jj(aH(e),r)/r;if(!r)return iH;function o(e,t){i>0?t<-Dj+Sj&&(t=-Dj+Sj):t>Dj-Sj&&(t=Dj-Sj);var n=i/jj(aH(t),r);return[n*Uj(r*e),i-n*Rj(r*e)]}return o.invert=function(e,t){var n=i-t,o=qj(r)*Wj(e*e+n*n),a=zj(e,$j(n))*qj(n);return n*r<0&&(a-=Cj*qj(e)*qj(n)),[a/r,2*Tj(jj(i/o,1/r))-Dj]},o}function uH(e,t){return[e,t]}uH.invert=uH;function lH(e,t){var n=Rj(e),r=e===t?Uj(e):(n-Rj(t))/(t-e),i=n/r+e;if($j(r)<Sj)return uH;function o(e,t){var n=i-t,o=r*e;return[n*Uj(o),i-n*Rj(o)]}return o.invert=function(e,t){var n=i-t,o=zj(e,$j(n))*qj(n);return n*r<0&&(o-=Cj*qj(e)*qj(n)),[o/r,i-qj(r)*Wj(e*e+n*n)]},o}var cH=1.340264,fH=-.081106,dH=893e-6,hH=.003796,pH=Wj(3)/2;function mH(e,t){var n=Gj(pH*Uj(t)),r=n*n,i=r*r*r;return[e*Rj(n)/(pH*(cH+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(cH+fH*r+i*(dH+hH*r))]}mH.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(cH+fH*i+o*(dH+hH*i))-t)/(cH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i)))*r)*i*i,!($j(n)<Aj));++a);return[pH*e*(cH+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))/Rj(r),Gj(Uj(r)/pH)]};function gH(e,t){var n=Rj(t),r=Rj(e)*n;return[n*Uj(e)/r,Uj(t)/r]}gH.invert=tH(Tj);function yH(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}yH.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while($j(n)>Sj&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function vH(e,t){return[Rj(t)*Uj(e),Uj(t)]}vH.invert=tH(Gj);function bH(e,t){var n=Rj(t),r=1+Rj(e)*n;return[n*Uj(e)/r,Uj(t)/r]}bH.invert=tH((function(e){return 2*Tj(e)}));function xH(e,t){return[Ij(Hj((Dj+t)/2)),-e]}xH.invert=function(e,t){return[-t,2*Tj(Lj(e))-Dj]};var wH=Math.abs,_H=(Math.atan,Math.atan2,Math.ceil,Math.cos),kH=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),EH=(Math.tan,Math.PI),SH=EH/2,AH=(Math.SQRT1_2,DH(2));DH(EH);function CH(e){return e>1?SH:e<-1?-SH:Math.asin(e)}function DH(e){return e>0?Math.sqrt(e):0}function MH(e,t){var n,r=e*kH(t),i=30;do{t-=n=(t+kH(t)-r)/(1+_H(t))}while(wH(n)>1e-6&&--i>0);return t/2}var FH=function(e,t,n){function r(r,i){return[e*r*_H(i=MH(n,i)),t*kH(i)]}return r.invert=function(r,i){return i=CH(i/t),[r/(e*_H(i)),CH((2*i+kH(2*i))/n)]},r}(AH/SH,AH,EH);const NH=mW(),OH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function $H(e,t){return function n(){const r=t();return r.type=e,r.path=mW().projection(r),r.copy=r.copy||function(){const e=n();return OH.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function TH(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(RH[e]=$H(e,t),this):RH[e]||null}function zH(e){return e&&e.path||NH}const RH={albers:ZW,albersusa:function(){var e,t,n,r,i,o,a=ZW(),s=KW().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=KW().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+Sj,c+.12*t+Sj],[o-.214*t-Sj,c+.234*t-Sj]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+Sj,c+.166*t+Sj],[o-.115*t-Sj,c+.234*t-Sj]]).stream(l),f()},c.fitExtent=function(e,t){return IW(c,e,t)},c.fitSize=function(e,t){return jW(c,e,t)},c.fitWidth=function(e,t){return UW(c,e,t)},c.fitHeight=function(e,t){return qW(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return YW(nH).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return YW(rH).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return QW(sH).scale(109.5).parallels([30,30])},conicequalarea:KW,conicequidistant:function(){return QW(lH).scale(131.154).center([0,13.9389])},equalEarth:function(){return YW(mH).scale(177.158)},equirectangular:function(){return YW(uH).scale(152.63)},gnomonic:function(){return YW(gH).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,m=1,g=PW({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=wq;function v(){return p=s*c,m=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+u,i+l]}return b.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/p,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,h=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=r=i=null,wq):RW(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(u=+e[0],l=+e[1],v()):[u,l]},b.angle=function(n){return arguments.length?(t=Uj(d=n%360*Oj),e=Rj(d),v()):d*Nj},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,v()):f<0},b.fitExtent=function(e,t){return IW(b,e,t)},b.fitSize=function(e,t){return jW(b,e,t)},b.fitWidth=function(e,t){return UW(b,e,t)},b.fitHeight=function(e,t){return qW(b,e,t)},b},mercator:function(){return oH(iH).scale(961/Fj)},mollweide:function(){return YW(FH).scale(169.529)},naturalEarth1:function(){return YW(yH).scale(175.295)},orthographic:function(){return YW(vH).scale(249.5).clipAngle(90.000001)},stereographic:function(){return YW(bH).scale(250).clipAngle(142)},transversemercator:function(){var e=oH(xH),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in RH)TH(e,RH[e]);function PH(){}const LH=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BH(){var e=1,t=1,n=a;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,LH[l<<1].forEach(p);for(;++a<e-1;)u=l,l=n[a+1]>=r,LH[u|l<<1].forEach(p);LH[l<<0].forEach(p);for(;++s<t-1;){for(a=-1,l=n[s*e+e]>=r,c=n[s*e]>=r,LH[l<<1|c<<2].forEach(p);++a<e-1;)u=l,l=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,LH[u|l<<1|c<<2|f<<3].forEach(p);LH[l|c<<3].forEach(p)}a=-1,c=n[s*e]>=r,LH[c<<2].forEach(p);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,LH[c<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],l=o(r),c=o(u);(t=h[l])?(n=d[c])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(u),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=c]=t):(t=d[c])?(n=h[l])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(u),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=l]=t):d[l]=h[c]={start:l,end:c,ring:[r,u]}}LH[c<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==IH((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(o=r[l*e+u-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&l===s&&(o=r[(l-1)*e+u],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||UE("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:PH,r):n===a},r}function IH(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=jH(e,t[r]))return n;return 0}function jH(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(UH(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function UH(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function qH(e,t,n){return function(r){var i=zS(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?dy(o,a,e):s/(e+1);return oy(o+u,a,u)}}function WH(e){nF.call(this,null,e)}function HH(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(l)}function l(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function VH(e,t,n){const r=e>=0?e:fF(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function GH(e){return AS(e)?e:OS(+e)}function YH(){var e=e=>e[0],t=e=>e[1],n=YE,r=[-1,-1],i=960,o=500,a=2;function s(s,u){const l=VH(r[0],s,e)>>a,c=VH(r[1],s,t)>>a,f=l?l+2:0,d=c?c+2:0,h=2*f+(i>>a),p=2*d+(o>>a),m=new Float32Array(h*p),g=new Float32Array(h*p);let y=m;s.forEach((r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(m[i+o*h]+=+n(r))})),l>0&&c>0?(XH(h,p,m,g,l),QH(h,p,g,m,c),XH(h,p,m,g,l),QH(h,p,g,m,c),XH(h,p,m,g,l),QH(h,p,g,m,c)):l>0?(XH(h,p,m,g,l),XH(h,p,g,m,l),XH(h,p,m,g,l),y=g):c>0&&(QH(h,p,m,g,c),QH(h,p,g,m,c),QH(h,p,m,g,c),y=g);const v=u?Math.pow(2,-2*a):1/ay(y);for(let e=0,t=h*p;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=GH(t),s):e},s.y=function(e){return arguments.length?(t=GH(e),s):t},s.weight=function(e){return arguments.length?(n=GH(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||UE("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||UE("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=ES(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&UE("invalid bandwidth"),r=e,s):r},s}function XH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function QH(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function JH(e){nF.call(this,null,e)}WH.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},US(WH,nF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||VE,o=BH().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=qH(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>Jg(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",u=[];return r.forEach((t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,ZE(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;AS(i)&&(i=i(n,r));AS(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(GS(i)?i:i[0])||1,s=(GS(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(HH(t,a,s,u,l))}(r,n,t,e),r.forEach((e=>{u.push(CM(t,SM(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),JH.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const KH=["x","y","weight","size","cellSize","bandwidth"];function ZH(e,t){return KH.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function eV(e){nF.call(this,null,e)}US(JH,nF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,u=[],l=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(PE),a=ZH(YH(),e),s=e.as||"grid";return n=i.map((t=>SM(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),eV.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},US(eV,nF,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=BH().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||qH(e.count||10,e.nice,!!a),u=e.size;return a||(a=t.materialize(t.SOURCE).source,r=HH(n=ZH(YH(),e)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=ZE(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(SM),i}});const tV="Feature",nV="FeatureCollection";function rV(e){nF.call(this,null,e)}function iV(e){nF.call(this,null,e)}function oV(e){nF.call(this,null,e)}function aV(e){nF.call(this,null,e)}function sV(e){nF.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return oy(Pj(r/p)*p,n,p).map(c).concat(oy(Pj(s/m)*m,a,m).map(f)).concat(oy(Pj(t/d)*d,e,d).filter((function(e){return $j(e%p)>Sj})).map(u)).concat(oy(Pj(o/h)*h,i,h).filter((function(e){return $j(e%m)>Sj})).map(l))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=mq(o,i,90),l=gq(t,e,g),c=mq(s,a,90),f=gq(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function uV(e){nF.call(this,null,e)}function lV(e){if(!AS(e))return!1;const t=uA(LE(e));return t.$x||t.$y||t.$value||t.$max}function cV(e){nF.call(this,null,e),this.modified(!0)}function fV(e,t,n){AS(e[t])&&e[t](n)}rV.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},US(rV,nF,{transform:function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],u=e.geojson||!o&&VE,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(LE(u))||a&&t.modified(LE(a))||s&&t.modified(LE(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(e=>r.push(u(e)))),a&&s&&(t.visit(l,(e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:tV,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:nV,features:r}}}),iV.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},US(iV,nF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||VE,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=zH(e.projection),n.materialize().reflow()):a=i===VE||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(e=>e[o]=r(i(e)))),r.pointRadius(s),n.modifies(o)}}),oV.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},US(oV,nF,{transform:function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function l(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),aV.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},US(aV,nF,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}(zH(e.projection),e.field||WE("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(e=>e[i]=r)),n.modifies(i)}}),sV.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},US(sV,nF,{transform:function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)AS(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(DM(r[0],n)):t.add.push(SM(n)),r[0]=n,t}}),uV.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},US(uV,nF,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||VE,o=function(e,t){let n;AS(e)?(n=n=>e(n,t),n.dep=lV(e)):e?n=OS(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;AS(e)?(n=n=>op(e(n,t)),n.dep=lV(e)):n=OS(op(e||"#888"));return n}(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Jg(n.map((e=>Jg(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=TS({},e,u);r||(n.$max=Jg(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?e=>c[e]:GE,d=W$(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),m=p.data;for(let e=s,o=0;e<l;++e){t.$y=e-s;for(let s=a,l=e*i;s<u;++s,o+=4){t.$x=s-a,t.$value=f(s+l);const e=n(t);m[o+0]=e.r,m[o+1]=e.g,m[o+2]=e.b,m[o+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,a.dep?a:OS(a(n)),o.dep?o:OS(o(n)))})),t.reflow(!0).modifies(s)}}),US(cV,nF,{transform:function(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=TH((e||"mercator").toLowerCase());t||UE("Unrecognized projection type: "+e);return t()}(e.type),OH.forEach((t=>{null!=e[t]&&fV(n,t,e[t])}))):OH.forEach((t=>{e.modified(t)&&fV(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return 1===(e=ES(e)).length?e[0]:{type:nV,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===nV?e.features:ES(e).filter((e=>null!=e)).map((e=>e.type===tV?e:{type:tV,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),t(Ej,"projection",(function(){return cV})),t(Ej,"kde2d",(function(){return JH})),t(Ej,"isocontour",(function(){return WH})),t(Ej,"heatmap",(function(){return uV})),t(Ej,"graticule",(function(){return sV})),t(Ej,"geoshape",(function(){return aV})),t(Ej,"geopoint",(function(){return oV})),t(Ej,"geopath",(function(){return iV})),t(Ej,"geojson",(function(){return rV})),t(Ej,"contour",(function(){return eV}));var dV={};function hV(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}var pV=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function mV(e){return e[0]}function gV(e){return e[1]}function yV(e,t,n){var r=new vV(null==t?mV:t,null==n?gV:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function vV(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function bV(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xV=yV.prototype=vV.prototype;xV.copy=function(){var e,t,n=new vV(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=bV(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=bV(t));return n},xV.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return hV(this.cover(t,n),t,n,e)},xV.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)hV(this,a[n],s[n],e[n]);return this},xV.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},xV.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},xV.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},xV.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new pV(m,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new pV(m[3],g,y,a,s),new pV(m[2],i,y,g,s),new pV(m[1],g,o,a,y),new pV(m[0],i,o,g,y)),(l=(t>=y)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=m.data}}return r},xV.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},xV.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},xV.root=function(){return this._root},xV.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},xV.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new pV(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new pV(n,l,c,o,a)),(n=u[2])&&s.push(new pV(n,r,c,l,a)),(n=u[1])&&s.push(new pV(n,l,i,o,c)),(n=u[0])&&s.push(new pV(n,r,i,l,c))}return this},xV.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new pV(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new pV(o,a,s,c,f)),(o=i[1])&&n.push(new pV(o,c,s,u,f)),(o=i[2])&&n.push(new pV(o,a,f,c,l)),(o=i[3])&&n.push(new pV(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},xV.x=function(e){return arguments.length?(this._x=e,this):this._x},xV.y=function(e){return arguments.length?(this._y=e,this):this._y};var wV=function(e){return function(){return e}},_V=function(e){return 1e-6*(e()-.5)};function kV(e){return e.x+e.vx}function EV(e){return e.y+e.vy}function SV(e){return e.index}function AV(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const CV=4294967296;function DV(e){return e.x}function MV(e){return e.y}var FV=Math.PI*(3-Math.sqrt(5)),NV=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=Qm(f),l=yd("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%CV)/CV}();function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*FV;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}};const OV={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,u,l,c,f,d,h=t.length,p=0;p<o;++p)for(a=yV(t,kV,EV).visitAfter(s),e=0;e<h;++e)u=t[e],f=n[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,h=e.r,p=f+h;if(!s)return t>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=_V(r))*m),0===g&&(y+=(g=_V(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=wV(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,u()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:wV(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i,o=wV(-30),a=1,s=1/0,u=.81;function l(n){var i,o=e.length,a=yV(e,DV,MV).visitAfter(f);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function f(e){var t,n,r,o,a,s=0,u=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,o+=n*t.y);e.x=r/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,l,c){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=c-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=_V(n))*f),0===d&&(p+=(d=_V(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===f&&(p+=(f=_V(n))*f),0===d&&(p+=(d=_V(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(h=i[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:wV(+e),c(),l):o},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l},link:function(e){var t,n,r,i,o,a,s=SV,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=wV(30),c=1;function f(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,f,d,h,p,m,g=0;g<s;++g)l=(u=e[g]).source,d=(f=u.target).x+f.vx-l.x-l.vx||_V(a),h=f.y+f.vy-l.y-l.vy||_V(a),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,f.vx-=d*(m=o[g]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function d(){if(r){var a,u,l=r.length,c=e.length,f=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(l);a<c;++a)(u=e[a]).index=a,"object"!=typeof u.source&&(u.source=AV(f,u.source)),"object"!=typeof u.target&&(u.target=AV(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=e[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,a=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(s=e,f):s},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:wV(+e),h(),f):u},f.distance=function(e){return arguments.length?(l="function"==typeof e?e:wV(+e),p(),f):l},f},x:function(e){var t,n,r,i=wV(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=wV(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:wV(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:wV(+t),a(),o):e},o},y:function(e){var t,n,r,i=wV(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=wV(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:wV(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:wV(+t),a(),o):e},o}},$V="forces",TV=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],zV=["static","iterations"],RV=["x","y","vx","vy"];function PV(e){nF.call(this,null,e)}function LV(e,t,n,r){var i,o,a,s,u=ES(t.forces);for(i=0,o=TV.length;i<o;++i)(a=TV[i])!==$V&&t.modified(a)&&e[a](t[a]);for(i=0,o=u.length;i<o;++i)s=$V+i,(a=n||t.modified($V,i)?IV(u[i]):r&&BV(u[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force($V+i,null);return e.numForces=u.length,e}function BV(e,t){var n,r;for(n in e)if(AS(r=e[n])&&t.modified(LE(r)))return 1;return 0}function IV(e){var t,n;for(n in LS(OV,e.force)||UE("Unrecognized force: "+e.force),t=OV[e.force](),e)AS(t[n])&&jV(t[n],e[n],e);return t}function jV(e,t,n){e(AS(t)?e=>t(e,n):t)}PV.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:RV}]},US(PV,nF,{transform:function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(TV),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&LV(i,e,0,t)):(this.value=i=function(e,t){const n=NV(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),LV(n,t,!0).on("end",(()=>o=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(zV)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,u=t.length;s<u;++s)if(e=t[s],e.name===$V&&"link"===e.op._argval.force)for(var r,i=e.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(RV)}}),t(dV,"force",(function(){return PV}));var UV={};function qV(e,t){return e.parent===t.parent?1:2}function WV(e,t){return e+t.x}function HV(e,t){return Math.max(e,t.y)}function VV(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function GV(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=XV)):void 0===t&&(t=YV);for(var n,r,i,o,a,s=new KV(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new KV(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(JV)}function YV(e){return e.children}function XV(e){return Array.isArray(e)?e[1]:null}function QV(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function JV(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function KV(e){this.data=e,this.depth=this.height=0,this.parent=null}KV.prototype=GV.prototype={constructor:KV,count:function(){return this.eachAfter(VV)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return GV(this).eachBefore(QV)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var ZV=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&nG(n,t)?++r:(n=iG(o=eG(o,t)),r=0);return n};function eG(e,t){var n,r;if(rG(t,e))return[t];for(n=0;n<e.length;++n)if(tG(t,e[n])&&rG(oG(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(tG(oG(e[n],e[r]),t)&&tG(oG(e[n],t),e[r])&&tG(oG(e[r],t),e[n])&&rG(aG(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function tG(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function nG(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function rG(e,t){for(var n=0;n<t.length;++n)if(!nG(e,t[n]))return!1;return!0}function iG(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return oG(e[0],e[1]);case 3:return aG(e[0],e[1],e[2])}var t}function oG(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function aG(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*m,_=(p*x-m*b)/(2*w)-r,k=(m*g-p*y)/w,E=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,A=k*k+S*S-1,C=2*(o+_*k+E*S),D=_*_+E*E-o*o,M=-(A?(C+Math.sqrt(C*C-4*A*D))/(2*A):D/C);return{x:r+_+k*M,y:i+E+S*M,r:M}}function sG(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function uG(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function lG(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function cG(e){this._=e,this.next=null,this.previous=null}function fG(e){if(!(o=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f,d;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;sG(r,n,i=e[2]),n=new cG(n),r=new cG(r),i=new cG(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){sG(n._,r._,i=e[u]),i=new cG(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(uG(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(uG(c._,i._)){(n=c).next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=lG(n);(i=i.next)!==r;)(s=lG(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=ZV(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function dG(e){return null==e?null:hG(e)}function hG(e){if("function"!=typeof e)throw new Error;return e}function pG(){return 0}var mG=function(e){return function(){return e}};function gG(e){return Math.sqrt(e.value)}function yG(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function vG(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=fG(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function bG(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var xG=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},wG=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l},_G={depth:-1},kG={};function EG(e){return e.id}function SG(e){return e.parentId}var AG=function(){var e=EG,t=SG;function n(n){var r,i,o,a,s,u,l,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],s=c[i]=new KV(r),null!=(u=e(r,i,n))&&(u+="")&&(l=s.id=u,d.set(l,d.has(l)?kG:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=c[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===kG)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=_G,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(JV),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=hG(t),n):e},n.parentId=function(e){return arguments.length?(t=hG(e),n):t},n};function CG(e,t){return e.parent===t.parent?1:2}function DG(e){var t=e.children;return t?t[0]:e.t}function MG(e){var t=e.children;return t?t[t.length-1]:e.t}function FG(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function NG(e,t,n){return e.a.parent===t.parent?e.a:n}function OG(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}OG.prototype=Object.create(KV.prototype);var $G=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l},TG=(1+Math.sqrt(5))/2;function zG(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,m,g,y=[],v=t.children,b=0,x=0,w=v.length,_=t.value;b<w;){u=i-n,l=o-r;do{c=v[x++].value}while(!c&&x<w);for(f=d=c,g=c*c*(m=Math.max(l/u,u/l)/(_*e)),p=Math.max(d/g,g/f);x<w;++x){if(c+=s=v[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}y.push(a={value:c,dice:u<l,children:v.slice(b,x)}),a.dice?wG(a,n,r,i,_?r+=l*c/_:o):$G(a,n,r,_?n+=u*c/_:i,o),_-=c,b=x}return y}var RG=function e(t){function n(e,n,r,i,o){zG(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(TG),PG=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?wG(s,n,r,i,h?r+=(o-r)*s.value/h:o):$G(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=zG(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(TG);function LG(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function BG(e){nF.call(this,null,e)}BG.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const IG=e=>e.values;function jG(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,l,c,f=-1;for(;++f<i;)u=o(l=t[f])+"",(c=a[u])?c.push(l):a[u]=[l];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function UG(e){nF.call(this,null,e)}US(BG,nF,{transform:function(e,t){t.source||UE("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each((e=>{e.children&&_M(e.data)&&i.rem.push(e.data)})),this.value=o=GV({values:ES(e.keys).reduce(((e,t)=>(e.key(t),e)),jG()).entries(i.source)},IG),n&&o.each((e=>{e.children&&(e=SM(e.data),i.add.push(e),i.source.push(e))})),LG(o,kM,kM)),i.source.root=o,i}});const qG=(e,t)=>e.parent===t.parent?1:2;US(UG,nF,{transform:function(e,t){t.source&&t.source.root||UE(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(MM(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?qG:YE);try{this.value=n(i)}catch(e){UE(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o))),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const WG=["x","y","r","depth","children"];function HG(e){UG.call(this,e)}HG.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:WG.length,default:WG}]},US(HG,UG,{layout:function(){var e=null,t=1,n=1,r=pG;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(yG(e)).eachAfter(vG(r,.5)).eachBefore(bG(1)):i.eachBefore(yG(gG)).eachAfter(vG(pG,1)).eachAfter(vG(r,i.r/Math.min(t,n))).eachBefore(bG(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=dG(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:mG(+e),i):r},i},params:["radius","size","padding"],fields:WG});const VG=["x0","y0","x1","y1","depth","children"];function GG(e){UG.call(this,e)}function YG(e){nF.call(this,null,e)}GG.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:VG.length,default:VG}]},US(GG,UG,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&wG(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(xG),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:VG}),YG.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},US(YG,nF,{transform:function(e,t){t.source||UE("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?LG(AG().id(e.key).parentId(e.parentKey)(i.source),e.key,XE):LG(AG()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const XG={tidy:function(){var e=CG,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new OG(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new OG(r[i],i)),n.parent=t;return(a.parent=new OG(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=MG(s),o=DG(o),s&&o;)u=DG(u),(a=MG(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(FG(NG(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!MG(a)&&(a.t=s,a.m+=f-c),o&&!DG(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=qV,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(WV,0)/e.length}(n),t.y=function(e){return 1+e.reduce(HV,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},QG=["x","y","depth","children"];function JG(e){UG.call(this,e)}function KG(e){nF.call(this,[],e)}JG.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:QG.length,default:QG}]},US(JG,UG,{layout:function(e){const t=e||"tidy";if(LS(XG,t))return XG[t]();UE("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:QG}),KG.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},US(KG,nF,{transform:function(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||UE("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>o[kM(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[kM(t)]&&o[kM(n)]&&i.add.push(SM({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>o[kM(e)]=1)),n.forEach((e=>{(o[kM(e.source)]||o[kM(e.target)])&&i.mod.push(e)}))),i}});const ZG={binary:function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;l[m]<d?h=m+1:p=m}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;e(t,h,g,i,o,v,u),e(h,n,y,v,o,a,u)}else{var b=r?(o*y+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,y,i,b,a,u)}}(0,u,e.value,t,n,r,i)},dice:wG,slice:$G,slicedice:function(e,t,n,r,i){(1&e.depth?$G:wG)(e,t,n,r,i)},squarify:RG,resquarify:PG},eY=["x0","y0","x1","y1","depth","children"];function tY(e){UG.call(this,e)}tY.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:eY.length,default:eY}]},US(tY,UG,{layout:function(){const e=function(){var e=RG,t=!1,n=1,r=1,i=[0],o=pG,a=pG,s=pG,u=pG,l=pG;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(xG),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=hG(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:mG(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:mG(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:mG(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:mG(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:mG(+e),c):l},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{LS(ZG,t)?e.tile(ZG[t]):UE("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:eY}),t(UV,"treemap",(function(){return tY})),t(UV,"treelinks",(function(){return KG})),t(UV,"tree",(function(){return JG})),t(UV,"stratify",(function(){return YG})),t(UV,"partition",(function(){return GG})),t(UV,"pack",(function(){return HG})),t(UV,"nest",(function(){return BG}));var nY={};function rY(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=W$(i,o).getContext("2d");t.forEach((e=>iY(s,e,a)));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,m;for(d=0;d<o;++d)for(f=0;f<i;++f)m=4278190080&u[d*i+f],m&&(h=e(f),p=e(d),r||l.set(h,p),a&&268435456^m&&c.set(h,p));return[l,c]}function iY(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>iY(e,t.items,n)))})):KP[r].draw(e,{items:n?t.map(oY):t})}function oY(e){const t=CM(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const aY=31,sY=new Uint32Array(33),uY=new Uint32Array(33);uY[0]=0,sY[0]=~uY[0];for(let e=1;e<=32;++e)uY[e]=uY[e-1]<<1|1,sY[e]=~uY[e];function lY(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&aY)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&aY))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&aY)))},getRange:(t,r,i,o)=>{let a,s,u,l,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,u=a>>>5,l=s>>>5,u===l){if(n[u]&sY[a&aY]&uY[1+(s&aY)])return!0}else{if(n[u]&sY[a&aY])return!0;if(n[l]&uY[1+(s&aY)])return!0;for(let e=u+1;e<l;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>5,l=s>>>5,u===l)r(u,sY[a&aY]&uY[1+(s&aY)]);else for(r(u,sY[a&aY]),r(l,uY[1+(s&aY)]),c=u+1;c<l;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>5,l=s>>>5,u===l)i(u,uY[a&aY]|sY[1+(s&aY)]);else for(i(u,uY[a&aY]),i(l,sY[1+(s&aY)]),c=u+1;c<l;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function cY(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function fY(e,t,n,r,i,o,a,s){const u=i*o/(2*r),l=e(t-u),c=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}const dY=[-1,-1,1,1],hY=[-1,1,-1,1];const pY=["right","center","left"],mY=["bottom","middle","top"];function gY(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!function(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}(a,u,s,l,c):i.getRange(e,n,t,r)))}const yY={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},vY={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=TP.width(e.datum,e.datum.text);let u,l,c,f,d,h,p,m=0;for(let r=0;r<n;++r)u=t[r].x,c=t[r].y,l=void 0===t[r].x2?u:t[r].x2,f=void 0===t[r].y2?c:t[r].y2,d=(u+l)/2,h=(c+f)/2,p=Math.abs(l-u+f-c),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=a/2,u=e.x-d,l=e.x+d,c=e.y-h,f=e.y+h,e.align="center",u<0&&l<=i?e.align="left":0<=u&&i<l&&(e.align="right"),e.baseline="middle",c<0&&f<=o?e.baseline="top":0<=c&&o<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(t,n,r,u,l){const c=e.invert(t),f=e.invert(n);let d,h=r,p=o;if(!cY(c,f,u,l,i,o)&&!fY(e,c,f,l,u,h,a,s)&&!fY(e,c,f,l,u,l,a,null)){for(;p-h>=1;)d=(h+p)/2,fY(e,c,f,l,u,d,a,s)?p=d:h=d;if(h>r)return[c,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,l=s.length,c=t.datum.fontSize,f=TP.width(t.datum,t.datum.text);let d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M=n?c:0,F=!1,N=!1,O=0;for(let r=0;r<l;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(D=d,d=h,h=D),p>m&&(D=p,p=m,m=D),x=e(d),_=e(h),w=~~((x+_)/2),k=e(p),S=e(m),E=~~((k+S)/2),v=w;v>=x;--v)for(b=E;b>=k;--b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);for(v=w;v<=_;++v)for(b=E;b<=S;++b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);F||n||(A=Math.abs(h-d+m-p),g=(d+h)/2,y=(p+m)/2,A>=O&&!cY(g,y,f,c,i,o)&&!fY(e,g,y,c,f,c,a,null)&&(O=A,t.x=g,t.y=y,N=!0))}return!(!F&&!N)&&(g=f/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(t){const l=t.datum.datum.items[r].items,c=l.length,f=t.datum.fontSize,d=TP.width(t.datum,t.datum.text),h=[];let p,m,g,y,v,b,x,w,_,k,E,S,A=n?f:0,C=!1,D=!1,M=0;for(let r=0;r<c;++r){for(p=l[r].x,g=l[r].y,m=void 0===l[r].x2?p:l[r].x2,y=void 0===l[r].y2?g:l[r].y2,h.push([e((p+m)/2),e((g+y)/2)]);h.length;)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let e=0;e<4;++e)v=x+dY[e],b=w+hY[e],u.outOfBounds(v,b,v,b)||h.push([v,b]);if(v=e.invert(x),b=e.invert(w),_=A,k=o,!cY(v,b,d,f,i,o)&&!fY(e,v,b,f,d,_,a,s)&&!fY(e,v,b,f,d,f,a,null)){for(;k-_>=1;)E=(_+k)/2,fY(e,v,b,f,d,E,a,s)?k=E:_=E;_>A&&(t.x=v,t.y=b,A=_,C=!0)}}C||n||(S=Math.abs(m-p+y-g),v=(p+m)/2,b=(g+y)/2,S>=M&&!cY(v,b,d,f,i,o)&&!fY(e,v,b,f,d,f,a,null)&&(M=S,t.x=v,t.y=b,D=!0))}return!(!C&&!D)&&(v=d/2,b=f/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function bY(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=yY[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[u].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,u),v=lY(t[0],t[1],l),b=g&&"naive"===c;var x;const w=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)})));let _;if(!b){n&&w.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;p&&(a||g)&&(o=[e.map((e=>e.datum))].concat(o)),_=o.length?rY(v,o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(v,a&&w)}const k=g?vY[c](v,_,a,u):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(t){const l=t.boundary,c=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>o)return!1;let f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=l[1+f]+r[i]*f*p,w=l[4+d]+m*c*d/2+r[i]*d*p,v=w-c/2,b=w+c/2,_=e(g),E=e(v),S=e(b),!A){if(!gY(_,_,E,S,a,s,g,g,v,b,l,h))continue;A=TP.width(t.datum,t.datum.text)}if(x=g+m*A*f/2,g=x-A/2,y=x+A/2,_=e(g),k=e(y),gY(_,k,E,S,a,s,g,y,v,b,l,h))return t.x=f?f*m<0?y:g:x,t.y=d?d*m<0?b:v:w,t.align=pY[f*m+1],t.baseline=mY[d*m+1],a.setRange(_,E,k,S),!0}return!1}}(v,_,h,d);return w.forEach((e=>e.opacity=+k(e))),w}const xY=["x","y","opacity","align","baseline"],wY=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function _Y(e){nF.call(this,null,e)}_Y.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:wY},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:xY.length,default:xY}]},US(_Y,nF,{transform:function(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return AS(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||UE("Size parameter should be specified as a [width, height] array.");const r=e.as||xY;return bY(t.materialize(t.SOURCE).source,e.size,e.sort,ES(e.offset||1),ES(e.anchor||wY),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),t(nY,"label",(function(){return _Y}));var kY={};function EY(e,t){var n,r,i,o,a,s,u=[],l=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function SY(e){nF.call(this,null,e)}SY.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},US(SY,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=EY(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(PE),o=i.length,a=e.as||[PE(e.x),PE(e.y)],s=[];r.forEach((t=>{QF(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<o;++e)n[i[e]]=t.dims[e];n[a[0]]=e[0],n[a[1]]=e[1],s.push(SM(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const AY={linear:qF,log:WF,exp:HF,pow:VF,quad:GF,poly:YF};function CY(e){nF.call(this,null,e)}CY.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(AY)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},US(CY,nF,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=EY(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(PE),o=e.method||"linear",a=e.order||3,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),u=e.as||[PE(e.x),PE(e.y)],l=AY[o],c=[];let f=e.extent;LS(AY,o)||UE("Invalid regression method: "+o),null!=f&&"log"===o&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=l(n,e.x,e.y,a);if(e.params)return void c.push(SM({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||zS(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],c.push(SM(t))};"linear"===o?d.forEach((e=>h([e,r.predict(e)]))):eN(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),t(kY,"regression",(function(){return CY})),t(kY,"loess",(function(){return SY}));var DY={};const MY=Math.pow(2,-52),FY=new Uint32Array(512);class NY{static from(e,t=BY,n=IY){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new NY(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[t]=t}const c=(a+u)/2,f=(s+l)/2;let d,h,p,m=1/0;for(let t=0;t<o;t++){const n=OY(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],y=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=OY(g,y,e[2*t],e[2*t+1]);n<m&&n>0&&(h=t,m=n)}let v=e[2*h],b=e[2*h+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===h)continue;const n=RY(g,y,v,b,e[2*t],e[2*t+1]);n<x&&(p=t,x=n)}let w=e[2*p],_=e[2*p+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];PY(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(TY(g,y,v,b,w,_)){const e=h,t=v,n=b;h=p,v=w,b=_,p=e,w=t,_=n}const k=function(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(a*f-u*c)*d}}(g,y,v,b,w,_);this._cx=k.x,this._cy=k.y;for(let t=0;t<o;t++)this._dists[t]=OY(e[2*t],e[2*t+1],k.x,k.y);PY(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=d,i[this._hashKey(v,b)]=h,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=e[2*u],c=e[2*u+1];if(s>0&&Math.abs(l-o)<=MY&&Math.abs(c-a)<=MY)continue;if(o=l,a=c,u===d||u===h||u===p)continue;let f=0;for(let e=0,t=this._hashKey(l,c);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],!TY(l,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],TY(l,c,e[2*v],e[2*v+1],e[2*m],e[2*m+1]);)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=t[g],TY(l,c,e[2*m],e[2*m+1],e[2*g],e[2*g+1]);)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=t[u]=g,n[g]=t[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=FY[--i];continue}const u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,f=t[o],d=t[e],h=t[l],p=t[c];if(zY(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<FY.length&&(FY[i++]=s)}else{if(0===i)break;e=FY[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function OY(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function $Y(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function TY(e,t,n,r,i,o){return($Y(i,o,e,t,n,r)||$Y(e,t,n,r,i,o)||$Y(n,r,i,o,e,t))<0}function zY(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+(u*u+l*l)*(c*h-f*d)<0}function RY(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function PY(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;LY(e,n+r>>1,i),t[e[n]]>t[e[r]]&&LY(e,n,r),t[e[i]]>t[e[r]]&&LY(e,i,r),t[e[n]]>t[e[i]]&&LY(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;LY(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(PY(e,t,i,r),PY(e,t,n,o-1)):(PY(e,t,n,o-1),PY(e,t,i,r))}}function LY(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function BY(e){return e[0]}function IY(e){return e[1]}const jY=1e-6;class UY{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>jY||Math.abs(this._y1-i)>jY)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class qY{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class WY{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=e[s],f=e[s+1],d=e[u],h=e[u+1],p=e[l],m=e[l+1],g=d-c,y=h-f,v=p-c,b=m-f,x=g*g+y*y,w=v*v+b*b,_=2*(g*b-y*v);if(_)if(Math.abs(_)<1e-8)t=(c+p)/2,r=(f+m)/2;else{const e=1/_;t=c+(b*x-y*w)*e,r=f+(g*w-v*x)*e}else t=(c+p)/2-1e8*b,r=(f+m)/2+1e8*v;i[a]=t,i[a+1]=r}let o,a,s,u=t[t.length-1],l=4*u,c=e[2*u],f=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],o=l,a=c,s=f,l=4*u,c=e[2*u],f=e[2*u+1],r[o+2]=r[l]=s-f,r[o+3]=r[l+1]=c-a}render(e){const t=null==e?e=new UY:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,e)}let s,u=i[i.length-1];for(let t=0;t<i.length;++t){s=u,u=i[t];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,d=this._project(l,c,a[f+2],a[f+3]);d&&this._renderSegment(l,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new UY:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new UY:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new qY;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]==e[o]&&t[r+1]==e[o+1]&&t[(r+2)%i]==e[(o+a-2)%a]&&t[(r+3)%i]==e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,u=null,l=t[n-2],c=t[n-1],f=this._regioncode(l,c);for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],o=f,f=this._regioncode(l,c),0===o&&0===f)a=s,s=0,u?u.push(l,c):u=[l,c];else{let t,n,d,h,p;if(0===o){if(null===(t=this._clipSegment(r,i,l,c,o,f)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,f,o)))continue;[h,p,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(e,a,s,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const HY=2*Math.PI,VY=Math.pow;function GY(e){return e[0]}function YY(e){return e[1]}function XY(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class QY{static from(e,t=GY,n=YY,r){return new QY("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new NY(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=XY(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new NY(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new WY(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(u!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let l=e,c=VY(t-u[2*e],2)+VY(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=VY(t-u[2*r],2)+VY(n-u[2*r+1],2);if(f<c&&(c=f,l=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&VY(t-u[2*d],2)+VY(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}render(e){const t=null==e?e=new UY:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new UY:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,HY)}return n&&n.value()}renderHull(e){const t=null==e?e=new UY:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new qY;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new UY:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new qY;return this.renderTriangle(e,t),t.value()}}function JY(e){nF.call(this,null,e)}JY.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const KY=[-1e5,-1e5,1e5,1e5];function ZY(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}US(JY,nF,{transform:function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:KY;const o=this.value=QY.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?ZY(t):null}return t.reflow(e.modified()).modifies(n)}}),t(DY,"voronoi",(function(){return JY}));var eX={},tX=Math.PI/180,nX=2048;function rX(){var e,t,n,r,i,o,a,s=[256,256],u=sX,l=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=c()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=h));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&oX(t,e,s[0])||n&&(l=n,!((a=t).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y)))){for(var y,v=t.sprite,b=t.width>>5,x=s[0]>>5,w=t.x-(b<<4),_=127&w,k=32-_,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),A=0;A<E;A++){y=0;for(var C=0;C<=b;C++)e[S+C]|=y<<k|(C<b?(y=v[A*b+C])>>>_:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=nX/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(W$()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,m=-1,g=[],y=l.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,iX(u,v,y,m),v.hasText&&d(f,v,h)&&(g.push(v),h?aX(h,v):h=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=uX(e),f):t},f.fontStyle=function(e){return arguments.length?(r=uX(e),f):r},f.fontWeight=function(e){return arguments.length?(i=uX(e),f):i},f.rotate=function(e){return arguments.length?(o=uX(e),f):o},f.text=function(t){return arguments.length?(e=uX(t),f):e},f.spiral=function(e){return arguments.length?(u=lX[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=uX(e),f):n},f.padding=function(e){return arguments.length?(a=uX(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f}function iX(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,nX/o);var a,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,u=t.size<<1,t.rotate){var m=Math.sin(t.rotate*tX),g=Math.cos(t.rotate*tX),y=a*g,v=a*m,b=u*g,x=u*m;a=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,u=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=2048&&(f=0,d+=h,h=0),d+u>=nX)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),t.rotate&&i.rotate(t.rotate*tX),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=u,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var w=i.getImageData(0,0,2048/o,nX/o).data,_=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)_[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(c=0;c<u;c++){for(l=0;l<a;l++){var S=s*c+(l>>5),A=w[2048*(d+c)+(f+l)<<2]?1<<31-l%32:0;_[S]|=A,k|=A}k?E=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+E,t.sprite=_.slice(0,(t.y1-t.y0)*s)}}}function oX(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function aX(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function sX(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function uX(e){return"function"==typeof e?e:function(){return e}}var lX={archimedean:sX,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const cX=["x","y","font","fontSize","fontStyle","fontWeight","angle"],fX=["text","font","rotate","fontSize","fontStyle","fontWeight"];function dX(e){nF.call(this,rX(),e)}dX.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:cX}]},US(dX,nF,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||UE("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||fX.some((function(n){const r=e[n];return AS(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||cX;let a,s=e.fontSize||14;if(AS(s)?a=e.fontSizeRange:s=OS(s),a){const e=s,t=wT("sqrt")().domain(zS(r,e)).range(a);s=n=>t(e(n))}r.forEach((e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));const u=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(hF).layout(),l=i.size(),c=l[0]>>1,f=l[1]>>1,d=u.length;for(let e,t,n=0;n<d;++n)e=u[n],t=e.datum,t[o[0]]=e.x+c,t[o[1]]=e.y+f,t[o[2]]=e.font,t[o[3]]=e.size,t[o[4]]=e.style,t[o[5]]=e.weight,t[o[6]]=e.rotate;return t.reflow(n).modifies(o)}}),t(eX,"wordcloud",(function(){return dX}));var hX={};const pX=e=>new Uint8Array(e),mX=e=>new Uint16Array(e),gX=e=>new Uint32Array(e);function yX(e,t,n){const r=(t<257?pX:t<65537?mX:gX)(e);return n&&r.set(n),r}function vX(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let l;for(l=0;l<a;++l)t[o[l]]|=r;for(l=s;l<u;++l)t[o[l]]|=r;return n}}}function bX(){let e=gX(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=gX(s);let l,c,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,u),a)l=t,c=e,t=Array(a+s),e=gX(a+s),function(e,t,n,r,i,o,a,s,u){let l,c=0,f=0;for(l=0;c<r&&f<a;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=o[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<a;++f,++l)s[l]=i[f],u[l]=o[f]+e}(o,l,c,a,d,u,s,t,e);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;t=d,e=u}return n=a+s,{index:u,value:d}},remove:function(r,i){const o=n;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,t[u]=t[s],++u);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[Xg(r,e[0],0,i),Yg(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function xX(e){nF.call(this,function(){let e=8,t=[],n=gX(0),r=yX(0,e),i=yX(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){const o=t.length,a=Array(o-e),s=t;let u,l,c;for(l=0;!n[l]&&l<o;++l)a[l]=t[l],s[l]=l;for(c=l;l<o;++l)u=t[l],n[l]?s[l]=-1:(s[l]=c,r[c]=r[l],i[c]=i[l],a[c]=u,u._index=c++),r[l]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=yX(t,e,r),i=yX(t,e))}}}(),e),this._indices=null,this._dims=null}function wX(e){nF.call(this,null,e)}xX.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},US(xX,nF,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,l=0;for(;l<a;++l)s=n[l].fname,u=i[s]||(i[s]=bX()),o.push(vX(u,l,r[l]));return this.eval(e,t)},reinit:function(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,w,_,k;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,_=v.length;w<_;++w)x[v[w]._index]=1;for(w=0;w<h;++w)k=r[w],(!a[w]||e.modified("fields",w)||t.modified(k.fields))&&(y=k.fname,(m=p[y])||(o[y]=g=bX(),p[y]=m=g.insert(k,t.source,0)),a[w]=vX(g,w,i[w]).onAdd(m,u));for(w=0,_=s.data().length;w<_;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval:function(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d,h,p,m=i.size();i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,m)),o[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&l.push(m)},modify:function(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove:function(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex:function(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update:function(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,l=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++l);if(1===l)l=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,l=0;u<a;++u)e.modified("query",u)&&(l|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return l},incrementAll:function(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne:function(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],l=s[1],c=a[0],f=a[1],d=e.one;let h,p,m;if(u<c)for(h=u,p=Math.min(c,l);h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(u>c)for(h=c,p=Math.min(u,f);h<p;++h)m=o[h],i[m]^=d,r.push(m);if(l>f)for(h=Math.max(u,f),p=l;h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(l<f)for(h=Math.max(c,l),p=f;h<p;++h)m=o[h],i[m]^=d,r.push(m);e.range=t.slice()}}),wX.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},US(wX,nF,{transform:function(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=e=>s[e]&n?null:a[e];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return t&&!(t^t^u[e]&n)?a[e]:null}))):(o.filter(o.ADD,l),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>l(e._index)))}}),t(hX,"resolvefilter",(function(){return wX})),t(hX,"crossfilter",(function(){return xX})),n(TE,sF),n(TE,WC),n(TE,fA),n(TE,MO);const _X="RawCode",kX="Literal",EX="Property",SX="Identifier",AX="ArrayExpression",CX="BinaryExpression",DX="CallExpression",MX="ConditionalExpression",FX="LogicalExpression",NX="MemberExpression",OX="ObjectExpression",$X="UnaryExpression";function TX(e){this.type=e}var zX,RX,PX,LX,BX;TX.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case AX:return e.elements;case CX:case FX:return[e.left,e.right];case DX:return[e.callee].concat(e.arguments);case MX:return[e.test,e.consequent,e.alternate];case NX:return[e.object,e.property];case OX:return e.properties;case EX:return[e.key,e.value];case $X:return[e.argument];case SX:case kX:case _X:default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(zX={})[1]="Boolean",zX[2]="<end>",zX[3]="Identifier",zX[4]="Keyword",zX[5]="Null",zX[6]="Numeric",zX[7]="Punctuator",zX[8]="String",zX[9]="RegularExpression";var IX="Identifier",jX="Unexpected token %0",UX="Invalid regular expression",qX="Invalid regular expression: missing /",WX="Octal literals are not allowed in strict mode.",HX="ILLEGAL",VX="Disabled.",GX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),YX=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function XX(e,t){if(!e)throw new Error("ASSERT: "+t)}function QX(e){return e>=48&&e<=57}function JX(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function KX(e){return"01234567".indexOf(e)>=0}function ZX(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function eQ(e){return 10===e||13===e||8232===e||8233===e}function tQ(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&GX.test(String.fromCharCode(e))}function nQ(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&YX.test(String.fromCharCode(e))}const rQ={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function iQ(){for(;PX<LX;){const e=RX.charCodeAt(PX);if(!ZX(e)&&!eQ(e))break;++PX}}function oQ(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)PX<LX&&JX(RX[PX])?(r=RX[PX++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):wQ({},jX,HX);return String.fromCharCode(i)}function aQ(){var e,t,n,r;for(t=0,"}"===(e=RX[PX])&&wQ({},jX,HX);PX<LX&&JX(e=RX[PX++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&wQ({},jX,HX),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function sQ(){var e,t;for(e=RX.charCodeAt(PX++),t=String.fromCharCode(e),92===e&&(117!==RX.charCodeAt(PX)&&wQ({},jX,HX),++PX,(e=oQ("u"))&&"\\"!==e&&tQ(e.charCodeAt(0))||wQ({},jX,HX),t=e);PX<LX&&nQ(e=RX.charCodeAt(PX));)++PX,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==RX.charCodeAt(PX)&&wQ({},jX,HX),++PX,(e=oQ("u"))&&"\\"!==e&&nQ(e.charCodeAt(0))||wQ({},jX,HX),t+=e);return t}function uQ(){var e,t;return e=PX,{type:1===(t=92===RX.charCodeAt(PX)?sQ():function(){var e,t;for(e=PX++;PX<LX;){if(92===(t=RX.charCodeAt(PX)))return PX=e,sQ();if(!nQ(t))break;++PX}return RX.slice(e,PX)}()).length?3:rQ.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:PX}}function lQ(){var e,t,n,r,i=PX,o=RX.charCodeAt(PX),a=RX[PX];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++PX,{type:7,value:String.fromCharCode(o),start:i,end:PX};default:if(61===(e=RX.charCodeAt(PX+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return PX+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:PX};case 33:case 61:return PX+=2,61===RX.charCodeAt(PX)&&++PX,{type:7,value:RX.slice(i,PX),start:i,end:PX}}}return">>>="===(r=RX.substr(PX,4))?{type:7,value:r,start:i,end:PX+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:PX+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:7,value:t,start:i,end:PX+=2}:("//"===t&&wQ({},jX,HX),"<>=!+-*%&|^/".indexOf(a)>=0?{type:7,value:a,start:i,end:++PX}:void wQ({},jX,HX))}function cQ(){var e,t,n;if(XX(QX((n=RX[PX]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=PX,e="","."!==n){if(e=RX[PX++],n=RX[PX],"0"===e){if("x"===n||"X"===n)return++PX,function(e){let t="";for(;PX<LX&&JX(RX[PX]);)t+=RX[PX++];return 0===t.length&&wQ({},jX,HX),tQ(RX.charCodeAt(PX))&&wQ({},jX,HX),{type:6,value:parseInt("0x"+t,16),start:e,end:PX}}(t);if(KX(n))return function(e){let t="0"+RX[PX++];for(;PX<LX&&KX(RX[PX]);)t+=RX[PX++];return(tQ(RX.charCodeAt(PX))||QX(RX.charCodeAt(PX)))&&wQ({},jX,HX),{type:6,value:parseInt(t,8),octal:!0,start:e,end:PX}}(t);n&&QX(n.charCodeAt(0))&&wQ({},jX,HX)}for(;QX(RX.charCodeAt(PX));)e+=RX[PX++];n=RX[PX]}if("."===n){for(e+=RX[PX++];QX(RX.charCodeAt(PX));)e+=RX[PX++];n=RX[PX]}if("e"===n||"E"===n)if(e+=RX[PX++],"+"!==(n=RX[PX])&&"-"!==n||(e+=RX[PX++]),QX(RX.charCodeAt(PX)))for(;QX(RX.charCodeAt(PX));)e+=RX[PX++];else wQ({},jX,HX);return tQ(RX.charCodeAt(PX))&&wQ({},jX,HX),{type:6,value:parseFloat(e),start:t,end:PX}}function fQ(){var e,t,n,r;return BX=null,iQ(),e=PX,t=function(){var e,t,n,r;for(XX("/"===(e=RX[PX]),"Regular expression literal must start with a slash"),t=RX[PX++],n=!1,r=!1;PX<LX;)if(t+=e=RX[PX++],"\\"===e)eQ((e=RX[PX++]).charCodeAt(0))&&wQ({},qX),t+=e;else if(eQ(e.charCodeAt(0)))wQ({},qX);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||wQ({},qX),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";PX<LX&&nQ((e=RX[PX]).charCodeAt(0));)++PX,"\\"===e&&PX<LX?wQ({},jX,HX):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&wQ({},UX,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";wQ({},UX)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){wQ({},UX)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:PX}}function dQ(){if(iQ(),PX>=LX)return{type:2,start:PX,end:PX};const e=RX.charCodeAt(PX);return tQ(e)?uQ():40===e||41===e||59===e?lQ():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(XX("'"===(e=RX[PX])||'"'===e,"String literal must starts with a quote"),t=PX,++PX;PX<LX;){if((n=RX[PX++])===e){e="";break}if("\\"===n)if((n=RX[PX++])&&eQ(n.charCodeAt(0)))"\r"===n&&"\n"===RX[PX]&&++PX;else switch(n){case"u":case"x":"{"===RX[PX]?(++PX,i+=aQ()):i+=oQ(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:KX(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),PX<LX&&KX(RX[PX])&&(o=!0,r=8*r+"01234567".indexOf(RX[PX++]),"0123".indexOf(n)>=0&&PX<LX&&KX(RX[PX])&&(r=8*r+"01234567".indexOf(RX[PX++]))),i+=String.fromCharCode(r)):i+=n}else{if(eQ(n.charCodeAt(0)))break;i+=n}}return""!==e&&wQ({},jX,HX),{type:8,value:i,octal:o,start:t,end:PX}}():46===e?QX(RX.charCodeAt(PX+1))?cQ():lQ():QX(e)?cQ():lQ()}function hQ(){const e=BX;return PX=e.end,BX=dQ(),PX=e.end,e}function pQ(){const e=PX;BX=dQ(),PX=e}function mQ(e,t,n){const r=new TX("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function gQ(e,t){const n=new TX("CallExpression");return n.callee=e,n.arguments=t,n}function yQ(e){const t=new TX(IX);return t.name=e,t}function vQ(e){const t=new TX("Literal");return t.value=e.value,t.raw=RX.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function bQ(e,t,n){const r=new TX("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function xQ(e,t,n){const r=new TX("Property");return r.key=t,r.value=n,r.kind=e,r}function wQ(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(XX(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=PX,n.description=i,n}function _Q(e){2===e.type&&wQ(e,"Unexpected end of input"),6===e.type&&wQ(e,"Unexpected number"),8===e.type&&wQ(e,"Unexpected string"),3===e.type&&wQ(e,"Unexpected identifier"),4===e.type&&wQ(e,"Unexpected reserved word"),wQ(e,jX,e.value)}function kQ(e){const t=hQ();7===t.type&&t.value===e||_Q(t)}function EQ(e){return 7===BX.type&&BX.value===e}function SQ(e){return 4===BX.type&&BX.value===e}function AQ(){const e=[];for(PX=BX.start,kQ("[");!EQ("]");)EQ(",")?(hQ(),e.push(null)):(e.push(LQ()),EQ("]")||kQ(","));return hQ(),function(e){const t=new TX("ArrayExpression");return t.elements=e,t}(e)}function CQ(){PX=BX.start;const e=hQ();return 8===e.type||6===e.type?(e.octal&&wQ(e,WX),vQ(e)):yQ(e.value)}function DQ(){var e,t,n;return PX=BX.start,3===(e=BX).type?(n=CQ(),kQ(":"),xQ("init",n,LQ())):2!==e.type&&7!==e.type?(t=CQ(),kQ(":"),xQ("init",t,LQ())):void _Q(e)}function MQ(){var e,t,n=[],r={},i=String;for(PX=BX.start,kQ("{");!EQ("}");)t="$"+((e=DQ()).key.type===IX?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?wQ({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),EQ("}")||kQ(",");return kQ("}"),function(e){const t=new TX("ObjectExpression");return t.properties=e,t}(n)}const FQ={if:1};function NQ(){var e,t,n;if(EQ("("))return function(){kQ("(");const e=BQ();return kQ(")"),e}();if(EQ("["))return AQ();if(EQ("{"))return MQ();if(e=BX.type,PX=BX.start,3===e||FQ[BX.value])n=yQ(hQ().value);else if(8===e||6===e)BX.octal&&wQ(BX,WX),n=vQ(hQ());else{if(4===e)throw new Error(VX);1===e?((t=hQ()).value="true"===t.value,n=vQ(t)):5===e?((t=hQ()).value=null,n=vQ(t)):EQ("/")||EQ("/=")?(n=vQ(fQ()),pQ()):_Q(hQ())}return n}function OQ(){const e=[];if(kQ("("),!EQ(")"))for(;PX<LX&&(e.push(LQ()),!EQ(")"));)kQ(",");return kQ(")"),e}function $Q(){return kQ("."),function(){PX=BX.start;const e=hQ();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||_Q(e),yQ(e.value)}()}function TQ(){kQ("[");const e=BQ();return kQ("]"),e}function zQ(){const e=function(){var e;for(e=NQ();;)if(EQ("."))e=bQ(".",e,$Q());else if(EQ("("))e=gQ(e,OQ());else{if(!EQ("["))break;e=bQ("[",e,TQ())}return e}();if(7===BX.type&&(EQ("++")||EQ("--")))throw new Error(VX);return e}function RQ(){var e,t;if(7!==BX.type&&4!==BX.type)t=zQ();else{if(EQ("++")||EQ("--"))throw new Error(VX);if(EQ("+")||EQ("-")||EQ("~")||EQ("!"))e=hQ(),t=RQ(),t=function(e,t){const n=new TX("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(SQ("delete")||SQ("void")||SQ("typeof"))throw new Error(VX);t=zQ()}}return t}function PQ(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function LQ(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,u,l;if(e=BX,u=RQ(),0===(i=PQ(r=BX)))return u;for(r.prec=i,hQ(),t=[e,BX],o=[u,r,a=RQ()];(i=PQ(BX))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=mQ(s,u,a),o.push(n);(r=hQ()).prec=i,o.push(r),t.push(BX),n=RQ(),o.push(n)}for(n=o[l=o.length-1],t.pop();l>1;)t.pop(),n=mQ(o[l-1].value,o[l-2],n),l-=2;return n}(),EQ("?")&&(hQ(),t=LQ(),kQ(":"),e=function(e,t,n){const r=new TX("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,LQ())),e}function BQ(){const e=LQ();if(EQ(","))throw new Error(VX);return e}function IQ(e){PX=0,LX=(RX=e).length,BX=null,pQ();const t=BQ();if(2!==BX.type)throw new Error("Unexpect token after expression.");return t}var jQ={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function UQ(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&UE("Missing arguments to clamp function."),t.length>3&&UE("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&UE("Missing arguments to if function."),t.length>3&&UE("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function qQ(e){const t=(e=e||{}).allowed?uA(e.allowed):{},n=e.forbidden?uA(e.forbidden):{},r=e.constants||jQ,i=(e.functions||UQ)(f),o=e.globalvar,a=e.fieldvar,s=AS(o)?o:e=>"".concat(o,'["').concat(e,'"]');let u={},l={},c=0;function f(e){if(XS(e))return e;const t=d[e.type];return null==t&&UE("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:LS(n,i)?UE("Illegal identifier: "+i):LS(r,i)?r[i]:LS(t,i)?i:(u[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(c+=1);const r=f(e.property);return n===a&&(l[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&UE("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=LS(i,t)&&i[t];return r||UE("Unrecognized function: "+t),AS(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{c+=1;const t=f(e.key);return c-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},t}return h.functions=i,h.constants=r,h}const WQ="intersect",HQ="union";function VQ(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=WE.getter||WE(r.field),HS(n=r.getter(e))&&(n=aS(n)),HS(o[s])&&(o[s]=aS(o[s])),HS(o[s][0])&&(o[s]=o[s].map(aS)),"E"===r.type){if(ZE(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!qS(n,o[s]))return!1}else if("R-RE"===r.type){if(!qS(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!qS(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!qS(n,o[s],!1,!0))return!1;return!0}const GQ=WE("_vgsid_"),YQ=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>{return(r=e(t))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}(GQ),XQ=YQ.left,QQ=YQ.right;var JQ={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=aS(t[0]),r=aS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=aS(t[0]),r=aS(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function KQ(e,t,n,r){t[0].type!==kX&&UE("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@unit",s=":"+i;(t.length>=2&&oS(t).value)!==WQ||LS(r,a)||(r["@unit"]=n.getData(i).indataRef(n,o)),LS(r,s)||(r[s]=n.getData(i).tuplesRef())}function ZQ(e){const t=this.context.data[e];return t?t.values.value:[]}const eJ=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},tJ=eJ("format"),nJ=eJ("timeFormat"),rJ=eJ("utcFormat"),iJ=eJ("timeParse"),oJ=eJ("utcParse"),aJ=new Date(2e3,0,1);function sJ(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(aJ.setYear(2e3),aJ.setMonth(e),aJ.setDate(t),nJ.call(this,aJ,n)):""}function uJ(e,t,n,r){t[0].type!==kX&&UE("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!LS(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function lJ(e,t,n,r){if(t[0].type===kX)cJ(n,r,t[0].value);else for(e in n.scales)cJ(n,r,e)}function cJ(e,t,n){const r="%"+n;if(!LS(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function fJ(e,t){let n;return AS(e)?e:XS(e)?(n=t.scales[e])&&n.value:void 0}function dJ(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=lJ,n._range=lJ,n._scale=lJ;const r=t=>"_["+(t.type===kX?rA("%"+t.value):rA("%")+"+"+e(t))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(r(e[0]),")"),_range:e=>"".concat(r(e[0]),".range()"),_scale:t=>"".concat(r(t[0]),"(").concat(e(t[1]),")")}}function hJ(e,t){return function(n,r,i){if(n){const t=fJ(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const pJ=hJ("area",(function(e){return sU=new Qg,oU(e,uU),2*sU})),mJ=hJ("bounds",(function(e){var t,n,r,i,o,a,s;if(gU=mU=-(hU=pU=1/0),_U=[],oU(e,NU),n=_U.length){for(_U.sort(IU),t=1,o=[r=_U[0]];t<n;++t)jU(r,(i=_U[t])[0])||jU(r,i[1])?(BU(r[0],i[1])>BU(r[0],r[1])&&(r[1]=i[1]),BU(i[0],r[1])>BU(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=BU(r[1],i[0]))>a&&(a=s,hU=i[0],mU=r[1])}return _U=kU=null,hU===1/0||pU===1/0?[[NaN,NaN],[NaN,NaN]]:[[hU,pU],[mU,gU]]})),gJ=hJ("centroid",(function(e){UU=qU=WU=HU=VU=GU=YU=XU=0,QU=new Qg,JU=new Qg,KU=new Qg,oU(e,iq);var t=+QU,n=+JU,r=+KU,i=Bj(t,n,r);return i<Aj&&(t=GU,n=YU,r=XU,qU<Sj&&(t=WU,n=HU,r=VU),(i=Bj(t,n,r))<Aj)?[NaN,NaN]:[zj(n,t)*Nj,Gj(r/i)*Nj]}));function yJ(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function vJ(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function bJ(e){const t=op(e);return.2126*vJ(t.r)+.7152*vJ(t.g)+.0722*vJ(t.b)}function xJ(e,t){return e===t||e!=e&&t!=t||(ZE(e)?!(!ZE(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!xJ(e[n],t[n]))return!1;return!0}(e,t):!(!eS(e)||!eS(t))&&wJ(e,t))}function wJ(e,t){for(const n in e)if(!xJ(e[n],t[n]))return!1;return!0}function _J(e){return t=>wJ(e,t)}const kJ={};function EJ(e){return ZE(e)||ArrayBuffer.isView(e)?e:null}function SJ(e){return EJ(e)||(XS(e)?e:null)}const AJ=e=>e.data;function CJ(e,t){const n=ZQ.call(t,e);return n.root&&n.root.lookup||{}}const DJ=()=>"undefined"!=typeof window&&window||null;const MJ={random:function(){return hF()},cumulativeNormal:EF,cumulativeLogNormal:FF,cumulativeUniform:RF,densityNormal:kF,densityLogNormal:MF,densityUniform:zF,quantileNormal:SF,quantileLogNormal:NF,quantileUniform:PF,sampleNormal:_F,sampleLogNormal:DF,sampleUniform:TF,isArray:ZE,isBoolean:WS,isDate:HS,isDefined:function(e){return void 0!==e},isNumber:GS,isObject:eS,isRegExp:YS,isString:XS,isTuple:_M,isValid:function(e){return null!=e&&e==e},toBoolean:iA,toDate:aA,toNumber:aS,toString:sA,indexof:function(e,...t){return SJ(e).indexOf(...t)},join:function(e,...t){return EJ(e).join(...t)},lastindexof:function(e,...t){return SJ(e).lastIndexOf(...t)},replace:function(e,t,n){return AS(n)&&UE("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return EJ(e).slice().reverse()},slice:function(e,...t){return SJ(e).slice(...t)},flush:jS,lerp:JS,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),TS(...e)},pad:tA,peek:oS,pluck:function(e,t){const n=kJ[t]||(kJ[t]=WE(t));return ZE(e)?e.map(n):n(e)},span:nA,inrange:qS,truncate:lA,rgb:op,lab:kp,hcl:Fp,hsl:dp,luminance:bJ,contrast:function(e,t){const n=bJ(e),r=bJ(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:oy,format:tJ,utcFormat:rJ,utcParse:oJ,utcOffset:zD,utcSequence:LD,timeFormat:nJ,timeParse:iJ,timeOffset:TD,timeSequence:PD,timeUnitSpecifier:aD,monthFormat:function(e){return sJ.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return sJ.call(this,e,1,"%b")},dayFormat:function(e){return sJ.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return sJ.call(this,0,2+e,"%a")},quarter:_S,utcquarter:kS,week:cD,utcweek:gD,dayofyear:lD,utcdayofyear:mD,warn:function(){return yJ(this.context.dataflow,"warn",arguments)},info:function(){return yJ(this.context.dataflow,"info",arguments)},debug:function(){return yJ(this.context.dataflow,"debug",arguments)},extent:zS,inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new iR).set(r[0],r[1],i[0],i[1]);return MB(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=ES(e.marktype),r=ES(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))},clampRange:SS,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=DJ();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=DJ();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return V$(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(XE).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?Cz(n,t=t||gz(e)):e}},panLinear:hS,panLog:pS,panPow:mS,panSymlog:gS,zoomLinear:vS,zoomLog:bS,zoomPow:xS,zoomSymlog:wS,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c,f,d=s.changes;if(!1===a._trigger||!(u.value.length||t||r))return 0;if((!d||d.stamp<l)&&(s.changes=d=a.changeset(),d.stamp=l,a.runAfter((()=>{s.modified=!0,a.pulse(u,d).run()}),!0,1)),n&&(c=!0===n?XE:ZE(n)||_M(n)?n:_J(n),d.remove(c)),t&&d.insert(t),r&&(c=_J(r),u.value.some(c)?d.remove(c):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}},FJ=["view","item","group","xy","x","y"],NJ="this.",OJ={},$J={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(rA("$"+e),"]"),functions:function(e){const t=UQ(e);FJ.forEach((e=>t[e]="event.vega."+e));for(const e in MJ)t[e]=NJ+e;return TS(t,dJ(e,MJ,OJ)),t},constants:jQ,visitors:OJ},TJ=qQ($J);function zJ(e,t,n){return 1===arguments.length?MJ[e]:(MJ[e]=t,n&&(OJ[e]=n),TJ&&(TJ.functions[e]=NJ+e),this)}function RJ(e,t){const n={};let r;try{r=IQ(e=XS(e)?e:rA(e)+"")}catch(t){UE("Expression parse error: "+e)}r.visit((e=>{if(e.type!==DX)return;const r=e.callee.name,i=$J.visitors[r];i&&i(r,e.arguments,t,n)}));const i=TJ(r);return i.globals.forEach((e=>{const r="$"+e;!LS(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:TS({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}zJ("bandwidth",(function(e,t){const n=fJ(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),lJ),zJ("copy",(function(e,t){const n=fJ(e,(t||this).context);return n?n.copy():void 0}),lJ),zJ("domain",(function(e,t){const n=fJ(e,(t||this).context);return n?n.domain():[]}),lJ),zJ("range",(function(e,t){const n=fJ(e,(t||this).context);return n&&n.range?n.range():[]}),lJ),zJ("invert",(function(e,t,n){const r=fJ(e,(n||this).context);return r?ZE(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),lJ),zJ("scale",(function(e,t,n){const r=fJ(e,(n||this).context);return r?r(t):void 0}),lJ),zJ("gradient",(function(e,t,n,r,i){e=fJ(e,(i||this).context);const o=fz(t,n);let a=e.domain(),s=a[0],u=oS(a),l=VE;return u-s?l=TT(e,s,u):e=(e.interpolator?wT("sequential")().interpolator(e.interpolator()):wT("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==oS(a)&&a.push(u)),a.forEach((t=>o.stop(l(t),e(t)))),o}),lJ),zJ("geoArea",pJ,lJ),zJ("geoBounds",mJ,lJ),zJ("geoCentroid",gJ,lJ),zJ("geoShape",(function(e,t,n){const r=fJ(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),lJ),zJ("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==kX&&UE("First argument to indata must be a string literal."),t[1].type!==kX&&UE("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;LS(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),zJ("data",ZQ,uJ),zJ("treePath",(function(e,t,n){const r=CJ(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(AJ):void 0}),uJ),zJ("treeAncestors",(function(e,t){const n=CJ(e,this)[t];return n?n.ancestors().map(AJ):void 0}),uJ),zJ("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u["index:unit"]&&u["index:unit"].value:void 0,f=n===WQ,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=VQ(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=VQ(t,r)))return s;return d&&f}),KQ),zJ("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,a=n===WQ,s=GQ(t),u=XQ(i,s);if(u===i.length)return!1;if(GQ(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(QQ(i,s)-u<o.size)return!1}return!0}),KQ),zJ("vlSelectionResolve",(function(e,t,n,r){for(var i,o,a,s,u,l,c,f,d,h,p,m=this.context.data[e],g=m?m.values.value:[],y={},v={},b={},x=g.length,w=0;w<x;++w){for(s=(i=g[w]).unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=(l=y[u.field]||(y[u.field]={}))[s]||(l[s]=[]),b[u.field]=f=u.type.charAt(0),d=JQ[f+"_union"],l[s]=d(c,ES(a[h]));n&&(c=v[s]||(v[s]=[])).push(ES(a).reduce(((e,t,n)=>(e[o[n].field]=t,e)),{}))}if(t=t||HQ,Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:JQ[b[e]+"_"+t](n,r)))})),g=Object.keys(v),n&&g.length){y[r?"vlPoint":"vlMulti"]=t===HQ?{or:g.reduce(((e,t)=>(e.push(...v[t]),e)),[])}:{and:g.map((e=>({or:v[e]})))}}return y}),KQ),zJ("vlSelectionTuples",(function(e,t){return e.map((e=>TS({values:t.fields.map((t=>(t.getter||(t.getter=WE(t.field)))(e.datum)))},t)))}));const PJ=uA(["rule"]),LJ=uA(["group","image","rect"]);function BJ(e){return(e+"").toLowerCase()}function IJ(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var jJ={operator:(e,t)=>IJ(e,["_"],t.code),parameter:(e,t)=>IJ(e,["datum","_"],t.code),event:(e,t)=>IJ(e,["event"],t.code),handler:(e,t)=>IJ(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+rA(e)+"]";i+="$=".concat(r[e].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(e,t){let n="";return PJ[t]||(e.x2&&(e.x?(LJ[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(LJ[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",IJ(e,["item","_"],i)},codegen:{get:function(e){const t="[".concat(e.map(rA).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,a,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function UJ(e,t,n){if(!e||!eS(e))return e;for(let r,i=0,o=qJ.length;i<o;++i)if(r=qJ[i],LS(e,r.key))return r.parse(e,t,n);return e}var qJ=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||UE("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=QS(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=RE(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=WE(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=RE(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=ES(e.$compare).map((e=>e&&e.$tupleid?kM:e));return t.fn[n]||(t.fn[n]=CS(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return kM}}];const WJ={skip:!0};function HJ(e,t,n,r){return new VJ(e,t,n,r)}function VJ(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||jJ,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function GJ(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function YJ(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}VJ.prototype=GJ.prototype={fork:function(){const e=new GJ(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===BJ(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve:function(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[BJ(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;"operator"!==BJ(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||UE("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ZE(i)?i.map((e=>UJ(e,n,t))):UJ(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map((e=>n.get(e))))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&UE("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=eS(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||UE("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],WJ)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(XE).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};const XJ="default";function QJ(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function JJ(e,t){var n=e._runtime.data;return LS(n,t)||UE("Unrecognized data set: "+t),n[t]}function KJ(e,t){FM(t)||UE("Second argument to changes must be a changeset.");const n=JJ(this,e);return n.modified=!0,this.pulse(n.input,t)}function ZJ(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function eK(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function tK(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function nK(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=tK(e),(r=hL(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;XS(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:OS(e),item:OS(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const rK="view",iK={trap:!1};function oK(e,t,n,r){e._eventListeners.push({type:n,sources:ES(t),handler:r})}function aK(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||eS(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function sK(e){return e.item}function uK(e){return e.item.mark.source}function lK(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function cK(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function fK(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),oK(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function dK(e,t,n,r){const i=r.signal(n.signal),o=cK("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(cK("label"));a.appendChild(cK("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=hK;switch(n.input){case"checkbox":s=pK;break;case"select":s=mK;break;case"radio":s=gK;break;case"range":s=yK}s(e,a,n,i)}function hK(e,t,n,r){const i=cK("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function pK(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=cK("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function mK(e,t,n,r){const i=cK("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};vK(e,r)&&(n.selected=!0),i.appendChild(cK("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(vK(n.options[t],e))return void(i.selectedIndex=t)}}function gK(e,t,n,r){const i=cK("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};vK(t,r)&&(s.checked=!0);const u=cK("input",s);u.addEventListener("change",(()=>e.update(t)));const l=cK("label",{},(o[a]||t)+"");return l.prepend(u),i.appendChild(l),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)vK(n[e].value,t)&&(n[e].checked=!0)}}function yK(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||dy(o,i,100),s=cK("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=cK("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=e=>{s.value=e,u.textContent=e}}function vK(e,t){return e===t||e+""==t+""}function bK(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,ZJ(e),eK(e),tK(e),i,o).background(e.background())}function xK(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function wK(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const _K=e=>+e||0;function kK(e){return eS(e)?{top:_K(e.top),bottom:_K(e.bottom),left:_K(e.left),right:_K(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(_K(e))}async function EK(e,t,n,r){const i=DB(t),o=i&&i.headless;return o||UE("Unrecognized renderer type: "+t),await e.runAsync(),bK(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var SK="width",AK="height",CK="padding",DK={skip:!0};function MK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===CK?r.left+r.right:0)}function FK(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===CK?r.top+r.bottom:0)}function NK(e,t){return t.modified&&ZE(t.input.value)&&e.indexOf("_:vega:_")}function OK(e,t){return!("parent"===e||t instanceof rF.proxy)}function $K(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":ZE(e)?TK(e):eS(e)&&!HS(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(ZE(n)?TK(n):zK(n))})).join("\n")):e+"";var t}(r))}function TK(e){return"["+e.map(zK).join(", ")+"]"}function zK(e){return ZE(e)?"[]":eS(e)&&!HS(e)?"{}":e}function RK(e,t){const n=this;if(t=t||{},eF.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=TS({},e.locale,t.locale);n.locale(hM(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||AB.Canvas,n._scenegraph=new aL;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||$K,n._redraw=!0,n._handler=(new OL).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=TS({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{ZE(e[t])&&(e[t]=uA(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return HJ(e,rF,MJ,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:TS({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=MK(n,n._width),n._viewHeight=FK(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=MK(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=FK(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:XJ,item:null}));e.on(e.events("view","mousemove"),t,((e,n)=>{const r=t.value,i=r?XS(r)?r:r.user:XJ,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return XS(n)||(r=n.item,n=n.user),QJ(e,n&&n!==XJ?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function PK(e,t){return LS(e._signals,t)?e._signals[t]:UE("Unrecognized signal name: "+rA(t))}function LK(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function BK(e,t,n,r){let i=LK(n,r);return i||(i=xK(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function IK(e,t,n){const r=LK(t,n);return r&&t._targets.remove(r),e}US(RK,eF,{evaluate:async function(e,t,n){if(await eF.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=tK(r=this),o=ZJ(r),a=eK(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((e=>{try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&bM(this,n),this},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&YJ(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){const r=PK(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",kK(e)):kK(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(DB(e)||UE("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(eF.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(PK(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(SK,n,DK),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(AK,r,DK),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)},addEventListener:function(e,t,n){let r=t;return n&&!1===n.trap||(r=xK(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return BK(this,e,PK(this,e),t)},removeSignalListener:function(e,t){return IK(this,PK(this,e),t)},addDataListener:function(e,t){return BK(this,e,JJ(this,e).values,t)},removeDataListener:function(e,t){return IK(this,JJ(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){const t=QJ(this,null);this._globalCursor=!!e,t&&QJ(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new Xm,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?Gm():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,o=new BM(n),a=function(n,r){i.runAsync(null,(()=>{e===rK&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(nK(i,n,r))}))};if("timer"===e)aK(i,"timer",t)&&i.timer(a,t);else if(e===rK)aK(i,"view",t)&&i.addEventListener(t,a,iK);else if("window"===e?aK(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&aK(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,a);oK(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",sK),uK,lK(e)),this.on(this.events("view","mouseout",sK),uK,lK(t)),this},data:function(e,t){return arguments.length<2?JJ(this,e).values.value:KJ.call(this,e,NM().remove(XE).insert(t))},change:KJ,insert:function(e,t){return KJ.call(this,e,NM().insert(t))},remove:function(e,t){return KJ.call(this,e,NM().remove(t))},scale:function(e){var t=this._runtime.scales;return LS(t,e)||UE("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=DB(r);e=n._el=e?wK(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),YJ(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||OL,s=e?o.renderer:o.headless;return n._renderer=s?bK(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),xK(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,tK(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=wK(n,t,!0):e.appendChild(cK("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=wK(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=$S(r.debounce,i.update))),(null==r.input&&r.element?fK:dK)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==AB.Canvas&&e!==AB.SVG&&e!==AB.PNG&&UE("Unrecognized image type: "+e);const n=await EK(this,e,t);return e===AB.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await EK(this,AB.Canvas,e,t)).canvas()},toSVG:async function(e){return(await EK(this,AB.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:NK,signals:OK,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}});const jK="[",UK="]",qK=/[[\]{}]/,WK={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let HK,VK;function GK(e,t,n){return HK=t||"view",VK=n||WK,XK(e.trim()).map(QK)}function YK(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function XK(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=YK(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function QK(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=YK(e,r,UK,jK,UK),r===t)throw"Empty between selector: "+e;if(n=XK(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;n=n.map(QK);const i=QK(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:HK},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,l=0;if("}"===e[u-1]){if(l=e.lastIndexOf("{"),!(l>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,u-1))}catch(t){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,l).trim()).length,l=0}if(!u)throw e;"@"===e[0]&&(a=++l);r=YK(e,l,":"),r<u&&(n.push(e.substring(s,r).trim()),s=l=++r);if(l=YK(e,l,jK),l===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,l).trim()),i=[],s=++l,s===u)throw"Unmatched left bracket: "+e;for(;l<u;){if(l=YK(e,l,UK),l===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==jK)throw"Expected left bracket: "+e;s=++l}if(!(u=n.length)||qK.test(n[u-1]))throw"Invalid event selector: "+e;u>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],VK[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function JK(e){return eS(e)?e:{type:e||"pad"}}const KK=e=>+e||0;function ZK(e){return eS(e)?e.signal?e:{top:KK(e.top),bottom:KK(e.bottom),left:KK(e.left),right:KK(e.right)}:{top:t=KK(e),bottom:t,left:t,right:t};var t}const eZ=e=>eS(e)&&!ZE(e)?TS({},e):{value:e};function tZ(e,t,n,r){if(null!=n){return eS(n)&&!ZE(n)||ZE(n)&&n.length&&eS(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function nZ(e,t,n){for(const n in t)tZ(e,n,t[n]);for(const t in n)tZ(e,t,n[t],"update")}function rZ(e,t,n){for(const r in t)n&&LS(n,r)||(e[r]=TS(e[r]||{},t[r]));return e}function iZ(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const oZ="mark",aZ="frame",sZ="scope",uZ="legend-label",lZ="title-text",cZ="title-subtitle";function fZ(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const dZ=e=>XS(e)?rA(e):e.signal?"(".concat(e.signal,")"):gZ(e);function hZ(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:rA(e)));for(;t.length&&null==oS(t);)t.pop();return t.unshift(dZ(e.gradient)),"gradient(".concat(t.join(","),")")}(e);let t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?pZ("hcl",e.h,e.c,e.l):e.h||e.s?pZ("hsl",e.h,e.s,e.l):e.l||e.a?pZ("lab",e.l,e.a,e.b):e.r||e.g||e.b?pZ("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?gZ(e.field):void 0!==e.value?rA(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=dZ(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1==+e.band?"":"*"+mZ(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(mZ(e.exponent),")")),null!=e.mult&&(t+="*".concat(mZ(e.mult))),null!=e.offset&&(t+="+".concat(mZ(e.offset))),e.round&&(t="round(".concat(t,")")),t}const pZ=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(hZ).join(","),")+'')");function mZ(e){return eS(e)?"("+hZ(e)+")":e}function gZ(e){return yZ(eS(e)?e:{datum:e})}function yZ(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):UE("Invalid field reference: "+rA(e));return e.signal||(r=XS(r)?qE(r).map(rA).join("]["):yZ(r)),t+"["+r+"]"}function vZ(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,u,l,c;for(u in u="lineBreak","text"!==t||null==i[u]||iZ(u,e)||fZ(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===aZ?i.group:n===oZ?TS({},i.mark,i[t]):null,c)l=iZ(u,e)||("fill"===u||"stroke"===u)&&(iZ("fill",e)||iZ("stroke",e)),l||fZ(o,u,c[u]);for(u in ES(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)iZ(t,e)||fZ(o,t,n[t])})),e=TS({},e),o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=TS(a,e.enter),s&&(e.update=TS(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)a[n]=bZ(e[n],t,o,i);return o}function bZ(e,t,n,r){const i={},o={};for(const t in e)null!=e[t]&&(i[t]=xZ((a=e[t],ZE(a)?function(e){let t="";return e.forEach((e=>{const n=hZ(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===oS(t)&&(t+="null"),t}(a):hZ(a)),r,n,o));var a;return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function xZ(e,t,n,r){const i=RJ(e,t);return i.$fields.forEach((e=>r[e]=1)),TS(n,i.$params),i.$expr}const wZ=["value","update","init","react","bind"];function _Z(e,t){UE(e+' for "outer" push: '+rA(t))}function kZ(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||_Z("No prior signal definition",n),wZ.forEach((t=>{void 0!==e[t]&&_Z("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function EZ(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function SZ(e,t,n,r){return new EZ(e,t,n,r)}function AZ(e,t){return SZ("operator",e,t)}function CZ(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function DZ(e,t){return t?{$field:e,$name:t}:{$field:e}}const MZ=DZ("key");function FZ(e,t){return{$compare:e,$order:t}}function NZ(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const OZ="scope",$Z="view";function TZ(e){return e&&e.signal}function zZ(e){if(TZ(e))return!0;if(eS(e))for(const t in e)if(zZ(e[t]))return!0;return!1}function RZ(e,t){return null!=e?e:t}function PZ(e){return e&&e.signal||e}const LZ="timer";function BZ(e,t){return(e.merge?IZ:e.stream?jZ:e.type?UZ:UE("Invalid stream specification: "+rA(e)))(e,t)}function IZ(e,t){const n=qZ({merge:e.merge.map((e=>BZ(e,t)))},e,t);return t.addStream(n).id}function jZ(e,t){const n=qZ({stream:BZ(e.stream,t)},e,t);return t.addStream(n).id}function UZ(e,t){let n;var r;e.type===LZ?(n=t.event(LZ,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===OZ?$Z:r||$Z,e.type);const i=qZ({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function qZ(e,t,n){let r=t.between;return r&&(2!==r.length&&UE('Stream "between" parameter must have 2 entries: '+rA(t)),e.between=[BZ(r[0],n),BZ(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===OZ&&r.push("inScope(event.item)"),r.length&&(e.filter=RJ("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const WZ={code:"_.$value",ast:{type:"Identifier",value:"value"}};function HZ(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||UE("Signal update missing events specification."),XS(o)&&(o=GK(o,t.isSubscope()?OZ:$Z)),o=ES(o).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[VZ(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&UE("Signal encode and update are mutually exclusive."),a="encode(item(),"+rA(r)+")"),i.update=XS(a)?RJ(a,t):null!=a.expr?RJ(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:WZ,$params:{$value:t.signalRef(a.signal)}}:UE("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(TS(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):BZ(e,t)}}(e,t),i))))}function VZ(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const GZ=e=>(t,n,r)=>SZ(e,n,t||void 0,r),YZ=GZ("aggregate"),XZ=GZ("axisticks"),QZ=GZ("bound"),JZ=GZ("collect"),KZ=GZ("compare"),ZZ=GZ("datajoin"),e0=GZ("encode"),t0=GZ("expression"),n0=GZ("facet"),r0=GZ("field"),i0=GZ("key"),o0=GZ("legendentries"),a0=GZ("load"),s0=GZ("mark"),u0=GZ("multiextent"),l0=GZ("multivalues"),c0=GZ("overlap"),f0=GZ("params"),d0=GZ("prefacet"),h0=GZ("projection"),p0=GZ("proxy"),m0=GZ("relay"),g0=GZ("render"),y0=GZ("scale"),v0=GZ("sieve"),b0=GZ("sortitems"),x0=GZ("viewlayout"),w0=GZ("values");let _0=0;const k0={min:"min",max:"max",count:"sum"};function E0(e,t){const n=t.getScale(e.name).params;let r;var i;for(r in n.domain=D0(e.domain,e,t),null!=e.range&&(n.range=R0(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=S0(e.type||e),null!=e.gamma&&(t.interpolateGamma=S0(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=eS(i=e.nice)?{interval:S0(i.interval),step:S0(i.step)}:S0(i)),null!=e.bins&&(n.bins=function(e,t){return e.signal||ZE(e)?A0(e,t):t.objectProperty(e)}(e.bins,t)),e)LS(n,r)||"name"===r||(n[r]=S0(e[r],t))}function S0(e,t){return eS(e)?e.signal?t.signalRef(e.signal):UE("Unsupported object: "+rA(e)):e}function A0(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>S0(e,t)))}function C0(e){UE("Can not find data set: "+rA(e))}function D0(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(ZE(e)?M0:e.fields?N0:F0)(e,t,n);null==t.domainMin&&null==t.domainMax||UE("No scale domain defined for domainMin/domainMax to override.")}function M0(e,t,n){return e.map((e=>S0(e,n)))}function F0(e,t,n){const r=n.getData(e.data);return r||C0(e.data),ST(t.type)?r.valuesRef(n,e.field,$0(e.sort,!1)):MT(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function N0(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=XS(t)?{data:r,field:t}:ZE(t)||t.signal?function(e,t){const n="_:vega:_"+_0++,r=JZ({});if(ZE(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rA(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,v0({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(ST(t.type)?O0:MT(t.type)?T0:z0)(e,n,i)}function O0(e,t,n){const r=$0(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||C0(e.data),n.countsRef(t,e.field,r)})),s={groupby:MZ,pulse:a};r&&(i=r.op||"count",o=r.field?NZ(i,r.field):"count",s.ops=[k0[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(YZ(s));const u=t.add(JZ({pulse:CZ(i)}));return o=t.add(w0({field:MZ,sort:t.sortRef(r),pulse:CZ(u)})),CZ(o)}function $0(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!k0[e.op]&&UE("Multiple domain scales can not be sorted using "+e.op):UE("No field provided for sort aggregate op: "+e.op):eS(e)?e.field="key":e={field:"key"}),e}function T0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||C0(e.data),n.domainRef(t,e.field)}));return CZ(t.add(l0({values:r})))}function z0(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||C0(e.data),n.extentRef(t,e.field)}));return CZ(t.add(u0({extents:r})))}function R0(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(XS(i)){if(r&&LS(r,i))return R0(e=TS({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=ST(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:UE("Unrecognized scale range value: "+rA(i))}else{if(i.scheme)return n.scheme=ZE(i.scheme)?A0(i.scheme,t):S0(i.scheme,t),i.extent&&(n.schemeExtent=A0(i.extent,t)),void(i.count&&(n.schemeCount=S0(i.count,t)));if(i.step)return void(n.rangeStep=S0(i.step,t));if(ST(e.type)&&!ZE(i))return D0(i,e,t);ZE(i)||UE("Unsupported range type: "+rA(i))}return i.map((e=>(ZE(e)?A0:S0)(e,t)))}function P0(e,t,n){return ZE(e)?e.map((e=>P0(e,t,n))):eS(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:UE("Unsupported parameter object: "+rA(e)):e}const L0="top",B0="left",I0="right",j0="bottom",U0="center",q0="index",W0="label",H0="perc",V0="value",G0="guide-label",Y0="guide-title",X0="group-title",Q0="group-subtitle",J0="symbol",K0="gradient",Z0="discrete",e1="size",t1=[e1,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],n1={name:1,style:1,interactive:1},r1={value:0},i1={value:1},o1="group",a1="rect",s1="rule",u1="text";function l1(e){return e.type=o1,e.interactive=e.interactive||!1,e}function c1(e,t){const n=(n,r)=>RZ(e[n],RZ(t[n],r));return n.isVertical=n=>"vertical"===RZ(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>RZ(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>RZ(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>RZ(e.columns,RZ(t.columns,+n.isVertical(!0))),n}function f1(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function d1(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}const h1=d1(rA(B0),rA(I0),rA(U0));function p1(e,t){return t?e?eS(e)?Object.assign({},e,{offset:p1(e.offset,t)}):{value:e,offset:t}:t:e}function m1(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=rZ(e.encode,t,n1)):e.interactive=!1,e}function g1(e,t,n,r){const i=c1(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:r1,x:r1,y:r1,width:eZ(f),height:eZ(d)},update:TS({},u,{opacity:i1,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:r1}};return nZ(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),m1({type:a1,role:"legend-gradient",encode:h},r)}function y1(e,t,n,r,i){const o=c1(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:r1,fill:{scale:t,field:V0}};p[l]={signal:h+"datum."+H0,mult:u},p[c]=r1,p[f]={signal:h+"datum.perc2",mult:u},p[d]=eZ(s);const m={enter:p,update:TS({},p,{opacity:i1}),exit:{opacity:r1}};return nZ(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),m1({type:a1,role:"legend-band",key:V0,from:i,encode:m},r)}const v1="datum.".concat(H0,'<=0?"').concat(B0,'":datum.').concat(H0,'>=1?"').concat(I0,'":"').concat(U0,'"'),b1="datum.".concat(H0,'<=0?"').concat(j0,'":datum.').concat(H0,'>=1?"').concat(L0,'":"').concat("middle",'"');function x1(e,t,n,r){const i=c1(e,t),o=i.isVertical(),a=eZ(i.gradientThickness()),s=i.gradientLength();let u,l,c,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:r1},update:l={opacity:i1,text:{field:W0}},exit:{opacity:r1}};return nZ(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:RZ(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=l.baseline={signal:b1},c="y",f="x",h="1-"):(u.align=l.align={signal:v1},u.baseline={value:"top"},c="x",f="y"),u[c]=l[c]={signal:h+"datum."+H0,mult:s},u[f]=l[f]=a,a.offset=RZ(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum.index"}:void 0,m1({type:u1,role:uZ,style:G0,key:V0,from:r,encode:p,overlap:d},n)}function w1(e,t,n,r,i){const o=c1(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(e1),h=l?eZ(l):{field:e1},p="datum.".concat(q0),m="max(1, ".concat(i,")");let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:r1,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:i1,x:y.x,y:y.y},exit:{opacity:r1}};let w=null,_=null;e.fill||(w=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),nZ(g,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),t1.forEach((t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:V0})}));const k=m1({type:"symbol",role:"legend-symbol",key:V0,from:f,clip:!!l||void 0,encode:g},n.symbols),E=eZ(c);E.offset=o("labelOffset"),g={enter:y={opacity:r1,x:{signal:d,offset:E},y:h},update:v={opacity:i1,text:{field:W0},x:y.x,y:y.y},exit:{opacity:r1}},nZ(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=m1({type:u1,role:uZ,style:G0,key:V0,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:r1,height:l?eZ(l):r1,opacity:r1},exit:{opacity:r1},update:v={opacity:i1,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),x={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),l1({role:sZ,from:r={facet:{data:r,name:"value",groupby:q0}},encode:rZ(g,a,n1),marks:[k,S],name:u,interactive:s,sort:x})}const _1='item.orient === "left"',k1='item.orient === "right"',E1="(".concat(_1," || ").concat(k1,")"),S1="datum.vgrad && ".concat(E1),A1=d1('"top"','"bottom"','"middle"'),C1=d1('"right"','"left"','"center"'),D1="datum.vgrad && ".concat(k1," ? (").concat(C1,") : (").concat(E1," && !(datum.vgrad && ").concat(_1,')) ? "left" : ').concat(h1),M1="item._anchor || (".concat(E1,' ? "middle" : "start")'),F1="".concat(S1," ? (").concat(_1," ? -90 : 90) : 0"),N1="".concat(E1," ? (datum.vgrad ? (").concat(k1,' ? "bottom" : "top") : ').concat(A1,') : "top"');function O1(e,t){let n;return eS(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+$1(e.path)+")":e.sphere&&(n="geoShape("+$1(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function $1(e){return eS(e)&&e.signal?e.signal:rA(e)}function T1(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===o1?sZ:t||oZ:t}function z1(e){return{marktype:e.type,name:e.name||void 0,role:e.role||T1(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function R1(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function P1(e,t){const n=iF(e.type);n||UE("Unrecognized transform type: "+rA(e.type));const r=SZ(n.type.toLowerCase(),null,L1(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function L1(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=B1(i,t,n)}return r}function B1(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){XS(t.from)||UE('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(ZE(r)||UE("Expected an array of sub-parameters. Instead: "+rA(r)),r.map((t=>j1(e,t,n)))):j1(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!TZ(i)?i.map((t=>I1(e,t,n))):I1(e,i,n):void(e.required&&UE("Missing required "+rA(t.type)+" parameter: "+rA(e.name)))}function I1(e,t,n){const r=e.type;if(TZ(t))return H1(r)?UE("Expression references can not be signals."):V1(r)?n.fieldRef(t):G1(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||V1(r);return i&&U1(t)?n.exprRef(t.expr,t.as):i&&q1(t)?DZ(t.field,t.as):H1(r)?RJ(t,n):W1(r)?CZ(n.getData(t).values):V1(r)?DZ(t):G1(r)?n.compareRef(t):t}}function j1(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||UE("Unsupported parameter: "+rA(t));const o=TS(L1(i,t,n),i.key);return CZ(n.add(f0(o)))}const U1=e=>e&&e.expr,q1=e=>e&&e.field,W1=e=>"data"===e,H1=e=>"expr"===e,V1=e=>"field"===e,G1=e=>"compare"===e;function Y1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:CZ(t.getData(e.data).output)}function X1(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Q1(e){return XS(e)?e:null}function J1(e,t,n){const r=NZ(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function K1(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=function(e){return eS(e)?("descending"===e.order?"-":"+")+NZ(e.op,e.field):""}(o);let l,c,f=Q1(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",l=s[f]),!l){const n=o?{field:MZ,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:CZ(t.output)};u&&(n.sort=e.sortRef(o)),c=e.add(SZ(r,void 0,n)),a&&(t.index[i]=c),l=CZ(c),null!=f&&(s[f]=l)}return l}function Z1(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(AZ()),l=RJ("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map((e=>null==e?"null":e)).join(",")+"),0)",t);u.update=l.$expr,u.params=l.$params}function e2(e,t){const n=T1(e),r=e.type===o1,i=e.from&&e.from.facet,o=e.overlap;let a,s,u,l,c,f,d,h=e.layout||n===sZ||n===aZ;const p=n===oZ||h||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||UE("Only group marks can be faceted."),null!=r.field?a=s=Y1(r,n):(e.data?s=CZ(n.getData(e.data).aggregate):(o=P1(TS({type:"aggregate",groupby:ES(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=Y1(r,n),a=s=CZ(n.add(o))),i=n.keyRef(r.groupby,!0))):a=CZ(n.add(JZ(null,[{}]))),a||(a=Y1(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(ZZ({key:m.key||(e.key?DZ(e.key):void 0),pulse:m.pulse,clean:!r}));const g=CZ(s);s=u=t.add(JZ({pulse:g})),s=t.add(s0({markdef:z1(e),interactive:R1(e.interactive,t),clip:O1(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:CZ(s)}));const y=CZ(s);s=l=t.add(e0(vZ(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=P1(e,t),r=n.metadata;(r.generates||r.changes)&&UE("Mark transforms should not generate new data."),r.nomod||(l.params.mod=!0),n.params.pulse=CZ(s),t.add(s=n)})),e.sort&&(s=t.add(b0({sort:t.compareRef(e.sort),pulse:CZ(s)})));const v=CZ(s);(i||h)&&(h=t.add(x0({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=CZ(h));const b=t.add(QZ({mark:y,pulse:f||v}));d=CZ(b),r&&(p&&(a=t.operators,a.pop(),h&&a.pop()),t.pushState(v,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=Y1(r,t);let a;r.name||UE("Facet must have a name: "+rA(r)),r.data||UE("Facet must reference a data set: "+rA(r)),r.field?a=t.add(d0({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(n0({key:t.keyRef(r.groupby),group:CZ(t.proxy(n.parent)),pulse:o})):UE("Facet must specify groupby or field: "+rA(r));const s=t.fork(),u=s.add(JZ()),l=s.add(v0({pulse:CZ(u)}));s.addData(i,new X1(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(d0({pulse:n.pulse})),i=t.fork();i.add(v0()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&a.push(h),a.push(b))),o&&(d=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:TZ(o)?n.signalRef(o.signal):o,method:TZ(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=TZ(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return CZ(n.add(c0(a)))}(o,d,t));const x=t.add(g0({pulse:d})),w=t.add(v0({pulse:CZ(x)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new X1(t,u,x,w)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&UE("Marks only support modify triggers."),Z1(e,t,c)})))}function t2(e,t){const n=t.config.legend,r=e.encode||{},i=c1(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c,f,d,h=0;t1.forEach((t=>e[t]?(l[t]=e[t],h=h||e[t]):0)),h||UE("Missing valid scale for legend.");const p=function(e,t){let n=e.type||J0;e.type||1!==function(e){return t1.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=ET(t)?K0:AT(t)?Z0:J0);return n!==K0?n:AT(t)?Z0:K0}(e,t.scaleType(h)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=CZ(t.add(JZ(null,[m]))),y=CZ(t.add(o0(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===K0?(d=[g1(e,h,n,r.gradient),x1(e,n,r.labels,y)],f.count=f.count||t.signalRef("max(2,2*floor((".concat(PZ(i.gradientLength()),")/100))"))):p===Z0?d=[y1(e,h,n,r.gradient,y),x1(e,n,r.labels,y)]:(c=function(e,t){const n=c1(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[w1(e,n,r,y,PZ(c.columns))],f.size=function(e,t,n){const r=PZ(r2("size",e,n)),i=PZ(r2("strokeWidth",e,n)),o=PZ(function(e,t,n){return f1("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,G0));return RJ("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),t)}(e,t,d[0].marks)),d=[l1({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=c1(e,t),o={enter:{opacity:r1},update:{opacity:i1,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:r1}};return nZ(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:M1},angle:{signal:F1},align:{signal:D1},baseline:{signal:N1},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),m1({type:u1,role:"legend-title",style:Y0,from:r,encode:o},n)}(e,n,r.title,g)),e2(l1({role:"legend",from:g,encode:rZ(n2(i,e,n),o,n1),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function n2(e,t,n){const r={enter:{},update:{}};return nZ(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function r2(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):f1(e,n[0].encode)}X1.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=CZ(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new X1(e,o,i,r,a)},X1.prototype={countsRef:function(e,t,n){const r=this,i=r.counts||(r.counts={}),o=Q1(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&J1(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:CZ(r.output)},n&&n.field&&J1(e,u,n),s=e.add(YZ(u)),a=e.add(JZ({pulse:CZ(s)})),a={agg:s,ref:CZ(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef:function(){return CZ(this.values)},extentRef:function(e,t){return K1(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return K1(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return K1(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return K1(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return K1(e,this,"indata","tupleindex",t,!0,!0)}};const i2='item.orient==="'.concat(B0,'"?-90:item.orient==="').concat(I0,'"?90:0');function o2(e,t){const n=c1(e=XS(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l=CZ(t.add(JZ(null,[{}])));return u.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),m1({type:u1,role:lZ,style:X0,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||TS({name:e.name,interactive:e.interactive,style:e.style},t)}(e),l)),e.subtitle&&u.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return nZ(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),m1({type:u1,role:cZ,style:Q0,from:r,encode:a},n)}(e,n,r.subtitle,l)),e2(l1({role:"title",from:l,encode:a2(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function a2(e,t){const n={enter:{},update:{}};return nZ(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:h1},angle:{signal:i2},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),rZ(n,t,n1)}function s2(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(P1(e,t))})),e.on&&e.on.forEach((n=>{Z1(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,u,l=null,c=!1,f=!1;e.values?TZ(e.values)||zZ(e.format)?(r.push(l2(t,e)),r.push(l=u2())):r.push(l=u2({$ingest:e.values,$format:e.format})):e.url?zZ(e.url)||zZ(e.format)?(r.push(l2(t,e)),r.push(l=u2())):r.push(l=u2({$request:e.url,$format:e.format})):e.source&&(l=i=ES(e.source).map((e=>CZ(t.getData(e).output))),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,l||u.source||r.push(l=u2()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=s:u.changes&&(l=null);i&&(a=i.length-1,r[0]=m0({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,u2()));l||r.push(u2());return r.push(v0({})),r}(e,t,n))}function u2(e){const t=JZ({},e);return t.metadata={source:!0},t}function l2(e,t){return a0({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const c2=e=>e===j0||e===L0,f2=(e,t,n)=>TZ(e)?y2(e.signal,t,n):e===B0||e===L0?t:n,d2=(e,t,n)=>TZ(e)?m2(e.signal,t,n):c2(e)?t:n,h2=(e,t,n)=>TZ(e)?g2(e.signal,t,n):c2(e)?n:t,p2=(e,t,n)=>TZ(e)?v2(e.signal,t,n):e===L0?{value:t}:{value:n},m2=(e,t,n)=>x2("".concat(e," === '").concat(L0,"' || ").concat(e," === '").concat(j0,"'"),t,n),g2=(e,t,n)=>x2("".concat(e," !== '").concat(L0,"' && ").concat(e," !== '").concat(j0,"'"),t,n),y2=(e,t,n)=>_2("".concat(e," === '").concat(B0,"' || ").concat(e," === '").concat(L0,"'"),t,n),v2=(e,t,n)=>_2("".concat(e," === '").concat(L0,"'"),t,n),b2=(e,t,n)=>_2("".concat(e," === '").concat(I0,"'"),t,n),x2=(e,t,n)=>(t=null!=t?eZ(t):t,n=null!=n?eZ(n):n,w2(t)&&w2(n)?(t=t?t.signal||rA(t.value):null,n=n?n.signal||rA(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[TS({test:e},t)].concat(n||[])),w2=e=>null==e||1===Object.keys(e).length,_2=(e,t,n)=>({signal:"".concat(e," ? (").concat(k2(t),") : (").concat(k2(n),")")}),k2=e=>TZ(e)?e.signal:null==e?null:rA(e),E2=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function S2(e,t,n,r){let i;if(t&&LS(t,e))return t[e];if(LS(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][i]}return null}function A2(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function C2(e,t){return{scale:e.scale,range:t}}function D2(e,t,n,r,i){const o=c1(e,t),a=e.orient,s=e.gridScale,u=f2(a,1,-1),l=function(e,t){if(1===t);else if(eS(e)){let n=e=TS({},e);for(;null!=n.mult;){if(!eS(n.mult))return n.mult=TZ(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=TS({},n.mult)}n.mult=t}else e=TZ(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,u);let c,f,d;const h={enter:c={opacity:r1},update:d={opacity:i1},exit:f={opacity:r1}};nZ(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:V0,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=d2(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:TS(m,{mult:u,offset:l});return c.x=d.x=d2(a,p,g),c.y=d.y=h2(a,p,g),c.x2=d.x2=h2(a,y),c.y2=d.y2=d2(a,y),f.x=d2(a,p),f.y=h2(a,p),m1({type:s1,role:"axis-grid",key:V0,from:r,encode:h},n)}function M2(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function F2(e,t,n,r,i,o){const a=c1(e,t),s=e.orient,u=e.scale,l=f2(s,-1,1),c=PZ(a("labelFlush")),f=PZ(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,m=0===c||!!c;const g=eZ(i);g.mult=l,g.offset=eZ(a("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:V0,band:.5,offset:p1(o.offset,a("labelOffset"))},v=d2(s,m?M2(u,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>TZ(e)?b2(e.signal,t,n):e===I0?{value:t}:{value:n})(s,"left","right")),b=d2(s,p2(s,"bottom","top"),m?M2(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=M2(u,c,"-(".concat(f,")"),f,0);m=m&&f;const w={opacity:r1,x:d2(s,y,g),y:h2(s,y,g)},_={enter:w,update:p={opacity:i1,text:{field:W0},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:r1,x:w.x,y:w.y}};nZ(_,{dx:!d&&m?d2(s,x):null,dy:!h&&m?h2(s,x):null}),nZ(_,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let E=a("labelOverlap");return E=E||k?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:u,orient:s,tolerance:k}:null}:void 0,p.align!==v&&(p.align=E2(p.align,v)),p.baseline!==b&&(p.baseline=E2(p.baseline,b)),m1({type:u1,role:"axis-label",style:G0,key:V0,from:r,encode:_,overlap:E},n)}function N2(e,t,n,r){const i=c1(e,t),o=e.orient,a=f2(o,-1,1);let s,u;const l={enter:s={opacity:r1,anchor:eZ(i("titleAnchor",null)),align:{signal:h1}},update:u=TS({},s,{opacity:i1,text:eZ(e.title)}),exit:{opacity:r1}},c={signal:'lerp(range("'.concat(e.scale,'"), ').concat(d1(0,1,.5),")")};return u.x=d2(o,c),u.y=h2(o,c),s.angle=d2(o,r1,((e,t)=>0===t?0:TZ(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t})(a,90)),s.baseline=d2(o,p2(o,j0,L0),{value:j0}),u.angle=s.angle,u.baseline=s.baseline,nZ(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=E2(eZ(e),n.update[t]),!1):!iZ(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?eZ(a):d2(t,eZ(a),eZ(o))}(i,o,l,n),l.update.align=E2(l.update.align,s.align),l.update.angle=E2(l.update.angle,s.angle),l.update.baseline=E2(l.update.baseline,s.baseline),m1({type:u1,role:"axis-title",style:Y0,from:r,encode:l},n)}function O2(e,t){const n=function(e,t){var n,r,i,o,a,s,u,l,c=t.config,f=c.style,d=c.axis,h="band"===t.scaleType(e.scale)&&c.axisBand,p=e.orient;if(TZ(p)){const e=A2([c.axisX,c.axisY]),t=A2([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},e))n[i]=d2(p,S2(i,c.axisX,d,f),S2(i,c.axisY,d,f));for(i of(r={},t))r[i]=(o=p.signal,a=S2(i,c.axisTop,d,f),s=S2(i,c.axisBottom,d,f),u=S2(i,c.axisLeft,d,f),l=S2(i,c.axisRight,d,f),{signal:(null!=u?"".concat(o," === '").concat(B0,"' ? (").concat(k2(u),") : "):"")+(null!=s?"".concat(o," === '").concat(j0,"' ? (").concat(k2(s),") : "):"")+(null!=l?"".concat(o," === '").concat(I0,"' ? (").concat(k2(l),") : "):"")+(null!=a?"".concat(o," === '").concat(L0,"' ? (").concat(k2(a),") : "):"")+"(null)"})}else n=p===L0||p===j0?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?TS({},d,n,r,h):d}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=c1(e,n),l=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:"(".concat(t.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(t.signal,") === 'extent'")},eS(i)||(i={signal:"(".concat(t.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=CZ(t.add(JZ({},[c]))),d=CZ(t.add(XZ({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(D2(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(function(e,t,n,r,i,o){const a=c1(e,t),s=e.orient,u=f2(s,-1,1);let l,c,f;const d={enter:l={opacity:r1},update:f={opacity:i1},exit:c={opacity:r1}};nZ(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=eZ(i);h.mult=u;const p={scale:e.scale,field:V0,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=d2(s,r1,p),f.y2=l.y2=d2(s,h),c.x=d2(s,p),f.x=l.x=h2(s,r1,p),f.x2=l.x2=h2(s,h),c.y=h2(s,p),m1({type:s1,role:"axis-tick",key:V0,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(F2(e,n,r.labels,d,p,l))),c.domain&&h.push(function(e,t,n,r){const i=c1(e,t),o=e.orient;let a,s;const u={enter:a={opacity:r1},update:s={opacity:i1},exit:{opacity:r1}};nZ(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=C2(e,0),c=C2(e,1);return a.x=s.x=d2(o,l,r1),a.x2=s.x2=d2(o,c),a.y=s.y=h2(o,l,r1),a.y2=s.y2=h2(o,c),m1({type:s1,role:"axis-domain",from:r,encode:u},n)}(e,n,r.domain,f)),c.title&&h.push(N2(e,n,r.title,f)),e2(l1({role:"axis",from:f,encode:rZ($2(u,e),i,n1),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function $2(e,t){const n={enter:{},update:{}};return nZ(n,{orient:e("orient"),offset:e("offset")||0,position:RZ(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function T2(e,t,n){const r=ES(e.signals),i=ES(e.scales);return n||r.forEach((e=>kZ(e,t))),ES(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=P0(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=P0(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";_T(n)||UE("Unrecognized scale type: "+rA(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),ES(e.data).forEach((e=>s2(e,t))),i.forEach((e=>E0(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?UE("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=RJ(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>HZ(e,t,n.id)))}(e,t))),ES(e.axes).forEach((e=>O2(e,t))),ES(e.marks).forEach((e=>e2(e,t))),ES(e.legends).forEach((e=>t2(e,t))),e.title&&o2(e.title,t),t.parseLambdas(),t}function z2(e,t){const n=t.config,r=CZ(t.root=t.add(AZ())),i=function(e,t){const n=n=>RZ(e[n],t[n]),r=[R2("background",n("background")),R2("autosize",JK(n("autosize"))),R2("padding",ZK(n("padding"))),R2("width",n("width")||0),R2("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),o={};return ES(e.signals).forEach((e=>{LS(i,e.name)?e=TS(i[e.name],e):r.push(e),o[e.name]=e})),ES(t.signals).forEach((e=>{LS(o,e.name)||LS(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>kZ(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(JZ()),a=t.add(e0(vZ((e=>rZ({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),o1,aZ,e.style,t,{pulse:CZ(o)}))),s=t.add(x0({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:CZ(a)}));t.operators.pop(),t.pushState(CZ(a),CZ(s),null),T2(e,t,i),t.operators.push(s);let u=t.add(QZ({mark:r,pulse:CZ(s)}));return u=t.add(g0({pulse:CZ(u)})),u=t.add(v0({pulse:CZ(u)})),t.addData("root",new X1(t,o,o,u)),t}function R2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function P2(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function L2(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function B2(e){return(ZE(e)?I2:j2)(e)}function I2(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(eS(t)?t.signal||B2(t):rA(t))}return n+"]"}function j2(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+rA(t)+":"+(eS(n)?n.signal||B2(n):rA(n));return r+"}"}function U2(e,t,n){return eS(e)||UE("Input Vega specification must be an object."),z2(e,new P2(t=nS(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}P2.prototype=L2.prototype={parse:function(e){return T2(e,this)},fork:function(){return new L2(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy:function(e){const t=e instanceof EZ?CZ(e):e;return this.add(p0({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState:function(e,t,n){this._encode.push(CZ(this.add(v0({pulse:e})))),this._parent.push(t),this._lookup.push(n?CZ(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return oS(this._parent)},encode:function(){return oS(this._encode)},lookup:function(){return oS(this._lookup)},markpath:function(){const e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(XS(e))return DZ(e,t);e.signal||UE("Unsupported field reference: "+rA(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=CZ(this.add(r0(e)))}return r},compareRef:function(e){let t=!1;const n=e=>TZ(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=ES(e.field).map(n),i=ES(e.order).map(n);return t?CZ(this.add(KZ({fields:r,orders:i}))):FZ(r,i)},keyRef:function(e,t){let n=!1;const r=this.signals;return e=ES(e).map((e=>TZ(e)?(n=!0,CZ(r[e.signal])):e)),n?CZ(this.add(i0({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;const t=NZ(e.op,e.field),n=e.order||"ascending";return n.signal?CZ(this.add(KZ({fields:t,orders:this.signalRef(n.signal)}))):FZ(t,n)},event:function(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return LS(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&UE("Duplicate signal name: "+rA(e));const n=t instanceof EZ?t:this.add(AZ(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||UE("Unrecognized signal name: "+rA(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?CZ(this.signals[e]):(LS(this.lambdas,e)||(this.lambdas[e]=this.add(AZ(null))),CZ(this.lambdas[e]))},parseLambdas:function(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=RJ(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&eS(e)?this.signalRef(e.signal||B2(e)):e},exprRef:function(e,t){const n={expr:RJ(e,this)};return t&&(n.expr.$name=t),CZ(this.add(t0(n)))},addBinding:function(e,t){this.bindings||UE("Nested signals do not support binding: "+rA(e)),this.bindings.push(TS({signal:e},t))},addScaleProj:function(e,t){LS(this.scales,e)&&UE("Duplicate scale or projection name: "+rA(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,y0(t))},addProjection:function(e,t){this.addScaleProj(e,h0(t))},getScale:function(e){return this.scales[e]||UE("Unrecognized scale name: "+rA(e)),this.scales[e]},scaleRef:function(e){return CZ(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return LS(this.data,e)&&UE("Duplicate data set name: "+rA(e)),this.data[e]=t},getData:function(e){return this.data[e]||UE("Undefined data set name: "+rA(e)),this.data[e]},addDataPipeline:function(e,t){return LS(this.data,e)&&UE("Duplicate data set name: "+rA(e)),this.addData(e,X1.fromEntries(this,t))}},t(TE,"tupleid",(function(){return kM})),t(TE,"transforms",(function(){return rF})),t(TE,"transform",(function(){return oF})),t(TE,"isTuple",(function(){return _M})),t(TE,"ingest",(function(){return SM})),t(TE,"definition",(function(){return iF})),t(TE,"changeset",(function(){return NM})),t(TE,"Transform",(function(){return nF})),t(TE,"Pulse",(function(){return HM})),t(TE,"Parameters",(function(){return $M})),t(TE,"Operator",(function(){return RM})),t(TE,"MultiPulse",(function(){return XM})),t(TE,"EventStream",(function(){return BM})),t(TE,"Dataflow",(function(){return eF})),t(TE,"scheme",(function(){return BT})),t(TE,"scale",(function(){return wT})),t(TE,"quantizeInterpolator",(function(){return $T})),t(TE,"interpolateRange",(function(){return NT})),t(TE,"interpolateColors",(function(){return OT})),t(TE,"interpolate",(function(){return zT})),t(TE,"projection",(function(){return TH})),t(TE,"View",(function(){return RK})),t(TE,"timeFormatLocale",(function(){return fM})),t(TE,"resetDefaultLocale",(function(){return mM})),t(TE,"locale",(function(){return hM})),t(TE,"formatLocale",(function(){return aM})),t(TE,"defaultLocale",(function(){return pM})),t(TE,"expressionFunction",(function(){return zJ})),t(TE,"parse",(function(){return U2})),t(TE,"runtimeContext",(function(){return HJ})),t(TE,"parseExpression",(function(){return IQ})),t(TE,"codegenExpression",(function(){return qQ})),t(TE,"parseSelector",(function(){return GK}));var q2="5.20.2";TS(rF,aF,DO,GI,Ej,dV,nY,UV,kY,DY,eX,hX);const W2=q2;t(TE,"version",(function(){return W2}));var H2={},V2=e(JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.1.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && del-cli \'site/data/*\' \'examples/compiled/*.png\' && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"del-cli \'build/*\' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.15","@babel/preset-env":"^7.13.15","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.1","@types/chai":"^4.2.16","@types/d3":"^6.3.0","@types/jest":"^26.0.22","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0","ajv":"^8.1.0","ajv-formats":"^2.0.2","chai":"^4.3.4","cheerio":"^1.0.0-rc.6","conventional-changelog-cli":"^2.1.1","d3":"^6.7.0","del-cli":"^3.0.1","eslint":"^7.24.0","eslint-config-prettier":"^8.2.0","eslint-plugin-jest":"^24.3.5","eslint-plugin-prettier":"^3.4.0","gh-pages":"^3.1.0","highlight.js":"^10.7.2","jest":"^26.6.3","jest-dev-server":"^5.0.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^8.0.0","rollup":"^2.45.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.1","ts-json-schema-generator":"^0.90.0","typescript":"~4.2.4","vega-cli":"^5.20.2","vega-datasets":"~2.2.0","vega-embed":"^6.17.0","vega-tooltip":"^0.25.1","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.2.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.1","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.20.0"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')),G2={};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var Y2={},X2=qA,Q2=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var f=[],d=[],h=void 0!==X2;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,p){if(null===u)return null;if(0===p)return u;var m,g;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(u))m=[];else if(i.__isRegExp(u))m=new RegExp(u.source,a(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(i.__isDate(u))m=new Date(u.getTime());else{if(h&&X2.isBuffer(u))return m=X2.allocUnsafe?X2.allocUnsafe(u.length):new X2(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var y=f.indexOf(u);if(-1!=y)return d[y];f.push(u),d.push(m)}for(var v in e(u,t)&&u.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,p-1);m.add(t)})),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=o(u[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(v=0;v<x.length;v++){var w=x[v];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||c)&&(m[w]=o(u[w],p-1),k.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(u);for(v=0;v<_.length;v++){var k,E=_[v];(k=Object.getOwnPropertyDescriptor(u,E))&&k.enumerable||(m[E]=o(u[E],p-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();Y2&&(Y2=Q2);var J2=e(Y2),K2=e((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n})),Z2=e((function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}));function e3(e){return!!e.or}function t3(e){return!!e.and}function n3(e){return!!e.not}function r3(e,t){if(n3(e))r3(e.not,t);else if(t3(e))for(const n of e.and)r3(n,t);else if(e3(e))for(const n of e.or)r3(n,t);else t(e)}function i3(e,t){return n3(e)?{not:i3(e.not,t)}:t3(e)?{and:e.and.map((e=>i3(e,t)))}:e3(e)?{or:e.or.map((e=>i3(e,t)))}:t(e)}const o3=K2;t(G2,"deepEqual",(function(){return o3}));const a3=J2;function s3(e,t){const n={};for(const r of t)LS(e,r)&&(n[r]=e[r]);return n}function u3(e,t){const n={...e};for(const e of t)delete n[e];return n}t(G2,"duplicate",(function(){return a3})),t(G2,"pick",(function(){return s3})),t(G2,"omit",(function(){return u3})),Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>Z2(e))).join(",")})`};const l3=Z2;function c3(e){if(GS(e))return e;const t=XS(e)?e:Z2(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function f3(e){return!1===e||null===e}function d3(e,t){return e.includes(t)}function h3(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function p3(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function m3(e,...t){for(const n of t)g3(e,n??{});return e}function g3(e,t){for(const n of E3(t))rS(e,n,t[n],!0)}function y3(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function v3(e,t){const n=E3(e),r=E3(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function b3(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function x3(e,t){for(const n of e)if(t.has(n))return!0;return!1}function w3(e){const t=new Set;for(const n of e){const e=qE(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function _3(e,t){return void 0===e||void 0===t||x3(w3(e),w3(t))}function k3(e){return 0===E3(e).length}t(G2,"stringify",(function(){return l3})),t(G2,"hash",(function(){return c3})),t(G2,"isNullOrFalse",(function(){return f3})),t(G2,"contains",(function(){return d3})),t(G2,"some",(function(){return h3})),t(G2,"every",(function(){return p3})),t(G2,"mergeDeep",(function(){return m3})),t(G2,"unique",(function(){return y3})),t(G2,"isEqual",(function(){return v3})),t(G2,"setEqual",(function(){return b3})),t(G2,"hasIntersection",(function(){return x3})),t(G2,"prefixGenerator",(function(){return w3})),t(G2,"fieldIntersection",(function(){return _3})),t(G2,"isEmpty",(function(){return k3}));const E3=Object.keys;t(G2,"keys",(function(){return E3}));const S3=Object.values;t(G2,"vals",(function(){return S3}));const A3=Object.entries;function C3(e){return!0===e||!1===e}function D3(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function M3(e,t){return n3(e)?`!(${M3(e.not,t)})`:t3(e)?`(${e.and.map((e=>M3(e,t))).join(") && (")})`:e3(e)?`(${e.or.map((e=>M3(e,t))).join(") || (")})`:t(e)}function F3(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&F3(e[n],t)&&delete e[n],k3(e)}function N3(e){return e.charAt(0).toUpperCase()+e.substr(1)}function O3(e,t="datum"){const n=qE(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(rA).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function $3(e,t="datum"){return`${t}[${rA(qE(e).join("."))}]`}function T3(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function z3(e){return`${qE(e).map(T3).join("\\.")}`}function R3(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function P3(e){return`${qE(e).join(".")}`}function L3(e){return e?qE(e).length:0}function B3(...e){for(const t of e)if(void 0!==t)return t}t(G2,"entries",(function(){return A3})),t(G2,"isBoolean",(function(){return C3})),t(G2,"varName",(function(){return D3})),t(G2,"logicalExpr",(function(){return M3})),t(G2,"deleteNestedProperty",(function(){return F3})),t(G2,"titleCase",(function(){return N3})),t(G2,"accessPathWithDatum",(function(){return O3})),t(G2,"flatAccessWithDatum",(function(){return $3})),t(G2,"replacePathInField",(function(){return z3})),t(G2,"replaceAll",(function(){return R3})),t(G2,"removePathFromField",(function(){return P3})),t(G2,"accessPathDepth",(function(){return L3})),t(G2,"getFirstDefined",(function(){return B3}));let I3=42;function j3(e){const t=++I3;return e?String(e)+t:t}function U3(){I3=42}function q3(e){return W3(e)?e:`__${e}`}function W3(e){return e.startsWith("__")}function H3(e){if(void 0!==e)return(e%360+360)%360}function V3(e){return!!GS(e)||!isNaN(e)&&!isNaN(parseFloat(e))}t(G2,"uniqueId",(function(){return j3})),t(G2,"resetIdCounter",(function(){return U3})),t(G2,"internalField",(function(){return q3})),t(G2,"isInternalField",(function(){return W3})),t(G2,"normalizeAngle",(function(){return H3})),t(G2,"isNumeric",(function(){return V3}));const G3="row",Y3="column",X3="facet",Q3="x",J3="y",K3="x2",Z3="y2",e5="radius",t5="radius2",n5="theta",r5="theta2",i5="latitude",o5="longitude",a5="latitude2",s5="longitude2",u5="color",l5="fill",c5="stroke",f5="shape",d5="size",h5="angle",p5="opacity",m5="fillOpacity",g5="strokeOpacity",y5="strokeWidth",v5="strokeDash",b5="text",x5="order",w5="detail",_5="key",k5="tooltip",E5="href",S5="url",A5="description",C5={theta:1,theta2:1,radius:1,radius2:1};function D5(e){return e in C5}const M5={longitude:1,longitude2:1,latitude:1,latitude2:1};const F5=E3(M5),N5={x:1,y:1,x2:1,y2:1,...C5,...M5,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function O5(e){return e===u5||e===l5||e===c5}const $5={row:1,column:1,facet:1},T5=E3($5),z5={...N5,...$5},R5=E3(z5),{order:P5,detail:L5,tooltip:B5,...I5}=z5,{row:j5,column:U5,facet:q5,...W5}=I5;E3(I5),E3(W5);function H5(e){return!!z5[e]}const V5=[K3,Z3,a5,s5,r5,t5];function G5(e){return Y5(e)!==e}function Y5(e){switch(e){case K3:return Q3;case Z3:return J3;case a5:return i5;case s5:return o5;case r5:return n5;case t5:return e5}return e}function X5(e){if(D5(e))switch(e){case n5:return"startAngle";case r5:return"endAngle";case e5:return"outerRadius";case t5:return"innerRadius"}return e}function Q5(e){switch(e){case Q3:return K3;case J3:return Z3;case i5:return a5;case o5:return s5;case n5:return r5;case e5:return t5}}function J5(e){switch(e){case Q3:case K3:return"width";case J3:case Z3:return"height"}}E3(N5);const{x:K5,y:Z5,x2:e6,y2:t6,latitude:n6,longitude:r6,latitude2:i6,longitude2:o6,theta:a6,theta2:s6,radius:u6,radius2:l6,...c6}=N5,f6=E3(c6),d6={x:1,y:1},h6=E3(d6);function p6(e){return e in d6}const m6={theta:1,radius:1},g6=E3(m6);function y6(e){return"width"===e?Q3:J3}const{text:v6,tooltip:b6,href:x6,url:w6,description:_6,detail:k6,key:E6,order:S6,...A6}=c6,C6=E3(A6);const D6={...d6,...m6,...A6},M6=E3(D6);function F6(e){return!!D6[e]}function N6(e,t){return function(e){switch(e){case u5:case l5:case c5:case A5:case w5:case _5:case k5:case E5:case x5:case p5:case m5:case g5:case y5:case X3:case G3:case Y3:return O6;case Q3:case J3:case i5:case o5:return T6;case K3:case Z3:case a5:case s5:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case d5:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case v5:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case f5:return{point:"always",geoshape:"always"};case b5:return{text:"always"};case h5:return{point:"always",square:"always",text:"always"};case S5:return{image:"always"};case n5:case e5:return{text:"always",arc:"always"};case r5:case t5:return{arc:"always"}}}(e)[t]}const O6={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:$6,...T6}=O6;function z6(e){switch(e){case Q3:case J3:case n5:case e5:case d5:case h5:case y5:case p5:case m5:case g5:case K3:case Z3:case r5:case t5:return;case X3:case G3:case Y3:case f5:case v5:case b5:case k5:case E5:case S5:case A5:return"discrete";case u5:case l5:case c5:return"flexible";case i5:case o5:case a5:case s5:case w5:case _5:case x5:return}}const R6={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},P6={count:1,min:1,max:1};function L6(e){return!!e&&!!e.argmin}function B6(e){return!!e&&!!e.argmax}E3(R6);function I6(e){return XS(e)&&!!R6[e]}const j6=["count","valid","missing","distinct"];function U6(e){return XS(e)&&d3(j6,e)}const q6=["count","sum","distinct","valid","missing"],W6=uA(["mean","average","median","q1","q3","min","max"]);function H6(e){return WS(e)&&(e=Bee(e,void 0)),"bin"+E3(e).map((t=>X6(e[t])?D3(`_${t}_${A3(e[t])}`):D3(`_${t}_${e[t]}`))).join("")}function V6(e){return!0===e||Y6(e)&&!e.binned}function G6(e){return"binned"===e||Y6(e)&&!0===e.binned}function Y6(e){return eS(e)}function X6(e){return e?.param}function Q6(e){switch(e){case G3:case Y3:case d5:case u5:case l5:case c5:case y5:case p5:case m5:case g5:case f5:return 6;case v5:return 4;default:return 10}}function J6(e){return e&&!!e.expr}function K6(e){const t=E3(e||{}),n={};for(const r of t)n[r]=u4(e[r]);return n}function Z6(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d,...h}=e,p={...h,...o?{fill:o}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{}},g={...a?{subtitleColor:a}:{},...s?{subtitleFont:s}:{},...u?{subtitleFontSize:u}:{},...l?{subtitleFontStyle:l}:{},...c?{subtitleFontWeight:c}:{},...f?{subtitleLineHeight:f}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:p,subtitleMarkConfig:s3(p,["align","baseline","dx","dy","limit"]),nonMark:m,subtitle:g}}function e4(e){return XS(e)||ZE(e)&&XS(e[0])}function t4(e){return e&&!!e.signal}function n4(e){return!!e.step}function r4(e){return!ZE(e)&&("field"in e&&"data"in e)}const i4=E3({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),o4={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},a4=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function s4(e){const t=ZE(e.condition)?e.condition.map(l4):l4(e.condition);return{...u4(e),condition:t}}function u4(e){if(J6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function l4(e){if(J6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function c4(e){if(J6(e)){const{expr:t,...n}=e;return{signal:t,...n}}return t4(e)?e:void 0!==e?{value:e}:void 0}function f4(e){return t4(e)?e.signal:rA(e.value)}function d4(e){return t4(e)?e.signal:null==e?null:rA(e)}function h4(e,t,n){for(const r of n){const n=g4(r,t.markDef,t.config);void 0!==n&&(e[r]=c4(n))}return e}function p4(e){return[].concat(e.type,e.style??[])}function m4(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?g4(e,t,n,r):void 0}function g4(e,t,n,{vgChannel:r}={}){return B3(r?y4(e,t,n.style):void 0,y4(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function y4(e,t,n){return v4(e,p4(t),n)}function v4(e,t,n){let r;t=ES(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function b4(e,t){return ES(e).reduce(((e,n)=>(e.field.push(See(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function x4(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(o3(t,e))return;n.push(e)})),n}function w4(e,t){return o3(e,t)||!t?e:e?[...ES(e),...ES(t)].join(", "):t}function _4(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((e4(n)||t4(n))&&(e4(r)||t4(r)))return{explicit:e.explicit,value:w4(n,r)};if(e4(n)||t4(n))return{explicit:e.explicit,value:n};if(e4(r)||t4(r))return{explicit:e.explicit,value:r};if(!(e4(n)||t4(n)||e4(r)||t4(r)))return{explicit:e.explicit,value:x4(n,r)};throw new Error("It should never reach here")}var k4={},E4={};function S4(e){return`Invalid specification ${l3(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}t(E4,"invalidSpec",(function(){return S4}));function A4(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function C4(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function D4(e){return e?`Dropping "fit-${e}" because spec has discrete ${J5(e)}.`:'Dropping "fit" because spec has discrete size.'}function M4(e){return`Unknown field for ${e}. Cannot calculate view size.`}function F4(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function N4(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function O4(e){return`The "nearest" transform is not supported for ${e} marks.`}function $4(e){return`Selection not supported for ${e} yet.`}function T4(e){return`Cannot find a selection named "${e}".`}t(E4,"FIT_NON_SINGLE",(function(){return'Autosize "fit" only works for single views and layered views.'})),t(E4,"containerSizeNonSingle",(function(){return A4})),t(E4,"containerSizeNotCompatibleWithAutosize",(function(){return C4})),t(E4,"droppingFit",(function(){return D4})),t(E4,"unknownField",(function(){return M4})),t(E4,"cannotProjectOnChannelWithoutField",(function(){return F4})),t(E4,"cannotProjectAggregate",(function(){return N4})),t(E4,"nearestNotSupportForContinuous",(function(){return O4})),t(E4,"selectionNotSupported",(function(){return $4})),t(E4,"selectionNotFound",(function(){return T4}));t(E4,"SCALE_BINDINGS_CONTINUOUS",(function(){return"Scale bindings are currently only supported for scales with unbinned, continuous domains."}));function z4(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function R4(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}t(E4,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return"Legend bindings are only supported for selections over an individual field or encoding channel."})),t(E4,"cannotLookupVariableParameter",(function(){return z4})),t(E4,"noSameUnitLookup",(function(){return R4}));t(E4,"NEEDS_SAME_SELECTION",(function(){return"The same selection must be used to override scale domains in a layered view."}));function P4(e){return`Unknown repeated value "${e}".`}function L4(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}t(E4,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return'Interval selections should be initialized using "x" and/or "y" keys.'})),t(E4,"noSuchRepeatedValue",(function(){return P4})),t(E4,"columnsNotSupportByRowCol",(function(){return L4}));function B4(e){return`Unrecognized parse "${e}".`}function I4(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}t(E4,"CONCAT_CANNOT_SHARE_AXIS",(function(){return"Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."})),t(E4,"unrecognizedParse",(function(){return B4})),t(E4,"differentParse",(function(){return I4}));function j4(e){return`Ignoring an invalid transform: ${l3(e)}.`}t(E4,"ADD_SAME_CHILD_TWICE",(function(){return"Attempt to add the same child twice."})),t(E4,"invalidTransformIgnored",(function(){return j4}));function U4(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function q4(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${l3(t)} is overridden by a child projection ${l3(n)}.`}t(E4,"NO_FIELDS_NEEDS_AS",(function(){return'If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'})),t(E4,"customFormatTypeNotAllowed",(function(){return U4})),t(E4,"projectionOverridden",(function(){return q4}));function W4(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${l3(n)}}.`}function H4(e){return`Invalid field type "${e}".`}function V4(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function G4(e){return`Invalid aggregation operator "${e}".`}function Y4(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function X4(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Q4(e){return`Position range does not support relative band size for ${e}.`}function J4(e,t){return`Dropping ${l3(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}t(E4,"REPLACE_ANGLE_WITH_THETA",(function(){return"Arc marks uses theta channel rather than angle, replacing angle with theta."})),t(E4,"primitiveChannelDef",(function(){return W4})),t(E4,"invalidFieldType",(function(){return H4})),t(E4,"invalidFieldTypeForCountAggregate",(function(){return V4})),t(E4,"invalidAggregate",(function(){return G4})),t(E4,"missingFieldType",(function(){return Y4})),t(E4,"droppingColor",(function(){return X4})),t(E4,"relativeBandSizeNotSupported",(function(){return Q4})),t(E4,"emptyFieldDef",(function(){return J4}));function K4(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function Z4(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function e8(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function t8(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function n8(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function r8(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function i8(e){return`The ${e} for range marks cannot be an expression`}function o8(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function a8(e,t){return`Specified orient "${e}" overridden with "${t}".`}t(E4,"LINE_WITH_VARYING_SIZE",(function(){return"Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."})),t(E4,"incompatibleChannel",(function(){return K4})),t(E4,"invalidEncodingChannel",(function(){return Z4})),t(E4,"channelShouldBeDiscrete",(function(){return e8})),t(E4,"channelShouldBeDiscreteOrDiscretizing",(function(){return t8})),t(E4,"facetChannelDropped",(function(){return n8})),t(E4,"discreteChannelCannotEncode",(function(){return r8})),t(E4,"rangeMarkAlignmentCannotBeExpression",(function(){return i8})),t(E4,"lineWithRange",(function(){return o8})),t(E4,"orientOverridden",(function(){return a8}));function s8(e){return`Cannot use the scale property "${e}" with non-color channel.`}function u8(e){return`Cannot use the relative band size with ${e} scale.`}function l8(e){return`Using unaggregated domain with raw field has no effect (${l3(e)}).`}function c8(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function f8(e){return`Unaggregated domain is currently unsupported for log scale (${l3(e)}).`}function d8(e){return`Cannot apply size to non-oriented mark "${e}".`}function h8(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function p8(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function m8(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function g8(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function y8(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function v8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${l3(n)} and ${l3(r)}). Using ${l3(n)}.`}function b8(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${l3(n)} and ${l3(r)}). Using the union of the two domains.`}function x8(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function w8(e){return`Dropping sort property ${l3(e)} as unioned domains only support boolean or op "count", "min", and "max".`}t(E4,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return"Custom domain scale cannot be unioned with default field-based domain."})),t(E4,"cannotUseScalePropertyWithNonColor",(function(){return s8})),t(E4,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return u8})),t(E4,"unaggregateDomainHasNoEffectForRawField",(function(){return l8})),t(E4,"unaggregateDomainWithNonSharedDomainOp",(function(){return c8})),t(E4,"unaggregatedDomainWithLogScale",(function(){return f8})),t(E4,"cannotApplySizeToNonOrientedMark",(function(){return d8})),t(E4,"scaleTypeNotWorkWithChannel",(function(){return h8})),t(E4,"scaleTypeNotWorkWithFieldDef",(function(){return p8})),t(E4,"scalePropertyNotWorkWithScaleType",(function(){return m8})),t(E4,"scaleTypeNotWorkWithMark",(function(){return g8})),t(E4,"stepDropped",(function(){return y8})),t(E4,"mergeConflictingProperty",(function(){return v8})),t(E4,"mergeConflictingDomainProperty",(function(){return b8})),t(E4,"independentScaleMeansIndependentGuide",(function(){return x8})),t(E4,"domainSortDropped",(function(){return w8}));t(E4,"MORE_THAN_ONE_SORT",(function(){return"Domains that should be unioned has conflicting sort properties. Sort will be set to true."}));t(E4,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."}));t(E4,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."}));t(E4,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return"Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."}));function _8(e){return`Cannot stack "${e}" if there is already "${e}2".`}function k8(e){return`Cannot stack non-linear scale (${e}).`}function E8(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function S8(e,t){return`Invalid ${e}: ${l3(t)}.`}function A8(e){return`Dropping day from datetime ${l3(e)} as day cannot be combined with other units.`}function C8(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function D8(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function M8(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function F8(e){return`1D error band does not support ${e}.`}function N8(e){return`Channel ${e} is required for "binned" bin.`}function O8(e){return`Channel ${e} should not be used with "binned" bin.`}function $8(e){return`Domain for ${e} is required for threshold scale.`}t(E4,"INVALID_CHANNEL_FOR_AXIS",(function(){return"Invalid channel for axis."})),t(E4,"cannotStackRangedMark",(function(){return _8})),t(E4,"cannotStackNonLinearScale",(function(){return k8})),t(E4,"stackNonSummativeAggregate",(function(){return E8})),t(E4,"invalidTimeUnit",(function(){return S8})),t(E4,"droppedDay",(function(){return A8})),t(E4,"errorBarCenterAndExtentAreNotNeeded",(function(){return C8})),t(E4,"errorBarCenterIsUsedWithWrongExtent",(function(){return D8})),t(E4,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return M8})),t(E4,"errorBand1DNotSupport",(function(){return F8})),t(E4,"channelRequiredForBinned",(function(){return N8})),t(E4,"channelShouldNotBeUsedForBinned",(function(){return O8})),t(E4,"domainRequiredForThresholdScale",(function(){return $8}));t(k4,"message",(function(){return E4}));const T8=KE(2);let z8=T8;function R8(e){return z8=e,z8}function P8(){return z8=T8,z8}function L8(...e){z8.warn(...e)}function B8(...e){z8.debug(...e)}function I8(e){if(e&&eS(e))for(const t of Y8)if(t in e)return!0;return!1}new WeakMap,t(k4,"set",(function(){return R8})),t(k4,"reset",(function(){return P8})),t(k4,"warn",(function(){return L8})),t(k4,"debug",(function(){return B8}));const j8=["january","february","march","april","may","june","july","august","september","october","november","december"],U8=j8.map((e=>e.substr(0,3))),q8=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],W8=q8.map((e=>e.substr(0,3)));function H8(e,t){const n=[];if(t&&void 0!==e.day&&E3(e).length>1&&(k4.warn(E4.droppedDay(e)),delete(e=a3(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(V3(e)&&(e=+e),GS(e))return e-1;{const t=e.toLowerCase(),n=j8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=U8.indexOf(r);if(-1!==i)return i;throw new Error(E4.invalidTimeUnit("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(V3(e)&&(e=+e),GS(e))return e>4&&k4.warn(E4.invalidTimeUnit("quarter",e)),e-1;throw new Error(E4.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(GS(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(V3(e)&&(e=+e),GS(e))return e%7;{const t=e.toLowerCase(),n=q8.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=W8.indexOf(r);if(-1!==i)return i;throw new Error(E4.invalidTimeUnit("day",e))}}(e.day):e.day;n.push(GS(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function V8(e){const t=H8(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const G8={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Y8=E3(G8);function X8(e){return e.startsWith("utc")}const Q8={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function J8(e){return Y8.filter((t=>K8(e,t)))}function K8(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function Z8(e,t,{end:n}={end:!1}){const r=O3(t),i=X8(e)?"utc":"";let o;const a={};for(const t of Y8)K8(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=H8(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function e9(e){if(!e)return;const t=J8(e);return`timeUnitSpecifier(${l3(t)}, ${l3(Q8)})`}function t9(e){if(!e)return;let t;return XS(e)?t={unit:e}:eS(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),X8(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function n9(e){return e&&!!e.field&&void 0!==e.equal}function r9(e){return e&&!!e.field&&void 0!==e.lt}function i9(e){return e&&!!e.field&&void 0!==e.lte}function o9(e){return e&&!!e.field&&void 0!==e.gt}function a9(e){return e&&!!e.field&&void 0!==e.gte}function s9(e){if(e&&e.field){if(ZE(e.range)&&2===e.range.length)return!0;if(t4(e.range))return!0}return!1}function u9(e){return e&&!!e.field&&(ZE(e.oneOf)||ZE(e.in))}function l9(e){return u9(e)||n9(e)||s9(e)||r9(e)||o9(e)||i9(e)||a9(e)}function c9(e,t){return Uee(e,{timeUnit:t,wrapTime:!0})}function f9(e,t=!0){const{field:n}=e,r=t9(e.timeUnit)?.unit,i=r?`time(${Z8(r,n)})`:See(e,{expr:"datum"});if(n9(e))return`${i}===${c9(e.equal,r)}`;if(r9(e)){return`${i}<${c9(e.lt,r)}`}if(o9(e)){return`${i}>${c9(e.gt,r)}`}if(i9(e)){return`${i}<=${c9(e.lte,r)}`}if(a9(e)){return`${i}>=${c9(e.gte,r)}`}if(u9(e))return`indexof([${function(e,t){return e.map((e=>c9(e,t)))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return d9(i,e.valid);if(s9(e)){const{range:n}=e,o=t4(n)?{signal:`${n.signal}[0]`}:n[0],a=t4(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==o&&null!==a&&t)return"inrange("+i+", ["+c9(o,r)+", "+c9(a,r)+"])";const s=[];return null!==o&&s.push(`${i} >= ${c9(o,r)}`),null!==a&&s.push(`${i} <= ${c9(a,r)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${l3(e)}`)}function d9(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function h9(e){return l9(e)&&e.timeUnit?{...e,timeUnit:t9(e.timeUnit)?.unit}:e}const p9={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},m9=p9.quantitative,g9=p9.ordinal,y9=p9.temporal,v9=p9.nominal,b9=p9.geojson;E3(p9);const x9="linear",w9="log",_9="pow",k9="sqrt",E9="symlog",S9="time",A9="utc",C9="quantile",D9="quantize",M9="threshold",F9="point",N9="band",O9={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};E3(O9);function $9(e,t){const n=O9[e],r=O9[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const T9={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function z9(e){return T9[e]}const R9=["linear","log","pow","sqrt","symlog","time","utc"],P9=uA(R9),L9=uA(["linear","log","pow","sqrt","symlog"]);const B9=uA(["quantile","quantize","threshold"]),I9=uA(R9.concat(["quantile","quantize","threshold","sequential","identity"])),j9=uA(["ordinal","bin-ordinal","point","band"]);function U9(e){return e in j9}function q9(e){return e in I9}function W9(e){return e in P9}function H9(e){return e in B9}function V9(e){return e?.param}const G9={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Y9,domain:X9,range:Q9,rangeMax:J9,rangeMin:K9,scheme:Z9,...e7}=(E3(G9),G9),t7=E3(e7);function n7(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return W9(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return W9(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return W9(e);case"nice":return W9(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return q9(e)&&!d3(["log","time","utc","threshold","quantile"],e)}}function r7(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return O5(e)?void 0:E4.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const i7={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},o7=i7.arc,a7=i7.area,s7=i7.bar,u7=i7.image,l7=i7.line,c7=i7.point,f7=i7.rect,d7=i7.rule,h7=i7.text,p7=i7.tick,m7=i7.trail,g7=i7.circle,y7=i7.square,v7=i7.geoshape;function b7(e){return["line","area","trail"].includes(e)}function x7(e){return["rect","bar","image","arc"].includes(e)}const w7=E3(i7);function _7(e){return e.type}uA(w7);const k7=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],E7=E3({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),S7=E3({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function A7(e){return e&&null!=e.band}const C7={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},D7={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},M7={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function F7(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=R7(e);return dee(n)&&!U6(n.aggregate)&&i&&W9(i.get("type"))&&!1===i.get("zero")?N7({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function N7({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(b7(n.type))return r;return null===m4("invalid",n,i)?r:[O7(e,t),r]}function O7(e,t){return{test:$7(e,!0),..."y"===Y5(t)?{field:{group:"height"}}:{value:0}}}function $7(e,t=!0){return d9(XS(e)?e:See(e,{expr:"datum"}),!t)}function T7(e,t,n,r){const i={};if(t&&(i.scale=t),pee(e)){const{datum:t}=e;I8(t)?i.signal=V8(t):t4(t)?i.signal=t.signal:J6(t)?i.signal=t.expr:i.value=t}else i.field=See(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function z7({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=See(t,{expr:a,suffix:i}),u=void 0!==n?See(n,{expr:a}):See(t,{suffix:"end",expr:a}),l={};if(0===o||1===o){l.scale=e;const t=0===o?s:u;l.field=t}else{const t=t4(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${t})`}return r&&(l.offset=r),l}function R7({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(yee(t)){if(vee(t)){c??(c=aee({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:l,type:f}=t;if(V6(a)||c&&l&&f===y9)return s&&s.impute?T7(t,o,{binSuffix:"mid"},{offset:u}):c?z7({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):T7(t,o,Wee(t,e)?{binSuffix:"range"}:{},{offset:u});if(G6(a)){if(dee(n))return z7({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});{const t=e===Q3?K3:Z3;k4.warn(E4.channelRequiredForBinned(t))}}}const l=a?.get?.("type");return T7(t,o,U9(l)?{binSuffix:"range"}:{},{offset:u,band:"band"===l?c??t.bandPosition??.5:void 0})}if(bee(t)){const n=u?{offset:u}:{};return{...P7(e,t.value),...n}}}return AS(l)&&(l=l()),l?{...l,...u?{offset:u}:{}}:l}function P7(e,t){return d3(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:d3(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:c4(t)}function L7(e){return e&&"number"!==e&&"time"!==e}function B7(e,t,n){return`${e}(${t}${n?`, ${l3(n)}`:""})`}function I7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(L7(n))return U7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=j7(e,r,i);if(jee(e)){const n=function(e,t,n,r,i){return!t||n?`${i?"utc":"time"}Format(${e}, '${n=XS(n)?n:r}')`:function(e,t,n){if(!e)return;const r=e9(e);return`${n||X8(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,i)}(a,dee(e)?t9(e.timeUnit)?.unit:void 0,t,o.timeFormat,xee(e)&&e.scale?.type===A9);return n?{signal:n}:void 0}if(t=H7(hee(e),t,o),dee(e)&&V6(e.bin)){return{signal:Y7(a,See(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===hee(e)?{signal:`${V7(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function j7(e,t,n){return dee(e)?n?`${See(e,{expr:t,suffix:"end"})}-${See(e,{expr:t,suffix:"start"})}`:See(e,{expr:t}):function(e){const{datum:t}=e;return I8(t)?V8(t):`${l3(t)}`}(e)}function U7({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=j7(e,r,i)),dee(e)&&V6(e.bin)){return{signal:Y7(a,See(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:B7(n,a,t)}}function q7(e,t,n,r,i,o){if(!L7(r)){if(jee(e)){return function(e,t,n,r){if(e)return e;if(t)return{signal:e9(t)};return r?void 0:n.timeFormat}(n,dee(e)?t9(e.timeUnit)?.unit:void 0,i,o)}return H7(t,n,i)}}function W7(e,t,n){return e&&(t4(e)||"number"===e||"time"===e)?e:jee(t)&&"time"!==n&&"utc"!==n?"time":void 0}function H7(e,t,n){return XS(t)?t:e===m9?n.numberFormat:void 0}function V7(e,t){return`format(${e}, "${t||""}")`}function G7(e,t,n,r){return L7(n)?B7(n,e,t):V7(e,(XS(t)?t:void 0)??r.numberFormat)}function Y7(e,t,n,r,i){const o=G7(e,n,r,i),a=G7(t,n,r,i);return`${d9(e,!1)} ? "null" : ${o} + "  " + ${a}`}const X7="min",Q7={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function J7(e){return e in Q7}function K7(e){return!!e&&!!e.encoding}function Z7(e){return!(!e||"count"!==e.op&&!e.field)}function eee(e){return!!e&&ZE(e)}function tee(e){return"row"in e||"column"in e}function nee(e){return!!e&&"header"in e}function ree(e){return"facet"in e}function iee(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function oee(e){return"sort"in e}function aee({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(yee(e)&&void 0!==e.bandPosition)return e.bandPosition;if(dee(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return x7(n.type)?0:g4("timeUnitBandPosition",n,r);if(V6(o))return.5}}function see({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=J5(e),u=m4(a?"size":s,r,i,{vgChannel:s});if(void 0!==u)return u;if(dee(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:g4("timeUnitBandSize",r,i)};if(V6(a)&&!U9(o))return{band:1}}return x7(r.type)?o?U9(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function uee(e,t,n,r){return!!(V6(e.bin)||e.timeUnit&&vee(e)&&"temporal"===e.type)&&void 0!==aee({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function lee(e){return!!e&&"condition"in e}function cee(e){const t=e&&e.condition;return!!t&&!ZE(t)&&dee(t)}function fee(e){const t=e&&e.condition;return!!t&&!ZE(t)&&yee(t)}function dee(e){return!(!e||!e.field&&"count"!==e.aggregate)}function hee(e){return e&&e.type}function pee(e){return!!e&&"datum"in e}function mee(e){return vee(e)&&!Aee(e)||gee(e)}function gee(e){return pee(e)&&GS(e.datum)}function yee(e){return dee(e)||pee(e)}function vee(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function bee(e){return e&&"value"in e&&"value"in e}function xee(e){return!!e&&("scale"in e||"sort"in e)}function wee(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function _ee(e){return!!e&&"legend"in e}function kee(e){return!!e&&("format"in e||"formatType"in e)}function Eee(e){return u3(e,["legend","axis","header","scale"])}function See(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=q3("count");else{let r;if(!t.nofn)if(function(e){return"op"in e}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:u}=e;V6(a)?(r=H6(a),i=(t.binSuffix??"")+(t.suffix??"")):s?B6(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):L6(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):u&&(r=function(e){const{utc:t,...n}=t9(e);return n.unit?(t?"utc":"")+E3(n).map((e=>D3(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+E3(n).map((e=>D3(`_${e}_${n[e]}`))).join("")}(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?P3(n):t.expr?$3(n,t.expr)+o:z3(n)+o}function Aee(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return dee(e)&&!!e.bin;case"temporal":return!1}throw new Error(E4.invalidFieldType(e.type))}const Cee=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(B6(t))return`${i} for argmax(${t.argmax})`;if(L6(t))return`${i} for argmin(${t.argmin})`;const o=t9(r),a=t||o?.unit||o?.maxbins&&"timeunit"||V6(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(V6(r))return`${n} (binned)`;if(i){const e=t9(i)?.unit;if(e)return`${n} (${J8(e).join("-")})`}else if(o)return B6(o)?`${n} for max ${o.argmax}`:L6(o)?`${n} for min ${o.argmin}`:`${N3(o)} of ${n}`;return n}(e,t)}};let Dee=Cee;function Mee(e){Dee=e}function Fee(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=Nee(e)?.title;if(!dee(e))return i;const o=e,a=r?Oee(o,t):void 0;return n?B3(i,o.title,a):i??o.title??a}function Nee(e){return wee(e)&&e.axis?e.axis:_ee(e)&&e.legend?e.legend:nee(e)&&e.header?e.header:void 0}function Oee(e,t){return Dee(e,t)}function $ee(e){if(kee(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Nee(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Tee(e){return dee(e)?e:cee(e)?e.condition:void 0}function zee(e){return yee(e)?e:fee(e)?e.condition:void 0}function Ree(e,t,n,r={}){if(XS(e)||GS(e)||WS(e)){const n=XS(e)?"string":GS(e)?"number":"boolean";return k4.warn(E4.primitiveChannelDef(t,n,e)),{value:e}}return yee(e)?Pee(e,t,n,r):fee(e)?{...e,condition:Pee(e.condition,t,n,r)}:e}function Pee(e,t,n,r){if(kee(e)){const{format:i,formatType:o,...a}=e;if(L7(o)&&!n.customFormatTypes)return k4.warn(E4.customFormatTypeNotAllowed(t)),Pee(a,t,n,r)}else{const i=wee(e)?"axis":_ee(e)?"legend":nee(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(L7(a)&&!n.customFormatTypes)return k4.warn(E4.customFormatTypeNotAllowed(t)),Pee({...e,[i]:s},t,n,r)}}return dee(e)?Lee(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=GS(n)?"quantitative":XS(n)?"nominal":I8(n)?"temporal":void 0,{...e,type:t}}(e)}function Lee(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||I6(r)||B6(r)||L6(r)||(k4.warn(E4.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=t9(i)),a&&(s.field=`${a}`),V6(o)&&(s.bin=Bee(o,t)),G6(o)&&!p6(t)&&k4.warn(E4.channelShouldNotBeUsedForBinned(t)),vee(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case m9:return"quantitative";case"t":case y9:return"temporal";case"o":case g9:return"ordinal";case"n":case v9:return"nominal";case b9:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&U6(r)&&(k4.warn(E4.invalidFieldTypeForCountAggregate(e,r)),s.type="quantitative")}else if(!G5(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(oee(e)&&ZE(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!B6(n)&&!L6(n))return"quantitative";if(xee(e)&&e.scale?.type)switch(O9[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(vee(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case G3:case Y3:case X3:return Aee(e)?Iee:{compatible:!1,warning:E4.channelShouldBeDiscrete(t)};case Q3:case J3:case u5:case l5:case c5:case b5:case w5:case _5:case k5:case E5:case S5:case h5:case n5:case e5:case A5:return Iee;case o5:case s5:case i5:case a5:return n!==m9?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Iee;case p5:case m5:case g5:case y5:case d5:case r5:case t5:case K3:case Z3:return"nominal"!==n||e.sort?Iee:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case f5:case v5:return Aee(e)||xee(r=e)&&H9(r.scale?.type)?Iee:{compatible:!1,warning:E4.channelShouldBeDiscreteOrDiscretizing(t)};case x5:return"nominal"!==e.type||"sort"in e?Iee:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r}(s,t)||{};!1===e&&k4.warn(n)}if(oee(s)&&XS(s.sort)){const{sort:e}=s;if(J7(e))return{...s,sort:{encoding:e}};const t=e.substr(1);if("-"===e.charAt(0)&&J7(t))return{...s,sort:{encoding:t,order:"descending"}}}if(nee(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function Bee(e,t){return WS(e)?{maxbins:Q6(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:Q6(t)}}const Iee={compatible:!0};function jee(e){const{formatType:t}=$ee(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||dee(n)&&!!n.timeUnit));var n}function Uee(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&t9(t)?.unit;let a,s=o||"temporal"===n;return J6(e)?a=e.expr:t4(e)?a=e.signal:I8(e)?(s=!0,a=V8(e)):(XS(e)||GS(e))&&s&&(a=`datetime(${l3(e)})`,function(e){return!!G8[e]}(o)&&(GS(e)&&e<1e4||XS(e)&&isNaN(Date.parse(e)))&&(a=V8({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:l3(e)}function qee(e,t){const{type:n}=e;return t.map((t=>{const r=Uee(t,{timeUnit:dee(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Wee(e,t){return V6(e.bin)?F6(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Hee={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Vee(e){return e&&e.condition}const Gee=["domain","grid","labels","ticks","title"],Yee={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Xee={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Qee={...Xee,style:1,labelExpr:1,encoding:1};function Jee(e){return!!Qee[e]}E3(Qee);const Kee=E3({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Zee(e){return"mark"in e}class ete{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!Zee(e)&&(_7(t=e.mark)?t.type:t)===this.name;var t}}function tte(e,t){const n=e&&e[t];return!!n&&(ZE(n)?h3(n,(e=>!!e.field)):dee(n)||cee(n))}function nte(e){return h3(R5,(t=>{if(tte(e,t)){const n=e[t];if(ZE(n))return h3(n,(e=>!!e.aggregate));{const e=Tee(n);return e&&!!e.aggregate}}return!1}))}function rte(e,t){const n=[],r=[],i=[],o=[],a={};return ate(e,((s,u)=>{if(dee(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=s;if(c||d||f){const e=Nee(s),p=e&&e.title;let m=See(s,{forAs:!0});const g={...p?[]:{title:Fee(s,t,{allowDisabling:!0})},...h,field:m};if(c){let e;if(B6(c)?(e="argmax",m=See({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):L6(c)?(e="argmin",m=See({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};l&&(t.field=l),o.push(t)}}else if(n.push(m),vee(s)&&V6(f)){if(r.push({bin:f,field:l,as:m}),n.push(See(s,{binSuffix:"end"})),Wee(s,u)&&n.push(See(s,{binSuffix:"range"})),p6(u)){const e={field:`${m}_end`};a[`${u}2`]=e}g.bin="binned",G5(u)||(g.type=m9)}else if(d){i.push({timeUnit:d,field:l,as:m});const e=vee(s)&&s.type!==y9&&"time";e&&(u===b5||u===k5?g.formatType=e:!function(e){return!!c6[e]}(u)?p6(u)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[u]=g}else n.push(l),a[u]=e[u]}else a[u]=e[u]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function ite(e,t,n,r){return E3(e).reduce(((i,o)=>{if(!H5(o))return k4.warn(E4.invalidEncodingChannel(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(k4.warn(E4.REPLACE_ANGLE_WITH_THETA),o=n5),!function(e,t,n){const r=N6(t,n);if(!r)return!1;if("binned"===r){const n=e[t===K3?Q3:J3];return!!(dee(n)&&dee(e[t])&&G6(n.bin))}return!0}(e,o,t))return k4.warn(E4.incompatibleChannel(o,t)),i;if(o===d5&&"line"===t){if(Tee(e[o])?.aggregate)return k4.warn(E4.LINE_WITH_VARYING_SIZE),i}if(o===u5&&(n?"fill"in e:"stroke"in e))return k4.warn(E4.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===w5||o===x5&&!ZE(a)&&!bee(a)||o===k5&&ZE(a))a&&(i[o]=ES(a).reduce(((e,t)=>(dee(t)?e.push(Lee(t,o)):k4.warn(E4.emptyFieldDef(t,o)),e)),[]));else{if(o===k5&&null===a)i[o]=null;else if(!(dee(a)||pee(a)||bee(a)||lee(a)||t4(a)))return k4.warn(E4.emptyFieldDef(a,o)),i;i[o]=Ree(a,o,r)}return i}),{})}function ote(e,t){const n={};for(const r of E3(e)){const i=Ree(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function ate(e,t,n){if(e)for(const r of E3(e)){const i=e[r];if(ZE(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function ste(e,t){return E3(t).reduce(((n,r)=>{switch(r){case Q3:case J3:case E5:case A5:case S5:case K3:case Z3:case n5:case r5:case e5:case t5:case i5:case o5:case a5:case s5:case b5:case f5:case h5:case k5:return n;case x5:if("line"===e||"trail"===e)return n;case w5:case _5:{const e=t[r];if(ZE(e)||dee(e))for(const t of ES(e))t.aggregate||n.push(See(t,{}));return n}case d5:if("trail"===e)return n;case u5:case l5:case c5:case p5:case m5:case g5:case v5:case y5:{const e=Tee(t[r]);return e&&!e.aggregate&&n.push(See(e,{})),n}}}),[])}function ute(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${lte(t)}`:"";return{field:e+t.field,type:t.type,title:t4(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...y3(function(e){const t=[];for(const n of E3(e))if(tte(e,n)){const r=ES(e[n]);for(const e of r)dee(e)?t.push(e):cee(e)&&t.push(e.condition)}return t}(n).map(Eee),c3)]}}function lte(e){const{title:t,field:n}=e;return B3(t,n)}function cte(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c,extraEncoding:f={}})=>{const d=lte(n);return fte(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...XS(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function fte(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},..._7(r.mark)?r.mark:{type:r.mark},style:`${s}-${t}`,...WS(e[t])?{}:e[t]}}]:[]}function dte(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:hte(o,n),continuousAxisChannelDef2:hte(a,n),continuousAxisChannelDefError:hte(s,n),continuousAxisChannelDefError2:hte(u,n),continuousAxis:i}}function hte(e,t){if(e&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&k4.warn(E4.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function pte(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(_7(n)&&n.orient)return n.orient;if(mee(i)){if(mee(o)){const e=dee(i)&&i.aggregate,n=dee(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return jee(o)&&!jee(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(mee(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const mte="boxplot",gte=new ete(mte,vte);function yte(e){return GS(e)?"tukey":e}function vte(e,{config:t}){e={...e,encoding:ote(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=_7(n)?n:{type:n};i&&k4.warn(E4.selectionNotSupported("boxplot"));const u=s.extent??t.boxplot.extent,l=m4("size",s,t),c=yte(u),{bins:f,timeUnits:d,transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=pte(e,mte),{continuousAxisChannelDef:i,continuousAxis:o}=dte(e,r,mte),a=i.field,s=yte(t),u=[...bte(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],l="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ZE(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ZE(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=rte(h,n),b="vertical"===r?"horizontal":"vertical",x=r,w=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:w,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:d}}(e,u,t),{color:_,size:k,...E}=v,S=e=>cte(s,m,p,e,t.boxplot),A=S(E),C=S(v),D=S({...E,...k?{size:k}:{}}),M=ute([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,v),F={type:"tick",color:"black",opacity:1,orient:b,invalid:null,aria:!1},N="min-max"===c?M:ute([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,v),O=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],$=[..."tukey"!==c?O:[],...C({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:null,...eS(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if("min-max"===c)return{...a,transform:(a.transform??[]).concat(h),layer:$};const T=`datum["lower_box_${p.field}"]`,z=`datum["upper_box_${p.field}"]`,R=`(${z} - ${T})`,P=`${T} - ${u} * ${R}`,L=`${z} + ${u} * ${R}`,B=`datum["${p.field}"]`,I={joinaggregate:bte(p.field),groupby:g},j={transform:[{filter:`(${P} <= ${B}) && (${B} <= ${L})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:g}],layer:O},{tooltip:U,...q}=E,{scale:W,axis:H}=p,V=lte(p),G=u3(H,["title"]),Y=fte(s,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${P}) || (${B} > ${L})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...void 0!==V?{title:V}:{},...void 0!==W?{scale:W}:{},...k3(G)?{}:{axis:G}},...q,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let X;const Q=[...f,...d,I];return Y?X={transform:Q,layer:[Y,j]}:(X=j,X.transform.unshift(...Q)),{...a,layer:[X,{transform:h,layer:$}]}}function bte(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const xte="errorbar",wte=new ete(xte,_te);function _te(e,{config:t}){e={...e,encoding:ote(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=Ete(e,xte,t);delete o.size;const c=cte(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:a,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function kte(e,t){const{encoding:n}=e;if(function(e){return(yee(e.x)||yee(e.y))&&!yee(e.x2)&&!yee(e.y2)&&!yee(e.xError)&&!yee(e.xError2)&&!yee(e.yError)&&!yee(e.yError2)}(n))return{orient:pte(e,t),inputType:"raw"};const r=function(e){return yee(e.x2)||yee(e.y2)}(n),i=function(e){return yee(e.xError)||yee(e.xError2)||yee(e.yError)||yee(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(yee(e)&&yee(r))throw new Error(`${t} cannot have both x2 and y2`);if(yee(e)){if(mee(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(yee(r)){if(mee(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(yee(r)&&!yee(e))throw new Error(`${t} cannot have xError2 without xError`);if(yee(s)&&!yee(i))throw new Error(`${t} cannot have yError2 without yError`);if(yee(e)&&yee(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(yee(e)){if(mee(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(yee(i)){if(mee(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Ete(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=_7(r)?r:{type:r};o&&k4.warn(E4.selectionNotSupported(t));const{orient:l,inputType:c}=kte(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=dte(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&k4.warn(E4.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:N3(t)},{fieldPrefix:"upper_",titlePrefix:Ste(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:Ste(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),u=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:Fee({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Fee({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Fee({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&k4.warn(E4.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const e of l)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:R3(R3(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,f,d,h,p,c,t,n),{[m]:x,["x"===m?"x2":"y2"]:w,["x"===m?"xError":"yError"]:_,["x"===m?"xError2":"yError2"]:k,...E}=i,{bins:S,timeUnits:A,aggregate:C,groupby:D,encoding:M}=rte(E,n),F=[...C,...g],N="raw"!==c?[]:D,O=ute(v,f,M,b);return{transform:[...s.transform??[],...S,...A,...0===F.length?[]:[{aggregate:F,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:O}}function Ste(e,t,n){return`${N3(e)} ${n} ${t}`}const Ate="errorband",Cte=new ete(Ate,Dte);function Dte(e,{config:t}){e={...e,encoding:ote(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=Ete(e,Ate,t),l=a,c=cte(l,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?k4.warn(E4.errorBand1DNotSupport("interpolate")):l.tension&&k4.warn(E4.errorBand1DNotSupport("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const Mte={};function Fte(e,t,n){const r=new ete(e,t);Mte[e]={normalizer:r,parts:n}}Fte(mte,vte,["box","median","outliers","rule","ticks"]),Fte(xte,_te,["ticks","rule"]),Fte(Ate,Dte,["band","borders"]);const Nte=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Ote={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},$te={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Tte=E3(Ote),zte=E3($te),Rte=E3({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Pte=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Lte={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Bte=(E3(Lte),"_vgsid_"),Ite={point:{on:"click",fields:[Bte],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function jte(e){return!(!e||"legend"!==e&&!e.legend)}function Ute(e){return jte(e)&&eS(e)}function qte(e){return!!e.select}function Wte(e){const t=[];for(const n of e||[]){if(qte(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function Hte(e){return"concat"in e}function Vte(e){return"vconcat"in e}function Gte(e){return"hconcat"in e}function Yte(e){return eS(e)&&void 0!==e.step}function Xte(e){return e.view||e.width||e.height}const Qte=E3({align:1,bounds:1,center:1,columns:1,spacing:1});function Jte(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function Kte(e,t){const n=Zte(e,t);return Yte(n)?n.step:ene}function Zte(e,t){return B3(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const ene=20,tne={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:ene},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:D7,circle:{},geoshape:{},image:{},line:{},point:{},rect:M7,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Ite,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},nne=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],rne={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},ine={blue:nne[0],orange:nne[1],red:nne[2],teal:nne[3],green:nne[4],yellow:nne[5],purple:nne[6],pink:nne[7],brown:nne[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function one(e){const t=E3(e||{}),n={};for(const r of t){const t=e[r];n[r]=Vee(t)?s4(t):u4(t)}return n}const ane=[...S7,...Kee,...Rte,"background","padding","legend","lineBreak","scale","style","title","view"];function sne(e={}){const{color:t,font:n,fontSize:r,...i}=e,o=nS({},tne,n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:eS(e)?{...ine,...e}:ine}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:eS(e)?{...rne,...e}:rne}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),a=u3(o,ane);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=u4(o[e]));for(const e of S7)o[e]&&(a[e]=K6(o[e]));for(const e of Kee)o[e]&&(a[e]=one(o[e]));for(const e of Rte)o[e]&&(a[e]=K6(o[e]));return o.legend&&(a.legend=K6(o.legend)),o.scale&&(a.scale=K6(o.scale)),o.style&&(a.style=function(e){const t=E3(e),n={};for(const r of t)n[r]=one(e[r]);return n}(o.style)),o.title&&(a.title=K6(o.title)),o.view&&(a.view=K6(o.view)),a}const une=["view",...w7],lne=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],cne={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function fne(e){e=a3(e);for(const t of lne)delete e[t];if(e.axis)for(const t in e.axis)Vee(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Nte)delete e.legend[t];if(e.mark){for(const t of E7)delete e.mark[t];e.mark.tooltip&&eS(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Wte(e.params)),delete e.params);for(const t of une){for(const n of E7)delete e[t][n];const n=cne[t];if(n)for(const r of n)delete e[t][r];dne(e,t)}for(const t of E3(Mte))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=Z6(e.title);k3(t)||(e.style["group-title"]={...e.style["group-title"],...t});k3(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});k3(r)?delete e.title:e.title=r}(e);for(const t in e)eS(e[t])&&k3(e[t])&&delete e[t];return k3(e)?void 0:e}function dne(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};k3(i)||(e.style[n??t]=i),r||delete e[t]}function hne(e){return"layer"in e}class pne{map(e,t){return ree(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Gte(e)?this.mapHConcat(e,t):Vte(e)?this.mapVConcat(e,t):Hte(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(hne(e))return this.mapLayer(e,t);if(Zee(e))return this.mapUnit(e,t);throw new Error(E4.invalidSpec(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const mne={zero:1,center:1,normalize:1};const gne=new Set([o7,s7,a7,d7,c7,g7,y7,l7,h7,p7]),yne=new Set([s7,a7,o7]);function vne(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(dee(r)&&dee(i))if("quantitative"===hee(r)&&"quantitative"===hee(i)){if(r.stack)return t;if(i.stack)return n;const e=dee(r)&&!!r.aggregate;if(e!==(dee(i)&&!!i.aggregate))return e?t:n;{const e=r.scale?.type,o=i.scale?.type;if(e&&"linear"!==e)return n;if(o&&"linear"!==o)return t}}else{if("quantitative"===hee(r))return t;if("quantitative"===hee(i))return n}else{if("quantitative"===hee(r))return t;if("quantitative"===hee(i))return n}}function bne(e,t,n={}){const r=_7(e)?e.type:e;if(!gne.has(r))return null;const i=vne(t,"x")||vne(t,"theta");if(!i)return null;const o=t[i],a=dee(o)?See(o,{}):void 0;let s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),u=t[s],l=dee(u)?See(u,{}):void 0;l===a&&(l=void 0,u=void 0,s=void 0);const c=f6.reduce(((e,n)=>{if("tooltip"!==n&&tte(t,n)){const r=t[n];for(const t of ES(r)){const r=Tee(t);if(r.aggregate)continue;const i=See(r,{});i&&i===l||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;if(void 0!==o.stack?f=WS(o.stack)?o.stack?"zero":null:o.stack:yne.has(r)&&(f="zero"),!f||!(f in mne))return null;if(nte(t)&&0===c.length)return null;if(o?.scale?.type&&o?.scale?.type!==x9){if(n.disallowNonLinearStack)return null;k4.warn(E4.cannotStackNonLinearScale(o.scale.type))}return yee(t[Q5(i)])?(void 0!==o.stack&&k4.warn(E4.cannotStackRangedMark(i)),null):(dee(o)&&o.aggregate&&!d3(q6,o.aggregate)&&k4.warn(E4.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&b7(r),stackBy:c,offset:f})}function xne(e){const{point:t,line:n,...r}=e;return E3(r).length>1?r:r.type}function wne(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:u3(e[t],["point","line"])});return e}function _ne(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?eS(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?eS(t.point)?t.point:{}:void 0}function kne(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class Ene{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(Zee(e)){const{mark:n,encoding:r}=e,i=_7(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!_ne(i,t[i.type],r);case"area":return!!_ne(i,t[i.type],r)||!!kne(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s,...u}=e,l=ote(s,r),c=_7(a)?a:{type:a},f=_ne(c,r[c.type],l),d="area"===c.type&&kne(c,r[c.type]),h=[{...i?{params:i}:{},mark:xne({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:u3(l,["shape"])}],p=bne(c,l);let m=l;if(p){const{fieldChannel:e,offset:t}=p;m={...l,[e]:{...l[e],...t?{stack:t}:{}}}}return d&&h.push({...o?{projection:o}:{},mark:{type:"line",...s3(c,["clip","interpolate","tension","tooltip"]),...d},encoding:m}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...s3(c,["clip","tooltip"]),...f},encoding:m}),n({...u,layer:h},{...t,config:wne(r)})}}function Sne(e,t){return t?tee(e)?Nne(e,t):Dne(e,t):e}function Ane(e,t){return t?Nne(e,t):e}function Cne(e,t,n){const r=t[e];return(i=r)&&!XS(i)&&"repeat"in i?r.repeat in n?{...t,[e]:n[r.repeat]}:void k4.warn(E4.noSuchRepeatedValue(r.repeat)):t;var i}function Dne(e,t){if(void 0!==(e=Cne("field",e,t))){if(null===e)return null;if(oee(e)&&Z7(e.sort)){const n=Cne("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Mne(e,t){if(dee(e))return Dne(e,t);{const n=Cne("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function Fne(e,t){if(!yee(e)){if(fee(e)){const n=Mne(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=Mne(e,t);if(n)return n;if(lee(e))return{condition:e.condition}}}function Nne(e,t){const n={};for(const r in e)if(LS(e,r)){const i=e[r];if(ZE(i))n[r]=i.map((e=>Fne(e,t))).filter((e=>e));else{const e=Fne(i,t);void 0!==e&&(n[r]=e)}}return n}class One{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Zee(e)){const{encoding:t,mark:n}=e;if("line"===n||_7(n)&&"line"===n.type)for(const e of V5){const n=t[Y5(e)];if(t[e]&&(dee(n)&&!G6(n.bin)||pee(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;return k4.warn(E4.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n({...e,mark:eS(i)?{...i,type:"rule"}:"rule"},t)}}function $ne({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...E3(e),...E3(t)]);for(const o of i){const i=t[o],a=e[o];if(yee(i)){const e={...a,...i};r[o]=e}else fee(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||bee(a)||t4(a)||yee(a)||ZE(a))&&(r[o]=a)}}else r=t;return!r||k3(r)?void 0:r}function Tne(e){const{parentProjection:t,projection:n}=e;return t&&n&&k4.warn(E4.projectionOverridden({parentProjection:t,projection:n})),n??t}function zne(e){return"filter"in e}function Rne(e){return"lookup"in e}function Pne(e){return"pivot"in e}function Lne(e){return"density"in e}function Bne(e){return"quantile"in e}function Ine(e){return"regression"in e}function jne(e){return"loess"in e}function Une(e){return"sample"in e}function qne(e){return"window"in e}function Wne(e){return"joinaggregate"in e}function Hne(e){return"flatten"in e}function Vne(e){return"calculate"in e}function Gne(e){return"bin"in e}function Yne(e){return"impute"in e}function Xne(e){return"timeUnit"in e}function Qne(e){return"aggregate"in e}function Jne(e){return"stack"in e}function Kne(e){return"fold"in e}function Zne(e,t){const{transform:n,...r}=e;if(n){return{...r,transform:n.map((e=>{if(zne(e))return{filter:nre(e,t)};if(Gne(e)&&Y6(e.bin))return{...e,bin:tre(e.bin)};if(Rne(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}))}}return e}function ere(e,t){const n=a3(e);if(dee(n)&&Y6(n.bin)&&(n.bin=tre(n.bin)),xee(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(lee(n))if(ZE(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:nre(e,t)}}));else{const{selection:e,param:r,test:i,...o}=ere(n.condition,t);n.condition=r?n.condition:{...o,test:nre(n.condition,t)}}return n}function tre(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function nre(e,t){const n=e=>i3(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):i3(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class rre extends pne{map(e,t){const n=t.selections??[];if(e.params&&!Zee(e)){const t=[];for(const r of e.params)qte(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,ire(e,t))}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(XS(n)&&(n===e.name||r.indexOf(n)>=0)||ZE(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=rre.prototype[e];rre.prototype[e]=function(e,n){return t.call(this,e,ire(e,n))}}function ire(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function ore(e,t){void 0===t&&(t=sne(e.config));const n=function(e,t={}){const n={config:t};return ure.map(are.map(sre.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=Zee(e)||hne(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(k4.warn(E4.containerSizeNonSingle("width")),r=void 0),"container"==i&&(k4.warn(E4.containerSizeNonSingle("height")),i=void 0));const s={type:"pad",...a,...n?lre(n.autosize):{},...lre(e.autosize)};"fit"!==s.type||o||(k4.warn(E4.FIT_NON_SINGLE),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&k4.warn(E4.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&k4.warn(E4.containerSizeNotCompatibleWithAutosize("height"));if(o3(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const are=new class extends pne{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[gte,wte,Cte,new Ene,new One]}map(e,t){if(Zee(e)){const n=tte(e.encoding,G3),r=tte(e.encoding,Y3),i=tte(e.encoding,X3);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=Ane(e.encoding,t.repeater),o={...e,...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!ZE(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:l=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...u,layer:e},i=`${(r.name||"")+l}child__layer_${D3(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!ZE(n)&&e.columns&&(e=u3(e,["columns"]),k4.warn(E4.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:s={},repeaterPrefix:u=""}=t,l=!ZE(n)&&n.row||[s?s.row:null],c=!ZE(n)&&n.column||[s?s.column:null],f=ZE(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of l)for(const o of c){const l={repeat:e,row:i,column:o,layer:s.layer},c=(r.name||"")+u+"child__"+(ZE(n)?`${D3(e)}`:(n.row?`row_${D3(i)}`:"")+(n.column?`column_${D3(o)}`:"")),f=this.map(r,{...t,repeater:l,repeaterPrefix:c});f.name=c,a.push(u3(f,["data"]))}const d=ZE(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:d,concat:a}}mapFacet(e,t){const{facet:n}=e;return tee(n)&&e.columns&&(e=u3(e,["columns"]),k4.warn(E4.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=Tne({parentProjection:o,projection:r}),u=$ne({parentEncoding:i,encoding:Ane(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:u,height:l,view:c,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=Ane(o,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...l?{height:l}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&k4.warn(E4.facetChannelDropped([...n?[G3]:[],...r?[Y3]:[]]));const t={},o={};for(const n of[G3,Y3]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...u}=r;t[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:Sne(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:$ne({parentEncoding:t,encoding:i,layer:!0}),parentProjection:Tne({parentProjection:n,projection:o})};return super.mapLayer(a,s)}},sre=new class extends pne{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=Zne(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=Zne(e,t)).encoding){const n={};for(const[r,i]of A3(e.encoding))n[r]=ere(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:A3(n).map((([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const n of S3(t.selectionPredicates[e]??{}))n.empty="none"!==o;return{name:e,value:r,select:a,bind:i}}))}:e}},ure=new rre;function lre(e){return XS(e)?{type:e}:e??{}}const cre=["background","padding"];function fre(e,t){const n={};for(const t of cre)e&&void 0!==e[t]&&(n[t]=u4(e[t]));return t&&(n.params=e.params),n}class dre{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new dre(a3(this.explicit),a3(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return B3(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of E3(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function hre(e){return{explicit:!0,value:e}}function pre(e){return{explicit:!1,value:e}}function mre(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:gre(t,n,r,i)}}function gre(e,t,n,r){return e.explicit&&t.explicit&&k4.warn(E4.mergeConflictingProperty(n,r,e.value,t.value)),e}function yre(e,t,n,r,i=gre){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:o3(e.value,t.value)?e:i(e,t,n,r)}class vre extends dre{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function bre(e){return"url"in e}function xre(e){return"values"in e}function wre(e){return"name"in e&&!bre(e)&&!xre(e)&&!_re(e)}function _re(e){return e&&(kre(e)||Ere(e)||Sre(e))}function kre(e){return"sequence"in e}function Ere(e){return"sphere"in e}function Sre(e){return"graticule"in e}var Are,Cre;function Dre(e,t=!0,n=VE){if(ZE(e)){const r=e.map((e=>Dre(e,t,n)));return t?`[${r.join(", ")}]`:r}return I8(e)?n(t?V8(e):function(e){const t=H8(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(l3(e)):e}function Mre(e,t){for(const n of S3(e.component.selection??{})){const r=n.name;let i=`${r}${Iie}, ${"global"===n.resolve?"true":`{unit: ${Wie(e)}}`}`;for(const r of qie)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+jie,on:[{events:{signal:n.name+Iie},update:`modify(${rA(n.name+Bie)}, ${i})`}]})}return Ore(t)}function Fre(e,t){if(e.component.selection&&E3(e.component.selection).length){const n=rA(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:GK("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Ore(t)}function Nre(e,t){for(const n of S3(e.component.selection??{}))for(const r of qie)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Ore(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}(Cre=Are||(Are={}))[Cre.Raw=0]="Raw",Cre[Cre.Main=1]="Main",Cre[Cre.Row=2]="Row",Cre[Cre.Column=3]="Column",Cre[Cre.Lookup=4]="Lookup";class $re{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?k4.warn(E4.ADD_SAME_CHILD_TWICE):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class Tre extends $re{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${j3()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class zre extends $re{constructor(e,t){super(e),this.formula=t}clone(){return new zre(null,a3(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=See(t,{forAs:!0});e[c3({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return k3(n)?null:new zre(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:t9(n)};return new zre(e,{[c3(i)]:i})}merge(e){this.formula={...this.formula};for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of A3(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(S3(this.formula).map((e=>e.as)))}dependentFields(){return new Set(S3(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${c3(this.formula)}`}assemble(){const e=[];for(const t of S3(this.formula)){const{field:n,as:r,timeUnit:i}=t,{unit:o,utc:a,...s}=t9(i);e.push({field:z3(n),type:"timeunit",...o?{units:J8(o)}:{},...a?{timezone:"utc"}:{},...s,as:[r,`${r}_end`]})}return e}}const Rre="_tuple_fields";class Pre{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}}const Lre={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Pre),o={},a={},s=new Set,u=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=D3(`${r}_${n}`);for(let e=1;s.has(i);e++)i=D3(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},l=t.type,c=e.config.selection[l],f=void 0!==n.value?ES(n.value):null;let{fields:d,encodings:h}=eS(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(eS(e))for(const t of E3(e))W5[t]?(h||(h=[])).push(t):"interval"===l?(k4.warn(E4.INTERVAL_INITIALIZED_WITH_X_Y),h=c.encodings):(d||(d=[])).push(t);d||h||(h=c.encodings,d=c.fields);for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){k4.warn(E4.cannotProjectAggregate(t,n.aggregate));continue}if(!r){k4.warn(E4.cannotProjectOnChannelWithoutField(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};a[c3(i)]=i}if(!o[r]){let a="E";if("interval"===l){q9(e.getScaleComponent(t).get("type"))&&(a="R")}else n.bin&&(a="R-RE");const s={field:r,channel:t,type:a};s.signals={...u(s,"data"),...u(s,"visual")},i.items.push(o[r]=s),i.hasField[r]=i.hasChannel[t]=o[r]}}else k4.warn(E4.cannotProjectOnChannelWithoutField(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e};t.signals={...u(t,"data")},i.items.push(t),i.hasField[e]=t}f&&(t.init=f.map((e=>i.items.map((t=>eS(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),k3(a)||(i.timeUnit=new zre(null,a))},signals:(e,t,n)=>{const r=t.name+Rre;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n,...r}=e;return r.field=z3(r.field),r}))})}},Bre={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!F6(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&q9(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):k4.warn(E4.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||jre(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(Uie)>=0)i.update=`{${r.map((e=>`${rA(z3(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${rA(z3(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!jre(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}};function Ire(e,t){return`domain(${rA(e.scaleName(t))})`}function jre(e){return(e.parent&&Mse(e.parent)&&!e.parent.parent)??jre(e.parent.parent)}const Ure="_brush",qre="_scale_trigger",Wre={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Rre,o=Bre.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${rA(r+Ure)}`;Hre(t,((t,n)=>{var r;const i=ES((r=n.between[0]).filter??(r.filter=[]));return i.includes(e)||i.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==Q3&&o!==J3)return void k4.warn("Interval selections only support x and y encoding channels.");const l=a?a[i]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Bre.defined(t),u=rA(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=e=>`scale(${u}, ${e})`,d=e.getSizeSignalRef(i===Q3?"width":"height").signal,h=`${i}(unit)`,p=Hre(t,((e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]));return p.push({events:{signal:t.name+qre},update:q9(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[{name:o,...r?{init:Dre(r,!0,f)}:{value:[]},on:p},{name:a,...r?{init:Dre(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(e,t,r,l),f=r.signals.data,d=r.signals.visual,h=rA(e.scaleName(o)),p=q9(e.getScaleComponent(o).get("type"))?"+":"";n.push(...c),s.push(f),u.push({scaleName:e.scaleName(o),expr:`(!isArray(${f}) || (${p}invert(${h}, ${d})[0] === ${p}${f}[0] && ${p}invert(${h}, ${d})[1] === ${p}${f}[1]))`})})),o||n.push({name:r+qre,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:`${u.map((e=>e.expr)).join(" && ")} ? ${r+qre} : {}`}]});const l=`unit: ${Wie(e)}, fields: ${i}, values`;return n.concat({name:r+Iie,...a?{init:`{${l}: ${Dre(a)}}`}:{},on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]})},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${rA(t.name+Bie)})`;if(Bre.defined(t))return n;const l={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of E3(l))l[t]=[{test:`${u}.length && ${u}[0].unit === ${Wie(e)}`,...l[t]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=E3(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+Ure}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+Ure,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Hre(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(k4.warn(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Vre={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Rre,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=o.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${a}[${rA(e.vgField(t.channel,{}))}], ${a}[${rA(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${rA(t.field)}]`})).join(", "),u=`unit: ${Wie(e)}, fields: ${i}, values`,l=t.events;return n.concat([{name:r+Iie,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${u}: [${s}]} : null`,force:!0}]:[]}])}};function Gre(e,t,n,r){const i=lee(t)&&t.condition,o=r(t);if(i){return{[n]:[...ES(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t;return{test:Jie(e,{param:r,empty:i}),...n}}return{test:Zie(e,t.test),...n}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function Yre(e,t="text"){const n=e.encoding[t];return Gre(e,n,t,(t=>Xre(t,e.config)))}function Xre(e,t,n="datum"){if(e){if(bee(e))return c4(e.value);if(yee(e)){const{format:r,formatType:i}=$ee(e);return I7({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function Qre(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(ZE(a))return{tooltip:Kre({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Gre(e,a,"tooltip",(e=>{const a=Xre(e,i,s);if(a)return a;if(null===e)return;let u=m4("tooltip",r,i);return!0===u&&(u={content:"encoding"}),XS(u)?{value:u}:eS(u)?t4(u)?u:"encoding"===u.content?Kre(n,o,i,t):{signal:s}:void 0}))}}function Jre(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=Y5(s),l=vee(r)?r:{...r,type:e[u].type},c=ES(l.title||Oee(l,n)).join(", ");let f;if(p6(s)){const r="x"===s?"x2":"y2",a=Tee(e[r]);if(G6(l.bin)&&a){const e=See(l,{expr:o}),t=See(a,{expr:o}),{format:s,formatType:u}=$ee(l);f=Y7(e,t,s,u,n),i[r]=!0}else if(t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=$ee(l);f=I7({fieldOrDatumDef:l,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}}f??(f=Xre(l,n,o).signal),a.push({channel:s,key:c,value:f})}ate(e,((e,t)=>{dee(e)?s(e,t):cee(e)&&s(e.condition,t)}));const u={};for(const{channel:e,key:t,value:n}of a)i[e]||u[t]||(u[t]=n);return u}function Kre(e,t,n,{reactiveGeom:r}={}){const i=Jre(e,t,n,{reactiveGeom:r}),o=A3(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Zre(e){const{markDef:t,config:n}=e,r=m4("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...eie(e),...tie(e)}}function eie(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=m4("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in o4?{}:{ariaRoleDescription:{value:t}}}function tie(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Gre(e,o,"description",(t=>Xre(t,e.config)));const a=m4("description",n,r);if(null!=a)return{description:c4(a)};if(!1===r.aria)return{};const s=Jre(t,i,r);return k3(s)?void 0:{description:{signal:A3(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function nie(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u??(u=m4(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=c4(u)));const l=i[e];return Gre(t,l,a??e,(n=>R7({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function rie(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??m4("filled",n,i),s=d3(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=m4(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,l=m4(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",f={...u?{fill:c4(u)}:{},...l?{stroke:c4(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&k4.warn(E4.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...nie("color",e,{vgChannel:c,defaultValue:a?u:l}),...nie("fill",e,{defaultValue:r.fill?u:void 0}),...nie("stroke",e,{defaultValue:r.stroke?l:void 0})}}function iie(e){const{encoding:t,mark:n}=e,r=t.order;return!b7(n)&&bee(r)?Gre(e,r,"zindex",(e=>c4(e.value))):{}}function oie(e,t){const n=t[function(e){switch(e){case Q3:return"xOffset";case J3:return"yOffset";case K3:return"x2Offset";case Z3:return"y2Offset";case n5:return"thetaOffset";case e5:return"radiusOffset";case r5:return"theta2Offset";case t5:return"radius2Offset"}}(e)];if(n)return n}function aie(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[Q5(e)],c=t.scaleName(e),f=t.getScaleComponent(e),d=oie(e,o),h=sie({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&p6(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(yee(n)&&i&&t===i.fieldChannel){if(dee(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return z7({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return T7(n,r,{suffix:"end"},{offset:o})}return F7(e)}({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||e]:p}:void 0}function sie({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=Y5(n),u=X5(n),l=m4(n,o,a,{vgChannel:u});if(void 0!==l)return P7(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(d3([w9,S9,A9],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[J5(n)],mult:.5}}}}const uie={left:"x",center:"xc",right:"x2"},lie={top:"y",middle:"yc",bottom:"y2"};function cie(e,t,n,r="middle"){if("radius"===e||"theta"===e)return X5(e);const i="x"===e?"align":"baseline",o=m4(i,t,n);let a;return t4(o)?(k4.warn(E4.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,"x"===e?uie[a||("top"===r?"left":"center")]:lie[a||r]}function fie(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?die(e,t,{defaultPos:n,defaultPos2:r}):aie(e,t,{defaultPos:n})}function die(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=Q5(e),s=J5(e),u=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=Y5(n),l=J5(n),c=X5(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=oie(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=J5(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){if(yee(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return T7(t,o,{suffix:"start"},{offset:u});return F7({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});if(void 0!==m)return{[c]:m};return hie(n,o)||hie(n,{[n]:y4(n,o,s.style),[l]:y4(l,o,s.style)})||hie(n,s[i])||hie(n,s.mark)||{[c]:sie({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,a);return{...aie(e,t,{defaultPos:n,vgChannel:u[s]?cie(e,i,o):X5(e)}),...u}}function hie(e,t){const n=J5(e),r=X5(e);if(void 0!==t[r])return{[r]:P7(e,t[r])};if(void 0!==t[e])return{[r]:P7(e,t[e])};if(t[n]){const r=t[n];if(!A7(r))return{[n]:P7(e,r)};k4.warn(E4.relativeBandSizeNotSupported(n))}}function pie(e,t,n){const{config:r,encoding:i,markDef:o}=e,a=Q5(t),s=J5(t),u=i[t],l=i[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=o.orient,p=i[s]??i.size??m4("size",o,r,{vgChannel:s}),m="bar"===n&&("x"===t?"vertical"===h:"horizontal"===h);if(!dee(u)||!(V6(u.bin)||G6(u.bin)||u.timeUnit&&!l)||p&&!A7(p)||U9(f))return(yee(u)&&U9(f)||m)&&!l?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=J5(t),f=Q5(t),d="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let h;(i.size||r.size)&&(d?h=nie("size",n,{vgChannel:c,defaultRef:c4(r.size)}):k4.warn(E4.cannotApplySizeToNonOrientedMark(r.type)));const p=see({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l?.get?.("type"),useVlSizeChannel:d});h=h||{[c]:mie(c,u,l,o,p)};const m="band"===l?.get?.("type")&&"band"in h[c]?"top":"middle",g=cie(t,r,o,m),y="xc"===g||"yc"===g,v=oie(t,r),b=F7({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:v,defaultRef:sie({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:y?.5:t4(p)?{signal:`(1-${p})/2`}:A7(p)?(1-p.band)/2:0});if(c)return{[g]:b,...h};{const e=X5(f),t=h[c],n=v?{...t,offset:v}:t;return{[g]:b,[e]:ZE(b)?[b[0],{...b[1],offset:n}]:{...b,offset:n}}}}(u,t,e):die(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});return function({fieldDef:e,fieldDef2:t,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:l}){const c=Q5(n),f=X5(n),d=X5(c),h=oie(n,o),p=t4(r)?{signal:`(1-${r.signal})/2`}:A7(r)?(1-r.band)/2:.5;if(V6(e.bin)||e.timeUnit)return{[d]:yie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:p,offset:gie(c,a,u,s,h),config:l}),[f]:yie({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:t4(p)?{signal:`1-${p.signal}`}:1-p,offset:gie(n,a,u,s,h),config:l})};if(G6(e.bin)){const r=T7(e,i,{},{offset:gie(c,a,u,s,h)});if(dee(t))return{[d]:r,[f]:T7(t,i,{},{offset:gie(n,a,u,s,h)})};if(Y6(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${See(e,{expr:"datum"})} + ${e.bin.step})`,offset:gie(n,a,u,s,h)}}}return void k4.warn(E4.channelRequiredForBinned(c))}({fieldDef:u,fieldDef2:l,channel:t,markDef:o,scaleName:d,bandSize:see({channel:t,fieldDef:u,markDef:o,config:r,scaleType:f}),axisTranslate:e.component.axes[t]?.[0]?.get?.("translate")??.5,spacing:p6(t)?m4("binSpacing",o,r):void 0,reverse:c.get("reverse"),config:r})}function mie(e,t,n,r,i){if(A7(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e)return{scale:t,band:i.band};1!==i.band&&(k4.warn(E4.cannotUseRelativeBandSizeWithNonBandScale(e)),i=void 0)}}else{if(t4(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(n4(e)&&GS(e.step))return{value:e.step-2}}return{value:Kte(r.view,e)-2}}function gie(e,t,n,r,i){if(D5(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(t4(n)||t4(i)||t4(r)){const e=d4(n),t=d4(i),a=d4(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function yie({channel:e,fieldDef:t,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){return N7({fieldDef:t,channel:e,markDef:r,ref:z7({scaleName:n,fieldOrDatumDef:t,bandPosition:i,offset:o}),config:a})}const vie=new Set(["aria","width","height"]);function bie(e,t){const{fill:n,stroke:r}="include"===t.color?rie(e):{};return{...wie(e.markDef,t),...xie(e,"fill",n),...xie(e,"stroke",r),...nie("opacity",e),...nie("fillOpacity",e),...nie("strokeOpacity",e),...nie("strokeWidth",e),...nie("strokeDash",e),...iie(e),...Qre(e),...Yre(e,"href"),...Zre(e)}}function xie(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===m4("invalid",o,r)&&n&&!b7(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&q9(i)&&(t[o]=!0)}return t}),{}),i=E3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>$7(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:M6});if(r)return{[t]:[{test:r,value:null},...ES(n)]}}return n?{[t]:n}:{}}function wie(e,t){return i4.reduce(((n,r)=>(vie.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=c4(e[r])),n)),{})}function _ie(e){const{config:t,markDef:n}=e;if(m4("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&q9(i)&&(t[o]=!0)}return t}),{}),i=E3(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>$7(e,t))).join(` ${e} `)}return}(e,{channels:h6});if(t)return{defined:{signal:t}}}return{}}function kie(e,t){if(void 0!==t)return{[e]:c4(t)}}const Eie="voronoi",Sie={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Eie)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(b7(o))return k4.warn(E4.nearestNotSupportForContinuous(o)),n;const a={name:e.getName(Eie),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Qre(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.indexOf(Eie)>=0&&(u=!0)})),u||n.splice(s+1,0,a),n}},Aie={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!jte(e.bind),parse:(e,t,n)=>Vie(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=Sie.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const u=D3(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift({name:u,...a?{init:Dre(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${rA(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+Iie))[0],a=r+Rre,s=i.items.map((e=>D3(`${r}_${e.field}`))),u=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},Cie="_toggle",Die={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Cie,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Iie,r=t.name+Cie;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Wie(e)}}, `)+`${r} ? ${n} : null`}},Mie={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=XS(t.clear)?GK(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(Aie.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===D3(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+Iie));r(e,"null"),Die.defined(t)&&(e=n.findIndex((e=>e.name===t.name+Cie)),r(e,"false"))}return n}},Fie={defined:e=>{const t="global"===e.resolve&&e.bind&&jte(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Bte;return t&&!n&&k4.warn(E4.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{const r=a3(n);if(r.select=XS(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Vie(t,r),eS(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=ES(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=Ute(t.bind)?t.bind.legend:"click",o=XS(i)?GK(i,"view"):ES(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Ute(t.bind)&&t.bind.legend,o=e=>t=>{const n=a3(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${D3(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+Iie)),a=r+Rre,s=i.items.filter((e=>e.hasLegend)).map((e=>D3(`${r}_${D3(e.field)}_legend`))),u=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const l=n.find((e=>e.name===r+Cie)),c=Ute(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:c}):l.on[0].events=c),n}};const Nie="_translate_anchor",Oie="_translate_delta",$ie={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Bre.defined(t),o=r+Nie,{x:a,y:s}=t.project.hasChannel;let u=GK(t.translate,"scope");return i||(u=u.map((e=>(e.between[0].markname=r+Ure,e)))),n.push({name:o,value:{},on:[{events:u.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?Ire(e,Q3):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?Ire(e,J3):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Oie,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Tie(e,t,a,"width",n),void 0!==s&&Tie(e,t,s,"height",n),n}};function Tie(e,t,n,r,i){const o=t.name,a=o+Nie,s=o+Oie,u=n.channel,l=Bre.defined(t),c=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=d.get("reverse"),m=`${a}.extent_${u}`,g=`${l?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${l?u===Q3?p?"":"-":p?"-":"":""}${s}.${u} / ${l?`${f}`:`span(${m})`}`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:l?g:`clampRange(${g}, 0, ${f})`})}const zie="_zoom_anchor",Rie="_zoom_delta",Pie={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Bre.defined(t),o=r+Rie,{x:a,y:s}=t.project.hasChannel,u=rA(e.scaleName(Q3)),l=rA(e.scaleName(J3));let c=GK(t.zoom,"scope");return i||(c=c.map((e=>(e.markname=r+Ure,e)))),n.push({name:r+zie,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Lie(e,t,a,"width",n),void 0!==s&&Lie(e,t,s,"height",n),n}};function Lie(e,t,n,r,i){const o=t.name,a=n.channel,s=Bre.defined(t),u=i.filter((e=>e.name===n.signals[s?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c.get("type"),d=s?Ire(e,a):u.name,h=o+Rie,p=`${s?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${o}_zoom_anchor.${a}`}, ${h}${s?"pow"===f?`, ${c.get("exponent")??1}`:"symlog"===f?`, ${c.get("constant")??1}`:"":""})`;u.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${l})`})}const Bie="_store",Iie="_tuple",jie="_modify",Uie="vlSelectionResolve",qie=[Vre,Wre,Lre,Die,Aie,Bre,Fie,Mie,$ie,Pie,Sie];function Wie(e,{escape:t}={escape:!0}){let n=t?rA(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!Cse(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of T5)e[t]&&(n+=` + '__facet_${t}_' + (facet[${rA(r.vgField(t))}])`)}return n}function Hie(e){return S3(e.component.selection??{}).reduce(((e,t)=>e||t.project.items.some((e=>e.field===Bte))),!1)}function Vie(e,t){!XS(t.select)&&t.select.on||delete e.events,!XS(t.select)&&t.select.clear||delete e.clear,!XS(t.select)&&t.select.toggle||delete e.toggle}function Gie(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...Gie(e.object)),t.push(...Gie(e.property))),t)}function Yie(e){return"MemberExpression"===e.object.type?Yie(e.object):"datum"===e.object.name}function Xie(e){const t=IQ(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&Yie(e)&&n.add(Gie(e).slice(1).join("."))})),n}class Qie extends $re{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Zie(this.model,this.filter,this),this._dependentFields=Xie(this.expr)}clone(){return new Qie(null,this.model,a3(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Jie(e,t,n,r="datum"){const i=XS(t)?t:t.param,o=D3(i),a=rA(o+Bie);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const u=`vlSelectionTest(${a}, ${r}${"global"===s.resolve?")":`, ${rA(s.resolve)})`}`,l=`length(data(${a}))`;return!1===t.empty?`${l} && ${u}`:`!${l} || ${u}`}function Kie(e,t,n){const r=D3(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,k4.warn((e.length?"Multiple ":"No ")+`matching ${rA(i)} encoding found for selection ${rA(n.param)}. `+`Using "field": ${rA(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&k4.warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rA(a)}.`);return`${o.name}[${rA(z3(a))}]`}function Zie(e,t,n){return M3(t,(t=>XS(t)?t:function(e){return e?.param}(t)?Jie(e,t,n):f9(t)))}function eoe(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function toe(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const e in c){const n=Yee[e],r=c[e];if(n&&n!==t&&"both"!==n)delete c[e];else if(Vee(r)){const{condition:t,...n}=r,i=ES(t),o=Hee[e];if(o){const{vgProp:t,part:r}=o;eoe(c,r,t,[...i.map((e=>{const{test:t,...n}=e;return{test:Zie(null,t),...n}})),n]),delete c[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t,...n}=e;return`${Zie(null,t)} ? ${f4(n)} : `})).join("")+f4(n)};c[e]=t}}else if(t4(r)){const t=Hee[e];if(t){const{vgProp:n,part:i}=t;eoe(c,i,n,r),delete c[e]}}d3(["labelAlign","labelBaseline"],e)&&null===c[e]&&delete c[e]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:e}=c.encode;c.encode={...e?{grid:e}:{}},k3(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:B3(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;c.encode?.labels?.update&&t4(c.encode.labels.update.text)&&(e=R3(s,"datum.label",c.encode.labels.update.text.signal)),eoe(c,"labels","text",{signal:e})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const t of Gee)e.hasAxisPart(t)||delete c.encode[t];k3(c.encode)&&delete c.encode}const t=function(e,t){if(e)return ZE(e)&&!e4(e)?e.map((e=>Oee(e,t))).join(", "):e}(u,n);return{scale:a,orient:o,grid:!1,...t?{title:t}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:B3(l,0)}}}}function noe(e){const{axes:t}=e.component,n=[];for(const r of h6)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function roe(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...E3(i),...E3(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${d4(i[t])} : ${d4(o[t])}`};return s}return t[e]}))])}function ioe(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in L9?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[];const o="x"===e?"axisX":"axisY",a=t4(n)?"axisOrient":`axis${N3(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:roe(s,r,e,n),vgAxisConfig:roe(u,r,e,n),axisConfigStyle:ooe([...u,...s],r)}}function ooe(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=ES(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function aoe(e,t,n,r={}){const i=v4(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const soe={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return q7(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return W7(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!U9(e)&&dee(t)&&!V6(t?.bin)&&!G6(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||coe(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||loe(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&d3(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!eS(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,dee(t)&&!!t.timeUnit,dee(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!U9(t)&&"log"!==t){if(dee(e)){if(V6(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&d3(["month","hours","day","quarter"],t9(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=foe(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return x4(i?[iee(i)]:[],dee(a)?[iee(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(ZE(n))return qee(t,n);if(t4(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&Aee(t))return 1;return 0}(n,t)};function uoe(e){return`(((${e.signal} % 360) + 360) % 360)`}function loe(e,t,n,r){if(void 0!==e){if("x"===n){if(t4(e)){const n=uoe(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${t4(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(t4(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(t4(e)){const n=uoe(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${t4(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(t4(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function coe(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(t4(e)){const n=uoe(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${t4(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(t4(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function foe(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?w4(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class doe extends $re{constructor(e,t){super(e),this.transform=t,this._dependentFields=Xie(this.transform.calculate)}clone(){return new doe(null,a3(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(xee(t)&&eee(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${f9({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new doe(e,{calculate:a,as:hoe(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${c3(this.transform)}`}}function hoe(e,t,n){return See(e,{prefix:t,suffix:"sort_index",...n??{}})}function poe(e,t){return d3(["top","bottom"],t)?"column":d3(["left","right"],t)||"row"===e?"row":"column"}function moe(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return B3((t||{})[e],i[e],n.header[e])}function goe(e,t,n,r){const i={};for(const o of e){const e=moe(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const yoe=["row","column"],voe=["header","footer"];function boe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=goe(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=poe(t,s),l=H3(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...woe(l,u),...xoe(u,l,o),...Doe(r,i,t,Tte,Ote)}}}function xoe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=coe(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function woe(e,t){const n=loe(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function _oe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of voe)if(n[i])for(const o of n[i]){const a=Soe(e,t,i,n,o);null!=a&&r.push(a)}return r}function koe(e,t){const{sort:n}=e;return Z7(n)?{field:See(n,{expr:"datum"}),order:n.order??"ascending"}:ZE(n)?{field:hoe(e,t,{expr:"datum"}),order:"ascending"}:{field:See(e,{expr:"datum"}),order:n??"ascending"}}function Eoe(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=goe(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=I7({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=poe(t,s);return{text:{signal:u?R3(R3(u,"datum.label",l),"datum.value",See(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...woe(o,c),...xoe(c,o,a),...Doe(n,e,t,zte,$te)}}function Soe(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=goe(["labelOrient"],a.header,s,t);("row"===t&&!d3(["top","bottom"],e)||"column"===t&&!d3(["left","right"],e))&&(o=Eoe(a,t,s))}const u=Cse(e)&&!tee(e.facet),l=i.axes,c=l?.length>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:koe(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const Aoe={column:{start:0,end:1},row:{start:1,end:0}};function Coe(e,t){return Aoe[t][e]}function Doe(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=moe(a,t?.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function Moe(e){return[...Foe(e,"width"),...Foe(e,"height"),...Foe(e,"childWidth"),...Foe(e,"childHeight")]}function Foe(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(U9(r)&&n4(o)){const r=e.scaleName(n);if(Cse(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Noe(r,o)]}return[Noe(r,o),{name:i,update:Ooe(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${Jte(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Noe(e,t){return{name:`${e}_step`,value:t.step}}function Ooe(e,t,n){const r=t.get("type"),i=t.get("padding"),o=B3(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${d4(a)}, ${d4(o)}) * ${e}_step`}function $oe(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Toe(e,t){return E3(e).reduce(((n,r)=>{const i=e[r];return{...n,...Gre(t,i,r,(e=>c4(e.value)))}}),{})}function zoe(e,t){if(Mse(t)||Cse(t))return"shared";if(Dse(t))return p6(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Roe(e,t){const n=e.scale[t],r=p6(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&k4.warn(E4.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}const Poe={...Lte,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Loe=E3(Poe);class Boe extends dre{}const Ioe={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&"trail"!==l;let f={...h4({},n,k7),...rie(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=void 0===d?joe(s.opacity)??a.opacity:void 0;if(f.fill)if("fill"===r||c&&r===u5)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=c4(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=c4(m??1));else if(ZE(f.fill)){const e=Uoe(s.fill??s.color)??a.fill??(c&&a.color);e&&(f.fill=c4(e))}if(f.stroke)if("stroke"===r||!c&&r===u5)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(ZE(f.stroke)){const e=B3(Uoe(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(f.stroke={value:e})}if(r!==p5){const e=dee(t)&&Woe(n,i,t);e?f.opacity=[{test:e,...c4(m??1)},c4(u.legend.unselectedOpacity)]:m&&(f.opacity=c4(m))}return f={...f,...e},k3(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?joe(a.opacity)||o.opacity:void 0;u&&(s.opacity=c4(u));return s={...s,...e},k3(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=dee(t)?Woe(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=L7(c)?U7({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return k3(d)?void 0:d},entries:function(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function joe(e){return qoe(e,((e,t)=>Math.max(e,t.value)))}function Uoe(e){return qoe(e,((e,t)=>B3(e,t.value)))}function qoe(e,t){return function(e){const t=e&&e.condition;return!!t&&(ZE(t)||bee(t))}(e)?ES(e.condition).reduce(t,e.value):bee(e)?e.value:void 0}function Woe(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=rA(n.field);return r.map((e=>`(!length(data(${rA(D3(e)+Bie)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const Hoe={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return q7(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return W7(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(W9(i))return"horizontal"===n?"top"===r||"bottom"===r?Yoe(t,"width",a,o):a:Yoe(t,"height",u,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(d3(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=Uoe(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Fee(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(O5(n)&&W9(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(ZE(n))return qee(t,n);if(t4(n))return n;return}(t,e)};function Voe(e){const{legend:t}=e;return B3(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(O5(e)){if(d3(["quarter","month","day"],t))return"symbol";if(W9(n))return"gradient"}return"symbol"}(e))}function Goe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function Yoe(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Xoe(e){const t=Ase(e)?function(e){const{encoding:t}=e,n={};for(const r of[u5,...Pte]){const i=zee(t[r]);i&&e.getScaleComponent(r)&&(r===f5&&dee(i)&&i.type===b9||(n[r]=Joe(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Xoe(r);for(const i of E3(r.component.legends))n.legend[i]=Roe(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Koe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of E3(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function Qoe(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function Joe(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new Boe({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of S3(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&Fie.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const u=void 0!==n?!n:a.disable;if(s.set("disable",u,void 0!==n),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=zee(i[t]),f=dee(c)?t9(c.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",h=Voe({legend:n,channel:t,timeUnit:f,scaleType:l}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:h,direction:Goe({legend:n,legendType:h,orient:d,legendConfig:a})};for(const r of Loe){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in Hoe?Hoe[r](p):n[r];if(void 0!==i){const a=Qoe(i,r,n,e.fieldDef(t));(a||void 0===o.legend[r])&&s.set(r,i,a)}}const m=n?.encoding??{},g=s.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=Toe(m[t]??{},e),r=t in Ioe?Ioe[t](n,v):n;void 0===r||k3(r)||(y[t]={...g?.length&&dee(c)?{name:`${D3(c.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return k3(y)||s.set("encode",y,!!n?.encoding),s}function Koe(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of Loe){const r=yre(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Zoe(e,t);case"title":return _4(e,t);case"type":return i=!0,pre("symbol")}return gre(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&F3(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&F3(e.explicit,["encode","gradient"])),e}function Zoe(e,t){return"circle"===t.value?t:e}function eae(e){const t=e.component.legends,n={};for(const r of E3(t)){const i=e.getScaleComponent(r),o=l3(i.get("domains"));if(n[o])for(const e of n[o]){Koe(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return S3(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(n)return;!1===t.aria&&null==o.aria&&(o.aria=!1);if(o.encode?.symbols){const e=o.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||o.stroke||(e.stroke={value:"transparent"});for(const t of Pte)o[t]&&delete e[t]}o.title||delete o.title;if(void 0!==r){let e=r;o.encode?.labels?.update&&t4(o.encode.labels.update.text)&&(e=R3(r,"datum.label",o.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(o,"labels","text",{signal:e})}return o}(t,e.config))).filter((e=>void 0!==e))}function tae(e){return Mse(e)||Dse(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),nae(e))}(e):nae(e)}function nae(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=t4(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return d3(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const rae=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class iae extends dre{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function oae(e){e.component.projection=Ase(e)?function(e){if(e.hasProjection){const t=K6(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[o5,i5],[s5,a5]])(zee(n[r[0]])||zee(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(f5)&&e.typedFieldDef(f5).type===b9&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(Are.Main));return t}(e):void 0,o=new iae(e.projectionName(!0),{...K6(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)oae(t);const n=p3(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=p3(rae,(n=>!LS(e.explicit,n)&&!LS(t.explicit,n)||!!(LS(e.explicit,n)&&LS(t.explicit,n)&&o3(e.get(n),t.get(n)))));if(o3(e.size,t.size)){if(n)return e;if(o3(e.explicit,{}))return t;if(o3(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new iae(n,t.specifiedProjection,t.size,a3(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function aae(e,t,n,r){if(Wee(t,n)){const i=Ase(e)?e.axis(n)??e.legend(n)??{}:{},o=See(t,{expr:"datum"}),a=See(t,{expr:"datum",binSuffix:"end"});return{formulaAs:See(t,{binSuffix:"range",forAs:!0}),formula:Y7(o,a,i.format,i.formatType,r)}}return{}}function sae(e,t){return`${H6(e)}_${t}`}function uae(e,t,n){const r=sae(Bee(n,void 0)??{},t);return e.getName(`${r}_bins`)}function lae(e,t,n){let r,i;r=function(e){return"as"in e}(e)?XS(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[See(e,{forAs:!0}),See(e,{binSuffix:"end",forAs:!0})];const o={...Bee(t,void 0)},a=sae(o,e.field),{signal:s,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(X6(o.extent)){const e=o.extent;i=Kie(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}}}}class cae extends $re{constructor(e,t){super(e),this.bins=t}clone(){return new cae(null,a3(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(vee(n)&&V6(n.bin)){const{key:i,binComponent:o}=lae(n,n.bin,t);e[i]={...o,...e[i],...aae(t,n,r,t.config)}}return e}),{});return k3(n)?null:new cae(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=lae(t,t.bin,n);return new cae(e,{[r]:i})}merge(e,t){for(const n of E3(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=y3([...this.bins[n].as,...e.bins[n].as],c3)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(S3(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(S3(this.bins).map((e=>e.field)))}hash(){return`Bin ${c3(this.bins)}`}assemble(){return S3(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:z3(e.field),as:n,signal:e.signal,...X6(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:z3(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:See({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function fae(e,t,n,r){const i=Ase(r)?r.encoding[Q5(t)]:void 0;if(vee(n)&&Ase(r)&&uee(n,i,r.markDef,r.config))e.add(See(n,{})),e.add(See(n,{suffix:"end"})),n.bin&&Wee(n,t)&&e.add(See(n,{binSuffix:"range"}));else if(t in M5){const n=function(e){switch(e){case i5:return"y";case a5:return"y2";case o5:return"x";case s5:return"x2"}}(t);e.add(r.getName(n))}else e.add(See(n));return e}class dae extends $re{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new dae(null,new Set(this.dimensions),a3(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([See(e,{forAs:!0})]);else{if(L6(o)||B6(o)){const e=L6(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([See({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([See(e,{forAs:!0})]);F6(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([See({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([See({field:a,aggregate:"max"},{forAs:!0})]))}else fae(i,n,e,t)})),i.size+E3(r).length===0?null:new dae(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};for(const e of t.aggregate){const{op:t,field:n,as:i}=e;t&&("count"===t?(r["*"]??(r["*"]={}),r["*"].count=new Set([i||See(e,{forAs:!0})])):(r[n]??(r[n]={}),r[n][t]=new Set([i||See(e,{forAs:!0})])))}for(const e of t.groupby??[])n.add(e);return n.size+E3(r).length===0?null:new dae(e,n,r)}merge(e){return b3(this.dimensions,e.dimensions)?(function(e,t){for(const n of E3(t)){const r=t[n];for(const t of E3(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(k4.debug("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...E3(this.measures)])}producedFields(){const e=new Set;for(const t of E3(this.measures))for(const n of E3(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${c3({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of E3(this.measures))for(const i of E3(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:z3(r));return{type:"aggregate",groupby:[...this.dimensions].map(z3),ops:e,fields:t,as:n}}}class hae extends $re{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of T5){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[See(n),...V6(r)?[See(n,{binSuffix:"end"})]:[]],...Z7(i)?{sortField:i}:ZE(i)?{sortIndexField:hoe(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of T5)this[t]&&(e+=` ${t.charAt(0)}:${c3(this[t])}`);return e}get fields(){const e=[];for(const t of T5)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of T5)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of h6){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(U9(r)&&n4(i)){const n=ose(ase(this.childModel,t));n?e[t]=n:k4.warn(E4.unknownField(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:u}=this[e];if(s){const{op:e=X7,field:t}=s;i.push(t),o.push(e),a.push(See(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of yoe){for(const t of voe){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:o,column:a}=i;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[Y3,G3])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function pae(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function mae(e){const t={};return r3(e.filter,(e=>{if(l9(e)){let n=null;n9(e)?n=u4(e.equal):i9(e)?n=u4(e.lte):r9(e)?n=u4(e.lt):o9(e)?n=u4(e.gt):a9(e)?n=u4(e.gte):s9(e)?n=e.range[0]:u9(e)&&(n=(e.oneOf??e.in)[0]),n&&(I8(n)?t[e.field]="date":GS(n)?t[e.field]="number":XS(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function gae(e){const t={};function n(e){var n;jee(e)?t[e.field]="date":"quantitative"===e.type&&(XS(n=e.aggregate)&&d3(["min","max"],n))?t[e.field]="number":L3(e.field)>1?e.field in t||(t[e.field]="flatten"):xee(e)&&Z7(e.sort)&&L3(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((Ase(e)||Cse(e))&&e.forEachFieldDef(((t,r)=>{if(vee(t))n(t);else{const i=Y5(r),o=e.fieldDef(i);n({...t,type:o.type})}})),Ase(e)){const{mark:n,markDef:r,encoding:i}=e;if(b7(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];dee(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class yae extends $re{constructor(e,t){super(e),this._parse=t}clone(){return new yae(null,a3(this._parse))}hash(){return`Parse ${c3(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!_re(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of E3(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:k4.warn(E4.differentParse(e,n[e],t.value)))}for(const e of E3(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:k4.warn(E4.differentParse(e,t[e],n)))}const i=new dre(t,n);r.copyAll(i);const o={};for(const e of E3(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===E3(o).length||r.parseNothing?null:new yae(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of E3(this._parse)){const n=this._parse[t];1===L3(t)&&(e[t]=n)}return e}producedFields(){return new Set(E3(this._parse))}dependentFields(){return new Set(E3(this._parse))}assembleTransforms(e=!1){return E3(this._parse).filter((t=>!e||L3(t)>1)).map((e=>{const t=function(e,t){const n=O3(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${pae(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${pae(t.slice(4,t.length))}')`;return k4.warn(E4.unrecognizedParse(t)),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:P3(e)}})).filter((e=>null!==e))}}class vae extends $re{clone(){return new vae(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Bte])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Bte}}}var bae={};class xae extends $re{constructor(e,t){super(e),this.params=t}clone(){return new xae(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${c3(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class wae extends $re{constructor(e,t){super(e),this.params=t}clone(){return new wae(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${c3(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class _ae extends $re{constructor(e){let t;if(super(null),e??(e={name:"source"}),_re(e)||(t=e.format?{...u3(e.format,["parse"])}:{}),xre(e))this._data={values:e.values};else if(bre(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];d3(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else Ere(e)?this._data={values:[{type:"Sphere"}]}:(wre(e)||_re(e))&&(this._data={});this._generator=_re(e),e.name&&(this._name=e.name),t&&!k3(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var kae,Eae=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},Sae=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function Aae(e){return e instanceof _ae||e instanceof xae||e instanceof wae}t(bae,"isDataSourceNode",(function(){return Aae}));class Cae{constructor(){kae.set(this,void 0),Eae(this,kae,!1)}setModified(){Eae(this,kae,!0)}get modifiedFlag(){return Sae(this,kae)}}t(bae,"Optimizer",(function(){return Cae})),kae=new WeakMap;class Dae extends Cae{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}t(bae,"BottomUpOptimizer",(function(){return Dae}));class Mae extends Cae{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}t(bae,"TopDownOptimizer",(function(){return Mae}));class Fae extends bae.TopDownOptimizer{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of E3(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Nae extends bae.TopDownOptimizer{constructor(e){super(),this.requiresSelectionId=e&&Hie(e)}run(e){e instanceof vae&&(this.requiresSelectionId&&(bae.isDataSourceNode(e.parent)||e.parent instanceof dae||e.parent instanceof yae)||(this.setModified(),e.remove()))}}class Oae extends bae.Optimizer{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof zre&&(n=e.producedFields(),x3(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class $ae extends bae.TopDownOptimizer{constructor(){super()}run(e){e instanceof Tre&&!e.isRequired()&&(this.setModified(),e.remove())}}class Tae extends bae.BottomUpOptimizer{run(e){if(!(bae.isDataSourceNode(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof yae)if(e instanceof yae)this.setModified(),e.merge(t);else{if(_3(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class zae extends bae.BottomUpOptimizer{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof yae));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of E3(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!k3(r)){this.setModified();const n=new yae(e,r);for(const i of t){if(i instanceof yae)for(const e of E3(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof yae&&0===E3(i.parse).length&&i.remove()}}}}}class Rae extends bae.BottomUpOptimizer{run(e){e instanceof Tre||e.numChildren()>0||e instanceof hae||e instanceof _ae||(this.setModified(),e.remove())}}class Pae extends bae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof zre)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class Lae extends bae.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof dae)),n={};for(const e of t){const t=c3(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of E3(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Bae extends bae.BottomUpOptimizer{constructor(e){super(),this.model=e}run(e){const t=!(bae.isDataSourceNode(e)||e instanceof Qie||e instanceof yae||e instanceof vae),n=[],r=[];for(const i of e.children)i instanceof cae&&(t&&!_3(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof cae?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class Iae extends bae.BottomUpOptimizer{run(e){const t=[...e.children];if(!h3(t,(e=>e instanceof Tre))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof Tre){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof Tre))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class jae extends $re{constructor(e,t){super(e),this.transform=t}clone(){return new jae(null,a3(this.transform))}addDimensions(e){this.transform.groupby=y3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??See(e)}hash(){return`JoinAggregateTransform ${c3(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class Uae extends $re{constructor(e,t){super(e),this._stack=t}clone(){return new Uae(null,a3(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(B3(e.order,"ascending"));const u={field:a,order:s};let l;return l=function(e){return ZE(e)&&e.every((e=>XS(e)))&&e.length>1}(i)?i:XS(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new Uae(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:l})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){u=Tee(r[i])}const l=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=See(t.fieldDef);return n&&e.push(n),e}),[])}(t),c=t.encoding.order;let f;return f=ZE(c)||dee(c)?b4(c):l.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new Uae(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:l,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${c3(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[See(e,{binSuffix:"mid"})]:[See(e,{}),See(e,{binSuffix:"end"})]:[See(e)]:n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+See(n,{expr:"datum"})+`+${1-o}*`+See(n,{expr:"datum",binSuffix:"end"}),as:See(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:See(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:u,offset:a}),e}}class qae extends $re{constructor(e,t){super(e),this.transform=t}clone(){return new qae(null,a3(this.transform))}addDimensions(e){this.transform.groupby=y3(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??See(e)}hash(){return`WindowTransform ${c3(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>I6(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)a.push(e.field),s.push(e.order??"ascending");const u={field:a,order:s},l=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:u,...void 0!==l?{ignorePeers:l}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Wae(e){if(e instanceof hae)if(1!==e.numChildren()||e.children[0]instanceof Tre){const n=e.model.component.data.main;Hae(n);const r=(t=e,function e(n){if(!(n instanceof hae)){const r=n.clone();if(r instanceof Tre){const e=Vae+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof dae||r instanceof Uae||r instanceof qae||r instanceof jae)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof dae||t instanceof Uae||t instanceof qae||t instanceof jae)&&t.addDimensions(e.fields),t.swapWithParent(),Wae(e)}else e.children.map(Wae);var t}function Hae(e){if(e instanceof Tre&&e.type===Are.Main&&1===e.numChildren()){const t=e.children[0];t instanceof hae||(t.swapWithParent(),Hae(e))}}const Vae="scale_";function Gae(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Gae(t.children))return!1}return!0}function Yae(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Xae(e,t,n){let r=e.sources,i=!1;return i=Yae(new $ae,r)||i,i=Yae(new Nae(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=Yae(new Rae,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=Yae(new Tae,r)||i,i=Yae(new Bae(t),r)||i,i=Yae(new Oae,r)||i,i=Yae(new zae,r)||i,i=Yae(new Lae,r)||i,i=Yae(new Pae,r)||i,i=Yae(new Fae,r)||i,i=Yae(new Iae,r)||i),e.sources=r,i}class Qae{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new Qae((()=>e(t)))}}function Jae(e){Ase(e)?function(e){const t=e.component.scales;for(const n of E3(t)){const r=Kae(e,n);if(t[n].setWithExplicit("domains",r),nse(e,n),e.component.data.isFaceted){let t=e;for(;!Cse(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)r4(e)&&(e.data=Vae+e.data.replace(Vae,""))}}}(e):function(e){for(const t of e.children)Jae(t);const t=e.component.scales;for(const n of E3(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):yre(r,e.getWithExplicit("domains"),"domains","scale",ise);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&k4.warn(E4.NEEDS_SAME_SELECTION),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Kae(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=rse(t,n);if(!e)return void k4.warn(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=rse(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&zee(r.x2)?zee(r.x)?yre(ese(n,i,e,"x"),ese(n,i,e,"x2"),"domain","scale",ise):ese(n,i,e,"x2"):"y"===t&&zee(r.y2)?zee(r.y)?yre(ese(n,i,e,"y"),ese(n,i,e,"y2"),"domain","scale",ise):ese(n,i,e,"y2"):ese(n,i,e,t)}function Zae(e,t,n){const r=t9(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${Uee(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function ese(e,t,n,r){const{encoding:i}=n,o=zee(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return e&&e.unionWith}(t)){const i=ese(e,void 0,n,r),o=Zae(t.unionWith,a,s);return hre([...i.value,...o])}if(t4(t))return hre([t]);if(t&&"unaggregated"!==t&&!V9(t))return hre(Zae(t,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return pre([[0,1]]);const e=n.requestDataName(Are.Main);return pre([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const l=F6(r)&&dee(o)?function(e,t,n){if(!U9(n))return;const r=e.fieldDef(t),i=r.sort;if(eee(i))return{op:"min",field:hoe(r,t),order:"ascending"};const{stack:o}=e,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(Z7(i)){return tse(i,o&&!d3(a,i.field))}if(K7(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:u}=r,l=o&&!d3(a,u);if(L6(s)||B6(s))return tse({field:See(r),order:n},l);if(I6(s)||!s)return tse({op:s,field:u,order:n},l)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(d3(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(pee(o)){return pre(Zae([o.datum],a,s))}const c=o;if("unaggregated"===t){const e=n.requestDataName(Are.Main),{field:t}=o;return pre([{data:e,field:See({field:t,aggregate:"min"})},{data:e,field:See({field:t,aggregate:"max"})}])}if(V6(c.bin)){if(U9(e))return pre("bin-ordinal"===e?[]:[{data:C3(l)?n.requestDataName(Are.Main):n.requestDataName(Are.Raw),field:n.vgField(r,Wee(c,r)?{binSuffix:"range"}:{}),sort:!0!==l&&eS(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=c;if(V6(e)){const t=uae(n,c.field,e);return pre([new Qae((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return pre([{data:n.requestDataName(Are.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&d3(["time","utc"],e)&&uee(c,Ase(n)?n.encoding[Q5(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(Are.Main);return pre([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return pre(l?[{data:C3(l)?n.requestDataName(Are.Main):n.requestDataName(Are.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(Are.Main),field:n.vgField(r)}])}function tse(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":X7),...r?{field:z3(r)}:{},...i?{order:i}:{}}}function nse(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=V9(r)&&r,a=Y6(i)&&X6(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function rse(e,t){const{aggregate:n,type:r}=e;return n?XS(n)&&!W6[n]?{valid:!1,reason:E4.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:E4.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:E4.unaggregateDomainHasNoEffectForRawField(e)}}function ise(e,t,n,r){return e.explicit&&t.explicit&&k4.warn(E4.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function ose(e){if(r4(e)&&XS(e.field))return e.field;if(function(e){return!ZE(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(r4(n)&&XS(n.field))if(t){if(t!==n.field)return k4.warn(E4.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=n.field;return k4.warn(E4.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!ZE(e)&&"fields"in e&&"data"in e}(e)){k4.warn(E4.FACETED_INDEPENDENT_SAME_SOURCE);const t=e.fields[0];return XS(t)?t:void 0}}function ase(e,t){return function(e){const t=y3(e.map((e=>{if(r4(e)){const{sort:t,...n}=e;return n}return e})),c3),n=y3(e.map((e=>{if(r4(e)){const t=e.sort;return void 0===t||C3(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),c3);if(0===t.length)return;if(1===t.length){const t=e[0];if(r4(t)&&n.length>0){let e=n[0];if(n.length>1)k4.warn(E4.MORE_THAN_ONE_SORT),e=!0;else if(eS(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=y3(n.map((e=>C3(e)||!("op"in e)||XS(e.op)&&e.op in P6?e:(k4.warn(E4.domainSortDropped(e)),!0))),c3);let i;1===r.length?i=r[0]:r.length>1&&(k4.warn(E4.MORE_THAN_ONE_SORT),i=!0);const o=y3(e.map((e=>r4(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0])return{data:o[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}};return{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map((t=>(r4(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function sse(e){return Mse(e)||Dse(e)?e.children.reduce(((e,t)=>e.concat(sse(t))),use(e)):use(e)}function use(e){return E3(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=function(e,t,n,r){if(p6(n)){if(n4(e))return{step:{signal:`${t}_step`}}}else if(eS(e)&&r4(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),h=ase(e,n),p=s?function(e,t,n,r){const i=Kie(e,t.param,t);return{signal:q9(n.get("type"))&&ZE(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:o,type:a,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==c?{reverse:c}:{},...f}),t}),[])}class lse extends dre{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||h3(this.get("domains"),(e=>ZE(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const cse=["range","scheme"];function fse(e){return"x"===e?"width":"y"===e?"height":void 0}function dse(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=fse(t),a=e.getName(o);if(eS(r)&&r.binned&&void 0!==r.step)return new Qae((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(V6(r)){const t=uae(e,i,r);return new Qae((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function hse(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of cse)if(void 0!==n[r]){const o=n7(i,r),a=r7(e,r);if(o)if(a)k4.warn(a);else switch(r){case"range":{const r=n.range;if(ZE(r)){if(p6(e))return hre(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return Qae.fromName(r,n)}return e})))}else if(eS(r))return hre({data:t.requestDataName(Are.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return hre(r)}case"scheme":return hre(pse(n[r]))}else k4.warn(E4.scalePropertyNotWorkWithScaleType(i,r,e))}if(e===Q3||e===J3){const t=e===Q3?"width":"height",n=r[t];if(Yte(n)){if(U9(i))return hre({step:n.step});k4.warn(E4.stepDropped(t))}}const{rangeMin:o,rangeMax:a}=n,s=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=zee(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Q3:case J3:{if(d3(["point","band"],u))if(e!==Q3||n.width){if(e===J3&&!n.height){const e=Zte(r.view,"height");if(Yte(e))return e}}else{const e=Zte(r.view,"width");if(Yte(e))return e}const i=fse(e),o=t.getName(i);return e===J3&&q9(u)?[Qae.fromName(a,o),0]:[0,Qae.fromName(a,o)]}case d5:{const o=mse(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:dse(n,"x"),y:dse(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=yse(t,i,r.view);return GS(e)?e-1:new Qae((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=yse(t,i,r.view);return GS(e)?Math.pow(gse*e,2):new Qae((()=>`pow(0.95 * ${e.signal}, 2)`))}}throw new Error(E4.incompatibleChannel("size",e))}(i,n,t,r);return H9(u)?function(e,t,n){const r=()=>{const r=d4(t),i=d4(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return t4(t)?new Qae(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&ZE(n)?n.length+1:(k4.warn(E4.domainRequiredForThresholdScale(r)),3)}}(u,r,l,e)):[o,a]}case n5:return[0,2*Math.PI];case h5:return[0,360];case e5:return[0,new Qae((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case y5:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case v5:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case f5:return"symbol";case u5:case l5:case c5:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case p5:case m5:case g5:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t);return(void 0!==o||void 0!==a)&&n7(i,"rangeMin")&&ZE(s)&&2===s.length?hre([o??s[0],a??s[1]]):pre(s)}function pse(e){return function(e){return!XS(e)&&!!e.name}(e)?{scheme:e.name,...u3(e,["name"])}:{scheme:e}}function mse(e,t,n){if(t)return t4(t)?{signal:`${t.signal} ? 0 : ${mse(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(E4.incompatibleChannel("size",e))}const gse=.95;function yse(e,t,n){const r=Yte(e.width)?e.width.step:Kte(n,"width"),i=Yte(e.height)?e.height.step:Kte(n,"height");return t.x||t.y?new Qae((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function vse(e,t){Ase(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of E3(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=zee(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=n7(h,t),y=r7(s,t);if(void 0!==d&&(g?y&&k4.warn(y):k4.warn(E4.scalePropertyNotWorkWithScaleType(h,t,s))),g&&void 0===y)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":I8(u[t])||"temporal"===n||e?l.set(t,{signal:Uee(u[t],{type:n,timeUnit:e})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const n=t in bse?bse[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}(e,t):wse(e,t)}const bse={bins:({model:e,fieldOrDatumDef:t})=>dee(t)?function(e,t){const n=t.bin;if(V6(n)){const r=uae(e,t.field,n);return new Qae((()=>e.getSignalName(r)))}if(G6(n)&&Y6(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(d3([u5,l5,c5],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:r})=>function(e,t,n,r){if(Tee(r)?.bin||ZE(n)||d3([S9,A9],e))return;return t in d6||void 0}(e,t,n,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(e in d6){if(W9(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!dee(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===F9)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>function(e,t,n,r){if(void 0!==e)return;if(t in d6){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return B3(e,"bar"===n?t:i)}return}(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>function(e,t,n,r,i,o){if(void 0!==e)return;if(t in d6&&n===N9){const{bandPaddingOuter:e}=o;return B3(e,t4(i)?{signal:`${i.signal}/2`}:i/2)}return}(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return q9(e)&&"descending"===t?t4(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(q9(e)&&"descending"===t)return!0;return}(t,dee(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&q9(i)){if(ZE(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!H9(i))return!0;if((!dee(t)||!t.bin)&&d3([...h6,...g6],e)){const{orient:t,type:n}=r;return!d3(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function xse(e){Ase(e)?function(e){const t=e.component.scales;for(const n of M6){const r=t[n];if(!r)continue;const i=hse(n,e);r.setWithExplicit("range",i)}}(e):wse(e,"range")}function wse(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?xse(n):vse(n,t);for(const r of E3(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=yre(i,e.getWithExplicit(t),t,"scale",mre(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}n[r].setWithExplicit(t,i)}}function _se(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":if(O5(e)||"discrete"===z6(e))return"shape"===e&&"ordinal"===t.type&&k4.warn(E4.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in d6){if(d3(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&e in m6)return"band";return A7(n[J5(e)])||wee(t)&&t.axis?.tickBand?"band":"point";case"temporal":return O5(e)?"time":"discrete"===z6(e)?(k4.warn(E4.discreteChannelCannotEncode(e,"temporal")),"ordinal"):dee(t)&&t.timeUnit&&t9(t.timeUnit).utc?"utc":"time";case"quantitative":return O5(e)?dee(t)&&V6(t.bin)?"bin-ordinal":"linear":"discrete"===z6(e)?(k4.warn(E4.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(E4.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return F6(t)?void 0!==o?function(e,t){if(!F6(e))return!1;switch(e){case Q3:case J3:case n5:case e5:return W9(t)||d3(["band","point"],t);case d5:case y5:case p5:case m5:case g5:case h5:return W9(t)||H9(t)||d3(["band","point","ordinal"],t);case u5:case l5:case c5:return"band"!==t;case v5:case f5:return"ordinal"===t||H9(t)}}(t,o)?dee(n)&&(a=o,s=n.type,!(d3([g9,v9],s)?void 0===a||U9(a):s===y9?d3([S9,A9,void 0],a):s!==m9||d3([w9,_9,k9,E9,C9,D9,M9,x9,void 0],a)))?(k4.warn(E4.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(k4.warn(E4.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null;var a,s}function kse(e){Ase(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e;return M6.reduce(((i,o)=>{const a=zee(t[o]);if(a&&n===v7&&o===f5&&a.type===b9)return i;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const t=_se(s,o,a,r);i[o]=new lse(e.scaleName(`${o}`,!0),{value:t,explicit:s.type===t})}return i}),{})}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){kse(n);for(const o of E3(n.component.scales))if((t=i.scale)[o]??(t[o]=zoe(o,e)),"shared"===i.scale[o]){const e=r[o],t=n.component.scales[o].getWithExplicit("type");e?$9(e.value,t.value)?r[o]=yre(e,t,"type","scale",Ese):(i.scale[o]="independent",delete r[o]):r[o]=t}}for(const t of E3(r)){const i=e.scaleName(t,!0),o=r[t];n[t]=new lse(i,o);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const Ese=mre(((e,t)=>z9(e)-z9(t)));class Sse{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function Ase(e){return"unit"===e?.type}function Cse(e){return"facet"===e?.type}function Dse(e){return"concat"===e?.type}function Mse(e){return"layer"===e?.type}class Fse{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=K6(a),this.name=e.name??r,this.title=e4(e.title)?{text:e.title}:e.title?K6(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new Sse,this.projectionNameMap=n?n.projectionNameMap:new Sse,this.signalNameMap=n?n.signalNameMap:new Sse,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map((e=>zne(e)?{filter:i3(e.filter,h9)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(ree(e)&&!tee(e.facet)||Hte(e))&&(i.columns=a),Vte(e)&&(i.columns=1);for(const t of Qte)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=GS(n)?n:{row:n.row??o,column:n.column??o}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:ree(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new dre,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?a3(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){kse(e),Jae(e);for(const t of t7)vse(e,t);t||xse(e)}(this)}parseProjection(){oae(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Xoe(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view?.style??"cell"}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of E3(n)){const t=n[e];void 0!==t&&(r[e]=c4(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=c4(this.description)),"unit"!==this.type&&"layer"!==this.type)?k3(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of T5){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:o}=goe(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=poe(r,o),s=Coe(e,a);void 0!==s&&(n[a]=s)}}return k3(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of T5)e[n].title&&t.push(boe(this,n));for(const e of yoe)t=t.concat(_oe(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>toe(e,"grid",t))),...r.map((e=>toe(e,"grid",t))),...n.map((e=>toe(e,"main",t))),...r.map((e=>toe(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return eae(this)}assembleProjections(){return tae(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...Z6(this.config.title).nonMark,...t,...e?{encode:{update:e}}:{}};if(n.text)return d3(["unit","layer"],this.type)?d3(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),k3(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Cse(this.parent)?sse(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return D3((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(Are[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(Cse(this.parent)){const t=y6($oe(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(U9(e)&&n4(r)){const e=n.get("name"),r=ose(ase(this,t));if(r){return{signal:Ooe(e,n,See({aggregate:"distinct",field:r},{expr:"datum"}))}}return k4.warn(E4.unknownField(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):H5(e)&&F6(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(E4.selectionNotFound(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some?.((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some?.((e=>e.hasOrientSignalRef()))}}class Nse extends Fse{vgField(e,t={}){const n=this.fieldDef(e);if(n)return See(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?E3(e).reduce(((n,i)=>{const o=e[i];return ZE(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=Tee(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){ate(this.getMapping(),((t,n)=>{const r=Tee(t);r&&e(r,n)}),t)}}class Ose extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"]}clone(){return new Ose(null,a3(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${c3(this.transform)}`}assemble(){const{density:e,...t}=this.transform;return{type:"kde",field:e,...t}}}class $se extends $re{constructor(e,t){super(e),this.filter=t}clone(){return new $se(null,{...this.filter})}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==m4("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=F6(i)&&t.getScaleComponent(i);if(o){q9(o.get("type"))&&"count"!==n.aggregate&&!b7(r)&&(e[n.field]=n)}return e}),{});return E3(o).length?new $se(e,o):null}dependentFields(){return new Set(E3(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${c3(this.filter)}`}assemble(){const e=E3(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=See(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class Tse extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}clone(){return new Tse(this.parent,a3(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${c3(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class zse extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}clone(){return new zse(null,a3(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${c3(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Rse extends $re{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Rse(null,a3(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[o5,i5],[s5,a5]]){const i=r.map((e=>{const n=zee(t.encoding[e]);return dee(n)?n.field:pee(n)?{expr:`${n.datum}`}:bee(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Rse(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(f5)){const r=t.typedFieldDef(f5);r.type===b9&&(e=new Rse(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){const e=(this.fields??[]).filter(XS);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${c3(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Pse extends $re{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new Pse(null,this.projection,a3(this.fields),a3(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[o5,i5],[s5,a5]]){const r=n.map((e=>{const n=zee(t.encoding[e]);return dee(n)?n.field:pee(n)?{expr:`${n.datum}`}:bee(n)?{expr:`${n.value}`}:void 0})),i=n[0]===s5?"2":"";(r[0]||r[1])&&(e=new Pse(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(XS))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${c3(this.fields)} ${c3(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Lse extends $re{constructor(e,t){super(e),this.transform=t}clone(){return new Lse(null,a3(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new Lse(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(dee(r)&&dee(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:l,keyvals:c}=o.impute,f=ste(t.mark,n);return new Lse(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==u?{value:u}:{},...l?{frame:l}:{},...void 0!==c?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${c3(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:(u=n,void 0!==u?.stop?this.processSequence(n):n)}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};var u;if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Bse extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}clone(){return new Bse(null,a3(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${c3(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class Ise extends $re{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new Ise(null,a3(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=eue(o.data,i);e||(e=new _ae(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new Tre(e,n,Are.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(D3(e),e)}catch(t){throw new Error(E4.cannotLookupVariableParameter(e))}if(a=r.materialized,!a)throw new Error(E4.noSameUnitLookup(e))}return new Ise(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ES(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${c3({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:ES(this.transform.as)}:{}};else{let t=this.transform.as;XS(t)||(k4.warn(E4.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class jse extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}clone(){return new jse(null,a3(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${c3(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class Use extends $re{constructor(e,t){super(e),this.transform=t,this.transform=a3(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}clone(){return new Use(null,a3(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${c3(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class qse extends $re{constructor(e,t){super(e),this.transform=t}clone(){return new qse(null,a3(this.transform))}addDimensions(e){this.transform.groupby=y3((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${c3(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Wse extends $re{constructor(e,t){super(e),this.transform=t}clone(){return new Wse(null,a3(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${c3(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Hse(e){let t=0;return function n(r,i){if(r instanceof _ae&&!r.isGenerator&&!bre(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof yae&&(r.parent instanceof _ae&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof hae)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof xae||r instanceof wae||r instanceof $se||r instanceof Qie||r instanceof doe||r instanceof Pse||r instanceof dae||r instanceof Ise||r instanceof qae||r instanceof jae||r instanceof zse||r instanceof Tse||r instanceof Ose||r instanceof Bse||r instanceof jse||r instanceof Use||r instanceof vae||r instanceof Wse||r instanceof qse)&&i.transform.push(r.assemble()),(r instanceof cae||r instanceof zre||r instanceof Lse||r instanceof Uae||r instanceof Rse)&&i.transform.push(...r.assemble()),r instanceof Tre)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Tre)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Tre&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Vse(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=moe("title",null,r,t);let u=Fee(a,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(u=ZE(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=moe("labelOrient",a.header,r,t),c=null!==a.header&&B3(a.header?.labels,r.header.labels,!0),f=d3(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[Gse(e,t,c)]}}}function Gse(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function Yse(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Roe(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of n.component.axes[t]){const t="top"===(r=i.get("orient"))||"left"===r||t4(r)?"header":"footer";a[t]??(a[t]=[Gse(e,o,!1)]);const n=toe(i,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),i.mainExtracted=!0}}}var r}function Xse(e){for(const t of e.children)t.parseLayoutSize()}function Qse(e,t){const n=$oe(t),r=y6(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const t of e.children){const o=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??zoe(r,e);if("independent"===s&&"step"===o.value){a=void 0;break}if(a){if("independent"===s&&a.value!==o.value){a=void 0;break}a=yre(a,o,n,"")}else a=o}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Jse(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(U9(e)){const e=Zte(r.view,t);return n4(n)||Yte(e)?"step":e}return Jte(r.view,t)}if(e.hasProjection||"arc"===e.mark)return Jte(r.view,t);{const e=Zte(r.view,t);return Yte(e)?e.step:e}}function Kse(e,t,n){return See(t,{suffix:`by_${See(e)}`,...n??{}})}class Zse extends Nse{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=Sue(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!tee(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=E3(e),n={};for(const r of t){if(![G3,Y3].includes(r)){k4.warn(E4.incompatibleChannel(r,"facet"));break}const t=e[r];if(void 0===t.field){k4.warn(E4.emptyFieldDef(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=Lee(e,t);return n.header?n.header=K6(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=tue(this),this.child.parseData()}parseLayoutSize(){Xse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of T5)Vse(e,t);Yse(e,"x"),Yse(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of T5)for(const n of voe){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=moe("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=poe(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Zse)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof Zse?{...this.channelHasField("column")?{encode:{update:{columns:{field:See(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Zse){if(this.child.channelHasField("column")){const r=See(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of h6){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(U9(o)&&n4(a)){const i=ose(ase(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):k4.warn(E4.unknownField(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of T5){const t=this.facet[e];if(t){s.push(See(t));const{bin:u,sort:l}=t;if(V6(u)&&s.push(See(t,{binSuffix:"end"})),Z7(l)){const{field:e,op:s=X7}=l,u=Kse(t,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(e),o.push(s),a.push(u))}else if(ZE(l)){const n=hoe(t,e);i.push(n),o.push("max"),a.push(n)}}}const u=!!n&&!!r;return{name:e,data:t,groupby:s,...u||i.length>0?{aggregate:{...u?{cross:u}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?Z7(n.sort)?[Kse(n,n.sort,{expr:"datum"})]:ZE(n.sort)?[hoe(n,e,{expr:"datum"})]:[See(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(Z7(e)?e.order:!ZE(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return Eoe(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of yoe)if(e[r]){const i=moe("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return Eoe(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=Hse(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:T5.map((e=>this.facetSortFields(e))).flat(),order:T5.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(Fre(this,[]))}]}getMapping(){return this.facet}}function eue(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const o=e.format?.feature;if((o||i)&&o!==i)continue;const a=t.format?.mesh;if(!r&&!a||r===a)if(xre(e)&&xre(t)){if(o3(e.values,t.values))return n}else if(bre(e)&&bre(t)){if(e.url===t.url)return n}else if(wre(e)&&e.name===n.dataName)return n}return null}function tue(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new _ae({values:[]});return t.push(e),e}const n=eue(e.data,t);if(n)return _re(e.data)||(n.data.format=m3({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new _ae(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.parent?e.parent.component.data.ancestorParse.clone():new vre,o=e.data;_re(o)?(kre(o)?t=new wae(t,o.sequence):Sre(o)&&(t=new xae(t,o.graticule)),i.parseNothing=!0):null===o?.format?.parse&&(i.parseNothing=!0),t=yae.makeExplicit(t,e,i)??t,t=new vae(t);const a=e.parent&&Mse(e.parent);(Ase(e)||Cse(e))&&a&&(t=cae.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(Vne(i))a=e=new doe(e,i),o="derived";else if(zne(i)){const r=mae(i);a=e=yae.makeWithAncestors(e,{},r,n)??e,e=new Qie(e,t,i.filter)}else if(Gne(i))a=e=cae.makeFromTransform(e,i,t),o="number";else if(Xne(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new yae(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=zre.makeFromTransform(e,i);else if(Qne(i))a=e=dae.makeFromTransform(e,i),o="number",Hie(t)&&(e=new vae(e));else if(Rne(i))a=e=Ise.make(e,t,i,r++),o="derived";else if(qne(i))a=e=new qae(e,i),o="number";else if(Wne(i))a=e=new jae(e,i),o="number";else if(Jne(i))a=e=Uae.makeFromTransform(e,i),o="derived";else if(Kne(i))a=e=new zse(e,i),o="derived";else if(Hne(i))a=e=new Tse(e,i),o="derived";else if(Pne(i))a=e=new qse(e,i),o="derived";else if(Une(i))e=new Wse(e,i);else if(Yne(i))a=e=Lse.makeFromTransform(e,i),o="derived";else if(Lne(i))a=e=new Ose(e,i),o="derived";else if(Bne(i))a=e=new jse(e,i),o="derived";else if(Ine(i))a=e=new Use(e,i),o="derived";else{if(!jne(i)){k4.warn(E4.invalidTransformIgnored(i));continue}a=e=new Bse(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(t,e,i));const s=function(e){const t={};if(Ase(e)&&e.component.selection)for(const n of E3(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&L3(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=gae(e);t=yae.makeWithAncestors(t,{},{...s,...u},i)??t,Ase(e)&&(t=Rse.parseAll(t,e),t=Pse.parseAll(t,e)),(Ase(e)||Cse(e))&&(a||(t=cae.makeFromEncoding(t,e)??t),t=zre.makeFromEncoding(t,e)??t,t=doe.parseAllForSortIndex(t,e));const l=e.getDataName(Are.Raw),c=new Tre(t,l,Are.Raw,r);if(n[l]=c,t=c,Ase(e)){const n=dae.makeFromEncoding(t,e);n&&(t=n,Hie(e)&&(t=new vae(t))),t=Lse.makeFromEncoding(t,e)??t,t=Uae.makeFromEncoding(t,e)??t}Ase(e)&&(t=$se.make(t,e)??t);const f=e.getDataName(Are.Main),d=new Tre(t,f,Are.Main,r);n[f]=d,t=d,Ase(e)&&function(e,t){for(const[n,r]of A3(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Tre(new Qie(t,e,{param:n}),i,Are.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let h=null;if(Cse(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(Z7(i.sort)){const{field:n,op:r=X7}=i.sort;e=t=new jae(e,{joinaggregate:[{op:r,field:n,as:Kse(i,i.sort,{forAs:!0})}],groupby:[See(i)]})}return t}return null}(t,e.facet)??t,h=new hae(t,e,r,d.getSource()),n[r]=h}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:h,ancestorParse:i}}class nue extends Fse{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||k4.warn(E4.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map(((e,t)=>Sue(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=tue(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of E3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Vte(e)?e.vconcat:Gte(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){Xse(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";Qse(e,t),Qse(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=Moe(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const rue={disable:1,gridScale:1,scale:1,...Xee,labelExpr:1,encode:1},iue=E3(rue);class oue extends dre{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new oue(a3(this.explicit),a3(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return t4(this.explicit.orient)}}const aue={bottom:"top",top:"bottom",left:"right",right:"left"};function sue(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=uue(n,i)}}}return e}function uue(e,t){for(const n of iue){const r=yre(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return _4(e,t);case"gridScale":return{explicit:e.explicit,value:B3(e.value,t.value)}}return gre(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function lue(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(t4(n.labelAngle)?n.labelAngle:H3(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===foe(r,i))return!0}return e===n[t]}const cue=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function fue(e,t){let n=t.axis(e);const r=new oue,i=zee(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a["x"===e?"axisX":"axisY"]?.orient||a.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),u=t.getScaleComponent(e).get("type"),l=ioe(e,u,s,t.config),c=void 0!==n?!n:aoe("disable",a.style,n?.style,l).configValue;if(r.set("disable",c,void 0!==n),c)return r;n=n||{};const f=function(e,t,n,r,i){const o=t?.labelAngle;if(void 0!==o)return t4(o)?o:H3(o);{const{configValue:o}=aoe("labelAngle",r,t?.style,i);return void 0!==o?H3(o):n!==Q3||!d3([v9,g9],e.type)||dee(e)&&e.timeUnit?void 0:270}}(i,n,e,a.style,l),d={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,mark:o,config:a};for(const i of iue){const o=i in soe?soe[i](d):Jee(i)?n[i]:void 0,s=void 0!==o,u=lue(o,i,n,t,e);if(s&&u)r.set(i,o,u);else{const{configValue:e,configFrom:t}=Jee(i)&&"values"!==i?aoe(i,a.style,n.style,l):{},c=void 0!==e;s&&!c?r.set(i,o,u):("vgAxisConfig"!==t||cue.has(i)&&c||Vee(e)||t4(e))&&r.set(i,e,!1)}}const h=n.encoding??{},p=Gee.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const o=Toe(h[i]??{},t),a="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,o=zee(r[t])??zee(r[Q5(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;return L7(u)?{text:U7({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n}:n}(t,e,o):o;return void 0===a||k3(a)||(n[i]={update:a}),n}),{});return k3(p)||r.set("encode",p,!!n.encoding||void 0!==n.labelAngle),r}function due(e,t,n){const r=K6(e),i=m4("orient",r,n);if(r.orient=function(e,t,n){switch(e){case c7:case g7:case y7:case h7:case f7:case u7:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case s7:if(dee(r)&&(G6(r.bin)||dee(i)&&i.aggregate&&!r.aggregate))return"vertical";if(dee(i)&&(G6(i.bin)||dee(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(dee(r)&&r.type===m9&&!V6(r.bin)||gee(r)))return"horizontal";if(!a&&(dee(i)&&i.type===m9&&!V6(i.bin)||gee(i)))return"vertical"}case d7:if(o&&(!dee(r)||!G6(r.bin))&&a&&(!dee(i)||!G6(i.bin)))return;case a7:if(a)return dee(i)&&G6(i.bin)?"horizontal":"vertical";if(o)return dee(r)&&G6(r.bin)?"vertical":"horizontal";if(e===d7){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case l7:case p7:{const t=mee(r),o=mee(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===y9,a=n.type===y9;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&k4.warn(E4.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const e=m4("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:C7[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===m4("opacity",r,n)&&(r.opacity=function(e,t){if(d3([c7,p7,g7,y7],e)&&!nte(t))return.7;return}(r.type,t));return void 0===m4("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||m4("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function hue(e,t){const{config:n}=e;return{...bie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...aie("x",e,{defaultPos:"mid"}),...aie("y",e,{defaultPos:"mid"}),...nie("size",e),...nie("angle",e),...pue(e,n,t)}}function pue(e,t,n){return n?{shape:{value:n}}:nie("shape",e)}function mue(e,t,n){if(void 0===m4("align",e,n))return"center"}function gue(e,t,n){if(void 0===m4("baseline",e,n))return"middle"}function yue(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),a=m4("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==a)return a;{const e=o?o.get("range"):void 0;if(e&&n4(e)&&GS(e.step))return 3*e.step/4;return 3*Kte(t.view,i)/4}}const vue={arc:{vgMark:"arc",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...aie("x",e,{defaultPos:"mid"}),...aie("y",e,{defaultPos:"mid"}),...pie(e,"radius","arc"),...pie(e,"theta","arc")})},area:{vgMark:"area",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...fie("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...fie("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),..._ie(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pie(e,"x","bar"),...pie(e,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:e=>hue(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&dee(n)&&n.type===b9?{field:See(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...pie(e,"x","image"),...pie(e,"y","image"),...Yre(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...aie("x",e,{defaultPos:"mid"}),...aie("y",e,{defaultPos:"mid"}),...nie("size",e,{vgChannel:"strokeWidth"}),..._ie(e)})},point:{vgMark:"symbol",encodeEntry:e=>hue(e)},rect:{vgMark:"rect",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...pie(e,"x","rect"),...pie(e,"y","rect")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...bie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...fie("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...fie("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...nie("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>hue(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...bie(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...aie("x",e,{defaultPos:"mid"}),...aie("y",e,{defaultPos:"mid"}),...Yre(e),...nie("size",e,{vgChannel:"fontSize"}),...nie("angle",e),...kie("align",mue(e.markDef,n,t)),...kie("baseline",gue(e.markDef,n,t)),...aie("radius",e,{defaultPos:null}),...aie("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return{...bie(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...aie("x",e,{defaultPos:"mid",vgChannel:"xc"}),...aie("y",e,{defaultPos:"mid",vgChannel:"yc"}),...nie("size",e,{defaultValue:yue(e),vgChannel:i}),[o]:c4(m4("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...bie(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...aie("x",e,{defaultPos:"mid"}),...aie("y",e,{defaultPos:"mid"}),...nie("size",e),..._ie(e)})}};function bue(e){if(d3([l7,a7,m7],e.mark)){const t=ste(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:xue+e.requestDataName(Are.Main),data:e.requestDataName(Are.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:_ue(e,{fromPrefix:xue})}]}(e,t)}else if(e.mark===s7){const t=a4.some((t=>m4(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=_ue(e,{fromPrefix:wue}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let o,a;"x"===e.stack.fieldChannel?(o={...s3(t.encode.update,["y","yc","y2","height",...a4]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...u3(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...s3(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...u3(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of a4){const r=g4(n,e.markDef,e.config);t.encode.update[n]?(o[n]=t.encode.update[n],delete t.encode.update[n]):r&&(o[n]=c4(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannel){const t=e.fieldDef(e.stack.groupbyChannel),n=See(t);n&&s.push(n),(t?.bin||t?.timeUnit)&&s.push(See(t,{binSuffix:"end"}))}o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=g4(r,e.markDef,e.config);return void 0!==t?{...n,[r]:c4(t)}:n}}),o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(Are.Main),name:wue+e.requestDataName(Are.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}(e)}return _ue(e)}const xue="faceted_path_";const wue="stack_group_";function _ue(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=B3(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=p4(r),u=i.key,l=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!ZE(a)&&bee(a)&&f3(a.value)||!a&&f3(m4("order",i,o)))){if((ZE(a)||dee(a))&&!n)return b4(a,{expr:"datum"});if(b7(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(dee(r)){const t=r.sort;return ZE(t)?{field:See(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:Z7(t)?{field:See({aggregate:nte(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:K7(t)?{field:See(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:See(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}(e),c=function(e){if(!e.component.selection)return null;const t=E3(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=E3(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),f=m4("aria",r,o),d=vue[n].postEncodingTransform?vue[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:vue[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Are.Main)},encode:{update:vue[n].encodeEntry(e)},...d?{transform:d}:{}}]}class kue extends Nse{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,Xte(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=_7(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=g4("filled",e,t),i=e.type;return B3(r,i!==c7&&i!==l7&&i!==d7)}(o,i,{graticule:e.data&&Sre(e.data)}));const s=this.encoding=ite(e.encoding||{},a,o.filled,i);this.markDef=due(o,s,i),this.size=function({encoding:e,size:t}){for(const n of h6){const r=J5(n);Yte(t[r])&&mee(e[n])&&(delete t[r],k4.warn(E4.stepDropped(r)))}return t}({encoding:s,size:Xte(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=bne(a,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>qte(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===v7,n=e&&F5.some((t=>yee(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return M6.reduce(((e,n)=>{const r=zee(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=K6(e);return ZE(t)&&(r.domain=t.map(u4)),ZE(n)&&(r.range=n.map(u4)),r}initAxes(e){return h6.reduce(((t,n)=>{const r=e[n];if(yee(r)||n===Q3&&yee(e.x2)||n===J3&&yee(e.y2)){const e=yee(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=E3(e),n={};for(const r of t){const t=e[r];n[r]=Vee(t)?s4(t):u4(t)}return n}initLegends(e){return C6.reduce(((t,n)=>{const r=zee(e[n]);if(r&&function(e){switch(e){case u5:case l5:case c5:case d5:case f5:case p5:case y5:case v5:return!0;case m5:case g5:case h5:return!1}}(n)){const e=r.legend;t[n]=e?K6(e):e}return t}),{})}parseData(){this.component.data=tue(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of h6){const i=J5(r);if(t[i]){const e=t[i];n.layoutSize.set(i,Yte(e)?"step":e,!0)}else{const t=Jse(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=D3(i.name),o=i.select,a=XS(o)?o:o.type,s=eS(o)?a3(o):{type:a},{fields:u,encodings:l,...c}=r[a];for(const e in c)"mark"===e&&(s[e]={...c[e],...s[e]}),void 0!==s[e]&&!0!==s[e]||(s[e]=c[e]??s[e]);const f=n[t]={...s,name:t,type:a,init:i.value,bind:i.bind,events:XS(s.on)?GK(s.on,"scope"):ES(a3(s.on))};for(const t of qie)t.defined(f)&&t.parse&&t.parse(e,f,i)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=bue(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,h6.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[fue(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of S3(e.component.selection??{})){const i=r.name,o=rA(i+Bie);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${Uie}(${o}, ${rA(e)}${n}`})}n=!0;for(const n of qie)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return Ore(t)}(this,e)}assembleSignals(){return[...noe(this),...Mre(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t];for(const t of S3(e.component.selection??{})){const r={name:t.name+Bie};if(t.init){const n=t.project.items.map((e=>{const{signals:t,...n}=e;return n}));r.values=t.init.map((t=>({unit:Wie(e,{escape:!1}),fields:n,values:Dre(t,!1)})))}n.filter((e=>e.name===t.name+Bie)).length||n.push(r)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return Moe(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&Mse(this.parent)||(e=Nre(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return tte(this.encoding,e)}fieldDef(e){return Tee(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return vee(t)?t:null}}class Eue extends Fse{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(hne(e))return new Eue(e,this,this.getName(`layer_${t}`),o,i);if(Zee(e))return new kue(e,this,this.getName(`layer_${t}`),o,i);throw new Error(E4.invalidSpec(e))}))}parseData(){this.component.data=tue(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;Xse(e=this),Qse(e,"width"),Qse(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of E3(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of E3(r.component.axes))n.axis[i]=Roe(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=sue(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of h6){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!t4(t)){if(r[t]>0&&!n){const n=aue[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const e of t[i])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),noe(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),Moe(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)Ase(n)&&(t=Nre(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),eae(this))}}function Sue(e,t,n,r,i){if(ree(e))return new Zse(e,t,n,i);if(hne(e))return new Eue(e,t,n,r,i);if(Zee(e))return new kue(e,t,n,r,i);if(function(e){return Vte(e)||Gte(e)||Hte(e)}(e))return new nue(e,t,n,i);throw new Error(E4.invalidSpec(e))}function Aue(e,t={}){t.logger&&k4.set(t.logger),t.fieldTitle&&Mee(t.fieldTitle);try{const n=sne(nS(t.config,e.config)),r=ore(e,n),i=Sue(r,null,"",void 0,n);i.parse(),function(e,t){Gae(e.sources);let n=0,r=0;for(let r=0;r<5&&Xae(e,t,!0);r++)n++;e.sources.map(Wae);for(let n=0;n<5&&Xae(e,t,!1);n++)r++;Gae(e.sources),5===Math.max(n,r)&&k4.warn("Maximum optimization runs(5) reached.")}(i.component.data,i);return{spec:function(e,t,n={},r){const i=e.config?fne(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=Hse(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let o=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(o++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Wte(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):XS(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)k4.warn(E4.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";k4.warn(E4.droppingFit(y6(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${y6(e)}`:"fit"}(n)}var a;return{...1===E3(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...fre(n,!1),...fre(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&k4.reset(),t.fieldTitle&&Mee(Cee)}}n(H2,G2);const Cue=V2.version;t(H2,"version",(function(){return Cue})),t(H2,"compile",(function(){return Aue})),t(H2,"normalize",(function(){return ore}));var Due=function(e){const[t,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}},Mue={};const Fue="#fff",Nue={background:"#333",title:{color:Fue,subtitleColor:Fue},style:{"guide-label":{fill:Fue},"guide-title":{fill:Fue}},axis:{domainColor:Fue,gridColor:"#888",tickColor:Fue}},Oue="#4572a7",$ue={background:"#fff",arc:{fill:Oue},area:{fill:Oue},line:{stroke:Oue,strokeWidth:2},path:{stroke:Oue},rect:{fill:Oue},shape:{stroke:Oue},symbol:{fill:Oue,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Tue="#30a2da",zue="#cbcbcb",Rue="#f0f0f0",Pue="#333",Lue={arc:{fill:Tue},area:{fill:Tue},axis:{domainColor:zue,grid:!0,gridColor:zue,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:zue,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Rue,group:{fill:Rue},legend:{labelColor:Pue,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Pue,titleFontSize:14,titlePadding:10},line:{stroke:Tue,strokeWidth:2},path:{stroke:Tue,strokeWidth:.5},rect:{fill:Tue},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Tue},bar:{binSpacing:2,fill:Tue,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Bue="#000",Iue={group:{fill:"#e5e5e5"},arc:{fill:Bue},area:{fill:Bue},line:{stroke:Bue},path:{stroke:Bue},rect:{fill:Bue},shape:{stroke:Bue},symbol:{fill:Bue,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},jue="Benton Gothic, sans-serif",Uue="#82c6df",que="Benton Gothic Bold, sans-serif",Wue="normal",Hue={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Vue={background:"#ffffff",title:{anchor:"start",color:"#000000",font:que,fontSize:22,fontWeight:"normal"},arc:{fill:Uue},area:{fill:Uue},line:{stroke:Uue,strokeWidth:2},path:{stroke:Uue},rect:{fill:Uue},shape:{stroke:Uue},symbol:{fill:Uue,size:30},axis:{labelFont:jue,labelFontSize:11.5,labelFontWeight:"normal",titleFont:que,titleFontSize:13,titleFontWeight:Wue},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:jue,labelFontSize:11.5,symbolType:"square",titleFont:que,titleFontSize:13,titleFontWeight:Wue},range:{category:Hue["category-6"],diverging:Hue["fireandice-6"],heatmap:Hue["fire-7"],ordinal:Hue["fire-7"],ramp:Hue["fire-7"]}},Gue="#ab5787",Yue="#979797",Xue={background:"#f9f9f9",arc:{fill:Gue},area:{fill:Gue},line:{stroke:Gue},path:{stroke:Gue},rect:{fill:Gue},shape:{stroke:Gue},symbol:{fill:Gue,size:30},axis:{domainColor:Yue,domainWidth:.5,gridWidth:.2,labelColor:Yue,tickColor:Yue,tickWidth:.2,titleColor:Yue},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Que="#3e5c69",Jue={background:"#fff",arc:{fill:Que},area:{fill:Que},line:{stroke:Que},path:{stroke:Que},rect:{fill:Que},shape:{stroke:Que},symbol:{fill:Que},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Kue="#1696d2",Zue="#000000",ele="Lato",tle="Lato",nle={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},rle={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:ele},axisX:{domain:!0,domainColor:Zue,domainWidth:1,grid:!1,labelFontSize:12,labelFont:tle,labelAngle:0,tickColor:Zue,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:ele},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:tle,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:ele,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:tle,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:ele,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:nle["six-groups-cat-1"],diverging:nle["diverging-colors"],heatmap:nle["diverging-colors"],ordinal:nle["six-groups-seq"],ramp:nle["shades-blue"]},area:{fill:Kue},rect:{fill:Kue},line:{color:Kue,stroke:Kue,strokeWidth:5},trail:{color:Kue,stroke:Kue,strokeWidth:0,size:1},path:{stroke:Kue,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Kue,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Kue,stroke:null}},arc:{fill:Kue},shape:{stroke:Kue},symbol:{fill:Kue,size:30}},ile="#3366CC",ole="#ccc",ale="Arial, sans-serif",sle={arc:{fill:ile},area:{fill:ile},path:{stroke:ile},rect:{fill:ile},shape:{stroke:ile},symbol:{stroke:ile},circle:{fill:ile},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:ale,fontSize:12},"guide-title":{font:ale,fontSize:12},"group-title":{font:ale,fontSize:12}},title:{font:ale,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:ole,tickColor:ole,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},ule="2.10.0";t(Mue,"vox",(function(){return Jue})),t(Mue,"version",(function(){return ule})),t(Mue,"urbaninstitute",(function(){return rle})),t(Mue,"quartz",(function(){return Xue})),t(Mue,"latimes",(function(){return Vue})),t(Mue,"googlecharts",(function(){return sle})),t(Mue,"ggplot2",(function(){return Iue})),t(Mue,"fivethirtyeight",(function(){return Lue})),t(Mue,"excel",(function(){return $ue})),t(Mue,"dark",(function(){return Nue}));var lle="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const cle="vg-tooltip-element",fle={offsetX:10,offsetY:10,id:cle,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function dle(e,t,n){if(ZE(e))return`[${e.map((e=>t(XS(e)?e:hle(e,n)))).join(", ")}]`;if(eS(e)){let r="";const i=e,{title:o,image:a}=i,s=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const e of u){let i=s[e];void 0!==i&&(eS(i)&&(i=hle(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function hle(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class ple{constructor(e){this.options=Object.assign(Object.assign({},fle),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return lle.toString().replace(cle,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));if((null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=dle(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function mle(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var gle,yle='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function vle(e,...t){for(const n of t)ble(e,n);return e}function ble(e,t){for(const n of Object.keys(t))rS(e,n,t[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const xle=TE;let wle=H2;const _le="undefined"!=typeof window?window:void 0;void 0===wle&&(null===(gle=null==_le?void 0:_le.vl)||void 0===gle?void 0:gle.compile)&&(wle=_le.vl);const kle={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Ele={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Sle={vega:"Vega","vega-lite":"Vega-Lite"},Ale={vega:xle.version,"vega-lite":wle?wle.version:"not available"},Cle={vega:e=>e,"vega-lite":(e,t)=>wle.compile(e,{config:t}).spec},Dle='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',Mle="chart-wrapper";function Fle(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${Sle[r]} JSON Source`}function Nle(e){return(t=e)&&"load"in t?e:xle.loader(e);var t}function Ole(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function $le(e,t,n={}){var r,i,o;return mle(this,void 0,void 0,(function*(){let a,s;XS(t)?(s=Nle(n.loader),a=JSON.parse(yield s.load(t))):a=t;const u=Ole(a).loader;s&&!u||(s=Nle(null!==(r=n.loader)&&void 0!==r?r:u));const l=yield Tle(Ole(a),s),c=yield Tle(n,s),f=Object.assign(Object.assign({},vle(c,l)),{config:nS(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=l.config)&&void 0!==o?o:{})});return yield function(e,t,n={},r){var i,o,a,s,u,l;return mle(this,void 0,void 0,(function*(){const c=n.theme?nS(Mue[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,f=WS(n.actions)?n.actions:vle({},kle,null!==(o=n.actions)&&void 0!==o?o:{}),d=Object.assign(Object.assign({},Ele),n.i18n),h=null!==(a=n.renderer)&&void 0!==a?a:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:xle.Warn,m=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization",g="string"==typeof e?document.querySelector(e):e;if(!g)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?yle.toString():n.defaultStyle,r.appendChild(t)}}const y=function(e,t){var n;if(e.$schema){const r=Due(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${Sle[r.library]}, but mode argument sets ${null!==(n=Sle[t])&&void 0!==n?n:t}.`);const i=r.library;return lw.satisfies(Ale[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${Sle[i]} ${r.version}, but the current version of ${Sle[i]} is v${Ale[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let v=Cle[y](t,c);if("vega-lite"===y&&v.$schema){const e=Due(v.$schema);lw.satisfies(Ale.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${Ale.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions"),g.innerHTML="";let b=g;if(f){const e=document.createElement("div");e.classList.add(Mle),g.appendChild(e),b=e}const x=n.patch;x&&(v=x instanceof Function?x(v):ew(v,x,!0,!1).newDocument),n.formatLocale&&xle.formatLocale(n.formatLocale),n.timeFormatLocale&&xle.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,_=xle.parse(v,"vega-lite"===y?{}:c,{ast:w}),k=new(n.viewClass||xle.View)(_,Object.assign({loader:r,logLevel:p,renderer:h},w?{expr:xle.expressionInterpreter}:{}));if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new ple(!0===n.tooltip?{}:n.tooltip).call,k.tooltip(e)}let E,{hover:S}=n;if(void 0===S&&(S="vega"===y),S){const{hoverSet:e,updateSet:t}="boolean"==typeof S?{}:S;k.hover(e,t)}if(n&&(null!=n.width&&k.width(n.width),null!=n.height&&k.height(n.height),null!=n.padding&&k.padding(n.padding)),yield k.initialize(b,n.bind).runAsync(),!1!==f){let e=g;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=d.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const n=document.createElement("summary");n.innerHTML=Dle,t.append(n),E=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",E)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return mle(this,void 0,void 0,(function*(){t.preventDefault();const r=yield k.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===f||!1!==f.source){const e=document.createElement("a");e.text=d.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){var r,i;Fle(uw(t),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),e.preventDefault()})),r.append(e)}if("vega-lite"===y&&(!0===f||!1!==f.compiled)){const e=document.createElement("a");e.text=d.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,r;Fle(uw(v),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()})),r.append(e)}if(!0===f||!1!==f.editor){const e=null!==(l=n.editorUrl)&&void 0!==l?l:"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){!function(e,t,n){const r=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:c,mode:y,renderer:h,spec:uw(t)}),n.preventDefault()})),r.append(i)}}function A(){E&&document.removeEventListener("click",E),k.finalize()}return{view:k,spec:t,vgSpec:v,finalize:A}}))}(e,a,f,s)}))}function Tle(e,t){var n;return mle(this,void 0,void 0,(function*(){const r=XS(e.config)?JSON.parse(yield t.load(e.config)):null!==(n=e.config)&&void 0!==n?n:{},i=XS(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})}))}class zle extends xe().Component{componentDidMount(){this.drawChart(this.props.data,this.props.id)}drawChart(e,t){$le("#"+t,e).then((e=>console.log(e))).catch(console.warn)}render(){return ve.createElement("div",{id:this.props.id})}}var Rle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"A vertical box plot showing median, min, and max body mass of penguins.","data":{"url":"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv"},"mark":{"type":"boxplot","extent":"min-max"},"encoding":{"x":{"field":"playlist_genre","type":"nominal"},"color":{"field":"playlist_genre","type":"nominal","legend":null},"y":{"field":"track_popularity","type":"quantitative","scale":{"zero":false}}}}')),Ple=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}')),Lle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),Ble=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/info474-a2/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),Ile=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}')),jle=e(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"Drag the sliders to highlight points.","data":{"url":"https://raw.githubusercontent.com/chloet127/info474-project/main/src/data/spotify_songs.json"},"transform":[{"calculate":"year(datum.track_album_release_date)","as":"Year"},{"filter":{"field":"Year","gte":2000}}],"width":1000,"height":800,"layer":[{"params":[{"name":"Year","value":[{"Year":2010}],"select":{"type":"point","fields":["Year"]},"bind":{"Year":{"input":"range","min":2000,"max":2020,"step":1}}},{"name":"name4","bind":"scales","select":{"type":"interval"}}],"mark":"circle","encoding":{"x":{"field":"energy","type":"quantitative"},"y":{"field":"danceability","type":"quantitative"},"color":{"condition":{"param":"Year","field":"playlist_genre","type":"nominal"},"value":"grey"},"opacity":{"value":0.1}}},{"transform":[{"filter":{"param":"Year"}}],"mark":{"type":"circle","tooltip":true,"filled":true},"encoding":{"x":{"field":"energy","type":"quantitative"},"y":{"field":"danceability","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"},"size":{"value":100},"opacity":{"value":1}}}]}'));const Ule=()=>{const[e,t]=md("https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv");return ve.createElement("div",{className:"App"},ve.createElement("div",{className:"container"},ve.createElement("div",{className:"flex-child"},ve.createElement("h1",null,"Exploratory Data Analysis"),ve.createElement("p",null,"Assignment 2, INFO 474 Spring 2021"),ve.createElement("p",null,t&&"loading data!")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Danceability vs Energy Over Time (2000-2020)"),ve.createElement(zle,{data:jle,id:"a3"})),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre Over Time (1957-2020)"),ve.createElement(zle,{data:Ble,id:"vis7"}),ve.createElement("p",null,"The spotify_songs dataset spans across many decades, starting in 1957 and ending in 2020. The first few decades, until around 2000, are relatively uneventful for most of the genres, with the exception of rock. Around 2010, more and more songs were released, with EDM spiking the highest. Its important to note that the steep drop at 2020 is due to the fact that very little information for that year was available at the time of this datasets release.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre Over Time (2010-2020)"),ve.createElement(zle,{data:Ile,id:"vis8"}),ve.createElement("p",null,"Because so much of the growth of music occurred in the most recent decade, it warranted a closer look. Here, its clear to see that EDM, latin, and rap music lead in terms of growth, with hundreds of song releases over the lowest genre, rock, in 2019.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Genre"),ve.createElement($x,null),ve.createElement("p",null,"EDM is the leader in number of songs released, with rap coming in second. Its interesting to note that although latin had the second highest peak in 2019, it has one of the lowest song counts, which means that it hasnt been as consistent across the years as pop or r&b music.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Subgenre"),ve.createElement(Tx,null),ve.createElement("p",null,"Splitting up by subgenre can give us deeper insight into each genre; however, the way that the data is currently encoded makes it difficult to understand how the data is categorized.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Number of Songs per Subgenre"),ve.createElement(zx,null),ve.createElement("p",null,"By categorizing each subgenre by color, its easier to see the distinction between each separate subgenre and how they contribute to the total number of songs released in the genre as a whole. For example, because the latin genre has a relatively low total song count, it can be surprising to see latin hip hop with one of the highest number of songs released among the other subgenres, though this can be explained by the low song count of reggaeton.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity Distribution per Genre"),ve.createElement(zle,{data:Rle,id:"vis1"}),ve.createElement("p",null,"This is a more indepth look into the different genres and how they differ in regards to the distribution of track popularity. By following the median, min, and max for each genre, we can analyze trends and compare and contrast the genres together.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity per Genre Over Time (1957-2020)"),ve.createElement(zle,{data:Lle,id:"vis6"}),ve.createElement("p",null,"Throughout this visualization, the popularity for many of the genres spikes and dips quite violently, especially before the year 2000. Its also interesting to note that some of the genres start later than 1957, which means that some of the popularity data is missing from the dataset.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Track Popularity per Genre Over Time (2010-2020)"),ve.createElement(zle,{data:Ple,id:"vis5"}),ve.createElement("p",null,"Because some of the data is incomplete, and because the wider view of this visualization is very chaotic, narrowing down the timeframe to focus on the 2010s will give us a better view of the more recent popularity trends for each genre. Here, we can see that all of the genres but rock are beginning to trend higher around 2019.")),ve.createElement("div",{className:"flex-child"},ve.createElement("h3",null,"Written Analysis"),ve.createElement("p",null,"While performing exploratory data analysis, I wanted to find answers for the following questions:",ve.createElement("ul",null,ve.createElement("li",null,"When were songs released per genre?"),ve.createElement("li",null,"How many songs have been released per genre?"),ve.createElement("li",null,"How is a genre described by each of the popularity of its songs?"),ve.createElement("li",null,"How has popularity changed over time for each genre?")),ve.createElement("p",null,"First, I performed initial sanity checks to identify important variables, investigate patterns, summarize characteristics, and more. In order to accurately answer the questions above, I had to ensure that the data was complete and contained all of the necessary variables. These initial checks included creating a list of all column names, checking for null values, and looking at the overall shape of the data. Once I had finished these checks, I then moved onto preparing and transforming the data for visualization."),ve.createElement("p",null,"For my visualizations, I primarily used groupby functions in order to organize my data. This way, it was easier to categorize the data by genre, subgenre, or year, then delve further to investigate trends and patterns. Because the dataset contained thousands of rows and many columns, I also utilized filtering and aggregate functions to reduce the number of data points on display, thereby giving my visualizations more clarity."),ve.createElement("p",null,"Overall, I was able to gain valuable insight into this dataset after going through this analysis process. Much of the increase in volume of music each year has occurred in the last decade, particularly in the last few years. All genres displayed in the dataset have seen an increase in the number of songs released as time has moved forward. It seems that recent years have seen a tremendous boom in the music industry as more and more songs are being released.")))))};Zf.render(ve.createElement(Ule,null),document.querySelector("#root"))}();
//# sourceMappingURL=index.4956d7f7.js.map
