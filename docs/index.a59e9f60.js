!function(){var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function t(e){return e&&e.__esModule?e.default:e}function n(e,t,n){Object.defineProperty(e,t,{get:n,enumerable:!0})}function r(e,t){return Object.keys(t).forEach((function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[n]}})})),e}var i,o,a,s,u=!1;function l(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function c(){i={},o=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=l(e),u=1;u<arguments.length;u++){for(var c in n=Object(arguments[u]))a.call(n,c)&&(i[c]=n[c]);if(o){r=o(n);for(var f=0;f<r.length;f++)s.call(n,r[f])&&(i[r[f]]=n[r[f]])}}return i}}function f(){return u||(u=!0,c()),i}var d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M,F,N,O,T,$,z,R,P,L,B,I,j,U,q,W,H,V,G,Y,X,Q,J,K,Z,ee,te,ne,re,ie,oe=!1;function ae(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function se(e,t,n){this.props=e,this.context=t,this.refs=D,this.updater=n||C}function ue(){}function le(e,t,n){this.props=e,this.context=t,this.refs=D,this.updater=n||C}function ce(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)N.call(t,r)&&!O.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),l=0;l<s;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:p,type:e,key:o,ref:a,props:i,_owner:F.current}}function fe(e){return"object"==typeof e&&null!==e&&e.$$typeof===p}function de(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function he(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case p:case m:a=!0}}if(a)return i=i(a=e),e=""===r?"."+de(a,0):r,Array.isArray(i)?(n="",null!=e&&(n=e.replace(T,"$&/")+"/"),he(i,t,n,"",(function(e){return e}))):null!=i&&(fe(i)&&(i=function(e,t){return{$$typeof:p,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(T,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",Array.isArray(e))for(var s=0;s<e.length;s++){var u=r+de(o=e[s],s);a+=he(o,t,n,u,i)}else if("function"==typeof(u=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=A&&e[A]||e["@@iterator"])?e:null}(e)))for(e=u.call(e),s=0;!(o=e.next()).done;)a+=he(o=o.value,t,n,u=r+de(o,s++),i);else if("object"===o)throw t=""+e,Error(ae(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function pe(e,t,n){if(null==e)return e;var r=[],i=0;return he(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function me(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}function ge(){var e=$.current;if(null===e)throw Error(ae(321));return e}function ye(){return oe||(oe=!0,d={},h=f(),p=60103,m=60106,g=60107,d.Fragment=g,y=60108,d.StrictMode=y,v=60114,d.Profiler=v,b=60109,x=60110,w=60112,_=60113,d.Suspense=_,k=60115,E=60116,"function"==typeof Symbol&&Symbol.for&&(S=Symbol.for,p=S("react.element"),m=S("react.portal"),g=S("react.fragment"),d.Fragment=g,y=S("react.strict_mode"),d.StrictMode=y,v=S("react.profiler"),d.Profiler=v,b=S("react.provider"),x=S("react.context"),w=S("react.forward_ref"),_=S("react.suspense"),d.Suspense=_,k=S("react.memo"),E=S("react.lazy")),A="function"==typeof Symbol&&Symbol.iterator,C={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},D={},se.prototype.isReactComponent={},se.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(ae(85));this.updater.enqueueSetState(this,e,t,"setState")},se.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},ue.prototype=se.prototype,(M=le.prototype=new ue).constructor=le,h(M,se.prototype),M.isPureReactComponent=!0,F={current:null},N=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0},T=/\/+/g,z={ReactCurrentDispatcher:$={current:null},ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:F,IsSomeRendererActing:{current:!1},assign:h},R={map:pe,forEach:function(e,t,n){pe(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return pe(e,(function(){t++})),t},toArray:function(e){return pe(e,(function(e){return e}))||[]},only:function(e){if(!fe(e))throw Error(ae(143));return e}},d.Children=R,P=se,d.Component=P,L=le,d.PureComponent=L,B=z,d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B,I=function(e,t,n){if(null==e)throw Error(ae(267,e));var r=h({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=F.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)N.call(t,u)&&!O.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var l=0;l<u;l++)s[l]=arguments[l+2];r.children=s}return{$$typeof:p,type:e.type,key:i,ref:o,props:r,_owner:a}},d.cloneElement=I,j=function(e,t){return void 0===t&&(t=null),(e={$$typeof:x,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:b,_context:e},e.Consumer=e},d.createContext=j,U=ce,d.createElement=U,q=function(e){var t=ce.bind(null,e);return t.type=e,t},d.createFactory=q,W=function(){return{current:null}},d.createRef=W,H=function(e){return{$$typeof:w,render:e}},d.forwardRef=H,V=fe,d.isValidElement=V,G=function(e){return{$$typeof:E,_payload:{_status:-1,_result:e},_init:me}},d.lazy=G,Y=function(e,t){return{$$typeof:k,type:e,compare:void 0===t?null:t}},d.memo=Y,X=function(e,t){return ge().useCallback(e,t)},d.useCallback=X,Q=function(e,t){return ge().useContext(e,t)},d.useContext=Q,J=function(){},d.useDebugValue=J,K=function(e,t){return ge().useEffect(e,t)},d.useEffect=K,Z=function(e,t,n){return ge().useImperativeHandle(e,t,n)},d.useImperativeHandle=Z,ee=function(e,t){return ge().useLayoutEffect(e,t)},d.useLayoutEffect=ee,te=function(e,t){return ge().useMemo(e,t)},d.useMemo=te,ne=function(e,t,n){return ge().useReducer(e,t,n)},d.useReducer=ne,re=function(e){return ge().useRef(e)},d.useRef=re,ie=function(e){return ge().useState(e)},d.useState=ie,"17.0.2",d.version="17.0.2"),d}var ve,be,xe=!1;function we(){return xe||(xe=!0,ve={},ve=ye(),be=t(ve)),ve}we();var _e,ke,Ee,Se,Ae,Ce,De,Me,Fe,Ne,Oe,Te,$e,ze,Re,Pe,Le,Be,Ie,je,Ue,qe,We,He,Ve,Ge,Ye,Xe,Qe,Je,Ke,Ze,et,tt,nt,rt,it,ot,at,st,ut,lt,ct,ft=!1;function dt(e,t){var n=e.length;e.push(t);e:for(;;){var r=n-1>>>1,i=e[r];if(!(void 0!==i&&0<mt(i,t)))break e;e[r]=t,e[n]=i,n=r}}function ht(e){return void 0===(e=e[0])?null:e}function pt(e){var t=e[0];if(void 0!==t){var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=o+1,u=e[s];if(void 0!==a&&0>mt(a,n))void 0!==u&&0>mt(u,a)?(e[r]=u,e[s]=n,r=s):(e[r]=a,e[o]=n,r=o);else{if(!(void 0!==u&&0>mt(u,n)))break e;e[r]=u,e[s]=n,r=s}}}return t}return null}function mt(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}function gt(e){for(var t=ht(Ge);null!==t;){if(null===t.callback)pt(Ge);else{if(!(t.startTime<=e))break;pt(Ge),t.sortIndex=t.expirationTime,dt(Ve,t)}t=ht(Ge)}}function yt(e){if(Ze=!1,gt(e),!Ke)if(null!==ht(Ve))Ke=!0,Ae(vt);else{var t=ht(Ge);null!==t&&Ce(yt,t.startTime-e)}}function vt(e,t){Ke=!1,Ze&&(Ze=!1,De()),Je=!0;var n=Qe;try{for(gt(t),Xe=ht(Ve);null!==Xe&&(!(Xe.expirationTime>t)||e&&!ke());){var r=Xe.callback;if("function"==typeof r){Xe.callback=null,Qe=Xe.priorityLevel;var i=r(Xe.expirationTime<=t);t=_e(),"function"==typeof i?Xe.callback=i:Xe===ht(Ve)&&pt(Ve),gt(t)}else pt(Ve);Xe=ht(Ve)}if(null!==Xe)var o=!0;else{var a=ht(Ge);null!==a&&Ce(yt,a.startTime-t),o=!1}return o}finally{Xe=null,Qe=n,Je=!1}}function bt(){return ft||(ft=!0,Se={},"object"==typeof performance&&"function"==typeof performance.now?(Fe=performance,_e=function(){return Fe.now()},Se.unstable_now=_e):(Ne=Date,Oe=Ne.now(),_e=function(){return Ne.now()-Oe},Se.unstable_now=_e),"undefined"==typeof window||"function"!=typeof MessageChannel?(Te=null,$e=null,ze=function(){if(null!==Te)try{var e=_e();Te(!0,e),Te=null}catch(e){throw setTimeout(ze,0),e}},Ae=function(e){null!==Te?setTimeout(Ae,0,e):(Te=e,setTimeout(ze,0))},Ce=function(e,t){$e=setTimeout(e,t)},De=function(){clearTimeout($e)},ke=function(){return!1},Se.unstable_shouldYield=ke,Ee=function(){},Me=Se.unstable_forceFrameRate=Ee):(Re=window.setTimeout,Pe=window.clearTimeout,"undefined"!=typeof console&&(Le=window.cancelAnimationFrame,"function"!=typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!=typeof Le&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),Be=!1,Ie=null,je=-1,Ue=5,qe=0,ke=function(){return _e()>=qe},Se.unstable_shouldYield=ke,Me=function(){},Ee=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ue=0<e?Math.floor(1e3/e):5},Se.unstable_forceFrameRate=Ee,We=new MessageChannel,He=We.port2,We.port1.onmessage=function(){if(null!==Ie){var e=_e();qe=e+Ue;try{Ie(!0,e)?He.postMessage(null):(Be=!1,Ie=null)}catch(e){throw He.postMessage(null),e}}else Be=!1},Ae=function(e){Ie=e,Be||(Be=!0,He.postMessage(null))},Ce=function(e,t){je=Re((function(){e(_e())}),t)},De=function(){Pe(je),je=-1}),Ve=[],Ge=[],Ye=1,Xe=null,Qe=3,Je=!1,Ke=!1,Ze=!1,et=Me,5,Se.unstable_IdlePriority=5,1,Se.unstable_ImmediatePriority=1,4,Se.unstable_LowPriority=4,3,Se.unstable_NormalPriority=3,null,Se.unstable_Profiling=null,2,Se.unstable_UserBlockingPriority=2,tt=function(e){e.callback=null},Se.unstable_cancelCallback=tt,nt=function(){Ke||Je||(Ke=!0,Ae(vt))},Se.unstable_continueExecution=nt,rt=function(){return Qe},Se.unstable_getCurrentPriorityLevel=rt,it=function(){return ht(Ve)},Se.unstable_getFirstCallbackNode=it,ot=function(e){switch(Qe){case 1:case 2:case 3:var t=3;break;default:t=Qe}var n=Qe;Qe=t;try{return e()}finally{Qe=n}},Se.unstable_next=ot,at=function(){},Se.unstable_pauseExecution=at,st=et,Se.unstable_requestPaint=st,ut=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=Qe;Qe=e;try{return t()}finally{Qe=n}},Se.unstable_runWithPriority=ut,lt=function(e,t,n){var r=_e();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?r+n:r,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:Ye++,callback:t,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>r?(e.sortIndex=n,dt(Ge,e),null===ht(Ve)&&e===ht(Ge)&&(Ze?De():Ze=!0,Ce(yt,n-r))):(e.sortIndex=i,dt(Ve,e),Ke||Je||(Ke=!0,Ae(vt))),e},Se.unstable_scheduleCallback=lt,ct=function(e){var t=Qe;return function(){var n=Qe;Qe=t;try{return e.apply(this,arguments)}finally{Qe=n}}},Se.unstable_wrapCallback=ct),Se}var xt,wt=!1;function _t(){return wt||(wt=!0,xt={},xt=bt()),xt}var kt,Et,St,At,Ct,Dt,Mt,Ft,Nt,Ot,Tt,$t,zt,Rt,Pt,Lt,Bt,It,jt,Ut,qt,Wt,Ht,Vt,Gt,Yt,Xt,Qt,Jt,Kt,Zt,en,tn,nn,rn,on,an,sn,un,ln,cn,fn,dn,hn,pn,mn,gn,yn,vn,bn,xn,wn,_n,kn,En,Sn,An,Cn,Dn,Mn,Fn,Nn,On,Tn,$n,zn,Rn,Pn,Ln,Bn,In,jn,Un,qn,Wn,Hn,Vn,Gn,Yn,Xn,Qn,Jn,Kn,Zn,er,tr,nr,rr,ir,or,ar,sr,ur,lr,cr,fr,dr,hr,pr,mr,gr,yr,vr,br,xr,wr,_r,kr,Er,Sr,Ar,Cr,Dr,Mr,Fr,Nr,Or,Tr,$r,zr,Rr,Pr,Lr,Br,Ir,jr,Ur,qr,Wr,Hr,Vr,Gr,Yr,Xr,Qr,Jr,Kr,Zr,ei,ti,ni,ri,ii,oi,ai,si,ui,li,ci,fi,di,hi,pi,mi,gi,yi,vi,bi,xi,wi,_i,ki,Ei,Si,Ai,Ci,Di,Mi,Fi,Ni,Oi,Ti,$i,zi,Ri,Pi,Li,Bi,Ii,ji,Ui,qi,Wi,Hi,Vi,Gi,Yi,Xi,Qi,Ji,Ki,Zi,eo,to,no,ro,io,oo,ao,so,uo,lo,co,fo,ho,po,mo,go,yo,vo,bo,xo,wo,_o,ko,Eo,So,Ao,Co,Do,Mo,Fo,No,Oo,To,$o,zo,Ro,Po,Lo,Bo,Io,jo,Uo,qo,Wo,Ho,Vo,Go,Yo,Xo,Qo,Jo,Ko,Zo,ea,ta,na,ra,ia,oa,aa,sa,ua,la,ca,fa,da,ha,pa,ma,ga,ya,va,ba,xa,wa,_a,ka,Ea,Sa,Aa,Ca,Da=!1;function Ma(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Fa(e,t){Na(e,t),Na(e+"Capture",t)}function Na(e,t){for(Ct[e]=t,e=0;e<t.length;e++)At.add(t[e])}function Oa(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}function Ta(e){return e[1].toUpperCase()}function $a(e,t,n,r){var i=Tt.hasOwnProperty(t)?Tt[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!Ft.call(Ot,e)||!Ft.call(Nt,e)&&(Mt.test(e)?Ot[e]=!0:(Nt[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function za(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=en&&e[en]||e["@@iterator"])?e:null}function Ra(e){if(void 0===tn)try{throw Error()}catch(e){var t=e.stack.trim().match(/\n( *(at )?)/);tn=t&&t[1]||""}return"\n"+tn+e}function Pa(e,t){if(!e||nn)return"";nn=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(e){var r=e}Reflect.construct(e,[],t)}else{try{t.call()}catch(e){r=e}e.call(t.prototype)}else{try{throw Error()}catch(e){r=e}e()}}catch(e){if(e&&r&&"string"==typeof e.stack){for(var i=e.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s])return"\n"+i[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{nn=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ra(e):""}function La(e){switch(e.tag){case 5:return Ra(e.type);case 16:return Ra("Lazy");case 13:return Ra("Suspense");case 19:return Ra("SuspenseList");case 0:case 2:case 15:return e=Pa(e.type,!1);case 11:return e=Pa(e.type.render,!1);case 22:return e=Pa(e.type._render,!1);case 1:return e=Pa(e.type,!0);default:return""}}function Ba(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case Lt:return"Fragment";case Pt:return"Portal";case It:return"Profiler";case Bt:return"StrictMode";case Wt:return"Suspense";case Ht:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ut:return(e.displayName||"Context")+".Consumer";case jt:return(e._context.displayName||"Context")+".Provider";case qt:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case Vt:return Ba(e.type);case Yt:return Ba(e._render);case Gt:t=e._payload,e=e._init;try{return Ba(e(t))}catch(e){}}return null}function Ia(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function ja(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Ua(e){e._valueTracker||(e._valueTracker=function(e){var t=ja(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function qa(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ja(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Wa(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Ha(e,t){var n=t.checked;return St({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Va(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=Ia(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ga(e,t){null!=(t=t.checked)&&$a(e,"checked",t,!1)}function Ya(e,t){Ga(e,t);var n=Ia(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Qa(e,t.type,n):t.hasOwnProperty("defaultValue")&&Qa(e,t.type,Ia(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Xa(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Qa(e,t,n){"number"===t&&Wa(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Ja(e,t){return e=St({children:void 0},t),(t=function(e){var t="";return Et.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function Ka(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ia(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Za(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(Ma(91));return St({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function es(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(Ma(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Ma(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:Ia(n)}}function ts(e,t){var n=Ia(t.value),r=Ia(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ns(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function rs(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function is(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?rs(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function os(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function as(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||sn.hasOwnProperty(e)&&sn[e]?(""+t).trim():t+"px"}function ss(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=as(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function us(e,t){if(t){if(ln[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(Ma(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(Ma(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(Ma(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(Ma(62))}}function ls(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function cs(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function fs(e){if(e=Uu(e)){if("function"!=typeof cn)throw Error(Ma(280));var t=e.stateNode;t&&(t=Wu(t),cn(e.stateNode,e.type,t))}}function ds(e){fn?dn?dn.push(e):dn=[e]:fn=e}function hs(){if(fn){var e=fn,t=dn;if(dn=fn=null,fs(e),t)for(e=0;e<t.length;e++)fs(t[e])}}function ps(e,t){return e(t)}function ms(e,t,n,r,i){return e(t,n,r,i)}function gs(){}function ys(){null===fn&&null===dn||(gs(),hs())}function vs(e,t){var n=e.stateNode;if(null===n)return null;var r=Wu(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(Ma(231,t,typeof n));return n}function bs(e,t,n,r,i,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(e){this.onError(e)}}function xs(e,t,n,r,i,o,a,s,u){vn=!1,bn=null,bs.apply(_n,arguments)}function ws(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!=(1026&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function _s(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function ks(e){if(ws(e)!==e)throw Error(Ma(188))}function Es(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=ws(e)))throw Error(Ma(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return ks(i),e;if(o===r)return ks(i),t;o=o.sibling}throw Error(Ma(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(Ma(189))}}if(n.alternate!==r)throw Error(Ma(190))}if(3!==n.tag)throw Error(Ma(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ss(e,t){for(var n=e.alternate;null!==t;){if(t===e||t===n)return!0;t=t.return}return!1}function As(e,t,n,r,i){return{blockedOn:e,domEventName:t,eventSystemFlags:16|n,nativeEvent:i,targetContainers:[r]}}function Cs(e,t){switch(e){case"focusin":case"focusout":Mn=null;break;case"dragenter":case"dragleave":Fn=null;break;case"mouseover":case"mouseout":Nn=null;break;case"pointerover":case"pointerout":On.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tn.delete(t.pointerId)}}function Ds(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e=As(t,n,r,i,o),null!==t&&(null!==(t=Uu(t))&&En(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ms(e){var t=ju(e.target);if(null!==t){var n=ws(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=_s(n)))return e.blockedOn=t,void An(e.lanePriority,(function(){_t().unstable_runWithPriority(e.priority,(function(){Sn(n)}))}))}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fs(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Uu(n))&&En(t),e.blockedOn=n,!1;t.shift()}return!0}function Ns(e,t,n){Fs(e)&&n.delete(t)}function Os(){for(Cn=!1;0<Dn.length;){var e=Dn[0];if(null!==e.blockedOn){null!==(e=Uu(e.blockedOn))&&kn(e);break}for(var t=e.targetContainers;0<t.length;){var n=Xs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n){e.blockedOn=n;break}t.shift()}null===e.blockedOn&&Dn.shift()}null!==Mn&&Fs(Mn)&&(Mn=null),null!==Fn&&Fs(Fn)&&(Fn=null),null!==Nn&&Fs(Nn)&&(Nn=null),On.forEach(Ns),Tn.forEach(Ns)}function Ts(e,t){e.blockedOn===t&&(e.blockedOn=null,Cn||(Cn=!0,_t().unstable_scheduleCallback(_t().unstable_NormalPriority,Os)))}function $s(e){function t(t){return Ts(t,e)}if(0<Dn.length){Ts(Dn[0],e);for(var n=1;n<Dn.length;n++){var r=Dn[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Mn&&Ts(Mn,e),null!==Fn&&Ts(Fn,e),null!==Nn&&Ts(Nn,e),On.forEach(t),Tn.forEach(t),n=0;n<$n.length;n++)(r=$n[n]).blockedOn===e&&(r.blockedOn=null);for(;0<$n.length&&null===(n=$n[0]).blockedOn;)Ms(n),null===n.blockedOn&&$n.shift()}function zs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}function Rs(e){if(Pn[e])return Pn[e];if(!Rn[e])return e;var t,n=Rn[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ln)return Pn[e]=n[t];return e}function Ps(e,t){for(var n=0;n<e.length;n+=2){var r=e[n],i=e[n+1];i="on"+(i[0].toUpperCase()+i.slice(1)),Wn.set(r,t),qn.set(r,i),Fa(i,[r])}}function Ls(e){if(0!=(1&e))return Vn=15,1;if(0!=(2&e))return Vn=14,2;if(0!=(4&e))return Vn=13,4;var t=24&e;return 0!==t?(Vn=12,t):0!=(32&e)?(Vn=11,32):0!==(t=192&e)?(Vn=10,t):0!=(256&e)?(Vn=9,256):0!==(t=3584&e)?(Vn=8,t):0!=(4096&e)?(Vn=7,4096):0!==(t=4186112&e)?(Vn=6,t):0!==(t=62914560&e)?(Vn=5,t):67108864&e?(Vn=4,67108864):0!=(134217728&e)?(Vn=3,134217728):0!==(t=805306368&e)?(Vn=2,t):0!=(1073741824&e)?(Vn=1,1073741824):(Vn=8,e)}function Bs(e,t){var n=e.pendingLanes;if(0===n)return Vn=0;var r=0,i=0,o=e.expiredLanes,a=e.suspendedLanes,s=e.pingedLanes;if(0!==o)r=o,i=Vn=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(r=Ls(u),i=Vn):0!==(s&=o)&&(r=Ls(s),i=Vn)}else 0!==(o=n&~a)?(r=Ls(o),i=Vn):0!==s&&(r=Ls(s),i=Vn);if(0===r)return 0;if(r=n&((0>(r=31-Gn(r))?0:1<<r)<<1)-1,0!==t&&t!==r&&0==(t&a)){if(Ls(t),i<=Vn)return t;Vn=i}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-Gn(t)),r|=e[n],t&=~i;return r}function Is(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function js(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Us(24&~t))?js(10,t):e;case 10:return 0===(e=Us(192&~t))?js(8,t):e;case 8:return 0===(e=Us(3584&~t))&&(0===(e=Us(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Us(805306368&~t))&&(t=268435456),t}throw Error(Ma(358,e))}function Us(e){return e&-e}function qs(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ws(e,t,n){e.pendingLanes|=t;var r=t-1;e.suspendedLanes&=r,e.pingedLanes&=r,(e=e.eventTimes)[t=31-Gn(t)]=n}function Hs(e){return 0===e?32:31-(Yn(e)/Xn|0)|0}function Vs(e,t,n,r){pn||gs();var i=Ys,o=pn;pn=!0;try{ms(i,e,t,n,r)}finally{(pn=o)||ys()}}function Gs(e,t,n,r){Jn(Qn,Ys.bind(null,e,t,n,r))}function Ys(e,t,n,r){var i;if(Kn)if((i=0==(4&t))&&0<Dn.length&&-1<zn.indexOf(e))e=As(null,e,t,n,r),Dn.push(e);else{var o=Xs(e,t,n,r);if(null===o)i&&Cs(e,r);else{if(i){if(-1<zn.indexOf(e))return e=As(o,e,t,n,r),void Dn.push(e);if(function(e,t,n,r,i){switch(t){case"focusin":return Mn=Ds(Mn,e,t,n,r,i),!0;case"dragenter":return Fn=Ds(Fn,e,t,n,r,i),!0;case"mouseover":return Nn=Ds(Nn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return On.set(o,Ds(On.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Tn.set(o,Ds(Tn.get(o)||null,e,t,n,r,i)),!0}return!1}(o,e,t,n,r))return;Cs(e,r)}Fu(e,t,r,null,n)}}}function Xs(e,t,n,r){var i=cs(r);if(null!==(i=ju(i))){var o=ws(i);if(null===o)i=null;else{var a=o.tag;if(13===a){if(null!==(i=_s(o)))return i;i=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null)}}return Fu(e,t,r,i,n),null}function Qs(){if(tr)return tr;var e,t,n=er,r=n.length,i="value"in Zn?Zn.value:Zn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return tr=i.slice(e,1<t?1-t:void 0)}function Js(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Ks(){return!0}function Zs(){return!1}function eu(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?Ks:Zs,this.isPropagationStopped=Zs,this}return St(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Ks)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Ks)},persist:function(){},isPersistent:Ks}),t}function tu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kr[e])&&!!t[e]}function nu(){return tu}function ru(e,t){switch(e){case"keyup":return-1!==$r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function iu(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}function ou(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ur[e.type]:"textarea"===t}function au(e,t,n,r){ds(r),0<(t=Ou(t,"onChange")).length&&(n=new rr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}function su(e){Su(e,0)}function uu(e){if(qa(qu(e)))return e}function lu(e,t){if("change"===e)return t}function cu(){qr&&(qr.detachEvent("onpropertychange",fu),Wr=qr=null)}function fu(e){if("value"===e.propertyName&&uu(Wr)){var t=[];if(au(t,Wr,e,cs(e)),e=su,pn)e(t);else{pn=!0;try{ps(e,t)}finally{pn=!1,ys()}}}}function du(e,t,n){"focusin"===e?(cu(),Wr=n,(qr=t).attachEvent("onpropertychange",fu)):"focusout"===e&&cu()}function hu(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return uu(Wr)}function pu(e,t){if("click"===e)return uu(t)}function mu(e,t){if("input"===e||"change"===e)return uu(t)}function gu(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t}function yu(e,t){if(Xr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!Qr.call(t,n[r])||!Xr(e[n[r]],t[n[r]]))return!1;return!0}function vu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function bu(e,t){var n,r=vu(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vu(r)}}function xu(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?xu(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function wu(){for(var e=window,t=Wa();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=Wa((e=t.contentWindow).document)}return t}function _u(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ku(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ti||null==Kr||Kr!==Wa(r)||("selectionStart"in(r=Kr)&&_u(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ei&&yu(ei,r)||(ei=r,0<(r=Ou(Zr,"onSelect")).length&&(t=new rr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Kr)))}function Eu(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,u){if(xs.apply(this,arguments),vn){if(!vn)throw Error(Ma(198));var l=bn;vn=!1,bn=null,xn||(xn=!0,wn=l)}}(r,t,void 0,e),e.currentTarget=null}function Su(e,t){t=0!=(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&i.isPropagationStopped())break e;Eu(i,s,l),o=u}else for(a=0;a<r.length;a++){if(u=(s=r[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&i.isPropagationStopped())break e;Eu(i,s,l),o=u}}}if(xn)throw e=wn,xn=!1,wn=null,e}function Au(e,t){var n=Hu(t),r=e+"__bubble";n.has(r)||(Mu(t,e,2,!1),n.add(r))}function Cu(e){e[ai]||(e[ai]=!0,At.forEach((function(t){oi.has(t)||Du(t,!1,e,null),Du(t,!0,e,null)})))}function Du(e,t,n,r){var i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===e&&9!==n.nodeType&&(o=n.ownerDocument),null!==r&&!t&&oi.has(e)){if("scroll"!==e)return;i|=2,o=r}var a=Hu(o),s=e+"__"+(t?"capture":"bubble");a.has(s)||(t&&(i|=4),Mu(o,e,i,t),a.add(s))}function Mu(e,t,n,r){var i=Wn.get(t);switch(void 0===i?2:i){case 0:i=Vs;break;case 1:i=Gs;break;default:i=Ys}n=i.bind(null,t,n,e),i=void 0,!gn||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Fu(e,t,n,r,i){var o=r;if(0==(1&t)&&0==(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===i||8===u.nodeType&&u.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=ju(s)))return;if(5===(u=a.tag)||6===u){r=o=a;continue e}s=s.parentNode}}r=r.return}!function(e,t,n){if(mn)return e(t,n);mn=!0;try{hn(e,t,n)}finally{mn=!1,ys()}}((function(){var r=o,i=cs(n),a=[];e:{var s=qn.get(e);if(void 0!==s){var u=rr,l=e;switch(e){case"keypress":if(0===Js(n))break e;case"keydown":case"keyup":u=Sr;break;case"focusin":l="focus",u=pr;break;case"focusout":l="blur",u=pr;break;case"beforeblur":case"afterblur":u=pr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=cr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=dr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=Mr;break;case Bn:case In:case jn:u=gr;break;case Un:u=Nr;break;case"scroll":u=or;break;case"wheel":u=Tr;break;case"copy":case"cut":case"paste":u=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Cr}var c=0!=(4&t),f=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var h,p=r;null!==p;){var m=(h=p).stateNode;if(5===h.tag&&null!==m&&(h=m,null!==d&&(null!=(m=vs(p,d))&&c.push(Nu(p,m,h)))),f)break;p=p.return}0<c.length&&(s=new u(s,l,null,n,i),a.push({event:s,listeners:c}))}}if(0==(7&t)){if(u="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||0!=(16&t)||!(l=n.relatedTarget||n.fromElement)||!ju(l)&&!l[mi])&&(u||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=r,null!==(l=(l=n.relatedTarget||n.toElement)?ju(l):null)&&(l!==(f=ws(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=r),u!==l)){if(c=cr,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=Cr,m="onPointerLeave",d="onPointerEnter",p="pointer"),f=null==u?s:qu(u),h=null==l?s:qu(l),(s=new c(m,p+"leave",u,n,i)).target=f,s.relatedTarget=h,m=null,ju(i)===r&&((c=new c(d,p+"enter",l,n,i)).target=h,c.relatedTarget=f,m=c),f=m,u&&l)e:{for(d=l,p=0,h=c=u;h;h=Tu(h))p++;for(h=0,m=d;m;m=Tu(m))h++;for(;0<p-h;)c=Tu(c),p--;for(;0<h-p;)d=Tu(d),h--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Tu(c),d=Tu(d)}c=null}else c=null;null!==u&&$u(a,s,u,c,!1),null!==l&&null!==f&&$u(a,f,l,c,!0)}if("select"===(u=(s=r?qu(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=lu;else if(ou(s))if(Hr)g=mu;else{g=hu;var y=du}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=pu);switch(g&&(g=g(e,r))?au(a,g,n,i):(y&&y(e,s,r),"focusout"===e&&(y=s._wrapperState)&&y.controlled&&"number"===s.type&&Qa(s,"number",s.value)),y=r?qu(r):window,e){case"focusin":(ou(y)||"true"===y.contentEditable)&&(Kr=y,Zr=r,ei=null);break;case"focusout":ei=Zr=Kr=null;break;case"mousedown":ti=!0;break;case"contextmenu":case"mouseup":case"dragend":ti=!1,ku(a,n,i);break;case"selectionchange":if(Jr)break;case"keydown":case"keyup":ku(a,n,i)}var v;if(zr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else jr?ru(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Lr&&"ko"!==n.locale&&(jr||"onCompositionStart"!==b?"onCompositionEnd"===b&&jr&&(v=Qs()):(er="value"in(Zn=i)?Zn.value:Zn.textContent,jr=!0)),0<(y=Ou(r,b)).length&&(b=new xr(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=iu(n))&&(b.data=v))),(v=Pr?function(e,t){switch(e){case"compositionend":return iu(t);case"keypress":return 32!==t.which?null:(Ir=!0,Br);case"textInput":return(e=t.data)===Br&&Ir?null:e;default:return null}}(e,n):function(e,t){if(jr)return"compositionend"===e||!zr&&ru(e,t)?(e=Qs(),tr=er=Zn=null,jr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))&&(0<(r=Ou(r,"onBeforeInput")).length&&(i=new xr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Su(a,t)}))}function Nu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ou(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=vs(e,n))&&r.unshift(Nu(e,o,i)),null!=(o=vs(e,t))&&r.push(Nu(e,o,i))),e=e.return}return r}function Tu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $u(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===r)break;5===s.tag&&null!==l&&(s=l,i?null!=(u=vs(n,o))&&a.unshift(Nu(n,u,s)):i||null!=(u=vs(n,o))&&a.push(Nu(n,u,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}function zu(){}function Ru(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Pu(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}function Lu(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Bu(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function Iu(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function ju(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Iu(e);null!==e;){if(n=e[hi])return n;e=Iu(e)}return t}n=(e=n).parentNode}return null}function Uu(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function qu(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(Ma(33))}function Wu(e){return e[pi]||null}function Hu(e){var t=e[gi];return void 0===t&&(t=e[gi]=new Set),t}function Vu(e){return{current:e}}function Gu(e){0>vi||(e.current=yi[vi],yi[vi]=null,vi--)}function Yu(e,t){vi++,yi[vi]=e.current,e.current=t}function Xu(e,t){var n=e.type.contextTypes;if(!n)return bi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Qu(e){return null!=(e=e.childContextTypes)}function Ju(){Gu(wi),Gu(xi)}function Ku(e,t,n){if(xi.current!==bi)throw Error(Ma(168));Yu(xi,t),Yu(wi,n)}function Zu(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(Ma(108,Ba(t)||"Unknown",i));return St({},n,r)}function el(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bi,_i=xi.current,Yu(xi,e),Yu(wi,wi.current),!0}function tl(e,t,n){var r=e.stateNode;if(!r)throw Error(Ma(169));n?(e=Zu(e,t,_i),r.__reactInternalMemoizedMergedChildContext=e,Gu(wi),Gu(xi),Yu(xi,e)):Gu(wi),Yu(wi,n)}function nl(){switch(Ni()){case Oi:return 99;case Ti:return 98;case $i:return 97;case zi:return 96;case Ri:return 95;default:throw Error(Ma(332))}}function rl(e){switch(e){case 99:return Oi;case 98:return Ti;case 97:return $i;case 96:return zi;case 95:return Ri;default:throw Error(Ma(332))}}function il(e,t){return e=rl(e),Si(e,t)}function ol(e,t,n){return e=rl(e),Ai(e,t,n)}function al(){if(null!==Ii){var e=Ii;Ii=null,Ci(e)}sl()}function sl(){if(!ji&&null!==Bi){ji=!0;var e=0;try{var t=Bi;il(99,(function(){for(;e<t.length;e++){var n=t[e];do{n=n(!0)}while(null!==n)}})),Bi=null}catch(t){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ai(Oi,al),t}finally{ji=!1}}}function ul(e,t){if(e&&e.defaultProps){for(var n in t=St({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ll(){Yi=Gi=Vi=null}function cl(e){var t=Hi.current;Gu(Hi),e.type._context._currentValue=t}function fl(e,t){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)===t){if(null===n||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,null!==n&&(n.childLanes|=t);e=e.return}}function dl(e,t){Vi=e,Yi=Gi=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!=(e.lanes&t)&&(Eo=!0),e.firstContext=null)}function hl(e,t){if(Yi!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(Yi=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Gi){if(null===Vi)throw Error(Ma(308));Gi=t,Vi.dependencies={lanes:0,firstContext:t,responders:null}}else Gi=Gi.next=t;return e._currentValue}function pl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ml(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yl(e,t){if(null!==(e=e.updateQueue)){var n=(e=e.shared).pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function vl(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bl(e,t,n,r){var i=e.updateQueue;Xi=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var u=s,l=u.next;u.next=null,null===a?o=l:a.next=l,a=u;var c=e.alternate;if(null!==c){var f=(c=c.updateQueue).lastBaseUpdate;f!==a&&(null===f?c.firstBaseUpdate=l:f.next=l,c.lastBaseUpdate=u)}}if(null!==o){for(f=i.baseState,a=0,c=l=u=null;;){s=o.lane;var d=o.eventTime;if((r&s)===s){null!==c&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var h=e,p=o;switch(s=t,d=n,p.tag){case 1:if("function"==typeof(h=p.payload)){f=h.call(d,f,s);break e}f=h;break e;case 3:h.flags=-4097&h.flags|64;case 0:if(null==(s="function"==typeof(h=p.payload)?h.call(d,f,s):h))break e;f=St({},f,s);break e;case 2:Xi=!0}}null!==o.callback&&(e.flags|=32,null===(s=i.effects)?i.effects=[o]:s.push(o))}else d={eventTime:d,lane:s,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(l=c=d,u=f):c=c.next=d,a|=s;if(null===(o=o.next)){if(null===(s=i.shared.pending))break;o=s.next,s.next=null,i.lastBaseUpdate=s,i.shared.pending=null}}null===c&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,Wo|=a,e.lanes=a,e.memoizedState=f}}function xl(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(Ma(191,i));i.call(r)}}}function wl(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:St({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}function _l(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!yu(n,r)||!yu(i,o))}function kl(e,t,n){var r=!1,i=bi,o=t.contextType;return"object"==typeof o&&null!==o?o=hl(o):(i=Qu(t)?_i:xi.current,o=(r=null!=(r=t.contextTypes))?Xu(e,i):bi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Ji,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function El(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ji.enqueueReplaceState(t,t.state,null)}function Sl(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Qi,pl(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=hl(o):(o=Qu(t)?_i:xi.current,i.context=Xu(e,o)),bl(e,n,i,r),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(wl(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Ji.enqueueReplaceState(i,i.state,null),bl(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4)}function Al(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(Ma(309));var r=n.stateNode}if(!r)throw Error(Ma(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Qi&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(Ma(284));if(!n._owner)throw Error(Ma(290,e))}return e}function Cl(e,t){if("textarea"!==e.type)throw Error(Ma(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Dl(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Rf(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags=2,n):r:(t.flags=2,n):n}function a(t){return e&&null===t.alternate&&(t.flags=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=If(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){return null!==t&&t.elementType===n.type?((r=i(t,n.props)).ref=Al(e,t,n),r.return=e,r):((r=Pf(n.type,n.key,n.props,null,e.mode,r)).ref=Al(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=jf(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Lf(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function f(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=If(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case Rt:return(n=Pf(t.type,t.key,t.props,null,e.mode,n)).ref=Al(e,null,t),n.return=e,n;case Pt:return(t=jf(t,e.mode,n)).return=e,t}if(Ki(t)||za(t))return(t=Lf(t,e.mode,n,null)).return=e,t;Cl(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case Rt:return n.key===i?n.type===Lt?c(e,t,n.props.children,r,i):u(e,t,n,r):null;case Pt:return n.key===i?l(e,t,n,r):null}if(Ki(n)||za(n))return null!==i?null:c(e,t,n,r,null);Cl(e,n)}return null}function h(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case Rt:return e=e.get(null===r.key?n:r.key)||null,r.type===Lt?c(t,e,r.props.children,i,r.key):u(t,e,r,i);case Pt:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Ki(r)||za(r))return c(t,e=e.get(n)||null,r,i,null);Cl(t,r)}return null}function p(i,a,s,u){for(var l=null,c=null,p=a,m=a=0,g=null;null!==p&&m<s.length;m++){p.index>m?(g=p,p=null):g=p.sibling;var y=d(i,p,s[m],u);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(i,p),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y,p=g}if(m===s.length)return n(i,p),l;if(null===p){for(;m<s.length;m++)null!==(p=f(i,s[m],u))&&(a=o(p,a,m),null===c?l=p:c.sibling=p,c=p);return l}for(p=r(i,p);m<s.length;m++)null!==(g=h(p,i,m,s[m],u))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return e&&p.forEach((function(e){return t(i,e)})),l}function m(i,a,s,u){var l=za(s);if("function"!=typeof l)throw Error(Ma(150));if(null==(s=l.call(s)))throw Error(Ma(151));for(var c=l=null,p=a,m=a=0,g=null,y=s.next();null!==p&&!y.done;m++,y=s.next()){p.index>m?(g=p,p=null):g=p.sibling;var v=d(i,p,y.value,u);if(null===v){null===p&&(p=g);break}e&&p&&null===v.alternate&&t(i,p),a=o(v,a,m),null===c?l=v:c.sibling=v,c=v,p=g}if(y.done)return n(i,p),l;if(null===p){for(;!y.done;m++,y=s.next())null!==(y=f(i,y.value,u))&&(a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return l}for(p=r(i,p);!y.done;m++,y=s.next())null!==(y=h(p,i,m,y.value,u))&&(e&&null!==y.alternate&&p.delete(null===y.key?m:y.key),a=o(y,a,m),null===c?l=y:c.sibling=y,c=y);return e&&p.forEach((function(e){return t(i,e)})),l}return function(e,r,o,s){var u="object"==typeof o&&null!==o&&o.type===Lt&&null===o.key;u&&(o=o.props.children);var l="object"==typeof o&&null!==o;if(l)switch(o.$$typeof){case Rt:e:{for(l=o.key,u=r;null!==u;){if(u.key===l){switch(u.tag){case 7:if(o.type===Lt){n(e,u.sibling),(r=i(u,o.props.children)).return=e,e=r;break e}break;default:if(u.elementType===o.type){n(e,u.sibling),(r=i(u,o.props)).ref=Al(e,u,o),r.return=e,e=r;break e}}n(e,u);break}t(e,u),u=u.sibling}o.type===Lt?((r=Lf(o.props.children,e.mode,s,o.key)).return=e,e=r):((s=Pf(o.type,o.key,o.props,null,e.mode,s)).ref=Al(e,r,o),s.return=e,e=s)}return a(e);case Pt:e:{for(u=o.key;null!==r;){if(r.key===u){if(4===r.tag&&r.stateNode.containerInfo===o.containerInfo&&r.stateNode.implementation===o.implementation){n(e,r.sibling),(r=i(r,o.children||[])).return=e,e=r;break e}n(e,r);break}t(e,r),r=r.sibling}(r=jf(o,e.mode,s)).return=e,e=r}return a(e)}if("string"==typeof o||"number"==typeof o)return o=""+o,null!==r&&6===r.tag?(n(e,r.sibling),(r=i(r,o)).return=e,e=r):(n(e,r),(r=If(o,e.mode,s)).return=e,e=r),a(e);if(Ki(o))return p(e,r,o,s);if(za(o))return m(e,r,o,s);if(l&&Cl(e,o),void 0===o&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ma(152,Ba(e.type)||"Component"))}return n(e,r)}}function Ml(e){if(e===to)throw Error(Ma(174));return e}function Fl(e,t){switch(Yu(io,t),Yu(ro,e),Yu(no,to),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:is(null,"");break;default:t=is(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Gu(no),Yu(no,t)}function Nl(){Gu(no),Gu(ro),Gu(io)}function Ol(e){Ml(io.current);var t=Ml(no.current),n=is(t,e.type);t!==n&&(Yu(ro,e),Yu(no,n))}function Tl(e){ro.current===e&&(Gu(no),Gu(ro))}function $l(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function zl(e,t){var n=$f(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Rl(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Pl(e){if(uo){var t=so;if(t){var n=t;if(!Rl(e,t)){if(!(t=Bu(n.nextSibling))||!Rl(e,t))return e.flags=-1025&e.flags|2,uo=!1,void(ao=e);zl(ao,n)}ao=e,so=Bu(t.firstChild)}else e.flags=-1025&e.flags|2,uo=!1,ao=e}}function Ll(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ao=e}function Bl(e){if(e!==ao)return!1;if(!uo)return Ll(e),uo=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Pu(t,e.memoizedProps))for(t=so;t;)zl(e,t),t=Bu(t.nextSibling);if(Ll(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(Ma(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){so=Bu(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}so=null}}else so=ao?Bu(e.stateNode.nextSibling):null;return!0}function Il(){so=ao=null,uo=!1}function jl(){for(var e=0;e<lo.length;e++)lo[e]._workInProgressVersionPrimary=null;lo.length=0}function Ul(){throw Error(Ma(321))}function ql(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xr(e[n],t[n]))return!1;return!0}function Wl(e,t,n,r,i,o){if(ho=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,co.current=null===e||null===e.memoizedState?xo:wo,e=n(r,i),vo){o=0;do{if(vo=!1,!(25>o))throw Error(Ma(301));o+=1,go=mo=null,t.updateQueue=null,co.current=_o,e=n(r,i)}while(vo)}if(co.current=bo,t=null!==mo&&null!==mo.next,ho=0,go=mo=po=null,yo=!1,t)throw Error(Ma(300));return e}function Hl(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?po.memoizedState=go=e:go=go.next=e,go}function Vl(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?po.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(Ma(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?po.memoizedState=go=e:go=go.next=e}return go}function Gl(e,t){return"function"==typeof t?t(e):t}function Yl(e){var t=Vl(),n=t.queue;if(null===n)throw Error(Ma(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){i=i.next,r=r.baseState;var s=a=o=null,u=i;do{var l=u.lane;if((ho&l)===l)null!==s&&(s=s.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),r=u.eagerReducer===e?u.eagerState:e(r,u.action);else{var c={lane:l,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===s?(a=s=c,o=r):s=s.next=c,po.lanes|=l,Wo|=l}u=u.next}while(null!==u&&u!==i);null===s?o=r:s.next=a,Xr(r,t.memoizedState)||(Eo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=s,n.lastRenderedState=r}return[t.memoizedState,n.dispatch]}function Xl(e){var t=Vl(),n=t.queue;if(null===n)throw Error(Ma(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);Xr(o,t.memoizedState)||(Eo=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ql(e,t,n){var r=t._getVersion;r=r(t._source);var i=t._workInProgressVersionPrimary;if(null!==i?e=i===r:(e=e.mutableReadLanes,(e=(ho&e)===e)&&(t._workInProgressVersionPrimary=r,lo.push(t))),e)return n(t._source);throw lo.push(t),Error(Ma(350))}function Jl(e,t,n,r){var i=Ro;if(null===i)throw Error(Ma(349));var o=t._getVersion,a=o(t._source),s=co.current,u=s.useState((function(){return Ql(i,t,n)})),l=u[1],c=u[0];u=go;var f=e.memoizedState,d=f.refs,h=d.getSnapshot,p=f.source;f=f.subscribe;var m=po;return e.memoizedState={refs:d,source:t,subscribe:r},s.useEffect((function(){d.getSnapshot=n,d.setSnapshot=l;var e=o(t._source);if(!Xr(a,e)){e=n(t._source),Xr(c,e)||(l(e),e=nf(m),i.mutableReadLanes|=e&i.pendingLanes),e=i.mutableReadLanes,i.entangledLanes|=e;for(var r=i.entanglements,s=e;0<s;){var u=31-Gn(s),f=1<<u;r[u]|=e,s&=~f}}}),[n,t,r]),s.useEffect((function(){return r(t._source,(function(){var e=d.getSnapshot,n=d.setSnapshot;try{n(e(t._source));var r=nf(m);i.mutableReadLanes|=r&i.pendingLanes}catch(e){n((function(){throw e}))}}))}),[t,r]),Xr(h,n)&&Xr(p,t)&&Xr(f,r)||((e={pending:null,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:c}).dispatch=l=pc.bind(null,po,e),u.queue=e,u.baseQueue=null,c=Ql(i,t,n),u.memoizedState=u.baseState=c),c}function Kl(e,t,n){return Jl(Vl(),e,t,n)}function Zl(e){var t=Hl();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Gl,lastRenderedState:e}).dispatch=pc.bind(null,po,e),[t.memoizedState,e]}function ec(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function tc(e){return e={current:e},Hl().memoizedState=e}function nc(){return Vl().memoizedState}function rc(e,t,n,r){var i=Hl();po.flags|=e,i.memoizedState=ec(1|t,n,void 0,void 0===r?null:r)}function ic(e,t,n,r){var i=Vl();r=void 0===r?null:r;var o=void 0;if(null!==mo){var a=mo.memoizedState;if(o=a.destroy,null!==r&&ql(r,a.deps))return void ec(t,n,o,r)}po.flags|=e,i.memoizedState=ec(1|t,n,o,r)}function oc(e,t){return rc(516,4,e,t)}function ac(e,t){return ic(516,4,e,t)}function sc(e,t){return ic(4,2,e,t)}function uc(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function lc(e,t,n){return n=null!=n?n.concat([e]):null,ic(4,2,uc.bind(null,t,e),n)}function cc(){}function fc(e,t){var n=Vl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ql(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function dc(e,t){var n=Vl();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ql(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function hc(e,t){var n=nl();il(98>n?98:n,(function(){e(!0)})),il(97<n?97:n,(function(){var n=fo.transition;fo.transition=1;try{e(!1),t()}finally{fo.transition=n}}))}function pc(e,t,n){var r=tf(),i=nf(e),o={lane:i,action:n,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),t.pending=o,a=e.alternate,e===po||null!==a&&a===po)vo=yo=!0;else{if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var s=t.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,Xr(u,s))return}catch(e){}rf(e,i,r)}}function mc(e,t,n,r){t.child=null===e?eo(t,null,n,r):Zi(t,e.child,n,r)}function gc(e,t,n,r,i){n=n.render;var o=t.ref;return dl(t,i),r=Wl(e,t,n,r,o,i),null===e||Eo?(t.flags|=1,mc(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Oc(e,t,i))}function yc(e,t,n,r,i,o){if(null===e){var a=n.type;return"function"!=typeof a||zf(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Pf(n.type,null,r,t,t.mode,o)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,vc(e,t,a,r,i,o))}return a=e.child,0==(i&o)&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:yu)(i,r)&&e.ref===t.ref)?Oc(e,t,o):(t.flags|=1,(e=Rf(a,r)).ref=t.ref,e.return=t,t.child=e)}function vc(e,t,n,r,i,o){if(null!==e&&yu(e.memoizedProps,r)&&e.ref===t.ref){if(Eo=!1,0==(o&i))return t.lanes=e.lanes,Oc(e,t,o);0!=(16384&e.flags)&&(Eo=!0)}return wc(e,t,n,r,o)}function bc(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode||"unstable-defer-without-hiding"===r.mode)if(0==(4&t.mode))t.memoizedState={baseLanes:0},df(t,n);else{if(0==(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},df(t,e),null;t.memoizedState={baseLanes:0},df(t,null!==o?o.baseLanes:n)}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,df(t,r);return mc(e,t,i,n),t.child}function xc(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=128)}function wc(e,t,n,r,i){var o=Qu(n)?_i:xi.current;return o=Xu(t,o),dl(t,i),n=Wl(e,t,n,r,o,i),null===e||Eo?(t.flags|=1,mc(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~i,Oc(e,t,i))}function _c(e,t,n,r,i){if(Qu(n)){var o=!0;el(t)}else o=!1;if(dl(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),kl(t,n,r),Sl(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"==typeof l&&null!==l?l=hl(l):l=Xu(t,l=Qu(n)?_i:xi.current);var c=n.getDerivedStateFromProps,f="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;f||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||u!==l)&&El(t,a,r,l),Xi=!1;var d=t.memoizedState;a.state=d,bl(t,r,a,i),u=t.memoizedState,s!==r||d!==u||wi.current||Xi?("function"==typeof c&&(wl(t,n,c,r),u=t.memoizedState),(s=Xi||_l(t,n,s,r,d,u,l))?(f||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4)):("function"==typeof a.componentDidMount&&(t.flags|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=l,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4),r=!1)}else{a=t.stateNode,ml(e,t),s=t.memoizedProps,l=t.type===t.elementType?s:ul(t.type,s),a.props=l,f=t.pendingProps,d=a.context,"object"==typeof(u=n.contextType)&&null!==u?u=hl(u):u=Xu(t,u=Qu(n)?_i:xi.current);var h=n.getDerivedStateFromProps;(c="function"==typeof h||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==f||d!==u)&&El(t,a,r,u),Xi=!1,d=t.memoizedState,a.state=d,bl(t,r,a,i);var p=t.memoizedState;s!==f||d!==p||wi.current||Xi?("function"==typeof h&&(wl(t,n,h,r),p=t.memoizedState),(l=Xi||_l(t,n,l,r,d,p,u))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,u),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,u)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=u,r=l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=256),r=!1)}return kc(e,t,n,r,o,i)}function kc(e,t,n,r,i,o){xc(e,t);var a=0!=(64&t.flags);if(!r&&!a)return i&&tl(t,n,!1),Oc(e,t,o);r=t.stateNode,ko.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Zi(t,e.child,null,o),t.child=Zi(t,null,s,o)):mc(e,t,s,o),t.memoizedState=r.state,i&&tl(t,n,!0),t.child}function Ec(e){var t=e.stateNode;t.pendingContext?Ku(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ku(0,t.context,!1),Fl(e,t.containerInfo)}function Sc(e,t,n){var r,i=t.pendingProps,o=oo.current,a=!1;return(r=0!=(64&t.flags))||(r=(null===e||null!==e.memoizedState)&&0!=(2&o)),r?(a=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===i.fallback||!0===i.unstable_avoidThisFallback||(o|=1),Yu(oo,1&o),null===e?(void 0!==i.fallback&&Pl(t),e=i.children,o=i.fallback,a?(e=Ac(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=So,e):"number"==typeof i.unstable_expectedLoadTime?(e=Ac(t,e,o,n),t.child.memoizedState={baseLanes:n},t.memoizedState=So,t.lanes=33554432,e):((n=Bf({mode:"visible",children:e},t.mode,n,null)).return=t,t.child=n)):(e.memoizedState,a?(i=Dc(e,t,i.children,i.fallback,n),a=t.child,o=e.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=So,i):(n=Cc(e,t,i.children,n),t.memoizedState=null,n))}function Ac(e,t,n,r){var i=e.mode,o=e.child;return t={mode:"hidden",children:t},0==(2&i)&&null!==o?(o.childLanes=0,o.pendingProps=t):o=Bf(t,i,0,null),n=Lf(n,i,r,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function Cc(e,t,n,r){var i=e.child;return e=i.sibling,n=Rf(i,{mode:"visible",children:n}),0==(2&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function Dc(e,t,n,r,i){var o=t.mode,a=e.child;e=a.sibling;var s={mode:"hidden",children:n};return 0==(2&o)&&t.child!==a?((n=t.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(t.firstEffect=n.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Rf(a,s),null!==e?r=Rf(e,r):(r=Lf(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function Mc(e,t){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),fl(e.return,t)}function Fc(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i,a.lastEffect=o)}function Nc(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(mc(e,t,r.children,n),0!=(2&(r=oo.current)))r=1&r|2,t.flags|=64;else{if(null!==e&&0!=(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Mc(e,n);else if(19===e.tag)Mc(e,n);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Yu(oo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===$l(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Fc(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===$l(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Fc(t,!0,n,null,o,t.lastEffect);break;case"together":Fc(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Oc(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Wo|=t.lanes,0!=(n&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(Ma(153));if(null!==t.child){for(n=Rf(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rf(e,e.pendingProps)).return=t;n.sibling=null}return t.child}return null}function Tc(e,t){if(!uo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function $c(e,t,n){var r=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Qu(t.type)&&Ju(),null;case 3:return Nl(),Gu(wi),Gu(xi),jl(),(r=t.stateNode).pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Bl(t)?t.flags|=4:r.hydrate||(t.flags|=256)),Co(t),null;case 5:Tl(t);var i=Ml(io.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!r){if(null===t.stateNode)throw Error(Ma(166));return null}if(e=Ml(no.current),Bl(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[pi]=o,n){case"dialog":Au("cancel",r),Au("close",r);break;case"iframe":case"object":case"embed":Au("load",r);break;case"video":case"audio":for(e=0;e<ii.length;e++)Au(ii[e],r);break;case"source":Au("error",r);break;case"img":case"image":case"link":Au("error",r),Au("load",r);break;case"details":Au("toggle",r);break;case"input":Va(r,o),Au("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Au("invalid",r);break;case"textarea":es(r,o),Au("invalid",r)}for(var a in us(n,o),e=null,o)o.hasOwnProperty(a)&&(i=o[a],"children"===a?"string"==typeof i?r.textContent!==i&&(e=["children",i]):"number"==typeof i&&r.textContent!==""+i&&(e=["children",""+i]):Ct.hasOwnProperty(a)&&null!=i&&"onScroll"===a&&Au("scroll",r));switch(n){case"input":Ua(r),Xa(r,o,!0);break;case"textarea":Ua(r),ns(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=zu)}r=e,t.updateQueue=r,null!==r&&(t.flags|=4)}else{switch(a=9===i.nodeType?i:i.ownerDocument,e===rn.html&&(e=rs(n)),e===rn.html?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[hi]=t,e[pi]=r,Ao(e,t,!1,!1),t.stateNode=e,a=ls(n,r),n){case"dialog":Au("cancel",e),Au("close",e),i=r;break;case"iframe":case"object":case"embed":Au("load",e),i=r;break;case"video":case"audio":for(i=0;i<ii.length;i++)Au(ii[i],e);i=r;break;case"source":Au("error",e),i=r;break;case"img":case"image":case"link":Au("error",e),Au("load",e),i=r;break;case"details":Au("toggle",e),i=r;break;case"input":Va(e,r),i=Ha(e,r),Au("invalid",e);break;case"option":i=Ja(e,r);break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=St({},r,{value:void 0}),Au("invalid",e);break;case"textarea":es(e,r),i=Za(e,r),Au("invalid",e);break;default:i=r}us(n,i);var s=i;for(o in s)if(s.hasOwnProperty(o)){var u=s[o];"style"===o?ss(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&an(e,u):"children"===o?"string"==typeof u?("textarea"!==n||""!==u)&&os(e,u):"number"==typeof u&&os(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(Ct.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Au("scroll",e):null!=u&&$a(e,o,u,a))}switch(n){case"input":Ua(e),Xa(e,r,!1);break;case"textarea":Ua(e),ns(e);break;case"option":null!=r.value&&e.setAttribute("value",""+Ia(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?Ka(e,!!r.multiple,o,!1):null!=r.defaultValue&&Ka(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=zu)}Ru(n,r)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Mo(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(Ma(166));n=Ml(io.current),Ml(no.current),Bl(t)?(r=t.stateNode,n=t.memoizedProps,r[hi]=t,r.nodeValue!==n&&(t.flags|=4)):((r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r)}return null;case 13:return Gu(oo),r=t.memoizedState,0!=(64&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?void 0!==t.memoizedProps.fallback&&Bl(t):n=null!==e.memoizedState,r&&!n&&0!=(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&oo.current)?0===jo&&(jo=3):(0!==jo&&3!==jo||(jo=4),null===Ro||0==(134217727&Wo)&&0==(134217727&Ho)||uf(Ro,Lo))),(r||n)&&(t.flags|=4),null);case 4:return Nl(),Co(t),null===e&&Cu(t.stateNode.containerInfo),null;case 10:return cl(t),null;case 17:return Qu(t.type)&&Ju(),null;case 19:if(Gu(oo),null===(r=t.memoizedState))return null;if(o=0!=(64&t.flags),null===(a=r.rendering))if(o)Tc(r,!1);else{if(0!==jo||null!==e&&0!=(64&e.flags))for(e=t.child;null!==e;){if(null!==(a=$l(e))){for(t.flags|=64,Tc(r,!1),null!==(o=a.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===r.lastEffect&&(t.firstEffect=null),t.lastEffect=r.lastEffect,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Yu(oo,1&oo.current|2),t.child}e=e.sibling}null!==r.tail&&qi()>Xo&&(t.flags|=64,o=!0,Tc(r,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=$l(a))){if(t.flags|=64,o=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Tc(r,!0),null===r.tail&&"hidden"===r.tailMode&&!a.alternate&&!uo)return null!==(t=t.lastEffect=r.lastEffect)&&(t.nextEffect=null),null}else 2*qi()-r.renderingStartTime>Xo&&1073741824!==n&&(t.flags|=64,o=!0,Tc(r,!1),t.lanes=33554432);r.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=r.last)?n.sibling=a:t.child=a,r.last=a)}return null!==r.tail?(n=r.tail,r.rendering=n,r.tail=n.sibling,r.lastEffect=t.lastEffect,r.renderingStartTime=qi(),n.sibling=null,t=oo.current,Yu(oo,o?1&t|2:1&t),n):null;case 23:case 24:return hf(),null!==e&&null!==e.memoizedState!=(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==r.mode&&(t.flags|=4),null}throw Error(Ma(156,t.tag))}function zc(e){switch(e.tag){case 1:Qu(e.type)&&Ju();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Nl(),Gu(wi),Gu(xi),jl(),0!=(64&(t=e.flags)))throw Error(Ma(285));return e.flags=-4097&t|64,e;case 5:return Tl(e),null;case 13:return Gu(oo),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return Gu(oo),null;case 4:return Nl(),null;case 10:return cl(e),null;case 23:case 24:return hf(),null;default:return null}}function Rc(e,t){try{var n="",r=t;do{n+=La(r),r=r.return}while(r);var i=n}catch(e){i="\nError generating stack: "+e.message+"\n"+e.stack}return{value:e,source:t,stack:i}}function Pc(e,t){try{console.error(t.value)}catch(e){setTimeout((function(){throw e}))}}function Lc(e,t,n){(n=gl(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Jo||(Jo=!0,Ko=r),Pc(0,t)},n}function Bc(e,t,n){(n=gl(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return Pc(0,t),r(i)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){"function"!=typeof r&&(null===Zo?Zo=new Set([this]):Zo.add(this),Pc(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ic(e){var t=e.ref;if(null!==t)if("function"==typeof t)try{t(null)}catch(t){Ff(e,t)}else t.current=null}function jc(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:ul(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Lu(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(Ma(163))}function Uc(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3==(3&e.tag)){var r=e.create;e.destroy=r()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=n.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var i=e;r=i.next,0!=(4&(i=i.tag))&&0!=(1&i)&&(Cf(n,e),Af(n,e)),e=r}while(e!==t)}return;case 1:return e=n.stateNode,4&n.flags&&(null===t?e.componentDidMount():(r=n.elementType===n.type?t.memoizedProps:ul(n.type,t.memoizedProps),e.componentDidUpdate(r,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=n.updateQueue)&&xl(n,t,e));case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}xl(n,t,e)}return;case 5:return e=n.stateNode,void(null===t&&4&n.flags&&Ru(n.type,n.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&$s(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Ma(163))}function qc(e,t){for(var n=e;;){if(5===n.tag){var r=n.stateNode;if(t)"function"==typeof(r=r.style).setProperty?r.setProperty("display","none","important"):r.display="none";else{r=n.stateNode;var i=n.memoizedProps.style;i=null!=i&&i.hasOwnProperty("display")?i.display:null,r.style.display=as("display",i)}}else if(6===n.tag)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===e)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function Wc(e,t){if(Ei&&"function"==typeof Ei.onCommitFiberUnmount)try{Ei.onCommitFiberUnmount(ki,t)}catch(e){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var n=e=e.next;do{var r=n,i=r.destroy;if(r=r.tag,void 0!==i)if(0!=(4&r))Cf(t,n);else{r=t;try{i()}catch(e){Ff(r,e)}}n=n.next}while(n!==e)}break;case 1:if(Ic(t),"function"==typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Ff(t,e)}break;case 5:Ic(t);break;case 4:Qc(e,t)}}function Hc(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Vc(e){return 5===e.tag||3===e.tag||4===e.tag}function Gc(e){e:{for(var t=e.return;null!==t;){if(Vc(t))break e;t=t.return}throw Error(Ma(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(Ma(161))}16&n.flags&&(os(t,""),n.flags&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||Vc(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break e}}r?Yc(e,n,t):Xc(e,n,t)}function Yc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=zu));else if(4!==r&&null!==(e=e.child))for(Yc(e,t,n),e=e.sibling;null!==e;)Yc(e,t,n),e=e.sibling}function Xc(e,t,n){var r=e.tag,i=5===r||6===r;if(i)e=i?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(Xc(e,t,n),e=e.sibling;null!==e;)Xc(e,t,n),e=e.sibling}function Qc(e,t){for(var n,r,i=t,o=!1;;){if(!o){o=i.return;e:for(;;){if(null===o)throw Error(Ma(160));switch(n=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:n=n.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===i.tag||6===i.tag){e:for(var a=e,s=i,u=s;;)if(Wc(a,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===s)break e;for(;null===u.sibling;){if(null===u.return||u.return===s)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r?(a=n,s=i.stateNode,8===a.nodeType?a.parentNode.removeChild(s):a.removeChild(s)):n.removeChild(i.stateNode)}else if(4===i.tag){if(null!==i.child){n=i.stateNode.containerInfo,r=!0,i.child.return=i,i=i.child;continue}}else if(Wc(e,i),null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;4===(i=i.return).tag&&(o=!1)}i.sibling.return=i.return,i=i.sibling}}function Jc(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var r=n=n.next;do{3==(3&r.tag)&&(e=r.destroy,r.destroy=void 0,void 0!==e&&e()),r=r.next}while(r!==n)}return;case 1:return;case 5:if(null!=(n=t.stateNode)){r=t.memoizedProps;var i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,null!==o){for(n[pi]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ga(n,r),ls(e,i),t=ls(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?ss(n,s):"dangerouslySetInnerHTML"===a?an(n,s):"children"===a?os(n,s):$a(n,a,s,t)}switch(e){case"input":Ya(n,r);break;case"textarea":ts(n,r);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(o=r.value)?Ka(n,!!r.multiple,o,!1):e!==!!r.multiple&&(null!=r.defaultValue?Ka(n,!!r.multiple,r.defaultValue,!0):Ka(n,!!r.multiple,r.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(Ma(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((n=t.stateNode).hydrate&&(n.hydrate=!1,$s(n.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(Yo=qi(),qc(t.child,!0)),void Kc(t);case 19:return void Kc(t);case 17:return;case 23:case 24:return void qc(t,null!==t.memoizedState)}throw Error(Ma(163))}function Kc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new No),t.forEach((function(t){var r=Of.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function Zc(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}function ef(){Xo=qi()+500}function tf(){return 0!=(48&zo)?qi():-1!==ua?ua:ua=qi()}function nf(e){if(0==(2&(e=e.mode)))return 1;if(0==(4&e))return 99===nl()?1:2;if(0===la&&(la=qo),0!==Wi.transition){0!==ca&&(ca=null!==Go?Go.pendingLanes:0),e=la;var t=4186112&~ca;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=nl(),0!=(4&zo)&&98===e?e=js(12,la):e=js(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),la),e}function rf(e,t,n){if(50<aa)throw aa=0,sa=null,Error(Ma(185));if(null===(e=of(e,t)))return null;Ws(e,t,n),e===Ro&&(Ho|=t,4===jo&&uf(e,Lo));var r=nl();1===t?0!=(8&zo)&&0==(48&zo)?lf(e):(af(e,n),0===zo&&(ef(),al())):(0==(4&zo)||98!==r&&99!==r||(null===oa?oa=new Set([e]):oa.add(e)),af(e,n)),Go=e}function of(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function af(e,t){for(var n=e.callbackNode,r=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-Gn(a),u=1<<s,l=o[s];if(-1===l){if(0==(u&r)||0!=(u&i)){l=t,Ls(u);var c=Vn;o[s]=10<=c?l+250:6<=c?l+5e3:-1}}else l<=t&&(e.expiredLanes|=u);a&=~u}if(r=Bs(e,e===Ro?Lo:0),t=Vn,0===r)null!==n&&(n!==Pi&&Ci(n),e.callbackNode=null,e.callbackPriority=0);else{if(null!==n){if(e.callbackPriority===t)return;n!==Pi&&Ci(n)}15===t?(n=lf.bind(null,e),null===Bi?(Bi=[n],Ii=Ai(Oi,sl)):Bi.push(n),n=Pi):14===t?n=ol(99,lf.bind(null,e)):n=ol(n=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ma(358,e))}}(t),sf.bind(null,e)),e.callbackPriority=t,e.callbackNode=n}}function sf(e){if(ua=-1,ca=la=0,0!=(48&zo))throw Error(Ma(327));var t=e.callbackNode;if(Sf()&&e.callbackNode!==t)return null;var n=Bs(e,e===Ro?Lo:0);if(0===n)return null;var r=n,i=zo;zo|=16;var o=gf();for(Ro===e&&Lo===r||(ef(),pf(e,r));;)try{bf();break}catch(t){mf(e,t)}if(ll(),To.current=o,zo=i,null!==Po?r=0:(Ro=null,Lo=0,r=jo),0!=(qo&Ho))pf(e,0);else if(0!==r){if(2===r&&(zo|=64,e.hydrate&&(e.hydrate=!1,Lu(e.containerInfo)),0!==(n=Is(e))&&(r=yf(e,n))),1===r)throw t=Uo,pf(e,0),uf(e,n),af(e,qi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,r){case 0:case 1:throw Error(Ma(345));case 2:_f(e);break;case 3:if(uf(e,n),(62914560&n)===n&&10<(r=Yo+500-qi())){if(0!==Bs(e,0))break;if(((i=e.suspendedLanes)&n)!==n){tf(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=li(_f.bind(null,e),r);break}_f(e);break;case 4:if(uf(e,n),(4186112&n)===n)break;for(r=e.eventTimes,i=-1;0<n;){var a=31-Gn(n);o=1<<a,(a=r[a])>i&&(i=a),n&=~o}if(n=i,10<(n=(120>(n=qi()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Oo(n/1960))-n)){e.timeoutHandle=li(_f.bind(null,e),n);break}_f(e);break;case 5:_f(e);break;default:throw Error(Ma(329))}}return af(e,qi()),e.callbackNode===t?sf.bind(null,e):null}function uf(e,t){for(t&=~Vo,t&=~Ho,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Gn(t),r=1<<n;e[n]=-1,t&=~r}}function lf(e){if(0!=(48&zo))throw Error(Ma(327));if(Sf(),e===Ro&&0!=(e.expiredLanes&Lo)){var t=Lo,n=yf(e,t);0!=(qo&Ho)&&(n=yf(e,t=Bs(e,t)))}else n=yf(e,t=Bs(e,0));if(0!==e.tag&&2===n&&(zo|=64,e.hydrate&&(e.hydrate=!1,Lu(e.containerInfo)),0!==(t=Is(e))&&(n=yf(e,t))),1===n)throw n=Uo,pf(e,0),uf(e,t),af(e,qi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,_f(e),af(e,qi()),null}function cf(e,t){var n=zo;zo|=1;try{return e(t)}finally{0===(zo=n)&&(ef(),al())}}function ff(e,t){var n=zo;zo&=-2,zo|=8;try{return e(t)}finally{0===(zo=n)&&(ef(),al())}}function df(e,t){Yu(Io,Bo),Bo|=t,qo|=t}function hf(){Bo=Io.current,Gu(Io)}function pf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ci(n)),null!==Po)for(n=Po.return;null!==n;){var r=n;switch(r.tag){case 1:null!=(r=r.type.childContextTypes)&&Ju();break;case 3:Nl(),Gu(wi),Gu(xi),jl();break;case 5:Tl(r);break;case 4:Nl();break;case 13:case 19:Gu(oo);break;case 10:cl(r);break;case 23:case 24:hf()}n=n.return}Ro=e,Po=Rf(e.current,null),Lo=Bo=qo=t,jo=0,Uo=null,Vo=Ho=Wo=0}function mf(e,t){for(;;){var n=Po;try{if(ll(),co.current=bo,yo){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(ho=0,go=mo=po=null,vo=!1,$o.current=null,null===n||null===n.return){jo=1,Uo=t,Po=null;break}e:{var o=e,a=n.return,s=n,u=t;if(t=Lo,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"==typeof u&&"function"==typeof u.then){var l=u;if(0==(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var f=0!=(1&oo.current),d=a;do{var h;if(h=13===d.tag){var p=d.memoizedState;if(null!==p)h=null!==p.dehydrated;else{var m=d.memoizedProps;h=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!f)}}if(h){var g=d.updateQueue;if(null===g){var y=new Set;y.add(l),d.updateQueue=y}else g.add(l);if(0==(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=gl(-1,1);v.tag=2,yl(s,v)}s.lanes|=1;break e}u=void 0,s=t;var b=o.pingCache;if(null===b?(b=o.pingCache=new Fo,u=new Set,b.set(l,u)):void 0===(u=b.get(l))&&(u=new Set,b.set(l,u)),!u.has(s)){u.add(s);var x=Nf.bind(null,o,l,s);l.then(x,x)}d.flags|=4096,d.lanes=t;break e}d=d.return}while(null!==d);u=Error((Ba(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==jo&&(jo=2),u=Rc(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,t&=-t,d.lanes|=t,vl(d,Lc(0,o,t));break e;case 1:o=u;var w=d.type,_=d.stateNode;if(0==(64&d.flags)&&("function"==typeof w.getDerivedStateFromError||null!==_&&"function"==typeof _.componentDidCatch&&(null===Zo||!Zo.has(_)))){d.flags|=4096,t&=-t,d.lanes|=t,vl(d,Bc(d,o,t));break e}}d=d.return}while(null!==d)}wf(n)}catch(e){t=e,Po===n&&null!==n&&(Po=n=n.return);continue}break}}function gf(){var e=To.current;return To.current=bo,null===e?bo:e}function yf(e,t){var n=zo;zo|=16;var r=gf();for(Ro===e&&Lo===t||pf(e,t);;)try{vf();break}catch(t){mf(e,t)}if(ll(),zo=n,To.current=r,null!==Po)throw Error(Ma(261));return Ro=null,Lo=0,jo}function vf(){for(;null!==Po;)xf(Po)}function bf(){for(;null!==Po&&!Di();)xf(Po)}function xf(e){var t=ha(e.alternate,e,Bo);e.memoizedProps=e.pendingProps,null===t?wf(e):Po=t,$o.current=null}function wf(e){var t=e;do{var n=t.alternate;if(e=t.return,0==(2048&t.flags)){if(null!==(n=$c(n,t,Bo)))return void(Po=n);if(24!==(n=t).tag&&23!==n.tag||null===n.memoizedState||0!=(1073741824&Bo)||0==(4&n.mode)){for(var r=0,i=n.child;null!==i;)r|=i.lanes|i.childLanes,i=i.sibling;n.childLanes=r}null!==e&&0==(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(n=zc(t)))return n.flags&=2047,void(Po=n);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Po=t);Po=t=e}while(null!==t);0===jo&&(jo=5)}function _f(e){var t=nl();return il(99,kf.bind(null,e,t)),null}function kf(e,t){do{Sf()}while(null!==ta);if(0!=(48&zo))throw Error(Ma(327));var n=e.finishedWork;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ma(177));e.callbackNode=null;var r=n.lanes|n.childLanes,i=r,o=e.pendingLanes&~i;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=i,e.mutableReadLanes&=i,e.entangledLanes&=i,i=e.entanglements;for(var a=e.eventTimes,s=e.expirationTimes;0<o;){var u=31-Gn(o),l=1<<u;i[u]=0,a[u]=-1,s[u]=-1,o&=~l}if(null!==oa&&0==(24&r)&&oa.has(e)&&oa.delete(e),e===Ro&&(Po=Ro=null,Lo=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,r=n.firstEffect):r=n:r=n.firstEffect,null!==r){if(i=zo,zo|=32,$o.current=null,si=Kn,_u(a=wu())){if("selectionStart"in a)s={start:a.selectionStart,end:a.selectionEnd};else e:if(s=(s=a.ownerDocument)&&s.defaultView||window,(l=s.getSelection&&s.getSelection())&&0!==l.rangeCount){s=l.anchorNode,o=l.anchorOffset,u=l.focusNode,l=l.focusOffset;try{s.nodeType,u.nodeType}catch(e){s=null;break e}var c=0,f=-1,d=-1,h=0,p=0,m=a,g=null;t:for(;;){for(var y;m!==s||0!==o&&3!==m.nodeType||(f=c+o),m!==u||0!==l&&3!==m.nodeType||(d=c+l),3===m.nodeType&&(c+=m.nodeValue.length),null!==(y=m.firstChild);)g=m,m=y;for(;;){if(m===a)break t;if(g===s&&++h===o&&(f=c),g===u&&++p===l&&(d=c),null!==(y=m.nextSibling))break;g=(m=g).parentNode}m=y}s=-1===f||-1===d?null:{start:f,end:d}}else s=null;s=s||{start:0,end:0}}else s=null;ui={focusedElem:a,selectionRange:s},Kn=!1,fa=null,da=!1,Qo=r;do{try{Ef()}catch(e){if(null===Qo)throw Error(Ma(330));Ff(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);fa=null,Qo=r;do{try{for(a=e;null!==Qo;){var v=Qo.flags;if(16&v&&os(Qo.stateNode,""),128&v){var b=Qo.alternate;if(null!==b){var x=b.ref;null!==x&&("function"==typeof x?x(null):x.current=null)}}switch(1038&v){case 2:Gc(Qo),Qo.flags&=-3;break;case 6:Gc(Qo),Qo.flags&=-3,Jc(Qo.alternate,Qo);break;case 1024:Qo.flags&=-1025;break;case 1028:Qo.flags&=-1025,Jc(Qo.alternate,Qo);break;case 4:Jc(Qo.alternate,Qo);break;case 8:Qc(a,s=Qo);var w=s.alternate;Hc(s),null!==w&&Hc(w)}Qo=Qo.nextEffect}}catch(e){if(null===Qo)throw Error(Ma(330));Ff(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);if(x=ui,b=wu(),v=x.focusedElem,a=x.selectionRange,b!==v&&v&&v.ownerDocument&&xu(v.ownerDocument.documentElement,v)){null!==a&&_u(v)&&(b=a.start,void 0===(x=a.end)&&(x=b),"selectionStart"in v?(v.selectionStart=b,v.selectionEnd=Math.min(x,v.value.length)):(x=(b=v.ownerDocument||document)&&b.defaultView||window).getSelection&&(x=x.getSelection(),s=v.textContent.length,w=Math.min(a.start,s),a=void 0===a.end?w:Math.min(a.end,s),!x.extend&&w>a&&(s=a,a=w,w=s),s=bu(v,w),o=bu(v,a),s&&o&&(1!==x.rangeCount||x.anchorNode!==s.node||x.anchorOffset!==s.offset||x.focusNode!==o.node||x.focusOffset!==o.offset)&&((b=b.createRange()).setStart(s.node,s.offset),x.removeAllRanges(),w>a?(x.addRange(b),x.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),x.addRange(b))))),b=[];for(x=v;x=x.parentNode;)1===x.nodeType&&b.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"==typeof v.focus&&v.focus(),v=0;v<b.length;v++)(x=b[v]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Kn=!!si,ui=si=null,e.current=n,Qo=r;do{try{for(v=e;null!==Qo;){var _=Qo.flags;if(36&_&&Uc(v,Qo.alternate,Qo),128&_){b=void 0;var k=Qo.ref;if(null!==k){var E=Qo.stateNode;switch(Qo.tag){case 5:b=E;break;default:b=E}"function"==typeof k?k(b):k.current=b}}Qo=Qo.nextEffect}}catch(e){if(null===Qo)throw Error(Ma(330));Ff(Qo,e),Qo=Qo.nextEffect}}while(null!==Qo);Qo=null,Li(),zo=i}else e.current=n;if(ea)ea=!1,ta=e,na=t;else for(Qo=r;null!==Qo;)t=Qo.nextEffect,Qo.nextEffect=null,8&Qo.flags&&((_=Qo).sibling=null,_.stateNode=null),Qo=t;if(0===(r=e.pendingLanes)&&(Zo=null),1===r?e===sa?aa++:(aa=0,sa=e):aa=0,n=n.stateNode,Ei&&"function"==typeof Ei.onCommitFiberRoot)try{Ei.onCommitFiberRoot(ki,n,void 0,64==(64&n.current.flags))}catch(e){}if(af(e,qi()),Jo)throw Jo=!1,e=Ko,Ko=null,e;return 0!=(8&zo)||al(),null}function Ef(){for(;null!==Qo;){var e=Qo.alternate;da||null===fa||(0!=(8&Qo.flags)?Ss(Qo,fa)&&(da=!0):13===Qo.tag&&Zc(e,Qo)&&Ss(Qo,fa)&&(da=!0));var t=Qo.flags;0!=(256&t)&&jc(e,Qo),0==(512&t)||ea||(ea=!0,ol(97,(function(){return Sf(),null}))),Qo=Qo.nextEffect}}function Sf(){if(90!==na){var e=97<na?97:na;return na=90,il(e,Df)}return!1}function Af(e,t){ra.push(t,e),ea||(ea=!0,ol(97,(function(){return Sf(),null})))}function Cf(e,t){ia.push(t,e),ea||(ea=!0,ol(97,(function(){return Sf(),null})))}function Df(){if(null===ta)return!1;var e=ta;if(ta=null,0!=(48&zo))throw Error(Ma(331));var t=zo;zo|=32;var n=ia;ia=[];for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1],a=i.destroy;if(i.destroy=void 0,"function"==typeof a)try{a()}catch(e){if(null===o)throw Error(Ma(330));Ff(o,e)}}for(n=ra,ra=[],r=0;r<n.length;r+=2){i=n[r],o=n[r+1];try{var s=i.create;i.destroy=s()}catch(e){if(null===o)throw Error(Ma(330));Ff(o,e)}}for(s=e.current.firstEffect;null!==s;)e=s.nextEffect,s.nextEffect=null,8&s.flags&&(s.sibling=null,s.stateNode=null),s=e;return zo=t,al(),!0}function Mf(e,t,n){yl(e,t=Lc(0,t=Rc(n,t),1)),t=tf(),null!==(e=of(e,1))&&(Ws(e,1,t),af(e,t))}function Ff(e,t){if(3===e.tag)Mf(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Mf(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Zo||!Zo.has(r))){var i=Bc(n,e=Rc(t,e),1);if(yl(n,i),i=tf(),null!==(n=of(n,1)))Ws(n,1,i),af(n,i);else if("function"==typeof r.componentDidCatch&&(null===Zo||!Zo.has(r)))try{r.componentDidCatch(t,e)}catch(e){}break}}n=n.return}}function Nf(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tf(),e.pingedLanes|=e.suspendedLanes&n,Ro===e&&(Lo&n)===n&&(4===jo||3===jo&&(62914560&Lo)===Lo&&500>qi()-Yo?pf(e,0):Vo|=n),af(e,t)}function Of(e,t){var n=e.stateNode;null!==n&&n.delete(t),0===(t=0)&&(0==(2&(t=e.mode))?t=1:0==(4&t)?t=99===nl()?1:2:(0===la&&(la=qo),0===(t=Us(62914560&~la))&&(t=4194304))),n=tf(),null!==(e=of(e,t))&&(Ws(e,t,n),af(e,n))}function Tf(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function $f(e,t,n,r){return new Tf(e,t,n,r)}function zf(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rf(e,t){var n=e.alternate;return null===n?((n=$f(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Pf(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)zf(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case Lt:return Lf(n.children,i,o,t);case Qt:a=8,i|=16;break;case Bt:a=8,i|=1;break;case It:return(e=$f(12,n,t,8|i)).elementType=It,e.type=It,e.lanes=o,e;case Wt:return(e=$f(13,n,t,i)).type=Wt,e.elementType=Wt,e.lanes=o,e;case Ht:return(e=$f(19,n,t,i)).elementType=Ht,e.lanes=o,e;case Jt:return Bf(n,i,o,t);case Kt:return(e=$f(24,n,t,i)).elementType=Kt,e.lanes=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case jt:a=10;break e;case Ut:a=9;break e;case qt:a=11;break e;case Vt:a=14;break e;case Gt:a=16,r=null;break e;case Yt:a=22;break e}throw Error(Ma(130,null==e?e:typeof e,""))}return(t=$f(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lf(e,t,n,r){return(e=$f(7,e,r,t)).lanes=n,e}function Bf(e,t,n,r){return(e=$f(23,e,r,t)).elementType=Jt,e.lanes=n,e}function If(e,t,n){return(e=$f(6,e,null,t)).lanes=n,e}function jf(e,t,n){return(t=$f(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uf(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=qs(0),this.expirationTimes=qs(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qs(0),this.mutableSourceEagerHydrationData=null}function qf(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:Pt,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Wf(e,t,n,r){var i=t.current,o=tf(),a=nf(i);e:if(n){t:{if(ws(n=n._reactInternals)!==n||1!==n.tag)throw Error(Ma(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(Qu(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(Ma(171))}if(1===n.tag){var u=n.type;if(Qu(u)){n=Zu(n,u,s);break e}}n=s}else n=bi;return null===t.context?t.context=n:t.pendingContext=n,(t=gl(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),yl(i,t),rf(i,a,o),a}function Hf(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Vf(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gf(e,t){Vf(e,t),(e=e.alternate)&&Vf(e,t)}function Yf(){return null}function Xf(e,t,n){var r=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Uf(e,t,null!=n&&!0===n.hydrate),t=$f(3,null,null,2===t?7:1===t?3:0),n.current=t,t.stateNode=n,pl(t),e[mi]=n.current,Cu(8===e.nodeType?e.parentNode:e),r)for(e=0;e<r.length;e++){var i=(t=r[e])._getVersion;i=i(t._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i)}this._internalRoot=n}function Qf(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jf(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=Hf(a);s.call(e)}}Wf(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new Xf(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=Hf(a);u.call(e)}}ff((function(){Wf(t,a,e,i)}))}return Hf(a)}function Kf(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Qf(t))throw Error(Ma(200));return qf(e,t,null,n)}function Zf(){if(kt={},Et=we(),St=f(),_t(),!Et)throw Error(Ma(227));var e;if(At=new Set,Ct={},Dt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Mt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ft=Object.prototype.hasOwnProperty,Nt={},Ot={},Tt={},"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){Tt[e]=new Oa(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];Tt[t]=new Oa(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){Tt[e]=new Oa(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){Tt[e]=new Oa(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){Tt[e]=new Oa(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){Tt[e]=new Oa(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){Tt[e]=new Oa(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){Tt[e]=new Oa(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){Tt[e]=new Oa(e,5,!1,e.toLowerCase(),null,!1,!1)})),$t=/[\-:]([a-z])/g,"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace($t,Ta);Tt[t]=new Oa(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace($t,Ta);Tt[t]=new Oa(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace($t,Ta);Tt[t]=new Oa(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){Tt[e]=new Oa(e,1,!1,e.toLowerCase(),null,!1,!1)})),Tt.xlinkHref=new Oa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){Tt[e]=new Oa(e,1,!1,e.toLowerCase(),null,!0,!0)})),zt=Et.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rt=60103,Pt=60106,Lt=60107,Bt=60108,It=60114,jt=60109,Ut=60110,qt=60112,Wt=60113,Ht=60120,Vt=60115,Gt=60116,Yt=60121,Xt=60128,Qt=60129,Jt=60130,Kt=60131,"function"==typeof Symbol&&Symbol.for&&(Zt=Symbol.for,Rt=Zt("react.element"),Pt=Zt("react.portal"),Lt=Zt("react.fragment"),Bt=Zt("react.strict_mode"),It=Zt("react.profiler"),jt=Zt("react.provider"),Ut=Zt("react.context"),qt=Zt("react.forward_ref"),Wt=Zt("react.suspense"),Ht=Zt("react.suspense_list"),Vt=Zt("react.memo"),Gt=Zt("react.lazy"),Yt=Zt("react.block"),Zt("react.scope"),Xt=Zt("react.opaque.id"),Qt=Zt("react.debug_trace_mode"),Jt=Zt("react.offscreen"),Kt=Zt("react.legacy_hidden")),en="function"==typeof Symbol&&Symbol.iterator,nn=!1,rn={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},e=function(e,t){if(e.namespaceURI!==rn.svg||"innerHTML"in e)e.innerHTML=t;else{for((on=on||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=on.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},an="undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e,sn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},un=["Webkit","ms","Moz","O"],Object.keys(sn).forEach((function(e){un.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sn[t]=sn[e]}))})),ln=St({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),cn=null,fn=null,dn=null,hn=ps,pn=!1,mn=!1,gn=!1,Dt)try{yn={},Object.defineProperty(yn,"passive",{get:function(){gn=!0}}),window.addEventListener("test",yn,yn),window.removeEventListener("test",yn,yn)}catch(e){gn=!1}vn=!1,bn=null,xn=!1,wn=null,_n={onError:function(e){vn=!0,bn=e}},Cn=!1,Dn=[],Mn=null,Fn=null,Nn=null,On=new Map,Tn=new Map,$n=[],zn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" "),Rn={animationend:zs("Animation","AnimationEnd"),animationiteration:zs("Animation","AnimationIteration"),animationstart:zs("Animation","AnimationStart"),transitionend:zs("Transition","TransitionEnd")},Pn={},Ln={},Dt&&(Ln=document.createElement("div").style,"AnimationEvent"in window||(delete Rn.animationend.animation,delete Rn.animationiteration.animation,delete Rn.animationstart.animation),"TransitionEvent"in window||delete Rn.transitionend.transition),Bn=Rs("animationend"),In=Rs("animationiteration"),jn=Rs("animationstart"),Un=Rs("transitionend"),qn=new Map,Wn=new Map,Hn=["abort","abort",Bn,"animationEnd",In,"animationIteration",jn,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Un,"transitionEnd","waiting","waiting"],(0,_t().unstable_now)(),Vn=8,Gn=Math.clz32?Math.clz32:Hs,Yn=Math.log,Xn=Math.LN2,Qn=_t().unstable_UserBlockingPriority,Jn=_t().unstable_runWithPriority,Kn=!0,Zn=null,er=null,tr=null,rr=eu(nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0}),ir=St({},nr,{view:0,detail:0}),or=eu(ir),lr=St({},ir,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nu,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ur&&(ur&&"mousemove"===e.type?(ar=e.screenX-ur.screenX,sr=e.screenY-ur.screenY):sr=ar=0,ur=e),ar)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),cr=eu(lr),fr=St({},lr,{dataTransfer:0}),dr=eu(fr),hr=St({},ir,{relatedTarget:0}),pr=eu(hr),mr=St({},nr,{animationName:0,elapsedTime:0,pseudoElement:0}),gr=eu(mr),yr=St({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=eu(yr),br=St({},nr,{data:0}),xr=eu(br),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Er=St({},ir,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Js(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nu,charCode:function(e){return"keypress"===e.type?Js(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Js(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sr=eu(Er),Ar=St({},lr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Cr=eu(Ar),Dr=St({},ir,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nu}),Mr=eu(Dr),Fr=St({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nr=eu(Fr),Or=St({},lr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Tr=eu(Or),$r=[9,13,27,32],zr=Dt&&"CompositionEvent"in window,Rr=null,Dt&&"documentMode"in document&&(Rr=document.documentMode),Pr=Dt&&"TextEvent"in window&&!Rr,Lr=Dt&&(!zr||Rr&&8<Rr&&11>=Rr),Br=String.fromCharCode(32),Ir=!1,jr=!1,Ur={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},qr=null,Wr=null,Hr=!1,Dt&&(Dt?((Gr="oninput"in document)||((Yr=document.createElement("div")).setAttribute("oninput","return;"),Gr="function"==typeof Yr.oninput),Vr=Gr):Vr=!1,Hr=Vr&&(!document.documentMode||9<document.documentMode)),Xr="function"==typeof Object.is?Object.is:gu,Qr=Object.prototype.hasOwnProperty,Jr=Dt&&"documentMode"in document&&11>=document.documentMode,Kr=null,Zr=null,ei=null,ti=!1,Ps("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Ps("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Ps(Hn,2);for(ni="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),ri=0;ri<ni.length;ri++)Wn.set(ni[ri],0);if(Na("onMouseEnter",["mouseout","mouseover"]),Na("onMouseLeave",["mouseout","mouseover"]),Na("onPointerEnter",["pointerout","pointerover"]),Na("onPointerLeave",["pointerout","pointerover"]),Fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" ")),ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(ii)),ai="_reactListening"+Math.random().toString(36).slice(2),si=null,ui=null,li="function"==typeof setTimeout?setTimeout:void 0,ci="function"==typeof clearTimeout?clearTimeout:void 0,fi=0,di=Math.random().toString(36).slice(2),hi="__reactFiber$"+di,pi="__reactProps$"+di,mi="__reactContainer$"+di,gi="__reactEvents$"+di,yi=[],vi=-1,xi=Vu(bi={}),wi=Vu(!1),_i=bi,ki=null,Ei=null,Si=_t().unstable_runWithPriority,Ai=_t().unstable_scheduleCallback,Ci=_t().unstable_cancelCallback,Di=_t().unstable_shouldYield,Mi=_t().unstable_requestPaint,Fi=_t().unstable_now,Ni=_t().unstable_getCurrentPriorityLevel,Oi=_t().unstable_ImmediatePriority,Ti=_t().unstable_UserBlockingPriority,$i=_t().unstable_NormalPriority,zi=_t().unstable_LowPriority,Ri=_t().unstable_IdlePriority,Pi={},Li=void 0!==Mi?Mi:function(){},Bi=null,Ii=null,ji=!1,Ui=Fi(),qi=1e4>Ui?Fi:function(){return Fi()-Ui},Wi=zt.ReactCurrentBatchConfig,Hi=Vu(null),Vi=null,Gi=null,Yi=null,Xi=!1,Qi=(new Et.Component).refs,Ji={isMounted:function(e){return!!(e=e._reactInternals)&&ws(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tf(),i=nf(e),o=gl(r,i);o.payload=t,null!=n&&(o.callback=n),yl(e,o),rf(e,i,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tf(),i=nf(e),o=gl(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),yl(e,o),rf(e,i,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tf(),r=nf(e),i=gl(n,r);i.tag=2,null!=t&&(i.callback=t),yl(e,i),rf(e,r,n)}},Ki=Array.isArray,Zi=Dl(!0),eo=Dl(!1),no=Vu(to={}),ro=Vu(to),io=Vu(to),oo=Vu(0),ao=null,so=null,uo=!1,lo=[],co=zt.ReactCurrentDispatcher,fo=zt.ReactCurrentBatchConfig,ho=0,po=null,mo=null,go=null,yo=!1,vo=!1,bo={readContext:hl,useCallback:Ul,useContext:Ul,useEffect:Ul,useImperativeHandle:Ul,useLayoutEffect:Ul,useMemo:Ul,useReducer:Ul,useRef:Ul,useState:Ul,useDebugValue:Ul,useDeferredValue:Ul,useTransition:Ul,useMutableSource:Ul,useOpaqueIdentifier:Ul,unstable_isNewReconciler:!1},xo={readContext:hl,useCallback:function(e,t){return Hl().memoizedState=[e,void 0===t?null:t],e},useContext:hl,useEffect:oc,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,rc(4,2,uc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return rc(4,2,e,t)},useMemo:function(e,t){var n=Hl();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Hl();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=pc.bind(null,po,e),[r.memoizedState,e]},useRef:tc,useState:Zl,useDebugValue:cc,useDeferredValue:function(e){var t=Zl(e),n=t[0],r=t[1];return oc((function(){var t=fo.transition;fo.transition=1;try{r(e)}finally{fo.transition=t}}),[e]),n},useTransition:function(){var e=Zl(!1),t=e[0];return tc(e=hc.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,n){var r=Hl();return r.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},Jl(r,e,t,n)},useOpaqueIdentifier:function(){if(uo){var e=!1,t=function(e){return{$$typeof:Xt,toString:e,valueOf:e}}((function(){throw e||(e=!0,n("r:"+(fi++).toString(36))),Error(Ma(355))})),n=Zl(t)[1];return 0==(2&po.mode)&&(po.flags|=516,ec(5,(function(){n("r:"+(fi++).toString(36))}),void 0,null)),t}return Zl(t="r:"+(fi++).toString(36)),t},unstable_isNewReconciler:!1},wo={readContext:hl,useCallback:fc,useContext:hl,useEffect:ac,useImperativeHandle:lc,useLayoutEffect:sc,useMemo:dc,useReducer:Yl,useRef:nc,useState:function(){return Yl(Gl)},useDebugValue:cc,useDeferredValue:function(e){var t=Yl(Gl),n=t[0],r=t[1];return ac((function(){var t=fo.transition;fo.transition=1;try{r(e)}finally{fo.transition=t}}),[e]),n},useTransition:function(){var e=Yl(Gl)[0];return[nc().current,e]},useMutableSource:Kl,useOpaqueIdentifier:function(){return Yl(Gl)[0]},unstable_isNewReconciler:!1},_o={readContext:hl,useCallback:fc,useContext:hl,useEffect:ac,useImperativeHandle:lc,useLayoutEffect:sc,useMemo:dc,useReducer:Xl,useRef:nc,useState:function(){return Xl(Gl)},useDebugValue:cc,useDeferredValue:function(e){var t=Xl(Gl),n=t[0],r=t[1];return ac((function(){var t=fo.transition;fo.transition=1;try{r(e)}finally{fo.transition=t}}),[e]),n},useTransition:function(){var e=Xl(Gl)[0];return[nc().current,e]},useMutableSource:Kl,useOpaqueIdentifier:function(){return Xl(Gl)[0]},unstable_isNewReconciler:!1},ko=zt.ReactCurrentOwner,Eo=!1,So={dehydrated:null,retryLane:0},Ao=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Co=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ml(no.current);var o,a=null;switch(n){case"input":i=Ha(e,i),r=Ha(e,r),a=[];break;case"option":i=Ja(e,i),r=Ja(e,r),a=[];break;case"select":i=St({},i,{value:void 0}),r=St({},r,{value:void 0}),a=[];break;case"textarea":i=Za(e,i),r=Za(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=zu)}for(l in us(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(Ct.hasOwnProperty(l)?a||(a=[]):(a=a||[]).push(l,null));for(l in r){var u=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&u!==s&&(null!=u||null!=s))if("style"===l)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(l,n)),n=u;else"dangerouslySetInnerHTML"===l?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(l,u)):"children"===l?"string"!=typeof u&&"number"!=typeof u||(a=a||[]).push(l,""+u):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(Ct.hasOwnProperty(l)?(null!=u&&"onScroll"===l&&Au("scroll",e),a||s===u||(a=[])):"object"==typeof u&&null!==u&&u.$$typeof===Xt?u.toString():(a=a||[]).push(l,u))}n&&(a=a||[]).push("style",n);var l=a;(t.updateQueue=l)&&(t.flags|=4)}},Mo=function(e,t,n,r){n!==r&&(t.flags|=4)},Fo="function"==typeof WeakMap?WeakMap:Map,No="function"==typeof WeakSet?WeakSet:Set,Oo=Math.ceil,To=zt.ReactCurrentDispatcher,$o=zt.ReactCurrentOwner,zo=0,Ro=null,Po=null,Lo=0,Bo=0,Io=Vu(0),jo=0,Uo=null,qo=0,Wo=0,Ho=0,Vo=0,Go=null,Yo=0,Xo=1/0,Qo=null,Jo=!1,Ko=null,Zo=null,ea=!1,ta=null,na=90,ra=[],ia=[],oa=null,aa=0,sa=null,ua=-1,la=0,ca=0,fa=null,da=!1,ha=function(e,t,n){var r=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||wi.current)Eo=!0;else{if(0==(n&r)){switch(Eo=!1,t.tag){case 3:Ec(t),Il();break;case 5:Ol(t);break;case 1:Qu(t.type)&&el(t);break;case 4:Fl(t,t.stateNode.containerInfo);break;case 10:r=t.memoizedProps.value;var i=t.type._context;Yu(Hi,i._currentValue),i._currentValue=r;break;case 13:if(null!==t.memoizedState)return 0!=(n&t.child.childLanes)?Sc(e,t,n):(Yu(oo,1&oo.current),null!==(t=Oc(e,t,n))?t.sibling:null);Yu(oo,1&oo.current);break;case 19:if(r=0!=(n&t.childLanes),0!=(64&e.flags)){if(r)return Nc(e,t,n);t.flags|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yu(oo,oo.current),r)break;return null;case 23:case 24:return t.lanes=0,bc(e,t,n)}return Oc(e,t,n)}Eo=0!=(16384&e.flags)}else Eo=!1;switch(t.lanes=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=Xu(t,xi.current),dl(t,n),i=Wl(null,t,r,e,i,n),t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qu(r)){var o=!0;el(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pl(t);var a=r.getDerivedStateFromProps;"function"==typeof a&&wl(t,r,a,e),i.updater=Ji,t.stateNode=i,i._reactInternals=t,Sl(t,r,e,n),t=kc(null,t,r,!0,o,n)}else t.tag=0,mc(null,t,i,n),t=t.child;return t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(o=i._init)(i._payload),t.type=i,o=t.tag=function(e){if("function"==typeof e)return zf(e)?1:0;if(null!=e){if((e=e.$$typeof)===qt)return 11;if(e===Vt)return 14}return 2}(i),e=ul(i,e),o){case 0:t=wc(null,t,i,e,n);break e;case 1:t=_c(null,t,i,e,n);break e;case 11:t=gc(null,t,i,e,n);break e;case 14:t=yc(null,t,i,ul(i.type,e),r,n);break e}throw Error(Ma(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,wc(e,t,r,i=t.elementType===r?i:ul(r,i),n);case 1:return r=t.type,i=t.pendingProps,_c(e,t,r,i=t.elementType===r?i:ul(r,i),n);case 3:if(Ec(t),r=t.updateQueue,null===e||null===r)throw Error(Ma(282));if(r=t.pendingProps,i=null!==(i=t.memoizedState)?i.element:null,ml(e,t),bl(t,r,null,n),(r=t.memoizedState.element)===i)Il(),t=Oc(e,t,n);else{if((o=(i=t.stateNode).hydrate)&&(so=Bu(t.stateNode.containerInfo.firstChild),ao=t,o=uo=!0),o){if(null!=(e=i.mutableSourceEagerHydrationData))for(i=0;i<e.length;i+=2)(o=e[i])._workInProgressVersionPrimary=e[i+1],lo.push(o);for(n=eo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else mc(e,t,r,n),Il();t=t.child}return t;case 5:return Ol(t),null===e&&Pl(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,Pu(r,i)?a=null:null!==o&&Pu(r,o)&&(t.flags|=16),xc(e,t),mc(e,t,a,n),t.child;case 6:return null===e&&Pl(t),null;case 13:return Sc(e,t,n);case 4:return Fl(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Zi(t,null,r,n):mc(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,gc(e,t,r,i=t.elementType===r?i:ul(r,i),n);case 7:return mc(e,t,t.pendingProps,n),t.child;case 8:case 12:return mc(e,t,t.pendingProps.children,n),t.child;case 10:e:{r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value;var s=t.type._context;if(Yu(Hi,s._currentValue),s._currentValue=o,null!==a)if(s=a.value,0===(o=Xr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!wi.current){t=Oc(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var l=u.firstContext;null!==l;){if(l.context===r&&0!=(l.observedBits&o)){1===s.tag&&((l=gl(-1,n&-n)).tag=2,yl(s,l)),s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),fl(s.return,n),u.lanes|=n;break}l=l.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}mc(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,dl(t,n),r=r(i=hl(i,o.unstable_observedBits)),t.flags|=1,mc(e,t,r,n),t.child;case 14:return o=ul(i=t.type,t.pendingProps),yc(e,t,i,o=ul(i.type,o),r,n);case 15:return vc(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ul(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Qu(r)?(e=!0,el(t)):e=!1,dl(t,n),kl(t,r,i),Sl(t,r,i,n),kc(null,t,r,!0,e,n);case 19:return Nc(e,t,n);case 23:case 24:return bc(e,t,n)}throw Error(Ma(156,t.tag))},Xf.prototype.render=function(e){Wf(e,this._internalRoot,null,null)},Xf.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Wf(null,e,null,(function(){t[mi]=null}))},kn=function(e){13===e.tag&&(rf(e,4,tf()),Gf(e,4))},En=function(e){13===e.tag&&(rf(e,67108864,tf()),Gf(e,67108864))},Sn=function(e){if(13===e.tag){var t=tf(),n=nf(e);rf(e,n,t),Gf(e,n)}},An=function(e,t){return t()},cn=function(e,t,n){switch(t){case"input":if(Ya(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Wu(r);if(!i)throw Error(Ma(90));qa(r),Ya(r,i)}}}break;case"textarea":ts(e,n);break;case"select":null!=(t=n.value)&&Ka(e,!!n.multiple,t,!1)}},ps=cf,ms=function(e,t,n,r,i){var o=zo;zo|=4;try{return il(98,e.bind(null,t,n,r,i))}finally{0===(zo=o)&&(ef(),al())}},gs=function(){0==(49&zo)&&(function(){if(null!==oa){var e=oa;oa=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,af(e,qi())}))}al()}(),Sf())},hn=function(e,t){var n=zo;zo|=2;try{return e(t)}finally{0===(zo=n)&&(ef(),al())}},pa={Events:[Uu,qu,Wu,ds,hs,Sf,{current:!1}]},ga={bundleType:(ma={findFiberByHostInstance:ju,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"}).bundleType,version:ma.version,rendererPackageName:ma.rendererPackageName,rendererConfig:ma.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Es(e))?null:e.stateNode},findFiberByHostInstance:ma.findFiberByHostInstance||Yf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null},"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&!(ya=__REACT_DEVTOOLS_GLOBAL_HOOK__).isDisabled&&ya.supportsFiber)try{ki=ya.inject(ga),Ei=ya}catch(e){}va=pa,kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=va,ba=Kf,kt.createPortal=ba,xa=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(Ma(188));throw Error(Ma(268,Object.keys(e)))}return e=null===(e=Es(t))?null:e.stateNode},kt.findDOMNode=xa,wa=function(e,t){var n=zo;if(0!=(48&n))return e(t);zo|=1;try{if(e)return il(99,e.bind(null,t))}finally{zo=n,al()}},kt.flushSync=wa,_a=function(e,t,n){if(!Qf(t))throw Error(Ma(200));return Jf(null,e,t,!0,n)},kt.hydrate=_a,ka=function(e,t,n){if(!Qf(t))throw Error(Ma(200));return Jf(null,e,t,!1,n)},kt.render=ka,Ea=function(e){if(!Qf(e))throw Error(Ma(40));return!!e._reactRootContainer&&(ff((function(){Jf(null,null,e,!1,(function(){e._reactRootContainer=null,e[mi]=null}))})),!0)},kt.unmountComponentAtNode=Ea,Sa=cf,kt.unstable_batchedUpdates=Sa,Aa=function(e,t){return Kf(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},kt.unstable_createPortal=Aa,Ca=function(e,t,n,r){if(!Qf(n))throw Error(Ma(200));if(null==e||void 0===e._reactInternals)throw Error(Ma(38));return Jf(e,t,n,!1,r)},kt.unstable_renderSubtreeIntoContainer=Ca,"17.0.2",kt.version="17.0.2"}!function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}}(),Da||(Da=!0,Zf());var ed=t(kt);function td(e,t){return(td=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nd=td;function rd(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,nd(e,t)}we();var id,od=!1;function ad(){return od||(od=!0,id={},"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",id="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"),id}var sd,ud,ld=!1;function cd(){}function fd(){}var dd=t((ld||(ld=!0,sd={},ud=ad(),fd.resetWarningCache=cd,sd=function(){function e(e,t,n,r,i,o){if(o!==ud){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:fd,resetWarningCache:cd};return n.PropTypes=n,n}),sd)());function hd(){return(hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pd=hd;function md(e){return"/"===e.charAt(0)}function gd(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function yd(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function vd(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return vd(e,t[n])}));if("object"==typeof e||"object"==typeof t){var n=yd(e),r=yd(t);return n!==e||r!==t?vd(n,r):Object.keys(Object.assign({},e,t)).every((function(n){return vd(e[n],t[n])}))}return!1}var bd="Invariant failed";function xd(e,t){if(!e)throw new Error(bd)}function wd(e){return"/"===e.charAt(0)?e:"/"+e}function _d(e){return"/"===e.charAt(0)?e.substr(1):e}function kd(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}function Ed(e,t){return kd(e,t)?e.substr(t.length):e}function Sd(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function Ad(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function Cd(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=pd({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&md(e),a=t&&md(t),s=o||a;if(e&&md(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var l=0,c=i.length;c>=0;c--){var f=i[c];"."===f?gd(i,c):".."===f?(gd(i,c),l++):l&&(gd(i,c),l--)}if(!s)for(;l--;l)i.unshift("..");!s||""===i[0]||i[0]&&md(i[0])||i.unshift("");var d=i.join("/");return n&&"/"!==d.substr(-1)&&(d+="/"),d}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Dd(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&vd(e.state,t.state)}function Md(){var e=null;var t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Fd=!("undefined"==typeof window||!window.document||!window.document.createElement);function Nd(e,t){t(window.confirm(e))}var Od="popstate",Td="hashchange";function $d(){try{return window.history.state||{}}catch(e){return{}}}function zd(e){void 0===e&&(e={}),Fd||xd(!1);var t,n=window.history,r=(-1===(t=window.navigator.userAgent).indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history,i=!(-1===window.navigator.userAgent.indexOf("Trident")),o=e,a=o.forceRefresh,s=void 0!==a&&a,u=o.getUserConfirmation,l=void 0===u?Nd:u,c=o.keyLength,f=void 0===c?6:c,d=e.basename?Sd(wd(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=Ed(o,d)),Cd(o,r,n)}function p(){return Math.random().toString(36).substr(2,f)}var m=Md();function g(e){pd(D,e),D.length=n.length,m.notifyListeners(D.location,D.action)}function y(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||x(h(e.state))}function v(){x(h($d()))}var b=!1;function x(e){if(b)b=!1,g();else{m.confirmTransitionTo(e,"POP",l,(function(t){t?g({action:"POP",location:e}):function(e){var t=D.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(b=!0,E(i))}(e)}))}}var w=h($d()),_=[w.key];function k(e){return d+Ad(e)}function E(e){n.go(e)}var S=0;function A(e){1===(S+=e)&&1===e?(window.addEventListener(Od,y),i&&window.addEventListener(Td,v)):0===S&&(window.removeEventListener(Od,y),i&&window.removeEventListener(Td,v))}var C=!1;var D={length:n.length,action:"POP",location:w,createHref:k,push:function(e,t){var i="PUSH",o=Cd(e,t,p(),D.location);m.confirmTransitionTo(o,i,l,(function(e){if(e){var t=k(o),a=o.key,u=o.state;if(r)if(n.pushState({key:a,state:u},null,t),s)window.location.href=t;else{var l=_.indexOf(D.location.key),c=_.slice(0,l+1);c.push(o.key),_=c,g({action:i,location:o})}else window.location.href=t}}))},replace:function(e,t){var i="REPLACE",o=Cd(e,t,p(),D.location);m.confirmTransitionTo(o,i,l,(function(e){if(e){var t=k(o),a=o.key,u=o.state;if(r)if(n.replaceState({key:a,state:u},null,t),s)window.location.replace(t);else{var l=_.indexOf(D.location.key);-1!==l&&(_[l]=o.key),g({action:i,location:o})}else window.location.replace(t)}}))},go:E,goBack:function(){E(-1)},goForward:function(){E(1)},block:function(e){void 0===e&&(e=!1);var t=m.setPrompt(e);return C||(A(1),C=!0),function(){return C&&(C=!1,A(-1)),t()}},listen:function(e){var t=m.appendListener(e);return A(1),function(){A(-1),t()}}};return D}var Rd="hashchange",Pd={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+_d(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:_d,decodePath:wd},slash:{encodePath:wd,decodePath:wd}};function Ld(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function Bd(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function Id(e){window.location.replace(Ld(window.location.href)+"#"+e)}function jd(e){void 0===e&&(e={}),Fd||xd(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,i=void 0===r?Nd:r,o=n.hashType,a=void 0===o?"slash":o,s=e.basename?Sd(wd(e.basename)):"",u=Pd[a],l=u.encodePath,c=u.decodePath;function f(){var e=c(Bd());return s&&(e=Ed(e,s)),Cd(e)}var d=Md();function h(e){pd(S,e),S.length=t.length,d.notifyListeners(S.location,S.action)}var p=!1,m=null;function g(){var e,t,n=Bd(),r=l(n);if(n!==r)Id(r);else{var o=f(),a=S.location;if(!p&&(t=o,(e=a).pathname===t.pathname&&e.search===t.search&&e.hash===t.hash))return;if(m===Ad(o))return;m=null,function(e){if(p)p=!1,h();else{var t="POP";d.confirmTransitionTo(e,t,i,(function(n){n?h({action:t,location:e}):function(e){var t=S.location,n=x.lastIndexOf(Ad(t));-1===n&&(n=0);var r=x.lastIndexOf(Ad(e));-1===r&&(r=0);var i=n-r;i&&(p=!0,w(i))}(e)}))}}(o)}}var y=Bd(),v=l(y);y!==v&&Id(v);var b=f(),x=[Ad(b)];function w(e){t.go(e)}var _=0;function k(e){1===(_+=e)&&1===e?window.addEventListener(Rd,g):0===_&&window.removeEventListener(Rd,g)}var E=!1;var S={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=Ld(window.location.href)),n+"#"+l(s+Ad(e))},push:function(e,t){var n="PUSH",r=Cd(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=Ad(r),i=l(s+t);if(Bd()!==i){m=t,function(e){window.location.hash=e}(i);var o=x.lastIndexOf(Ad(S.location)),a=x.slice(0,o+1);a.push(t),x=a,h({action:n,location:r})}else h()}}))},replace:function(e,t){var n="REPLACE",r=Cd(e,void 0,void 0,S.location);d.confirmTransitionTo(r,n,i,(function(e){if(e){var t=Ad(r),i=l(s+t);Bd()!==i&&(m=t,Id(i));var o=x.indexOf(Ad(S.location));-1!==o&&(x[o]=t),h({action:n,location:r})}}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return E||(k(1),E=!0),function(){return E&&(E=!1,k(-1)),t()}},listen:function(e){var t=d.appendListener(e);return k(1),function(){k(-1),t()}}};return S}function Ud(e,t,n){return Math.min(Math.max(e,t),n)}function qd(e){void 0===e&&(e={});var t=e,n=t.getUserConfirmation,r=t.initialEntries,i=void 0===r?["/"]:r,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,u=void 0===s?6:s,l=Md();function c(e){pd(g,e),g.length=g.entries.length,l.notifyListeners(g.location,g.action)}function f(){return Math.random().toString(36).substr(2,u)}var d=Ud(a,0,i.length-1),h=i.map((function(e){return Cd(e,void 0,"string"==typeof e?f():e.key||f())})),p=Ad;function m(e){var t=Ud(g.index+e,0,g.entries.length-1),r=g.entries[t];l.confirmTransitionTo(r,"POP",n,(function(e){e?c({action:"POP",location:r,index:t}):c()}))}var g={length:h.length,action:"POP",location:h[d],index:d,entries:h,createHref:p,push:function(e,t){var r="PUSH",i=Cd(e,t,f(),g.location);l.confirmTransitionTo(i,r,n,(function(e){if(e){var t=g.index+1,n=g.entries.slice(0);n.length>t?n.splice(t,n.length-t,i):n.push(i),c({action:r,location:i,index:t,entries:n})}}))},replace:function(e,t){var r="REPLACE",i=Cd(e,t,f(),g.location);l.confirmTransitionTo(i,r,n,(function(e){e&&(g.entries[g.index]=i,c({action:r,location:i}))}))},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=g.index+e;return t>=0&&t<g.entries.length},block:function(e){return void 0===e&&(e=!1),l.setPrompt(e)},listen:function(e){return l.appendListener(e)}};return g}we();var Wd=1073741823,Hd="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:{};function Vd(e){var t=[];return{on:function(e){t.push(e)},off:function(e){t=t.filter((function(t){return t!==e}))},get:function(){return e},set:function(n,r){e=n,t.forEach((function(t){return t(e,r)}))}}}var Gd=be.createContext||function(e,t){var n,r,i,o="__create-react-context-"+((Hd[i="__global_unique_id__"]=(Hd[i]||0)+1)+"__"),a=function(e){function n(){var t;return(t=e.apply(this,arguments)||this).emitter=Vd(t.props.value),t}rd(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;((o=r)===(a=i)?0!==o||1/o==1/a:o!=o&&a!=a)?n=0:(n="function"==typeof t?t(r,i):Wd,0!==(n|=0)&&this.emitter.set(e.value,n))}var o,a},r.render=function(){return this.props.children},n}(we().Component);a.childContextTypes=((n={})[o]=dd.object.isRequired,n);var s=function(t){function n(){var e;return(e=t.apply(this,arguments)||this).state={value:e.getValue()},e.onUpdate=function(t,n){0!=((0|e.observedBits)&n)&&e.setState({value:e.getValue()})},e}rd(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?Wd:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?Wd:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(we().Component);return s.contextTypes=((r={})[o]=dd.object,r),{Provider:a,Consumer:s}},Yd={},Xd=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},Qd=th;(Yd=lh).parse=Qd;var Jd=function(e,t){return rh(th(e,t),t)};Yd.compile=Jd;var Kd=rh;Yd.tokensToFunction=Kd;var Zd=uh;Yd.tokensToRegExp=Zd;var eh=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function th(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=eh.exec(e));){var u=n[0],l=n[1],c=n.index;if(a+=e.slice(o,c),o=c+u.length,l)a+=l[1];else{var f=e[o],d=n[2],h=n[3],p=n[4],m=n[5],g=n[6],y=n[7];a&&(r.push(a),a="");var v=null!=d&&null!=f&&f!==d,b="+"===g||"*"===g,x="?"===g||"*"===g,w=n[2]||s,_=p||m;r.push({name:h||i++,prefix:d||"",delimiter:w,optional:x,repeat:b,partial:v,asterisk:!!y,pattern:_?oh(_):y?".*":"[^"+ih(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function nh(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function rh(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",sh(t)));return function(t,r){for(var i="",o=t||{},a=(r||{}).pretty?nh:encodeURIComponent,s=0;s<e.length;s++){var u=e[s];if("string"!=typeof u){var l,c=o[u.name];if(null==c){if(u.optional){u.partial&&(i+=u.prefix);continue}throw new TypeError('Expected "'+u.name+'" to be defined')}if(Xd(c)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<c.length;f++){if(l=a(c[f]),!n[s].test(l))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===f?u.prefix:u.delimiter)+l}}else{if(l=u.asterisk?encodeURI(c).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(c),!n[s].test(l))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but received "'+l+'"');i+=u.prefix+l}}else i+=u}return i}}function ih(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function oh(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function ah(e,t){return e.keys=t,e}function sh(e){return e&&e.sensitive?"":"i"}function uh(e,t,n){Xd(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=ih(s);else{var u=ih(s.prefix),l="(?:"+s.pattern+")";t.push(s),s.repeat&&(l+="(?:"+u+l+")*"),o+=l=s.optional?s.partial?u+"("+l+")?":"(?:"+u+"("+l+"))?":u+"("+l+")"}}var c=ih(n.delimiter||"/"),f=o.slice(-c.length)===c;return r||(o=(f?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),o+=i?"$":r&&f?"":"(?="+c+"|$)",ah(new RegExp("^"+o,sh(n)),t)}function lh(e,t,n){return Xd(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return ah(e,t)}(e,t):Xd(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(lh(e[i],t,n).source);return ah(new RegExp("(?:"+r.join("|")+")",sh(n)),t)}(e,t,n):function(e,t,n){return uh(th(e,n),t,n)}(e,t,n)}var ch,fh,dh,hh,ph,mh,gh,yh,vh,bh,xh,wh,_h,kh,Eh,Sh,Ah,Ch,Dh,Mh,Fh,Nh,Oh,Th,$h,zh,Rh,Ph,Lh,Bh,Ih,jh,Uh,qh,Wh,Hh,Vh,Gh,Yh,Xh,Qh,Jh,Kh,Zh,ep,tp,np,rp,ip=t(Yd),op=!1;function ap(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case dh:switch(e=e.type){case bh:case xh:case ph:case gh:case mh:case _h:return e;default:switch(e=e&&e.$$typeof){case vh:case wh:case Sh:case Eh:case yh:return e;default:return t}}case hh:return t}}}function sp(e){return ap(e)===xh}var up={};function lp(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}op||(op=!0,ch={},fh="function"==typeof Symbol&&Symbol.for,dh=fh?Symbol.for("react.element"):60103,hh=fh?Symbol.for("react.portal"):60106,ph=fh?Symbol.for("react.fragment"):60107,mh=fh?Symbol.for("react.strict_mode"):60108,gh=fh?Symbol.for("react.profiler"):60114,yh=fh?Symbol.for("react.provider"):60109,vh=fh?Symbol.for("react.context"):60110,bh=fh?Symbol.for("react.async_mode"):60111,xh=fh?Symbol.for("react.concurrent_mode"):60111,wh=fh?Symbol.for("react.forward_ref"):60112,_h=fh?Symbol.for("react.suspense"):60113,kh=fh?Symbol.for("react.suspense_list"):60120,Eh=fh?Symbol.for("react.memo"):60115,Sh=fh?Symbol.for("react.lazy"):60116,Ah=fh?Symbol.for("react.block"):60121,Ch=fh?Symbol.for("react.fundamental"):60117,Dh=fh?Symbol.for("react.responder"):60118,Mh=fh?Symbol.for("react.scope"):60119,Fh=bh,ch.AsyncMode=Fh,Nh=xh,ch.ConcurrentMode=Nh,Oh=vh,ch.ContextConsumer=Oh,Th=yh,ch.ContextProvider=Th,$h=dh,ch.Element=$h,zh=wh,ch.ForwardRef=zh,Rh=ph,ch.Fragment=Rh,Ph=Sh,ch.Lazy=Ph,Lh=Eh,ch.Memo=Lh,Bh=hh,ch.Portal=Bh,Ih=gh,ch.Profiler=Ih,jh=mh,ch.StrictMode=jh,Uh=_h,ch.Suspense=Uh,qh=function(e){return sp(e)||ap(e)===bh},ch.isAsyncMode=qh,Wh=sp,ch.isConcurrentMode=Wh,Hh=function(e){return ap(e)===vh},ch.isContextConsumer=Hh,Vh=function(e){return ap(e)===yh},ch.isContextProvider=Vh,Gh=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===dh},ch.isElement=Gh,Yh=function(e){return ap(e)===wh},ch.isForwardRef=Yh,Xh=function(e){return ap(e)===ph},ch.isFragment=Xh,Qh=function(e){return ap(e)===Sh},ch.isLazy=Qh,Jh=function(e){return ap(e)===Eh},ch.isMemo=Jh,Kh=function(e){return ap(e)===hh},ch.isPortal=Kh,Zh=function(e){return ap(e)===gh},ch.isProfiler=Zh,ep=function(e){return ap(e)===mh},ch.isStrictMode=ep,tp=function(e){return ap(e)===_h},ch.isSuspense=tp,np=function(e){return"string"==typeof e||"function"==typeof e||e===ph||e===xh||e===gh||e===mh||e===_h||e===kh||"object"==typeof e&&null!==e&&(e.$$typeof===Sh||e.$$typeof===Eh||e.$$typeof===yh||e.$$typeof===vh||e.$$typeof===wh||e.$$typeof===Ch||e.$$typeof===Dh||e.$$typeof===Mh||e.$$typeof===Ah)},ch.isValidElementType=np,rp=ap,ch.typeOf=rp);var cp={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},fp={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dp={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},hp={};function pp(e){return up.isMemo(e)?dp:hp[e.$$typeof]||cp}hp[(up=ch).ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},hp[up.Memo]=dp;var mp=Object.defineProperty,gp=Object.getOwnPropertyNames,yp=Object.getOwnPropertySymbols,vp=Object.getOwnPropertyDescriptor,bp=Object.getPrototypeOf,xp=Object.prototype;var wp=function(e){var t=Gd();return t.displayName=e,t}("Router-History"),_p=function(e){var t=Gd();return t.displayName=e,t}("Router"),kp=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._isMounted?n.setState({location:e}):n._pendingLocation=e}))),n}rd(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&this.unlisten()},n.render=function(){return be.createElement(_p.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},be.createElement(wp.Provider,{children:this.props.children||null,value:this.props.history}))},t}(be.Component);be.Component;var Ep=function(e){function t(){return e.apply(this,arguments)||this}rd(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(be.Component);var Sp={},Ap=0;function Cp(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(Sp[e])return Sp[e];var t=ip.compile(e);return Ap<1e4&&(Sp[e]=t,Ap++),t}(e)(t,{pretty:!0})}function Dp(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return be.createElement(_p.Consumer,null,(function(e){e||xd(!1);var r=e.history,o=e.staticContext,a=i?r.push:r.replace,s=Cd(t?"string"==typeof n?Cp(n,t.params):pd({},n,{pathname:Cp(n.pathname,t.params)}):n);return o?(a(s),null):be.createElement(Ep,{onMount:function(){a(s)},onUpdate:function(e,t){var n=Cd(t.to);Dd(n,pd({},s,{key:n.key}))||a(s)},to:n})}))}var Mp={},Fp=0;function Np(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,u=n.sensitive,l=void 0!==u&&u;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=Mp[n]||(Mp[n]={});if(r[e])return r[e];var i=[],o={regexp:ip(e,i,t),keys:i};return Fp<1e4&&(r[e]=o,Fp++),o}(n,{end:o,strict:s,sensitive:l}),i=r.regexp,a=r.keys,u=i.exec(e);if(!u)return null;var c=u[0],f=u.slice(1),d=e===c;return o&&!d?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:d,params:a.reduce((function(e,t,n){return e[t.name]=f[n],e}),{})}}),null)}var Op=function(e){function t(){return e.apply(this,arguments)||this}return rd(t,e),t.prototype.render=function(){var e=this;return be.createElement(_p.Consumer,null,(function(t){t||xd(!1);var n=e.props.location||t.location,r=e.props.computedMatch?e.props.computedMatch:e.props.path?Np(n.pathname,e.props):t.match,i=pd({},t,{location:n,match:r}),o=e.props,a=o.children,s=o.component,u=o.render;return Array.isArray(a)&&0===a.length&&(a=null),be.createElement(_p.Provider,{value:i},i.match?a?"function"==typeof a?a(i):a:s?be.createElement(s,i):u?u(i):null:"function"==typeof a?a(i):null)}))},t}(be.Component);function Tp(e){return"/"===e.charAt(0)?e:"/"+e}function $p(e,t){if(!e)return t;var n=Tp(e);return 0!==t.pathname.indexOf(n)?t:pd({},t,{pathname:t.pathname.substr(n.length)})}function zp(e){return"string"==typeof e?e:Ad(e)}function Rp(e){return function(){xd(!1)}}function Pp(){}be.Component;var Lp=function(e){function t(){return e.apply(this,arguments)||this}return rd(t,e),t.prototype.render=function(){var e=this;return be.createElement(_p.Consumer,null,(function(t){t||xd(!1);var n,r,i=e.props.location||t.location;return be.Children.forEach(e.props.children,(function(e){if(null==r&&be.isValidElement(e)){n=e;var o=e.props.path||e.props.from;r=o?Np(i.pathname,pd({},e.props,{path:o})):t.match}})),r?be.cloneElement(n,{location:i,computedMatch:r}):null}))},t}(be.Component);be.useContext;we();var Bp=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).history=zd(t.props),t}return rd(t,e),t.prototype.render=function(){return be.createElement(kp,{history:this.history,children:this.props.children})},t}(be.Component);be.Component;var Ip=function(e,t){return"function"==typeof e?e(t):e},jp=function(e,t){return"string"==typeof e?Cd(e,null,null,t):e},Up=function(e){return e},qp=be.forwardRef;void 0===qp&&(qp=Up);var Wp=qp((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=lp(e,["innerRef","navigate","onClick"]),a=o.target,s=pd({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return s.ref=Up!==qp&&t||n,be.createElement("a",s)}));var Hp=qp((function(e,t){var n=e.component,r=void 0===n?Wp:n,i=e.replace,o=e.to,a=e.innerRef,s=lp(e,["component","replace","to","innerRef"]);return be.createElement(_p.Consumer,null,(function(e){e||xd(!1);var n=e.history,u=jp(Ip(o,e.location),e.location),l=u?n.createHref(u):"",c=pd({},s,{href:l,navigate:function(){var t=Ip(o,e.location);(i?n.replace:n.push)(t)}});return Up!==qp?c.ref=t||a:c.innerRef=a,be.createElement(r,c)}))})),Vp=function(e){return e},Gp=be.forwardRef;void 0===Gp&&(Gp=Vp);var Yp=Gp((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,a=e.activeStyle,s=e.className,u=e.exact,l=e.isActive,c=e.location,f=e.sensitive,d=e.strict,h=e.style,p=e.to,m=e.innerRef,g=lp(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return be.createElement(_p.Consumer,null,(function(e){e||xd(!1);var n=c||e.location,i=jp(Ip(p,n),n),y=i.pathname,v=y&&y.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=v?Np(n.pathname,{path:v,exact:u,sensitive:f,strict:d}):null,x=!!(l?l(b,n):b),w=x?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(s,o):s,_=x?pd({},h,{},a):h,k=pd({"aria-current":x&&r||null,className:w,style:_,to:i},g);return Vp!==Gp?k.ref=t||m:k.innerRef=m,be.createElement(Hp,k)}))}));we();var Xp={},Qp={};function Jp(e){return new Function("d","return {"+e.map((function(e,t){return JSON.stringify(e)+": d["+t+'] || ""'})).join(",")+"}")}function Kp(e){var t=Object.create(null),n=[];return e.forEach((function(e){for(var r in e)r in t||n.push(t[r]=r)})),n}function Zp(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function em(e){var t,n=e.getUTCHours(),r=e.getUTCMinutes(),i=e.getUTCSeconds(),o=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":((t=e.getUTCFullYear())<0?"-"+Zp(-t,6):t>9999?"+"+Zp(t,6):Zp(t,4))+"-"+Zp(e.getUTCMonth()+1,2)+"-"+Zp(e.getUTCDate(),2)+(o?"T"+Zp(n,2)+":"+Zp(r,2)+":"+Zp(i,2)+"."+Zp(o,3)+"Z":i?"T"+Zp(n,2)+":"+Zp(r,2)+":"+Zp(i,2)+"Z":r||n?"T"+Zp(n,2)+":"+Zp(r,2)+"Z":"")}var tm=function(e){var t=new RegExp('["'+e+"\n\r]"),n=e.charCodeAt(0);function r(e,t){var r,i=[],o=e.length,a=0,s=0,u=o<=0,l=!1;function c(){if(u)return Qp;if(l)return l=!1,Xp;var t,r,i=a;if(34===e.charCodeAt(i)){for(;a++<o&&34!==e.charCodeAt(a)||34===e.charCodeAt(++a););return(t=a)>=o?u=!0:10===(r=e.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===e.charCodeAt(a)&&++a),e.slice(i+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(r=e.charCodeAt(t=a++)))l=!0;else if(13===r)l=!0,10===e.charCodeAt(a)&&++a;else if(r!==n)continue;return e.slice(i,t)}return u=!0,e.slice(i,o)}for(10===e.charCodeAt(o-1)&&--o,13===e.charCodeAt(o-1)&&--o;(r=c())!==Qp;){for(var f=[];r!==Xp&&r!==Qp;)f.push(r),r=c();t&&null==(f=t(f,s++))||i.push(f)}return i}function i(t,n){return t.map((function(t){return n.map((function(e){return a(t[e])})).join(e)}))}function o(t){return t.map(a).join(e)}function a(e){return null==e?"":e instanceof Date?em(e):t.test(e+="")?'"'+e.replace(/"/g,'""')+'"':e}return{parse:function(e,t){var n,i,o=r(e,(function(e,r){if(n)return n(e,r-1);i=e,n=t?function(e,t){var n=Jp(e);return function(r,i){return t(n(r),i,e)}}(e,t):Jp(e)}));return o.columns=i||[],o},parseRows:r,format:function(t,n){return null==n&&(n=Kp(t)),[n.map(a).join(e)].concat(i(t,n)).join("\n")},formatBody:function(e,t){return null==t&&(t=Kp(e)),i(e,t).join("\n")},formatRows:function(e){return e.map(o).join("\n")},formatRow:o,formatValue:a}},nm=tm(","),rm=nm.parse,im=(nm.parseRows,nm.format,nm.formatBody,nm.formatRows,nm.formatRow,nm.formatValue,tm("\t")),om=im.parse;im.parseRows,im.format,im.formatBody,im.formatRows,im.formatRow,im.formatValue;function am(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}var sm=function(e,t){return fetch(e,t).then(am)};function um(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=void 0),sm(t,n).then((function(t){return e(t,r)}))}}um(rm),um(om);we();we(),we();var lm={value:()=>{}};function cm(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new fm(r)}function fm(e){this._=e}function dm(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function hm(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function pm(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=lm,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}fm.prototype=cm.prototype={constructor:fm,on:function(e,t){var n,r=this._,i=dm(e+"",r),o=-1,a=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++o<a;)if(n=(e=i[o]).type)r[n]=pm(r[n],e.name,t);else if(null==t)for(n in r)r[n]=pm(r[n],e.name,null);return this}for(;++o<a;)if((n=(e=i[o]).type)&&(n=hm(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new fm(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=0,n=(r=this._[e]).length;o<n;++o)r[o].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};var mm=function(e){return function(){return this.matches(e)}};function gm(e){return function(t){return t.matches(e)}}var ym="http://www.w3.org/1999/xhtml",vm={svg:"http://www.w3.org/2000/svg",xhtml:ym,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bm=function(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),vm.hasOwnProperty(t)?{space:vm[t],local:e}:e};function xm(){}var wm=function(e){return null==e?xm:function(){return this.querySelector(e)}},_m=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function km(){return[]}var Em=function(e){return null==e?km:function(){return this.querySelectorAll(e)}};var Sm=Array.prototype.find;function Am(){return this.firstElementChild}var Cm=Array.prototype.filter;function Dm(){return this.children}var Mm=function(e){return new Array(e.length)};function Fm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Fm.prototype={constructor:Fm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};var Nm=function(e){return function(){return e}};function Om(e,t,n,r,i,o){for(var a,s=0,u=t.length,l=o.length;s<l;++s)(a=t[s])?(a.__data__=o[s],r[s]=a):n[s]=new Fm(e,o[s]);for(;s<u;++s)(a=t[s])&&(i[s]=a)}function Tm(e,t,n,r,i,o,a){var s,u,l,c=new Map,f=t.length,d=o.length,h=new Array(f);for(s=0;s<f;++s)(u=t[s])&&(h[s]=l=a.call(u,u.__data__,s,t)+"",c.has(l)?i[s]=u:c.set(l,u));for(s=0;s<d;++s)l=a.call(e,o[s],s,o)+"",(u=c.get(l))?(r[s]=u,u.__data__=o[s],c.delete(l)):n[s]=new Fm(e,o[s]);for(s=0;s<f;++s)(u=t[s])&&c.get(h[s])===u&&(i[s]=u)}function $m(e){return e.__data__}function zm(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Rm(e){return function(){this.removeAttribute(e)}}function Pm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Lm(e,t){return function(){this.setAttribute(e,t)}}function Bm(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Im(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function jm(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}var Um=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView};function qm(e){return function(){this.style.removeProperty(e)}}function Wm(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Hm(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Vm(e,t){return e.style.getPropertyValue(t)||Um(e).getComputedStyle(e,null).getPropertyValue(t)}function Gm(e){return function(){delete this[e]}}function Ym(e,t){return function(){this[e]=t}}function Xm(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function Qm(e){return e.trim().split(/^|\s+/)}function Jm(e){return e.classList||new Km(e)}function Km(e){this._node=e,this._names=Qm(e.getAttribute("class")||"")}function Zm(e,t){for(var n=Jm(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function eg(e,t){for(var n=Jm(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tg(e){return function(){Zm(this,e)}}function ng(e){return function(){eg(this,e)}}function rg(e,t){return function(){(t.apply(this,arguments)?Zm:eg)(this,e)}}Km.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ig(){this.textContent=""}function og(e){return function(){this.textContent=e}}function ag(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function sg(){this.innerHTML=""}function ug(e){return function(){this.innerHTML=e}}function lg(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function cg(){this.nextSibling&&this.parentNode.appendChild(this)}function fg(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function dg(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ym&&t.documentElement.namespaceURI===ym?t.createElement(e):t.createElementNS(n,e)}}function hg(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var pg=function(e){var t=bm(e);return(t.local?hg:dg)(t)};function mg(){return null}function gg(){var e=this.parentNode;e&&e.removeChild(this)}function yg(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vg(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function bg(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function xg(e){return function(){var t=this.__on;if(t){for(var n,r=0,i=-1,o=t.length;r<o;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?t.length=i:delete this.__on}}}function wg(e,t,n){return function(){var r,i=this.__on,o=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=t);this.addEventListener(e.type,o,n),r={type:e.type,name:e.name,value:t,listener:o,options:n},i?i.push(r):this.__on=[r]}}function _g(e,t,n){var r=Um(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function kg(e,t){return function(){return _g(this,e,t)}}function Eg(e,t){return function(){return _g(this,e,t.apply(this,arguments))}}var Sg=[null];function Ag(e,t){this._groups=e,this._parents=t}function Cg(){return new Ag([[document.documentElement]],Sg)}Ag.prototype=Cg.prototype={constructor:Ag,select:function(e){"function"!=typeof e&&(e=wm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=t[i],u=s.length,l=r[i]=new Array(u),c=0;c<u;++c)(o=s[c])&&(a=e.call(o,o.__data__,c,s))&&("__data__"in o&&(a.__data__=o.__data__),l[c]=a);return new Ag(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){var t=e.apply(this,arguments);return null==t?[]:_m(t)}}(e):Em(e);for(var t=this._groups,n=t.length,r=[],i=[],o=0;o<n;++o)for(var a,s=t[o],u=s.length,l=0;l<u;++l)(a=s[l])&&(r.push(e.call(a,a.__data__,l,s)),i.push(a));return new Ag(r,i)},selectChild:function(e){return this.select(null==e?Am:function(e){return function(){return Sm.call(this.children,e)}}("function"==typeof e?e:gm(e)))},selectChildren:function(e){return this.selectAll(null==e?Dm:function(e){return function(){return Cm.call(this.children,e)}}("function"==typeof e?e:gm(e)))},filter:function(e){"function"!=typeof e&&(e=mm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Ag(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,$m);var n=t?Tm:Om,r=this._parents,i=this._groups;"function"!=typeof e&&(e=Nm(e));for(var o=i.length,a=new Array(o),s=new Array(o),u=new Array(o),l=0;l<o;++l){var c=r[l],f=i[l],d=f.length,h=_m(e.call(c,c&&c.__data__,l,r)),p=h.length,m=s[l]=new Array(p),g=a[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v,b,x=0,w=0;x<p;++x)if(v=m[x]){for(x>=w&&(w=x+1);!(b=g[w])&&++w<p;);v._next=b||null}}return(a=new Ag(a,r))._enter=s,a._exit=u,a},enter:function(){return new Ag(this._enter||this._groups.map(Mm),this._parents)},exit:function(){return new Ag(this._exit||this._groups.map(Mm),this._parents)},join:function(e,t,n){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof e?e(r):r.append(e+""),null!=t&&(i=t(i)),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(e){if(!(e instanceof Ag))throw new Error("invalid merge");for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new Ag(a,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,i=e[t],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=zm);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],u=s.length,l=i[o]=new Array(u),c=0;c<u;++c)(a=s[c])&&(l[c]=a);l.sort(t)}return new Ag(i,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i,o=t[n],a=0,s=o.length;a<s;++a)(i=o[a])&&e.call(i,i.__data__,a,o);return this},attr:function(e,t){var n=bm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?Pm:Rm:"function"==typeof t?n.local?jm:Im:n.local?Bm:Lm)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?qm:"function"==typeof t?Hm:Wm)(e,t,null==n?"":n)):Vm(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?Gm:"function"==typeof t?Xm:Ym)(e,t)):this.node()[e]},classed:function(e,t){var n=Qm(e+"");if(arguments.length<2){for(var r=Jm(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof t?rg:t?tg:ng)(n,t))},text:function(e){return arguments.length?this.each(null==e?ig:("function"==typeof e?ag:og)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?sg:("function"==typeof e?lg:ug)(e)):this.node().innerHTML},raise:function(){return this.each(cg)},lower:function(){return this.each(fg)},append:function(e){var t="function"==typeof e?e:pg(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:pg(e),r=null==t?mg:"function"==typeof t?t:wm(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(gg)},clone:function(e){return this.select(e?vg:yg)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,i,o=bg(e+""),a=o.length;if(!(arguments.length<2)){for(s=t?wg:xg,r=0;r<a;++r)this.each(s(o[r],t,n));return this}var s=this.node().__on;if(s)for(var u,l=0,c=s.length;l<c;++l)for(r=0,u=s[l];r<a;++r)if((i=o[r]).type===u.type&&i.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Eg:kg)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,i=e[t],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};var Dg=function(e){return"string"==typeof e?new Ag([[document.querySelector(e)]],[document.documentElement]):new Ag([[e]],Sg)};var Mg={},Fg=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e};function Ng(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Og(){}var Tg=.7,$g=1.4285714285714286,zg="\\s*([+-]?\\d+)\\s*",Rg="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Pg="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Lg=/^#([0-9a-f]{3,8})$/,Bg=new RegExp("^rgb\\("+[zg,zg,zg]+"\\)$"),Ig=new RegExp("^rgb\\("+[Pg,Pg,Pg]+"\\)$"),jg=new RegExp("^rgba\\("+[zg,zg,zg,Rg]+"\\)$"),Ug=new RegExp("^rgba\\("+[Pg,Pg,Pg,Rg]+"\\)$"),qg=new RegExp("^hsl\\("+[Rg,Pg,Pg]+"\\)$"),Wg=new RegExp("^hsla\\("+[Rg,Pg,Pg,Rg]+"\\)$"),Hg={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Vg(){return this.rgb().formatHex()}function Gg(){return this.rgb().formatRgb()}function Yg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Lg.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Xg(t):3===n?new Zg(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Qg(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Qg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Bg.exec(e))?new Zg(t[1],t[2],t[3],1):(t=Ig.exec(e))?new Zg(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=jg.exec(e))?Qg(t[1],t[2],t[3],t[4]):(t=Ug.exec(e))?Qg(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=qg.exec(e))?ry(t[1],t[2]/100,t[3]/100,1):(t=Wg.exec(e))?ry(t[1],t[2]/100,t[3]/100,t[4]):Hg.hasOwnProperty(e)?Xg(Hg[e]):"transparent"===e?new Zg(NaN,NaN,NaN,0):null}function Xg(e){return new Zg(e>>16&255,e>>8&255,255&e,1)}function Qg(e,t,n,r){return r<=0&&(e=t=n=NaN),new Zg(e,t,n,r)}function Jg(e){return e instanceof Og||(e=Yg(e)),e?new Zg((e=e.rgb()).r,e.g,e.b,e.opacity):new Zg}function Kg(e,t,n,r){return 1===arguments.length?Jg(e):new Zg(e,t,n,null==r?1:r)}function Zg(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function ey(){return"#"+ny(this.r)+ny(this.g)+ny(this.b)}function ty(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function ny(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ry(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ay(e,t,n,r)}function iy(e){if(e instanceof ay)return new ay(e.h,e.s,e.l,e.opacity);if(e instanceof Og||(e=Yg(e)),!e)return new ay;if(e instanceof ay)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,u=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=u<.5?o+i:2-o-i,a*=60):s=u>0&&u<1?0:a,new ay(a,s,u,e.opacity)}function oy(e,t,n,r){return 1===arguments.length?iy(e):new ay(e,t,n,null==r?1:r)}function ay(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function sy(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}Fg(Og,Yg,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Vg,formatHex:Vg,formatHsl:function(){return iy(this).formatHsl()},formatRgb:Gg,toString:Gg}),Fg(Zg,Kg,Ng(Og,{brighter:function(e){return e=null==e?$g:Math.pow($g,e),new Zg(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Tg:Math.pow(Tg,e),new Zg(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ey,formatHex:ey,formatRgb:ty,toString:ty})),Fg(ay,oy,Ng(Og,{brighter:function(e){return e=null==e?$g:Math.pow($g,e),new ay(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Tg:Math.pow(Tg,e),new ay(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Zg(sy(e>=240?e-240:e+120,i,r),sy(e,i,r),sy(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));const uy=Math.PI/180,ly=180/Math.PI,cy=.96422,fy=.82521,dy=4/29,hy=6/29,py=.12841854934601665;function my(e){if(e instanceof yy)return new yy(e.l,e.a,e.b,e.opacity);if(e instanceof Ey)return Sy(e);e instanceof Zg||(e=Jg(e));var t,n,r=wy(e.r),i=wy(e.g),o=wy(e.b),a=vy((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?t=n=a:(t=vy((.4360747*r+.3850649*i+.1430804*o)/cy),n=vy((.0139322*r+.0971045*i+.7141733*o)/fy)),new yy(116*a-16,500*(t-a),200*(a-n),e.opacity)}function gy(e,t,n,r){return 1===arguments.length?my(e):new yy(e,t,n,null==r?1:r)}function yy(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function vy(e){return e>.008856451679035631?Math.pow(e,1/3):e/py+dy}function by(e){return e>hy?e*e*e:py*(e-dy)}function xy(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function wy(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _y(e){if(e instanceof Ey)return new Ey(e.h,e.c,e.l,e.opacity);if(e instanceof yy||(e=my(e)),0===e.a&&0===e.b)return new Ey(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*ly;return new Ey(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function ky(e,t,n,r){return 1===arguments.length?_y(e):new Ey(e,t,n,null==r?1:r)}function Ey(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Sy(e){if(isNaN(e.h))return new yy(e.l,0,0,e.opacity);var t=e.h*uy;return new yy(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Fg(yy,gy,Ng(Og,{brighter:function(e){return new yy(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new yy(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return new Zg(xy(3.1338561*(t=cy*by(t))-1.6168667*(e=1*by(e))-.4906146*(n=fy*by(n))),xy(-.9787684*t+1.9161415*e+.033454*n),xy(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),Fg(Ey,ky,Ng(Og,{brighter:function(e){return new Ey(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new Ey(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return Sy(this).rgb()}}));var Ay=-.14861,Cy=1.78277,Dy=-.29227,My=-.90649,Fy=1.97294,Ny=-1.7884503806,Oy=3.5172982438,Ty=-.6557636667999999;function $y(e){if(e instanceof Ry)return new Ry(e.h,e.s,e.l,e.opacity);e instanceof Zg||(e=Jg(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Ty*r+Ny*t-Oy*n)/-5.9615122912,o=r-i,a=(Fy*(n-i)-Dy*o)/My,s=Math.sqrt(a*a+o*o)/(Fy*i*(1-i)),u=s?Math.atan2(a,o)*ly-120:NaN;return new Ry(u<0?u+360:u,s,i,e.opacity)}function zy(e,t,n,r){return 1===arguments.length?$y(e):new Ry(e,t,n,null==r?1:r)}function Ry(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Py(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}Fg(Ry,zy,Ng(Og,{brighter:function(e){return e=null==e?$g:Math.pow($g,e),new Ry(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Tg:Math.pow(Tg,e),new Ry(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*uy,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new Zg(255*(t+n*(Ay*r+Cy*i)),255*(t+n*(Dy*r+My*i)),255*(t+n*(Fy*r)),this.opacity)}}));var Ly=function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return Py((n-r/t)*t,a,i,o,s)}},By=function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return Py((n-r/t)*t,i,o,a,s)}},Iy=e=>()=>e;function jy(e,t){return function(n){return e+n*t}}function Uy(e,t){var n=t-e;return n?jy(e,n>180||n<-180?n-360*Math.round(n/360):n):Iy(isNaN(e)?t:e)}function qy(e){return 1==(e=+e)?Wy:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):Iy(isNaN(t)?n:t)}}function Wy(e,t){var n=t-e;return n?jy(e,n):Iy(isNaN(e)?t:e)}var Hy=function e(t){var n=qy(t);function r(e,t){var r=n((e=Kg(e)).r,(t=Kg(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=Wy(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function Vy(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Kg(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}var Gy=Vy(Ly),Yy=Vy(By),Xy=function(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}};function Qy(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}var Jy=function(e,t){return(Qy(t)?Xy:Ky)(e,t)};function Ky(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=av(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}var Zy=function(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}},ev=function(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}},tv=function(e,t){var n,r={},i={};for(n in null!==e&&"object"==typeof e||(e={}),null!==t&&"object"==typeof t||(t={}),t)n in e?r[n]=av(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},nv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,rv=new RegExp(nv.source,"g");var iv,ov=function(e,t){var n,r,i,o=nv.lastIndex=rv.lastIndex=0,a=-1,s=[],u=[];for(e+="",t+="";(n=nv.exec(e))&&(r=rv.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,u.push({i:a,x:ev(n,r)})),o=rv.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)s[(n=u[r]).i]=n.x(e);return s.join("")})},av=function(e,t){var n,r=typeof t;return null==t||"boolean"===r?Iy(t):("number"===r?ev:"string"===r?(n=Yg(t))?(t=n,Hy):ov:t instanceof Yg?Hy:t instanceof Date?Zy:Qy(t)?Xy:Array.isArray(t)?Ky:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?tv:ev)(e,t)},sv=function(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}},uv=function(e,t){var n=Uy(+e,+t);return function(e){var t=n(e);return t-360*Math.floor(t/360)}},lv=function(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}},cv=180/Math.PI,fv={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},dv=function(e,t,n,r,i,o){var a,s,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,u/=s),e*r<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*cv,skewX:Math.atan(u)*cv,scaleX:a,scaleY:s}};function hv(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}return function(o,a){var s=[],u=[];return o=e(o),a=e(a),function(e,r,i,o,a,s){if(e!==i||r!==o){var u=a.push("translate(",null,t,null,n);s.push({i:u-4,x:ev(e,i)},{i:u-2,x:ev(r,o)})}else(i||o)&&a.push("translate("+i+t+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,u),function(e,t,n,o){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:ev(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}(o.rotate,a.rotate,s,u),function(e,t,n,o){e!==t?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:ev(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}(o.skewX,a.skewX,s,u),function(e,t,n,r,o,a){if(e!==n||t!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:ev(e,n)},{i:s-2,x:ev(t,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,u),o=a=null,function(e){for(var t,n=-1,r=u.length;++n<r;)s[(t=u[n]).i]=t.x(e);return s.join("")}}}var pv=hv((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?fv:dv(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),mv=hv((function(e){return null==e?fv:(iv||(iv=document.createElementNS("http://www.w3.org/2000/svg","g")),iv.setAttribute("transform",e),(e=iv.transform.baseVal.consolidate())?(e=e.matrix,dv(e.a,e.b,e.c,e.d,e.e,e.f)):fv)}),", ",")",")");function gv(e){return((e=Math.exp(e))+1/e)/2}var yv=function e(t,n,r){function i(e,i){var o,a,s=e[0],u=e[1],l=e[2],c=i[0],f=i[1],d=i[2],h=c-s,p=f-u,m=h*h+p*p;if(m<1e-12)a=Math.log(d/l)/t,o=function(e){return[s+e*h,u+e*p,l*Math.exp(t*e*a)]};else{var g=Math.sqrt(m),y=(d*d-l*l+r*m)/(2*l*n*g),v=(d*d-l*l-r*m)/(2*d*n*g),b=Math.log(Math.sqrt(y*y+1)-y),x=Math.log(Math.sqrt(v*v+1)-v);a=(x-b)/t,o=function(e){var r,i=e*a,o=gv(b),c=l/(n*g)*(o*(r=t*i+b,((r=Math.exp(2*r))-1)/(r+1))-function(e){return((e=Math.exp(e))-1/e)/2}(b));return[s+c*h,u+c*p,l*o/gv(t*i+b)]}}return o.duration=1e3*a*t/Math.SQRT2,o}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4);function vv(e){return function(t,n){var r=e((t=oy(t)).h,(n=oy(n)).h),i=Wy(t.s,n.s),o=Wy(t.l,n.l),a=Wy(t.opacity,n.opacity);return function(e){return t.h=r(e),t.s=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var bv=vv(Uy),xv=vv(Wy);function wv(e,t){var n=Wy((e=gy(e)).l,(t=gy(t)).l),r=Wy(e.a,t.a),i=Wy(e.b,t.b),o=Wy(e.opacity,t.opacity);return function(t){return e.l=n(t),e.a=r(t),e.b=i(t),e.opacity=o(t),e+""}}function _v(e){return function(t,n){var r=e((t=ky(t)).h,(n=ky(n)).h),i=Wy(t.c,n.c),o=Wy(t.l,n.l),a=Wy(t.opacity,n.opacity);return function(e){return t.h=r(e),t.c=i(e),t.l=o(e),t.opacity=a(e),t+""}}}var kv=_v(Uy),Ev=_v(Wy);function Sv(e){return function t(n){function r(t,r){var i=e((t=zy(t)).h,(r=zy(r)).h),o=Wy(t.s,r.s),a=Wy(t.l,r.l),s=Wy(t.opacity,r.opacity);return function(e){return t.h=i(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,r.gamma=t,r}(1)}var Av=Sv(Uy),Cv=Sv(Wy);function Dv(e,t){void 0===t&&(t=e,e=av);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}var Mv=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};n(Mg,"interpolate",(function(){return av})),n(Mg,"interpolateArray",(function(){return Jy})),n(Mg,"interpolateBasis",(function(){return Ly})),n(Mg,"interpolateBasisClosed",(function(){return By})),n(Mg,"interpolateDate",(function(){return Zy})),n(Mg,"interpolateDiscrete",(function(){return sv})),n(Mg,"interpolateHue",(function(){return uv})),n(Mg,"interpolateNumber",(function(){return ev})),n(Mg,"interpolateNumberArray",(function(){return Xy})),n(Mg,"interpolateObject",(function(){return tv})),n(Mg,"interpolateRound",(function(){return lv})),n(Mg,"interpolateString",(function(){return ov})),n(Mg,"interpolateTransformSvg",(function(){return mv})),n(Mg,"interpolateTransformCss",(function(){return pv})),n(Mg,"interpolateZoom",(function(){return yv})),n(Mg,"interpolateRgbBasisClosed",(function(){return Yy})),n(Mg,"interpolateRgbBasis",(function(){return Gy})),n(Mg,"interpolateRgb",(function(){return Hy})),n(Mg,"interpolateHslLong",(function(){return xv})),n(Mg,"interpolateHsl",(function(){return bv})),n(Mg,"interpolateLab",(function(){return wv})),n(Mg,"interpolateHclLong",(function(){return Ev})),n(Mg,"interpolateHcl",(function(){return kv})),n(Mg,"interpolateCubehelixLong",(function(){return Cv})),n(Mg,"interpolateCubehelix",(function(){return Av})),n(Mg,"piecewise",(function(){return Dv})),n(Mg,"quantize",(function(){return Mv}));var Fv,Nv,Ov=0,Tv=0,$v=0,zv=0,Rv=0,Pv=0,Lv="object"==typeof performance&&performance.now?performance:Date,Bv="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Iv(){return Rv||(Bv(jv),Rv=Lv.now()+Pv)}function jv(){Rv=0}function Uv(){this._call=this._time=this._next=null}function qv(e,t,n){var r=new Uv;return r.restart(e,t,n),r}function Wv(){Rv=(zv=Lv.now())+Pv,Ov=Tv=0;try{!function(){Iv(),++Ov;for(var e,t=Fv;t;)(e=Rv-t._time)>=0&&t._call.call(null,e),t=t._next;--Ov}()}finally{Ov=0,function(){var e,t,n=Fv,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:Fv=t);Nv=e,Vv(r)}(),Rv=0}}function Hv(){var e=Lv.now(),t=e-zv;t>1e3&&(Pv-=t,zv=e)}function Vv(e){Ov||(Tv&&(Tv=clearTimeout(Tv)),e-Rv>24?(e<1/0&&(Tv=setTimeout(Wv,e-Lv.now()-Pv)),$v&&($v=clearInterval($v))):($v||(zv=Lv.now(),$v=setInterval(Hv,1e3)),Ov=1,Bv(Wv)))}Uv.prototype=qv.prototype={constructor:Uv,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Iv():+n)+(null==t?0:+t),this._next||Nv===this||(Nv?Nv._next=this:Fv=this,Nv=this),this._call=e,this._time=n,Vv()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vv())}};var Gv=function(e,t,n){var r=new Uv;return t=null==t?0:+t,r.restart((n=>{r.stop(),e(n+t)}),t,n),r},Yv=cm("start","end","cancel","interrupt"),Xv=[],Qv=function(e,t,n,r,i,o){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var r,i=e.__transition;function o(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(o){var l,c,f,d;if(1!==n.state)return u();for(l in i)if((d=i[l]).name===n.name){if(3===d.state)return Gv(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete i[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete i[l])}if(Gv((function(){3===n.state&&(n.state=4,n.timer.restart(s,n.delay,n.time),s(o))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,c=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++c]=d);r.length=c+1}}function s(t){for(var i=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(e,i);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var r in n.state=6,n.timer.stop(),delete i[t],i)return;delete e.__transition}i[t]=n,n.timer=qv(o,0,n.time)}(e,n,{name:t,index:r,group:i,on:Yv,tween:Xv,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})};function Jv(e,t){var n=Zv(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function Kv(e,t){var n=Zv(e,t);if(n.state>3)throw new Error("too late; already running");return n}function Zv(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}var eb=function(e,t){var n,r,i,o=e.__transition,a=!0;if(o){for(i in t=null==t?null:t+"",o)(n=o[i]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete e.__transition}};function tb(e,t){var n,r;return function(){var i=Kv(this,e),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===t){(r=r.slice()).splice(a,1);break}i.tween=r}}function nb(e,t,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=Kv(this,e),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=s;break}u===l&&i.push(s)}o.tween=i}}function rb(e,t,n){var r=e._id;return e.each((function(){var e=Kv(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return Zv(e,r).value[t]}}var ib=function(e,t){var n;return("number"==typeof t?ev:t instanceof Yg?Hy:(n=Yg(t))?(t=n,Hy):ov)(e,t)};function ob(e){return function(){this.removeAttribute(e)}}function ab(e){return function(){this.removeAttributeNS(e.space,e.local)}}function sb(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttribute(e);return a===o?null:a===r?i:i=t(r=a,n)}}function ub(e,t,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===o?null:a===r?i:i=t(r=a,n)}}function lb(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttribute(e)}}function cb(e,t,n){var r,i,o;return function(){var a,s,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(s=u+"")?null:a===r&&s===i?o:(i=s,o=t(r=a,u));this.removeAttributeNS(e.space,e.local)}}function fb(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function db(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hb(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&db(e,i)),n}return i._value=t,i}function pb(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&fb(e,i)),n}return i._value=t,i}function mb(e,t){return function(){Jv(this,e).delay=+t.apply(this,arguments)}}function gb(e,t){return t=+t,function(){Jv(this,e).delay=t}}function yb(e,t){return function(){Kv(this,e).duration=+t.apply(this,arguments)}}function vb(e,t){return t=+t,function(){Kv(this,e).duration=t}}function bb(e,t){if("function"!=typeof t)throw new Error;return function(){Kv(this,e).ease=t}}function xb(e,t,n){var r,i,o=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Jv:Kv;return function(){var a=o(this,e),s=a.on;s!==r&&(i=(r=s).copy()).on(t,n),a.on=i}}var wb=Cg.prototype.constructor;function _b(e){return function(){this.style.removeProperty(e)}}function kb(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Eb(e,t,n){var r,i;function o(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&kb(e,o,n)),r}return o._value=t,o}function Sb(e){return function(t){this.textContent=e.call(this,t)}}function Ab(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Sb(r)),t}return r._value=e,r}var Cb=0;function Db(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Mb(){return++Cb}var Fb=Cg.prototype;Db.prototype=function(e){return Cg().transition(e)}.prototype={constructor:Db,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=wm(e));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,u,l=r[a],c=l.length,f=o[a]=new Array(c),d=0;d<c;++d)(s=l[d])&&(u=e.call(s,s.__data__,d,l))&&("__data__"in s&&(u.__data__=s.__data__),f[d]=u,Qv(f[d],t,n,d,f,Zv(s,n)));return new Db(o,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Em(e));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var u,l=r[s],c=l.length,f=0;f<c;++f)if(u=l[f]){for(var d,h=e.call(u,u.__data__,f,l),p=Zv(u,n),m=0,g=h.length;m<g;++m)(d=h[m])&&Qv(d,t,n,m,h,p);o.push(h),a.push(u)}return new Db(o,a,t,n)},filter:function(e){"function"!=typeof e&&(e=mm(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var o,a=t[i],s=a.length,u=r[i]=[],l=0;l<s;++l)(o=a[l])&&e.call(o,o.__data__,l,a)&&u.push(o);return new Db(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var u,l=t[s],c=n[s],f=l.length,d=a[s]=new Array(f),h=0;h<f;++h)(u=l[h]||c[h])&&(d[h]=u);for(;s<r;++s)a[s]=t[s];return new Db(a,this._parents,this._name,this._id)},selection:function(){return new wb(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=Mb(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)if(a=s[l]){var c=Zv(a,t);Qv(a,e,n,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Db(r,this._parents,e,n)},call:Fb.call,nodes:Fb.nodes,node:Fb.node,size:Fb.size,empty:Fb.empty,each:Fb.each,on:function(e,t){var n=this._id;return arguments.length<2?Zv(this.node(),n).on.on(e):this.each(xb(n,e,t))},attr:function(e,t){var n=bm(e),r="transform"===n?mv:ib;return this.attrTween(e,"function"==typeof t?(n.local?cb:lb)(n,r,rb(this,"attr."+e,t)):null==t?(n.local?ab:ob)(n):(n.local?ub:sb)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=bm(e);return this.tween(n,(r.local?hb:pb)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?pv:ib;return null==t?this.styleTween(e,function(e,t){var n,r,i;return function(){var o=Vm(this,e),a=(this.style.removeProperty(e),Vm(this,e));return o===a?null:o===n&&a===r?i:i=t(n=o,r=a)}}(e,r)).on("end.style."+e,_b(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,i,o;return function(){var a=Vm(this,e),s=n(this),u=s+"";return null==s&&(this.style.removeProperty(e),u=s=Vm(this,e)),a===u?null:a===r&&u===i?o:(i=u,o=t(r=a,s))}}(e,r,rb(this,"style."+e,t))).each(function(e,t){var n,r,i,o,a="style."+t,s="end."+a;return function(){var u=Kv(this,e),l=u.on,c=null==u.value[a]?o||(o=_b(t)):void 0;l===n&&i===c||(r=(n=l).copy()).on(s,i=c),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,i,o=n+"";return function(){var a=Vm(this,e);return a===o?null:a===r?i:i=t(r=a,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Eb(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(rb(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Ab(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,i=Zv(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===e)return r.value;return null}return this.each((null==t?tb:nb)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?mb:gb)(t,e)):Zv(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?yb:vb)(t,e)):Zv(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(bb(t,e)):Zv(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Kv(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,i=n.size();return new Promise((function(o,a){var s={value:a},u={value:function(){0==--i&&o()}};n.each((function(){var n=Kv(this,r),i=n.on;i!==e&&((t=(e=i).copy())._.cancel.push(s),t._.interrupt.push(s),t._.end.push(u)),n.on=t})),0===i&&o()}))},[Symbol.iterator]:Fb[Symbol.iterator]};var Nb={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Ob(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Cg.prototype.interrupt=function(e){return this.each((function(){eb(this,e)}))},Cg.prototype.transition=function(e){var t,n;e instanceof Db?(t=e._id,e=e._name):(t=Mb(),(n=Nb).time=Iv(),e=null==e?null:e+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],u=s.length,l=0;l<u;++l)(a=s[l])&&Qv(a,e,t,l,s,n||Ob(a,t));return new Db(r,this._parents,e,t)};const{abs:Tb,max:$b,min:zb}=Math;["w","e"].map(Rb),["n","s"].map(Rb),["n","w","e","s","nw","ne","sw","se"].map(Rb);function Rb(e){return{type:e}}var Pb=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},Lb=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>Pb(e(t),n)}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}};var Bb=function(e){return null===e?NaN:+e};const Ib=Lb(Pb),jb=Ib.right,Ub=Ib.left;Lb(Bb).center;class qb{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],o=e+i,a=Math.abs(e)<Math.abs(i)?e-(o-i):i-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,o=0;if(i>0){for(o=e[--i];i>0&&(t=o,n=e[--i],o=t+n,r=n-(o-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=o+n,n==t-o&&(o=t))}return o}}function Wb(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n<t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function Hb(e,t){let n;if(void 0===t)for(const t of e)null!=t&&(n>t||void 0===n&&t>=t)&&(n=t);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Vb(e,t,n=0,r=e.length-1,i=Pb){for(;r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),u=.5*Math.exp(2*s/3),l=.5*Math.sqrt(s*u*(o-u)/o)*(a-o/2<0?-1:1);Vb(e,t,Math.max(n,Math.floor(t-a*u/o+l)),Math.min(r,Math.floor(t+(o-a)*u/o+l)),i)}const o=e[t];let a=n,s=r;for(Gb(e,n,t),i(e[r],o)>0&&Gb(e,n,r);a<s;){for(Gb(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?Gb(e,n,s):(++s,Gb(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function Gb(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Yb(e,t,n){if(r=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n))).length){if((t=+t)<=0||r<2)return Hb(e);if(t>=1)return Wb(e);var r,i=(r-1)*t,o=Math.floor(i),a=Wb(Vb(e,o).subarray(0,o+1));return a+(Hb(e.subarray(o+1))-a)*(i-o)}}function Xb(e,t,n=Bb){if(r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}var Qb=function(e,t){return Yb(e,.5,t)};function Jb(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}var Kb=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o};function Zb(e,t){let n=0;if(void 0===t)for(let t of e)(t=+t)&&(n+=t);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}var ex=Math.sqrt(50),tx=Math.sqrt(10),nx=Math.sqrt(2),rx=function(e,t,n){var r,i,o,a,s=-1;if(n=+n,(e=+e)===(t=+t)&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),0===(a=ix(e,t,n))||!isFinite(a))return[];if(a>0){let n=Math.round(e/a),r=Math.round(t/a);for(n*a<e&&++n,r*a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)*a}else{a=-a;let n=Math.round(e*a),r=Math.round(t*a);for(n/a<e&&++n,r/a>t&&--r,o=new Array(i=r-n+1);++s<i;)o[s]=(n+s)/a}return r&&o.reverse(),o};function ix(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=ex?10:o>=tx?5:o>=nx?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=ex?10:o>=tx?5:o>=nx?2:1)}function ox(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=ex?i*=10:o>=tx?i*=5:o>=nx&&(i*=2),t<e?-i:i}function ax(e){return+e}var sx=[0,1];function ux(e){return e}function lx(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function cx(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=lx(i,r),o=n(a,o)):(r=lx(r,i),o=n(o,a)),function(e){return o(r(e))}}function fx(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=lx(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=jb(e,t,1,r)-1;return o[n](i[n](t))}}function dx(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hx(){var e,t,n,r,i,o,a=sx,s=sx,u=av,l=ux;function c(){var e,t,n,u=Math.min(a.length,s.length);return l!==ux&&(e=a[0],t=a[u-1],e>t&&(n=e,e=t,t=n),l=function(n){return Math.max(e,Math.min(t,n))}),r=u>2?fx:cx,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,u)))(e(l(t)))}return f.invert=function(n){return l(t((o||(o=r(s,a.map(e),ev)))(n)))},f.domain=function(e){return arguments.length?(a=Array.from(e,ax),c()):a.slice()},f.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},f.rangeRound=function(e){return s=Array.from(e),u=lv,c()},f.clamp=function(e){return arguments.length?(l=!!e||ux,c()):l!==ux},f.interpolate=function(e){return arguments.length?(u=e,c()):u},f.unknown=function(e){return arguments.length?(n=e,f):n},function(n,r){return e=n,t=r,c()}}function px(){return hx()(ux,ux)}function mx(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function gx(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}function yx(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}var vx=function(e){return(e=yx(Math.abs(e)))?e[1]:NaN},bx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xx(e){if(!(t=bx.exec(e)))throw new Error("invalid format: "+e);var t;return new wx({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function wx(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}xx.prototype=wx.prototype,wx.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var _x,kx,Ex,Sx,Ax=function(e,t){var n=yx(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")},Cx={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ax(100*e,t),r:Ax,s:function(e,t){var n=yx(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(_x=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+yx(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)},Dx=function(e){return e},Mx=Array.prototype.map,Fx=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],Nx=function(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Dx:(t=Mx.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],u=0;i>0&&s>0&&(u+s+1>r&&(s=Math.max(1,r-u)),o.push(e.substring(i-=s,i+s)),!((u+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?Dx:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(Mx.call(e.numerals,String)),u=void 0===e.percent?"%":e.percent+"",l=void 0===e.minus?"−":e.minus+"",c=void 0===e.nan?"NaN":e.nan+"";function f(e){var t=(e=xx(e)).fill,n=e.align,f=e.sign,d=e.symbol,h=e.zero,p=e.width,m=e.comma,g=e.precision,y=e.trim,v=e.type;"n"===v?(m=!0,v="g"):Cx[v]||(void 0===g&&(g=12),y=!0,v="g"),(h||"0"===t&&"="===n)&&(h=!0,t="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",x="$"===d?o:/[%p]/.test(v)?u:"",w=Cx[v],_=/[defgprs%]/.test(v);function k(e){var i,o,u,d=b,k=x;if("c"===v)k=w(e)+k,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?c:w(Math.abs(e),g),y&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0==+e&&"+"!==f&&(E=!1),d=(E?"("===f?f:l:"-"===f||"("===f?"":f)+d,k=("s"===v?Fx[8+_x/3]:"")+k+(E&&"("===f?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(u=e.charCodeAt(i))||u>57){k=(46===u?a+e.slice(i+1):e.slice(i))+k,e=e.slice(0,i);break}}m&&!h&&(e=r(e,1/0));var S=d.length+e.length+k.length,A=S<p?new Array(p-S+1).join(t):"";switch(m&&h&&(e=r(A+e,A.length?p-k.length:1/0),A=""),n){case"<":e=d+e+k+A;break;case"=":e=d+A+e+k;break;case"^":e=A.slice(0,S=A.length>>1)+d+e+k+A.slice(S);break;default:e=A+d+e+k}return s(e)}return g=void 0===g?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return e+""},k}return{format:f,formatPrefix:function(e,t){var n=f(((e=xx(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(vx(t)/3))),i=Math.pow(10,-r),o=Fx[8+r/3];return function(e){return n(i*e)+o}}}};kx=Nx({thousands:",",grouping:[3],currency:["$",""]}),Ex=kx.format,Sx=kx.formatPrefix;var Ox=function(e){return Math.max(0,-vx(Math.abs(e)))},Tx=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(vx(t)/3)))-vx(Math.abs(e)))},$x=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vx(t)-vx(e))+1};function zx(e,t,n,r){var i,o=ox(e,t,n);switch((r=xx(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=Tx(o,a))||(r.precision=i),Sx(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=$x(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=Ox(o))||(r.precision=i-2*("%"===r.type))}return Ex(r)}function Rx(e){var t=e.domain;return e.ticks=function(e){var n=t();return rx(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return zx(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,u=o[a],l=o[s],c=10;for(l<u&&(i=u,u=l,l=i,i=a,a=s,s=i);c-- >0;){if((i=ix(u,l,n))===r)return o[a]=u,o[s]=l,t(o);if(i>0)u=Math.floor(u/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;u=Math.ceil(u*i)/i,l=Math.floor(l*i)/i}r=i}return e},e}function Px(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Lx(e){return Math.log(e)}function Bx(e){return Math.exp(e)}function Ix(e){return-Math.log(-e)}function jx(e){return-Math.exp(-e)}function Ux(e){return isFinite(e)?+("1e"+e):e<0?0:e}function qx(e){return function(t){return-e(-t)}}function Wx(e){var t,n,r=e(Lx,Bx),i=r.domain,o=10;function a(){return t=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}(o),n=function(e){return 10===e?Ux:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}(o),i()[0]<0?(t=qx(t),n=qx(n),e(Ix,jx)):e(Lx,Bx),r}return r.base=function(e){return arguments.length?(o=+e,a()):o},r.domain=function(e){return arguments.length?(i(e),a()):i()},r.ticks=function(e){var r,a=i(),s=a[0],u=a[a.length-1];(r=u<s)&&(d=s,s=u,u=d);var l,c,f,d=t(s),h=t(u),p=null==e?10:+e,m=[];if(!(o%1)&&h-d<p){if(d=Math.floor(d),h=Math.ceil(h),s>0){for(;d<=h;++d)for(c=1,l=n(d);c<o;++c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}}else for(;d<=h;++d)for(c=o-1,l=n(d);c>=1;--c)if(!((f=l*c)<s)){if(f>u)break;m.push(f)}2*m.length<p&&(m=rx(s,u,p))}else m=rx(d,h,Math.min(h-d,p)).map(n);return r?m.reverse():m},r.tickFormat=function(e,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=Ex(i)),e===1/0)return i;null==e&&(e=10);var a=Math.max(1,o*e/r.ticks().length);return function(e){var r=e/n(Math.round(t(e)));return r*o<o-.5&&(r*=o),r<=a?i(e):""}},r.nice=function(){return i(Px(i(),{floor:function(e){return n(Math.floor(t(e)))},ceil:function(e){return n(Math.ceil(t(e)))}}))},r}function Hx(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Vx(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Gx(e){var t=1,n=e(Hx(t),Vx(t));return n.constant=function(n){return arguments.length?e(Hx(t=+n),Vx(t)):t},Rx(n)}const Yx=Symbol("implicit");function Xx(){var e=new Map,t=[],n=[],r=Yx;function i(i){var o=i+"",a=e.get(o);if(!a){if(r!==Yx)return r;e.set(o,a=t.push(i))}return n[(a-1)%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new Map;for(const r of n){const n=r+"";e.has(n)||e.set(n,t.push(r))}return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return Xx(t,n).unknown(r)},mx.apply(i,arguments),i}function Qx(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Jx(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Kx(e){return e<0?-e*e:e*e}function Zx(e){var t=e(ux,ux),n=1;function r(){return 1===n?e(ux,ux):.5===n?e(Jx,Kx):e(Qx(n),Qx(1/n))}return t.exponent=function(e){return arguments.length?(n=+e,r()):n},Rx(t)}function ew(){var e=Zx(hx());return e.copy=function(){return dx(e,ew()).exponent(e.exponent())},mx.apply(e,arguments),e}var tw=new Date,nw=new Date;function rw(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return e(t=new Date(+t)),t},i.ceil=function(n){return e(n=new Date(n-1)),t(n,1),e(n),n},i.round=function(e){var t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=function(e,n){return t(e=new Date(+e),null==n?1:Math.floor(n)),e},i.range=function(n,r,o){var a,s=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return s;do{s.push(a=new Date(+n)),t(n,o),e(n)}while(a<n&&n<r);return s},i.filter=function(n){return rw((function(t){if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),(function(e,r){if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}))},n&&(i.count=function(t,r){return tw.setTime(+t),nw.setTime(+r),e(tw),e(nw),Math.floor(n(tw,nw))},i.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?function(t){return r(t)%e==0}:function(t){return i.count(0,t)%e==0}):i:null}),i}var iw=rw((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e}));iw.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?rw((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,n){t.setTime(+t+n*e)}),(function(t,n){return(n-t)/e})):iw:null};iw.range;const ow=1e3,aw=6e4,sw=36e5,uw=864e5,lw=6048e5,cw=2592e6,fw=31536e6;var dw=rw((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*ow)}),(function(e,t){return(t-e)/ow}),(function(e){return e.getUTCSeconds()})),hw=(dw.range,rw((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ow)}),(function(e,t){e.setTime(+e+t*aw)}),(function(e,t){return(t-e)/aw}),(function(e){return e.getMinutes()}))),pw=(hw.range,rw((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ow-e.getMinutes()*aw)}),(function(e,t){e.setTime(+e+t*sw)}),(function(e,t){return(t-e)/sw}),(function(e){return e.getHours()}))),mw=(pw.range,rw((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aw)/uw),(e=>e.getDate()-1)));mw.range;function gw(e){return rw((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*aw)/lw}))}var yw=gw(0),vw=gw(1),bw=gw(2),xw=gw(3),ww=gw(4),_w=gw(5),kw=gw(6),Ew=(yw.range,vw.range,bw.range,xw.range,ww.range,_w.range,kw.range,rw((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),Sw=(Ew.range,rw((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()})));Sw.every=function(e){return isFinite(e=Math.floor(e))&&e>0?rw((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,n){t.setFullYear(t.getFullYear()+n*e)})):null};Sw.range;var Aw=rw((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*aw)}),(function(e,t){return(t-e)/aw}),(function(e){return e.getUTCMinutes()})),Cw=(Aw.range,rw((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*sw)}),(function(e,t){return(t-e)/sw}),(function(e){return e.getUTCHours()}))),Dw=(Cw.range,rw((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/uw}),(function(e){return e.getUTCDate()-1})));Dw.range;function Mw(e){return rw((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/lw}))}var Fw=Mw(0),Nw=Mw(1),Ow=Mw(2),Tw=Mw(3),$w=Mw(4),zw=Mw(5),Rw=Mw(6),Pw=(Fw.range,Nw.range,Ow.range,Tw.range,$w.range,zw.range,Rw.range,rw((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()}))),Lw=(Pw.range,rw((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));Lw.every=function(e){return isFinite(e=Math.floor(e))&&e>0?rw((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null};Lw.range;function Bw(e,t,n,r,i,o){const a=[[dw,1,ow],[dw,5,5e3],[dw,15,15e3],[dw,30,3e4],[o,1,aw],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,sw],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,uw],[r,2,1728e5],[n,1,lw],[t,1,cw],[t,3,7776e6],[e,1,fw]];function s(t,n,r){const i=Math.abs(n-t)/r,o=Lb((([,,e])=>e)).right(a,i);if(o===a.length)return e.every(ox(t/fw,n/fw,r));if(0===o)return iw.every(Math.max(ox(t,n,r),1));const[s,u]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(u)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"==typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[Iw,jw]=Bw(Lw,Pw,Fw,Dw,Cw,Aw),[Uw,qw]=Bw(Sw,Ew,yw,mw,pw,hw);function Ww(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Hw(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Vw(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Gw(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,u=e.shortMonths,l=o_(i),c=a_(i),f=o_(o),d=a_(o),h=o_(a),p=a_(a),m=o_(s),g=a_(s),y=o_(u),v=a_(u),b={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return u[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:C_,e:C_,f:O_,g:q_,G:H_,H:D_,I:M_,j:F_,L:N_,m:T_,M:$_,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:pk,s:mk,S:z_,u:R_,U:P_,V:B_,w:I_,W:j_,x:null,X:null,y:U_,Y:W_,Z:V_,"%":hk},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return u[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:G_,e:G_,f:K_,g:lk,G:fk,H:Y_,I:X_,j:Q_,L:J_,m:Z_,M:ek,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:pk,s:mk,S:tk,u:nk,U:rk,V:ok,w:ak,W:sk,x:null,X:null,y:uk,Y:ck,Z:dk,"%":hk},w={a:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=y.exec(t.slice(n));return r?(e.m=v.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:y_,e:y_,f:k_,g:h_,G:d_,H:b_,I:b_,j:v_,L:__,m:g_,M:x_,p:function(e,t,n){var r=l.exec(t.slice(n));return r?(e.p=c.get(r[0].toLowerCase()),n+r[0].length):-1},q:m_,Q:S_,s:A_,S:w_,u:u_,U:l_,V:c_,w:s_,W:f_,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:h_,Y:d_,Z:p_,"%":E_};function _(e,t){return function(n){var r,i,o,a=[],s=-1,u=0,l=e.length;for(n instanceof Date||(n=new Date(+n));++s<l;)37===e.charCodeAt(s)&&(a.push(e.slice(u,s)),null!=(i=Zw[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),u=s+1);return a.push(e.slice(u,s)),a.join("")}}function k(e,t){return function(n){var r,i,o=Vw(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Hw(Vw(o.y,0,1))).getUTCDay(),r=i>4||0===i?Nw.ceil(r):Nw(r),r=Dw.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Ww(Vw(o.y,0,1))).getDay(),r=i>4||0===i?vw.ceil(r):vw(r),r=mw.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Hw(Vw(o.y,0,1)).getUTCDay():Ww(Vw(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Hw(o)):Ww(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,u=n.length;a<s;){if(r>=u)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=w[i in Zw?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=_(n,b),b.X=_(r,b),b.c=_(t,b),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=k(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=k(e+="",!0);return t.toString=function(){return e},t}}}var Yw,Xw,Qw,Jw,Kw,Zw={"-":"",_:" ",0:"0"},e_=/^\s*\d+/,t_=/^%/,n_=/[\\^$*+?|[\]().{}]/g;function r_(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function i_(e){return e.replace(n_,"\\$&")}function o_(e){return new RegExp("^(?:"+e.map(i_).join("|")+")","i")}function a_(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function s_(e,t,n){var r=e_.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function u_(e,t,n){var r=e_.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function l_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function c_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function f_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function d_(e,t,n){var r=e_.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function h_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function p_(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function m_(e,t,n){var r=e_.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function g_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function y_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function v_(e,t,n){var r=e_.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function b_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function x_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function w_(e,t,n){var r=e_.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function __(e,t,n){var r=e_.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function k_(e,t,n){var r=e_.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function E_(e,t,n){var r=t_.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function S_(e,t,n){var r=e_.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function A_(e,t,n){var r=e_.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function C_(e,t){return r_(e.getDate(),t,2)}function D_(e,t){return r_(e.getHours(),t,2)}function M_(e,t){return r_(e.getHours()%12||12,t,2)}function F_(e,t){return r_(1+mw.count(Sw(e),e),t,3)}function N_(e,t){return r_(e.getMilliseconds(),t,3)}function O_(e,t){return N_(e,t)+"000"}function T_(e,t){return r_(e.getMonth()+1,t,2)}function $_(e,t){return r_(e.getMinutes(),t,2)}function z_(e,t){return r_(e.getSeconds(),t,2)}function R_(e){var t=e.getDay();return 0===t?7:t}function P_(e,t){return r_(yw.count(Sw(e)-1,e),t,2)}function L_(e){var t=e.getDay();return t>=4||0===t?ww(e):ww.ceil(e)}function B_(e,t){return e=L_(e),r_(ww.count(Sw(e),e)+(4===Sw(e).getDay()),t,2)}function I_(e){return e.getDay()}function j_(e,t){return r_(vw.count(Sw(e)-1,e),t,2)}function U_(e,t){return r_(e.getFullYear()%100,t,2)}function q_(e,t){return r_((e=L_(e)).getFullYear()%100,t,2)}function W_(e,t){return r_(e.getFullYear()%1e4,t,4)}function H_(e,t){var n=e.getDay();return r_((e=n>=4||0===n?ww(e):ww.ceil(e)).getFullYear()%1e4,t,4)}function V_(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+r_(t/60|0,"0",2)+r_(t%60,"0",2)}function G_(e,t){return r_(e.getUTCDate(),t,2)}function Y_(e,t){return r_(e.getUTCHours(),t,2)}function X_(e,t){return r_(e.getUTCHours()%12||12,t,2)}function Q_(e,t){return r_(1+Dw.count(Lw(e),e),t,3)}function J_(e,t){return r_(e.getUTCMilliseconds(),t,3)}function K_(e,t){return J_(e,t)+"000"}function Z_(e,t){return r_(e.getUTCMonth()+1,t,2)}function ek(e,t){return r_(e.getUTCMinutes(),t,2)}function tk(e,t){return r_(e.getUTCSeconds(),t,2)}function nk(e){var t=e.getUTCDay();return 0===t?7:t}function rk(e,t){return r_(Fw.count(Lw(e)-1,e),t,2)}function ik(e){var t=e.getUTCDay();return t>=4||0===t?$w(e):$w.ceil(e)}function ok(e,t){return e=ik(e),r_($w.count(Lw(e),e)+(4===Lw(e).getUTCDay()),t,2)}function ak(e){return e.getUTCDay()}function sk(e,t){return r_(Nw.count(Lw(e)-1,e),t,2)}function uk(e,t){return r_(e.getUTCFullYear()%100,t,2)}function lk(e,t){return r_((e=ik(e)).getUTCFullYear()%100,t,2)}function ck(e,t){return r_(e.getUTCFullYear()%1e4,t,4)}function fk(e,t){var n=e.getUTCDay();return r_((e=n>=4||0===n?$w(e):$w.ceil(e)).getUTCFullYear()%1e4,t,4)}function dk(){return"+0000"}function hk(){return"%"}function pk(e){return+e}function mk(e){return Math.floor(+e/1e3)}function gk(e){return new Date(e)}function yk(e){return e instanceof Date?+e:+new Date(+e)}function vk(e,t,n,r,i,o,a,s,u,l){var c=px(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),x=l("%Y");function w(e){return(u(e)<e?h:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?y:v:n(e)<e?b:x)(e)}return c.invert=function(e){return new Date(f(e))},c.domain=function(e){return arguments.length?d(Array.from(e,yk)):d().map(gk)},c.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?w:l(t)},c.nice=function(e){var n=d();return e&&"function"==typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(Px(n,e)):c},c.copy=function(){return dx(c,vk(e,t,n,r,i,o,a,s,u,l))},c}function bk(){var e,t,n,r,i,o=0,a=1,s=ux,u=!1;function l(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,u?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),l):[s(0),s(1)]}}return l.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),l):[o,a]},l.clamp=function(e){return arguments.length?(u=!!e,l):u},l.interpolator=function(e){return arguments.length?(s=e,l):s},l.range=c(av),l.rangeRound=c(lv),l.unknown=function(e){return arguments.length?(i=e,l):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),l}}function xk(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function wk(){var e=Rx(bk()(ux));return e.copy=function(){return xk(e,wk())},gx.apply(e,arguments)}function _k(){var e=Zx(bk());return e.copy=function(){return xk(e,_k()).exponent(e.exponent())},gx.apply(e,arguments)}function kk(){var e,t,n,r,i,o,a,s=0,u=.5,l=1,c=1,f=ux,d=!1;function h(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(c*e<c*t?r:i),f(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,f=Dv(e,[n,r,i]),h):[f(0),f(.5),f(1)]}}return h.domain=function(a){return arguments.length?([s,u,l]=a,e=o(s=+s),t=o(u=+u),n=o(l=+l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h):[s,u,l]},h.clamp=function(e){return arguments.length?(d=!!e,h):d},h.interpolator=function(e){return arguments.length?(f=e,h):f},h.range=p(av),h.rangeRound=p(lv),h.unknown=function(e){return arguments.length?(a=e,h):a},function(a){return o=a,e=a(s),t=a(u),n=a(l),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),c=t<e?-1:1,h}}function Ek(){var e=Zx(kk());return e.copy=function(){return xk(e,Ek()).exponent(e.exponent())},gx.apply(e,arguments)}!function(e){Yw=Gw(e),Xw=Yw.format,Qw=Yw.parse,Jw=Yw.utcFormat,Kw=Yw.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Sk(e,t,n){this.k=e,this.x=t,this.y=n}Sk.prototype={constructor:Sk,scale:function(e){return 1===e?this:new Sk(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Sk(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Sk(1,0,0);Sk.prototype;class Ak extends we().Component{componentDidMount(){this.drawBarChart([6043,5153,5507,5431,5743,4951])}drawBarChart(e){const t=600,n=Xx(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Dg(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",40).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>45*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>45*t+10)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["edm","latin","pop","r&b","rap","rock"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",510).attr("cy",(function(e,t){return 100+25*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",530).attr("y",(function(e,t){return 100+25*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",300).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Genre")}render(){return be.createElement("div",{ref:"canvas"})}}we();class Ck extends we().Component{componentDidMount(){this.drawBarChart([1065,1206,1296,1298,1511,1408,1456,1485,1322,1256,1672,1655,1262,1637,1133,1105,1517,1129,1809,948,1674,1291,1288,1405])}drawBarChart(e){const t=1100,n=Xx(["#383867","#584c77","#33431e","#a36629","#92462f","#b63e36"]),r=Dg(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["album rock","big room","classic rock","dance pop","electro house","electropop","gangster rap","hard rock","hip hop","hip pop","indie poptimism","latin hip hop","latin pop","neo soul","new jack swing","permanent wave","pop edm","post-teen pop","progressive electro house","reggaeton","southern hip hop","trap","tropical","urban contemporary"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",880).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",900).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",550).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return be.createElement("div",{ref:"canvas"})}}we();class Dk extends we().Component{componentDidMount(){this.drawBarChart([1206,1511,1517,1809,1655,1262,948,1288,1298,1408,1672,1129,1256,1637,1133,1405,1456,1322,1674,1291,1065,1296,1485,1105])}drawBarChart(e){const t=1100,n=Xx(["#383867","#383867","#383867","#383867","#584c77","#584c77","#584c77","#584c77","#33431e","#33431e","#33431e","#33431e","#a36629","#a36629","#a36629","#a36629","#92462f","#92462f","#92462f","#92462f","#b63e36","#b63e36","#b63e36","#b63e36"]),r=Dg(this.refs.canvas).append("svg").attr("width",t).attr("height",400).style("border","1px solid black");r.selectAll("rect").data(e).enter().append("rect").attr("width",30).attr("height",(e=>20*e)).attr("fill",(function(e,t){return n(t)})).attr("x",((e,t)=>35*t)).attr("y",(e=>400-e/20)),r.selectAll("text").data(e).enter().append("text").attr("x",((e,t)=>35*t)).attr("y",((e,t)=>400-e/20-10)).text((e=>e));var i=["big room","electro house","pop edm","progressive electro house","latin hip hop","latin pop","reggaeton","tropical","dance pop","electropop","indie poptimism","post-teen pop","hip pop","neo soul","new jack swing","urban contemporary","gangster rap","hip hop","southern hip hop","trap","album rock","classic rock","hard rock","permanent wave"];r.selectAll("mydots").data(i).enter().append("circle").attr("cx",880).attr("cy",(function(e,t){return 30+15*t})).attr("r",7).style("fill",(function(e){return n(e)})),r.selectAll("mylabels").data(i).enter().append("text").attr("x",900).attr("y",(function(e,t){return 30+15*t})).style("fill",(function(e){return n(e)})).text((function(e){return e})).attr("text-anchor","left").style("alignment-baseline","middle"),r.append("text").attr("x",550).attr("y",50).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline").text("Number of Songs per Subgenre")}render(){return be.createElement("div",{ref:"canvas"})}}we();var Mk,Fk={},Nk=(Mk=function(e,t){return(Mk=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Mk(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Ok=Object.prototype.hasOwnProperty;
/*!
  * https://github.com/Starcounter-Jack/JSON-Patch
  * (c) 2017 Joachim Wester
  * MIT license
  */function Tk(e,t){return Ok.call(e,t)}function $k(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);t=[];for(var r in e)Tk(e,r)&&t.push(r);return t}function zk(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Rk(e){for(var t,n=0,r=e.length;n<r;){if(!((t=e.charCodeAt(n))>=48&&t<=57))return!1;n++}return!0}function Pk(e){return-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Lk(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Bk(e){if(void 0===e)return!0;if(e)if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Bk(e[t]))return!0}else if("object"==typeof e){var r=$k(e),i=r.length;for(t=0;t<i;t++)if(Bk(e[r[t]]))return!0}return!1}function Ik(e,t){var n=[e];for(var r in t){var i="object"==typeof t[r]?JSON.stringify(t[r],null,2):t[r];void 0!==i&&n.push(r+": "+i)}return n.join("\n")}n(Fk,"hasOwnProperty",(function(){return Tk})),n(Fk,"_objectKeys",(function(){return $k})),n(Fk,"_deepClone",(function(){return zk})),n(Fk,"isInteger",(function(){return Rk})),n(Fk,"escapePathComponent",(function(){return Pk})),n(Fk,"unescapePathComponent",(function(){return Lk})),n(Fk,"hasUndefined",(function(){return Bk}));var jk=function(e){function t(t,n,r,i,o){var a=this.constructor,s=e.call(this,Ik(t,{name:n,index:r,operation:i,tree:o}))||this;return s.name=n,s.index=r,s.operation=i,s.tree=o,Object.setPrototypeOf(s,a.prototype),s.message=Ik(t,{name:n,index:r,operation:i,tree:o}),s}return Nk(t,e),t}(Error);n(Fk,"PatchError",(function(){return jk}));var Uk=Fk.PatchError,qk={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=Hk(n,this.path);r&&(r=Fk._deepClone(r));var i=Vk(n,{op:"remove",path:this.from}).removed;return Vk(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=Hk(n,this.from);return Vk(n,{op:"add",path:this.path,value:Fk._deepClone(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Xk(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},Wk={add:function(e,t,n){return Fk.isInteger(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){return{newDocument:n,removed:e.splice(t,1)[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:qk.move,copy:qk.copy,test:qk.test,_get:qk._get};function Hk(e,t){if(""==t)return e;var n={op:"_get",path:t};return Vk(e,n),n.value}function Vk(e,t,n,r,i,o){if(void 0===n&&(n=!1),void 0===r&&(r=!0),void 0===i&&(i=!0),void 0===o&&(o=0),n&&("function"==typeof n?n(t,0,e,t.path):Yk(t,0)),""===t.path){var a={newDocument:e};if("add"===t.op)return a.newDocument=t.value,a;if("replace"===t.op)return a.newDocument=t.value,a.removed=e,a;if("move"===t.op||"copy"===t.op)return a.newDocument=Hk(e,t.from),"move"===t.op&&(a.removed=e),a;if("test"===t.op){if(a.test=Xk(e,t.value),!1===a.test)throw new Uk("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}if("remove"===t.op)return a.removed=e,a.newDocument=null,a;if("_get"===t.op)return t.value=e,a;if(n)throw new Uk("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}r||(e=Fk._deepClone(e));var s=(t.path||"").split("/"),u=e,l=1,c=s.length,f=void 0,d=void 0,h=void 0;for(h="function"==typeof n?n:Yk;;){if(d=s[l],i&&"__proto__"==d)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&void 0===f&&(void 0===u[d]?f=s.slice(0,l).join("/"):l==c-1&&(f=t.path),void 0!==f&&h(t,0,e,f)),l++,Array.isArray(u)){if("-"===d)d=u.length;else{if(n&&!Fk.isInteger(d))throw new Uk("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);Fk.isInteger(d)&&(d=~~d)}if(l>=c){if(n&&"add"===t.op&&d>u.length)throw new Uk("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);if(!1===(a=Wk[t.op].call(t,u,d,e)).test)throw new Uk("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(d&&-1!=d.indexOf("~")&&(d=Fk.unescapePathComponent(d)),l>=c){if(!1===(a=qk[t.op].call(t,u,d,e)).test)throw new Uk("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}u=u[d]}}function Gk(e,t,n,r,i){if(void 0===r&&(r=!0),void 0===i&&(i=!0),n&&!Array.isArray(t))throw new Uk("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Fk._deepClone(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Vk(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function Yk(e,t,n,r){if("object"!=typeof e||null===e||Array.isArray(e))throw new Uk("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(!qk[e.op])throw new Uk("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n);if("string"!=typeof e.path)throw new Uk("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(0!==e.path.indexOf("/")&&e.path.length>0)throw new Uk('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if(("move"===e.op||"copy"===e.op)&&"string"!=typeof e.from)throw new Uk("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&void 0===e.value)throw new Uk("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if(("add"===e.op||"replace"===e.op||"test"===e.op)&&Fk.hasUndefined(e.value))throw new Uk("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n)if("add"==e.op){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Uk("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if("replace"===e.op||"remove"===e.op||"_get"===e.op){if(e.path!==r)throw new Uk("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if("move"===e.op||"copy"===e.op){var a=function(e,t,n){try{if(!Array.isArray(e))throw new Uk("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Gk(Fk._deepClone(t),Fk._deepClone(e),n||!0);else{n=n||Yk;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(e){if(e instanceof Uk)return e;throw e}}([{op:"_get",path:e.from,value:void 0}],n);if(a&&"OPERATION_PATH_UNRESOLVABLE"===a.name)throw new Uk("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}function Xk(e,t){if(e===t)return!0;if(e&&t&&"object"==typeof e&&"object"==typeof t){var n,r,i,o=Array.isArray(e),a=Array.isArray(t);if(o&&a){if((r=e.length)!=t.length)return!1;for(n=r;0!=n--;)if(!Xk(e[n],t[n]))return!1;return!0}if(o!=a)return!1;var s=Object.keys(e);if((r=s.length)!==Object.keys(t).length)return!1;for(n=r;0!=n--;)if(!t.hasOwnProperty(s[n]))return!1;for(n=r;0!=n--;)if(!Xk(e[i=s[n]],t[i]))return!1;return!0}return e!=e&&t!=t}new WeakMap;Object.assign({},I6,I6,{JsonPatchError:Fk.PatchError,deepClone:Fk._deepClone,escapePathComponent:Fk.escapePathComponent,unescapePathComponent:Fk.unescapePathComponent});var Qk,Jk,Kk,Zk,eE=/("(?:[^\\"]|\\.)*")|[:,]/g,tE=t((function(e,t){var n,r,i;return t=t||{},n=JSON.stringify([1],void 0,void 0===t.indent?2:t.indent).slice(2,-3),r=""===n?1/0:void 0===t.maxLength?80:t.maxLength,i=t.replacer,function e(t,o,a){var s,u,l,c,f,d,h,p,m,g,y,v;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0===(y=JSON.stringify(t,i)))return y;if(h=r-o.length-a,y.length<=h&&(m=y.replace(eE,(function(e,t){return t||e+" "}))).length<=h)return m;if(null!=i&&(t=JSON.parse(y),i=void 0),"object"==typeof t&&null!==t){if(p=o+n,l=[],u=0,Array.isArray(t))for(g="[",s="]",h=t.length;u<h;u++)l.push(e(t[u],p,u===h-1?0:1)||"null");else for(g="{",s="}",h=(d=Object.keys(t)).length;u<h;u++)c=d[u],f=JSON.stringify(c)+": ",void 0!==(v=e(t[c],p,f.length+(u===h-1?0:1)))&&l.push(f+v);if(l.length>0)return[g,n+l.join(",\n"+p),s].join("\n"+o)}return y}(e,"",0)})),nE={},rE={};const iE=Number.MAX_SAFE_INTEGER||9007199254740991;Zk={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:iE,MAX_SAFE_COMPONENT_LENGTH:16};var oE,aE,sE,uE={};function lE(){throw new Error("setTimeout has not been defined")}function cE(){throw new Error("clearTimeout has not been defined")}function fE(e){if(aE===setTimeout)return setTimeout(e,0);if((aE===lE||!aE)&&setTimeout)return aE=setTimeout,setTimeout(e,0);try{return aE(e,0)}catch(t){try{return aE.call(null,e,0)}catch(t){return aE.call(this,e,0)}}}!function(){try{aE="function"==typeof setTimeout?setTimeout:lE}catch(e){aE=lE}try{sE="function"==typeof clearTimeout?clearTimeout:cE}catch(e){sE=cE}}();var dE,hE=[],pE=!1,mE=-1;function gE(){pE&&dE&&(pE=!1,dE.length?hE=dE.concat(hE):mE=-1,hE.length&&yE())}function yE(){if(!pE){var e=fE(gE);pE=!0;for(var t=hE.length;t;){for(dE=hE,hE=[];++mE<t;)dE&&dE[mE].run();mE=-1,t=hE.length}dE=null,pE=!1,function(e){if(sE===clearTimeout)return clearTimeout(e);if((sE===cE||!sE)&&clearTimeout)return sE=clearTimeout,clearTimeout(e);try{sE(e)}catch(t){try{return sE.call(null,e)}catch(t){return sE.call(this,e)}}}(e)}}function vE(e,t){this.fun=e,this.array=t}function bE(){}uE.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];hE.push(new vE(e,t)),1!==hE.length||pE||fE(yE)},vE.prototype.run=function(){this.fun.apply(null,this.array)},uE.title="browser",uE.browser=!0,uE.env={},uE.argv=[],uE.version="",uE.versions={},uE.on=bE,uE.addListener=bE,uE.once=bE,uE.off=bE,uE.removeListener=bE,uE.removeAllListeners=bE,uE.emit=bE,uE.prependListener=bE,uE.prependOnceListener=bE,uE.listeners=function(e){return[]},uE.binding=function(e){throw new Error("process.binding is not supported")},uE.cwd=function(){return"/"},uE.chdir=function(e){throw new Error("process.chdir is not supported")},uE.umask=function(){return 0};const xE=oE=()=>{};rE={};const wE=(Qk=[],rE.re=Qk),_E=(Jk=[],rE.src=Jk),kE=(Kk={},rE.t=Kk);let EE=0;const SE=(e,t,n)=>{const r=EE++;xE(r,t),kE[e]=r,_E[r]=t,wE[r]=new RegExp(t,n?"g":void 0)};SE("NUMERICIDENTIFIER","0|[1-9]\\d*"),SE("NUMERICIDENTIFIERLOOSE","[0-9]+"),SE("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),SE("MAINVERSION",`(${_E[kE.NUMERICIDENTIFIER]})\\.(${_E[kE.NUMERICIDENTIFIER]})\\.(${_E[kE.NUMERICIDENTIFIER]})`),SE("MAINVERSIONLOOSE",`(${_E[kE.NUMERICIDENTIFIERLOOSE]})\\.(${_E[kE.NUMERICIDENTIFIERLOOSE]})\\.(${_E[kE.NUMERICIDENTIFIERLOOSE]})`),SE("PRERELEASEIDENTIFIER",`(?:${_E[kE.NUMERICIDENTIFIER]}|${_E[kE.NONNUMERICIDENTIFIER]})`),SE("PRERELEASEIDENTIFIERLOOSE",`(?:${_E[kE.NUMERICIDENTIFIERLOOSE]}|${_E[kE.NONNUMERICIDENTIFIER]})`),SE("PRERELEASE",`(?:-(${_E[kE.PRERELEASEIDENTIFIER]}(?:\\.${_E[kE.PRERELEASEIDENTIFIER]})*))`),SE("PRERELEASELOOSE",`(?:-?(${_E[kE.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${_E[kE.PRERELEASEIDENTIFIERLOOSE]})*))`),SE("BUILDIDENTIFIER","[0-9A-Za-z-]+"),SE("BUILD",`(?:\\+(${_E[kE.BUILDIDENTIFIER]}(?:\\.${_E[kE.BUILDIDENTIFIER]})*))`),SE("FULLPLAIN",`v?${_E[kE.MAINVERSION]}${_E[kE.PRERELEASE]}?${_E[kE.BUILD]}?`),SE("FULL",`^${_E[kE.FULLPLAIN]}$`),SE("LOOSEPLAIN",`[v=\\s]*${_E[kE.MAINVERSIONLOOSE]}${_E[kE.PRERELEASELOOSE]}?${_E[kE.BUILD]}?`),SE("LOOSE",`^${_E[kE.LOOSEPLAIN]}$`),SE("GTLT","((?:<|>)?=?)"),SE("XRANGEIDENTIFIERLOOSE",`${_E[kE.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),SE("XRANGEIDENTIFIER",`${_E[kE.NUMERICIDENTIFIER]}|x|X|\\*`),SE("XRANGEPLAIN",`[v=\\s]*(${_E[kE.XRANGEIDENTIFIER]})(?:\\.(${_E[kE.XRANGEIDENTIFIER]})(?:\\.(${_E[kE.XRANGEIDENTIFIER]})(?:${_E[kE.PRERELEASE]})?${_E[kE.BUILD]}?)?)?`),SE("XRANGEPLAINLOOSE",`[v=\\s]*(${_E[kE.XRANGEIDENTIFIERLOOSE]})(?:\\.(${_E[kE.XRANGEIDENTIFIERLOOSE]})(?:\\.(${_E[kE.XRANGEIDENTIFIERLOOSE]})(?:${_E[kE.PRERELEASELOOSE]})?${_E[kE.BUILD]}?)?)?`),SE("XRANGE",`^${_E[kE.GTLT]}\\s*${_E[kE.XRANGEPLAIN]}$`),SE("XRANGELOOSE",`^${_E[kE.GTLT]}\\s*${_E[kE.XRANGEPLAINLOOSE]}$`),SE("COERCE",`(^|[^\\d])(\\d{1,${Zk.MAX_SAFE_COMPONENT_LENGTH}})(?:\\.(\\d{1,${Zk.MAX_SAFE_COMPONENT_LENGTH}}))?(?:\\.(\\d{1,${Zk.MAX_SAFE_COMPONENT_LENGTH}}))?(?:$|[^\\d])`),SE("COERCERTL",_E[kE.COERCE],!0),SE("LONETILDE","(?:~>?)"),SE("TILDETRIM",`(\\s*)${_E[kE.LONETILDE]}\\s+`,!0);rE.tildeTrimReplace="$1~",SE("TILDE",`^${_E[kE.LONETILDE]}${_E[kE.XRANGEPLAIN]}$`),SE("TILDELOOSE",`^${_E[kE.LONETILDE]}${_E[kE.XRANGEPLAINLOOSE]}$`),SE("LONECARET","(?:\\^)"),SE("CARETTRIM",`(\\s*)${_E[kE.LONECARET]}\\s+`,!0);rE.caretTrimReplace="$1^",SE("CARET",`^${_E[kE.LONECARET]}${_E[kE.XRANGEPLAIN]}$`),SE("CARETLOOSE",`^${_E[kE.LONECARET]}${_E[kE.XRANGEPLAINLOOSE]}$`),SE("COMPARATORLOOSE",`^${_E[kE.GTLT]}\\s*(${_E[kE.LOOSEPLAIN]})$|^$`),SE("COMPARATOR",`^${_E[kE.GTLT]}\\s*(${_E[kE.FULLPLAIN]})$|^$`),SE("COMPARATORTRIM",`(\\s*)${_E[kE.GTLT]}\\s*(${_E[kE.LOOSEPLAIN]}|${_E[kE.XRANGEPLAIN]})`,!0);rE.comparatorTrimReplace="$1$2$3",SE("HYPHENRANGE",`^\\s*(${_E[kE.XRANGEPLAIN]})\\s+-\\s+(${_E[kE.XRANGEPLAIN]})\\s*$`),SE("HYPHENRANGELOOSE",`^\\s*(${_E[kE.XRANGEPLAINLOOSE]})\\s+-\\s+(${_E[kE.XRANGEPLAINLOOSE]})\\s*$`),SE("STAR","(<|>)?=?\\s*\\*"),SE("GTE0","^\\s*>=\\s*0.0.0\\s*$"),SE("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$");var AE;const CE=oE;var DE;const ME=["includePrerelease","loose","rtl"],FE=DE=e=>e?"object"!=typeof e?{loose:!0}:ME.filter((t=>e[t])).reduce(((e,t)=>(e[t]=!0,e)),{}):{};var NE;const OE=/^[0-9]+$/,TE=(e,t)=>{const n=OE.test(e),r=OE.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1};NE={compareIdentifiers:TE,rcompareIdentifiers:(e,t)=>TE(t,e)};class $E{constructor(e,t){if(t=FE(t),e instanceof $E){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw new TypeError(`Invalid Version: ${e}`);if(e.length>Zk.MAX_LENGTH)throw new TypeError(`version is longer than ${Zk.MAX_LENGTH} characters`);CE("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?rE.re[rE.t.LOOSE]:rE.re[rE.t.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>Zk.MAX_SAFE_INTEGER||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Zk.MAX_SAFE_INTEGER||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Zk.MAX_SAFE_INTEGER||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map((e=>{if(/^[0-9]+$/.test(e)){const t=+e;if(t>=0&&t<Zk.MAX_SAFE_INTEGER)return t}return e})):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(CE("SemVer.compare",this.version,this.options,e),!(e instanceof $E)){if("string"==typeof e&&e===this.version)return 0;e=new $E(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof $E||(e=new $E(e,this.options)),NE.compareIdentifiers(this.major,e.major)||NE.compareIdentifiers(this.minor,e.minor)||NE.compareIdentifiers(this.patch,e.patch)}comparePre(e){if(e instanceof $E||(e=new $E(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],r=e.prerelease[t];if(CE("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return NE.compareIdentifiers(n,r)}while(++t)}compareBuild(e){e instanceof $E||(e=new $E(e,this.options));let t=0;do{const n=this.build[t],r=e.build[t];if(CE("prerelease compare",t,n,r),void 0===n&&void 0===r)return 0;if(void 0===r)return 1;if(void 0===n)return-1;if(n!==r)return NE.compareIdentifiers(n,r)}while(++t)}inc(e,t){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{let e=this.prerelease.length;for(;--e>=0;)"number"==typeof this.prerelease[e]&&(this.prerelease[e]++,e=-2);-1===e&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw new Error(`invalid increment argument: ${e}`)}return this.format(),this.raw=this.version,this}}var zE;const RE=AE=$E,PE=DE;var LE;const BE=zE=(e,t)=>{if(t=PE(t),e instanceof RE)return e;if("string"!=typeof e)return null;if(e.length>Zk.MAX_LENGTH)return null;if(!(t.loose?rE.re[rE.t.LOOSE]:rE.re[rE.t.FULL]).test(e))return null;try{return new RE(e,t)}catch(e){return null}};LE=(e,t)=>{const n=BE(e,t);return n?n.version:null};var IE;const jE=zE;IE=(e,t)=>{const n=jE(e.trim().replace(/^[=v]+/,""),t);return n?n.version:null};var UE;const qE=AE;UE=(e,t,n,r)=>{"string"==typeof n&&(r=n,n=void 0);try{return new qE(e,n).inc(t,r).version}catch(e){return null}};var WE;const HE=zE;var VE,GE;const YE=AE,XE=GE=(e,t,n)=>new YE(e,n).compare(new YE(t,n)),QE=VE=(e,t,n)=>0===XE(e,t,n);WE=(e,t)=>{if(QE(e,t))return null;{const n=HE(e),r=HE(t),i=n.prerelease.length||r.prerelease.length,o=i?"pre":"",a=i?"prerelease":"";for(const e in n)if(("major"===e||"minor"===e||"patch"===e)&&n[e]!==r[e])return o+e;return a}};var JE;const KE=AE;JE=(e,t)=>new KE(e,t).major;var ZE;const eS=AE;ZE=(e,t)=>new eS(e,t).minor;var tS;const nS=AE;tS=(e,t)=>new nS(e,t).patch;var rS;const iS=zE;rS=(e,t)=>{const n=iS(e,t);return n&&n.prerelease.length?n.prerelease:null};var oS;const aS=GE;oS=(e,t,n)=>aS(t,e,n);var sS;const uS=GE;sS=(e,t)=>uS(e,t,!0);var lS;const cS=AE;var fS;const dS=lS=(e,t,n)=>{const r=new cS(e,n),i=new cS(t,n);return r.compare(i)||r.compareBuild(i)};fS=(e,t)=>e.sort(((e,n)=>dS(e,n,t)));var hS;const pS=lS;hS=(e,t)=>e.sort(((e,n)=>pS(n,e,t)));var mS;const gS=GE;var yS;const vS=GE;var bS;const xS=GE;var wS;const _S=GE;var kS;const ES=GE;var SS;const AS=VE,CS=bS=(e,t,n)=>0!==xS(e,t,n),DS=mS=(e,t,n)=>gS(e,t,n)>0,MS=wS=(e,t,n)=>_S(e,t,n)>=0,FS=yS=(e,t,n)=>vS(e,t,n)<0,NS=kS=(e,t,n)=>ES(e,t,n)<=0;SS=(e,t,n,r)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e===n;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof n&&(n=n.version),e!==n;case"":case"=":case"==":return AS(e,n,r);case"!=":return CS(e,n,r);case">":return DS(e,n,r);case">=":return MS(e,n,r);case"<":return FS(e,n,r);case"<=":return NS(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var OS;const TS=AE,$S=zE;OS=(e,t)=>{if(e instanceof TS)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let n=null;if((t=t||{}).rtl){let t;for(;(t=rE.re[rE.t.COERCERTL].exec(e))&&(!n||n.index+n[0].length!==e.length);)n&&t.index+t[0].length===n.index+n[0].length||(n=t),rE.re[rE.t.COERCERTL].lastIndex=t.index+t[1].length+t[2].length;rE.re[rE.t.COERCERTL].lastIndex=-1}else n=e.match(rE.re[rE.t.COERCE]);return null===n?null:$S(`${n[2]}.${n[3]||"0"}.${n[4]||"0"}`,t)};var zS;const RS=Symbol("SemVer ANY");class PS{static get ANY(){return RS}constructor(e,t){if(t=LS(t),e instanceof PS){if(e.loose===!!t.loose)return e;e=e.value}IS("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===RS?this.value="":this.value=this.operator+this.semver.version,IS("comp",this)}parse(e){const t=this.options.loose?rE.re[rE.t.COMPARATORLOOSE]:rE.re[rE.t.COMPARATOR],n=e.match(t);if(!n)throw new TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==n[1]?n[1]:"","="===this.operator&&(this.operator=""),n[2]?this.semver=new jS(n[2],this.options.loose):this.semver=RS}toString(){return this.value}test(e){if(IS("Comparator.test",e,this.options.loose),this.semver===RS||e===RS)return!0;if("string"==typeof e)try{e=new jS(e,this.options)}catch(e){return!1}return BS(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof PS))throw new TypeError("a Comparator is required");if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return""===this.value||new RA(e.value,t).test(this.value);if(""===e.operator)return""===e.value||new RA(this.value,t).test(e.semver);const n=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),r=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),i=this.semver.version===e.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),a=BS(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),s=BS(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return n||r||i&&o||a||s}}zS=PS;const LS=DE,BS=SS,IS=oE,jS=AE;var US;class qS{constructor(e,t){if(t=yA(t),e instanceof qS)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new qS(e.raw,t);if(e instanceof vA)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((e=>this.parseRange(e.trim()))).filter((e=>e.length)),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${e}`);if(this.set.length>1){const e=this.set[0];if(this.set=this.set.filter((e=>!wA(e[0]))),0===this.set.length)this.set=[e];else if(this.set.length>1)for(const e of this.set)if(1===e.length&&_A(e[0])){this.set=[e];break}}this.format()}format(){return this.range=this.set.map((e=>e.join(" ").trim())).join("||").trim(),this.range}toString(){return this.range}parseRange(e){e=e.trim();const t=`parseRange:${Object.keys(this.options).join(",")}:${e}`,n=gA.get(t);if(n)return n;const r=this.options.loose,i=r?rE.re[rE.t.HYPHENRANGELOOSE]:rE.re[rE.t.HYPHENRANGE];e=e.replace(i,$A(this.options.includePrerelease)),bA("hyphen replace",e),e=e.replace(rE.re[rE.t.COMPARATORTRIM],rE.comparatorTrimReplace),bA("comparator trim",e,rE.re[rE.t.COMPARATORTRIM]),e=(e=(e=e.replace(rE.re[rE.t.TILDETRIM],rE.tildeTrimReplace)).replace(rE.re[rE.t.CARETTRIM],rE.caretTrimReplace)).split(/\s+/).join(" ");const o=r?rE.re[rE.t.COMPARATORLOOSE]:rE.re[rE.t.COMPARATOR],a=e.split(" ").map((e=>EA(e,this.options))).join(" ").split(/\s+/).map((e=>TA(e,this.options))).filter(this.options.loose?e=>!!e.match(o):()=>!0).map((e=>new vA(e,this.options))),s=(a.length,new Map);for(const e of a){if(wA(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");const u=[...s.values()];return gA.set(t,u),u}intersects(e,t){if(!(e instanceof qS))throw new TypeError("a Range is required");return this.set.some((n=>kA(n,t)&&e.set.some((e=>kA(e,t)&&n.every((n=>e.every((e=>n.intersects(e,t)))))))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new xA(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(zA(this.set[t],e,this.options))return!0;return!1}}US=qS;var WS,HS=!1;var VS;function GS(e){var t=this;if(t instanceof GS||(t=new GS),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}function YS(e,t,n){var r=t===e.head?new JS(n,null,t,e):new JS(n,t,t.next,e);return null===r.next&&(e.tail=r),null===r.prev&&(e.head=r),e.length++,r}function XS(e,t){e.tail=new JS(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function QS(e,t){e.head=new JS(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function JS(e,t,n,r){if(!(this instanceof JS))return new JS(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}VS=GS,GS.Node=JS,GS.create=GS,GS.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t},GS.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},GS.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},GS.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)XS(this,arguments[e]);return this.length},GS.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)QS(this,arguments[e]);return this.length},GS.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},GS.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},GS.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},GS.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},GS.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},GS.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},GS.prototype.map=function(e,t){t=t||this;for(var n=new GS,r=this.head;null!==r;)n.push(e.call(t,r.value,this)),r=r.next;return n},GS.prototype.mapReverse=function(e,t){t=t||this;for(var n=new GS,r=this.tail;null!==r;)n.push(e.call(t,r.value,this)),r=r.prev;return n},GS.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var i=0;null!==r;i++)n=e(n,r.value,i),r=r.next;return n},GS.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var i=this.length-1;null!==r;i--)n=e(n,r.value,i),r=r.prev;return n},GS.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},GS.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},GS.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new GS;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;for(;null!==i&&r<t;r++,i=i.next)n.push(i.value);return n},GS.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var n=new GS;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;null!==i&&r>t;r--)i=i.prev;for(;null!==i&&r>e;r--,i=i.prev)n.push(i.value);return n},GS.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;null!==i&&r<e;r++)i=i.next;var o=[];for(r=0;i&&r<t;r++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(r=0;r<n.length;r++)i=YS(this,i,n[r]);return o},GS.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};try{(HS||(HS=!0,WS={},WS=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),WS)(GS)}catch(e){}const KS=VS,ZS=Symbol("max"),eA=Symbol("length"),tA=Symbol("lengthCalculator"),nA=Symbol("allowStale"),rA=Symbol("maxAge"),iA=Symbol("dispose"),oA=Symbol("noDisposeOnSet"),aA=Symbol("lruList"),sA=Symbol("cache"),uA=Symbol("updateAgeOnGet"),lA=()=>1;const cA=(e,t,n)=>{const r=e[sA].get(t);if(r){const t=r.value;if(fA(e,t)){if(hA(e,r),!e[nA])return}else n&&(e[uA]&&(r.value.now=Date.now()),e[aA].unshiftNode(r));return t.value}},fA=(e,t)=>{if(!t||!t.maxAge&&!e[rA])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[rA]&&n>e[rA]},dA=e=>{if(e[eA]>e[ZS])for(let t=e[aA].tail;e[eA]>e[ZS]&&null!==t;){const n=t.prev;hA(e,t),t=n}},hA=(e,t)=>{if(t){const n=t.value;e[iA]&&e[iA](n.key,n.value),e[eA]-=n.length,e[sA].delete(n.key),e[aA].removeNode(t)}};class pA{constructor(e,t,n,r,i){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=i||0}}const mA=(e,t,n,r)=>{let i=n.value;fA(e,i)&&(hA(e,n),e[nA]||(i=void 0)),i&&t.call(r,i.value,i.key,e)},gA=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw new TypeError("max must be a non-negative number");this[ZS]=e.max||1/0;const t=e.length||lA;if(this[tA]="function"!=typeof t?lA:t,this[nA]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw new TypeError("maxAge must be a number");this[rA]=e.maxAge||0,this[iA]=e.dispose,this[oA]=e.noDisposeOnSet||!1,this[uA]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw new TypeError("max must be a non-negative number");this[ZS]=e||1/0,dA(this)}get max(){return this[ZS]}set allowStale(e){this[nA]=!!e}get allowStale(){return this[nA]}set maxAge(e){if("number"!=typeof e)throw new TypeError("maxAge must be a non-negative number");this[rA]=e,dA(this)}get maxAge(){return this[rA]}set lengthCalculator(e){"function"!=typeof e&&(e=lA),e!==this[tA]&&(this[tA]=e,this[eA]=0,this[aA].forEach((e=>{e.length=this[tA](e.value,e.key),this[eA]+=e.length}))),dA(this)}get lengthCalculator(){return this[tA]}get length(){return this[eA]}get itemCount(){return this[aA].length}rforEach(e,t){t=t||this;for(let n=this[aA].tail;null!==n;){const r=n.prev;mA(this,e,n,t),n=r}}forEach(e,t){t=t||this;for(let n=this[aA].head;null!==n;){const r=n.next;mA(this,e,n,t),n=r}}keys(){return this[aA].toArray().map((e=>e.key))}values(){return this[aA].toArray().map((e=>e.value))}reset(){this[iA]&&this[aA]&&this[aA].length&&this[aA].forEach((e=>this[iA](e.key,e.value))),this[sA]=new Map,this[aA]=new KS,this[eA]=0}dump(){return this[aA].map((e=>!fA(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)})).toArray().filter((e=>e))}dumpLru(){return this[aA]}set(e,t,n){if((n=n||this[rA])&&"number"!=typeof n)throw new TypeError("maxAge must be a number");const r=n?Date.now():0,i=this[tA](t,e);if(this[sA].has(e)){if(i>this[ZS])return hA(this,this[sA].get(e)),!1;const o=this[sA].get(e).value;return this[iA]&&(this[oA]||this[iA](e,o.value)),o.now=r,o.maxAge=n,o.value=t,this[eA]+=i-o.length,o.length=i,this.get(e),dA(this),!0}const o=new pA(e,t,i,r,n);return o.length>this[ZS]?(this[iA]&&this[iA](e,t),!1):(this[eA]+=o.length,this[aA].unshift(o),this[sA].set(e,this[aA].head),dA(this),!0)}has(e){if(!this[sA].has(e))return!1;const t=this[sA].get(e).value;return!fA(this,t)}get(e){return cA(this,e,!0)}peek(e){return cA(this,e,!1)}pop(){const e=this[aA].tail;return e?(hA(this,e),e.value):null}del(e){hA(this,this[sA].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const r=e[n],i=r.e||0;if(0===i)this.set(r.k,r.v);else{const e=i-t;e>0&&this.set(r.k,r.v,e)}}}prune(){this[sA].forEach(((e,t)=>cA(this,t,!1)))}}({max:1e3}),yA=DE,vA=zS,bA=oE,xA=AE,wA=e=>"<0.0.0-0"===e.value,_A=e=>""===e.value,kA=(e,t)=>{let n=!0;const r=e.slice();let i=r.pop();for(;n&&r.length;)n=r.every((e=>i.intersects(e,t))),i=r.pop();return n},EA=(e,t)=>(bA("comp",e,t),e=DA(e,t),bA("caret",e),e=AA(e,t),bA("tildes",e),e=FA(e,t),bA("xrange",e),e=OA(e,t),bA("stars",e),e),SA=e=>!e||"x"===e.toLowerCase()||"*"===e,AA=(e,t)=>e.trim().split(/\s+/).map((e=>CA(e,t))).join(" "),CA=(e,t)=>{const n=t.loose?rE.re[rE.t.TILDELOOSE]:rE.re[rE.t.TILDE];return e.replace(n,((t,n,r,i,o)=>{let a;return bA("tilde",e,t,n,r,i,o),SA(n)?a="":SA(r)?a=`>=${n}.0.0 <${+n+1}.0.0-0`:SA(i)?a=`>=${n}.${r}.0 <${n}.${+r+1}.0-0`:o?(bA("replaceTilde pr",o),a=`>=${n}.${r}.${i}-${o} <${n}.${+r+1}.0-0`):a=`>=${n}.${r}.${i} <${n}.${+r+1}.0-0`,bA("tilde return",a),a}))},DA=(e,t)=>e.trim().split(/\s+/).map((e=>MA(e,t))).join(" "),MA=(e,t)=>{bA("caret",e,t);const n=t.loose?rE.re[rE.t.CARETLOOSE]:rE.re[rE.t.CARET],r=t.includePrerelease?"-0":"";return e.replace(n,((t,n,i,o,a)=>{let s;return bA("caret",e,t,n,i,o,a),SA(n)?s="":SA(i)?s=`>=${n}.0.0${r} <${+n+1}.0.0-0`:SA(o)?s="0"===n?`>=${n}.${i}.0${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.0${r} <${+n+1}.0.0-0`:a?(bA("replaceCaret pr",a),s="0"===n?"0"===i?`>=${n}.${i}.${o}-${a} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}-${a} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o}-${a} <${+n+1}.0.0-0`):(bA("no pr"),s="0"===n?"0"===i?`>=${n}.${i}.${o}${r} <${n}.${i}.${+o+1}-0`:`>=${n}.${i}.${o}${r} <${n}.${+i+1}.0-0`:`>=${n}.${i}.${o} <${+n+1}.0.0-0`),bA("caret return",s),s}))},FA=(e,t)=>(bA("replaceXRanges",e,t),e.split(/\s+/).map((e=>NA(e,t))).join(" ")),NA=(e,t)=>{e=e.trim();const n=t.loose?rE.re[rE.t.XRANGELOOSE]:rE.re[rE.t.XRANGE];return e.replace(n,((n,r,i,o,a,s)=>{bA("xRange",e,n,r,i,o,a,s);const u=SA(i),l=u||SA(o),c=l||SA(a),f=c;return"="===r&&f&&(r=""),s=t.includePrerelease?"-0":"",u?n=">"===r||"<"===r?"<0.0.0-0":"*":r&&f?(l&&(o=0),a=0,">"===r?(r=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):"<="===r&&(r="<",l?i=+i+1:o=+o+1),"<"===r&&(s="-0"),n=`${r+i}.${o}.${a}${s}`):l?n=`>=${i}.0.0${s} <${+i+1}.0.0-0`:c&&(n=`>=${i}.${o}.0${s} <${i}.${+o+1}.0-0`),bA("xRange return",n),n}))},OA=(e,t)=>(bA("replaceStars",e,t),e.trim().replace(rE.re[rE.t.STAR],"")),TA=(e,t)=>(bA("replaceGTE0",e,t),e.trim().replace(rE.re[t.includePrerelease?rE.t.GTE0PRE:rE.t.GTE0],"")),$A=e=>(t,n,r,i,o,a,s,u,l,c,f,d,h)=>`${n=SA(r)?"":SA(i)?`>=${r}.0.0${e?"-0":""}`:SA(o)?`>=${r}.${i}.0${e?"-0":""}`:a?`>=${n}`:`>=${n}${e?"-0":""}`} ${u=SA(l)?"":SA(c)?`<${+l+1}.0.0-0`:SA(f)?`<${l}.${+c+1}.0-0`:d?`<=${l}.${c}.${f}-${d}`:e?`<${l}.${c}.${+f+1}-0`:`<=${u}`}`.trim(),zA=(e,t,n)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!n.includePrerelease){for(let n=0;n<e.length;n++)if(bA(e[n].semver),e[n].semver!==vA.ANY&&e[n].semver.prerelease.length>0){const r=e[n].semver;if(r.major===t.major&&r.minor===t.minor&&r.patch===t.patch)return!0}return!1}return!0},RA=US;var PA;const LA=US;PA=(e,t,n)=>{try{t=new LA(t,n)}catch(e){return!1}return t.test(e)};var BA;const IA=US;BA=(e,t)=>new IA(e,t).set.map((e=>e.map((e=>e.value)).join(" ").trim().split(" ")));var jA;const UA=AE,qA=US;jA=(e,t,n)=>{let r=null,i=null,o=null;try{o=new qA(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&-1!==i.compare(e)||(r=e,i=new UA(r,n)))})),r};var WA;const HA=AE,VA=US;WA=(e,t,n)=>{let r=null,i=null,o=null;try{o=new VA(t,n)}catch(e){return null}return e.forEach((e=>{o.test(e)&&(r&&1!==i.compare(e)||(r=e,i=new HA(r,n)))})),r};var GA;const YA=AE,XA=US,QA=mS;GA=(e,t)=>{e=new XA(e,t);let n=new YA("0.0.0");if(e.test(n))return n;if(n=new YA("0.0.0-0"),e.test(n))return n;n=null;for(let t=0;t<e.set.length;++t){const r=e.set[t];let i=null;r.forEach((e=>{const t=new YA(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":i&&!QA(t,i)||(i=t);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${e.operator}`)}})),!i||n&&!QA(n,i)||(n=i)}return n&&e.test(n)?n:null};var JA;const KA=US;JA=(e,t)=>{try{return new KA(e,t).range||"*"}catch(e){return null}};var ZA;const eC=AE,tC=zS,{ANY:nC}=tC,rC=US,iC=PA,oC=mS,aC=yS,sC=kS,uC=wS;var lC;const cC=ZA=(e,t,n,r)=>{let i,o,a,s,u;switch(e=new eC(e,r),t=new rC(t,r),n){case">":i=oC,o=sC,a=aC,s=">",u=">=";break;case"<":i=aC,o=uC,a=oC,s="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(iC(e,t,r))return!1;for(let n=0;n<t.set.length;++n){const l=t.set[n];let c=null,f=null;if(l.forEach((e=>{e.semver===nC&&(e=new tC(">=0.0.0")),c=c||e,f=f||e,i(e.semver,c.semver,r)?c=e:a(e.semver,f.semver,r)&&(f=e)})),c.operator===s||c.operator===u)return!1;if((!f.operator||f.operator===s)&&o(e,f.semver))return!1;if(f.operator===u&&a(e,f.semver))return!1}return!0};lC=(e,t,n)=>cC(e,t,">",n);var fC;const dC=ZA;fC=(e,t,n)=>dC(e,t,"<",n);var hC;const pC=US;hC=(e,t,n)=>(e=new pC(e,n),t=new pC(t,n),e.intersects(t));var mC;const gC=PA,yC=GE;mC=(e,t,n)=>{const r=[];let i=null,o=null;const a=e.sort(((e,t)=>yC(e,t,n)));for(const e of a){gC(e,t,n)?(o=e,i||(i=e)):(o&&r.push([i,o]),o=null,i=null)}i&&r.push([i,null]);const s=[];for(const[e,t]of r)e===t?s.push(e):t||e!==a[0]?t?e===a[0]?s.push(`<=${t}`):s.push(`${e} - ${t}`):s.push(`>=${e}`):s.push("*");const u=s.join(" || "),l="string"==typeof t.raw?t.raw:String(t);return u.length<l.length?u:t};var vC;const bC=US,xC=zS,{ANY:wC}=xC,_C=PA,kC=GE,EC=(e,t,n)=>{if(e===t)return!0;if(1===e.length&&e[0].semver===wC){if(1===t.length&&t[0].semver===wC)return!0;e=n.includePrerelease?[new xC(">=0.0.0-0")]:[new xC(">=0.0.0")]}if(1===t.length&&t[0].semver===wC){if(n.includePrerelease)return!0;t=[new xC(">=0.0.0")]}const r=new Set;let i,o,a,s,u,l,c;for(const t of e)">"===t.operator||">="===t.operator?i=SC(i,t,n):"<"===t.operator||"<="===t.operator?o=AC(o,t,n):r.add(t.semver);if(r.size>1)return null;if(i&&o){if(a=kC(i.semver,o.semver,n),a>0)return null;if(0===a&&(">="!==i.operator||"<="!==o.operator))return null}for(const e of r){if(i&&!_C(e,String(i),n))return null;if(o&&!_C(e,String(o),n))return null;for(const r of t)if(!_C(e,String(r),n))return!1;return!0}let f=!(!o||n.includePrerelease||!o.semver.prerelease.length)&&o.semver,d=!(!i||n.includePrerelease||!i.semver.prerelease.length)&&i.semver;f&&1===f.prerelease.length&&"<"===o.operator&&0===f.prerelease[0]&&(f=!1);for(const e of t){if(c=c||">"===e.operator||">="===e.operator,l=l||"<"===e.operator||"<="===e.operator,i)if(d&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===d.major&&e.semver.minor===d.minor&&e.semver.patch===d.patch&&(d=!1),">"===e.operator||">="===e.operator){if(s=SC(i,e,n),s===e&&s!==i)return!1}else if(">="===i.operator&&!_C(i.semver,String(e),n))return!1;if(o)if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if(u=AC(o,e,n),u===e&&u!==o)return!1}else if("<="===o.operator&&!_C(o.semver,String(e),n))return!1;if(!e.operator&&(o||i)&&0!==a)return!1}return!(i&&l&&!o&&0!==a)&&(!(o&&c&&!i&&0!==a)&&(!d&&!f))},SC=(e,t,n)=>{if(!e)return t;const r=kC(e.semver,t.semver,n);return r>0?e:r<0||">"===t.operator&&">="===e.operator?t:e},AC=(e,t,n)=>{if(!e)return t;const r=kC(e.semver,t.semver,n);return r<0?e:r>0||"<"===t.operator&&"<="===e.operator?t:e};vC=(e,t,n={})=>{if(e===t)return!0;e=new bC(e,n),t=new bC(t,n);let r=!1;e:for(const i of e.set){for(const e of t.set){const t=EC(i,e,n);if(r=r||null!==t,t)continue e}if(r)return!1}return!0},nE={re:rE.re,src:rE.src,tokens:rE.t,SEMVER_SPEC_VERSION:Zk.SEMVER_SPEC_VERSION,SemVer:AE,compareIdentifiers:NE.compareIdentifiers,rcompareIdentifiers:NE.rcompareIdentifiers,parse:zE,valid:LE,clean:IE,inc:UE,diff:WE,major:JE,minor:ZE,patch:tS,prerelease:rS,compare:GE,rcompare:oS,compareLoose:sS,compareBuild:lS,sort:fS,rsort:hS,gt:mS,lt:yS,eq:VE,neq:bS,gte:wS,lte:kS,cmp:SS,coerce:OS,Comparator:zS,Range:US,satisfies:PA,toComparators:BA,maxSatisfying:jA,minSatisfying:WA,minVersion:GA,validRange:JA,outside:ZA,gtr:lC,ltr:fC,intersects:hC,simplifyRange:mC,subset:vC};var CC={},DC={};function MC(e,t,n){return e.fields=t||[],e.fname=n,e}function FC(e){return null==e?null:e.fname}function NC(e){return null==e?null:e.fields}function OC(e){return 1===e.length?TC(e[0]):$C(e)}const TC=e=>function(t){return t[e]},$C=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function zC(e){throw Error(e)}function RC(e){const t=[],n=e.length;let r,i,o,a=null,s=0,u="";function l(){t.push(u+e.substring(r,i)),u="",r=i+1}for(e+="",r=i=0;i<n;++i)if(o=e[i],"\\"===o)u+=e.substring(r,i),u+=e.substring(++i,++i),r=i;else if(o===a)l(),a=null,s=-1;else{if(a)continue;r===s&&'"'===o||r===s&&"'"===o?(r=i+1,a=o):"."!==o||s?"["===o?(i>r&&l(),s=r=i+1):"]"===o&&(s||zC("Access path missing open bracket: "+e),s>0&&l(),s=0,r=i+1):i>r?l():r=i+1}return s&&zC("Access path missing closing bracket: "+e),a&&zC("Access path missing closing quote: "+e),i>r&&(i++,l()),t}function PC(e,t,n){const r=RC(e);return e=1===r.length?r[0]:e,MC((n&&n.get||OC)(r),[e],t||e)}const LC=PC("id"),BC=MC((e=>e),[],"identity"),IC=MC((()=>0),[],"zero"),jC=MC((()=>1),[],"one"),UC=MC((()=>!0),[],"true"),qC=MC((()=>!1),[],"false");function WC(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}function HC(e,t){let n=e||0;return{level:function(e){return arguments.length?(n=+e,this):n},error:function(){return n>=1&&WC(t||"error","ERROR",arguments),this},warn:function(){return n>=2&&WC(t||"warn","WARN",arguments),this},info:function(){return n>=3&&WC(t||"log","INFO",arguments),this},debug:function(){return n>=4&&WC(t||"log","DEBUG",arguments),this}}}var VC=Array.isArray;function GC(e){return e===Object(e)}const YC=e=>"__proto__"!==e;function XC(...e){return e.reduce(((e,t)=>{for(const n in t)if("signals"===n)e.signals=JC(e.signals,t.signals);else{const r="legend"===n?{layout:1}:"style"===n||null;QC(e,n,t[n],r)}return e}),{})}function QC(e,t,n,r){if(!YC(t))return;let i,o;if(GC(n)&&!VC(n))for(i in o=GC(e[t])?e[t]:e[t]={},n)r&&(!0===r||r[i])?QC(o,i,n[i]):YC(i)&&(o[i]=n[i]);else e[t]=n}function JC(e,t){if(null==e)return t;const n={},r=[];function i(e){n[e.name]||(n[e.name]=1,r.push(e))}return t.forEach(i),e.forEach(i),r}function KC(e){return e[e.length-1]}function ZC(e){return null==e||""===e?null:+e}const eD=e=>t=>e*Math.exp(t),tD=e=>t=>Math.log(e*t),nD=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),rD=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,iD=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function oD(e,t,n,r){const i=n(e[0]),o=n(KC(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function aD(e,t){return oD(e,t,ZC,BC)}function sD(e,t){var n=Math.sign(e[0]);return oD(e,t,tD(n),eD(n))}function uD(e,t,n){return oD(e,t,iD(n),iD(1/n))}function lD(e,t,n){return oD(e,t,nD(n),rD(n))}function cD(e,t,n,r,i){const o=r(e[0]),a=r(KC(e)),s=null!=t?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function fD(e,t,n){return cD(e,t,n,ZC,BC)}function dD(e,t,n){const r=Math.sign(e[0]);return cD(e,t,n,tD(r),eD(r))}function hD(e,t,n,r){return cD(e,t,n,iD(r),iD(1/r))}function pD(e,t,n,r){return cD(e,t,n,nD(r),rD(r))}function mD(e){return 1+~~(new Date(e).getMonth()/3)}function gD(e){return 1+~~(new Date(e).getUTCMonth()/3)}function yD(e){return null!=e?VC(e)?e:[e]:[]}function vD(e,t,n){let r,i=e[0],o=e[1];return o<i&&(r=o,o=i,i=r),r=o-i,r>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-r),i+r]}function bD(e){return"function"==typeof e}function xD(e,t,n){n=n||{},t=yD(t)||[];const r=[],i=[],o={},a=n.comparator||_D;return yD(e).forEach(((e,a)=>{null!=e&&(r.push("descending"===t[a]?-1:1),i.push(e=bD(e)?e:PC(e,null,n)),(NC(e)||[]).forEach((e=>o[e]=1)))})),0===i.length?null:MC(a(i,r),Object.keys(o))}const wD=(e,t)=>(e<t||null==e)&&null!=t?-1:(e>t||null==t)&&null!=e?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t==t?-1:t!=t&&e==e?1:0),_D=(e,t)=>1===e.length?kD(e[0],t[0]):ED(e,t,e.length),kD=(e,t)=>function(n,r){return wD(e(n),e(r))*t},ED=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;0===a&&++s<n;)o=e[s],a=wD(o(r),o(i));return a*t[s]});function SD(e){return bD(e)?e:()=>e}function AD(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout((()=>(t(r),n=null)),e)}}function CD(e){for(let t,n,r=1,i=arguments.length;r<i;++r)for(n in t=arguments[r],t)e[n]=t[n];return e}function DD(e,t){let n,r,i,o,a=0;if(e&&(n=e.length))if(null==t){for(r=e[a];a<n&&(null==r||r!=r);r=e[++a]);for(i=o=r;a<n;++a)r=e[a],null!=r&&(r<i&&(i=r),r>o&&(o=r))}else{for(r=t(e[a]);a<n&&(null==r||r!=r);r=t(e[++a]));for(i=o=r;a<n;++a)r=t(e[a]),null!=r&&(r<i&&(i=r),r>o&&(o=r))}return[i,o]}function MD(e,t){const n=e.length;let r,i,o,a,s,u=-1;if(null==t){for(;++u<n;)if(i=e[u],null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=e[u],null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}else{for(;++u<n;)if(i=t(e[u],u,e),null!=i&&i>=i){r=o=i;break}if(u===n)return[-1,-1];for(a=s=u;++u<n;)i=t(e[u],u,e),null!=i&&(r>i&&(r=i,a=u),o<i&&(o=i,s=u))}return[a,s]}const FD=Object.prototype.hasOwnProperty;function ND(e,t){return FD.call(e,t)}const OD={};function TD(e){let t,n={};function r(e){return ND(n,e)&&n[e]!==OD}const i={size:0,empty:0,object:n,has:r,get:function(e){return r(e)?n[e]:void 0},set:function(e,t){return r(e)||(++i.size,n[e]===OD&&--i.empty),n[e]=t,this},delete:function(e){return r(e)&&(--i.size,++i.empty,n[e]=OD),this},clear:function(){i.size=i.empty=0,i.object=n={}},test:function(e){return arguments.length?(t=e,i):t},clean:function(){const e={};let r=0;for(const i in n){const o=n[i];o===OD||t&&t(o)||(e[i]=o,++r)}i.size=r,i.empty=0,i.object=n=e}};return e&&Object.keys(e).forEach((t=>{i.set(t,e[t])})),i}function $D(e,t,n,r,i,o){if(!n&&0!==n)return o;const a=+n;let s,u=e[0],l=KC(e);l<u&&(s=u,u=l,l=s),s=Math.abs(t-u);const c=Math.abs(l-t);return s<c&&s<=a?r:c<=a?i:o}function zD(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),CD(r,n)}function RD(e,t,n,r){let i,o=t[0],a=t[t.length-1];return o>a&&(i=o,o=a,a=i),r=void 0===r||r,((n=void 0===n||n)?o<=e:o<e)&&(r?e<=a:e<a)}function PD(e){return"boolean"==typeof e}function LD(e){return"[object Date]"===Object.prototype.toString.call(e)}function BD(e){return e&&bD(e[Symbol.iterator])}function ID(e){return"number"==typeof e}function jD(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function UD(e){return"string"==typeof e}function qD(e,t,n){e&&(e=t?yD(e).map((e=>e.replace(/\\(.)/g,"$1"))):yD(e));const r=e&&e.length,i=n&&n.get||OC,o=e=>i(t?[e]:RC(e));let a;if(r)if(1===r){const t=o(e[0]);a=function(e){return""+t(e)}}else{const t=e.map(o);a=function(e){let n=""+t[0](e),i=0;for(;++i<r;)n+="|"+t[i](e);return n}}else a=function(){return""};return MC(a,e,"key")}function WD(e,t){const n=e[0],r=KC(e),i=+t;return i?1===i?r:n+i*(r-n):n}function HD(e){let t,n,r;e=+e||1e4;const i=()=>{t={},n={},r=0},o=(i,o)=>(++r>e&&(n=t,t={},r=1),t[i]=o);return i(),{clear:i,has:e=>ND(t,e)||ND(n,e),get:e=>ND(t,e)?t[e]:ND(n,e)?o(e,n[e]):void 0,set:(e,n)=>ND(t,e)?t[e]=n:o(e,n)}}function VD(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,u=0,l=0;for(;s<i&&u<o;++l)a[l]=e(t[s],n[u])>0?n[u++]:t[s++];for(;s<i;++s,++l)a[l]=t[s];for(;u<o;++u,++l)a[l]=n[u];return a}function GD(e,t){let n="";for(;--t>=0;)n+=e;return n}function YD(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:"left"===r?GD(i,a)+o:"center"===r?GD(i,~~(a/2))+o+GD(i,Math.ceil(a/2)):o+GD(i,a)}function XD(e){return e&&KC(e)-e[0]||0}function QD(e){return VC(e)?"["+e.map(QD)+"]":GC(e)||UD(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function JD(e){return null==e||""===e?null:!(!e||"false"===e||"0"===e)&&!!e}const KD=e=>ID(e)||LD(e)?e:Date.parse(e);function ZD(e,t){return t=t||KD,null==e||""===e?null:t(e)}function eM(e){return null==e||""===e?null:e+""}function tM(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function nM(e,t,n,r){const i=null!=r?r:"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:"left"===n?i+o.slice(a-s):"center"===n?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function rM(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const r=t(e[i]);r&&n(r,i,e)}}else e.forEach(n)}n(DC,"zoomSymlog",(function(){return pD})),n(DC,"zoomPow",(function(){return hD})),n(DC,"zoomLog",(function(){return dD})),n(DC,"zoomLinear",(function(){return fD})),n(DC,"zero",(function(){return IC})),n(DC,"writeConfig",(function(){return QC})),n(DC,"visitArray",(function(){return rM})),n(DC,"utcquarter",(function(){return gD})),n(DC,"truthy",(function(){return UC})),n(DC,"truncate",(function(){return nM})),n(DC,"toString",(function(){return eM})),n(DC,"toSet",(function(){return tM})),n(DC,"toNumber",(function(){return ZC})),n(DC,"toDate",(function(){return ZD})),n(DC,"toBoolean",(function(){return JD})),n(DC,"stringValue",(function(){return QD})),n(DC,"splitAccessPath",(function(){return RC})),n(DC,"span",(function(){return XD})),n(DC,"repeat",(function(){return GD})),n(DC,"quarter",(function(){return mD})),n(DC,"peek",(function(){return KC})),n(DC,"panSymlog",(function(){return lD})),n(DC,"panPow",(function(){return uD})),n(DC,"panLog",(function(){return sD})),n(DC,"panLinear",(function(){return aD})),n(DC,"pad",(function(){return YD})),n(DC,"one",(function(){return jC})),n(DC,"mergeConfig",(function(){return XC})),n(DC,"merge",(function(){return VD})),n(DC,"lruCache",(function(){return HD})),n(DC,"logger",(function(){return HC})),n(DC,"lerp",(function(){return WD})),n(DC,"key",(function(){return qD})),n(DC,"isString",(function(){return UD})),n(DC,"isRegExp",(function(){return jD})),n(DC,"isObject",(function(){return GC})),n(DC,"isNumber",(function(){return ID})),n(DC,"isIterable",(function(){return BD})),n(DC,"isFunction",(function(){return bD})),n(DC,"isDate",(function(){return LD})),n(DC,"isBoolean",(function(){return PD})),n(DC,"isArray",(function(){return VC})),n(DC,"inrange",(function(){return RD})),n(DC,"inherits",(function(){return zD})),n(DC,"identity",(function(){return BC})),n(DC,"id",(function(){return LC})),n(DC,"hasOwnProperty",(function(){return ND})),n(DC,"flush",(function(){return $D})),n(DC,"field",(function(){return PC})),n(DC,"fastmap",(function(){return TD})),n(DC,"falsy",(function(){return qC})),n(DC,"extentIndex",(function(){return MD})),n(DC,"extent",(function(){return DD})),n(DC,"extend",(function(){return CD})),n(DC,"error",(function(){return zC})),n(DC,"debounce",(function(){return AD})),n(DC,"constant",(function(){return SD})),n(DC,"compare",(function(){return xD})),n(DC,"clampRange",(function(){return vD})),n(DC,"ascending",(function(){return wD})),n(DC,"array",(function(){return yD})),n(DC,"accessorName",(function(){return FC})),n(DC,"accessorFields",(function(){return NC})),n(DC,"accessor",(function(){return MC})),n(DC,"Warn",(function(){return 2})),n(DC,"None",(function(){return 0})),n(DC,"Info",(function(){return 3})),n(DC,"Error",(function(){return 1})),n(DC,"Debug",(function(){return 4})),r(CC,DC);var iM={};const oM=/^([A-Za-z]+:)?\/\//,aM=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,sM=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,uM="file://";async function lM(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function cM(e,t){t=CD({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=aM.test(e.replace(sM,""));null!=e&&"string"==typeof e&&s||zC("Sanitize failure, invalid URI: "+QD(e));const u=oM.test(e);return(a=t.baseURL)&&!u&&(e.startsWith("/")||"/"===a[a.length-1]||(e="/"+e),e=a+e),o=(i=e.startsWith(uM))||"file"===t.mode||"http"!==t.mode&&!u&&n,i?e=e.slice(uM.length):e.startsWith("//")&&("file"===t.defaultProtocol?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),"image"===t.context&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function fM(e){return e?t=>new Promise(((n,r)=>{e.readFile(t,((e,t)=>{e?r(e):n(t)}))})):dM}async function dM(){zC("No file system access.")}function hM(e){return e?async function(t,n){const r=CD({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?bD(o[i])?o[i]():o.text():zC(o.status+""+o.statusText)}:pM}async function pM(){zC("No HTTP fetch method available.")}const mM=e=>!(Number.isNaN(+e)||e instanceof Date),gM={boolean:JD,integer:ZC,number:ZC,date:ZD,string:eM,unknown:BC},yM=[e=>"true"===e||"false"===e||!0===e||!1===e,e=>mM(e)&&Number.isInteger(+e),mM,e=>!Number.isNaN(Date.parse(e))],vM=["boolean","integer","number","date"];function bM(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=yM.length,i=yM.map(((e,t)=>t+1));for(let a,s,u=0,l=0;u<n;++u)for(s=t?e[u][t]:e[u],a=0;a<r;++a)if(i[a]&&(null!=(o=s)&&o==o)&&!yM[a](s)&&(i[a]=0,++l,l===yM.length))return"string";var o;return vM[i.reduce(((e,t)=>0===e?t:e),0)-1]}function xM(e,t){return t.reduce(((t,n)=>(t[n]=bM(e,n),t)),{})}function wM(e){const t=function(t,n){const r={delimiter:e};return _M(t,n?CD(n,r):r)};return t.responseType="text",t}function _M(e,t){return t.header&&(e=t.header.map(QD).join(t.delimiter)+"\n"+e),tm(t.delimiter).parse(e+"")}_M.responseType="text";for(var kM=function(e){var t,n,r=NM(e),i=r[0],o=r[1],a=new CM(function(e,t,n){return 3*(t+n)/4-n}(0,i,o)),s=0,u=o>0?i-4:i;for(n=0;n<u;n+=4)t=AM[e.charCodeAt(n)]<<18|AM[e.charCodeAt(n+1)]<<12|AM[e.charCodeAt(n+2)]<<6|AM[e.charCodeAt(n+3)],a[s++]=t>>16&255,a[s++]=t>>8&255,a[s++]=255&t;2===o&&(t=AM[e.charCodeAt(n)]<<2|AM[e.charCodeAt(n+1)]>>4,a[s++]=255&t);1===o&&(t=AM[e.charCodeAt(n)]<<10|AM[e.charCodeAt(n+1)]<<4|AM[e.charCodeAt(n+2)]>>2,a[s++]=t>>8&255,a[s++]=255&t);return a},EM=function(e){for(var t,n=e.length,r=n%3,i=[],o=16383,a=0,s=n-r;a<s;a+=o)i.push(OM(e,a,a+o>s?s:a+o));1===r?(t=e[n-1],i.push(SM[t>>2]+SM[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(SM[t>>10]+SM[t>>4&63]+SM[t<<2&63]+"="));return i.join("")},SM=[],AM=[],CM="undefined"!=typeof Uint8Array?Uint8Array:Array,DM="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",MM=0,FM=DM.length;MM<FM;++MM)SM[MM]=DM[MM],AM[DM.charCodeAt(MM)]=MM;function NM(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function OM(e,t,n){for(var r,i,o=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),o.push(SM[(i=r)>>18&63]+SM[i>>12&63]+SM[i>>6&63]+SM[63&i]);return o.join("")}AM["-".charCodeAt(0)]=62,AM["_".charCodeAt(0)]=63;var TM=function(e,t,n,r,i){var o,a,s=8*i-r-1,u=(1<<s)-1,l=u>>1,c=-7,f=n?i-1:0,d=n?-1:1,h=e[t+f];for(f+=d,o=h&(1<<-c)-1,h>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=l}return(h?-1:1)*a*Math.pow(2,o-r)},$M=function(e,t,n,r,i,o){var a,s,u,l=8*o-i-1,c=(1<<l)-1,f=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),(t+=a+f>=1?d/u:d*Math.pow(2,1-f))*u>=2&&(a++,u/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*u-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,l+=i;l>0;e[n+h]=255&a,h+=p,a/=256,l-=8);e[n+h-p]|=128*m},zM="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null,RM=BM,PM=2147483647;function LM(e){if(e>PM)throw new RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,BM.prototype),t}function BM(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return UM(e)}return IM(e,t,n)}function IM(e,t,n){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!BM.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|VM(e,t),r=LM(n),i=r.write(e,t);i!==n&&(r=r.slice(0,i));return r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(vF(e,Uint8Array)){var t=new Uint8Array(e);return WM(t.buffer,t.byteOffset,t.byteLength)}return qM(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(vF(e,ArrayBuffer)||e&&vF(e.buffer,ArrayBuffer))return WM(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(vF(e,SharedArrayBuffer)||e&&vF(e.buffer,SharedArrayBuffer)))return WM(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');var r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return BM.from(r,t,n);var i=function(e){if(BM.isBuffer(e)){var t=0|HM(e.length),n=LM(t);return 0===n.length||e.copy(n,0,0,t),n}if(void 0!==e.length)return"number"!=typeof e.length||bF(e.length)?LM(0):qM(e);if("Buffer"===e.type&&Array.isArray(e.data))return qM(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return BM.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function jM(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function UM(e){return jM(e),LM(e<0?0:0|HM(e))}function qM(e){for(var t=e.length<0?0:0|HM(e.length),n=LM(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function WM(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,BM.prototype),r}function HM(e){if(e>=PM)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+PM.toString(16)+" bytes");return 0|e}function VM(e,t){if(BM.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||vF(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return mF(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return gF(e).length;default:if(i)return r?-1:mF(e).length;t=(""+t).toLowerCase(),i=!0}}function GM(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return sF(this,t,n);case"utf8":case"utf-8":return rF(this,t,n);case"ascii":return oF(this,t,n);case"latin1":case"binary":return aF(this,t,n);case"base64":return nF(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return uF(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function YM(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function XM(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),bF(n=+n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=BM.from(t,r)),BM.isBuffer(t))return 0===t.length?-1:QM(e,t,n,r,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):QM(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function QM(e,t,n,r,i){var o,a=1,s=e.length,u=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=n;o<s;o++)if(l(e,o)===l(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var f=!0,d=0;d<u;d++)if(l(e,o+d)!==l(t,d)){f=!1;break}if(f)return o}return-1}function JM(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=t.length;r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(t.substr(2*a,2),16);if(bF(s))return a;e[n+a]=s}return a}function KM(e,t,n,r){return yF(mF(t,e.length-n),e,n,r)}function ZM(e,t,n,r){return yF(function(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function eF(e,t,n,r){return yF(gF(t),e,n,r)}function tF(e,t,n,r){return yF(function(e,t){for(var n,r,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=(n=e.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(t,e.length-n),e,n,r)}function nF(e,t,n){return 0===t&&n===e.length?EM(e):EM(e.slice(t,n))}function rF(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var o,a,s,u,l=e[i],c=null,f=l>239?4:l>223?3:l>191?2:1;if(i+f<=n)switch(f){case 1:l<128&&(c=l);break;case 2:128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,f=1):c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|1023&c),r.push(c),i+=f}return function(e){var t=e.length;if(t<=iF)return String.fromCharCode.apply(String,e);var n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=iF));return n}(r)}BM.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),BM.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(BM.prototype,"parent",{enumerable:!0,get:function(){if(BM.isBuffer(this))return this.buffer}}),Object.defineProperty(BM.prototype,"offset",{enumerable:!0,get:function(){if(BM.isBuffer(this))return this.byteOffset}}),BM.poolSize=8192,BM.from=function(e,t,n){return IM(e,t,n)},Object.setPrototypeOf(BM.prototype,Uint8Array.prototype),Object.setPrototypeOf(BM,Uint8Array),BM.alloc=function(e,t,n){return function(e,t,n){return jM(e),e<=0?LM(e):void 0!==t?"string"==typeof n?LM(e).fill(t,n):LM(e).fill(t):LM(e)}(e,t,n)},BM.allocUnsafe=function(e){return UM(e)},BM.allocUnsafeSlow=function(e){return UM(e)},BM.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==BM.prototype},BM.compare=function(e,t){if(vF(e,Uint8Array)&&(e=BM.from(e,e.offset,e.byteLength)),vF(t,Uint8Array)&&(t=BM.from(t,t.offset,t.byteLength)),!BM.isBuffer(e)||!BM.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},BM.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},BM.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return BM.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=BM.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(vF(o,Uint8Array))i+o.length>r.length?BM.from(o).copy(r,i):Uint8Array.prototype.set.call(r,o,i);else{if(!BM.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i)}i+=o.length}return r},BM.byteLength=VM,BM.prototype._isBuffer=!0,BM.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)YM(this,t,t+1);return this},BM.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)YM(this,t,t+3),YM(this,t+1,t+2);return this},BM.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)YM(this,t,t+7),YM(this,t+1,t+6),YM(this,t+2,t+5),YM(this,t+3,t+4);return this},BM.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?rF(this,0,e):GM.apply(this,arguments)},BM.prototype.toLocaleString=BM.prototype.toString,BM.prototype.equals=function(e){if(!BM.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===BM.compare(this,e)},BM.prototype.inspect=function(){var e="";return e=this.toString("hex",0,50).replace(/(.{2})/g,"$1 ").trim(),this.length>50&&(e+=" ... "),"<Buffer "+e+">"},zM&&(BM.prototype[zM]=BM.prototype.inspect),BM.prototype.compare=function(e,t,n,r,i){if(vF(e,Uint8Array)&&(e=BM.from(e,e.offset,e.byteLength)),!BM.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(this===e)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(t>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=e.slice(t,n),c=0;c<s;++c)if(u[c]!==l[c]){o=u[c],a=l[c];break}return o<a?-1:a<o?1:0},BM.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},BM.prototype.indexOf=function(e,t,n){return XM(this,e,t,n,!0)},BM.prototype.lastIndexOf=function(e,t,n){return XM(this,e,t,n,!1)},BM.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return JM(this,e,t,n);case"utf8":case"utf-8":return KM(this,e,t,n);case"ascii":case"latin1":case"binary":return ZM(this,e,t,n);case"base64":return eF(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tF(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},BM.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var iF=4096;function oF(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function aF(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function sF(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=t;o<n;++o)i+=xF[e[o]];return i}function uF(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length-1;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function lF(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function cF(e,t,n,r,i,o){if(!BM.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function fF(e,t,n,r,i,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function dF(e,t,n,r,i){return t=+t,n>>>=0,i||fF(e,0,n,4),$M(e,t,n,r,23,4),n+4}function hF(e,t,n,r,i){return t=+t,n>>>=0,i||fF(e,0,n,8),$M(e,t,n,r,52,8),n+8}BM.prototype.slice=function(e,t){var n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return Object.setPrototypeOf(r,BM.prototype),r},BM.prototype.readUintLE=BM.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||lF(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},BM.prototype.readUintBE=BM.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||lF(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},BM.prototype.readUint8=BM.prototype.readUInt8=function(e,t){return e>>>=0,t||lF(e,1,this.length),this[e]},BM.prototype.readUint16LE=BM.prototype.readUInt16LE=function(e,t){return e>>>=0,t||lF(e,2,this.length),this[e]|this[e+1]<<8},BM.prototype.readUint16BE=BM.prototype.readUInt16BE=function(e,t){return e>>>=0,t||lF(e,2,this.length),this[e]<<8|this[e+1]},BM.prototype.readUint32LE=BM.prototype.readUInt32LE=function(e,t){return e>>>=0,t||lF(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},BM.prototype.readUint32BE=BM.prototype.readUInt32BE=function(e,t){return e>>>=0,t||lF(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},BM.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||lF(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*t)),r},BM.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||lF(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},BM.prototype.readInt8=function(e,t){return e>>>=0,t||lF(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},BM.prototype.readInt16LE=function(e,t){e>>>=0,t||lF(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},BM.prototype.readInt16BE=function(e,t){e>>>=0,t||lF(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},BM.prototype.readInt32LE=function(e,t){return e>>>=0,t||lF(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},BM.prototype.readInt32BE=function(e,t){return e>>>=0,t||lF(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},BM.prototype.readFloatLE=function(e,t){return e>>>=0,t||lF(e,4,this.length),TM(this,e,!0,23,4)},BM.prototype.readFloatBE=function(e,t){return e>>>=0,t||lF(e,4,this.length),TM(this,e,!1,23,4)},BM.prototype.readDoubleLE=function(e,t){return e>>>=0,t||lF(e,8,this.length),TM(this,e,!0,52,8)},BM.prototype.readDoubleBE=function(e,t){return e>>>=0,t||lF(e,8,this.length),TM(this,e,!1,52,8)},BM.prototype.writeUintLE=BM.prototype.writeUIntLE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||cF(this,e,t,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=e/i&255;return t+n},BM.prototype.writeUintBE=BM.prototype.writeUIntBE=function(e,t,n,r){(e=+e,t>>>=0,n>>>=0,r)||cF(this,e,t,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+n},BM.prototype.writeUint8=BM.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,1,255,0),this[t]=255&e,t+1},BM.prototype.writeUint16LE=BM.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},BM.prototype.writeUint16BE=BM.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},BM.prototype.writeUint32LE=BM.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},BM.prototype.writeUint32BE=BM.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},BM.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);cF(this,e,t,n,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<n&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},BM.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);cF(this,e,t,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+n},BM.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},BM.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},BM.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},BM.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},BM.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||cF(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},BM.prototype.writeFloatLE=function(e,t,n){return dF(this,e,t,!0,n)},BM.prototype.writeFloatBE=function(e,t,n){return dF(this,e,t,!1,n)},BM.prototype.writeDoubleLE=function(e,t,n){return hF(this,e,t,!0,n)},BM.prototype.writeDoubleBE=function(e,t,n){return hF(this,e,t,!1,n)},BM.prototype.copy=function(e,t,n,r){if(!BM.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),i},BM.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!BM.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;var o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var a=BM.isBuffer(e)?e:BM.from(e,r),s=a.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=a[o%s]}return this};var pF=/[^+/0-9A-Za-z-_]/g;function mF(e,t){var n;t=t||1/0;for(var r=e.length,i=null,o=[],a=0;a<r;++a){if((n=e.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function gF(e){return kM(function(e){if((e=(e=e.split("=")[0]).trim().replace(pF,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function yF(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function vF(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function bF(e){return e!=e}var xF=function(){for(var e="0123456789abcdef",t=new Array(256),n=0;n<16;++n)for(var r=16*n,i=0;i<16;++i)t[r+i]=e[n]+e[i];return t}(),wF=RM;function _F(e,t){const n=t&&t.property?PC(t.property):BC;return!GC(e)||(r=e,"function"==typeof wF&&bD(wF.isBuffer)&&wF.isBuffer(r))?n(JSON.parse(e)):function(e,t){!VC(e)&&BD(e)&&(e=[...e]);return t&&t.copy?JSON.parse(JSON.stringify(e)):e}(n(e),t);var r}_F.responseType="json";var kF=function(e){return e},EF=function(e){if(null==e)return kF;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(e,s){s||(t=n=0);var u=2,l=e.length,c=new Array(l);for(c[0]=(t+=e[0])*r+o,c[1]=(n+=e[1])*i+a;u<l;)c[u]=e[u],++u;return c}},SF=function(e,t){return"string"==typeof t&&(t=e.objects[t]),"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map((function(t){return AF(e,t)}))}:AF(e,t)};function AF(e,t){var n=t.id,r=t.bbox,i=null==t.properties?{}:t.properties,o=CF(e,t);return null==n&&null==r?{type:"Feature",properties:i,geometry:o}:null==r?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function CF(e,t){var n=EF(e.transform),r=e.arcs;function i(e,t){t.length&&t.pop();for(var i=r[e<0?~e:e],o=0,a=i.length;o<a;++o)t.push(n(i[o],o));e<0&&function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}(t,a)}function o(e){return n(e)}function a(e){for(var t=[],n=0,r=e.length;n<r;++n)i(e[n],t);return t.length<2&&t.push(t[0]),t}function s(e){for(var t=a(e);t.length<4;)t.push(t[0]);return t}function u(e){return e.map(s)}return function e(t){var n,r=t.type;switch(r){case"GeometryCollection":return{type:r,geometries:t.geometries.map(e)};case"Point":n=o(t.coordinates);break;case"MultiPoint":n=t.coordinates.map(o);break;case"LineString":n=a(t.arcs);break;case"MultiLineString":n=t.arcs.map(a);break;case"Polygon":n=u(t.arcs);break;case"MultiPolygon":n=t.arcs.map(u);break;default:return null}return{type:r,coordinates:n}}(t)}var DF=function(e,t){var n={},r={},i={},o=[],a=-1;function s(e,t){for(var r in e){var i=e[r];delete t[i.start],delete i.start,delete i.end,i.forEach((function(e){n[e<0?~e:e]=1})),o.push(i)}}return t.forEach((function(n,r){var i,o=e.arcs[n<0?~n:n];o.length<3&&!o[1][0]&&!o[1][1]&&(i=t[++a],t[a]=n,t[r]=i)})),t.forEach((function(t){var n,o,a=function(t){var n,r=e.arcs[t<0?~t:t],i=r[0];e.transform?(n=[0,0],r.forEach((function(e){n[0]+=e[0],n[1]+=e[1]}))):n=r[r.length-1];return t<0?[n,i]:[i,n]}(t),s=a[0],u=a[1];if(n=i[s])if(delete i[n.end],n.push(t),n.end=u,o=r[u]){delete r[o.start];var l=o===n?n:n.concat(o);r[l.start=n.start]=i[l.end=o.end]=l}else r[n.start]=i[n.end]=n;else if(n=r[u])if(delete r[n.start],n.unshift(t),n.start=s,o=i[s]){delete i[o.end];var c=o===n?n:o.concat(n);r[c.start=o.start]=i[c.end=n.end]=c}else r[n.start]=i[n.end]=n;else r[(n=[t]).start=s]=i[n.end=u]=n})),s(i,r),s(r,i),t.forEach((function(e){n[e<0?~e:e]||o.push([e])})),o},MF=function(e){return CF(e,FF.apply(this,arguments))};function FF(e,t,n){var r,i,o;if(arguments.length>1)r=NF(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:DF(e,r)}}function NF(e,t,n){var r,i=[],o=[];function a(e){var t=e<0?~e:e;(o[t]||(o[t]=[])).push({i:e,g:r})}function s(e){e.forEach(a)}function u(e){e.forEach(s)}return function e(t){switch(r=t,t.type){case"GeometryCollection":t.geometries.forEach(e);break;case"LineString":s(t.arcs);break;case"MultiLineString":case"Polygon":u(t.arcs);break;case"MultiPolygon":!function(e){e.forEach(u)}(t.arcs)}}(t),o.forEach(null==n?function(e){i.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&i.push(e[0].i)}),i}const OF={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function TF(e,t){let n,r,i,o;return e=_F(e,t),t&&t.feature?(n=SF,i=t.feature):t&&t.mesh?(n=MF,i=t.mesh,o=OF[t.filter]):zC("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):zC("Invalid TopoJSON object: "+i),r&&r.features||[r]}TF.responseType="json";const $F={dsv:_M,csv:wM(","),tsv:wM("\t"),json:_F,topojson:TF};function zF(e,t){return arguments.length>1?($F[e]=t,this):ND($F,e)?$F[e]:null}function RF(e){const t=zF(e);return t&&t.responseType||"text"}var PF={};const LF="year",BF="quarter",IF="month",jF="week",UF="date",qF="day",WF="dayofyear",HF="hours",VF="minutes",GF="seconds",YF="milliseconds",XF=[LF,BF,IF,jF,UF,qF,WF,HF,VF,GF,YF],QF=XF.reduce(((e,t,n)=>(e[t]=1+n,e)),{});function JF(e){const t=yD(e).slice(),n={};t.length||zC("Missing time unit."),t.forEach((e=>{ND(QF,e)?n[e]=1:zC("Invalid time unit: ".concat(e,"."))}));return(n.week||n.day?1:0)+(n.quarter||n.month||n.date?1:0)+(n.dayofyear?1:0)>1&&zC("Incompatible time units: ".concat(e)),t.sort(((e,t)=>QF[e]-QF[t])),t}const KF={[LF]:"%Y ",[BF]:"Q%q ",[IF]:"%b ",[UF]:"%d ",[jF]:"W%U ",[qF]:"%a ",[WF]:"%j ",[HF]:"%H:00",[VF]:"00:%M",[GF]:":%S",[YF]:".%L",["".concat(LF,"-").concat(IF)]:"%Y-%m ",["".concat(LF,"-").concat(IF,"-").concat(UF)]:"%Y-%m-%d ",["".concat(HF,"-").concat(VF)]:"%H:%M"};function ZF(e,t){const n=CD({},KF,t),r=JF(e),i=r.length;let o,a,s="",u=0;for(u=0;u<i;)for(o=r.length;o>u;--o)if(a=r.slice(u,o).join("-"),null!=n[a]){s+=n[a],u=o;break}return s.trim()}const eN=new Date;function tN(e){return eN.setFullYear(e),eN.setMonth(0),eN.setDate(1),eN.setHours(0,0,0,0),eN}function nN(e){return iN(new Date(e))}function rN(e){return oN(new Date(e))}function iN(e){return mw.count(tN(e.getFullYear())-1,e)}function oN(e){return yw.count(tN(e.getFullYear())-1,e)}function aN(e){return tN(e).getDay()}function sN(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function uN(e){return cN(new Date(e))}function lN(e){return fN(new Date(e))}function cN(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Dw.count(t-1,e)}function fN(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Fw.count(t-1,e)}function dN(e){return eN.setTime(Date.UTC(e,0,1)),eN.getUTCDay()}function hN(e,t,n,r,i,o,a){if(0<=e&&e<100){const e=new Date(Date.UTC(-1,t,n,r,i,o,a));return e.setUTCFullYear(n.y),e}return new Date(Date.UTC(e,t,n,r,i,o,a))}function pN(e,t,n,r,i){const o=t||1,a=KC(e),s=(e,t,i)=>function(e,t,n,r){const i=n<=1?e:r?(t,i)=>r+n*Math.floor((e(t,i)-r)/n):(t,r)=>n*Math.floor(e(t,r)/n);return t?(e,n)=>t(i(e,n),n):i}(n[i=i||e],r[i],e===a&&o,t),u=new Date,l=tM(e),c=l.year?s(LF):SD(2012),f=l.month?s(IF):l.quarter?s(BF):IC,d=l.week&&l.day?s(qF,1,"weekday"):l.week?s(jF,1):l.day?s(qF,1):l.date?s(UF,1):l.dayofyear?s(WF,1):jC,h=l.hours?s(HF):IC,p=l.minutes?s(VF):IC,m=l.seconds?s(GF):IC,g=l.milliseconds?s(YF):IC;return function(e){u.setTime(+e);const t=c(u);return i(t,f(u),d(u,t),h(u),p(u),m(u),g(u))}}function mN(e,t,n){return t+7*e-(n+6)%7}const gN={[LF]:e=>e.getFullYear(),[BF]:e=>Math.floor(e.getMonth()/3),[IF]:e=>e.getMonth(),[UF]:e=>e.getDate(),[HF]:e=>e.getHours(),[VF]:e=>e.getMinutes(),[GF]:e=>e.getSeconds(),[YF]:e=>e.getMilliseconds(),[WF]:e=>iN(e),[jF]:e=>oN(e),weekday:(e,t)=>mN(oN(e),e.getDay(),aN(t)),[qF]:(e,t)=>mN(1,e.getDay(),aN(t))},yN={[BF]:e=>3*e,[jF]:(e,t)=>mN(e,0,aN(t))};function vN(e,t){return pN(e,t||1,gN,yN,sN)}const bN={[LF]:e=>e.getUTCFullYear(),[BF]:e=>Math.floor(e.getUTCMonth()/3),[IF]:e=>e.getUTCMonth(),[UF]:e=>e.getUTCDate(),[HF]:e=>e.getUTCHours(),[VF]:e=>e.getUTCMinutes(),[GF]:e=>e.getUTCSeconds(),[YF]:e=>e.getUTCMilliseconds(),[WF]:e=>cN(e),[jF]:e=>fN(e),[qF]:(e,t)=>mN(1,e.getUTCDay(),dN(t)),weekday:(e,t)=>mN(fN(e),e.getUTCDay(),dN(t))},xN={[BF]:e=>3*e,[jF]:(e,t)=>mN(e,0,dN(t))};function wN(e,t){return pN(e,t||1,bN,xN,hN)}const _N={[LF]:Sw,[BF]:Ew.every(3),[IF]:Ew,[jF]:yw,[UF]:mw,[qF]:mw,[WF]:mw,[HF]:pw,[VF]:hw,[GF]:dw,[YF]:iw},kN={[LF]:Lw,[BF]:Pw.every(3),[IF]:Pw,[jF]:Fw,[UF]:Dw,[qF]:Dw,[WF]:Dw,[HF]:Cw,[VF]:Aw,[GF]:dw,[YF]:iw};function EN(e){return _N[e]}function SN(e){return kN[e]}function AN(e,t,n){return e?e.offset(t,n):void 0}function CN(e,t,n){return AN(EN(e),t,n)}function DN(e,t,n){return AN(SN(e),t,n)}function MN(e,t,n,r){return e?e.range(t,n,r):void 0}function FN(e,t,n,r){return MN(EN(e),t,n,r)}function NN(e,t,n,r){return MN(SN(e),t,n,r)}const ON=1e3,TN=6e4,$N=36e5,zN=864e5,RN=2592e6,PN=31536e6,LN=[LF,IF,UF,HF,VF,GF,YF],BN=LN.slice(0,-1),IN=BN.slice(0,-1),jN=IN.slice(0,-1),UN=jN.slice(0,-1),qN=[LF,IF],WN=[LF],HN=[[BN,1,ON],[BN,5,5e3],[BN,15,15e3],[BN,30,3e4],[IN,1,TN],[IN,5,3e5],[IN,15,9e5],[IN,30,18e5],[jN,1,$N],[jN,3,108e5],[jN,6,216e5],[jN,12,432e5],[UN,1,zN],[[LF,jF],1,6048e5],[qN,1,RN],[qN,3,7776e6],[WN,1,PN]];function VN(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(XD(t))/n;let i,o,a=Lb((e=>e[2])).right(HN,r);return a===HN.length?(i=WN,o=ox(t[0]/PN,t[1]/PN,n)):a?(a=HN[r/HN[a-1][2]<HN[a][2]/r?a-1:a],i=a[0],o=a[1]):(i=LN,o=Math.max(ox(t[0],t[1],n),1)),{units:i,step:o}}function GN(e){const t={};return n=>t[n]||(t[n]=e(n))}function YN(e){const t=GN(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat:function(e){const n=xx(e||",");if(null==n.precision){switch(n.precision=12,n.type){case"%":n.precision-=2;break;case"e":n.precision-=1}return r=t(n),i=t(".1f")(1)[1],e=>{const t=r(e),n=t.indexOf(i);if(n<0)return t;let o=function(e,t){let n,r=e.lastIndexOf("e");if(r>0)return r;for(r=e.length;--r>t;)if(n=e.charCodeAt(r),n>=48&&n<=57)return r+1}(t,n);const a=o<t.length?t.slice(o):"";for(;--o>n;)if("0"!==t[o]){++o;break}return t.slice(0,o)+a}}return t(n);var r,i},formatSpan:function(e,r,i,o){o=xx(null==o?",f":o);const a=ox(e,r,i),s=Math.max(Math.abs(e),Math.abs(r));let u;if(null==o.precision)switch(o.type){case"s":return isNaN(u=Tx(a,s))||(o.precision=u),n(o,s);case"":case"e":case"g":case"p":case"r":isNaN(u=$x(a,s))||(o.precision=u-("e"===o.type));break;case"f":case"%":isNaN(u=Ox(a))||(o.precision=u-2*("%"===o.type))}return t(o)}}}let XN,QN;function JN(){return XN=YN({format:Ex,formatPrefix:Sx})}function KN(e){return YN(Nx(e))}function ZN(e){return arguments.length?XN=KN(e):XN}function eO(e,t,n){GC(n=n||{})||zC("Invalid time multi-format specifier: ".concat(n));const r=t(GF),i=t(VF),o=t(HF),a=t(UF),s=t(jF),u=t(IF),l=t(BF),c=t(LF),f=e(n.milliseconds||".%L"),d=e(n.seconds||":%S"),h=e(n.minutes||"%I:%M"),p=e(n.hours||"%I %p"),m=e(n.date||n.day||"%a %d"),g=e(n.week||"%b %d"),y=e(n.month||"%B"),v=e(n.quarter||"%B"),b=e(n.year||"%Y");return e=>(r(e)<e?f:i(e)<e?d:o(e)<e?h:a(e)<e?p:u(e)<e?s(e)<e?m:g:c(e)<e?l(e)<e?y:v:b)(e)}function tO(e){const t=GN(e.format),n=GN(e.utcFormat);return{timeFormat:e=>UD(e)?t(e):eO(t,EN,e),utcFormat:e=>UD(e)?n(e):eO(n,SN,e),timeParse:GN(e.parse),utcParse:GN(e.utcParse)}}function nO(){return QN=tO({format:Xw,parse:Qw,utcFormat:Jw,utcParse:Kw})}function rO(e){return tO(Gw(e))}function iO(e){return arguments.length?QN=rO(e):QN}n(PF,"week",(function(){return rN})),n(PF,"utcweek",(function(){return lN})),n(PF,"utcdayofyear",(function(){return uN})),n(PF,"utcSequence",(function(){return NN})),n(PF,"utcOffset",(function(){return DN})),n(PF,"utcInterval",(function(){return SN})),n(PF,"utcFloor",(function(){return wN})),n(PF,"timeUnits",(function(){return JF})),n(PF,"timeUnitSpecifier",(function(){return ZF})),n(PF,"timeSequence",(function(){return FN})),n(PF,"timeOffset",(function(){return CN})),n(PF,"timeInterval",(function(){return EN})),n(PF,"timeFloor",(function(){return vN})),n(PF,"timeBin",(function(){return VN})),n(PF,"dayofyear",(function(){return nN})),n(PF,"YEAR",(function(){return LF})),n(PF,"WEEK",(function(){return jF})),n(PF,"TIME_UNITS",(function(){return XF})),n(PF,"SECONDS",(function(){return GF})),n(PF,"QUARTER",(function(){return BF})),n(PF,"MONTH",(function(){return IF})),n(PF,"MINUTES",(function(){return VF})),n(PF,"MILLISECONDS",(function(){return YF})),n(PF,"HOURS",(function(){return HF})),n(PF,"DAYOFYEAR",(function(){return WF})),n(PF,"DAY",(function(){return qF})),n(PF,"DATE",(function(){return UF})),JN(),nO();const oO=(e,t)=>CD({},e,t);function aO(e,t){const n=e?KN(e):ZN(),r=t?rO(t):iO();return oO(n,r)}function sO(e,t){const n=arguments.length;return n&&2!==n&&zC("defaultLocale expects either zero or two arguments."),n?oO(ZN(e),iO(t)):oO(ZN(),iO())}function uO(){return JN(),nO(),sO()}var lO=function(e,t,n,r){const i=zF((t=t||{}).type||"json");return i||zC("Unknown data format type: "+t.type),e=i(e,t),t.parse&&function(e,t,n,r){if(!e.length)return;const i=iO();n=n||i.timeParse,r=r||i.utcParse;let o,a,s,u,l,c,f=e.columns||Object.keys(e[0]);"auto"===t&&(t=xM(e,f));f=Object.keys(t);const d=f.map((e=>{const i=t[e];let o,a;if(i&&(i.startsWith("date:")||i.startsWith("utc:"))){o=i.split(/:(.+)?/,2),a=o[1],("'"===a[0]&&"'"===a[a.length-1]||'"'===a[0]&&'"'===a[a.length-1])&&(a=a.slice(1,-1));return("utc"===o[0]?r:n)(a)}if(!gM[i])throw Error("Illegal format pattern: "+e+":"+i);return gM[i]}));for(s=0,l=e.length,c=f.length;s<l;++s)for(o=e[s],u=0;u<c;++u)a=f[u],o[a]=d[u](o[a])}(e,t.parse,n,r),ND(e,"columns")&&delete e.columns,e};const cO=function(e,t){return n=>({options:n||{},sanitize:cM,load:lM,fileAccess:!!t,file:fM(t),http:hM(e)})}("undefined"!=typeof fetch&&fetch,null);function fO(e){const t=e||BC,n=[],r={};return n.add=e=>{const i=t(e);return r[i]||(r[i]=1,n.push(e)),n},n.remove=e=>{const i=t(e);if(r[i]){r[i]=0;const t=n.indexOf(e);t>=0&&n.splice(t,1)}return n},n}async function dO(e,t){try{await t(e)}catch(t){e.error(t)}}n(iM,"loader",(function(){return cO})),n(iM,"read",(function(){return lO})),n(iM,"typeParsers",(function(){return gM})),n(iM,"inferTypes",(function(){return xM})),n(iM,"inferType",(function(){return bM})),n(iM,"responseType",(function(){return RF})),n(iM,"formats",(function(){return zF})),n(iM,"format",(function(){return $F}));const hO=Symbol("vega_id");let pO=1;function mO(e){return!(!e||!gO(e))}function gO(e){return e[hO]}function yO(e,t){return e[hO]=t,e}function vO(e){const t=e===Object(e)?e:{data:e};return gO(t)?t:yO(t,pO++)}function bO(e){return xO(e,vO({}))}function xO(e,t){for(const n in e)t[n]=e[n];return t}function wO(e,t){return yO(t,gO(e))}function _O(e,t){return e?t?(n,r)=>e(n,r)||gO(t(n))-gO(t(r)):(t,n)=>e(t,n)||gO(t)-gO(n):null}function kO(e){return e&&e.constructor===EO}function EO(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:EO,insert:function(t){const n=yD(t),r=n.length;for(let t=0;t<r;++t)e.push(n[t]);return this},remove:function(e){const n=bD(e)?r:t,i=yD(e),o=i.length;for(let e=0;e<o;++e)n.push(i[e]);return this},modify:function(e,t,r){const o={field:t,value:SD(r)};return bD(e)?(o.filter=e,i.push(o)):(o.tuple=e,n.push(o)),this},encode:function(e,t){return bD(e)?i.push({filter:e,field:t}):n.push({tuple:e,field:t}),this},clean:function(e){return o=e,this},reflow:function(){return a=!0,this},pulse:function(s,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[gO(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[gO(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach((e=>{p(e)&&(l[gO(e)]=-1)}));for(f=0,d=e.length;f<d;++f)m=e[f],g=gO(m),l[g]?l[g]=1:s.add.push(vO(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[gO(m)]<0&&s.rem.push(m);function y(e,t,n){n?e[t]=n(e):s.encode=t,a||(c[gO(e)]=e)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[gO(m)],g>0&&(y(m,p,h.value),s.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach((e=>{p(e)&&l[gO(e)]>0&&y(e,h.field,h.value)})),s.modifies(h.field);if(a)s.mod=t.length||r.length?u.filter((e=>l[gO(e)]>0)):u.slice();else for(g in c)s.mod.push(c[g]);return(o||null==o&&(t.length||r.length))&&s.clean(!0),s}}}const SO="_:mod:_";function AO(){Object.defineProperty(this,SO,{writable:!0,value:{}})}AO.prototype={set:function(e,t,n,r){const i=this,o=i[e],a=i["_:mod:_"];return null!=t&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=VC(n)?1+n.length:-1),i},modified:function(e,t){const n=this["_:mod:_"];if(!arguments.length){for(const e in n)if(n[e])return!0;return!1}if(VC(e)){for(let t=0;t<e.length;++t)if(n[e[t]])return!0;return!1}return null!=t&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear:function(){return this["_:mod:_"]={},this}};let CO=0;const DO=new AO;function MO(e,t,n,r){this.id=++CO,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function FO(e){return function(t){const n=this.flags;return 0===arguments.length?!!(n&e):(this.flags=t?n|e:n&~e,this)}}MO.prototype={targets:function(){return this._targets||(this._targets=fO(LC))},set:function(e){return this.value!==e?(this.value=e,1):0},skip:FO(1),modified:FO(2),parameters:function(e,t,n){t=!1!==t;const r=this._argval=this._argval||new AO,i=this._argops=this._argops||[],o=[];let a,s,u,l;const c=(e,n,a)=>{a instanceof MO?(a!==this&&(t&&a.targets().add(this),o.push(a)),i.push({op:a,name:e,index:n})):r.set(e,n,a)};for(a in e)if(s=e[a],"pulse"===a)yD(s).forEach((e=>{e instanceof MO?e!==this&&(e.targets().add(this),o.push(e)):zC("Pulse parameters must be operator instances.")})),this.source=s;else if(VC(s))for(r.set(a,-1,Array(u=s.length)),l=0;l<u;++l)c(a,l,s[l]);else c(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall:function(e){const t=this._argval||DO,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach:function(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate:function(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};let NO=0;function OO(e,t,n){this.id=++NO,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function TO(e,t,n){return new OO(e,t,n)}OO.prototype={_filter:UC,_apply:BC,targets:function(){return this._targets||(this._targets=fO(LC))},consume:function(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive:function(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let e=0;e<r;++e)n[e].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter:function(e){const t=TO(e);return this.targets().add(t),t},apply:function(e){const t=TO(null,e);return this.targets().add(t),t},merge:function(){const e=TO();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle:function(e){let t=-1;return this.filter((()=>{const n=Date.now();return n-t>e?(t=n,1):0}))},debounce:function(e){const t=TO();return this.targets().add(TO(null,null,AD(e,(e=>{const n=e.dataflow;t.receive(e),n&&n.run&&n.run()})))),t},between:function(e,t){let n=!1;return e.targets().add(TO(null,null,(()=>n=!0))),t.targets().add(TO(null,null,(()=>n=!1))),this.filter((()=>n))},detach:function(){this._filter=UC,this._targets=null}};const $O={skip:!0};function zO(e,t,n,r,i,o){const a=CD({},o,$O);let s,u;bD(n)||(n=SD(n)),void 0===r?s=t=>e.touch(n(t)):bD(r)?(u=new MO(null,r,i,!1),s=t=>{u.evaluate(t);const r=n(t),i=u.value;kO(i)?e.pulse(r,i,o):e.update(r,i,a)}):s=t=>e.update(n(t),r,a),t.apply(s)}function RO(e,t,n,r,i,o){if(void 0===r)t.targets().add(n);else{const a=o||{},s=new MO(null,function(e,t){return t=bD(t)?t:SD(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}const PO={};function LO(e,t,n){this.dataflow=e,this.stamp=null==t?-1:t,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function BO(e,t){const n=[];return rM(e,t,(e=>n.push(e))),n}function IO(e,t){const n={};return e.visit(t,(e=>{n[gO(e)]=1})),e=>n[gO(e)]?null:e}function jO(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}function UO(e,t,n,r){const i=this,o=n.length;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(let e=0;e<o;++e){const r=n[e];if(r.stamp===t){if(r.fields){const e=i.fields||(i.fields={});for(const t in r.fields)e[t]=1}r.changed(i.ADD)&&(a|=i.ADD),r.changed(i.REM)&&(a|=i.REM),r.changed(i.MOD)&&(a|=i.MOD)}}this.changes=a}function qO(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}LO.prototype={StopPropagation:PO,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork:function(e){return new LO(this.dataflow).init(this,e)},clone:function(){const e=this.fork(7);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(23)},addAll:function(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new LO(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init:function(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,!e.fields||64&t||(n.fields=e.fields),1&t?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),2&t?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),4&t?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),32&t?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter:function(e){this.dataflow.runAfter(e)},changed:function(e){const t=e||7;return 1&t&&this.add.length||2&t&&this.rem.length||4&t&&this.mod.length},reflow:function(e){if(e)return this.fork(7).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(4,IO(this,1))),this},clean:function(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies:function(e){const t=this.fields||(this.fields={});return VC(e)?e.forEach((e=>t[e]=!0)):t[e]=!0,this},modified:function(e,t){const n=this.fields;return!(!t&&!this.mod.length||!n)&&(arguments.length?VC(e)?e.some((e=>n[e])):n[e]:!!n)},filter:function(e,t){const n=this;return 1&e&&(n.addF=jO(n.addF,t)),2&e&&(n.remF=jO(n.remF,t)),4&e&&(n.modF=jO(n.modF,t)),16&e&&(n.srcF=jO(n.srcF,t)),n},materialize:function(e){const t=this;return 1&(e=e||7)&&t.addF&&(t.add=BO(t.add,t.addF),t.addF=null),2&e&&t.remF&&(t.rem=BO(t.rem,t.remF),t.remF=null),4&e&&t.modF&&(t.mod=BO(t.mod,t.modF),t.modF=null),16&e&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit:function(e,t){const n=this,r=t;if(16&e)return rM(n.source,n.srcF,r),n;1&e&&rM(n.add,n.addF,r),2&e&&rM(n.rem,n.remF,r),4&e&&rM(n.mod,n.modF,r);const i=n.source;if(8&e&&i){const e=n.add.length+n.mod.length;e===i.length||rM(i,e?IO(n,5):n.srcF,r)}return n}},zD(UO,LO,{fork:function(e){const t=new LO(this.dataflow).init(this,e&this.NO_FIELDS);return void 0!==e&&(e&t.ADD&&this.visit(t.ADD,(e=>t.add.push(e))),e&t.REM&&this.visit(t.REM,(e=>t.rem.push(e))),e&t.MOD&&this.visit(t.MOD,(e=>t.mod.push(e)))),t},changed:function(e){return this.changes&e},modified:function(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?VC(e)?e.some((e=>n[e])):n[e]:0},filter:function(){zC("MultiPulse does not support filtering.")},materialize:function(){zC("MultiPulse does not support materialization.")},visit:function(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});const WO={skip:!1,force:!1};function HO(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),VO(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,function(e,t,n){const r=t,i=e.length,o=e[t];let a,s=1+(t<<1);for(;s<i;)a=s+1,a<i&&n(e[s],e[a])>=0&&(s=a),e[t]=e[s],s=1+((t=s)<<1);e[t]=o,VO(e,r,t,n)}(t,0,e)):r=n,r}}}function VO(e,t,n,r){let i,o;const a=e[n];for(;n>t&&(o=n-1>>1,i=e[o],r(a,i)<0);)e[n]=i,n=o;return e[n]=a}function GO(){this.logger(HC()),this.logLevel(1),this._clock=0,this._rank=0,this._locale=sO();try{this._loader=cO()}catch(e){}this._touched=fO(LC),this._input={},this._pulse=null,this._heap=HO(((e,t)=>e.qrank-t.qrank)),this._postrun=[]}function YO(e){return function(){return this._log[e].apply(this,arguments)}}function XO(e,t){MO.call(this,e,null,t)}GO.prototype={stamp:function(){return this._clock},loader:function(e){return arguments.length?(this._loader=e,this):this._loader},locale:function(e){return arguments.length?(this._locale=e,this):this._locale},logger:function(e){return arguments.length?(this._log=e,this):this._log},error:YO("error"),warn:YO("warn"),info:YO("info"),debug:YO("debug"),logLevel:YO("level"),cleanThreshold:1e4,add:function(e,t,n,r){let i,o=1;return e instanceof MO?i=e:e&&e.prototype instanceof MO?i=new e:bD(e)?i=new MO(null,e):(o=0,i=new MO(e,t)),this.rank(i),o&&(r=n,n=t),n&&this.connect(i,i.parameters(n,r)),this.touch(i),i},connect:function(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank)return void this.rerank(e)},rank:function(e){e.rank=++this._rank},rerank:function(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&zC("Cycle detected in dataflow graph.")},pulse:function(e,t,n){this.touch(e,n||WO);const r=new LO(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this},touch:function(e,t){const n=t||WO;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this},update:function(e,t,n){const r=n||WO;return(e.set(t)||r.force)&&this.touch(e,r),this},changeset:EO,ingest:function(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))},parse:function(e,t){const n=this.locale();return lO(e,t,n.timeParse,n.utcParse)},preload:async function(e,t,n){const r=this,i=r._pending||function(e){let t;const n=new Promise((e=>t=e));return n.requests=0,n.done=()=>{0==--n.requests&&(e._pending=null,t(e))},e._pending=n}(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(UC).insert(o.data||[])),i.done(),o},request:async function(e,t){const n=this;let r,i=0;try{r=await n.loader().load(e,{context:"dataflow",response:RF(t&&t.type)});try{r=n.parse(r,t)}catch(t){i=-2,n.warn("Data ingestion failed",e,t)}}catch(t){i=-1,n.warn("Loading failed",e,t)}return{data:r,status:i}},events:function(e,t,n,r){const i=this,o=TO(n,r),a=function(e){e.dataflow=i;try{o.receive(e)}catch(e){i.error(e)}finally{i.run()}};let s;s="string"==typeof e&&"undefined"!=typeof document?document.querySelectorAll(e):yD(e);const u=s.length;for(let e=0;e<u;++e)s[e].addEventListener(t,a);return o},on:function(e,t,n,r,i){return(e instanceof MO?RO:zO)(this,e,t,n,r,i),this},evaluate:async function(e,t,n){const r=this,i=[];if(r._pulse)return qO(r);if(r._pending&&await r._pending,t&&await dO(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new LO(r,o,e),r._touched.forEach((e=>r._enqueue(e,!0))),r._touched=fO(LC);let a,s,u,l=0;try{for(;r._heap.size()>0;)a=r._heap.pop(),a.rank===a.qrank?(s=a.run(r._getPulse(a,e)),s.then?s=await s:s.async&&(i.push(s.async),s=PO),s!==PO&&a._targets&&a._targets.forEach((e=>r._enqueue(e))),++l):r._enqueue(a,!0)}catch(e){r._heap.clear(),u=e}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${l} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const e=r._postrun.sort(((e,t)=>t.priority-e.priority));r._postrun=[];for(let t=0;t<e.length;++t)await dO(r,e[t].callback)}return n&&await dO(r,n),i.length&&Promise.all(i).then((e=>r.runAsync(null,(()=>{e.forEach((e=>{try{e(r)}catch(e){r.error(e)}}))})))),r},run:function(e,t,n){return this._pulse?qO(this):(this.evaluate(e,t,n),this)},runAsync:async function(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running},runAfter:function(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(e){this.error(e)}},_enqueue:function(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))},_getPulse:function(e,t){const n=e.source,r=this._clock;return n&&VC(n)?new UO(this,r,n.map((e=>e.pulse)),t):this._input[e.id]||function(e,t){if(t&&t.stamp===e.stamp)return t;e=e.fork(),t&&t!==PO&&(e.source=t.source);return e}(this._pulse,n&&n.pulse)}},zD(XO,MO,{run:function(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then((e=>this.pulse=e)):t!==e.StopPropagation&&(this.pulse=t),t},evaluate:function(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform:function(){}});const QO={};function JO(e){const t=KO(e);return t&&t.Definition||null}function KO(e){return e=e&&e.toLowerCase(),ND(QO,e)?QO[e]:null}var ZO={},eT={};function*tT(e,t){if(null==t)for(let t of e)null!=t&&""!==t&&(t=+t)>=t&&(yield t);else{let n=-1;for(let r of e)r=t(r,++n,e),null!=r&&""!==r&&(r=+r)>=r&&(yield r)}}function nT(e,t,n){const r=Float64Array.from(tT(e,n));return r.sort(Pb),t.map((e=>Xb(r,e)))}function rT(e,t){return nT(e,[.25,.5,.75],t)}function iT(e,t){const n=e.length,r=function(e,t){const n=function(e,t){let n,r=0,i=0,o=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(n=t-i,i+=n/++r,o+=n*(t-i));else{let a=-1;for(let s of e)null!=(s=t(s,++a,e))&&(s=+s)>=s&&(n=s-i,i+=n/++r,o+=n*(s-i))}if(r>1)return o/(r-1)}(e,t);return n?Math.sqrt(n):n}(e,t),i=rT(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function oT(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o,a,s,u,l,c,f=e.extent[0],d=e.extent[1];const h=e.span||d-f||Math.abs(f)||1;if(e.step)o=e.step;else if(e.steps){for(u=h/t,l=0,c=e.steps.length;l<c&&e.steps[l]<u;++l);o=e.steps[Math.max(0,l-1)]}else{for(a=Math.ceil(Math.log(t)/r),s=e.minstep||0,o=Math.max(s,Math.pow(n,Math.round(Math.log(h)/r)-a));Math.ceil(h/o)>t;)o*=n;for(l=0,c=i.length;l<c;++l)u=o/i[l],u>=s&&h/u<=t&&(o=u)}u=Math.log(o);const p=u>=0?0:1+~~(-u/r),m=Math.pow(n,-p-1);return(e.nice||void 0===e.nice)&&(u=Math.floor(f/o+m)*o,f=f<u?u-o:u,d=Math.ceil(d/o)*o),{start:f,stop:d===f?f+o:d,step:o}}var aT=Math.random;function sT(e){aT=e}function uT(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(tT(e,r)),o=i.length,a=t;let s,u,l,c;for(l=0,c=Array(a);l<a;++l){for(s=0,u=0;u<o;++u)s+=i[~~(aT()*o)];c[l]=s/o}return c.sort(Pb),[Yb(c,n/2),Yb(c,1-n/2)]}function lT(e,t,n,r){r=r||(e=>e);const i=e.length,o=new Float64Array(i);let a,s=0,u=1,l=r(e[0]),c=l,f=l+t;for(;u<i;++u){if(a=r(e[u]),a>=f){for(c=(l+c)/2;s<u;++s)o[s]=c;f=a+t,l=a}c=a}for(c=(l+c)/2;s<u;++s)o[s]=c;return n?function(e,t){const n=e.length;let r,i,o=0,a=1;for(;e[o]===e[a];)++a;for(;a<n;){for(r=a+1;e[a]===e[r];)++r;if(e[a]-e[a-1]<t){for(i=a+(o+r-a-a>>1);i<a;)e[i++]=e[a];for(;i>a;)e[i--]=e[o]}o=a,a=r}return e}(o,t+t/4):o}function cT(e){return function(){return(e=(1103515245*e+12345)%2147483647)/2147483647}}function fT(e,t){let n,r,i;null==t&&(t=e,e=0);const o={min:function(e){return arguments.length?(n=e||0,i=r-n,o):n},max:function(e){return arguments.length?(r=e||0,i=r-n,o):r},sample:function(){return n+Math.floor(i*aT())},pdf:function(e){return e===Math.floor(e)&&e>=n&&e<r?1/i:0},cdf:function(e){const t=Math.floor(e);return t<n?0:t>=r?1:(t-n+1)/i},icdf:function(e){return e>=0&&e<=1?n-1+Math.floor(e*i):NaN}};return o.min(e).max(t)}const dT=Math.sqrt(2*Math.PI),hT=Math.SQRT2;let pT=NaN;function mT(e,t){e=e||0,t=null==t?1:t;let n,r,i=0,o=0;if(pT==pT)i=pT,pT=NaN;else{do{i=2*aT()-1,o=2*aT()-1,n=i*i+o*o}while(0===n||n>1);r=Math.sqrt(-2*Math.log(n)/n),i*=r,pT=o*r}return e+i*t}function gT(e,t,n){const r=(e-(t||0))/(n=null==n?1:n);return Math.exp(-.5*r*r)/(n*dT)}function yT(e,t,n){const r=(e-(t=t||0))/(n=null==n?1:n),i=Math.abs(r);let o;if(i>37)o=0;else{const e=Math.exp(-i*i/2);let t;i<7.07106781186547?(t=.0352624965998911*i+.700383064443688,t=t*i+6.37396220353165,t=t*i+33.912866078383,t=t*i+112.079291497871,t=t*i+221.213596169931,t=t*i+220.206867912376,o=e*t,t=.0883883476483184*i+1.75566716318264,t=t*i+16.064177579207,t=t*i+86.7807322029461,t=t*i+296.564248779674,t=t*i+637.333633378831,t=t*i+793.826512519948,t=t*i+440.413735824752,o/=t):(t=i+.65,t=i+4/t,t=i+3/t,t=i+2/t,t=i+1/t,o=e/t/2.506628274631)}return r>0?1-o:o}function vT(e,t,n){return e<0||e>1?NaN:(t||0)+(null==n?1:n)*hT*function(e){let t,n=-Math.log((1-e)*(1+e));n<6.25?(n-=3.125,t=-364441206401782e-35,t=t*n-16850591381820166e-35,t=128584807152564e-32+t*n,t=11157877678025181e-33+t*n,t=t*n-1333171662854621e-31,t=20972767875968562e-33+t*n,t=6637638134358324e-30+t*n,t=t*n-4054566272975207e-29,t=t*n-8151934197605472e-29,t=26335093153082323e-28+t*n,t=t*n-12975133253453532e-27,t=t*n-5415412054294628e-26,t=1.0512122733215323e-9+t*n,t=t*n-4.112633980346984e-9,t=t*n-2.9070369957882005e-8,t=4.2347877827932404e-7+t*n,t=t*n-13654692000834679e-22,t=t*n-13882523362786469e-21,t=.00018673420803405714+t*n,t=t*n-.000740702534166267,t=t*n-.006033670871430149,t=.24015818242558962+t*n,t=1.6536545626831027+t*n):n<16?(n=Math.sqrt(n)-3.25,t=2.2137376921775787e-9,t=9.075656193888539e-8+t*n,t=t*n-2.7517406297064545e-7,t=1.8239629214389228e-8+t*n,t=15027403968909828e-22+t*n,t=t*n-4013867526981546e-21,t=29234449089955446e-22+t*n,t=12475304481671779e-21+t*n,t=t*n-47318229009055734e-21,t=6828485145957318e-20+t*n,t=24031110387097894e-21+t*n,t=t*n-.0003550375203628475,t=.0009532893797373805+t*n,t=t*n-.0016882755560235047,t=.002491442096107851+t*n,t=t*n-.003751208507569241,t=.005370914553590064+t*n,t=1.0052589676941592+t*n,t=3.0838856104922208+t*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,t=-27109920616438573e-27,t=t*n-2.555641816996525e-10,t=1.5076572693500548e-9+t*n,t=t*n-3.789465440126737e-9,t=7.61570120807834e-9+t*n,t=t*n-1.496002662714924e-8,t=2.914795345090108e-8+t*n,t=t*n-6.771199775845234e-8,t=2.2900482228026655e-7+t*n,t=t*n-9.9298272942317e-7,t=4526062597223154e-21+t*n,t=t*n-1968177810553167e-20,t=7599527703001776e-20+t*n,t=t*n-.00021503011930044477,t=t*n-.00013871931833623122,t=1.0103004648645344+t*n,t=4.849906401408584+t*n):t=1/0;return t*e}(2*e-1)}function bT(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>mT(n,r),pdf:e=>gT(e,n,r),cdf:e=>yT(e,n,r),icdf:e=>vT(e,n,r)};return i.mean(e).stdev(t)}function xT(e,t){const n=bT();let r=0;const i={data:function(n){return arguments.length?(e=n,r=n?n.length:0,i.bandwidth(t)):e},bandwidth:function(n){return arguments.length?(!(t=n)&&e&&(t=iT(e)),i):t},sample:function(){return e[~~(aT()*r)]+t*n.sample()},pdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.pdf((i-e[a])/t);return o/t/r},cdf:function(i){let o=0,a=0;for(;a<r;++a)o+=n.cdf((i-e[a])/t);return o/r},icdf:function(){throw Error("KDE icdf not supported.")}};return i.data(e)}function wT(e,t){return e=e||0,t=null==t?1:t,Math.exp(e+mT()*t)}function _T(e,t,n){if(e<=0)return 0;t=t||0,n=null==n?1:n;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*dT*e)}function kT(e,t,n){return yT(Math.log(e),t,n)}function ET(e,t,n){return Math.exp(vT(e,t,n))}function ST(e,t){let n,r;const i={mean:function(e){return arguments.length?(n=e||0,i):n},stdev:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>wT(n,r),pdf:e=>_T(e,n,r),cdf:e=>kT(e,n,r),icdf:e=>ET(e,n,r)};return i.mean(e).stdev(t)}function AT(e,t){let n,r=0;function i(e){const t=[];let n,i=0;for(n=0;n<r;++n)i+=t[n]=null==e[n]?1:+e[n];for(n=0;n<r;++n)t[n]/=i;return t}const o={weights:function(e){return arguments.length?(n=i(t=e||[]),o):t},distributions:function(n){return arguments.length?(n?(r=n.length,e=n):(r=0,e=[]),o.weights(t)):e},sample:function(){const t=aT();let i=e[r-1],o=n[0],a=0;for(;a<r-1;o+=n[++a])if(t<o){i=e[a];break}return i.sample()},pdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].pdf(t);return i},cdf:function(t){let i=0,o=0;for(;o<r;++o)i+=n[o]*e[o].cdf(t);return i},icdf:function(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function CT(e,t){return null==t&&(t=null==e?1:e,e=0),e+(t-e)*aT()}function DT(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=t&&e<=n?1/(n-t):0}function MT(e,t,n){return null==n&&(n=null==t?1:t,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function FT(e,t,n){return null==n&&(n=null==t?1:t,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function NT(e,t){let n,r;const i={min:function(e){return arguments.length?(n=e||0,i):n},max:function(e){return arguments.length?(r=null==e?1:e,i):r},sample:()=>CT(n,r),pdf:e=>DT(e,n,r),cdf:e=>MT(e,n,r),icdf:e=>FT(e,n,r)};return null==t&&(t=null==e?1:e,e=0),i.min(e).max(t)}function OT(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function TT(e,t,n,r){e=e.filter((e=>{let r=t(e),i=n(e);return null!=r&&(r=+r)>=r&&null!=i&&(i=+i)>=i})),r&&e.sort(((e,n)=>t(e)-t(n)));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s,u,l,c=0,f=0,d=0;for(l of e)o[c]=s=+t(l),a[c]=u=+n(l),++c,f+=(s-f)/c,d+=(u-d)/c;for(c=0;c<i;++c)o[c]-=f,a[c]-=d;return[o,a,f,d]}function $T(e,t,n,r){let i,o,a=-1;for(const s of e)i=t(s),o=n(s),null!=i&&(i=+i)>=i&&null!=o&&(o=+o)>=o&&r(i,o,++a)}function zT(e,t,n,r,i){let o=0,a=0;return $T(e,t,n,((e,t)=>{const n=t-i(e),s=t-r;o+=n*n,a+=s*s})),1-o/a}function RT(e,t,n){let r=0,i=0,o=0,a=0,s=0;$T(e,t,n,((e,t)=>{++s,r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=OT(r,i,o,a),l=e=>u[0]+u[1]*e;return{coef:u,predict:l,rSquared:zT(e,t,n,i,l)}}function PT(e,t,n){let r=0,i=0,o=0,a=0,s=0;$T(e,t,n,((e,t)=>{++s,e=Math.log(e),r+=(e-r)/s,i+=(t-i)/s,o+=(e*t-o)/s,a+=(e*e-a)/s}));const u=OT(r,i,o,a),l=e=>u[0]+u[1]*Math.log(e);return{coef:u,predict:l,rSquared:zT(e,t,n,i,l)}}function LT(e,t,n){const[r,i,o,a]=TT(e,t,n);let s,u,l,c=0,f=0,d=0,h=0,p=0;$T(e,t,n,((e,t)=>{s=r[p++],u=Math.log(t),l=s*t,c+=(t*u-c)/p,f+=(l-f)/p,d+=(l*u-d)/p,h+=(s*l-h)/p}));const[m,g]=OT(f/a,c/a,d/a,h/a),y=e=>Math.exp(m+g*(e-o));return{coef:[Math.exp(m-g*o),g],predict:y,rSquared:zT(e,t,n,a,y)}}function BT(e,t,n){let r=0,i=0,o=0,a=0,s=0,u=0;$T(e,t,n,((e,t)=>{const n=Math.log(e),l=Math.log(t);++u,r+=(n-r)/u,i+=(l-i)/u,o+=(n*l-o)/u,a+=(n*n-a)/u,s+=(t-s)/u}));const l=OT(r,i,o,a),c=e=>l[0]*Math.pow(e,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:zT(e,t,n,s,c)}}function IT(e,t,n){const[r,i,o,a]=TT(e,t,n),s=r.length;let u,l,c,f,d=0,h=0,p=0,m=0,g=0;for(u=0;u<s;)l=r[u],c=i[u++],f=l*l,d+=(f-d)/u,h+=(f*l-h)/u,p+=(f*f-p)/u,m+=(l*c-m)/u,g+=(f*c-g)/u;const y=p-d*d,v=d*y-h*h,b=(g*d-m*h)/v,x=(m*y-g*h)/v,w=-b*d,_=e=>b*(e-=o)*e+x*e+w+a;return{coef:[w-x*o+b*o*o+a,x-2*b*o,b],predict:_,rSquared:zT(e,t,n,a,_)}}function jT(e,t,n,r){if(1===r)return RT(e,t,n);if(2===r)return IT(e,t,n);const[i,o,a,s]=TT(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*o[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=function(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}(c),v=e=>{e-=a;let t=s+y[0]+y[1]*e+y[2]*e*e;for(d=3;d<f;++d)t+=y[d]*Math.pow(e,d);return t};return{coef:UT(f,y,-a,s),predict:v,rSquared:zT(e,t,n,s,v)}}function UT(e,t,n,r){const i=Array(e);let o,a,s,u;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],u=1,i[o]+=s,a=1;a<=o;++a)u*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*u;return i[0]+=r,i}function qT(e,t,n,r){const[i,o,a,s]=TT(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let e=-1;++e<=2;){const t=[0,l-1];for(let e=0;e<u;++e){const n=i[e],r=t[0],a=t[1],s=n-i[r]>i[a]-n?r:a;let u=0,l=0,h=0,p=0,m=0;const g=1/Math.abs(i[s]-n||1);for(let e=r;e<=a;++e){const t=i[e],r=o[e],a=WT(Math.abs(n-t)*g)*d[e],s=t*a;u+=a,l+=s,h+=r*a,p+=r*s,m+=t*s}const[y,v]=OT(l/u,h/u,p/u,m/u);c[e]=y+v*n,f[e]=Math.abs(o[e]-c[e]),HT(i,e+1,t)}if(2===e)break;const n=Qb(f);if(Math.abs(n)<1e-12)break;for(let e,t,r=0;r<u;++r)e=f[r]/(6*n),d[r]=e>=1?1e-12:(t=1-e*e)*t}return function(e,t,n,r){const i=e.length,o=[];let a,s=0,u=0,l=[];for(;s<i;++s)a=e[s]+n,l[0]===a?l[1]+=(t[s]-l[1])/++u:(u=0,l[1]+=r,l=[a,t[s]],o.push(l));return l[1]+=r,o}(i,c,a,s)}function WT(e){return(e=1-e*e*e)*e*e}function HT(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}const VT=.1*Math.PI/180;function GT(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=t=>[t,e(t)],o=t[0],a=t[1],s=a-o,u=s/r,l=[i(o)],c=[];if(n===r){for(let e=1;e<r;++e)l.push(i(o+e/n*s));return l.push(i(a)),l}c.push(i(a));for(let e=n;--e>0;)c.push(i(o+e/n*s));let f=l[0],d=c[c.length-1];for(;d;){const e=i((f[0]+d[0])/2);e[0]-f[0]>=u&&YT(f,e,d)>VT?c.push(e):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function YT(e,t,n){const r=Math.atan2(n[1]-e[1],n[0]-e[0]),i=Math.atan2(t[1]-e[1],t[0]-e[0]);return Math.abs(r-i)}function XT(e){return e&&e.length?1===e.length?e[0]:(t=e,e=>{const n=t.length;let r=1,i=String(t[0](e));for(;r<n;++r)i+="|"+t[r](e);return i}):function(){return""};var t}function QT(e,t,n){return n||e+(t?"_"+t:"")}n(eT,"setRandom",(function(){return sT})),n(eT,"sampleUniform",(function(){return CT})),n(eT,"sampleNormal",(function(){return mT})),n(eT,"sampleLogNormal",(function(){return wT})),n(eT,"sampleCurve",(function(){return GT})),n(eT,"regressionQuad",(function(){return IT})),n(eT,"regressionPow",(function(){return BT})),n(eT,"regressionPoly",(function(){return jT})),n(eT,"regressionLog",(function(){return PT})),n(eT,"regressionLoess",(function(){return qT})),n(eT,"regressionLinear",(function(){return RT})),n(eT,"regressionExp",(function(){return LT})),n(eT,"randomUniform",(function(){return NT})),n(eT,"randomNormal",(function(){return bT})),n(eT,"randomMixture",(function(){return AT})),n(eT,"randomLogNormal",(function(){return ST})),n(eT,"randomLCG",(function(){return cT})),n(eT,"randomKDE",(function(){return xT})),n(eT,"randomInteger",(function(){return fT})),n(eT,"random",(function(){return aT})),n(eT,"quartiles",(function(){return rT})),n(eT,"quantiles",(function(){return nT})),n(eT,"quantileUniform",(function(){return FT})),n(eT,"quantileNormal",(function(){return vT})),n(eT,"quantileLogNormal",(function(){return ET})),n(eT,"dotbin",(function(){return lT})),n(eT,"densityUniform",(function(){return DT})),n(eT,"densityNormal",(function(){return gT})),n(eT,"densityLogNormal",(function(){return _T})),n(eT,"cumulativeUniform",(function(){return MT})),n(eT,"cumulativeNormal",(function(){return yT})),n(eT,"cumulativeLogNormal",(function(){return kT})),n(eT,"bootstrapCI",(function(){return uT})),n(eT,"bin",(function(){return oT})),n(eT,"bandwidthNRD",(function(){return iT}));const JT=()=>{},KT={init:JT,add:JT,rem:JT,idx:0},ZT={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.sum,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||void 0===e.min)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||void 0===e.max)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3}},e$=Object.keys(ZT);function t$(e,t){return ZT[e](t)}function n$(e,t){return e.idx-t.idx}function r$(){this.valid=0,this.missing=0,this._ops.forEach((e=>e.init(this)))}function i$(e,t){null!=e&&""!==e?e==e&&(++this.valid,this._ops.forEach((n=>n.add(this,e,t)))):++this.missing}function o$(e,t){null!=e&&""!==e?e==e&&(--this.valid,this._ops.forEach((n=>n.rem(this,e,t)))):--this.missing}function a$(e){return this._out.forEach((t=>e[t.out]=t.value(this))),e}function s$(e,t){const n=t||BC,r=function(e){const t={};e.forEach((e=>t[e.name]=e));const n=e=>{e.req&&e.req.forEach((e=>{t[e]||n(t[e]=ZT[e]())}))};return e.forEach(n),Object.values(t).sort(n$)}(e),i=e.slice().sort(n$);function o(e){this._ops=r,this._out=i,this.cell=e,this.init()}return o.prototype.init=r$,o.prototype.add=i$,o.prototype.rem=o$,o.prototype.set=a$,o.prototype.get=n,o.fields=e.map((e=>e.out)),o}function u$(e){this._key=e?PC(e):gO,this.reset()}e$.forEach((e=>{ZT[e]=function(e,t){return n=>CD({name:e,out:n||e},KT,t)}(e,ZT[e])}));const l$=u$.prototype;function c$(e){XO.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}l$.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null},l$.add=function(e){this._add.push(e)},l$.rem=function(e){this._rem.push(e)},l$.values=function(){if(this._get=null,0===this._rem.length)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,u,l;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,u=0;s<r;++s)a[n(l=e[s])]?a[n(l)]=0:o[u++]=l;return this._rem=[],this._add=o},l$.distinct=function(e){const t=this.values(),n={};let r,i=t.length,o=0;for(;--i>=0;)r=e(t[i])+"",ND(n,r)||(n[r]=1,++o);return o},l$.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=MD(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext},l$.argmin=function(e){return this.extent(e)[0]||{}},l$.argmax=function(e){return this.extent(e)[1]||{}},l$.min=function(e){const t=this.extent(e)[0];return null!=t?e(t):void 0},l$.max=function(e){const t=this.extent(e)[1];return null!=t?e(t):void 0},l$.quartile=function(e){return this._get===e&&this._q||(this._q=rT(this.values(),e),this._get=e),this._q},l$.q1=function(e){return this.quartile(e)[0]},l$.q2=function(e){return this.quartile(e)[1]},l$.q3=function(e){return this.quartile(e)[2]},l$.ci=function(e){return this._get===e&&this._ci||(this._ci=uT(this.values(),1e3,.05,e),this._get=e),this._ci},l$.ci0=function(e){return this.ci(e)[0]},l$.ci1=function(e){return this.ci(e)[1]},c$.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:e$},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]},zD(c$,XO,{transform:function(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(n.value=n.value||n.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),r.modifies(n._outputs),n._drop=!1!==e.drop,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter((()=>this.clean())),n.changes(r)},cross:function(){const e=this,t=e.value,n=e._dnames,r=n.map((()=>({}))),i=n.length;function o(e){let t,o,a,s;for(t in e)for(a=e[t].tuple,o=0;o<i;++o)r[o][s=a[n[o]]]=s}o(e._prev),o(t),function o(a,s,u){const l=n[u],c=r[u++];for(const n in c){const r=a?a+"|"+n:n;s[l]=c[n],u<i?o(r,s,u):t[r]||e.cell(r,s)}}("",{},0)},init:function(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(e){const n=yD(NC(e)),i=n.length;let o,a=0;for(;a<i;++a)r[o=n[a]]||(r[o]=1,t.push(o))}this._dims=yD(e.groupby),this._dnames=this._dims.map((e=>{const t=FC(e);return i(e),n.push(t),t})),this.cellkey=e.key?e.key:XT(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.as||[],u=o.length,l={};let c,f,d,h,p,m;for(u!==a.length&&zC("Unmatched number of fields and aggregate ops."),m=0;m<u;++m)c=o[m],f=a[m],null==c&&"count"!==f&&zC("Null aggregate field specified."),h=FC(c),p=QT(f,h,s[m]),n.push(p),"count"!==f?(d=l[h],d||(i(c),d=l[h]=[],d.field=c,this._measures.push(d)),"count"!==f&&(this._countOnly=!1),d.push(t$(f,p))):this._counts.push(p);return this._measures=this._measures.map((e=>s$(e,e.field))),{}},cellkey:XT(),cell:function(e,t){let n=this.value[e];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell:function(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const e=this._measures,t=e.length;n.agg=Array(t);for(let r=0;r<t;++r)n.agg[r]=new e[r](n)}return n.store&&(n.data=new u$),n},newtuple:function(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let t=0;t<i;++t)o[n[t]]=r[t](e);return t?wO(t.tuple,o):vO(o)},clean:function(){const e=this.value;for(const t in e)0===e[t].num&&delete e[t]},add:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].add(r[t].get(e),e)},rem:function(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let t=0,n=r.length;t<n;++t)r[t].rem(r[t].get(e),e)},celltuple:function(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const n=e.agg;for(let e=0,r=n.length;e<r;++e)n[e].set(t)}return t},changes:function(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],i&&!u.num||a.push(u.tuple);for(c=0,f=this._alen;c<f;++c)o.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(0===u.num&&i?a:s).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});function f$(e){XO.call(this,null,e)}function d$(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:e=>o.push(e),remove:e=>a[r(e)]=++s,size:()=>i.length,data:(e,t)=>(s&&(i=i.filter((e=>!a[r(e)])),a={},s=0),t&&e&&i.sort(e),o.length&&(i=e?VD(e,i,o.sort(e)):i.concat(o),o=[]),i)}}function h$(e){XO.call(this,[],e)}function p$(e){MO.call(this,null,m$,e)}function m$(e){return this.value&&!e.modified()?this.value:xD(e.fields,e.orders)}function g$(e){XO.call(this,null,e)}function y$(e){XO.call(this,null,e)}f$.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]},zD(f$,XO,{transform:function(e,t){const n=!1!==e.interval,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],u=a[1];let l;return l=e.modified()?(t=t.reflow(!0)).SOURCE:t.modified(NC(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?e=>{const t=r(e);e[s]=t,e[u]=null==t?null:i+o*(1+(t-i)/o)}:e=>e[s]=r(e)),t.modifies(n?a:s)},_bins:function(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=oT(e),r=n.step;let i,o,a=n.start,s=a+Math.ceil((n.stop-a)/r)*r;null!=(i=e.anchor)&&(o=i-(a+r*Math.floor((i-a)/r)),a+=o,s+=o);const u=function(e){let n=ZC(t(e));return null==n?null:n<a?-1/0:n>s?1/0:(n=Math.max(a,Math.min(n,s-r)),a+r*Math.floor(1e-14+(n-a)/r))};return u.start=a,u.stop=n.stop,u.step=r,this.value=MC(u,NC(t),e.name||"bin_"+FC(t))}}),h$.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},zD(h$,XO,{transform:function(e,t){const n=t.fork(t.ALL),r=d$(gO,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(_O(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}}),zD(p$,MO),g$.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]},zD(g$,XO,{transform:function(e,t){const n=t=>n=>{for(var r,i=function(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase()}return e.match(n)}(s(n),e.case,o)||[],u=0,l=i.length;u<l;++u)a.test(r=i[u])||t(r)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,u=e.as||["text","count"],l=n((e=>i[e]=1+(i[e]||0))),c=n((e=>i[e]-=1));return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck:function(e,t){let n=!1;return!e.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),!e.modified("pattern")&&this._match||(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish:function(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,u,l;for(s in n)u=r[s],l=n[s]||0,!u&&l?(r[s]=u=vO({}),u[i]=s,u[o]=l,a.add.push(u)):0===l?(u&&a.rem.push(u),n[s]=null,r[s]=null):u[o]!==l&&(u[o]=l,a.mod.push(u));return a.modifies(t)}}),y$.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]},zD(y$,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=function(e,t,n,r){for(var i,o,a=[],s={},u=e.length,l=0;l<u;++l)for(s[t]=o=e[l],i=0;i<u;++i)s[n]=e[i],r(s)&&(a.push(vO(s)),(s={})[t]=o);return a}(s,i,o,e.filter||UC)):n.mod=s,n.source=this.value,n.modifies(r)}});const v$={kde:xT,mixture:AT,normal:bT,lognormal:ST,uniform:NT},b$="function";function x$(e,t){const n=e.function;ND(v$,n)||zC("Unknown distribution function: "+n);const r=v$[n]();for(const n in e)"field"===n?r.data((e.from||t()).map(e[n])):"distributions"===n?r[n](e[n].map((e=>x$(e,t)))):typeof r[n]===b$&&r[n](e[n]);return r}function w$(e){XO.call(this,null,e)}const _$=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],k$={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:_$},{name:"weights",type:"number",array:!0}]};function E$(e,t){return e?e.map(((e,n)=>t[n]||FC(e))):null}function S$(e,t,n){const r=[],i=e=>e(u);let o,a,s,u,l,c;if(null==t)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)u=e[a],l=t.map(i),c=o[l],c||(o[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}w$.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:_$.concat(k$)},{name:"as",type:"string",array:!0,default:["value","density"]}]},zD(w$,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=x$(e.distribution,function(e){return()=>e.materialize(e.SOURCE).source}(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";"pdf"!==a&&"cdf"!==a&&zC("Invalid density method: "+a),e.extent||r.data||zC("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],u=GT(a,e.extent||DD(r.data()),i,o).map((e=>{const t={};return t[s[0]]=e[0],t[s[1]]=e[1],vO(t)}));this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function A$(e){XO.call(this,null,e)}A$.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:"bin"}]};function C$(e){MO.call(this,null,D$,e),this.modified(!0)}function D$(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:MC((n=>t(n,e)),NC(t),FC(t))}function M$(e){XO.call(this,[void 0,void 0],e)}function F$(e,t){MO.call(this,e),this.parent=t,this.count=0}function N$(e){XO.call(this,{},e),this._keys=TD();const t=this._targets=[];t.active=0,t.forEach=e=>{for(let n=0,r=t.active;n<r;++n)e(t[n],n,t)}}function O$(e){MO.call(this,null,T$,e)}function T$(e){return this.value&&!e.modified()?this.value:VC(e.name)?yD(e.name).map((e=>PC(e))):PC(e.name,e.as)}function $$(e){XO.call(this,TD(),e)}function z$(e){XO.call(this,[],e)}function R$(e){XO.call(this,[],e)}function P$(e){XO.call(this,null,e)}function L$(e){XO.call(this,[],e)}zD(A$,XO,{transform:function(e,t){if(this.value&&!e.modified()&&!t.changed())return t;const n=t.materialize(t.SOURCE).source,r=S$(t.source,e.groupby,BC),i=e.smooth||!1,o=e.field,a=e.step||((e,t)=>XD(DD(e,t))/30)(n,o),s=_O(((e,t)=>o(e)-o(t))),u=e.as||"bin",l=r.length;let c,f=1/0,d=-1/0,h=0;for(;h<l;++h){const e=r[h].sort(s);c=-1;for(const t of lT(e,a,i,o))t<f&&(f=t),t>d&&(d=t),e[++c][u]=t}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(u)}}),zD(C$,MO),M$.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},zD(M$,XO,{transform:function(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||null==o)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,(e=>{const t=ZC(r(e));null!=t&&(t<o&&(o=t),t>a&&(a=t))})),!Number.isFinite(o)||!Number.isFinite(a)){let e=FC(r);e&&(e=` for field "${e}"`),t.dataflow.warn(`Infinite extent${e}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}}),zD(F$,MO,{connect:function(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add:function(e){this.count+=1,this.value.add.push(e)},rem:function(e){this.count-=1,this.value.rem.push(e)},mod:function(e){this.value.mod.push(e)},init:function(e){this.value.init(e,e.NO_SOURCE)},evaluate:function(){return this.value}}),zD(N$,XO,{activate:function(e){this._targets[this._targets.active++]=e},subflow:function(e,t,n,r){const i=this.value;let o,a,s=ND(i,e)&&i[e];return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new F$(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean:function(){const e=this.value;let t=0;for(const n in e)if(0===e[n].count){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const e=this._targets.filter((e=>e&&e.count>0));this.initTargets(e)}},initTargets:function(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&null!=t[i];++i)t[i]=null;t.active=r},transform:function(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=e=>this.subflow(e,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,(e=>{const t=gO(e),n=o.get(t);void 0!==n&&(o.delete(t),s(n).rem(e))})),t.visit(t.ADD,(e=>{const t=r(e);o.set(gO(e),t),s(t).add(e)})),a||t.modified(r.fields)?t.visit(t.MOD,(e=>{const t=gO(e),n=o.get(t),i=r(e);n===i?s(i).mod(e):(o.set(t,i),s(n).rem(e),s(i).add(e))})):t.changed(t.MOD)&&t.visit(t.MOD,(e=>{s(o.get(gO(e))).mod(e)})),a&&t.visit(t.REFLOW,(e=>{const t=gO(e),n=o.get(t),i=r(e);n!==i&&(o.set(t,i),s(n).rem(e),s(i).add(e))})),t.clean()?n.runAfter((()=>{this.clean(),o.clean()})):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}}),zD(O$,MO),$$.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},zD($$,XO,{transform:function(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,u=e.expr;let l=!0;function c(t){const n=gO(t),i=u(t,e),c=r.get(n);i&&c?(r.delete(n),o.push(t)):i||c?l&&i&&!c&&s.push(t):(r.set(n,1),a.push(t))}return t.visit(t.REM,(e=>{const t=gO(e);r.has(t)?r.delete(t):a.push(e)})),t.visit(t.ADD,(t=>{u(t,e)?o.push(t):r.set(gO(t),1)})),t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}}),z$.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]},zD(z$,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=E$(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{const t=r.map((t=>t(e))),s=t.reduce(((e,t)=>Math.max(e,t.length)),0);let u,l,c,f=0;for(;f<s;++f){for(l=bO(e),u=0;u<a;++u)l[i[u]]=null==(c=t[u][f])?null:c;o&&(l[o]=f),n.add.push(l)}})),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}}),R$.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]},zD(R$,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(FC),o=e.as||["key","value"],a=o[0],s=o[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,(e=>{for(let t,o=0;o<u;++o)t=bO(e),t[a]=i[o],t[s]=r[o](e),n.add.push(t)})),this.value=n.source=n.add,n.modifies(o)}}),P$.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},zD(P$,XO,{transform:function(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,(t=>t[r]=n(t,e)))}}),zD(L$,XO,{transform:function(e,t){const n=t.fork(t.ALL),r=e.generator;let i,o,a,s=this.value,u=e.size-s.length;if(u>0){for(i=[];--u>=0;)i.push(a=vO(r(e))),s.push(a);n.add=n.add.length?n.materialize(n.ADD).add.concat(i):i}else o=s.slice(0,-u),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,s=s.slice(-u);return n.source=this.value=s,n}});const B$={value:"value",median:Qb,mean:function(e,t){let n=0,r=0;if(void 0===t)for(let t of e)null!=t&&(t=+t)>=t&&(++n,r+=t);else{let i=-1;for(let o of e)null!=(o=t(o,++i,e))&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n},min:Hb,max:Wb},I$=[];function j$(e){XO.call(this,[],e)}function U$(e){c$.call(this,e)}function q$(e){XO.call(this,null,e)}function W$(e){MO.call(this,null,H$,e)}function H$(e){return this.value&&!e.modified()?this.value:qD(e.fields,e.flat)}function V$(e){XO.call(this,[],e),this._pending=null}function G$(e,t,n){n.forEach(vO);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Y$(e){XO.call(this,{},e)}function X$(e){MO.call(this,null,Q$,e)}function Q$(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r,i,o=1/0,a=-1/0;for(r=0;r<n;++r)i=t[r],i[0]<o&&(o=i[0]),i[1]>a&&(a=i[1]);return[o,a]}function J$(e){MO.call(this,null,K$,e)}function K$(e){return this.value&&!e.modified()?this.value:e.values.reduce(((e,t)=>e.concat(t)),[])}function Z$(e){XO.call(this,null,e)}function ez(e){c$.call(this,e)}function tz(e){N$.call(this,e)}function nz(e){XO.call(this,null,e)}function rz(e){XO.call(this,null,e)}function iz(e){XO.call(this,null,e)}j$.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]},zD(j$,XO,{transform:function(e,t){var n,r,i,o,a,s,u,l,c,f,d=t.fork(t.ALL),h=function(e){var t,n=e.method||B$.value;if(null!=B$[n])return n===B$.value?(t=void 0!==e.value?e.value:0,()=>t):B$[n];zC("Unrecognized imputation method: "+n)}(e),p=function(e){const t=e.field;return e=>e?t(e):NaN}(e),m=FC(e.field),g=FC(e.key),y=(e.groupby||[]).map(FC),v=function(e,t,n,r){var i,o,a,s,u,l,c,f,d=e=>e(f),h=[],p=r?r.slice():[],m={},g={};for(p.forEach(((e,t)=>m[e]=t+1)),s=0,c=e.length;s<c;++s)l=n(f=e[s]),u=m[l]||(m[l]=p.push(l)),(a=g[o=(i=t?t.map(d):I$)+""])||(a=g[o]=[],h.push(a),a.values=i),a[u-1]=f;return h.domain=p,h}(t.source,e.groupby,e.key,e.keyvals),b=[],x=this.value,w=v.domain.length;for(a=0,l=v.length;a<l;++a)for(i=(n=v[a]).values,r=NaN,u=0;u<w;++u)if(null==n[u]){for(o=v.domain[u],f={_impute:!0},s=0,c=i.length;s<c;++s)f[y[s]]=i[s];f[g]=o,f[m]=Number.isNaN(r)?r=h(n,p):r,b.push(vO(f))}return b.length&&(d.add=d.materialize(d.ADD).add.concat(b)),x.length&&(d.rem=d.materialize(d.REM).rem.concat(x)),this.value=b,d}}),U$.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:e$},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]},zD(U$,c$,{transform:function(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,(e=>n.add(e)))):(i=n.value=n.value||this.init(e),t.visit(t.REM,(e=>n.rem(e))),t.visit(t.ADD,(e=>n.add(e)))),n.changes(),t.visit(t.SOURCE,(e=>{CD(e,i[n.cellkey(e)].tuple)})),t.reflow(r).modifies(this._outputs)},changes:function(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}}),q$.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]},zD(q$,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=S$(r,e.groupby,e.field),o=(e.groupby||[]).map(FC),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;"pdf"!==s&&"cdf"!==s&&zC("Invalid density method: "+s),"shared"===e.resolve&&(c||(c=DD(r,e.field)),f=d=e.steps||d),i.forEach((t=>{const n=xT(t,a)[s],r=e.counts?t.length:1;GT(n,c||DD(t),f,d).forEach((e=>{const n={};for(let e=0;e<o.length;++e)n[o[e]]=t.dims[e];n[u[0]]=e[0],n[u[1]]=e[1]*r,l.push(vO(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}}),zD(W$,MO),zD(V$,XO,{transform:function(e,t){const n=t.dataflow;if(this._pending)return G$(this,t,this._pending);if(function(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}(e))return t.StopPropagation;if(e.values)return G$(this,t,n.parse(e.values,e.format));if(e.async){return{async:n.request(e.url,e.format).then((e=>(this._pending=yD(e.data),e=>e.touch(this))))}}return n.request(e.url,e.format).then((e=>G$(this,t,yD(e.data))))}}),Y$.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]},zD(Y$,XO,{transform:function(e,t){const n=e.fields,r=e.index,i=e.values,o=null==e.default?null:e.default,a=e.modified(),s=n.length;let u,l,c,f=a?t.SOURCE:t.ADD,d=t,h=e.as;return i?(l=i.length,s>1&&!h&&zC('Multi-field lookup requires explicit "as" parameter.'),h&&h.length!==s*l&&zC('The "as" parameter has too few output field names.'),h=h||i.map(FC),u=function(e){for(var t,a,u=0,c=0;u<s;++u)if(null==(a=r.get(n[u](e))))for(t=0;t<l;++t,++c)e[h[c]]=o;else for(t=0;t<l;++t,++c)e[h[c]]=i[t](a)}):(h||zC("Missing output field names."),u=function(e){for(var t,i=0;i<s;++i)t=r.get(n[i](e)),e[h[i]]=null==t?o:t}),a?d=t.reflow(!0):(c=n.some((e=>t.modified(e.fields))),f|=c?t.MOD:0),t.visit(f,u),d.modifies(h)}}),zD(X$,MO),zD(J$,MO),zD(Z$,XO,{transform:function(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),ez.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:e$,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]},zD(ez,c$,{_transform:c$.prototype.transform,transform:function(e,t){return this._transform(function(e,t){const n=e.field,r=e.value,i=("count"===e.op?"__count__":e.op)||"sum",o=NC(n).concat(NC(r)),a=function(e,t,n){const r={},i=[];return n.visit(n.SOURCE,(t=>{const n=e(t);r[n]||(r[n]=1,i.push(n))})),i.sort(wD),t?i.slice(0,t):i}(n,e.limit||0,t);t.changed()&&e.set("__pivot__",null,null,!0);return{key:e.key,groupby:e.groupby,ops:a.map((()=>i)),fields:a.map((e=>function(e,t,n,r){return MC((r=>t(r)===e?n(r):NaN),r,e+"")}(e,n,r,o))),as:a.map((e=>e+"")),modified:e.modified.bind(e)}}(e,t),t)}}),zD(tz,N$,{transform:function(e,t){const n=e.subflow,r=e.field,i=e=>this.subflow(gO(e),n,t,e);return(e.modified("field")||r&&t.modified(NC(r)))&&zC("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,(e=>{const t=i(e);r(e).forEach((e=>t.mod(e)))})),t.visit(t.ADD,(e=>{const t=i(e);r(e).forEach((e=>t.add(vO(e))))})),t.visit(t.REM,(e=>{const t=i(e);r(e).forEach((e=>t.rem(e)))}))):(t.visit(t.MOD,(e=>i(e).mod(e))),t.visit(t.ADD,(e=>i(e).add(e))),t.visit(t.REM,(e=>i(e).rem(e)))),t.clean()&&t.runAfter((()=>this.clean())),t}}),nz.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]},zD(nz,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=E$(e.fields,e.as||[]),o=r?(e,t)=>function(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}(e,t,r,i):xO;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,(e=>{const t=gO(e);n.rem.push(a[t]),a[t]=null})),t.visit(t.ADD,(e=>{const t=o(e,vO({}));a[gO(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{n.mod.push(o(e,a[gO(e)]))})),n}}),zD(rz,XO,{transform:function(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}}),iz.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};function oz(e){XO.call(this,null,e)}function az(e){XO.call(this,[],e),this.count=0}function sz(e){XO.call(this,null,e)}function uz(e){XO.call(this,null,e),this.modified(!0)}function lz(e){XO.call(this,null,e)}zD(iz,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=S$(t.materialize(t.SOURCE).source,e.groupby,e.field),o=(e.groupby||[]).map(FC),a=[],s=e.step||.01,u=e.probs||Kb(s/2,1-1e-14,s),l=u.length;return i.forEach((e=>{const t=nT(e,u);for(let n=0;n<l;++n){const i={};for(let t=0;t<o.length;++t)i[o[t]]=e.dims[t];i[r[0]]=u[n],i[r[1]]=t[n],a.push(vO(i))}})),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}}),zD(oz,XO,{transform:function(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,(e=>{const t=gO(e);n.rem.push(r[t]),r[t]=null})),t.visit(t.ADD,(e=>{const t=bO(e);r[gO(e)]=t,n.add.push(t)})),t.visit(t.MOD,(e=>{const t=r[gO(e)];for(const r in e)t[r]=e[r],n.modifies(r);n.mod.push(t)}))),n}}),az.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]},zD(az,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce(((e,t)=>(e[gO(t)]=1,e)),{});let a=this.value,s=this.count,u=0;function l(e){let t,r;a.length<i?a.push(e):(r=~~((s+1)*aT()),r<a.length&&r>=u&&(t=a[r],o[gO(t)]&&n.rem.push(t),a[r]=e)),++s}if(t.rem.length&&(t.visit(t.REM,(e=>{const t=gO(e);o[t]&&(o[t]=-1,n.rem.push(e)),--s})),a=a.filter((e=>-1!==o[gO(e)]))),(t.rem.length||r)&&a.length<i&&t.source&&(u=s=a.length,t.visit(t.SOURCE,(e=>{o[gO(e)]||l(e)})),u=-1),r&&a.length>i){const e=a.length-i;for(let t=0;t<e;++t)o[gO(a[t])]=-1,n.rem.push(a[t]);a=a.slice(e)}return t.mod.length&&t.visit(t.MOD,(e=>{o[gO(e)]&&n.mod.push(e)})),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=a.filter((e=>!o[gO(e)]))),this.count=s,this.value=n.source=a,n}}),sz.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]},zD(sz,XO,{transform:function(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Kb(e.start,e.stop,e.step||1).map((e=>{const t={};return t[r]=e,vO(t)})),n.add=t.add.concat(this.value),n}}),zD(uz,XO,{transform:function(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});const cz=["unit0","unit1"];function fz(e){XO.call(this,TD(),e)}function dz(e){XO.call(this,null,e)}lz.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:XF,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:cz}]},zD(lz,XO,{transform:function(e,t){const n=e.field,r=!1!==e.interval,i="utc"===e.timezone,o=this._floor(e,t),a=(i?SN:EN)(o.unit).offset,s=e.as||cz,u=s[0],l=s[1],c=o.step;let f=o.start||1/0,d=o.stop||-1/0,h=t.ADD;return(e.modified()||t.modified(NC(n)))&&(h=(t=t.reflow(!0)).SOURCE,f=1/0,d=-1/0),t.visit(h,(e=>{const t=n(e);let i,s;null==t?(e[u]=null,r&&(e[l]=null)):(e[u]=i=s=o(t),r&&(e[l]=s=a(i,c)),i<f&&(f=i),s>d&&(d=s))})),o.start=f,o.stop=d,t.modifies(r?s:u)},_floor:function(e,t){const n="utc"===e.timezone,{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:VN({extent:e.extent||DD(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=JF(r),a=this.value||{},s=(n?wN:vN)(o,i);return s.unit=KC(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}}),zD(fz,XO,{transform:function(e,t){const n=t.dataflow,r=e.field,i=this.value,o=e=>i.set(r(e),e);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,(e=>i.delete(r(e)))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}}),zD(dz,XO,{transform:function(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(_O(e.sort)):t.source).map(e.field))}});const hz={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=hz.rank(),t=e.next;return{init:e.init,next:e=>(t(e)-1)/(e.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){(t=+t)>0||zC("ntile num must be greater than zero.");const n=hz.cume_dist(),r=n.next;return{init:n.init,next:e=>Math.ceil(t*r(e))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return(t=+t)>0||zC("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return null!=r?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=function(e,t,n){for(let r=t.length;n<r;++n){if(null!=e(t[n]))return n}return-1}(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};const pz=Object.keys(hz);function mz(e){const t=yD(e.ops),n=yD(e.fields),r=yD(e.params),i=yD(e.as),o=this.outputs=[],a=this.windows=[],s={},u={},l=[],c=[];let f=!0;function d(e){yD(NC(e)).forEach((e=>s[e]=1))}d(e.sort),t.forEach(((e,t)=>{const s=n[t],h=FC(s),p=QT(e,h,i[t]);if(d(s),o.push(p),ND(hz,e))a.push(function(e,t,n,r){const i=hz[e](t,n);return{init:i.init||IC,update:function(e,t){t[r]=i.next(e)}}}(e,n[t],r[t],p));else{if(null==s&&"count"!==e&&zC("Null aggregate field specified."),"count"===e)return void l.push(p);f=!1;let t=u[h];t||(t=u[h]=[],t.field=s,c.push(t)),t.push(t$(e,p))}})),(l.length||c.length)&&(this.cell=function(e,t,n){e=e.map((e=>s$(e,e.field)));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new u$;return r.add=function(e){if(r.num+=1,!n){s&&s.add(e);for(let t=0;t<i;++t)o[t].add(o[t].get(e),e)}},r.rem=function(e){if(r.num-=1,!n){s&&s.rem(e);for(let t=0;t<i;++t)o[t].rem(o[t].get(e),e)}},r.set=function(e){let i,a;for(s&&s.values(),i=0,a=t.length;i<a;++i)e[t[i]]=r.num;if(!n)for(i=0,a=o.length;i<a;++i)o[i].set(e)},r.init=function(){r.num=0,s&&s.reset();for(let e=0;e<i;++e)o[e].init()},r}(c,l,f)),this.inputs=Object.keys(s)}const gz=mz.prototype;function yz(e){XO.call(this,{},e),this._mlen=0,this._mods=[]}function vz(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),u=s.length,l=o?Lb(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||SD(-1)};t.init();for(let e=0;e<u;++e)bz(c,a,e,u),o&&xz(c,l),t.update(c,s[e])}function bz(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=null==t[0]?0:Math.max(0,n-Math.abs(t[0])),e.i1=null==t[1]?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function xz(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}gz.init=function(){this.windows.forEach((e=>e.init())),this.cell&&this.cell.init()},gz.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)},yz.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:pz.concat(e$)},{name:"params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]},zD(yz,XO,{transform:function(e,t){this.stamp=t.stamp;const n=e.modified(),r=_O(e.sort),i=XT(e.groupby),o=e=>this.group(i(e));let a=this.state;a&&!n||(a=this.state=new mz(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,(e=>o(e).add(e)))):(t.visit(t.REM,(e=>o(e).remove(e))),t.visit(t.ADD,(e=>o(e).add(e))));for(let t=0,n=this._mlen;t<n;++t)vz(this._mods[t],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group:function(e){let t=this.value[e];return t||(t=this.value[e]=d$(gO),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}}),n(ZO,"window",(function(){return yz})),n(ZO,"values",(function(){return dz})),n(ZO,"tupleindex",(function(){return fz})),n(ZO,"timeunit",(function(){return lz})),n(ZO,"subflow",(function(){return F$})),n(ZO,"sieve",(function(){return uz})),n(ZO,"sequence",(function(){return sz})),n(ZO,"sample",(function(){return az})),n(ZO,"relay",(function(){return oz})),n(ZO,"quantile",(function(){return iz})),n(ZO,"proxy",(function(){return rz})),n(ZO,"project",(function(){return nz})),n(ZO,"prefacet",(function(){return tz})),n(ZO,"pivot",(function(){return ez})),n(ZO,"params",(function(){return Z$})),n(ZO,"multivalues",(function(){return J$})),n(ZO,"multiextent",(function(){return X$})),n(ZO,"lookup",(function(){return Y$})),n(ZO,"load",(function(){return V$})),n(ZO,"key",(function(){return W$})),n(ZO,"kde",(function(){return q$})),n(ZO,"joinaggregate",(function(){return U$})),n(ZO,"impute",(function(){return j$})),n(ZO,"generate",(function(){return L$})),n(ZO,"formula",(function(){return P$})),n(ZO,"fold",(function(){return R$})),n(ZO,"flatten",(function(){return z$})),n(ZO,"filter",(function(){return $$})),n(ZO,"field",(function(){return O$})),n(ZO,"facet",(function(){return N$})),n(ZO,"extent",(function(){return M$})),n(ZO,"expression",(function(){return C$})),n(ZO,"dotbin",(function(){return A$})),n(ZO,"density",(function(){return w$})),n(ZO,"cross",(function(){return y$})),n(ZO,"countpattern",(function(){return g$})),n(ZO,"compare",(function(){return p$})),n(ZO,"collect",(function(){return h$})),n(ZO,"bin",(function(){return f$})),n(ZO,"aggregate",(function(){return c$}));var wz={},_z={};const kz=Math.PI,Ez=2*kz,Sz=1e-6,Az=Ez-Sz;function Cz(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Dz(){return new Cz}Cz.prototype=Dz.prototype={constructor:Cz,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,i,o){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(e,t,n,r,i){e=+e,t=+t,n=+n,r=+r,i=+i;var o=this._x1,a=this._y1,s=n-e,u=r-t,l=o-e,c=a-t,f=l*l+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(f>Sz)if(Math.abs(c*s-u*l)>Sz&&i){var d=n-o,h=r-a,p=s*s+u*u,m=d*d+h*h,g=Math.sqrt(p),y=Math.sqrt(f),v=i*Math.tan((kz-Math.acos((p+f-m)/(2*g*y)))/2),b=v/y,x=v/g;Math.abs(b-1)>Sz&&(this._+="L"+(e+b*l)+","+(t+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*d>l*h)+","+(this._x1=e+x*s)+","+(this._y1=t+x*u)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,n,r,i,o){e=+e,t=+t,o=!!o;var a=(n=+n)*Math.cos(r),s=n*Math.sin(r),u=e+a,l=t+s,c=1^o,f=o?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+u+","+l:(Math.abs(this._x1-u)>Sz||Math.abs(this._y1-l)>Sz)&&(this._+="L"+u+","+l),n&&(f<0&&(f=f%Ez+Ez),f>Az?this._+="A"+n+","+n+",0,1,"+c+","+(e-a)+","+(t-s)+"A"+n+","+n+",0,1,"+c+","+(this._x1=u)+","+(this._y1=l):f>Sz&&(this._+="A"+n+","+n+",0,"+ +(f>=kz)+","+c+","+(this._x1=e+n*Math.cos(i))+","+(this._y1=t+n*Math.sin(i))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Mz=function(e){return function(){return e}},Fz=Math.abs,Nz=Math.atan2,Oz=Math.cos,Tz=Math.max,$z=Math.min,zz=Math.sin,Rz=Math.sqrt,Pz=1e-12,Lz=Math.PI,Bz=Lz/2,Iz=2*Lz;function jz(e){return e>1?0:e<-1?Lz:Math.acos(e)}function Uz(e){return e>=1?Bz:e<=-1?-Bz:Math.asin(e)}function qz(e){return e.innerRadius}function Wz(e){return e.outerRadius}function Hz(e){return e.startAngle}function Vz(e){return e.endAngle}function Gz(e){return e&&e.padAngle}function Yz(e,t,n,r,i,o,a,s){var u=n-e,l=r-t,c=a-i,f=s-o,d=f*u-c*l;if(!(d*d<Pz))return[e+(d=(c*(t-o)-f*(e-i))/d)*u,t+d*l]}function Xz(e,t,n,r,i,o,a){var s=e-n,u=t-r,l=(a?o:-o)/Rz(s*s+u*u),c=l*u,f=-l*s,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,x=v*v+b*b,w=i-o,_=d*m-p*h,k=(b<0?-1:1)*Rz(Tz(0,w*w*x-_*_)),E=(_*b-v*k)/x,S=(-_*v-b*k)/x,A=(_*b+v*k)/x,C=(-_*v+b*k)/x,D=E-g,M=S-y,F=A-g,N=C-y;return D*D+M*M>F*F+N*N&&(E=A,S=C),{cx:E,cy:S,x01:-c,y01:-f,x11:E*(i/w-1),y11:S*(i/w-1)}}Array.prototype.slice;var Qz=function(e){return"object"==typeof e&&"length"in e?e:Array.from(e)};function Jz(e){this._context=e}Jz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var Kz=function(e){return new Jz(e)};function Zz(e){return e[0]}function eR(e){return e[1]}var tR=function(e,t){var n=Mz(!0),r=null,i=Kz,o=null;function a(a){var s,u,l,c=(a=Qz(a)).length,f=!1;for(null==r&&(o=i(l=Dz())),s=0;s<=c;++s)!(s<c&&n(u=a[s],s,a))===f&&((f=!f)?o.lineStart():o.lineEnd()),f&&o.point(+e(u,s,a),+t(u,s,a));if(l)return o=null,l+""||null}return e="function"==typeof e?e:void 0===e?Zz:Mz(e),t="function"==typeof t?t:void 0===t?eR:Mz(t),a.x=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),a):e},a.y=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),a):t},a.defined=function(e){return arguments.length?(n="function"==typeof e?e:Mz(!!e),a):n},a.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),a):i},a.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),a):r},a},nR=function(e,t,n){var r=null,i=Mz(!0),o=null,a=Kz,s=null;function u(u){var l,c,f,d,h,p=(u=Qz(u)).length,m=!1,g=new Array(p),y=new Array(p);for(null==o&&(s=a(h=Dz())),l=0;l<=p;++l){if(!(l<p&&i(d=u[l],l,u))===m)if(m=!m)c=l,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=l-1;f>=c;--f)s.point(g[f],y[f]);s.lineEnd(),s.areaEnd()}m&&(g[l]=+e(d,l,u),y[l]=+t(d,l,u),s.point(r?+r(d,l,u):g[l],n?+n(d,l,u):y[l]))}if(h)return s=null,h+""||null}function l(){return tR().defined(i).curve(a).context(o)}return e="function"==typeof e?e:void 0===e?Zz:Mz(+e),t="function"==typeof t?t:Mz(void 0===t?0:+t),n="function"==typeof n?n:void 0===n?eR:Mz(+n),u.x=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),r=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),u):e},u.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Mz(+e),u):r},u.y=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),n=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),u):t},u.y1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:Mz(+e),u):n},u.lineX0=u.lineY0=function(){return l().x(e).y(t)},u.lineY1=function(){return l().x(e).y(n)},u.lineX1=function(){return l().x(r).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:Mz(!!e),u):i},u.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),u):a},u.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),u):o},u},rR={draw:function(e,t){var n=Math.sqrt(t/Lz);e.moveTo(n,0),e.arc(0,0,n,0,Iz)}},iR=(Math.sqrt(1/3),Math.sin(Lz/10)/Math.sin(7*Lz/10)),oR=(Math.sin(Iz/10),Math.cos(Iz/10),Math.sqrt(3),Math.sqrt(3),Math.sqrt(12),function(){});function aR(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function sR(e){this._context=e}sR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:aR(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:aR(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function uR(e){this._context=e}uR.prototype={areaStart:oR,areaEnd:oR,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:aR(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lR(e){this._context=e}lR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:aR(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cR(e,t){this._basis=new sR(e),this._beta=t}cR.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r,i=e[0],o=t[0],a=e[n]-i,s=t[n]-o,u=-1;++u<=n;)r=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+r*a),this._beta*t[u]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var fR=function e(t){function n(e){return 1===t?new sR(e):new cR(e,t)}return n.beta=function(t){return e(+t)},n}(.85);function dR(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function hR(e,t){this._context=e,this._k=(1-t)/6}hR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:dR(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:dR(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var pR=function e(t){function n(e){return new hR(e,t)}return n.tension=function(t){return e(+t)},n}(0);function mR(e,t){this._context=e,this._k=(1-t)/6}mR.prototype={areaStart:oR,areaEnd:oR,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:dR(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var gR=function e(t){function n(e){return new mR(e,t)}return n.tension=function(t){return e(+t)},n}(0);function yR(e,t){this._context=e,this._k=(1-t)/6}yR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:dR(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var vR=function e(t){function n(e){return new yR(e,t)}return n.tension=function(t){return e(+t)},n}(0);function bR(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Pz){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>Pz){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*l+e._x1*e._l23_2a-t*e._l12_2a)/c,a=(a*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function xR(e,t){this._context=e,this._alpha=t}xR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:bR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var wR=function e(t){function n(e){return t?new xR(e,t):new hR(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function _R(e,t){this._context=e,this._alpha=t}_R.prototype={areaStart:oR,areaEnd:oR,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:bR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var kR=function e(t){function n(e){return t?new _R(e,t):new mR(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function ER(e,t){this._context=e,this._alpha=t}ER.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bR(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var SR=function e(t){function n(e){return t?new ER(e,t):new yR(e,0)}return n.alpha=function(t){return e(+t)},n}(.5);function AR(e){this._context=e}AR.prototype={areaStart:oR,areaEnd:oR,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function CR(e){return e<0?-1:1}function DR(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(CR(o)+CR(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function MR(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function FR(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function NR(e){this._context=e}function OR(e){this._context=new TR(e)}function TR(e){this._context=e}function $R(e){this._context=e}function zR(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}NR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:FR(this,this._t0,MR(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,FR(this,MR(this,n=DR(this,e,t)),n);break;default:FR(this,this._t0,n=DR(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(OR.prototype=Object.create(NR.prototype)).point=function(e,t){NR.prototype.point.call(this,t,e)},TR.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},$R.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=zR(e),i=zR(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function RR(e,t){this._context=e,this._t=t}RR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};function PR(e,t){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const LR=()=>"undefined"!=typeof Image?Image:null;function BR(e,t,n){const r=e-t+2*n;return e?r>0?r:1:0}const IR="linear",jR="log",UR="pow",qR="sqrt",WR="symlog",HR="time",VR="utc",GR="sequential",YR="diverging",XR="quantile",QR="quantize",JR="threshold",KR="ordinal",ZR="point",eP="band",tP="bin-ordinal",nP="continuous",rP="discrete",iP="discretizing",oP="interpolating",aP="temporal";function sP(){const e=Xx().unknown(void 0),t=e.domain,n=e.range;let r,i,o=[0,1],a=!1,s=0,u=0,l=.5;function c(){const e=t().length,c=o[1]<o[0],f=o[1-c],d=BR(e,s,u);let h=o[c-0];r=(f-h)/(d||1),a&&(r=Math.floor(r)),h+=(f-h-r*(e-s))*l,i=r*(1-s),a&&(h=Math.round(h),i=Math.round(i));const p=Kb(e).map((e=>h+r*e));return n(c?p.reverse():p)}return delete e.unknown,e.domain=function(e){return arguments.length?(t(e),c()):t()},e.range=function(e){return arguments.length?(o=[+e[0],+e[1]],c()):o.slice()},e.rangeRound=function(e){return o=[+e[0],+e[1]],a=!0,c()},e.bandwidth=function(){return i},e.step=function(){return r},e.round=function(e){return arguments.length?(a=!!e,c()):a},e.padding=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),s=u,c()):s},e.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),c()):s},e.paddingOuter=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),c()):u},e.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),c()):l},e.invertRange=function(e){if(null==e[0]||null==e[1])return;const r=o[1]<o[0],a=r?n().reverse():n(),s=a.length-1;let u,l,c,f=+e[0],d=+e[1];return f!=f||d!=d||(d<f&&(c=f,f=d,d=c),d<a[0]||f>o[1-r])?void 0:(u=Math.max(0,jb(a,f)-1),l=f===d?u:jb(a,d)-1,f-a[u]>i+1e-10&&++u,r&&(c=u,u=s-l,l=s-c),u>l?void 0:t().slice(u,l+1))},e.invert=function(t){const n=e.invertRange([t,t]);return n?n[0]:n},e.copy=function(){return sP().domain(t()).range(o).round(a).paddingInner(s).paddingOuter(u).align(l)},c()}function uP(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return uP(t())},e}var lP=Array.prototype.map;function cP(e){return lP.call(e,ZC)}const fP=Array.prototype.slice;const dP={};function hP(e,t,n){const r=function(){const n=t();return n.invertRange||(n.invertRange=n.invert?function(e){return function(t){let n,r=t[0],i=t[1];return i<r&&(n=r,r=i,i=n),[e.invert(r),e.invert(i)]}}(n):n.invertExtent?function(e){return function(t){const n=e.range();let r,i,o,a,s=t[0],u=t[1],l=-1;for(u<s&&(i=s,s=u,u=i),o=0,a=n.length;o<a;++o)n[o]>=s&&n[o]<=u&&(l<0&&(l=o),r=o);if(!(l<0))return s=e.invertExtent(n[l]),u=e.invertExtent(n[r]),[void 0===s[0]?s[1]:s[0],void 0===u[1]?u[0]:u[1]]}}(n):void 0),n.type=e,n};return r.metadata=tM(yD(n)),r}function pP(e,t,n){return arguments.length>1?(dP[e]=hP(e,t,n),this):mP(e)?dP[e]:void 0}function mP(e){return ND(dP,e)}function gP(e,t){const n=dP[e];return n&&n.metadata[t]}function yP(e){return gP(e,nP)}function vP(e){return gP(e,rP)}function bP(e){return gP(e,iP)}function xP(e){return gP(e,jR)}function wP(e){return gP(e,oP)}function _P(e){return gP(e,XR)}pP("identity",(function e(t){var n;function r(e){return null==e||isNaN(e=+e)?n:e}return r.invert=r,r.domain=r.range=function(e){return arguments.length?(t=Array.from(e,ax),r):t.slice()},r.unknown=function(e){return arguments.length?(n=e,r):n},r.copy=function(){return e(t).unknown(n)},t=arguments.length?Array.from(t,ax):[0,1],Rx(r)})),pP(IR,(function e(){var t=px();return t.copy=function(){return dx(t,e())},mx.apply(t,arguments),Rx(t)}),nP),pP(jR,(function e(){var t=Wx(hx()).domain([1,10]);return t.copy=function(){return dx(t,e()).base(t.base())},mx.apply(t,arguments),t}),[nP,jR]),pP(UR,ew,nP),pP(qR,(function(){return ew.apply(null,arguments).exponent(.5)}),nP),pP(WR,(function e(){var t=Gx(hx());return t.copy=function(){return dx(t,e()).constant(t.constant())},mx.apply(t,arguments)}),nP),pP(HR,(function(){return mx.apply(vk(Uw,qw,Sw,Ew,yw,mw,pw,hw,dw,Xw).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}),[nP,aP]),pP(VR,(function(){return mx.apply(vk(Iw,jw,Lw,Pw,Fw,Dw,Cw,Aw,dw,Jw).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}),[nP,aP]),pP(GR,wk,[nP,oP]),pP("".concat(GR,"-").concat(IR),wk,[nP,oP]),pP("".concat(GR,"-").concat(jR),(function e(){var t=Wx(bk()).domain([1,10]);return t.copy=function(){return xk(t,e()).base(t.base())},gx.apply(t,arguments)}),[nP,oP,jR]),pP("".concat(GR,"-").concat(UR),_k,[nP,oP]),pP("".concat(GR,"-").concat(qR),(function(){return _k.apply(null,arguments).exponent(.5)}),[nP,oP]),pP("".concat(GR,"-").concat(WR),(function e(){var t=Gx(bk());return t.copy=function(){return xk(t,e()).constant(t.constant())},gx.apply(t,arguments)}),[nP,oP]),pP("".concat(YR,"-").concat(IR),(function e(){var t=Rx(kk()(ux));return t.copy=function(){return xk(t,e())},gx.apply(t,arguments)}),[nP,oP]),pP("".concat(YR,"-").concat(jR),(function e(){var t=Wx(kk()).domain([.1,1,10]);return t.copy=function(){return xk(t,e()).base(t.base())},gx.apply(t,arguments)}),[nP,oP,jR]),pP("".concat(YR,"-").concat(UR),Ek,[nP,oP]),pP("".concat(YR,"-").concat(qR),(function(){return Ek.apply(null,arguments).exponent(.5)}),[nP,oP]),pP("".concat(YR,"-").concat(WR),(function e(){var t=Gx(kk());return t.copy=function(){return xk(t,e()).constant(t.constant())},gx.apply(t,arguments)}),[nP,oP]),pP(XR,(function e(){var t,n=[],r=[],i=[];function o(){var e=0,t=Math.max(1,r.length);for(i=new Array(t-1);++e<t;)i[e-1]=Xb(n,e/t);return a}function a(e){return null==e||isNaN(e=+e)?t:r[jb(i,e)]}return a.invertExtent=function(e){var t=r.indexOf(e);return t<0?[NaN,NaN]:[t>0?i[t-1]:n[0],t<i.length?i[t]:n[n.length-1]]},a.domain=function(e){if(!arguments.length)return n.slice();n=[];for(let t of e)null==t||isNaN(t=+t)||n.push(t);return n.sort(Pb),o()},a.range=function(e){return arguments.length?(r=Array.from(e),o()):r.slice()},a.unknown=function(e){return arguments.length?(t=e,a):t},a.quantiles=function(){return i.slice()},a.copy=function(){return e().domain(n).range(r).unknown(t)},mx.apply(a,arguments)}),[iP,XR]),pP(QR,(function e(){var t,n=0,r=1,i=1,o=[.5],a=[0,1];function s(e){return null!=e&&e<=e?a[jb(o,e,0,i)]:t}function u(){var e=-1;for(o=new Array(i);++e<i;)o[e]=((e+1)*r-(e-i)*n)/(i+1);return s}return s.domain=function(e){return arguments.length?([n,r]=e,n=+n,r=+r,u()):[n,r]},s.range=function(e){return arguments.length?(i=(a=Array.from(e)).length-1,u()):a.slice()},s.invertExtent=function(e){var t=a.indexOf(e);return t<0?[NaN,NaN]:t<1?[n,o[0]]:t>=i?[o[i-1],r]:[o[t-1],o[t]]},s.unknown=function(e){return arguments.length?(t=e,s):s},s.thresholds=function(){return o.slice()},s.copy=function(){return e().domain([n,r]).range(a).unknown(t)},mx.apply(Rx(s),arguments)}),iP),pP(JR,(function e(){var t,n=[.5],r=[0,1],i=1;function o(e){return null!=e&&e<=e?r[jb(n,e,0,i)]:t}return o.domain=function(e){return arguments.length?(n=Array.from(e),i=Math.min(n.length,r.length-1),o):n.slice()},o.range=function(e){return arguments.length?(r=Array.from(e),i=Math.min(n.length,r.length-1),o):r.slice()},o.invertExtent=function(e){var t=r.indexOf(e);return[n[t-1],n[t]]},o.unknown=function(e){return arguments.length?(t=e,o):t},o.copy=function(){return e().domain(n).range(r).unknown(t)},mx.apply(o,arguments)}),iP),pP(tP,(function e(){let t=[],n=[];function r(e){return null==e||e!=e?void 0:n[(jb(t,e)-1)%n.length]}return r.domain=function(e){return arguments.length?(t=cP(e),r):t.slice()},r.range=function(e){return arguments.length?(n=fP.call(e),r):n.slice()},r.tickFormat=function(e,n){return zx(t[0],KC(t),null==e?10:e,n)},r.copy=function(){return e().domain(r.domain()).range(r.range())},r}),[rP,iP]),pP(KR,Xx,rP),pP(eP,sP,rP),pP(ZR,(function(){return uP(sP().paddingInner(1))}),rP);const kP=["clamp","base","constant","exponent"];function EP(e,t){const n=t[0],r=KC(t)-n;return function(t){return e(n+t*r)}}function SP(e,t,n){return Dv(DP(t||"rgb",n),e)}function AP(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function CP(e,t,n){const r=n-t;let i,o,a;return r&&Number.isFinite(r)?(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=pP(o)().domain([t,n]).range([0,1]),kP.forEach((t=>e[t]?a[t](e[t]()):0)),a):SD(.5)}function DP(e,t){const n=Mg[function(e){return"interpolate"+e.toLowerCase().split("-").map((e=>e[0].toUpperCase()+e.slice(1))).join("")}(e)];return null!=t&&n&&n.gamma?n.gamma(t):n}function MP(e){const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(6*r,6*++r);return n}function FP(e,t){for(const n in e)OP(n,t(e[n]))}const NP={};function OP(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(NP[e]=t,this):NP[e]}FP({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},MP),FP({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(e=>SP(MP(e))));const TP="symbol",$P=e=>VC(e)?e.map((e=>String(e))):String(e),zP=(e,t)=>e[1]-t[1],RP=(e,t)=>t[1]-e[1];function PP(e,t,n){let r;return ID(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),null!=n&&(t=Math.min(t,Math.floor(XD(e.domain())/n||1)))),GC(t)&&(r=t.step,t=t.interval),UD(t)&&(t=e.type===HR?EN(t):e.type==VR?SN(t):zC("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function LP(e,t,n){let r=e.range(),i=r[0],o=KC(r),a=zP;if(i>o&&(r=o,o=i,i=r,a=RP),i=Math.floor(i),o=Math.ceil(o),t=t.map((t=>[t,e(t)])).filter((e=>i<=e[1]&&e[1]<=o)).sort(a).map((e=>e[0])),n>0&&t.length>1){const e=[t[0],KC(t)];for(;t.length>n&&t.length>=3;)t=t.filter(((e,t)=>!(t%2)));t.length<3&&(t=e)}return t}function BP(e,t){return e.bins?LP(e,e.bins):e.ticks?e.ticks(t):e.domain()}function IP(e,t,n,r,i,o){const a=t.type;let s=$P;if(a===HR||i===HR)s=e.timeFormat(r);else if(a===VR||i===VR)s=e.utcFormat(r);else if(xP(a)){const i=e.formatFloat(r);if(o||t.bins)s=i;else{const e=jP(t,n,!1);s=t=>e(t)?i(t):""}}else if(t.tickFormat){const i=t.domain();s=e.formatSpan(i[0],i[i.length-1],n,r)}else r&&(s=e.format(r));return s}function jP(e,t,n){const r=BP(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=e=>{let t=e/Math.pow(i,Math.round(Math.log(e)/o));return t*i<i-.5&&(t*=i),t<=a};return n?r.filter(s):s}const UP={[XR]:"quantiles",[QR]:"thresholds",[JR]:"domain"},qP={[XR]:"quantiles",[QR]:"domain"};function WP(e,t){return e.bins?function(e){const t=e.slice(0,-1);return t.max=KC(e),t}(e.bins):e.type===jR?jP(e,t,!0):UP[e.type]?function(e){const t=[-1/0].concat(e);return t.max=1/0,t}(e[UP[e.type]]()):BP(e,t)}function HP(e,t,n,r,i,o,a){const s=qP[t.type]&&o!==HR&&o!==VR?function(e,t,n){const r=t[qP[t.type]](),i=r.length;let o,a=i>1?r[1]-r[0]:r[0];for(o=1;o<i;++o)a=Math.min(a,r[o]-r[o-1]);return e.formatSpan(0,a,30,n)}(e,t,i):IP(e,t,n,i,o,a);return r===TP&&(e=>UP[e.type]||e.bins)(t)?VP(s):"discrete"===r?YP(s):XP(s)}const VP=e=>(t,n,r)=>{const i=GP(r[n+1],GP(r.max,1/0)),o=QP(t,e),a=QP(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},GP=(e,t)=>null!=e?e:t,YP=e=>(t,n)=>n?e(t):null,XP=e=>t=>e(t),QP=(e,t)=>Number.isFinite(e)?t(e):null;function JP(e,t,n,r){const i=r||t.type;return UD(n)&&gP(i,aP)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||i!==HR?n||i!==VR?HP(e,t,5,null,n,r,!0):e.utcFormat("%A, %d %B %Y, %X UTC"):e.timeFormat("%A, %d %B %Y, %X")}function KP(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=JP(e,t,n.format,n.formatType);if(bP(t.type)){const e=WP(t).slice(1).map(i),n=e.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(e.join(", "))}if(vP(t.type)){const e=t.domain(),n=e.length,o=n>r?e.slice(0,r-2).map(i).join(", ")+", ending with "+e.slice(-1).map(i):e.map(i).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(o)}{const e=t.domain();return"values from ".concat(i(e[0])," to ").concat(i(KC(e)))}}let ZP=0;const eL="p_";function tL(e){return e&&e.gradient}function nL(e,t,n){const r=e.gradient;let i=e.id,o="radial"===r?eL:"";return i||(i=e.id="gradient_"+ZP++,"radial"===r?(e.x1=rL(e.x1,.5),e.y1=rL(e.y1,.5),e.r1=rL(e.r1,0),e.x2=rL(e.x2,.5),e.y2=rL(e.y2,.5),e.r2=rL(e.r2,.5),o=eL):(e.x1=rL(e.x1,0),e.y1=rL(e.y1,0),e.x2=rL(e.x2,1),e.y2=rL(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function rL(e,t){return null!=e?e:t}function iL(e,t){var n,r=[];return n={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:r,stop:function(e,t){return r.push({offset:e,color:t}),n}}}const oL={basis:{curve:function(e){return new sR(e)}},"basis-closed":{curve:function(e){return new uR(e)}},"basis-open":{curve:function(e){return new lR(e)}},bundle:{curve:fR,tension:"beta",value:.85},cardinal:{curve:pR,tension:"tension",value:0},"cardinal-open":{curve:vR,tension:"tension",value:0},"cardinal-closed":{curve:gR,tension:"tension",value:0},"catmull-rom":{curve:wR,tension:"alpha",value:.5},"catmull-rom-closed":{curve:kR,tension:"alpha",value:.5},"catmull-rom-open":{curve:SR,tension:"alpha",value:.5},linear:{curve:Kz},"linear-closed":{curve:function(e){return new AR(e)}},monotone:{horizontal:function(e){return new OR(e)},vertical:function(e){return new NR(e)}},natural:{curve:function(e){return new $R(e)}},step:{curve:function(e){return new RR(e,.5)}},"step-after":{curve:function(e){return new RR(e,1)}},"step-before":{curve:function(e){return new RR(e,0)}}};function aL(e,t,n){var r=ND(oL,e)&&oL[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}const sL={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},uL=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/];function lL(e){const t=[];let n,r,i,o,a,s,u,l,c,f;const d=e.slice().replace(uL[0],"###$1").split(uL[1]).slice(1);for(u=0,c=d.length;u<c;++u){for(n=d[u],r=n.slice(1).trim().replace(uL[2],"$1###$2").replace(uL[3],"$1###$2").split(uL[4]),a=n.charAt(0),i=[a],l=0,f=r.length;l<f;++l)(o=+r[l])===o&&i.push(o);if(s=sL[a.toLowerCase()],i.length-1>s){const e=i.length;for(l=1,t.push([a].concat(i.slice(l,l+=s))),a="M"===a?"L":"m"===a?"l":a;l<e;l+=s)t.push([a].concat(i.slice(l,l+s)))}else t.push(i)}return t}const cL=Math.PI/180,fL=Math.PI/2,dL=2*Math.PI,hL=Math.sqrt(3)/2;var pL={},mL={},gL=[].join;function yL(e){const t=gL.call(e);if(mL[t])return mL[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],u=e[6],l=e[7];const c=l*a,f=-u*s,d=u*a,h=l*s,p=Math.cos(i),m=Math.sin(i),g=Math.cos(o),y=Math.sin(o),v=.5*(o-i),b=Math.sin(.5*v),x=8/3*b*b/Math.sin(v),w=n+p-x*m,_=r+m+x*p,k=n+g,E=r+y,S=k+x*y,A=E-x*g;return mL[t]=[c*w+f*_,d*w+h*_,c*S+f*A,d*S+h*A,c*k+f*E,d*k+h*E]}const vL=["l",0,0,0,0,0,0,0];function bL(e,t,n){const r=vL[0]=e[0];if("a"===r||"A"===r)vL[1]=t*e[1],vL[2]=n*e[2],vL[3]=e[3],vL[4]=e[4],vL[5]=e[5],vL[6]=t*e[6],vL[7]=n*e[7];else if("h"===r||"H"===r)vL[1]=t*e[1];else if("v"===r||"V"===r)vL[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)vL[i]=(i%2==1?t:n)*e[i];return vL}function xL(e,t,n,r,i,o){var a,s,u,l,c,f=null,d=0,h=0,p=0,m=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),null==o&&(o=i),e.beginPath&&e.beginPath();for(var g=0,y=t.length;g<y;++g){switch(a=t[g],1===i&&1===o||(a=bL(a,i,o)),a[0]){case"l":d+=a[1],h+=a[2],e.lineTo(d+n,h+r);break;case"L":d=a[1],h=a[2],e.lineTo(d+n,h+r);break;case"h":d+=a[1],e.lineTo(d+n,h+r);break;case"H":d=a[1],e.lineTo(d+n,h+r);break;case"v":h+=a[1],e.lineTo(d+n,h+r);break;case"V":h=a[1],e.lineTo(d+n,h+r);break;case"m":d+=a[1],h+=a[2],e.moveTo(d+n,h+r);break;case"M":d=a[1],h=a[2],e.moveTo(d+n,h+r);break;case"c":s=d+a[5],u=h+a[6],p=d+a[3],m=h+a[4],e.bezierCurveTo(d+a[1]+n,h+a[2]+r,p+n,m+r,s+n,u+r),d=s,h=u;break;case"C":d=a[5],h=a[6],p=a[3],m=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,p+n,m+r,d+n,h+r);break;case"s":s=d+a[3],u=h+a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,d+a[1]+n,h+a[2]+r,s+n,u+r),p=d+a[1],m=h+a[2],d=s,h=u;break;case"S":s=a[3],u=a[4],p=2*d-p,m=2*h-m,e.bezierCurveTo(p+n,m+r,a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"q":s=d+a[3],u=h+a[4],p=d+a[1],m=h+a[2],e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"Q":s=a[3],u=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,s+n,u+r),d=s,h=u,p=a[1],m=a[2];break;case"t":s=d+a[1],u=h+a[2],null===f[0].match(/[QqTt]/)?(p=d,m=h):"t"===f[0]?(p=2*d-l,m=2*h-c):"q"===f[0]&&(p=2*d-p,m=2*h-m),l=p,c=m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),h=u,p=(d=s)+a[1],m=h+a[2];break;case"T":s=a[1],u=a[2],p=2*d-p,m=2*h-m,e.quadraticCurveTo(p+n,m+r,s+n,u+r),d=s,h=u;break;case"a":wL(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+d+n,a[7]+h+r]),d+=a[6],h+=a[7];break;case"A":wL(e,d+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),d=a[6],h=a[7];break;case"z":case"Z":e.closePath()}f=a}}function wL(e,t,n,r){const i=function(e,t,n,r,i,o,a,s,u){const l=gL.call(arguments);if(pL[l])return pL[l];const c=a*cL,f=Math.sin(c),d=Math.cos(c),h=d*(s-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(s-e)*.5;let m=h*h/((n=Math.abs(n))*n)+p*p/((r=Math.abs(r))*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,x=g*s+y*u,w=v*s+b*u,_=g*e+y*t,k=v*e+b*t;let E=1/((_-x)*(_-x)+(k-w)*(k-w))-.25;E<0&&(E=0);let S=Math.sqrt(E);o==i&&(S=-S);const A=.5*(x+_)-S*(k-w),C=.5*(w+k)+S*(_-x),D=Math.atan2(w-C,x-A);let M=Math.atan2(k-C,_-A)-D;M<0&&1===o?M+=dL:M>0&&0===o&&(M-=dL);const F=Math.ceil(Math.abs(M/(fL+.001))),N=[];for(let e=0;e<F;++e){const t=D+e*M/F,i=D+(e+1)*M/F;N[e]=[A,C,t,i,n,r,f,d]}return pL[l]=N}(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let t=0;t<i.length;++t){const n=yL(i[t]);e.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const _L=.5773502691896257,kL={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,dL)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n,i=r-n*_L,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n,i=r-n*_L;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=hL*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function EL(e){return ND(kL,e)?kL[e]:function(e){if(!ND(SL,e)){const t=lL(e);SL[e]={draw:function(e,n){xL(e,t,0,0,Math.sqrt(n)/2)}}}return SL[e]}(e)}var SL={};const AL=.448084975506;function CL(e){return e.x}function DL(e){return e.y}function ML(e){return e.width}function FL(e){return e.height}function NL(e){return"function"==typeof e?e:()=>+e}function OL(e,t,n){return Math.max(t,Math.min(e,n))}function TL(){var e=CL,t=DL,n=ML,r=FL,i=NL(0),o=i,a=i,s=i,u=null;function l(l,c,f){var d,h=null!=c?c:+e.call(this,l),p=null!=f?f:+t.call(this,l),m=+n.call(this,l),g=+r.call(this,l),y=Math.min(m,g)/2,v=OL(+i.call(this,l),0,y),b=OL(+o.call(this,l),0,y),x=OL(+a.call(this,l),0,y),w=OL(+s.call(this,l),0,y);if(u||(u=d=Dz()),v<=0&&b<=0&&x<=0&&w<=0)u.rect(h,p,m,g);else{var _=h+m,k=p+g;u.moveTo(h+v,p),u.lineTo(_-b,p),u.bezierCurveTo(_-AL*b,p,_,p+AL*b,_,p+b),u.lineTo(_,k-w),u.bezierCurveTo(_,k-AL*w,_-AL*w,k,_-w,k),u.lineTo(h+x,k),u.bezierCurveTo(h+AL*x,k,h,k-AL*x,h,k-x),u.lineTo(h,p+v),u.bezierCurveTo(h,p+AL*v,h+AL*v,p,h+v,p),u.closePath()}if(d)return u=null,d+""||null}return l.x=function(t){return arguments.length?(e=NL(t),l):e},l.y=function(e){return arguments.length?(t=NL(e),l):t},l.width=function(e){return arguments.length?(n=NL(e),l):n},l.height=function(e){return arguments.length?(r=NL(e),l):r},l.cornerRadius=function(e,t,n,r){return arguments.length?(i=NL(e),o=null!=t?NL(t):i,s=null!=n?NL(n):i,a=null!=r?NL(r):o,l):i},l.context=function(e){return arguments.length?(u=null==e?null:e,l):u},l}function $L(){var e,t,n,r,i,o,a,s,u=null;function l(e,t,n){const r=n/2;if(i){var l=a-t,c=e-o;if(l||c){var f=Math.sqrt(l*l+c*c),d=(l/=f)*s,h=(c/=f)*s,p=Math.atan2(c,l);u.moveTo(o-d,a-h),u.lineTo(e-l*r,t-c*r),u.arc(e,t,r,p-Math.PI,p),u.lineTo(o+d,a+h),u.arc(o,a,s,p,p+Math.PI)}else u.arc(e,t,r,0,dL);u.closePath()}else i=1;o=e,a=t,s=r}function c(o){var a,s,c,f=o.length,d=!1;for(null==u&&(u=c=Dz()),a=0;a<=f;++a)!(a<f&&r(s=o[a],a,o))===d&&(d=!d)&&(i=0),d&&l(+e(s,a,o),+t(s,a,o),+n(s,a,o));if(c)return u=null,c+""||null}return c.x=function(t){return arguments.length?(e=t,c):e},c.y=function(e){return arguments.length?(t=e,c):t},c.size=function(e){return arguments.length?(n=e,c):n},c.defined=function(e){return arguments.length?(r=e,c):r},c.context=function(e){return arguments.length?(u=null==e?null:e,c):u},c}function zL(e,t){return null!=e?e:t}const RL=e=>e.x||0,PL=e=>e.y||0,LL=e=>!(!1===e.defined),BL=function(){var e=qz,t=Wz,n=Mz(0),r=null,i=Hz,o=Vz,a=Gz,s=null;function u(){var u,l,c=+e.apply(this,arguments),f=+t.apply(this,arguments),d=i.apply(this,arguments)-Bz,h=o.apply(this,arguments)-Bz,p=Fz(h-d),m=h>d;if(s||(s=u=Dz()),f<c&&(l=f,f=c,c=l),f>Pz)if(p>Iz-Pz)s.moveTo(f*Oz(d),f*zz(d)),s.arc(0,0,f,d,h,!m),c>Pz&&(s.moveTo(c*Oz(h),c*zz(h)),s.arc(0,0,c,h,d,m));else{var g,y,v=d,b=h,x=d,w=h,_=p,k=p,E=a.apply(this,arguments)/2,S=E>Pz&&(r?+r.apply(this,arguments):Rz(c*c+f*f)),A=$z(Fz(f-c)/2,+n.apply(this,arguments)),C=A,D=A;if(S>Pz){var M=Uz(S/c*zz(E)),F=Uz(S/f*zz(E));(_-=2*M)>Pz?(x+=M*=m?1:-1,w-=M):(_=0,x=w=(d+h)/2),(k-=2*F)>Pz?(v+=F*=m?1:-1,b-=F):(k=0,v=b=(d+h)/2)}var N=f*Oz(v),O=f*zz(v),T=c*Oz(w),$=c*zz(w);if(A>Pz){var z,R=f*Oz(b),P=f*zz(b),L=c*Oz(x),B=c*zz(x);if(p<Lz&&(z=Yz(N,O,L,B,R,P,T,$))){var I=N-z[0],j=O-z[1],U=R-z[0],q=P-z[1],W=1/zz(jz((I*U+j*q)/(Rz(I*I+j*j)*Rz(U*U+q*q)))/2),H=Rz(z[0]*z[0]+z[1]*z[1]);C=$z(A,(c-H)/(W-1)),D=$z(A,(f-H)/(W+1))}}k>Pz?D>Pz?(g=Xz(L,B,N,O,f,D,m),y=Xz(R,P,T,$,f,D,m),s.moveTo(g.cx+g.x01,g.cy+g.y01),D<A?s.arc(g.cx,g.cy,D,Nz(g.y01,g.x01),Nz(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,D,Nz(g.y01,g.x01),Nz(g.y11,g.x11),!m),s.arc(0,0,f,Nz(g.cy+g.y11,g.cx+g.x11),Nz(y.cy+y.y11,y.cx+y.x11),!m),s.arc(y.cx,y.cy,D,Nz(y.y11,y.x11),Nz(y.y01,y.x01),!m))):(s.moveTo(N,O),s.arc(0,0,f,v,b,!m)):s.moveTo(N,O),c>Pz&&_>Pz?C>Pz?(g=Xz(T,$,R,P,c,-C,m),y=Xz(N,O,L,B,c,-C,m),s.lineTo(g.cx+g.x01,g.cy+g.y01),C<A?s.arc(g.cx,g.cy,C,Nz(g.y01,g.x01),Nz(y.y01,y.x01),!m):(s.arc(g.cx,g.cy,C,Nz(g.y01,g.x01),Nz(g.y11,g.x11),!m),s.arc(0,0,c,Nz(g.cy+g.y11,g.cx+g.x11),Nz(y.cy+y.y11,y.cx+y.x11),m),s.arc(y.cx,y.cy,C,Nz(y.y11,y.x11),Nz(y.y01,y.x01),!m))):s.arc(0,0,c,w,x,m):s.lineTo(T,$)}else s.moveTo(0,0);if(s.closePath(),u)return s=null,u+""||null}return u.centroid=function(){var n=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Lz/2;return[Oz(r)*n,zz(r)*n]},u.innerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Mz(+t),u):e},u.outerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),u):t},u.cornerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Mz(+e),u):n},u.padRadius=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Mz(+e),u):r},u.startAngle=function(e){return arguments.length?(i="function"==typeof e?e:Mz(+e),u):i},u.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Mz(+e),u):o},u.padAngle=function(e){return arguments.length?(a="function"==typeof e?e:Mz(+e),u):a},u.context=function(e){return arguments.length?(s=null==e?null:e,u):s},u}().startAngle((e=>e.startAngle||0)).endAngle((e=>e.endAngle||0)).padAngle((e=>e.padAngle||0)).innerRadius((e=>e.innerRadius||0)).outerRadius((e=>e.outerRadius||0)).cornerRadius((e=>e.cornerRadius||0)),IL=nR().x(RL).y1(PL).y0((e=>(e.y||0)+(e.height||0))).defined(LL),jL=nR().y(PL).x1(RL).x0((e=>(e.x||0)+(e.width||0))).defined(LL),UL=tR().x(RL).y(PL).defined(LL),qL=TL().x(RL).y(PL).width((e=>e.width||0)).height((e=>e.height||0)).cornerRadius((e=>zL(e.cornerRadiusTopLeft,e.cornerRadius)||0),(e=>zL(e.cornerRadiusTopRight,e.cornerRadius)||0),(e=>zL(e.cornerRadiusBottomRight,e.cornerRadius)||0),(e=>zL(e.cornerRadiusBottomLeft,e.cornerRadius)||0)),WL=function(e,t){var n=null;function r(){var r;if(n||(n=r=Dz()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),r)return n=null,r+""||null}return e="function"==typeof e?e:Mz(e||rR),t="function"==typeof t?t:Mz(void 0===t?64:+t),r.type=function(t){return arguments.length?(e="function"==typeof t?t:Mz(t),r):e},r.size=function(e){return arguments.length?(t="function"==typeof e?e:Mz(+e),r):t},r.context=function(e){return arguments.length?(n=null==e?null:e,r):n},r}().type((e=>EL(e.shape||"circle"))).size((e=>zL(e.size,64))),HL=$L().x(RL).y(PL).defined(LL).size((e=>e.size||1));function VL(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function GL(e,t,n,r){return qL.context(e)(t,n,r)}var YL=1;function XL(){YL=1}function QL(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+YL++),a=i.clipping[o]||(i.clipping[o]={id:o});return bD(r)?a.path=r(null):VL(n)?a.path=GL(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function JL(e){this.clear(),e&&this.union(e)}function KL(e){this.mark=e,this.bounds=this.bounds||new JL}function ZL(e){KL.call(this,e),this.items=this.items||[]}function eB(e){this._pending=0,this._loader=e||cO()}function tB(e){e._pending+=1}function nB(e){e._pending-=1}function rB(e,t,n){if(t.stroke&&0!==t.opacity&&0!==t.strokeOpacity){const r=null!=t.strokeWidth?+t.strokeWidth:1;e.expand(r+(n?function(e,t){return e.strokeJoin&&"miter"!==e.strokeJoin?0:t}(t,r):0))}return e}JL.prototype={clone:function(){return new JL(this)},clear:function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty:function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals:function(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set:function(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add:function(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand:function(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round:function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale:function(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate:function(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate:function(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints:function(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),u=Math.sin(e),l=t-t*s+n*u,c=n-t*u-n*s;return[s*r-u*i+l,u*r+s*i+c,s*r-u*a+l,u*r+s*a+c,s*o-u*i+l,u*o+s*i+c,s*o-u*a+l,u*o+s*a+c]},union:function(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect:function(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses:function(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith:function(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects:function(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains:function(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width:function(){return this.x2-this.x1},height:function(){return this.y2-this.y1}},zD(ZL,KL),eB.prototype={pending:function(){return this._pending},sanitizeURL:function(e){const t=this;return tB(t),t._loader.sanitize(e,{context:"href"}).then((e=>(nB(t),e))).catch((()=>(nB(t),null)))},loadImage:function(e){const t=this,n=LR();return tB(t),t._loader.sanitize(e,{context:"image"}).then((e=>{const r=e.href;if(!r||!n)throw{url:r};const i=new n,o=ND(e,"crossOrigin")?e.crossOrigin:"anonymous";return null!=o&&(i.crossOrigin=o),i.onload=()=>nB(t),i.onerror=()=>nB(t),i.src=r,i})).catch((e=>(nB(t),{complete:!1,width:0,height:0,src:e&&e.url||""})))},ready:function(){const e=this;return new Promise((t=>{!function n(r){e.pending()?setTimeout((()=>{n(!0)}),10):t(r)}(!1)}))}};const iB=dL-1e-8;let oB,aB,sB,uB,lB,cB,fB,dB;const hB=(e,t)=>oB.add(e,t),pB=(e,t)=>hB(aB=e,sB=t),mB=e=>hB(e,oB.y1),gB=e=>hB(oB.x1,e),yB=(e,t)=>lB*e+fB*t,vB=(e,t)=>cB*e+dB*t,bB=(e,t)=>hB(yB(e,t),vB(e,t)),xB=(e,t)=>pB(yB(e,t),vB(e,t));function wB(e,t){return oB=e,t?(uB=t*cL,lB=dB=Math.cos(uB),cB=Math.sin(uB),fB=-cB):(lB=dB=1,uB=cB=fB=0),_B}const _B={beginPath:function(){},closePath:function(){},moveTo:xB,lineTo:xB,rect:function(e,t,n,r){uB?(bB(e+n,t),bB(e+n,t+r),bB(e,t+r),xB(e,t)):(hB(e+n,t+r),pB(e,t))},quadraticCurveTo:function(e,t,n,r){const i=yB(e,t),o=vB(e,t),a=yB(n,r),s=vB(n,r);kB(aB,i,a,mB),kB(sB,o,s,gB),pB(a,s)},bezierCurveTo:function(e,t,n,r,i,o){const a=yB(e,t),s=vB(e,t),u=yB(n,r),l=vB(n,r),c=yB(i,o),f=vB(i,o);EB(aB,a,u,c,mB),EB(sB,s,l,f,gB),pB(c,f)},arc:function(e,t,n,r,i,o){if(r+=uB,i+=uB,aB=n*Math.cos(i)+e,sB=n*Math.sin(i)+t,Math.abs(i-r)>iB)hB(e-n,t-n),hB(e+n,t+n);else{const a=r=>hB(n*Math.cos(r)+e,n*Math.sin(r)+t);let s,u;if(a(r),a(i),i!==r)if((r%=dL)<0&&(r+=dL),(i%=dL)<0&&(i+=dL),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=dL,s=r-r%fL,u=0;u<4&&s>i;++u,s-=fL)a(s);else for(s=r-r%fL+fL,u=0;u<4&&s<i;++u,s+=fL)a(s)}}};function kB(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function EB(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let u,l=0,c=0;Math.abs(o)>1e-14?(u=a*a+s*o,u>=0&&(u=Math.sqrt(u),l=(-a+u)/o,c=(-a-u)/o)):l=.5*s/a,0<l&&l<1&&i(SB(l,e,t,n,r)),0<c&&c<1&&i(SB(c,e,t,n,r))}function SB(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var AB=(AB=PR(1,1))?AB.getContext("2d"):null;const CB=new JL;function DB(e){return function(t,n){if(!AB)return!0;e(AB,t),CB.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=CB;for(let e=i;e<=a;++e)for(let t=r;t<=o;++t)if(AB.isPointInPath(t,e))return!0;return!1}}function MB(e,t){return t.contains(e.x||0,e.y||0)}function FB(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(CB.set(n,r,n+i,r+o))}function NB(e,t){const n=e.x||0,r=e.y||0;return OB(t,n,r,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r)}function OB(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:u}=e,l=r-t,c=i-n;let f,d,h,p,m=0,g=1;for(p=0;p<4;++p){if(0===p&&(f=-l,d=-(o-t)),1===p&&(f=l,d=s-t),2===p&&(f=-c,d=-(a-n)),3===p&&(f=c,d=u-n),Math.abs(f)<1e-10&&d<0)return!1;if(h=d/f,f<0){if(h>g)return!1;h>m&&(m=h)}else if(f>0){if(h<m)return!1;h<g&&(g=h)}}return!0}function TB(e,t){e.globalCompositeOperation=t.blend||"source-over"}function $B(e,t){return null==e?t:e}function zB(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function RB(e,t,n){return tL(n)?function(e,t,n){const r=n.width(),i=n.height();let o;if("radial"===t.gradient)o=e.createRadialGradient(n.x1+$B(t.x1,.5)*r,n.y1+$B(t.y1,.5)*i,Math.max(r,i)*$B(t.r1,0),n.x1+$B(t.x2,.5)*r,n.y1+$B(t.y2,.5)*i,Math.max(r,i)*$B(t.r2,.5));else{const a=$B(t.x1,0),s=$B(t.y1,0),u=$B(t.x2,1),l=$B(t.y2,0);if(a!==u&&s!==l&&r!==i){const n=PR(Math.ceil(r),Math.ceil(i)),o=n.getContext("2d");return o.scale(r,i),o.fillStyle=zB(o.createLinearGradient(a,s,u,l),t.stops),o.fillRect(0,0,r,i),e.createPattern(n,"no-repeat")}o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+u*r,n.y1+l*i)}return zB(o,t.stops)}(e,n,t.bounds):n}function PB(e,t,n){return(n*=null==t.fillOpacity?1:t.fillOpacity)>0&&(e.globalAlpha=n,e.fillStyle=RB(e,t,t.fill),!0)}var LB=[];function BB(e,t,n){var r=null!=(r=t.strokeWidth)?r:1;return!(r<=0)&&((n*=null==t.strokeOpacity?1:t.strokeOpacity)>0&&(e.globalAlpha=n,e.strokeStyle=RB(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||LB),e.lineDashOffset=t.strokeDashOffset||0),!0))}function IB(e,t){return e.zindex-t.zindex||e.index-t.index}function jB(e){if(!e.zdirty)return e.zitems;var t,n,r,i=e.items,o=[];for(n=0,r=i.length;n<r;++n)(t=i[n]).index=n,t.zindex&&o.push(t);return e.zdirty=!1,e.zitems=o.sort(IB)}function UB(e,t){var n,r,i=e.items;if(!i||!i.length)return;const o=jB(e);if(o&&o.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||t(i[n]);i=o}for(n=0,r=i.length;n<r;++n)t(i[n])}function qB(e,t){var n,r,i=e.items;if(!i||!i.length)return null;const o=jB(e);for(o&&o.length&&(i=o),r=i.length;--r>=0;)if(n=t(i[r]))return n;if(i===o)for(r=(i=e.items).length;--r>=0;)if(!i[r].zindex&&(n=t(i[r])))return n;return null}function WB(e){return function(t,n,r){UB(n,(n=>{r&&!r.intersects(n.bounds)||HB(e,t,n,n)}))}}function HB(e,t,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(e(t,r)||(TB(t,n),n.fill&&PB(t,n,i)&&t.fill(),n.stroke&&BB(t,n,i)&&t.stroke()))}function VB(e){return e=e||UC,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,qB(n,(n=>{const s=n.bounds;if((!s||s.contains(o,a))&&s)return e(t,n,r,i,o,a)?n:void 0}))}}function GB(e,t){return function(n,r,i,o){var a,s,u=Array.isArray(r)?r[0]:r,l=null==t?u.fill:t,c=u.stroke&&n.isPointInStroke;return c&&(a=u.strokeWidth,s=u.strokeCap,n.lineWidth=null!=a?a:1,n.lineCap=null!=s?s:"butt"),!e(n,r)&&(l&&n.isPointInPath(i,o)||c&&n.isPointInStroke(i,o))}}function YB(e){return VB(GB(e))}function XB(e,t){return"translate("+e+","+t+")"}function QB(e){return"rotate("+e+")"}function JB(e){return XB(e.x||0,e.y||0)}function KB(e,t,n){function r(e,n){var r=n.x||0,i=n.y||0,o=n.angle||0;e.translate(r,i),o&&e.rotate(o*=cL),e.beginPath(),t(e,n),o&&e.rotate(-o),e.translate(-r,-i)}return{type:e,tag:"path",nested:!1,attr:function(e,n){e("transform",function(e){return XB(e.x||0,e.y||0)+(e.angle?" "+QB(e.angle):"")}(n)),e("d",t(null,n))},bound:function(e,n){return t(wB(e,n.angle),n),rB(e,n).translate(n.x||0,n.y||0)},draw:WB(r),pick:YB(r),isect:n||DB(r)}}var ZB=KB("arc",(function(e,t){return BL.context(e)(t)}));function eI(e,t,n){function r(e,n){e.beginPath(),t(e,n)}const i=GB(r);return{type:e,tag:"path",nested:!0,attr:function(e,n){var r=n.mark.items;r.length&&e("d",t(null,r))},bound:function(e,n){var r=n.items;return 0===r.length?e:(t(wB(e),r),rB(e,r[0]))},draw:(o=r,function(e,t,n){!t.items.length||n&&!n.intersects(t.bounds)||HB(o,e,t.items[0],t.items)}),pick:function(e,t,n,r,o,a){var s=t.items,u=t.bounds;return!s||!s.length||u&&!u.contains(o,a)?null:(n*=e.pixelRatio,r*=e.pixelRatio,i(e,s,n,r)?s[0]:null)},isect:MB,tip:n};var o}var tI=eI("area",(function(e,t){const n=t[0],r=n.interpolate||"linear";return("horizontal"===n.orient?jL:IL).curve(aL(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i="horizontal"===e[0].orient?t[1]:t[0],o="horizontal"===e[0].orient?"y":"x",a=e.length,s=1/0;--a>=0;)!1!==e[a].defined&&(r=Math.abs(e[a][o]-i))<s&&(s=r,n=e[a]);return n}));function nI(e,t){e.beginPath(),VL(t)?GL(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function rI(e){const t=$B(e.strokeWidth,1);return null!=e.strokeOffset?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function iI(e,t){const n=rI(t);e("d",GL(null,t,n,n))}function oI(e,t,n,r){const i=rI(t);e.beginPath(),GL(e,t,(n||0)+i,(r||0)+i)}const aI=GB(oI),sI=GB(oI,!1),uI=GB(oI,!0);var lI={type:"group",tag:"g",nested:!1,attr:function(e,t){e("transform",JB(t))},bound:function(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let t=0;t<r;++t)e.union(n[t].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),rB(e,t),e.translate(t.x||0,t.y||0)},draw:function(e,t,n){UB(t,(t=>{const r=t.x||0,i=t.y||0,o=t.strokeForeground,a=null==t.opacity?1:t.opacity;(t.stroke||t.fill)&&a&&(oI(e,t,r,i),TB(e,t),t.fill&&PB(e,t,a)&&e.fill(),t.stroke&&!o&&BB(e,t,a)&&e.stroke()),e.save(),e.translate(r,i),t.clip&&nI(e,t),n&&n.translate(-r,-i),UB(t,(t=>{this.draw(e,t,n)})),n&&n.translate(r,i),e.restore(),o&&t.stroke&&a&&(oI(e,t,r,i),TB(e,t),BB(e,t,a)&&e.stroke())}))},pick:function(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return qB(t,(u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,o))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||o<f||o>p))return;if(e.save(),e.translate(c,f),c=i-c,f=o-f,m&&VL(u)&&!uI(e,u,a,s))return e.restore(),null;const g=u.strokeForeground,y=!1!==t.interactive;return y&&g&&u.stroke&&sI(e,u,a,s)?(e.restore(),u):(l=qB(u,(e=>function(e,t,n){return(!1!==e.interactive||"group"===e.marktype)&&e.bounds&&e.bounds.contains(t,n)}(e,c,f)?this.pick(e,n,r,c,f):null)),!l&&y&&(u.fill||!g&&u.stroke)&&aI(e,u,a,s)&&(l=u),e.restore(),l||null)}))},isect:FB,content:function(e,t,n){e("clip-path",t.clip?QL(n,t,t):null)},background:function(e,t){e("class","background"),e("aria-hidden",!0),iI(e,t)},foreground:function(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?iI(e,t):e("d","")}},cI={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function fI(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then((t=>{e.image=t,e.image.url=e.url}))),n}function dI(e,t){return null!=e.width?e.width:t&&t.width?!1!==e.aspect&&e.height?e.height*t.width/t.height:t.width:0}function hI(e,t){return null!=e.height?e.height:t&&t.height?!1!==e.aspect&&e.width?e.width*t.height/t.width:t.height:0}function pI(e,t){return"center"===e?t/2:"right"===e?t:0}function mI(e,t){return"middle"===e?t/2:"bottom"===e?t:0}var gI={type:"image",tag:"image",nested:!1,attr:function(e,t,n){const r=fI(t,n),i=dI(t,r),o=hI(t,r),a=(t.x||0)-pI(t.align,i),s=(t.y||0)-mI(t.baseline,o);e("href",!r.src&&r.toDataURL?r.toDataURL():r.src||"",cI["xmlns:xlink"],"xlink:href"),e("transform",XB(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",!1===t.aspect?"none":"xMidYMid")},bound:function(e,t){const n=t.image,r=dI(t,n),i=hI(t,n),o=(t.x||0)-pI(t.align,r),a=(t.y||0)-mI(t.baseline,i);return e.set(o,a,o+r,a+i)},draw:function(e,t,n){UB(t,(t=>{if(n&&!n.intersects(t.bounds))return;const r=fI(t,this);let i=dI(t,r),o=hI(t,r);if(0===i||0===o)return;let a,s,u,l,c=(t.x||0)-pI(t.align,i),f=(t.y||0)-mI(t.baseline,o);!1!==t.aspect&&(s=r.width/r.height,u=t.width/t.height,s==s&&u==u&&s!==u&&(u<s?(l=i/s,f+=(o-l)/2,o=l):(l=o*s,c+=(i-l)/2,i=l))),(r.complete||r.toDataURL)&&(TB(e,t),e.globalAlpha=null!=(a=t.opacity)?a:1,e.imageSmoothingEnabled=!1!==t.smooth,e.drawImage(r,c,f,i,o))}))},pick:VB(),isect:UC,get:fI,xOffset:pI,yOffset:mI},yI=eI("line",(function(e,t){const n=t[0],r=n.interpolate||"linear";return UL.curve(aL(r,n.orient,n.tension)).context(e)(t)}),(function(e,t){for(var n,r,i=Math.pow(e[0].strokeWidth||1,2),o=e.length;--o>=0;)if(!1!==e[o].defined&&(n=e[o].x-t[0])*n+(r=e[o].y-t[1])*r<i)return e[o];return null}));function vI(e,t){var n=t.path;if(null==n)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*cL,u=t.pathCache;u&&u.path===n||((t.pathCache=u=lL(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),xL(e,u,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):xL(e,u,r,i,o,a)}var bI={type:"path",tag:"path",nested:!1,attr:function(e,t){var n=t.scaleX||1,r=t.scaleY||1;1===n&&1===r||e("vector-effect","non-scaling-stroke"),e("transform",function(e){return XB(e.x||0,e.y||0)+(e.angle?" "+QB(e.angle):"")+(e.scaleX||e.scaleY?" "+(t=e.scaleX||1,n=e.scaleY||1,"scale("+t+","+n+")"):"");var t,n}(t)),e("d",t.path)},bound:function(e,t){return vI(wB(e,t.angle),t)?e.set(0,0,0,0):rB(e,t,!0)},draw:WB(vI),pick:YB(vI),isect:DB(vI)};function xI(e,t){e.beginPath(),GL(e,t)}var wI={type:"rect",tag:"path",nested:!1,attr:function(e,t){e("d",GL(null,t))},bound:function(e,t){var n,r;return rB(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)},draw:WB(xI),pick:YB(xI),isect:FB};function _I(e,t,n){var r,i,o,a;return!(!t.stroke||!BB(e,t,n))&&(r=t.x||0,i=t.y||0,o=null!=t.x2?t.x2:r,a=null!=t.y2?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0)}var kI={type:"rule",tag:"line",nested:!1,attr:function(e,t){e("transform",JB(t)),e("x2",null!=t.x2?t.x2-(t.x||0):0),e("y2",null!=t.y2?t.y2-(t.y||0):0)},bound:function(e,t){var n,r;return rB(e.set(n=t.x||0,r=t.y||0,null!=t.x2?t.x2:n,null!=t.y2?t.y2:r),t)},draw:function(e,t,n){UB(t,(t=>{if(!n||n.intersects(t.bounds)){var r=null==t.opacity?1:t.opacity;r&&_I(e,t,r)&&(TB(e,t),e.stroke())}}))},pick:VB((function(e,t,n,r){return!!e.isPointInStroke&&(_I(e,t,1)&&e.isPointInStroke(n,r))})),isect:NB},EI=KB("shape",(function(e,t){return(t.mark.shape||t.shape).context(e)(t)})),SI=KB("symbol",(function(e,t){return WL.context(e)(t)}),MB);const AI=HD();var CI={height:TI,measureWidth:NI,estimateWidth:MI,width:MI,canvas:DI};function DI(e){CI.width=e&&AB?NI:MI}function MI(e,t){return FI(PI(e,t),TI(e))}function FI(e,t){return~~(.8*e.length*t)}function NI(e,t){return TI(e)<=0||!(t=PI(e,t))?0:OI(t,BI(e))}function OI(e,t){const n=`(${t}) ${e}`;let r=AI.get(n);return void 0===r&&(AB.font=t,r=AB.measureText(e).width,AI.set(n,r)),r}function TI(e){return null!=e.fontSize?+e.fontSize||0:11}function $I(e){return null!=e.lineHeight?e.lineHeight:TI(e)+2}function zI(e){return t=e.lineBreak&&e.text&&!VC(e.text)?e.text.split(e.lineBreak):e.text,VC(t)?t.length>1?t:t[0]:t;var t}function RI(e){const t=zI(e);return(VC(t)?t.length-1:0)*$I(e)}function PI(e,t){const n=null==t?"":(t+"").trim();return e.limit>0&&n.length?function(e,t){var n=+e.limit,r=function(e){if(CI.width===NI){const t=BI(e);return e=>OI(e,t)}{const t=TI(e);return e=>FI(e,t)}}(e);if(r(t)<n)return t;var i,o=e.ellipsis||"…",a="rtl"===e.dir,s=0,u=t.length;if(n-=r(o),a){for(;s<u;)i=s+u>>>1,r(t.slice(i))>n?s=i+1:u=i;return o+t.slice(s)}for(;s<u;)i=1+(s+u>>>1),r(t.slice(0,i))<n?s=i:u=i-1;return t.slice(0,s)+o}(e,n):n}function LI(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function BI(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+TI(e)+"px "+LI(e,t)}function II(e){var t=e.baseline,n=TI(e);return Math.round("top"===t?.79*n:"middle"===t?.3*n:"bottom"===t?-.21*n:"line-top"===t?.29*n+.5*$I(e):"line-bottom"===t?.29*n-.5*$I(e):0)}DI(!0);const jI={left:"start",center:"middle",right:"end"},UI=new JL;function qI(e){var t,n=e.x||0,r=e.y||0,i=e.radius||0;return i&&(t=(e.theta||0)-fL,n+=i*Math.cos(t),r+=i*Math.sin(t)),UI.x1=n,UI.y1=r,UI}function WI(e,t,n){var r,i=CI.height(t),o=t.align,a=qI(t),s=a.x1,u=a.y1,l=t.dx||0,c=(t.dy||0)+II(t)-Math.round(.8*i),f=zI(t);if(VC(f)?(i+=$I(t)*(f.length-1),r=f.reduce(((e,n)=>Math.max(e,CI.width(t,n))),0)):r=CI.width(t,f),"center"===o?l-=r/2:"right"===o&&(l-=r),e.set(l+=s,c+=u,l+r,c+i),t.angle&&!n)e.rotate(t.angle*cL,s,u);else if(2===n)return e.rotatedPoints(t.angle*cL,s,u);return e}var HI={arc:ZB,area:tI,group:lI,image:gI,line:yI,path:bI,rect:wI,rule:kI,shape:EI,symbol:SI,text:{type:"text",tag:"text",nested:!1,attr:function(e,t){var n,r=t.dx||0,i=(t.dy||0)+II(t),o=qI(t),a=o.x1,s=o.y1,u=t.angle||0;e("text-anchor",jI[t.align]||"start"),u?(n=XB(a,s)+" "+QB(u),(r||i)&&(n+=" "+XB(r,i))):n=XB(a+r,s+i),e("transform",n)},bound:WI,draw:function(e,t,n){UB(t,(t=>{var r,i,o,a,s,u,l,c=null==t.opacity?1:t.opacity;if(!(n&&!n.intersects(t.bounds)||0===c||t.fontSize<=0||null==t.text||0===t.text.length)){if(e.font=BI(t),e.textAlign=t.align||"left",i=(r=qI(t)).x1,o=r.y1,t.angle&&(e.save(),e.translate(i,o),e.rotate(t.angle*cL),i=o=0),i+=t.dx||0,o+=(t.dy||0)+II(t),u=zI(t),TB(e,t),VC(u))for(s=$I(t),a=0;a<u.length;++a)l=PI(t,u[a]),t.fill&&PB(e,t,c)&&e.fillText(l,i,o),t.stroke&&BB(e,t,c)&&e.strokeText(l,i,o),o+=s;else l=PI(t,u),t.fill&&PB(e,t,c)&&e.fillText(l,i,o),t.stroke&&BB(e,t,c)&&e.strokeText(l,i,o);t.angle&&e.restore()}}))},pick:VB((function(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=qI(t),s=a.x1,u=a.y1,l=WI(UI,t,1),c=-t.angle*cL,f=Math.cos(c),d=Math.sin(c),h=f*i-d*o+(s-f*s+d*u),p=d*i+f*o+(u-d*s-f*u);return l.contains(h,p)})),isect:function(e,t){const n=WI(UI,e,2);return OB(t,n[0],n[1],n[2],n[3])||OB(t,n[0],n[1],n[4],n[5])||OB(t,n[4],n[5],n[6],n[7])||OB(t,n[2],n[3],n[6],n[7])}},trail:eI("trail",(function(e,t){return HL.context(e)(t)}),(function(e,t){for(var n,r,i=e.length;--i>=0;)if(!1!==e[i].defined&&(n=e[i].x-t[0])*n+(r=e[i].y-t[1])*r<(n=e[i].size||1)*n)return e[i];return null}))};function VI(e,t,n){var r=HI[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new JL),e,n)}var GI={mark:null};function YI(e,t,n){var r,i,o,a,s=HI[e.marktype],u=s.bound,l=e.items,c=l&&l.length;if(s.nested)return c?o=l[0]:(GI.mark=e,o=GI),a=VI(o,u,n),t=t&&t.union(a)||a;if(t=t||e.bounds&&e.bounds.clear()||new JL,c)for(r=0,i=l.length;r<i;++r)t.union(VI(l[r],u,n));return e.bounds=t}const XI=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function QI(e,t){return JSON.stringify(e,XI,t)}function JI(e){return KI("string"==typeof e?JSON.parse(e):e)}function KI(e){var t,n,r,i=e.marktype,o=e.items;if(o)for(n=0,r=o.length;n<r;++n)t=i?"mark":"group",o[n][t]=e,o[n].zindex&&(o[n][t].zdirty=!0),"group"===(i||t)&&KI(o[n]);return i&&YI(e),e}function ZI(e){arguments.length?this.root=JI(e):(this.root=ej({marktype:"group",name:"root",role:"frame"}),this.root.items=[new ZL(this.root)])}function ej(e,t){const n={bounds:new JL,clip:!!e.clip,group:t,interactive:!1!==e.interactive,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return null!=e.aria&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function tj(e,t,n){return!e&&"undefined"!=typeof document&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function nj(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function rj(e,t,n,r){var i,o=e.childNodes[t];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(i=o||null,o=tj(e.ownerDocument,n,r),e.insertBefore(o,i)),o}function ij(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function oj(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function aj(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function sj(e,t){this._active=null,this._handlers={},this._loader=e||cO(),this._tooltip=t||uj}function uj(e,t,n,r){e.element().setAttribute("title",r||"")}function lj(e){this._el=null,this._bgcolor=null,this._loader=new eB(e)}ZI.prototype={toJSON:function(e){return QI(this.root,e||0)},mark:function(e,t,n){const r=ej(e,t=t||this.root.items[0]);return t.items[n]=r,r.zindex&&(r.group.zdirty=!0),r}},sj.prototype={initialize:function(e,t,n){return this._el=e,this._obj=n||null,this.origin(t)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},origin:function(e){return arguments.length?(this._origin=e||[0,0],this):this._origin.slice()},scene:function(e){return arguments.length?(this._scene=e,this):this._scene},on:function(){},off:function(){},_handlerIndex:function(e,t,n){for(let r=e?e.length:0;--r>=0;)if(e[r].type===t&&(!n||e[r].handler===n))return r;return-1},handlers:function(e){const t=this._handlers,n=[];if(e)n.push(...t[this.eventName(e)]);else for(const e in t)n.push(...t[e]);return n},eventName:function(e){const t=e.indexOf(".");return t<0?e:e.slice(0,t)},handleHref:function(e,t,n){this._loader.sanitize(n,{context:"href"}).then((t=>{const n=new MouseEvent(e.type,e),r=tj(null,"a");for(const e in t)r.setAttribute(e,t[e]);r.dispatchEvent(n)})).catch((()=>{}))},handleTooltip:function(e,t,n){if(t&&null!=t.tooltip){t=function(e,t,n,r){var i,o,a=e&&e.mark;if(a&&(i=HI[a.marktype]).tip){for((o=aj(t,n))[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=i.tip(a.items,o)}return e}(t,e,this.canvas(),this._origin);const r=n&&t&&t.tooltip||null;this._tooltip.call(this._obj,this,e,t,r)}},getItemBoundingClientRect:function(e){const t=this.canvas();if(!t)return;const n=t.getBoundingClientRect(),r=this._origin,i=e.bounds,o=i.width(),a=i.height();let s=i.x1+r[0]+n.left,u=i.y1+r[1]+n.top;for(;e.mark&&(e=e.mark.group);)s+=e.x||0,u+=e.y||0;return{x:s,y:u,width:o,height:a,left:s,top:u,right:s+o,bottom:u+a}}},lj.prototype={initialize:function(e,t,n,r,i){return this._el=e,this.resize(t,n,r,i)},element:function(){return this._el},canvas:function(){return this._el&&this._el.firstChild},background:function(e){return 0===arguments.length?this._bgcolor:(this._bgcolor=e,this)},resize:function(e,t,n,r){return this._width=e,this._height=t,this._origin=n||[0,0],this._scale=r||1,this},dirty:function(){},render:function(e){const t=this;return t._call=function(){t._render(e)},t._call(),t._call=null,t},_render:function(){},renderAsync:function(e){const t=this.render(e);return this._ready?this._ready.then((()=>t)):Promise.resolve(t)},_load:function(e,t){var n=this,r=n._loader[e](t);if(!n._ready){const e=n._call;n._ready=n._loader.ready().then((t=>{t&&e(),n._ready=null}))}return r},sanitizeURL:function(e){return this._load("sanitizeURL",e)},loadImage:function(e){return this._load("loadImage",e)}};const cj="dragenter",fj="dragleave",dj="dragover",hj="mousedown",pj="mousemove",mj="mouseout",gj="mouseover",yj="click",vj="mousewheel",bj="touchstart",xj="touchmove",wj="touchend",_j=pj,kj=mj,Ej=yj;function Sj(e,t){sj.call(this,e,t),this._down=null,this._touch=null,this._first=!0,this._events={}}function Aj(e,t){(e=>e===bj||e===xj||e===wj?[bj,xj,wj]:[e])(t).forEach((t=>function(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?n=>e[t](n):n=>e.fire(t,n)))}(e,t)))}function Cj(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i||(i&&i.exit||this.fire(n,r),this._active=o,this.fire(t,r)),this.fire(e,r)}}function Dj(e){return function(t){this.fire(e,t),this._active=null}}zD(Sj,sj,{initialize:function(e,t,n){return this._canvas=e&&nj(e,"canvas"),[yj,hj,pj,mj,fj].forEach((e=>Aj(this,e))),sj.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._canvas},context:function(){return this._canvas.getContext("2d")},events:["keydown","keypress","keyup",cj,fj,dj,hj,"mouseup",pj,mj,gj,yj,"dblclick","wheel",vj,bj,xj,wj],DOMMouseScroll:function(e){this.fire(vj,e)},mousemove:Cj(pj,gj,mj),dragover:Cj(dj,cj,fj),mouseout:Dj(mj),dragleave:Dj(fj),mousedown:function(e){this._down=this._active,this.fire(hj,e)},click:function(e){this._down===this._active&&(this.fire(yj,e),this._down=null)},touchstart:function(e){this._touch=this.pickEvent(e.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(bj,e,!0)},touchmove:function(e){this.fire(xj,e,!0)},touchend:function(e){this.fire(wj,e,!0),this._touch=null},fire:function(e,t,n){const r=n?this._touch:this._active,i=this._handlers[e];if(t.vegaType=e,e===Ej&&r&&r.href?this.handleHref(t,r,r.href):e!==_j&&e!==kj||this.handleTooltip(t,r,e!==kj),i)for(let e=0,n=i.length;e<n;++e)i[e].handler.call(this._obj,t,r)},on:function(e,t){const n=this.eventName(e),r=this._handlers;return this._handlerIndex(r[n],e,t)<0&&(Aj(this,e),(r[n]||(r[n]=[])).push({type:e,handler:t})),this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&r.splice(i,1),this},pickEvent:function(e){const t=aj(e,this._canvas),n=this._origin;return this.pick(this._scene,t[0],t[1],t[0]-n[0],t[1]-n[1])},pick:function(e,t,n,r,i){const o=this.context();return HI[e.marktype].pick.call(this,o,e,t,n,r,i)}});var Mj="undefined"!=typeof window&&window.devicePixelRatio||1;function Fj(e){lj.call(this,e),this._options={},this._redraw=!1,this._dirty=new JL,this._tempb=new JL}const Nj=lj.prototype;function Oj(e,t){sj.call(this,e,t);const n=this;n._hrefHandler=Tj(n,((e,t)=>{t&&t.href&&n.handleHref(e,t,t.href)})),n._tooltipHandler=Tj(n,((e,t)=>{n.handleTooltip(e,t,e.type!==kj)}))}zD(Fj,lj,{initialize:function(e,t,n,r,i,o){return this._options=o||{},this._canvas=this._options.externalContext?null:PR(1,1,this._options.type),e&&this._canvas&&(ij(e,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Nj.initialize.call(this,e,t,n,r,i)},resize:function(e,t,n,r){if(Nj.resize.call(this,e,t,n,r),this._canvas)!function(e,t,n,r,i,o){const a="undefined"!=typeof HTMLElement&&e instanceof HTMLElement&&null!=e.parentNode,s=e.getContext("2d"),u=a?Mj:i;e.width=t*u,e.height=n*u;for(const e in o)s[e]=o[e];a&&1!==u&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=u,s.setTransform(u,0,0,u,u*r[0],u*r[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const e=this._options.externalContext;e||zC("CanvasRenderer is missing a valid canvas or context"),e.scale(this._scale,this._scale),e.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas:function(){return this._canvas},context:function(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty:function(e){const t=this._tempb.clear().union(e.bounds);let n=e.mark.group;for(;n;)t.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(t)},_render:function(e){const t=this.context(),n=this._origin,r=this._width,i=this._height,o=this._dirty,a=(s=n,u=r,l=i,(new JL).set(0,0,u,l).translate(-s[0],-s[1]));var s,u,l;t.save();const c=this._redraw||o.empty()?(this._redraw=!1,a.expand(1)):function(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-n[0]%1,-n[1]%1),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}(t,a.intersect(o),n);return this.clear(-n[0],-n[1],r,i),this.draw(t,e,c),t.restore(),o.clear(),this},draw:function(e,t,n){const r=HI[t.marktype];t.clip&&function(e,t){var n=t.clip;e.save(),bD(n)?(e.beginPath(),n(e),e.clip()):nI(e,t.group)}(e,t),r.draw.call(this,e,t,n),t.clip&&e.restore()},clear:function(e,t,n,r){const i=this._options,o=this.context();"pdf"===i.type||i.externalContext||o.clearRect(e,t,n,r),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(e,t,n,r))}});const Tj=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)};zD(Oj,sj,{initialize:function(e,t,n){let r=this._svg;return r&&(r.removeEventListener(Ej,this._hrefHandler),r.removeEventListener(_j,this._tooltipHandler),r.removeEventListener(kj,this._tooltipHandler)),this._svg=r=e&&nj(e,"svg"),r&&(r.addEventListener(Ej,this._hrefHandler),r.addEventListener(_j,this._tooltipHandler),r.addEventListener(kj,this._tooltipHandler)),sj.prototype.initialize.call(this,e,t,n)},canvas:function(){return this._svg},on:function(e,t){const n=this.eventName(e),r=this._handlers;if(this._handlerIndex(r[n],e,t)<0){const i={type:e,handler:t,listener:Tj(this,t)};(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener)}return this},off:function(e,t){const n=this.eventName(e),r=this._handlers[n],i=this._handlerIndex(r,e,t);return i>=0&&(this._svg&&this._svg.removeEventListener(n,r[i].listener),r.splice(i,1)),this}});const $j="aria-hidden",zj="aria-label",Rj="role",Pj="aria-roledescription",Lj="graphics-object",Bj="graphics-symbol",Ij=(e,t,n)=>({[Rj]:e,[Pj]:t,[zj]:n||void 0}),jj=tM(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Uj={axis:{desc:"axis",caption:function(e){const t=e.datum,n=e.orient,r=t.title?Gj(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return("left"===n||"right"===n?"Y":"X")+"-axis"+(r?` titled '${r}'`:"")+` for a ${vP(s)?"discrete":s} scale`+` with ${KP(a,o,e)}`}},legend:{desc:"legend",caption:function(e){const t=e.datum,n=t.title?Gj(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,u=a.dataflow.locale();return l=r,(l.length?l[0].toUpperCase()+l.slice(1):l)+(n?` titled '${n}'`:"")+` for ${function(e){return(e=e.map((e=>e+("fill"===e||"stroke"===e?" color":"")))).length<2?e[0]:e.slice(0,-1).join(", ")+" and "+KC(e)}(o)}`+` with ${KP(u,s,e)}`;var l}},"title-text":{desc:"title",caption:e=>`Title text '${Vj(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Vj(e)}'`}},qj={ariaRole:Rj,ariaRoleDescription:Pj,description:zj};function Wj(e,t){const n=!1===t.aria;if(e($j,n||void 0),n||null==t.description)for(const t in qj)e(qj[t],void 0);else{const n=t.mark.marktype;e(zj,t.description),e(Rj,t.ariaRole||("group"===n?Lj:Bj)),e(Pj,t.ariaRoleDescription||`${n} mark`)}}function Hj(e){return!1===e.aria?{[$j]:!0}:jj[e.role]?null:Uj[e.role]?function(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Ij(t.role||Bj,t.desc,n.description||r(n))}catch(e){return null}}(e,Uj[e.role]):function(e){const t=e.marktype,n="group"===t||"text"===t||e.items.some((e=>null!=e.description&&!1!==e.aria));return Ij(n?Lj:Bj,`${t} mark container`,e.description)}(e)}function Vj(e){return yD(e.text).join(" ")}function Gj(e){try{return yD(KC(e.items).items[0].text).join(" ")}catch(e){return null}}const Yj=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function Xj(){let e="",t="",n="";const r=[],i=()=>t=n="",o=(e,n)=>{var r;return null!=n&&(t+=` ${e}="${r=n,Yj(r).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;")}"`),a},a={open:function(s,...u){(o=>{t&&(e+=`${t}>${n}`,i()),r.push(o)})(s),t="<"+s;for(const e of u)for(const t in e)o(t,e[t]);return a},close:function(){const o=r.pop();return e+=t?t+(n?`>${n}</${o}>`:"/>"):`</${o}>`,i(),a},attr:o,text:e=>(n+=Yj(e),a),toString:()=>e};return a}const Qj=e=>Jj(Xj(),e)+"";function Jj(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let t=0;t<r;++t)e.attr(n[t].name,n[t].value)}if(t.hasChildNodes()){const n=t.childNodes,r=n.length;for(let t=0;t<r;t++){const r=n[t];3===r.nodeType?e.text(r.nodeValue):Jj(e,r)}}return e.close()}const Kj={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Zj={fill:"none","stroke-miterlimit":10},eU="http://www.w3.org/2000/xmlns/",tU=cI.xmlns;function nU(e){lj.call(this,e),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const rU=lj.prototype;function iU(e,t){for(;e&&e.dirty!==t;e=e.mark.group){if(e.dirty=t,!e.mark||e.mark.dirty===t)return;e.mark.dirty=t}}function oU(e,t,n){let r,i,o;if("radial"===t.gradient){let r=rj(e,n++,"pattern",tU);hU(r,{id:eL+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),r=rj(r,0,"rect",tU),hU(r,{width:1,height:1,fill:`url(${mU()}#${t.id})`}),hU(e=rj(e,n++,"radialGradient",tU),{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else hU(e=rj(e,n++,"linearGradient",tU),{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=rj(e,r,"stop",tU),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return ij(e,r),n}function aU(e,t,n){let r;return(e=rj(e,n,"clipPath",tU)).setAttribute("id",t.id),t.path?(r=rj(e,0,"path",tU),r.setAttribute("d",t.path)):(r=rj(e,0,"rect",tU),hU(r,{x:0,y:0,width:t.width,height:t.height})),ij(e,1),n+1}function sU(e,t,n,r,i){let o,a=e._svg;if(!a&&(o=t.ownerDocument,a=tj(o,r,tU),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},"g"===r))){const t=tj(o,"path",tU);a.appendChild(t),t.__data__=e;const n=tj(o,"g",tU);a.appendChild(n),n.__data__=e;const r=tj(o,"path",tU);a.appendChild(r),r.__data__=e,r.__values__={fill:"default"}}return(a.ownerSVGElement!==i||function(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}zD(nU,lj,{initialize:function(e,t,n,r,i){return this._defs={},this._clearDefs(),e&&(this._svg=rj(e,0,"svg",tU),this._svg.setAttributeNS(eU,"xmlns",tU),this._svg.setAttributeNS(eU,"xmlns:xlink",cI["xmlns:xlink"]),this._svg.setAttribute("version",cI.version),this._svg.setAttribute("class","marks"),ij(e,1),this._root=rj(this._svg,0,"g",tU),hU(this._root,Zj),ij(this._svg,1)),this.background(this._bgcolor),rU.initialize.call(this,e,t,n,r,i)},background:function(e){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",e),rU.background.apply(this,arguments)},resize:function(e,t,n,r){return rU.resize.call(this,e,t,n,r),this._svg&&(hU(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this},canvas:function(){return this._svg},svg:function(){const e=this._svg,t=this._bgcolor;if(!e)return null;let n;t&&(e.removeAttribute("style"),n=rj(e,0,"rect",tU),hU(n,{width:this._width,height:this._height,fill:t}));const r=Qj(e);return t&&(e.removeChild(n),this._svg.style.setProperty("background-color",t)),r},_render:function(e){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,e),ij(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty:function(e){e.dirty!==this._dirtyID&&(e.dirty=this._dirtyID,this._dirty.push(e))},isDirty:function(e){return this._dirtyAll||!e._svg||e.dirty===this._dirtyID},_dirtyCheck:function(){this._dirtyAll=!0;const e=this._dirty;if(!e.length||!this._dirtyID)return!0;const t=++this._dirtyID;let n,r,i,o,a,s,u;for(a=0,s=e.length;a<s;++a)n=e[a],r=n.mark,r.marktype!==i&&(i=r.marktype,o=HI[i]),r.zdirty&&r.dirty!==t&&(this._dirtyAll=!1,iU(n,t),r.items.forEach((e=>{e.dirty=t}))),r.zdirty||(n.exit?(o.nested&&r.items.length?(u=r.items[0],u._svg&&this._update(o,u._svg,u)):n._svg&&(u=n._svg.parentNode,u&&u.removeChild(n._svg)),n._svg=null):(n=o.nested?r.items[0]:n,n._update!==t&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,iU(n,t)),n._update=t)));return!this._dirtyAll},mark:function(e,t,n){if(!this.isDirty(t))return t._svg;const r=this._svg,i=HI[t.marktype],o=!1===t.interactive?"none":null,a="g"===i.tag;let s=null,u=0;const l=sU(t,e,n,"g",r);l.setAttribute("class",oj(t));const c=Hj(t);for(const e in c)pU(l,e,c[e]);a||pU(l,"pointer-events",o),pU(l,"clip-path",t.clip?QL(this,t,t.group):null);const f=e=>{const t=this.isDirty(e),n=sU(e,l,s,i.tag,r);t&&(this._update(i,n,e),a&&function(e,t,n){t=t.lastChild.previousSibling;let r,i=0;UB(n,(n=>{r=e.mark(t,n,r),++i})),ij(t,1+i)}(this,n,e)),s=n,++u};return i.nested?t.items.length&&f(t.items[0]):UB(t,f),ij(l,u),l},_update:function(e,t,n){uU=t,lU=t.__values__,Wj(fU,n),e.attr(fU,n,this);const r=cU[e.type];r&&r.call(this,e,t,n),uU&&this.style(uU,n)},style:function(e,t){if(null!=t)for(const n in Kj){let r="font"===n?LI(t):t[n];if(r===lU[n])continue;const i=Kj[n];null==r?e.removeAttribute(i):(tL(r)&&(r=nL(r,this._defs.gradient,mU())),e.setAttribute(i,r+"")),lU[n]=r}},defs:function(){const e=this._svg,t=this._defs;let n=t.el,r=0;for(const i in t.gradient)n||(t.el=n=rj(e,1,"defs",tU)),r=oU(n,t.gradient[i],r);for(const i in t.clipping)n||(t.el=n=rj(e,1,"defs",tU)),r=aU(n,t.clipping[i],r);n&&(0===r?(e.removeChild(n),t.el=null):ij(n,r))},_clearDefs:function(){const e=this._defs;e.gradient={},e.clipping={}}});let uU=null,lU=null;const cU={group:function(e,t,n){const r=uU=t.childNodes[2];lU=r.__values__,e.foreground(fU,n,this),lU=t.__values__,uU=t.childNodes[1],e.content(fU,n,this);const i=uU=t.childNodes[0];e.background(fU,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==lU.events&&(pU(r,"pointer-events",o),pU(i,"pointer-events",o),lU.events=o),n.strokeForeground&&n.stroke){const e=n.fill;pU(r,"display",null),this.style(i,n),pU(i,"stroke",null),e&&(n.fill=null),lU=r.__values__,this.style(r,n),e&&(n.fill=e),uU=null}else pU(r,"display","none")},image:function(e,t,n){!1===n.smooth?(dU(t,"image-rendering","optimizeSpeed"),dU(t,"image-rendering","pixelated")):dU(t,"image-rendering",null)},text:function(e,t,n){const r=zI(n);let i,o,a,s;VC(r)?(o=r.map((e=>PI(n,e))),i=o.join("\n"),i!==lU.text&&(ij(t,0),a=t.ownerDocument,s=$I(n),o.forEach(((e,r)=>{const i=tj(a,"tspan",tU);i.__data__=n,i.textContent=e,r&&(i.setAttribute("x",0),i.setAttribute("dy",s)),t.appendChild(i)})),lU.text=i)):(o=PI(n,r),o!==lU.text&&(t.textContent=o,lU.text=o)),pU(t,"font-family",LI(n)),pU(t,"font-size",TI(n)+"px"),pU(t,"font-style",n.fontStyle),pU(t,"font-variant",n.fontVariant),pU(t,"font-weight",n.fontWeight)}};function fU(e,t,n){t!==lU[e]&&(n?function(e,t,n,r){null!=n?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}(uU,e,t,n):pU(uU,e,t),lU[e]=t)}function dU(e,t,n){n!==lU[t]&&(null==n?e.style.removeProperty(t):e.style.setProperty(t,n+""),lU[t]=n)}function hU(e,t){for(const n in t)pU(e,n,t[n])}function pU(e,t,n){null!=n?e.setAttribute(t,n):e.removeAttribute(t)}function mU(){let e;return"undefined"==typeof window?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}function gU(e){lj.call(this,e),this._text=null,this._defs={gradient:{},clipping:{}}}zD(gU,lj,{svg:function(){return this._text},_render:function(e){const t=Xj();t.open("svg",CD({},cI,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&t.open("rect",{width:this._width,height:this._height,fill:n}).close(),t.open("g",Zj,{transform:"translate("+this._origin+")"}),this.mark(t,e),t.close(),this.defs(t),this._text=t.close()+"",this},mark:function(e,t){const n=HI[t.marktype],r=n.tag,i=[Wj,n.attr];e.open("g",{class:oj(t),"clip-path":t.clip?QL(this,t,t.group):null},Hj(t),{"pointer-events":"g"!==r&&!1===t.interactive?"none":null});const o=o=>{const a=this.href(o);if(a&&e.open("a",a),e.open(r,this.attr(t,o,i,"g"!==r?r:null)),"text"===r){const t=zI(o);if(VC(t)){const n={x:0,dy:$I(o)};for(let r=0;r<t.length;++r)e.open("tspan",r?n:null).text(PI(o,t[r])).close()}else e.text(PI(o,t))}else if("g"===r){const r=o.strokeForeground,i=o.fill,a=o.stroke;r&&a&&(o.stroke=null),e.open("path",this.attr(t,o,n.background,"bgrect")).close(),e.open("g",this.attr(t,o,n.content)),UB(o,(t=>this.mark(e,t))),e.close(),r&&a?(i&&(o.fill=null),o.stroke=a,e.open("path",this.attr(t,o,n.foreground,"bgrect")).close(),i&&(o.fill=i)):e.open("path",this.attr(t,o,n.foreground,"bgfore")).close()}e.close(),a&&e.close()};return n.nested?t.items&&t.items.length&&o(t.items[0]):UB(t,o),e.close()},href:function(e){const t=e.href;let n;if(t){if(n=this._hrefs&&this._hrefs[t])return n;this.sanitizeURL(t).then((e=>{e["xlink:href"]=e.href,e.href=null,(this._hrefs||(this._hrefs={}))[t]=e}))}return null},attr:function(e,t,n,r){const i={},o=(e,t,n,r)=>{i[r||e]=t};return Array.isArray(n)?n.forEach((e=>e(o,t,this))):n(o,t,this),r&&function(e,t,n,r,i){if(null==t)return e;"bgrect"===r&&!1===n.interactive&&(e["pointer-events"]="none");if("bgfore"===r&&(!1===n.interactive&&(e["pointer-events"]="none"),e.display="none",null!==t.fill))return e;"image"===r&&!1===t.smooth&&(e.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===r&&(e["font-family"]=LI(t),e["font-size"]=TI(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const n in Kj){let r=t[n];const o=Kj[n];("transparent"!==r||"fill"!==o&&"stroke"!==o)&&null!=r&&(tL(r)&&(r=nL(r,i.gradient,"")),e[o]=r)}}(i,t,e,r,this._defs),i},defs:function(e){const t=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(t).length+Object.keys(n).length){e.open("defs");for(const n in t){const r=t[n],i=r.stops;"radial"===r.gradient?(e.open("pattern",{id:eL+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),e.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),e.close(),e.open("radialGradient",{id:n,fx:r.x1,fy:r.y1,fr:r.r1,cx:r.x2,cy:r.y2,r:r.r2})):e.open("linearGradient",{id:n,x1:r.x1,x2:r.x2,y1:r.y1,y2:r.y2});for(let t=0;t<i.length;++t)e.open("stop",{offset:i[t].offset,"stop-color":i[t].color}).close();e.close()}for(const t in n){const r=n[t];e.open("clipPath",{id:t}),r.path?e.open("path",{d:r.path}).close():e.open("rect",{x:0,y:0,width:r.width,height:r.height}).close(),e.close()}e.close()}}});const yU="canvas",vU="none",bU={Canvas:yU,PNG:"png",SVG:"svg",None:vU},xU={};function wU(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(xU[e]=t,this):xU[e]}function _U(e,t,n){const r=[],i=(new JL).union(t),o=e.marktype;return o?kU(e,i,n,r):"group"===o?EU(e,i,n,r):zC("Intersect scene must be mark node or group item.")}function kU(e,t,n,r){if(function(e,t,n){return e.bounds&&t.intersects(e.bounds)&&("group"===e.marktype||!1!==e.interactive&&(!n||n(e)))}(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if("group"===o)for(;s<a;++s)EU(i[s],t,n,r);else for(const e=HI[o].isect;s<a;++s){const n=i[s];SU(n,t,e)&&r.push(n)}}return r}function EU(e,t,n,r){n&&n(e.mark)&&SU(e,t,HI.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let e=0;e<o;++e)kU(i[e],t,n,r);t.translate(a,s)}return r}function SU(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}xU.canvas=xU.png={renderer:Fj,headless:Fj,handler:Sj},xU.svg={renderer:nU,headless:gU,handler:Oj},xU.none={};const AU=new JL;function CU(e){const t=e.clip;if(bD(t))t(wB(AU.clear()));else{if(!t)return;AU.set(0,0,e.group.width,e.group.height)}e.bounds.intersect(AU)}function DU(e,t,n){return e===t||("path"===n?MU(e,t):e instanceof Date&&t instanceof Date?+e==+t:ID(e)&&ID(t)?Math.abs(e-t)<=1e-9:e&&t&&(GC(e)||GC(t))?function(e,t){var n,r,i=Object.keys(e),o=Object.keys(t);if(i.length!==o.length)return!1;for(i.sort(),o.sort(),r=i.length-1;r>=0;r--)if(i[r]!=o[r])return!1;for(r=i.length-1;r>=0;r--)if(!DU(e[n=i[r]],t[n],n))return!1;return typeof e==typeof t}(e,t):e==t)}function MU(e,t){return DU(lL(e),lL(t))}function FU(){XL(),ZP=0}n(_z,"textMetrics",(function(){return CI})),n(_z,"serializeXML",(function(){return Qj})),n(_z,"sceneZOrder",(function(){return jB})),n(_z,"sceneVisit",(function(){return UB})),n(_z,"sceneToJSON",(function(){return QI})),n(_z,"scenePickVisit",(function(){return qB})),n(_z,"sceneFromJSON",(function(){return JI})),n(_z,"sceneEqual",(function(){return DU})),n(_z,"resetSVGDefIds",(function(){return FU})),n(_z,"resetSVGClipId",(function(){return XL})),n(_z,"renderModule",(function(){return wU})),n(_z,"point",(function(){return aj})),n(_z,"pathTrail",(function(){return $L})),n(_z,"pathSymbols",(function(){return EL})),n(_z,"pathRender",(function(){return xL})),n(_z,"pathRectangle",(function(){return TL})),n(_z,"pathParse",(function(){return lL})),n(_z,"pathEqual",(function(){return MU})),n(_z,"pathCurves",(function(){return aL})),n(_z,"multiLineOffset",(function(){return RI})),n(_z,"markup",(function(){return Xj})),n(_z,"lineHeight",(function(){return $I})),n(_z,"intersectRule",(function(){return NB})),n(_z,"intersectPoint",(function(){return MB})),n(_z,"intersectPath",(function(){return DB})),n(_z,"intersectBoxLine",(function(){return OB})),n(_z,"intersect",(function(){return _U})),n(_z,"fontSize",(function(){return TI})),n(_z,"fontFamily",(function(){return LI})),n(_z,"font",(function(){return BI})),n(_z,"domFind",(function(){return nj})),n(_z,"domCreate",(function(){return tj})),n(_z,"domClear",(function(){return ij})),n(_z,"domChild",(function(){return rj})),n(_z,"boundStroke",(function(){return rB})),n(_z,"boundMark",(function(){return YI})),n(_z,"boundItem",(function(){return VI})),n(_z,"boundContext",(function(){return wB})),n(_z,"boundClip",(function(){return CU})),n(_z,"Scenegraph",(function(){return ZI})),n(_z,"SVGStringRenderer",(function(){return gU})),n(_z,"SVGRenderer",(function(){return nU})),n(_z,"SVGHandler",(function(){return Oj})),n(_z,"ResourceLoader",(function(){return eB})),n(_z,"Renderer",(function(){return lj})),n(_z,"RenderType",(function(){return bU})),n(_z,"Marks",(function(){return HI})),n(_z,"Item",(function(){return KL})),n(_z,"Handler",(function(){return sj})),n(_z,"GroupItem",(function(){return ZL})),n(_z,"Gradient",(function(){return iL})),n(_z,"CanvasRenderer",(function(){return Fj})),n(_z,"CanvasHandler",(function(){return Sj})),n(_z,"Bounds",(function(){return JL}));const NU="top",OU="left",TU="right",$U="bottom",zU="start",RU="middle",PU="end",LU="group",BU="axis",IU="title",jU="frame",UU="scope",qU="legend",WU="row-header",HU="row-footer",VU="row-title",GU="column-header",YU="column-footer",XU="column-title",QU="padding",JU="fit",KU="fit-x",ZU="fit-y",eq="none",tq="all",nq="each",rq="flush",iq="column",oq="row";function aq(e){XO.call(this,null,e)}function sq(e,t,n){return t(e.bounds.clear(),e,n)}zD(aq,XO,{transform:function(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=HI[i],a=o.bound;let s,u=r.bounds;if(o.nested)r.items.length&&n.dirty(r.items[0]),u=sq(r,a),r.items.forEach((e=>{e.bounds.clear().union(u)}));else if(i===LU||e.modified())switch(t.visit(t.MOD,(e=>n.dirty(e))),u.clear(),r.items.forEach((e=>u.union(sq(e,a)))),r.role){case BU:case qU:case IU:t.reflow()}else s=t.changed(t.REM),t.visit(t.ADD,(e=>{u.union(sq(e,a))})),t.visit(t.MOD,(e=>{s=s||u.alignsWith(e.bounds),n.dirty(e),u.union(sq(e,a))})),s&&(u.clear(),r.items.forEach((e=>u.union(e.bounds))));return CU(r),t.modifies("bounds")}});function uq(e){XO.call(this,0,e)}function lq(e){XO.call(this,null,e)}function cq(e){XO.call(this,null,e)}uq.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]},zD(uq,XO,{transform:function(e,t){const n=(i=t.dataflow)._signals[":vega_identifier:"]||(i._signals[":vega_identifier:"]=i.add(0)),r=e.as;var i;let o=n.value;return t.visit(t.ADD,(e=>e[r]=e[r]||++o)),n.set(this.value=o),t}}),zD(lq,XO,{transform:function(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,function(e){const t=e.groups,n=e.parent;return t&&1===t.size?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===LU?ZL:KL;return t.visit(t.ADD,(e=>r.call(e,n))),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});const fq={parity:e=>e.filter(((e,t)=>t%2?e.opacity=0:1)),greedy:(e,t)=>{let n;return e.filter(((e,r)=>r&&dq(n.bounds,e.bounds,t)?e.opacity=0:(n=e,1)))}},dq=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),hq=(e,t)=>{for(var n,r=1,i=e.length,o=e[0].bounds;r<i;o=n,++r)if(dq(o,n=e[r].bounds,t))return!0},pq=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},mq=e=>(e.forEach((e=>e.opacity=1)),e),gq=(e,t)=>e.reflow(t.modified()).modifies("opacity");function yq(e){XO.call(this,null,e)}zD(cq,XO,{transform:function(e,t){const n=fq[e.method]||fq.parity,r=e.separation||0;let i,o,a=t.materialize(t.SOURCE).source;if(!a||!a.length)return;if(!e.method)return e.modified("method")&&(mq(a),t=gq(t,e)),t;if(a=a.filter(pq),!a.length)return;if(e.sort&&(a=a.slice().sort(e.sort)),i=mq(a),t=gq(t,e),i.length>=3&&hq(i,r)){do{i=n(i,r)}while(i.length>=3&&hq(i,r));i.length<3&&!KC(a).opacity&&(i.length>1&&(KC(i).opacity=0),KC(a).opacity=1)}var s,u,l,c,f;e.boundScale&&e.boundTolerance>=0&&(s=e.boundScale,u=e.boundOrient,l=+e.boundTolerance,c=s.range(),f=new JL,u===NU||u===$U?f.set(c[0],-1/0,c[1],1/0):f.set(-1/0,c[0],1/0,c[1]),f.expand(l||1),o=e=>f.encloses(e.bounds),a.forEach((e=>{o(e)||(e.opacity=0)})));const d=i[0].mark.bounds.clear();return a.forEach((e=>{e.opacity&&d.union(e.bounds)})),t}}),zD(yq,XO,{transform:function(e,t){const n=t.dataflow;if(t.visit(t.ALL,(e=>n.dirty(e))),t.fields&&t.fields.zindex){const e=t.source&&t.source[0];e&&(e.mark.zdirty=!0)}}});const vq=new JL;function bq(e,t,n){return e[t]===n?0:(e[t]=n,1)}function xq(e){var t=e.items[0].orient;return t===OU||t===TU}function wq(e,t,n,r){var i,o,a=t.items[0],s=a.datum,u=null!=a.translate?a.translate:.5,l=a.orient,c=function(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}(s),f=a.range,d=a.offset,h=a.position,p=a.minExtent,m=a.maxExtent,g=s.title&&a.items[c[2]].items[0],y=a.titlePadding,v=a.bounds,b=g&&RI(g),x=0,w=0;switch(vq.clear().union(v),v.clear(),(i=c[0])>-1&&v.union(a.items[i].bounds),(i=c[1])>-1&&v.union(a.items[i].bounds),l){case NU:x=h||0,w=-d,o=Math.max(p,Math.min(m,-v.y1)),v.add(0,-o).add(f,0),g&&_q(e,g,o,y,b,0,-1,v);break;case OU:x=-d,w=h||0,o=Math.max(p,Math.min(m,-v.x1)),v.add(-o,0).add(0,f),g&&_q(e,g,o,y,b,1,-1,v);break;case TU:x=n+d,w=h||0,o=Math.max(p,Math.min(m,v.x2)),v.add(0,0).add(o,f),g&&_q(e,g,o,y,b,1,1,v);break;case $U:x=h||0,w=r+d,o=Math.max(p,Math.min(m,v.y2)),v.add(0,0).add(f,o),g&&_q(e,g,o,y,0,0,1,v);break;default:x=a.x,w=a.y}return rB(v.translate(x,w),a),bq(a,"x",x+u)|bq(a,"y",w+u)&&(a.bounds=vq,e.dirty(a),a.bounds=v,e.dirty(a)),a.mark.bounds.clear().union(v)}function _q(e,t,n,r,i,o,a,s){const u=t.bounds;if(t.auto){const s=a*(n+i+r);let l=0,c=0;e.dirty(t),o?l=(t.x||0)-(t.x=s):c=(t.y||0)-(t.y=s),t.mark.bounds.clear().union(u.translate(-l,-c)),e.dirty(t)}s.union(u)}const kq=(e,t)=>Math.floor(Math.min(e,t)),Eq=(e,t)=>Math.ceil(Math.max(e,t));function Sq(e){return(new JL).set(0,0,e.width||0,e.height||0)}function Aq(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Cq(e,t,n){const r=GC(e)?e[t]:e;return null!=r?r:void 0!==n?n:0}function Dq(e){return e<0?Math.ceil(-e):0}function Mq(e,t,n){var r,i,o,a,s,u,l,c,f,d,h,p=!n.nodirty,m=n.bounds===rq?Sq:Aq,g=vq.set(0,0,0,0),y=Cq(n.align,iq),v=Cq(n.align,oq),b=Cq(n.padding,iq),x=Cq(n.padding,oq),w=n.columns||t.length,_=w<=0?1:Math.ceil(t.length/w),k=t.length,E=Array(k),S=Array(w),A=0,C=Array(k),D=Array(_),M=0,F=Array(k),N=Array(k),O=Array(k);for(i=0;i<w;++i)S[i]=0;for(i=0;i<_;++i)D[i]=0;for(i=0;i<k;++i)u=t[i],s=O[i]=m(u),u.x=u.x||0,F[i]=0,u.y=u.y||0,N[i]=0,o=i%w,a=~~(i/w),A=Math.max(A,l=Math.ceil(s.x2)),M=Math.max(M,c=Math.ceil(s.y2)),S[o]=Math.max(S[o],l),D[a]=Math.max(D[a],c),E[i]=b+Dq(s.x1),C[i]=x+Dq(s.y1),p&&e.dirty(t[i]);for(i=0;i<k;++i)i%w==0&&(E[i]=0),i<w&&(C[i]=0);if(y===nq)for(o=1;o<w;++o){for(h=0,i=o;i<k;i+=w)h<E[i]&&(h=E[i]);for(i=o;i<k;i+=w)E[i]=h+S[o-1]}else if(y===tq){for(h=0,i=0;i<k;++i)i%w&&h<E[i]&&(h=E[i]);for(i=0;i<k;++i)i%w&&(E[i]=h+A)}else for(y=!1,o=1;o<w;++o)for(i=o;i<k;i+=w)E[i]+=S[o-1];if(v===nq)for(a=1;a<_;++a){for(h=0,r=(i=a*w)+w;i<r;++i)h<C[i]&&(h=C[i]);for(i=a*w;i<r;++i)C[i]=h+D[a-1]}else if(v===tq){for(h=0,i=w;i<k;++i)h<C[i]&&(h=C[i]);for(i=w;i<k;++i)C[i]=h+M}else for(v=!1,a=1;a<_;++a)for(r=(i=a*w)+w;i<r;++i)C[i]+=D[a-1];for(f=0,i=0;i<k;++i)f=E[i]+(i%w?f:0),F[i]+=f-t[i].x;for(o=0;o<w;++o)for(d=0,i=o;i<k;i+=w)d+=C[i],N[i]+=d-t[i].y;if(y&&Cq(n.center,iq)&&_>1)for(i=0;i<k;++i)(f=(s=y===tq?A:S[i%w])-O[i].x2-t[i].x-F[i])>0&&(F[i]+=f/2);if(v&&Cq(n.center,oq)&&1!==w)for(i=0;i<k;++i)(d=(s=v===tq?M:D[~~(i/w)])-O[i].y2-t[i].y-N[i])>0&&(N[i]+=d/2);for(i=0;i<k;++i)g.union(O[i].translate(F[i],N[i]));switch(f=Cq(n.anchor,"x"),d=Cq(n.anchor,"y"),Cq(n.anchor,iq)){case PU:f-=g.width();break;case RU:f-=g.width()/2}switch(Cq(n.anchor,oq)){case PU:d-=g.height();break;case RU:d-=g.height()/2}for(f=Math.round(f),d=Math.round(d),g.clear(),i=0;i<k;++i)t[i].mark.bounds.clear();for(i=0;i<k;++i)(u=t[i]).x+=F[i]+=f,u.y+=N[i]+=d,g.union(u.mark.bounds.union(u.bounds.translate(F[i],N[i]))),p&&e.dirty(u);return g}function Fq(e,t,n){var r,i,o,a,s,u,l,c=function(e){var t,n,r=e.items,i=r.length,o=0;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;o<i;++o)if(n=(t=r[o]).items,t.marktype===LU)switch(t.role){case BU:case qU:case IU:break;case WU:a.rowheaders.push(...n);break;case HU:a.rowfooters.push(...n);break;case GU:a.colheaders.push(...n);break;case YU:a.colfooters.push(...n);break;case VU:a.rowtitle=n[0];break;case XU:a.coltitle=n[0];break;default:a.marks.push(...n)}return a}(t),f=c.marks,d=n.bounds===rq?Nq:Oq,h=n.offset,p=n.columns||f.length,m=p<=0?1:Math.ceil(f.length/p),g=m*p;const y=Mq(e,f,n);y.empty()&&y.set(0,0,0,0),c.rowheaders&&(u=Cq(n.headerBand,oq,null),r=Tq(e,c.rowheaders,f,p,m,-Cq(h,"rowHeader"),kq,0,d,"x1",0,p,1,u)),c.colheaders&&(u=Cq(n.headerBand,iq,null),i=Tq(e,c.colheaders,f,p,p,-Cq(h,"columnHeader"),kq,1,d,"y1",0,1,p,u)),c.rowfooters&&(u=Cq(n.footerBand,oq,null),o=Tq(e,c.rowfooters,f,p,m,Cq(h,"rowFooter"),Eq,0,d,"x2",p-1,p,1,u)),c.colfooters&&(u=Cq(n.footerBand,iq,null),a=Tq(e,c.colfooters,f,p,p,Cq(h,"columnFooter"),Eq,1,d,"y2",g-p,1,p,u)),c.rowtitle&&(s=Cq(n.titleAnchor,oq),l=Cq(h,"rowTitle"),l=s===PU?o+l:r-l,u=Cq(n.titleBand,oq,.5),$q(e,c.rowtitle,l,0,y,u)),c.coltitle&&(s=Cq(n.titleAnchor,iq),l=Cq(h,"columnTitle"),l=s===PU?a+l:i-l,u=Cq(n.titleBand,iq,.5),$q(e,c.coltitle,l,1,y,u))}function Nq(e,t){return"x1"===t?e.x||0:"y1"===t?e.y||0:"x2"===t?(e.x||0)+(e.width||0):"y2"===t?(e.y||0)+(e.height||0):void 0}function Oq(e,t){return e.bounds[t]}function Tq(e,t,n,r,i,o,a,s,u,l,c,f,d,h){var p,m,g,y,v,b,x,w,_,k=n.length,E=0,S=0;if(!k)return E;for(p=c;p<k;p+=f)n[p]&&(E=a(E,u(n[p],l)));if(!t.length)return E;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),E+=o,m=0,y=t.length;m<y;++m)e.dirty(t[m]),t[m].mark.bounds.clear();for(p=c,m=0,y=t.length;m<y;++m,p+=f){for(v=(b=t[m]).mark.bounds,g=p;g>=0&&null==(x=n[g]);g-=d);s?(w=null==h?x.x:Math.round(x.bounds.x1+h*x.bounds.width()),_=E):(w=E,_=null==h?x.y:Math.round(x.bounds.y1+h*x.bounds.height())),v.union(b.bounds.translate(w-(b.x||0),_-(b.y||0))),b.x=w,b.y=_,e.dirty(b),S=a(S,v[l])}return S}function $q(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function zq(e,t,n,r,i,o,a){const s=function(e,t){const n=e[t]||{};return(t,r)=>null!=n[t]?n[t]:null!=e[t]?e[t]:r}(n,t),u=function(e,t){let n=-1/0;return e.forEach((e=>{null!=e.offset&&(n=Math.max(n,e.offset))})),n>-1/0?n:t}(e,s("offset",0)),l=s("anchor",zU),c=l===PU?1:l===RU?.5:0,f={align:nq,bounds:s("bounds",rq),columns:"vertical"===s("direction")?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case OU:f.anchor={x:Math.floor(r.x1)-u,column:PU,y:c*(a||r.height()+2*r.y1),row:l};break;case TU:f.anchor={x:Math.ceil(r.x2)+u,y:c*(a||r.height()+2*r.y1),row:l};break;case NU:f.anchor={y:Math.floor(i.y1)-u,row:PU,x:c*(o||i.width()+2*i.x1),column:l};break;case $U:f.anchor={y:Math.ceil(i.y2)+u,x:c*(o||i.width()+2*i.x1),column:l};break;case"top-left":f.anchor={x:u,y:u};break;case"top-right":f.anchor={x:o-u,y:u,column:PU};break;case"bottom-left":f.anchor={x:u,y:a-u,row:PU};break;case"bottom-right":f.anchor={x:o-u,y:a-u,column:PU,row:PU}}return f}function Rq(e,t){var n,r,i=t.items[0],o=i.datum,a=i.orient,s=i.bounds,u=i.x,l=i.y;return i._bounds?i._bounds.clear().union(s):i._bounds=s.clone(),s.clear(),function(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(t.datum.title){var a=t.items[1].items[0],s=a.anchor,u=t.titlePadding||0,l=r-a.x,c=r-a.y;switch(a.orient){case OU:i+=Math.ceil(a.bounds.width())+u;break;case TU:case $U:break;default:o+=a.bounds.height()+u}switch((i||o)&&Lq(e,n,i,o),a.orient){case OU:c+=Pq(t,n,a,s,1,1);break;case TU:l+=Pq(t,n,a,PU,0,0)+u,c+=Pq(t,n,a,s,1,1);break;case $U:l+=Pq(t,n,a,s,0,0),c+=Pq(t,n,a,PU,-1,0,1)+u;break;default:l+=Pq(t,n,a,s,0,0)}(l||c)&&Lq(e,a,l,c),(l=Math.round(a.bounds.x1-r))<0&&(Lq(e,n,-l,0),Lq(e,a,-l,0))}else(i||o)&&Lq(e,n,i,o)}(e,i,i.items[0].items[0]),s=function(e,t){return e.items.forEach((e=>t.union(e.bounds))),t.x1=e.padding,t.y1=e.padding,t}(i,s),n=2*i.padding,r=2*i.padding,s.empty()||(n=Math.ceil(s.width()+n),r=Math.ceil(s.height()+r)),"symbol"===o.type&&function(e){const t=e.reduce(((e,t)=>(e[t.column]=Math.max(t.bounds.x2-t.x,e[t.column]||0),e)),{});e.forEach((e=>{e.width=t[e.column],e.height=e.bounds.y2-e.y}))}(i.items[0].items[0].items[0].items),a!==eq&&(i.x=u=0,i.y=l=0),i.width=n,i.height=r,rB(s.set(u,l,u+n,l+r),i),i.mark.bounds.clear().union(s),i}function Pq(e,t,n,r,i,o,a){const s="symbol"!==e.datum.type,u=n.datum.vgrad,l=(!s||!o&&u||a?t:t.items[0]).bounds[i?"y2":"x2"]-e.padding,c=u&&o?l:0,f=u&&o?0:l,d=i<=0?0:RI(n);return Math.round(r===zU?c:r===PU?f-d:.5*(l-d))}function Lq(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Bq(e){XO.call(this,null,e)}zD(Bq,XO,{transform:function(e,t){const n=t.dataflow;return e.mark.items.forEach((t=>{e.layout&&Fq(n,t,e.layout),function(e,t,n){var r,i,o,a,s,u=t.items,l=Math.max(0,t.width||0),c=Math.max(0,t.height||0),f=(new JL).set(0,0,l,c),d=f.clone(),h=f.clone(),p=[];for(a=0,s=u.length;a<s;++a)switch((i=u[a]).role){case BU:(xq(i)?d:h).union(wq(e,i,l,c));break;case IU:r=i;break;case qU:p.push(Rq(e,i));break;case jU:case UU:case WU:case HU:case VU:case GU:case YU:case XU:d.union(i.bounds),h.union(i.bounds);break;default:f.union(i.bounds)}if(p.length){const t={};p.forEach((e=>{(o=e.orient||TU)!==eq&&(t[o]||(t[o]=[])).push(e)}));for(const r in t){const i=t[r];Mq(e,i,zq(i,r,n.legends,d,h,l,c))}p.forEach((t=>{const r=t.bounds;if(r.equals(t._bounds)||(t.bounds=t._bounds,e.dirty(t),t.bounds=r,e.dirty(t)),n.autosize&&n.autosize.type===JU)switch(t.orient){case OU:case TU:f.add(r.x1,0).add(r.x2,0);break;case NU:case $U:f.add(0,r.y1).add(0,r.y2)}else f.union(r)}))}f.union(d).union(h),r&&f.union(function(e,t,n,r,i){var o,a=t.items[0],s=a.frame,u=a.orient,l=a.anchor,c=a.offset,f=a.padding,d=a.items[0].items[0],h=a.items[1]&&a.items[1].items[0],p=u===OU||u===TU?r:n,m=0,g=0,y=0,v=0,b=0;if(s!==LU?u===OU?(m=i.y2,p=i.y1):u===TU?(m=i.y1,p=i.y2):(m=i.x1,p=i.x2):u===OU&&(m=r,p=0),o=l===zU?m:l===PU?p:(m+p)/2,h&&h.text){switch(u){case NU:case $U:b=d.bounds.height()+f;break;case OU:v=d.bounds.width()+f;break;case TU:v=-d.bounds.width()-f}vq.clear().union(h.bounds),vq.translate(v-(h.x||0),b-(h.y||0)),bq(h,"x",v)|bq(h,"y",b)&&(e.dirty(h),h.bounds.clear().union(vq),h.mark.bounds.clear().union(vq),e.dirty(h)),vq.clear().union(h.bounds)}else vq.clear();switch(vq.union(d.bounds),u){case NU:g=o,y=i.y1-vq.height()-c;break;case OU:g=i.x1-vq.width()-c,y=o;break;case TU:g=i.x2+vq.width()+c,y=o;break;case $U:g=o,y=i.y2+c;break;default:g=a.x,y=a.y}return bq(a,"x",g)|bq(a,"y",y)&&(vq.translate(g,y),e.dirty(a),a.bounds.clear().union(vq),t.bounds.clear().union(vq),e.dirty(a)),a.bounds}(e,r,l,c,f));t.clip&&f.set(0,0,t.width||0,t.height||0);!function(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===QU){const t=e.padding();a-=t.left+t.right,s-=t.top+t.bottom}o===eq?(l=0,f=0,u=a,c=s):o===JU?(u=Math.max(0,a-l-d),c=Math.max(0,s-f-h)):o===KU?(u=Math.max(0,a-l-d),s=c+f+h):o===ZU?(a=u+l+d,c=Math.max(0,s-f-h)):"pad"===o&&(a=u+l+d,s=c+f+h);e._resizeView(a,s,u,c,[l,f],i.resize)}(e,t,f,n)}(n,t,e)})),(r=e.mark.group)&&"legend-entry"!==r.mark.role?t.reflow():t;var r}}),n(wz,"viewlayout",(function(){return Bq})),n(wz,"render",(function(){return yq})),n(wz,"overlap",(function(){return cq})),n(wz,"mark",(function(){return lq})),n(wz,"identifier",(function(){return uq})),n(wz,"bound",(function(){return aq}));var Iq={};function jq(e){XO.call(this,null,e)}function Uq(e){XO.call(this,null,e)}function qq(){return vO({})}function Wq(e){XO.call(this,null,e)}function Hq(e){XO.call(this,[],e)}zD(jq,XO,{transform:function(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=PP(o,null==e.count?e.values?e.values.length:10:e.count,e.minstep),s=e.format||IP(n,o,a,e.formatSpecifier,e.formatType,!!e.values),u=e.values?LP(o,e.values,a):BP(o,a);return i&&(r.rem=i),i=u.map(((e,t)=>vO({index:t/(u.length-1||1),value:e,label:s(e)}))),e.extra&&i.length&&i.push(vO({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}}),zD(Uq,XO,{transform:function(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||qq,o=e.key||gO,a=this.value;return VC(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&zC("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=function(e){const t=TD().test((e=>e.exit));return t.lookup=n=>t.get(e(n)),t}(o)),t.visit(t.ADD,(e=>{const t=o(e);let n=a.get(t);n?n.exit?(a.empty--,r.add.push(n)):r.mod.push(n):(n=i(e),a.set(t,n),r.add.push(n)),n.datum=e,n.exit=!1})),t.visit(t.MOD,(e=>{const t=o(e),n=a.get(t);n&&(n.datum=e,r.mod.push(n))})),t.visit(t.REM,(e=>{const t=o(e),n=a.get(t);e!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++a.empty)})),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}}),zD(Wq,XO,{transform:function(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(VC(o)){if(!n.changed()&&!o.every((e=>i[e])))return t.StopPropagation;o=o[0],n.encode=null}var a="enter"===o,s=i.update||qC,u=i.enter||qC,l=i.exit||qC,c=(o&&!a?i[o]:s)||qC;if(t.changed(t.ADD)&&(t.visit(t.ADD,(t=>{u(t,e),s(t,e)})),n.modifies(u.output),n.modifies(s.output),c!==qC&&c!==s&&(t.visit(t.ADD,(t=>{c(t,e)})),n.modifies(c.output))),t.changed(t.REM)&&l!==qC&&(t.visit(t.REM,(t=>{l(t,e)})),n.modifies(l.output)),a||c!==qC){const i=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(i,(t=>{const i=u(t,e)||r;(c(t,e)||i)&&n.mod.push(t)})),n.mod.length&&n.modifies(u.output)):t.visit(i,(t=>{(c(t,e)||r)&&n.mod.push(t)})),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}}),zD(Hq,XO,{transform:function(e,t){if(null!=this.value&&!e.modified())return t.StopPropagation;var n,r,i,o,a,s=t.dataflow.locale(),u=t.fork(t.NO_SOURCE|t.NO_FIELDS),l=this.value,c=e.type||TP,f=e.scale,d=+e.limit,h=PP(f,null==e.count?5:e.count,e.minstep),p=!!e.values||c===TP,m=e.format||HP(s,f,h,c,e.formatSpecifier,e.formatType,p),g=e.values||WP(f,h);return l&&(u.rem=l),c===TP?(d&&g.length>d?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),l=g.slice(0,d-1),a=!0):l=g,bD(i=e.size)?(e.values||0!==f(l[0])||(l=l.slice(1)),o=l.reduce(((t,n)=>Math.max(t,i(n,e))),0)):i=SD(o=i||8),l=l.map(((t,n)=>vO({index:n,label:m(t,n,l),value:t,offset:o,size:i(t,e)}))),a&&(a=g[l.length],l.push(vO({index:l.length,label:"…".concat(g.length-l.length," entries"),value:a,offset:o,size:i(a,e)})))):"gradient"===c?(n=f.domain(),r=CP(f,n[0],KC(n)),g.length<3&&!e.values&&n[0]!==KC(n)&&(g=[n[0],KC(n)]),l=g.map(((e,t)=>vO({index:t,label:m(e,t,g),value:e,perc:r(e)})))):(i=g.length-1,r=function(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+KC(t),o=i-r;if(e.type===JR){const e=n?o/n:.1;r-=e,i+=e,o=i-r}return e=>(e-r)/o}(f),l=g.map(((e,t)=>vO({index:t,label:m(e,t,g),value:e,perc:t?r(e):0,perc2:t===i?1:r(g[t+1])})))),u.source=l,u.add=l,this.value=l,u}});const Vq=e=>e.source.x,Gq=e=>e.source.y,Yq=e=>e.target.x,Xq=e=>e.target.y;function Qq(e){XO.call(this,{},e)}Qq.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]},zD(Qq,XO,{transform:function(e,t){var n=e.sourceX||Vq,r=e.sourceY||Gq,i=e.targetX||Yq,o=e.targetY||Xq,a=e.as||"path",s=e.orient||"vertical",u=e.shape||"line",l=eW.get(u+"-"+s)||eW.get(u);return l||zC("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,(e=>{e[a]=l(n(e),r(e),i(e),o(e))})),t.reflow(e.modified()).modifies(a)}});const Jq=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Kq=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.sqrt(i*i+o*o)/2;return"M"+e+","+t+"A"+a+","+a+" "+180*Math.atan2(o,i)/Math.PI+" 0 1 "+n+","+r},Zq=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},eW=TD({line:Jq,"line-radial":(e,t,n,r)=>Jq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),arc:Kq,"arc-radial":(e,t,n,r)=>Kq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),curve:Zq,"curve-radial":(e,t,n,r)=>Zq(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),"orthogonal-horizontal":(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,"orthogonal-vertical":(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,"orthogonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n);return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+((Math.abs(n-e)>Math.PI?n<=e:n>e)?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},"diagonal-horizontal":(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},"diagonal-vertical":(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},"diagonal-radial":(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*o+"C"+u*i+","+u*o+" "+u*a+","+u*s+" "+r*a+","+r*s}});function tW(e){XO.call(this,null,e)}tW.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]},zD(tW,XO,{transform:function(e,t){var n,r,i,o=e.as||["startAngle","endAngle"],a=o[0],s=o[1],u=e.field||jC,l=e.startAngle||0,c=null!=e.endAngle?e.endAngle:2*Math.PI,f=t.source,d=f.map(u),h=d.length,p=l,m=(c-l)/Zb(d),g=Kb(h);for(e.sort&&g.sort(((e,t)=>d[e]-d[t])),n=0;n<h;++n)i=d[g[n]],(r=f[g[n]])[a]=p,r[s]=p+=i*m;return this.value=d,t.reflow(e.modified()).modifies(o)}});function nW(e){return yP(e)&&e!==GR}const rW=tM(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function iW(e){XO.call(this,null,e),this.modified(!0)}function oW(e,t,n){xP(e)&&(Math.abs(t.reduce(((e,t)=>e+(t<0?-1:t>0?1:0)),0))!==t.length&&n.warn("Log scale domain includes zero: "+QD(t)));return t}function aW(e,t,n){return bD(e)&&(t||n)?EP(e,sW(t||[0,1],n)):e}function sW(e,t){return t?e.slice().reverse():e}function uW(e){XO.call(this,null,e)}zD(iW,XO,{transform:function(e,t){var n=t.dataflow,r=this.value,i=function(e){var t,n=e.type,r="";if(n===GR)return"sequential-linear";(function(e){const t=e.type;return yP(t)&&t!==HR&&t!==VR&&(e.scheme||e.range&&e.range.length&&e.range.every(UD))})(e)&&(r=2===(t=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(null!=e.domainMid):0)?"sequential-":3===t?"diverging-":"");return(r+n||IR).toLowerCase()}(e);for(i in r&&i===r.type||(this.value=r=pP(i)()),e)if(!rW[i]){if("padding"===i&&nW(r.type))continue;bD(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return function(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(null!=t.rangeStep)o=function(e,t,n){e!==eP&&e!==ZR&&zC("Only band and point scales support rangeStep.");var r=(null!=t.paddingOuter?t.paddingOuter:t.padding)||0,i=e===ZR?1:(null!=t.paddingInner?t.paddingInner:t.padding)||0;return[0,t.rangeStep*BR(n,i,r)]}(r,t,n);else if(t.scheme&&(o=function(e,t,n){var r,i=t.schemeExtent;VC(t.scheme)?r=SP(t.scheme,t.interpolate,t.interpolateGamma):(r=OP(t.scheme.toLowerCase()))||zC("Unrecognized scheme name: ".concat(t.scheme));return n=e===JR?n+1:e===tP?n-1:e===XR||e===QR?+t.schemeCount||5:n,wP(e)?aW(r,i,t.reverse):bD(r)?AP(aW(r,i),n):e===KR?r:r.slice(0,n)}(r,t,n),bD(o))){if(e.interpolator)return e.interpolator(o);zC("Scale type ".concat(r," does not support interpolating color schemes."))}if(o&&wP(r))return e.interpolator(SP(sW(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(DP(t.interpolate,t.interpolateGamma)):bD(e.round)?e.round(i):bD(e.rangeRound)&&e.interpolate(i?lv:av);o&&e.range(sW(o,t.reverse))}(r,e,function(e,t,n){let r=t.bins;if(r&&!VC(r)){const t=e.domain(),n=t[0],i=KC(t),o=r.step;let a=null==r.start?n:r.start,s=null==r.stop?i:r.stop;o||zC("Scale bins parameter missing step property."),a<n&&(a=o*Math.ceil(n/o)),s>i&&(s=o*Math.floor(i/o)),r=Kb(a,s+o/2,o)}r?e.bins=r:e.bins&&delete e.bins;e.type===tP&&(r?t.domain||t.domainRaw||(e.domain(r),n=r.length):e.bins=e.domain());return n}(r,e,function(e,t,n){const r=function(e,t,n){return t?(e.domain(oW(e.type,t,n)),t.length):-1}(e,t.domainRaw,n);if(r>-1)return r;var i,o,a=t.domain,s=e.type,u=t.zero||void 0===t.zero&&function(e){const t=e.type;return!e.bins&&(t===IR||t===UR||t===qR)}(e);if(!a)return 0;nW(s)&&t.padding&&a[0]!==KC(a)&&(a=function(e,t,n,r,i,o){var a=Math.abs(KC(n)-n[0]),s=a/(a-2*r),u=e===jR?dD(t,null,s):e===qR?hD(t,null,s,.5):e===UR?hD(t,null,s,i||1):e===WR?pD(t,null,s,o||1):fD(t,null,s);return(t=t.slice())[0]=u[0],t[t.length-1]=u[1],t}(s,a,t.range,t.padding,t.exponent,t.constant));if((u||null!=t.domainMin||null!=t.domainMax||null!=t.domainMid)&&(i=(a=a.slice()).length-1||1,u&&(a[0]>0&&(a[0]=0),a[i]<0&&(a[i]=0)),null!=t.domainMin&&(a[0]=t.domainMin),null!=t.domainMax&&(a[i]=t.domainMax),null!=t.domainMid)){const e=(o=t.domainMid)>a[i]?i+1:o<a[0]?0:i;e!==i&&n.warn("Scale domainMid exceeds domain min or max.",o),a.splice(e,0,o)}e.domain(oW(s,a,n)),s===KR&&e.unknown(t.domainImplicit?Yx:void 0);t.nice&&e.nice&&e.nice(!0!==t.nice&&PP(e,t.nice)||null);return a.length}(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),zD(uW,XO,{transform:function(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(_O(e.sort)),this.modified(n),t}});const lW="zero",cW="center",fW="normalize",dW=["y0","y1"];function hW(e){XO.call(this,null,e)}function pW(e,t,n,r,i){for(var o,a=(t-e.sum)/2,s=e.length,u=0;u<s;++u)(o=e[u])[r]=a,o[i]=a+=Math.abs(n(o))}function mW(e,t,n,r,i){for(var o,a=1/e.sum,s=0,u=e.length,l=0,c=0;l<u;++l)(o=e[l])[r]=s,o[i]=s=a*(c+=Math.abs(n(o)))}function gW(e,t,n,r,i){for(var o,a,s=0,u=0,l=e.length,c=0;c<l;++c)(o=+n(a=e[c]))<0?(a[r]=u,a[i]=u+=o):(a[r]=s,a[i]=s+=o)}hW.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:lW,values:[lW,cW,fW]},{name:"as",type:"string",array:!0,length:2,default:dW}]},zD(hW,XO,{transform:function(e,t){var n,r,i,o,a=e.as||dW,s=a[0],u=a[1],l=_O(e.sort),c=e.field||jC,f=e.offset===cW?pW:e.offset===fW?mW:gW;for(n=function(e,t,n,r){var i,o,a,s,u,l,c,f,d,h=[],p=e=>e(u);if(null==t)h.push(e.slice());else for(i={},o=0,a=e.length;o<a;++o)u=e[o],(c=i[l=t.map(p)])||(i[l]=c=[],h.push(c)),c.push(u);for(l=0,d=0,s=h.length;l<s;++l){for(o=0,f=0,a=(c=h[l]).length;o<a;++o)f+=Math.abs(r(c[o]));c.sum=f,f>d&&(d=f),n&&c.sort(n)}return h.max=d,h}(t.source,e.groupby,l,c),r=0,i=n.length,o=n.max;r<i;++r)f(n[r],o,c,s,u);return t.reflow(e.modified()).modifies(a)}}),n(Iq,"stack",(function(){return hW})),n(Iq,"sortitems",(function(){return uW})),n(Iq,"scale",(function(){return iW})),n(Iq,"pie",(function(){return tW})),n(Iq,"linkpath",(function(){return Qq})),n(Iq,"legendentries",(function(){return Hq})),n(Iq,"encode",(function(){return Wq})),n(Iq,"datajoin",(function(){return Uq})),n(Iq,"axisticks",(function(){return jq}));var yW={},vW=1e-6,bW=1e-12,xW=Math.PI,wW=xW/2,_W=xW/4,kW=2*xW,EW=180/xW,SW=xW/180,AW=Math.abs,CW=Math.atan,DW=Math.atan2,MW=Math.cos,FW=Math.ceil,NW=Math.exp,OW=(Math.floor,Math.hypot),TW=Math.log,$W=Math.pow,zW=Math.sin,RW=Math.sign||function(e){return e>0?1:e<0?-1:0},PW=Math.sqrt,LW=Math.tan;function BW(e){return e>1?0:e<-1?xW:Math.acos(e)}function IW(e){return e>1?wW:e<-1?-wW:Math.asin(e)}function jW(){}function UW(e,t){e&&WW.hasOwnProperty(e.type)&&WW[e.type](e,t)}var qW={Feature:function(e,t){UW(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)UW(n[r].geometry,t)}},WW={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){HW(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)HW(n[r],t,0)},Polygon:function(e,t){VW(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)VW(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)UW(n[r],t)}};function HW(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function VW(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)HW(e[n],t,1);t.polygonEnd()}var GW,YW,XW,QW,JW,KW=function(e,t){e&&qW.hasOwnProperty(e.type)?qW[e.type](e,t):UW(e,t)},ZW=new qb,eH=new qb,tH={point:jW,lineStart:jW,lineEnd:jW,polygonStart:function(){ZW=new qb,tH.lineStart=nH,tH.lineEnd=rH},polygonEnd:function(){var e=+ZW;eH.add(e<0?kW+e:e),this.lineStart=this.lineEnd=this.point=jW},sphere:function(){eH.add(kW)}};function nH(){tH.point=iH}function rH(){oH(GW,YW)}function iH(e,t){tH.point=oH,GW=e,YW=t,XW=e*=SW,QW=MW(t=(t*=SW)/2+_W),JW=zW(t)}function oH(e,t){var n=(e*=SW)-XW,r=n>=0?1:-1,i=r*n,o=MW(t=(t*=SW)/2+_W),a=zW(t),s=JW*a,u=QW*o+s*MW(i),l=s*r*zW(i);ZW.add(DW(l,u)),XW=e,QW=o,JW=a}var aH,sH,uH,lH,cH,fH,dH,hH,pH,mH,gH;function yH(e){return[DW(e[1],e[0]),IW(e[2])]}function vH(e){var t=e[0],n=e[1],r=MW(n);return[r*MW(t),r*zW(t),zW(n)]}function bH(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function xH(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function wH(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function _H(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function kH(e){var t=PW(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var EH={point:SH,lineStart:CH,lineEnd:DH,polygonStart:function(){EH.point=MH,EH.lineStart=FH,EH.lineEnd=NH,pH=new qb,tH.polygonStart()},polygonEnd:function(){tH.polygonEnd(),EH.point=SH,EH.lineStart=CH,EH.lineEnd=DH,ZW<0?(aH=-(uH=180),sH=-(lH=90)):pH>vW?lH=90:pH<-1e-6&&(sH=-90),gH[0]=aH,gH[1]=uH},sphere:function(){aH=-(uH=180),sH=-(lH=90)}};function SH(e,t){mH.push(gH=[aH=e,uH=e]),t<sH&&(sH=t),t>lH&&(lH=t)}function AH(e,t){var n=vH([e*SW,t*SW]);if(hH){var r=xH(hH,n),i=xH([r[1],-r[0],0],r);kH(i),i=yH(i);var o,a=e-cH,s=a>0?1:-1,u=i[0]*EW*s,l=AW(a)>180;l^(s*cH<u&&u<s*e)?(o=i[1]*EW)>lH&&(lH=o):l^(s*cH<(u=(u+360)%360-180)&&u<s*e)?(o=-i[1]*EW)<sH&&(sH=o):(t<sH&&(sH=t),t>lH&&(lH=t)),l?e<cH?OH(aH,e)>OH(aH,uH)&&(uH=e):OH(e,uH)>OH(aH,uH)&&(aH=e):uH>=aH?(e<aH&&(aH=e),e>uH&&(uH=e)):e>cH?OH(aH,e)>OH(aH,uH)&&(uH=e):OH(e,uH)>OH(aH,uH)&&(aH=e)}else mH.push(gH=[aH=e,uH=e]);t<sH&&(sH=t),t>lH&&(lH=t),hH=n,cH=e}function CH(){EH.point=AH}function DH(){gH[0]=aH,gH[1]=uH,EH.point=SH,hH=null}function MH(e,t){if(hH){var n=e-cH;pH.add(AW(n)>180?n+(n>0?360:-360):n)}else fH=e,dH=t;tH.point(e,t),AH(e,t)}function FH(){tH.lineStart()}function NH(){MH(fH,dH),tH.lineEnd(),AW(pH)>vW&&(aH=-(uH=180)),gH[0]=aH,gH[1]=uH,hH=null}function OH(e,t){return(t-=e)<0?t+360:t}function TH(e,t){return e[0]-t[0]}function $H(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}var zH,RH,PH,LH,BH,IH,jH,UH,qH,WH,HH,VH,GH,YH,XH,QH,JH={sphere:jW,point:KH,lineStart:eV,lineEnd:rV,polygonStart:function(){JH.lineStart=iV,JH.lineEnd=oV},polygonEnd:function(){JH.lineStart=eV,JH.lineEnd=rV}};function KH(e,t){e*=SW;var n=MW(t*=SW);ZH(n*MW(e),n*zW(e),zW(t))}function ZH(e,t,n){++zH,PH+=(e-PH)/zH,LH+=(t-LH)/zH,BH+=(n-BH)/zH}function eV(){JH.point=tV}function tV(e,t){e*=SW;var n=MW(t*=SW);YH=n*MW(e),XH=n*zW(e),QH=zW(t),JH.point=nV,ZH(YH,XH,QH)}function nV(e,t){e*=SW;var n=MW(t*=SW),r=n*MW(e),i=n*zW(e),o=zW(t),a=DW(PW((a=XH*o-QH*i)*a+(a=QH*r-YH*o)*a+(a=YH*i-XH*r)*a),YH*r+XH*i+QH*o);RH+=a,IH+=a*(YH+(YH=r)),jH+=a*(XH+(XH=i)),UH+=a*(QH+(QH=o)),ZH(YH,XH,QH)}function rV(){JH.point=KH}function iV(){JH.point=aV}function oV(){sV(VH,GH),JH.point=KH}function aV(e,t){VH=e,GH=t,e*=SW,t*=SW,JH.point=sV;var n=MW(t);YH=n*MW(e),XH=n*zW(e),QH=zW(t),ZH(YH,XH,QH)}function sV(e,t){e*=SW;var n=MW(t*=SW),r=n*MW(e),i=n*zW(e),o=zW(t),a=XH*o-QH*i,s=QH*r-YH*o,u=YH*i-XH*r,l=OW(a,s,u),c=IW(l),f=l&&-c/l;qH.add(f*a),WH.add(f*s),HH.add(f*u),RH+=c,IH+=c*(YH+(YH=r)),jH+=c*(XH+(XH=i)),UH+=c*(QH+(QH=o)),ZH(YH,XH,QH)}function uV(e,t,n){var r=Kb(e,t-vW,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function lV(e,t,n){var r=Kb(e,t-vW,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}var cV,fV,dV,hV,pV=e=>e,mV=new qb,gV=new qb,yV={point:jW,lineStart:jW,lineEnd:jW,polygonStart:function(){yV.lineStart=vV,yV.lineEnd=wV},polygonEnd:function(){yV.lineStart=yV.lineEnd=yV.point=jW,mV.add(AW(gV)),gV=new qb},result:function(){var e=mV/2;return mV=new qb,e}};function vV(){yV.point=bV}function bV(e,t){yV.point=xV,cV=dV=e,fV=hV=t}function xV(e,t){gV.add(hV*e-dV*t),dV=e,hV=t}function wV(){xV(cV,fV)}var _V=1/0,kV=_V,EV=-_V,SV=EV,AV={point:function(e,t){e<_V&&(_V=e);e>EV&&(EV=e);t<kV&&(kV=t);t>SV&&(SV=t)},lineStart:jW,lineEnd:jW,polygonStart:jW,polygonEnd:jW,result:function(){var e=[[_V,kV],[EV,SV]];return EV=SV=-(kV=_V=1/0),e}};var CV,DV,MV,FV,NV=0,OV=0,TV=0,$V=0,zV=0,RV=0,PV=0,LV=0,BV=0,IV={point:jV,lineStart:UV,lineEnd:HV,polygonStart:function(){IV.lineStart=VV,IV.lineEnd=GV},polygonEnd:function(){IV.point=jV,IV.lineStart=UV,IV.lineEnd=HV},result:function(){var e=BV?[PV/BV,LV/BV]:RV?[$V/RV,zV/RV]:TV?[NV/TV,OV/TV]:[NaN,NaN];return NV=OV=TV=$V=zV=RV=PV=LV=BV=0,e}};function jV(e,t){NV+=e,OV+=t,++TV}function UV(){IV.point=qV}function qV(e,t){IV.point=WV,jV(MV=e,FV=t)}function WV(e,t){var n=e-MV,r=t-FV,i=PW(n*n+r*r);$V+=i*(MV+e)/2,zV+=i*(FV+t)/2,RV+=i,jV(MV=e,FV=t)}function HV(){IV.point=jV}function VV(){IV.point=YV}function GV(){XV(CV,DV)}function YV(e,t){IV.point=XV,jV(CV=MV=e,DV=FV=t)}function XV(e,t){var n=e-MV,r=t-FV,i=PW(n*n+r*r);$V+=i*(MV+e)/2,zV+=i*(FV+t)/2,RV+=i,PV+=(i=FV*e-MV*t)*(MV+e),LV+=i*(FV+t),BV+=3*i,jV(MV=e,FV=t)}function QV(e){this._context=e}QV.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,kW)}},result:jW};var JV,KV,ZV,eG,tG,nG=new qb,rG={point:jW,lineStart:function(){rG.point=iG},lineEnd:function(){JV&&oG(KV,ZV),rG.point=jW},polygonStart:function(){JV=!0},polygonEnd:function(){JV=null},result:function(){var e=+nG;return nG=new qb,e}};function iG(e,t){rG.point=oG,KV=eG=e,ZV=tG=t}function oG(e,t){eG-=e,tG-=t,nG.add(PW(eG*eG+tG*tG)),eG=e,tG=t}function aG(){this._string=[]}function sG(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}aG.prototype={_radius:4.5,_circle:sG(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=sG(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var uG=function(e,t){var n,r,i=4.5;function o(e){return e&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),KW(e,n(r))),r.result()}return o.area=function(e){return KW(e,n(yV)),yV.result()},o.measure=function(e){return KW(e,n(rG)),rG.result()},o.bounds=function(e){return KW(e,n(AV)),AV.result()},o.centroid=function(e){return KW(e,n(IV)),IV.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,pV):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new aG):new QV(t=e),"function"!=typeof i&&r.pointRadius(i),o):t},o.pointRadius=function(e){return arguments.length?(i="function"==typeof e?e:(r.pointRadius(+e),+e),o):i},o.projection(e).context(t)},lG=function(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:jW,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}},cG=function(e,t){return AW(e[0]-t[0])<vW&&AW(e[1]-t[1])<vW};function fG(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}var dG=function(e,t,n,r,i){var o,a,s=[],u=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(cG(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<t;++o)i.point((r=e[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}s.push(n=new fG(r,e,null,!0)),u.push(n.o=new fG(r,null,n,!1)),s.push(n=new fG(a,e,null,!1)),u.push(n.o=new fG(a,null,n,!0))}})),s.length){for(u.sort(t),hG(s),hG(u),o=0,a=u.length;o<a;++o)u[o].e=n=!n;for(var l,c,f=s[0];;){for(var d=f,h=!0;d.v;)if((d=d.n)===f)return;l=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(o=0,a=l.length;o<a;++o)i.point((c=l[o])[0],c[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(l=d.p.z,o=l.length-1;o>=0;--o)i.point((c=l[o])[0],c[1]);else r(d.x,d.p.x,-1,i);d=d.p}l=(d=d.o).z,h=!h}while(!d.v);i.lineEnd()}}};function hG(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function pG(e){return AW(e[0])<=xW?e[0]:RW(e[0])*((AW(e[0])+xW)%kW-xW)}var mG=function(e,t,n,r){return function(i){var o,a,s,u=t(i),l=lG(),c=t(l),f=!1,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,a=[],o=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,a=Jb(a);var e=function(e,t){var n=pG(t),r=t[1],i=zW(r),o=[zW(n),-MW(n),0],a=0,s=0,u=new qb;1===i?r=wW+vW:-1===i&&(r=-wW-vW);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=pG(h),m=h[1]/2+_W,g=zW(m),y=MW(m),v=0;v<d;++v,p=x,g=_,y=k,h=b){var b=f[v],x=pG(b),w=b[1]/2+_W,_=zW(w),k=MW(w),E=x-p,S=E>=0?1:-1,A=S*E,C=A>xW,D=g*_;if(u.add(DW(D*S*zW(A),y*k+D*MW(A))),a+=C?E+S*kW:E,C^p>=n^x>=n){var M=xH(vH(h),vH(b));kH(M);var F=xH(o,M);kH(F);var N=(C^E>=0?-1:1)*IW(F[2]);(r>N||r===N&&(M[0]||M[1]))&&(s+=C^E>=0?1:-1)}}return(a<-1e-6||a<vW&&u<-1e-12)^1&s}(o,r);a.length?(f||(i.polygonStart(),f=!0),dG(a,yG,e,n,i)):e&&(f||(i.polygonStart(),f=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),f&&(i.polygonEnd(),f=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(t,n){e(t,n)&&i.point(t,n)}function p(e,t){u.point(e,t)}function m(){d.point=p,u.lineStart()}function g(){d.point=h,u.lineEnd()}function y(e,t){s.push([e,t]),c.point(e,t)}function v(){c.lineStart(),s=[]}function b(){y(s[0][0],s[0][1]),c.lineEnd();var e,t,n,r,u=c.clean(),d=l.result(),h=d.length;if(s.pop(),o.push(s),s=null,h)if(1&u){if((t=(n=d[0]).length-1)>0){for(f||(i.polygonStart(),f=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else h>1&&2&u&&d.push(d.pop().concat(d.shift())),a.push(d.filter(gG))}return d}};function gG(e){return e.length>1}function yG(e,t){return((e=e.x)[0]<0?e[1]-wW-vW:wW-e[1])-((t=t.x)[0]<0?t[1]-wW-vW:wW-t[1])}var vG=mG((function(){return!0}),(function(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?xW:-xW,u=AW(o-n);AW(u-xW)<vW?(e.point(n,r=(r+a)/2>0?wW:-wW),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&u>=xW&&(AW(n-i)<vW&&(n-=i*vW),AW(o-s)<vW&&(o-=s*vW),r=function(e,t,n,r){var i,o,a=zW(e-n);return AW(a)>vW?CW((zW(t)*(o=MW(r))*zW(n)-zW(r)*(i=MW(t))*zW(e))/(i*o*a)):(t+r)/2}(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var i;if(null==e)i=n*wW,r.point(-xW,i),r.point(0,i),r.point(xW,i),r.point(xW,0),r.point(xW,-i),r.point(0,-i),r.point(-xW,-i),r.point(-xW,0),r.point(-xW,i);else if(AW(e[0]-t[0])>vW){var o=e[0]<t[0]?xW:-xW;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}),[-xW,-wW]);var bG=function(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n};function xG(e,t){return[AW(e)>xW?e+Math.round(-e/kW)*kW:e,t]}function wG(e,t,n){return(e%=kW)?t||n?bG(kG(e),EG(t,n)):kG(e):t||n?EG(t,n):xG}function _G(e){return function(t,n){return[(t+=e)>xW?t-kW:t<-xW?t+kW:t,n]}}function kG(e){var t=_G(e);return t.invert=_G(-e),t}function EG(e,t){var n=MW(e),r=zW(e),i=MW(t),o=zW(t);function a(e,t){var a=MW(t),s=MW(e)*a,u=zW(e)*a,l=zW(t),c=l*n+s*r;return[DW(u*i-c*o,s*n-l*r),IW(c*i+u*o)]}return a.invert=function(e,t){var a=MW(t),s=MW(e)*a,u=zW(e)*a,l=zW(t),c=l*i-u*o;return[DW(u*i+l*o,s*n+c*r),IW(c*n-s*r)]},a}xG.invert=xG;function SG(e,t){(t=vH(t))[0]-=e,kH(t);var n=BW(-t[1]);return((-t[2]<0?-n:n)+kW-vW)%kW}var AG=function(e){var t=MW(e),n=6*SW,r=t>0,i=AW(t)>vW;function o(e,n){return MW(e)*MW(n)>t}function a(e,n,r){var i=[1,0,0],o=xH(vH(e),vH(n)),a=bH(o,o),s=o[0],u=a-s*s;if(!u)return!r&&e;var l=t*a/u,c=-t*s/u,f=xH(i,o),d=_H(i,l);wH(d,_H(o,c));var h=f,p=bH(d,h),m=bH(h,h),g=p*p-m*(bH(d,d)-1);if(!(g<0)){var y=PW(g),v=_H(h,(-p-y)/m);if(wH(v,d),v=yH(v),!r)return v;var b,x=e[0],w=n[0],_=e[1],k=n[1];w<x&&(b=x,x=w,w=b);var E=w-x,S=AW(E-xW)<vW;if(!S&&k<_&&(b=_,_=k,k=b),S||E<vW?S?_+k>0^v[1]<(AW(v[0]-x)<vW?_:k):_<=v[1]&&v[1]<=k:E>xW^(x<=v[0]&&v[0]<=w)){var A=_H(h,(-p+y)/m);return wH(A,d),[v,yH(A)]}}}function s(t,n){var i=r?e:xW-e,o=0;return t<-i?o|=1:t>i&&(o|=2),n<-i?o|=4:n>i&&(o|=8),o}return mG(o,(function(e){var t,n,u,l,c;return{lineStart:function(){l=u=!1,c=1},point:function(f,d){var h,p=[f,d],m=o(f,d),g=r?m?0:s(f,d):m?s(f+(f<0?xW:-xW),d):0;if(!t&&(l=u=m)&&e.lineStart(),m!==u&&(!(h=a(t,p))||cG(t,h)||cG(p,h))&&(p[2]=1),m!==u)c=0,m?(e.lineStart(),h=a(p,t),e.point(h[0],h[1])):(h=a(t,p),e.point(h[0],h[1],2),e.lineEnd()),t=h;else if(i&&t&&r^m){var y;g&n||!(y=a(p,t,!0))||(c=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!m||t&&cG(t,p)||e.point(p[0],p[1]),t=p,u=m,n=g},lineEnd:function(){u&&e.lineEnd(),t=null},clean:function(){return c|(l&&u)<<1}}}),(function(t,r,i,o){!function(e,t,n,r,i,o){if(n){var a=MW(t),s=zW(t),u=r*n;null==i?(i=t+r*kW,o=t-u/2):(i=SG(a,i),o=SG(a,o),(r>0?i<o:i>o)&&(i+=r*kW));for(var l,c=i;r>0?c>o:c<o;c-=u)l=yH([a,-s*MW(c),-s*zW(c)]),e.point(l[0],l[1])}}(o,e,n,i,t,r)}),r?[0,-e]:[-xW,e-xW])},CG=1e9,DG=-1e9;function MG(e,t,n,r){function i(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function o(i,o,s,l){var c=0,f=0;if(null==i||(c=a(i,s))!==(f=a(o,s))||u(i,o)<0^s>0)do{l.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+s+4)%4)!==f);else l.point(o[0],o[1])}function a(r,i){return AW(r[0]-e)<vW?i>0?0:3:AW(r[0]-n)<vW?i>0?2:1:AW(r[1]-t)<vW?i>0?1:0:i>0?3:2}function s(e,t){return u(e.x,t.x)}function u(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(a){var u,l,c,f,d,h,p,m,g,y,v,b=a,x=lG(),w={point:_,lineStart:function(){w.point=k,l&&l.push(c=[]);y=!0,g=!1,p=m=NaN},lineEnd:function(){u&&(k(f,d),h&&g&&x.rejoin(),u.push(x.result()));w.point=_,g&&b.lineEnd()},polygonStart:function(){b=x,u=[],l=[],v=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var o,a,s=l[n],u=1,c=s.length,f=s[0],d=f[0],h=f[1];u<c;++u)o=d,a=h,d=(f=s[u])[0],h=f[1],a<=r?h>r&&(d-o)*(r-a)>(h-a)*(e-o)&&++t:h<=r&&(d-o)*(r-a)<(h-a)*(e-o)&&--t;return t}(),n=v&&t,i=(u=Jb(u)).length;(n||i)&&(a.polygonStart(),n&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&dG(u,s,t,o,a),a.polygonEnd());b=a,u=l=c=null}};function _(e,t){i(e,t)&&b.point(e,t)}function k(o,a){var s=i(o,a);if(l&&c.push([o,a]),y)f=o,d=a,h=s,y=!1,s&&(b.lineStart(),b.point(o,a));else if(s&&g)b.point(o,a);else{var u=[p=Math.max(DG,Math.min(CG,p)),m=Math.max(DG,Math.min(CG,m))],x=[o=Math.max(DG,Math.min(CG,o)),a=Math.max(DG,Math.min(CG,a))];!function(e,t,n,r,i,o){var a,s=e[0],u=e[1],l=0,c=1,f=t[0]-s,d=t[1]-u;if(a=n-s,f||!(a>0)){if(a/=f,f<0){if(a<l)return;a<c&&(c=a)}else if(f>0){if(a>c)return;a>l&&(l=a)}if(a=i-s,f||!(a<0)){if(a/=f,f<0){if(a>c)return;a>l&&(l=a)}else if(f>0){if(a<l)return;a<c&&(c=a)}if(a=r-u,d||!(a>0)){if(a/=d,d<0){if(a<l)return;a<c&&(c=a)}else if(d>0){if(a>c)return;a>l&&(l=a)}if(a=o-u,d||!(a<0)){if(a/=d,d<0){if(a>c)return;a>l&&(l=a)}else if(d>0){if(a<l)return;a<c&&(c=a)}return l>0&&(e[0]=s+l*f,e[1]=u+l*d),c<1&&(t[0]=s+c*f,t[1]=u+c*d),!0}}}}}(u,x,e,t,n,r)?s&&(b.lineStart(),b.point(o,a),v=!1):(g||(b.lineStart(),b.point(u[0],u[1])),b.point(x[0],x[1]),s||b.lineEnd(),v=!1)}p=o,m=a,g=s}return w}}function FG(e){return function(t){var n=new NG;for(var r in e)n[r]=e[r];return n.stream=t,n}}function NG(){}function OG(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),KW(n,e.stream(AV)),t(AV.result()),null!=r&&e.clipExtent(r),e}function TG(e,t,n){return OG(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],o=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),a=+t[0][0]+(r-o*(n[1][0]+n[0][0]))/2,s=+t[0][1]+(i-o*(n[1][1]+n[0][1]))/2;e.scale(150*o).translate([a,s])}),n)}function $G(e,t,n){return TG(e,[[0,0],t],n)}function zG(e,t,n){return OG(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),o=(r-i*(n[1][0]+n[0][0]))/2,a=-i*n[0][1];e.scale(150*i).translate([o,a])}),n)}function RG(e,t,n){return OG(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),o=-i*n[0][0],a=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([o,a])}),n)}NG.prototype={constructor:NG,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var PG=MW(30*SW),LG=function(e,t){return+t?function(e,t){function n(r,i,o,a,s,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var x=a+d,w=s+h,_=u+p,k=PW(x*x+w*w+_*_),E=IW(_/=k),S=AW(AW(_)-1)<vW||AW(o-f)<vW?(o+f)/2:DW(w,x),A=e(S,E),C=A[0],D=A[1],M=C-r,F=D-i,N=v*M-y*F;(N*N/b>t||AW((y*M+v*F)/b-.5)>.3||a*d+s*h+u*p<PG)&&(n(r,i,o,a,s,u,C,D,S,x/=k,w/=k,_,m,g),g.point(C,D),n(C,D,S,x,w,_,l,c,f,d,h,p,m,g))}}return function(t){var r,i,o,a,s,u,l,c,f,d,h,p,m={point:g,lineStart:y,lineEnd:b,polygonStart:function(){t.polygonStart(),m.lineStart=x},polygonEnd:function(){t.polygonEnd(),m.lineStart=y}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function y(){c=NaN,m.point=v,t.lineStart()}function v(r,i){var o=vH([r,i]),a=e(r,i);n(c,f,l,d,h,p,c=a[0],f=a[1],l=r,d=o[0],h=o[1],p=o[2],16,t),t.point(c,f)}function b(){m.point=g,t.lineEnd()}function x(){y(),m.point=w,m.lineEnd=_}function w(e,t){v(r=e,t),i=c,o=f,a=d,s=h,u=p,m.point=v}function _(){n(c,f,l,d,h,p,i,o,r,a,s,u,16,t),m.lineEnd=b,b()}return m}}(e,t):function(e){return FG({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)};var BG=FG({point:function(e,t){this.stream.point(e*SW,t*SW)}});function IG(e,t,n,r,i,o){if(!o)return function(e,t,n,r,i){function o(o,a){return[t+e*(o*=r),n-e*(a*=i)]}return o.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},o}(e,t,n,r,i);var a=MW(o),s=zW(o),u=a*e,l=s*e,c=a/e,f=s/e,d=(s*n-a*t)/e,h=(s*t+a*n)/e;function p(e,o){return[u*(e*=r)-l*(o*=i)+t,n-l*e-u*o]}return p.invert=function(e,t){return[r*(c*e-f*t+d),i*(h-f*e-c*t)]},p}function jG(e){return UG((function(){return e}))()}function UG(e){var t,n,r,i,o,a,s,u,l,c,f=150,d=480,h=250,p=0,m=0,g=0,y=0,v=0,b=0,x=1,w=1,_=null,k=vG,E=null,S=pV,A=.5;function C(e){return u(e[0]*SW,e[1]*SW)}function D(e){return(e=u.invert(e[0],e[1]))&&[e[0]*EW,e[1]*EW]}function M(){var e=IG(f,0,0,x,w,b).apply(null,t(p,m)),r=IG(f,d-e[0],h-e[1],x,w,b);return n=wG(g,y,v),s=bG(t,r),u=bG(n,s),a=LG(s,A),F()}function F(){return l=c=null,C}return C.stream=function(e){return l&&c===e?l:l=BG(function(e){return FG({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(k(a(S(c=e)))))},C.preclip=function(e){return arguments.length?(k=e,_=void 0,F()):k},C.postclip=function(e){return arguments.length?(S=e,E=r=i=o=null,F()):S},C.clipAngle=function(e){return arguments.length?(k=+e?AG(_=e*SW):(_=null,vG),F()):_*EW},C.clipExtent=function(e){return arguments.length?(S=null==e?(E=r=i=o=null,pV):MG(E=+e[0][0],r=+e[0][1],i=+e[1][0],o=+e[1][1]),F()):null==E?null:[[E,r],[i,o]]},C.scale=function(e){return arguments.length?(f=+e,M()):f},C.translate=function(e){return arguments.length?(d=+e[0],h=+e[1],M()):[d,h]},C.center=function(e){return arguments.length?(p=e[0]%360*SW,m=e[1]%360*SW,M()):[p*EW,m*EW]},C.rotate=function(e){return arguments.length?(g=e[0]%360*SW,y=e[1]%360*SW,v=e.length>2?e[2]%360*SW:0,M()):[g*EW,y*EW,v*EW]},C.angle=function(e){return arguments.length?(b=e%360*SW,M()):b*EW},C.reflectX=function(e){return arguments.length?(x=e?-1:1,M()):x<0},C.reflectY=function(e){return arguments.length?(w=e?-1:1,M()):w<0},C.precision=function(e){return arguments.length?(a=LG(s,A=e*e),F()):PW(A)},C.fitExtent=function(e,t){return TG(C,e,t)},C.fitSize=function(e,t){return $G(C,e,t)},C.fitWidth=function(e,t){return zG(C,e,t)},C.fitHeight=function(e,t){return RG(C,e,t)},function(){return t=e.apply(this,arguments),C.invert=t.invert&&D,M()}}function qG(e){var t=0,n=xW/3,r=UG(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*SW,n=e[1]*SW):[t*EW,n*EW]},i}function WG(e,t){var n=zW(e),r=(n+zW(t))/2;if(AW(r)<vW)return function(e){var t=MW(e);function n(e,n){return[e*t,zW(n)/t]}return n.invert=function(e,n){return[e/t,IW(n*t)]},n}(e);var i=1+n*(2*r-n),o=PW(i)/r;function a(e,t){var n=PW(i-2*r*zW(t))/r;return[n*zW(e*=r),o-n*MW(e)]}return a.invert=function(e,t){var n=o-t,a=DW(e,AW(n))*RW(n);return n*r<0&&(a-=xW*RW(e)*RW(n)),[a/r,IW((i-(e*e+n*n)*r*r)/(2*r))]},a}var HG=function(){return qG(WG).scale(155.424).center([0,33.6442])},VG=function(){return HG().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};function GG(e){return function(t,n){var r=MW(t),i=MW(n),o=e(r*i);return o===1/0?[2,0]:[o*i*zW(t),o*zW(n)]}}function YG(e){return function(t,n){var r=PW(t*t+n*n),i=e(r),o=zW(i),a=MW(i);return[DW(t*o,r*a),IW(r&&n*o/r)]}}var XG=GG((function(e){return PW(2/(1+e))}));XG.invert=YG((function(e){return 2*IW(e/2)}));var QG=GG((function(e){return(e=BW(e))&&e/zW(e)}));QG.invert=YG((function(e){return e}));function JG(e,t){return[e,TW(LW((wW+t)/2))]}JG.invert=function(e,t){return[e,2*CW(NW(t))-wW]};function KG(e){var t,n,r,i=jG(e),o=i.center,a=i.scale,s=i.translate,u=i.clipExtent,l=null;function c(){var o=xW*a(),s=i(function(e){function t(t){return(t=e(t[0]*SW,t[1]*SW))[0]*=EW,t[1]*=EW,t}return e=wG(e[0]*SW,e[1]*SW,e.length>2?e[2]*SW:0),t.invert=function(t){return(t=e.invert(t[0]*SW,t[1]*SW))[0]*=EW,t[1]*=EW,t},t}(i.rotate()).invert([0,0]));return u(null==l?[[s[0]-o,s[1]-o],[s[0]+o,s[1]+o]]:e===JG?[[Math.max(s[0]-o,l),t],[Math.min(s[0]+o,n),r]]:[[l,Math.max(s[1]-o,t)],[n,Math.min(s[1]+o,r)]])}return i.scale=function(e){return arguments.length?(a(e),c()):a()},i.translate=function(e){return arguments.length?(s(e),c()):s()},i.center=function(e){return arguments.length?(o(e),c()):o()},i.clipExtent=function(e){return arguments.length?(null==e?l=t=n=r=null:(l=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),c()):null==l?null:[[l,t],[n,r]]},c()}function ZG(e){return LW((wW+e)/2)}function eY(e,t){var n=MW(e),r=e===t?zW(e):TW(n/MW(t))/TW(ZG(t)/ZG(e)),i=n*$W(ZG(e),r)/r;if(!r)return JG;function o(e,t){i>0?t<-wW+vW&&(t=-wW+vW):t>wW-vW&&(t=wW-vW);var n=i/$W(ZG(t),r);return[n*zW(r*e),i-n*MW(r*e)]}return o.invert=function(e,t){var n=i-t,o=RW(r)*PW(e*e+n*n),a=DW(e,AW(n))*RW(n);return n*r<0&&(a-=xW*RW(e)*RW(n)),[a/r,2*CW($W(i/o,1/r))-wW]},o}function tY(e,t){return[e,t]}tY.invert=tY;function nY(e,t){var n=MW(e),r=e===t?zW(e):(n-MW(t))/(t-e),i=n/r+e;if(AW(r)<vW)return tY;function o(e,t){var n=i-t,o=r*e;return[n*zW(o),i-n*MW(o)]}return o.invert=function(e,t){var n=i-t,o=DW(e,AW(n))*RW(n);return n*r<0&&(o-=xW*RW(e)*RW(n)),[o/r,i-RW(r)*PW(e*e+n*n)]},o}var rY=1.340264,iY=-.081106,oY=893e-6,aY=.003796,sY=PW(3)/2;function uY(e,t){var n=IW(sY*zW(t)),r=n*n,i=r*r*r;return[e*MW(n)/(sY*(rY+-.24331799999999998*r+i*(.0062510000000000005+.034164*r))),n*(rY+iY*r+i*(oY+aY*r))]}uY.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(rY+iY*i+o*(oY+aY*i))-t)/(rY+-.24331799999999998*i+o*(.0062510000000000005+.034164*i)))*r)*i*i,!(AW(n)<bW));++a);return[sY*e*(rY+-.24331799999999998*i+o*(.0062510000000000005+.034164*i))/MW(r),IW(zW(r)/sY)]};function lY(e,t){var n=MW(t),r=MW(e)*n;return[n*zW(e)/r,zW(t)/r]}lY.invert=YG(CW);function cY(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}cY.invert=function(e,t){var n,r=t,i=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(AW(n)>vW&&--i>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]};function fY(e,t){return[MW(t)*zW(e),zW(t)]}fY.invert=YG(IW);function dY(e,t){var n=MW(t),r=1+MW(e)*n;return[n*zW(e)/r,zW(t)/r]}dY.invert=YG((function(e){return 2*CW(e)}));function hY(e,t){return[TW(LW((wW+t)/2)),-e]}hY.invert=function(e,t){return[-t,2*CW(NW(e))-wW]};var pY=Math.abs,mY=(Math.atan,Math.atan2,Math.ceil,Math.cos),gY=(Math.exp,Math.floor,Math.log,Math.max,Math.min,Math.pow,Math.round,Math.sign,Math.sin),yY=(Math.tan,Math.PI),vY=yY/2,bY=(Math.SQRT1_2,wY(2));wY(yY);function xY(e){return e>1?vY:e<-1?-vY:Math.asin(e)}function wY(e){return e>0?Math.sqrt(e):0}function _Y(e,t){var n,r=e*gY(t),i=30;do{t-=n=(t+gY(t)-r)/(1+mY(t))}while(pY(n)>1e-6&&--i>0);return t/2}var kY=function(e,t,n){function r(r,i){return[e*r*mY(i=_Y(n,i)),t*gY(i)]}return r.invert=function(r,i){return i=xY(i/t),[r/(e*mY(i)),xY((2*i+gY(2*i))/n)]},r}(bY/vY,bY,yY);const EY=uG(),SY=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function AY(e,t){return function n(){const r=t();return r.type=e,r.path=uG().projection(r),r.copy=r.copy||function(){const e=n();return SY.forEach((t=>{r[t]&&e[t](r[t]())})),e.path.pointRadius(r.path.pointRadius()),e},r}}function CY(e,t){if(!e||"string"!=typeof e)throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(MY[e]=AY(e,t),this):MY[e]||null}function DY(e){return e&&e.path||EY}const MY={albers:VG,albersusa:function(){var e,t,n,r,i,o,a=VG(),s=HG().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=HG().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,t){o=[e,t]}};function c(e){var t=e[0],a=e[1];return o=null,n.point(t,a),o||(r.point(t,a),o)||(i.point(t,a),o)}function f(){return e=t=null,c}return c.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?s:i>=.166&&i<.234&&r>=-.214&&r<-.115?u:a).invert(e)},c.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),s.stream(n),u.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},c.precision=function(e){return arguments.length?(a.precision(e),s.precision(e),u.precision(e),f()):a.precision()},c.scale=function(e){return arguments.length?(a.scale(e),s.scale(.35*e),u.scale(e),c.translate(a.translate())):a.scale()},c.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],c=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,c-.238*t],[o+.455*t,c+.238*t]]).stream(l),r=s.translate([o-.307*t,c+.201*t]).clipExtent([[o-.425*t+vW,c+.12*t+vW],[o-.214*t-vW,c+.234*t-vW]]).stream(l),i=u.translate([o-.205*t,c+.212*t]).clipExtent([[o-.214*t+vW,c+.166*t+vW],[o-.115*t-vW,c+.234*t-vW]]).stream(l),f()},c.fitExtent=function(e,t){return TG(c,e,t)},c.fitSize=function(e,t){return $G(c,e,t)},c.fitWidth=function(e,t){return zG(c,e,t)},c.fitHeight=function(e,t){return RG(c,e,t)},c.scale(1070)},azimuthalequalarea:function(){return jG(XG).scale(124.75).clipAngle(179.999)},azimuthalequidistant:function(){return jG(QG).scale(79.4188).clipAngle(179.999)},conicconformal:function(){return qG(eY).scale(109.5).parallels([30,30])},conicequalarea:HG,conicequidistant:function(){return qG(nY).scale(131.154).center([0,13.9389])},equalEarth:function(){return jG(uY).scale(177.158)},equirectangular:function(){return jG(tY).scale(152.63)},gnomonic:function(){return jG(lY).scale(144.049).clipAngle(60)},identity:function(){var e,t,n,r,i,o,a,s=1,u=0,l=0,c=1,f=1,d=0,h=null,p=1,m=1,g=FG({point:function(e,t){var n=b([e,t]);this.stream.point(n[0],n[1])}}),y=pV;function v(){return p=s*c,m=s*f,o=a=null,b}function b(n){var r=n[0]*p,i=n[1]*m;if(d){var o=i*e-r*t;r=r*e+i*t,i=o}return[r+u,i+l]}return b.invert=function(n){var r=n[0]-u,i=n[1]-l;if(d){var o=i*e+r*t;r=r*e-i*t,i=o}return[r/p,i/m]},b.stream=function(e){return o&&a===e?o:o=g(y(a=e))},b.postclip=function(e){return arguments.length?(y=e,h=n=r=i=null,v()):y},b.clipExtent=function(e){return arguments.length?(y=null==e?(h=n=r=i=null,pV):MG(h=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),v()):null==h?null:[[h,n],[r,i]]},b.scale=function(e){return arguments.length?(s=+e,v()):s},b.translate=function(e){return arguments.length?(u=+e[0],l=+e[1],v()):[u,l]},b.angle=function(n){return arguments.length?(t=zW(d=n%360*SW),e=MW(d),v()):d*EW},b.reflectX=function(e){return arguments.length?(c=e?-1:1,v()):c<0},b.reflectY=function(e){return arguments.length?(f=e?-1:1,v()):f<0},b.fitExtent=function(e,t){return TG(b,e,t)},b.fitSize=function(e,t){return $G(b,e,t)},b.fitWidth=function(e,t){return zG(b,e,t)},b.fitHeight=function(e,t){return RG(b,e,t)},b},mercator:function(){return KG(JG).scale(961/kW)},mollweide:function(){return jG(kY).scale(169.529)},naturalEarth1:function(){return jG(cY).scale(175.295)},orthographic:function(){return jG(fY).scale(249.5).clipAngle(90.000001)},stereographic:function(){return jG(dY).scale(250).clipAngle(142)},transversemercator:function(){var e=KG(hY),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}};for(const e in MY)CY(e,MY[e]);function FY(){}const NY=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function OY(){var e=1,t=1,n=a;function r(e,t){return t.map((t=>i(e,t)))}function i(r,i){var a=[],s=[];return function(n,r,i){var a,s,u,l,c,f,d=new Array,h=new Array;a=s=-1,l=n[0]>=r,NY[l<<1].forEach(p);for(;++a<e-1;)u=l,l=n[a+1]>=r,NY[u|l<<1].forEach(p);NY[l<<0].forEach(p);for(;++s<t-1;){for(a=-1,l=n[s*e+e]>=r,c=n[s*e]>=r,NY[l<<1|c<<2].forEach(p);++a<e-1;)u=l,l=n[s*e+e+a+1]>=r,f=c,c=n[s*e+a+1]>=r,NY[u|l<<1|c<<2|f<<3].forEach(p);NY[l|c<<3].forEach(p)}a=-1,c=n[s*e]>=r,NY[c<<2].forEach(p);for(;++a<e-1;)f=c,c=n[s*e+a+1]>=r,NY[c<<2|f<<3].forEach(p);function p(e){var t,n,r=[e[0][0]+a,e[0][1]+s],u=[e[1][0]+a,e[1][1]+s],l=o(r),c=o(u);(t=h[l])?(n=d[c])?(delete h[t.end],delete d[n.start],t===n?(t.ring.push(u),i(t.ring)):d[t.start]=h[n.end]={start:t.start,end:n.end,ring:t.ring.concat(n.ring)}):(delete h[t.end],t.ring.push(u),h[t.end=c]=t):(t=d[c])?(n=h[l])?(delete d[t.start],delete h[n.end],t===n?(t.ring.push(u),i(t.ring)):d[n.start]=h[t.end]={start:n.start,end:t.end,ring:n.ring.concat(t.ring)}):(delete d[t.start],t.ring.unshift(r),d[t.start=l]=t):d[l]=h[c]={start:l,end:c,ring:[r,u]}}NY[c<<3].forEach(p)}(r,i,(e=>{n(e,r,i),function(e){var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];for(;++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}(e)>0?a.push([e]):s.push(e)})),s.forEach((e=>{for(var t,n=0,r=a.length;n<r;++n)if(-1!==TY((t=a[n])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:i,coordinates:a}}function o(t){return 2*t[0]+t[1]*(e+1)*4}function a(n,r,i){n.forEach((n=>{var o,a=n[0],s=n[1],u=0|a,l=0|s,c=r[l*e+u];a>0&&a<e&&u===a&&(o=r[l*e+u-1],n[0]=a+(i-o)/(c-o)-.5),s>0&&s<t&&l===s&&(o=r[(l-1)*e+u],n[1]=s+(i-o)/(c-o)-.5)}))}return r.contour=i,r.size=function(n){if(!arguments.length)return[e,t];var i=Math.floor(n[0]),o=Math.floor(n[1]);return i>=0&&o>=0||zC("invalid size"),e=i,t=o,r},r.smooth=function(e){return arguments.length?(n=e?a:FY,r):n===a},r}function TY(e,t){for(var n,r=-1,i=t.length;++r<i;)if(n=$Y(e,t[r]))return n;return 0}function $Y(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var u=e[o],l=u[0],c=u[1],f=e[s],d=f[0],h=f[1];if(zY(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function zY(e,t,n){var r,i,o,a;return function(e,t,n){return(t[0]-e[0])*(n[1]-e[1])==(n[0]-e[0])*(t[1]-e[1])}(e,t,n)&&(i=e[r=+(e[0]===t[0])],o=n[r],a=t[r],i<=o&&o<=a||a<=o&&o<=i)}function RY(e,t,n){return function(r){var i=DD(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,u=t?ox(o,a,e):s/(e+1);return Kb(o+u,a,u)}}function PY(e){XO.call(this,null,e)}function LY(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function u(e){e.forEach(l)}function l(e){s&&e.reverse(),e.forEach(c)}function c(e){e[0]=(e[0]-o)*t+r,e[1]=(e[1]-a)*n+i}return function(e){return e.coordinates.forEach(u),e}}function BY(e,t,n){const r=e>=0?e:iT(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function IY(e){return bD(e)?e:SD(+e)}function jY(){var e=e=>e[0],t=e=>e[1],n=jC,r=[-1,-1],i=960,o=500,a=2;function s(s,u){const l=BY(r[0],s,e)>>a,c=BY(r[1],s,t)>>a,f=l?l+2:0,d=c?c+2:0,h=2*f+(i>>a),p=2*d+(o>>a),m=new Float32Array(h*p),g=new Float32Array(h*p);let y=m;s.forEach((r=>{const i=f+(+e(r)>>a),o=d+(+t(r)>>a);i>=0&&i<h&&o>=0&&o<p&&(m[i+o*h]+=+n(r))})),l>0&&c>0?(UY(h,p,m,g,l),qY(h,p,g,m,c),UY(h,p,m,g,l),qY(h,p,g,m,c),UY(h,p,m,g,l),qY(h,p,g,m,c)):l>0?(UY(h,p,m,g,l),UY(h,p,g,m,l),UY(h,p,m,g,l),y=g):c>0&&(qY(h,p,m,g,c),qY(h,p,g,m,c),qY(h,p,m,g,c),y=g);const v=u?Math.pow(2,-2*a):1/Zb(y);for(let e=0,t=h*p;e<t;++e)y[e]*=v;return{values:y,scale:1<<a,width:h,height:p,x1:f,y1:d,x2:f+(i>>a),y2:d+(o>>a)}}return s.x=function(t){return arguments.length?(e=IY(t),s):e},s.y=function(e){return arguments.length?(t=IY(e),s):t},s.weight=function(e){return arguments.length?(n=IY(e),s):n},s.size=function(e){if(!arguments.length)return[i,o];var t=+e[0],n=+e[1];return t>=0&&n>=0||zC("invalid size"),i=t,o=n,s},s.cellSize=function(e){return arguments.length?((e=+e)>=1||zC("invalid cell size"),a=Math.floor(Math.log(e)/Math.LN2),s):1<<a},s.bandwidth=function(e){return arguments.length?(1===(e=yD(e)).length&&(e=[+e[0],+e[0]]),2!==e.length&&zC("invalid bandwidth"),r=e,s):r},s}function UY(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<t;++a)for(let t=0,s=0;t<e+i;++t)t<e&&(s+=n[t+a*e]),t>=i&&(t>=o&&(s-=n[t-o+a*e]),r[t-i+a*e]=s/Math.min(t+1,e-1+o-t,o))}function qY(e,t,n,r,i){const o=1+(i<<1);for(let a=0;a<e;++a)for(let s=0,u=0;s<t+i;++s)s<t&&(u+=n[a+s*e]),s>=i&&(s>=o&&(u-=n[a+(s-o)*e]),r[a+(s-i)*e]=u/Math.min(s+1,t-1+o-s,o))}function WY(e){XO.call(this,null,e)}PY.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]},zD(PY,XO,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||BC,o=OY().smooth(!1!==e.smooth),a=e.thresholds||function(e,t,n){const r=RY(n.levels||10,n.nice,!1!==n.zero);return"shared"!==n.resolve?r:r(e.map((e=>Wb(t(e).values))))}(r,i,e),s=null===e.as?null:e.as||"contour",u=[];return r.forEach((t=>{const n=i(t),r=o.size([n.width,n.height])(n.values,VC(a)?a:a(n.values));!function(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;bD(i)&&(i=i(n,r));bD(o)&&(o=o(n,r));if((1===i||null==i)&&!o)return;const a=(ID(i)?i:i[0])||1,s=(ID(i)?i:i[1])||1,u=o&&o[0]||0,l=o&&o[1]||0;e.forEach(LY(t,a,s,u,l))}(r,n,t,e),r.forEach((e=>{u.push(xO(t,vO(null!=s?{[s]:e}:e)))}))})),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}}),WY.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const HY=["x","y","weight","size","cellSize","bandwidth"];function VY(e,t){return HY.forEach((n=>null!=t[n]?e[n](t[n]):0)),e}function GY(e){XO.call(this,null,e)}zD(WY,XO,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=function(e,t){var n,r,i,o,a,s,u=[],l=e=>e(o);if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}(t.materialize(t.SOURCE).source,e.groupby),o=(e.groupby||[]).map(FC),a=VY(jY(),e),s=e.as||"grid";return n=i.map((t=>vO(function(e,t){for(let n=0;n<o.length;++n)e[o[n]]=t[n];return e}({[s]:a(t,e.counts)},t.dims)))),this.value&&(r.rem=this.value),this.value=r.source=r.add=n,r}}),GY.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]},zD(GY,XO,{transform:function(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n,r,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),o=OY().smooth(!1!==e.smooth),a=e.values,s=e.thresholds||RY(e.count||10,e.nice,!!a),u=e.size;return a||(a=t.materialize(t.SOURCE).source,r=LY(n=VY(jY(),e)(a,!0),n.scale||1,n.scale||1,0,0),u=[n.width,n.height],a=n.values),s=VC(s)?s:s(a),a=o.size(u)(a,s),r&&a.forEach(r),this.value&&(i.rem=this.value),this.value=i.source=i.add=(a||[]).map(vO),i}});const YY="Feature",XY="FeatureCollection";function QY(e){XO.call(this,null,e)}function JY(e){XO.call(this,null,e)}function KY(e){XO.call(this,null,e)}function ZY(e){XO.call(this,null,e)}function eX(e){XO.call(this,[],e),this.generator=function(){var e,t,n,r,i,o,a,s,u,l,c,f,d=10,h=d,p=90,m=360,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Kb(FW(r/p)*p,n,p).map(c).concat(Kb(FW(s/m)*m,a,m).map(f)).concat(Kb(FW(t/d)*d,e,d).filter((function(e){return AW(e%p)>vW})).map(u)).concat(Kb(FW(o/h)*h,i,h).filter((function(e){return AW(e%m)>vW})).map(l))}return y.lines=function(){return v().map((function(e){return{type:"LineString",coordinates:e}}))},y.outline=function(){return{type:"Polygon",coordinates:[c(r).concat(f(a).slice(1),c(n).reverse().slice(1),f(s).reverse().slice(1))]}},y.extent=function(e){return arguments.length?y.extentMajor(e).extentMinor(e):y.extentMinor()},y.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],s=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),s>a&&(e=s,s=a,a=e),y.precision(g)):[[r,s],[n,a]]},y.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],i=+n[1][1],t>e&&(n=t,t=e,e=n),o>i&&(n=o,o=i,i=n),y.precision(g)):[[t,o],[e,i]]},y.step=function(e){return arguments.length?y.stepMajor(e).stepMinor(e):y.stepMinor()},y.stepMajor=function(e){return arguments.length?(p=+e[0],m=+e[1],y):[p,m]},y.stepMinor=function(e){return arguments.length?(d=+e[0],h=+e[1],y):[d,h]},y.precision=function(d){return arguments.length?(g=+d,u=uV(o,i,90),l=lV(t,e,g),c=uV(s,a,90),f=lV(r,n,g),y):g},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}()}function tX(e){XO.call(this,null,e)}function nX(e){if(!bD(e))return!1;const t=tM(NC(e));return t.$x||t.$y||t.$value||t.$max}function rX(e){XO.call(this,null,e),this.modified(!0)}function iX(e,t,n){bD(e[t])&&e[t](n)}QY.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]},zD(QY,XO,{transform:function(e,t){var n,r=this._features,i=this._points,o=e.fields,a=o&&o[0],s=o&&o[1],u=e.geojson||!o&&BC,l=t.ADD;n=e.modified()||t.changed(t.REM)||t.modified(NC(u))||a&&t.modified(NC(a))||s&&t.modified(NC(s)),this.value&&!n||(l=t.SOURCE,this._features=r=[],this._points=i=[]),u&&t.visit(l,(e=>r.push(u(e)))),a&&s&&(t.visit(l,(e=>{var t=a(e),n=s(e);null!=t&&null!=n&&(t=+t)===t&&(n=+n)===n&&i.push([t,n])})),r=r.concat({type:YY,geometry:{type:"MultiPoint",coordinates:i}})),this.value={type:XY,features:r}}}),JY.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]},zD(JY,XO,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||BC,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=DY(e.projection),n.materialize().reflow()):a=i===BC||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=function(e,t){const n=e.pointRadius();e.context(null),null!=t&&e.pointRadius(t);return n}(r,e.pointRadius);return n.visit(a,(e=>e[o]=r(i(e)))),r.pointRadius(s),n.modifies(o)}}),KY.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]},zD(KY,XO,{transform:function(e,t){var n,r=e.projection,i=e.fields[0],o=e.fields[1],a=e.as||["x","y"],s=a[0],u=a[1];function l(e){const t=r([i(e),o(e)]);t?(e[s]=t[0],e[u]=t[1]):(e[s]=void 0,e[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(n=t.modified(i.fields)||t.modified(o.fields),t.visit(n?t.ADD_MOD:t.ADD,l)),t.modifies(a)}}),ZY.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]},zD(ZY,XO,{transform:function(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return r&&!e.modified()||(this.value=r=function(e,t,n){const r=null==n?n=>e(t(n)):r=>{var i=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(i),o};return r.context=t=>(e.context(t),r),r}(DY(e.projection),e.field||PC("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,(e=>e[i]=r)),n.modifies(i)}}),eX.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]},zD(eX,XO,{transform:function(e,t){var n,r=this.value,i=this.generator;if(!r.length||e.modified())for(const t in e)bD(i[t])&&i[t](e[t]);return n=i(),r.length?t.mod.push(wO(r[0],n)):t.add.push(vO(n)),r[0]=n,t}}),tX.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]},zD(tX,XO,{transform:function(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r="shared"===e.resolve,i=e.field||BC,o=function(e,t){let n;bD(e)?(n=n=>e(n,t),n.dep=nX(e)):e?n=SD(e):(n=e=>e.$value/e.$max||0,n.dep=!0);return n}(e.opacity,e),a=function(e,t){let n;bD(e)?(n=n=>Kg(e(n,t)),n.dep=nX(e)):n=SD(Kg(e||"#888"));return n}(e.color,e),s=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?Wb(n.map((e=>Wb(i(e).values)))):0};return n.forEach((e=>{const t=i(e),n=CD({},e,u);r||(n.$max=Wb(t.values||[])),e[s]=function(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,u=e.x2||i,l=e.y2||o,c=e.values,f=c?e=>c[e]:IC,d=PR(u-a,l-s),h=d.getContext("2d"),p=h.getImageData(0,0,u-a,l-s),m=p.data;for(let e=s,o=0;e<l;++e){t.$y=e-s;for(let s=a,l=e*i;s<u;++s,o+=4){t.$x=s-a,t.$value=f(s+l);const e=n(t);m[o+0]=e.r,m[o+1]=e.g,m[o+2]=e.b,m[o+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}(t,n,a.dep?a:SD(a(n)),o.dep?o:SD(o(n)))})),t.reflow(!0).modifies(s)}}),zD(rX,XO,{transform:function(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=function(e){const t=CY((e||"mercator").toLowerCase());t||zC("Unrecognized projection type: "+e);return t()}(e.type),SY.forEach((t=>{null!=e[t]&&iX(n,t,e[t])}))):SY.forEach((t=>{e.modified(t)&&iX(n,t,e[t])})),null!=e.pointRadius&&n.path.pointRadius(e.pointRadius),e.fit&&function(e,t){const n=function(e){return 1===(e=yD(e)).length?e[0]:{type:XY,features:e.reduce(((e,t)=>e.concat(function(e){return e.type===XY?e.features:yD(e).filter((e=>null!=e)).map((e=>e.type===YY?e:{type:YY,geometry:e}))}(t))),[])}}(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}}),n(yW,"projection",(function(){return rX})),n(yW,"kde2d",(function(){return WY})),n(yW,"isocontour",(function(){return PY})),n(yW,"heatmap",(function(){return tX})),n(yW,"graticule",(function(){return eX})),n(yW,"geoshape",(function(){return ZY})),n(yW,"geopoint",(function(){return KY})),n(yW,"geopath",(function(){return JY})),n(yW,"geojson",(function(){return QY})),n(yW,"contour",(function(){return GY}));var oX={};function aX(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o,a,s,u,l,c,f,d,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a,i=h,!(h=h[f=c<<1|l]))return i[f]=p,e;if(s=+e._x.call(null,h.data),u=+e._y.call(null,h.data),t===s&&n===u)return p.next=h,i?i[f]=p:e._root=p,e;do{i=i?i[f]=new Array(4):e._root=new Array(4),(l=t>=(o=(m+y)/2))?m=o:y=o,(c=n>=(a=(g+v)/2))?g=a:v=a}while((f=c<<1|l)==(d=(u>=a)<<1|s>=o));return i[d]=h,i[f]=p,e}var sX=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i};function uX(e){return e[0]}function lX(e){return e[1]}function cX(e,t,n){var r=new fX(null==t?uX:t,null==n?lX:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function fX(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function dX(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var hX=cX.prototype=fX.prototype;hX.copy=function(){var e,t,n=new fX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=dX(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=dX(t));return n},hX.add=function(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return aX(this.cover(t,n),t,n,e)},hX.addAll=function(e){var t,n,r,i,o=e.length,a=new Array(o),s=new Array(o),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<o;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(i=+this._y.call(null,t))||(a[n]=r,s[n]=i,r<u&&(u=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<o;++n)aX(this,a[n],s[n],e[n]);return this},hX.cover=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a,s,u=i-n||1,l=this._root;n>e||e>=i||r>t||t>=o;)switch(s=(t<r)<<1|e<n,(a=new Array(4))[s]=l,l=a,u*=2,s){case 0:i=n+u,o=r+u;break;case 1:n=i-u,o=r+u;break;case 2:i=n+u,r=o-u;break;case 3:n=i-u,r=o-u}this._root&&this._root.length&&(this._root=l)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this},hX.data=function(){var e=[];return this.visit((function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)})),e},hX.extent=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},hX.find=function(e,t,n){var r,i,o,a,s,u,l,c=this._x0,f=this._y0,d=this._x1,h=this._y1,p=[],m=this._root;for(m&&p.push(new sX(m,c,f,d,h)),null==n?n=1/0:(c=e-n,f=t-n,d=e+n,h=t+n,n*=n);u=p.pop();)if(!(!(m=u.node)||(i=u.x0)>d||(o=u.y0)>h||(a=u.x1)<c||(s=u.y1)<f))if(m.length){var g=(i+a)/2,y=(o+s)/2;p.push(new sX(m[3],g,y,a,s),new sX(m[2],i,y,g,s),new sX(m[1],g,o,a,y),new sX(m[0],i,o,g,y)),(l=(t>=y)<<1|e>=g)&&(u=p[p.length-1],p[p.length-1]=p[p.length-1-l],p[p.length-1-l]=u)}else{var v=e-+this._x.call(null,m.data),b=t-+this._y.call(null,m.data),x=v*v+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,f=t-w,d=e+w,h=t+w,r=m.data}}return r},hX.remove=function(e){if(isNaN(o=+this._x.call(null,e))||isNaN(a=+this._y.call(null,e)))return this;var t,n,r,i,o,a,s,u,l,c,f,d,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((l=o>=(s=(p+g)/2))?p=s:g=s,(c=a>=(u=(m+y)/2))?m=u:y=u,t=h,!(h=h[f=c<<1|l]))return this;if(!h.length)break;(t[f+1&3]||t[f+2&3]||t[f+3&3])&&(n=t,d=f)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[f]=i:delete t[f],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[d]=h:this._root=h),this):(this._root=i,this)},hX.removeAll=function(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this},hX.root=function(){return this._root},hX.size=function(){var e=0;return this.visit((function(t){if(!t.length)do{++e}while(t=t.next)})),e},hX.visit=function(e){var t,n,r,i,o,a,s=[],u=this._root;for(u&&s.push(new sX(u,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(u=t.node,r=t.x0,i=t.y0,o=t.x1,a=t.y1)&&u.length){var l=(r+o)/2,c=(i+a)/2;(n=u[3])&&s.push(new sX(n,l,c,o,a)),(n=u[2])&&s.push(new sX(n,r,c,l,a)),(n=u[1])&&s.push(new sX(n,l,i,o,c)),(n=u[0])&&s.push(new sX(n,r,i,l,c))}return this},hX.visitAfter=function(e){var t,n=[],r=[];for(this._root&&n.push(new sX(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var o,a=t.x0,s=t.y0,u=t.x1,l=t.y1,c=(a+u)/2,f=(s+l)/2;(o=i[0])&&n.push(new sX(o,a,s,c,f)),(o=i[1])&&n.push(new sX(o,c,s,u,f)),(o=i[2])&&n.push(new sX(o,a,f,c,l)),(o=i[3])&&n.push(new sX(o,c,f,u,l))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},hX.x=function(e){return arguments.length?(this._x=e,this):this._x},hX.y=function(e){return arguments.length?(this._y=e,this):this._y};var pX=function(e){return function(){return e}},mX=function(e){return 1e-6*(e()-.5)};function gX(e){return e.x+e.vx}function yX(e){return e.y+e.vy}function vX(e){return e.index}function bX(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}const xX=4294967296;function wX(e){return e.x}function _X(e){return e.y}var kX=Math.PI*(3-Math.sqrt(5)),EX=function(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,u=qv(f),l=cm("tick","end"),c=function(){let e=1;return()=>(e=(1664525*e+1013904223)%xX)/xX}();function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(r){var u,l,c=e.length;void 0===r&&(r=1);for(var f=0;f<r;++f)for(n+=(o-n)*i,s.forEach((function(e){e(n)})),u=0;u<c;++u)null==(l=e[u]).fx?l.x+=l.vx*=a:(l.x=l.fx,l.vx=0),null==l.fy?l.y+=l.vy*=a:(l.y=l.fy,l.vy=0);return t}function h(){for(var t,n=0,r=e.length;n<r;++n){if((t=e[n]).index=n,null!=t.fx&&(t.x=t.fx),null!=t.fy&&(t.y=t.fy),isNaN(t.x)||isNaN(t.y)){var i=10*Math.sqrt(.5+n),o=n*kX;t.x=i*Math.cos(o),t.y=i*Math.sin(o)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function p(t){return t.initialize&&t.initialize(e,c),t}return null==e&&(e=[]),h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(n){return arguments.length?(e=n,h(),s.forEach(p),t):e},alpha:function(e){return arguments.length?(n=+e,t):n},alphaMin:function(e){return arguments.length?(r=+e,t):r},alphaDecay:function(e){return arguments.length?(i=+e,t):+i},alphaTarget:function(e){return arguments.length?(o=+e,t):o},velocityDecay:function(e){return arguments.length?(a=1-e,t):1-a},randomSource:function(e){return arguments.length?(c=e,s.forEach(p),t):c},force:function(e,n){return arguments.length>1?(null==n?s.delete(e):s.set(e,p(n)),t):s.get(e)},find:function(t,n,r){var i,o,a,s,u,l=0,c=e.length;for(null==r?r=1/0:r*=r,l=0;l<c;++l)(a=(i=t-(s=e[l]).x)*i+(o=n-s.y)*o)<r&&(u=s,r=a);return u},on:function(e,n){return arguments.length>1?(l.on(e,n),t):l.on(e)}}};const SX={center:function(e,t){var n,r=1;function i(){var i,o,a=n.length,s=0,u=0;for(i=0;i<a;++i)s+=(o=n[i]).x,u+=o.y;for(s=(s/a-e)*r,u=(u/a-t)*r,i=0;i<a;++i)(o=n[i]).x-=s,o.y-=u}return null==e&&(e=0),null==t&&(t=0),i.initialize=function(e){n=e},i.x=function(t){return arguments.length?(e=+t,i):e},i.y=function(e){return arguments.length?(t=+e,i):t},i.strength=function(e){return arguments.length?(r=+e,i):r},i},collide:function(e){var t,n,r,i=1,o=1;function a(){for(var e,a,u,l,c,f,d,h=t.length,p=0;p<o;++p)for(a=cX(t,gX,yX).visitAfter(s),e=0;e<h;++e)u=t[e],f=n[u.index],d=f*f,l=u.x+u.vx,c=u.y+u.vy,a.visit(m);function m(e,t,n,o,a){var s=e.data,h=e.r,p=f+h;if(!s)return t>l+p||o<l-p||n>c+p||a<c-p;if(s.index>u.index){var m=l-s.x-s.vx,g=c-s.y-s.vy,y=m*m+g*g;y<p*p&&(0===m&&(y+=(m=mX(r))*m),0===g&&(y+=(g=mX(r))*g),y=(p-(y=Math.sqrt(y)))/y*i,u.vx+=(m*=y)*(p=(h*=h)/(d+h)),u.vy+=(g*=y)*p,s.vx-=m*(p=1-p),s.vy-=g*p)}}}function s(e){if(e.data)return e.r=n[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function u(){if(t){var r,i,o=t.length;for(n=new Array(o),r=0;r<o;++r)i=t[r],n[i.index]=+e(i,r,t)}}return"function"!=typeof e&&(e=pX(null==e?1:+e)),a.initialize=function(e,n){t=e,r=n,u()},a.iterations=function(e){return arguments.length?(o=+e,a):o},a.strength=function(e){return arguments.length?(i=+e,a):i},a.radius=function(t){return arguments.length?(e="function"==typeof t?t:pX(+t),u(),a):e},a},nbody:function(){var e,t,n,r,i,o=pX(-30),a=1,s=1/0,u=.81;function l(n){var i,o=e.length,a=cX(e,wX,_X).visitAfter(f);for(r=n,i=0;i<o;++i)t=e[i],a.visit(d)}function c(){if(e){var t,n,r=e.length;for(i=new Array(r),t=0;t<r;++t)n=e[t],i[n.index]=+o(n,t,e)}}function f(e){var t,n,r,o,a,s=0,u=0;if(e.length){for(r=o=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(s+=t.value,u+=n,r+=n*t.x,o+=n*t.y);e.x=r/u,e.y=o/u}else{(t=e).x=t.data.x,t.y=t.data.y;do{s+=i[t.data.index]}while(t=t.next)}e.value=s}function d(e,o,l,c){if(!e.value)return!0;var f=e.x-t.x,d=e.y-t.y,h=c-o,p=f*f+d*d;if(h*h/u<p)return p<s&&(0===f&&(p+=(f=mX(n))*f),0===d&&(p+=(d=mX(n))*d),p<a&&(p=Math.sqrt(a*p)),t.vx+=f*e.value*r/p,t.vy+=d*e.value*r/p),!0;if(!(e.length||p>=s)){(e.data!==t||e.next)&&(0===f&&(p+=(f=mX(n))*f),0===d&&(p+=(d=mX(n))*d),p<a&&(p=Math.sqrt(a*p)));do{e.data!==t&&(h=i[e.data.index]*r/p,t.vx+=f*h,t.vy+=d*h)}while(e=e.next)}}return l.initialize=function(t,r){e=t,n=r,c()},l.strength=function(e){return arguments.length?(o="function"==typeof e?e:pX(+e),c(),l):o},l.distanceMin=function(e){return arguments.length?(a=e*e,l):Math.sqrt(a)},l.distanceMax=function(e){return arguments.length?(s=e*e,l):Math.sqrt(s)},l.theta=function(e){return arguments.length?(u=e*e,l):Math.sqrt(u)},l},link:function(e){var t,n,r,i,o,a,s=vX,u=function(e){return 1/Math.min(i[e.source.index],i[e.target.index])},l=pX(30),c=1;function f(r){for(var i=0,s=e.length;i<c;++i)for(var u,l,f,d,h,p,m,g=0;g<s;++g)l=(u=e[g]).source,d=(f=u.target).x+f.vx-l.x-l.vx||mX(a),h=f.y+f.vy-l.y-l.vy||mX(a),d*=p=((p=Math.sqrt(d*d+h*h))-n[g])/p*r*t[g],h*=p,f.vx-=d*(m=o[g]),f.vy-=h*m,l.vx+=d*(m=1-m),l.vy+=h*m}function d(){if(r){var a,u,l=r.length,c=e.length,f=new Map(r.map(((e,t)=>[s(e,t,r),e])));for(a=0,i=new Array(l);a<c;++a)(u=e[a]).index=a,"object"!=typeof u.source&&(u.source=bX(f,u.source)),"object"!=typeof u.target&&(u.target=bX(f,u.target)),i[u.source.index]=(i[u.source.index]||0)+1,i[u.target.index]=(i[u.target.index]||0)+1;for(a=0,o=new Array(c);a<c;++a)u=e[a],o[a]=i[u.source.index]/(i[u.source.index]+i[u.target.index]);t=new Array(c),h(),n=new Array(c),p()}}function h(){if(r)for(var n=0,i=e.length;n<i;++n)t[n]=+u(e[n],n,e)}function p(){if(r)for(var t=0,i=e.length;t<i;++t)n[t]=+l(e[t],t,e)}return null==e&&(e=[]),f.initialize=function(e,t){r=e,a=t,d()},f.links=function(t){return arguments.length?(e=t,d(),f):e},f.id=function(e){return arguments.length?(s=e,f):s},f.iterations=function(e){return arguments.length?(c=+e,f):c},f.strength=function(e){return arguments.length?(u="function"==typeof e?e:pX(+e),h(),f):u},f.distance=function(e){return arguments.length?(l="function"==typeof e?e:pX(+e),p(),f):l},f},x:function(e){var t,n,r,i=pX(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vx+=(r[o]-i.x)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=pX(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:pX(+e),a(),o):i},o.x=function(t){return arguments.length?(e="function"==typeof t?t:pX(+t),a(),o):e},o},y:function(e){var t,n,r,i=pX(.1);function o(e){for(var i,o=0,a=t.length;o<a;++o)(i=t[o]).vy+=(r[o]-i.y)*n[o]*e}function a(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+i(t[o],o,t)}}return"function"!=typeof e&&(e=pX(null==e?0:+e)),o.initialize=function(e){t=e,a()},o.strength=function(e){return arguments.length?(i="function"==typeof e?e:pX(+e),a(),o):i},o.y=function(t){return arguments.length?(e="function"==typeof t?t:pX(+t),a(),o):e},o}},AX="forces",CX=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],DX=["static","iterations"],MX=["x","y","vx","vy"];function FX(e){XO.call(this,null,e)}function NX(e,t,n,r){var i,o,a,s,u=yD(t.forces);for(i=0,o=CX.length;i<o;++i)(a=CX[i])!==AX&&t.modified(a)&&e[a](t[a]);for(i=0,o=u.length;i<o;++i)s=AX+i,(a=n||t.modified(AX,i)?TX(u[i]):r&&OX(u[i],r)?e.force(s):null)&&e.force(s,a);for(o=e.numForces||0;i<o;++i)e.force(AX+i,null);return e.numForces=u.length,e}function OX(e,t){var n,r;for(n in e)if(bD(r=e[n])&&t.modified(NC(r)))return 1;return 0}function TX(e){var t,n;for(n in ND(SX,e.force)||zC("Unrecognized force: "+e.force),t=SX[e.force](),e)bD(t[n])&&$X(t[n],e[n],e);return t}function $X(e,t,n){e(bD(t)?e=>t(e,n):t)}FX.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:MX}]},zD(FX,XO,{transform:function(e,t){var n,r,i=this.value,o=t.changed(t.ADD_REM),a=e.modified(CX),s=e.iterations||300;if(i?(o&&(t.modifies("index"),i.nodes(t.source)),(a||t.changed(t.MOD))&&NX(i,e,0,t)):(this.value=i=function(e,t){const n=EX(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),NX(n,t,!0).on("end",(()=>o=!0))}(t.source,e),i.on("tick",(n=t.dataflow,r=this,()=>n.touch(r).run())),e.static||(o=!0,i.tick()),t.modifies("index")),a||o||e.modified(DX)||t.changed()&&e.restart)if(i.alpha(Math.max(i.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(i.alphaMin(),1/s)),e.static)for(i.stop();--s>=0;)i.tick();else if(i.stopped()&&i.restart(),!o)return t.StopPropagation;return this.finish(e,t)},finish:function(e,t){const n=t.dataflow;for(let e,t=this._argops,s=0,u=t.length;s<u;++s)if(e=t[s],e.name===AX&&"link"===e.op._argval.force)for(var r,i=e.op._argops,o=0,a=i.length;o<a;++o)if("links"===i[o].name&&(r=i[o].op.source)){n.pulse(r,n.changeset().reflow());break}return t.reflow(e.modified()).modifies(MX)}}),n(oX,"force",(function(){return FX}));var zX={};function RX(e,t){return e.parent===t.parent?1:2}function PX(e,t){return e+t.x}function LX(e,t){return Math.max(e,t.y)}function BX(e){var t=0,n=e.children,r=n&&n.length;if(r)for(;--r>=0;)t+=n[r].value;else t=1;e.value=t}function IX(e,t){e instanceof Map?(e=[void 0,e],void 0===t&&(t=UX)):void 0===t&&(t=jX);for(var n,r,i,o,a,s=new HX(e),u=[s];n=u.pop();)if((i=t(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)u.push(r=i[o]=new HX(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(WX)}function jX(e){return e.children}function UX(e){return Array.isArray(e)?e[1]:null}function qX(e){void 0!==e.data.value&&(e.value=e.data.value),e.data=e.data.data}function WX(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function HX(e){this.data=e,this.depth=this.height=0,this.parent=null}HX.prototype=IX.prototype={constructor:HX,count:function(){return this.eachAfter(BX)},each:function(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this},eachAfter:function(e,t){for(var n,r,i,o=this,a=[o],s=[],u=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)e.call(t,o,++u,this);return this},eachBefore:function(e,t){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(e.call(t,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r},sum:function(e){return this.eachAfter((function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,n=function(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;e=n.pop(),t=r.pop();for(;e===t;)i=e,e=n.pop(),t=r.pop();return i}(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){return Array.from(this)},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(n){n!==e&&t.push({source:n.parent,target:n})})),t},copy:function(){return IX(this).eachBefore(qX)},[Symbol.iterator]:function*(){var e,t,n,r,i=this,o=[i];do{for(e=o.reverse(),o=[];i=e.pop();)if(yield i,t=i.children)for(n=0,r=t.length;n<r;++n)o.push(t[n])}while(o.length)}};var VX=function(e){for(var t,n,r=0,i=(e=function(e){for(var t,n,r=e.length;r;)n=Math.random()*r--|0,t=e[r],e[r]=e[n],e[n]=t;return e}(Array.from(e))).length,o=[];r<i;)t=e[r],n&&XX(n,t)?++r:(n=JX(o=GX(o,t)),r=0);return n};function GX(e,t){var n,r;if(QX(t,e))return[t];for(n=0;n<e.length;++n)if(YX(t,e[n])&&QX(KX(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(YX(KX(e[n],e[r]),t)&&YX(KX(e[n],t),e[r])&&YX(KX(e[r],t),e[n])&&QX(ZX(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function YX(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function XX(e,t){var n=e.r-t.r+1e-9*Math.max(e.r,t.r,1),r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function QX(e,t){for(var n=0;n<t.length;++n)if(!XX(e,t[n]))return!1;return!0}function JX(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return KX(e[0],e[1]);case 3:return ZX(e[0],e[1],e[2])}var t}function KX(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,u=o-n,l=a-r,c=s-i,f=Math.sqrt(u*u+l*l);return{x:(n+o+u/f*c)/2,y:(r+a+l/f*c)/2,r:(f+i+s)/2}}function ZX(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-a,h=r-l,p=i-s,m=i-c,g=u-o,y=f-o,v=r*r+i*i-o*o,b=v-a*a-s*s+u*u,x=v-l*l-c*c+f*f,w=h*p-d*m,_=(p*x-m*b)/(2*w)-r,k=(m*g-p*y)/w,E=(h*b-d*x)/(2*w)-i,S=(d*y-h*g)/w,A=k*k+S*S-1,C=2*(o+_*k+E*S),D=_*_+E*E-o*o,M=-(A?(C+Math.sqrt(C*C-4*A*D))/(2*A):D/C);return{x:r+_+k*M,y:i+E+S*M,r:M}}function eQ(e,t,n){var r,i,o,a,s=e.x-t.x,u=e.y-t.y,l=s*s+u*u;l?(i=t.r+n.r,i*=i,a=e.r+n.r,i>(a*=a)?(r=(l+a-i)/(2*l),o=Math.sqrt(Math.max(0,a/l-r*r)),n.x=e.x-r*s-o*u,n.y=e.y-r*u+o*s):(r=(l+i-a)/(2*l),o=Math.sqrt(Math.max(0,i/l-r*r)),n.x=t.x+r*s-o*u,n.y=t.y+r*u+o*s)):(n.x=t.x+n.r,n.y=t.y)}function tQ(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function nQ(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function rQ(e){this._=e,this.next=null,this.previous=null}function iQ(e){if(!(o=(t=e,e="object"==typeof t&&"length"in t?t:Array.from(t)).length))return 0;var t,n,r,i,o,a,s,u,l,c,f,d;if((n=e[0]).x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;eQ(r,n,i=e[2]),n=new rQ(n),r=new rQ(r),i=new rQ(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<o;++u){eQ(n._,r._,i=e[u]),i=new rQ(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do{if(f<=d){if(tQ(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(tQ(c._,i._)){(n=c).next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=nQ(n);(i=i.next)!==r;)(s=nQ(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=VX(n),u=0;u<o;++u)(n=e[u]).x-=i.x,n.y-=i.y;return i.r}function oQ(e){return null==e?null:aQ(e)}function aQ(e){if("function"!=typeof e)throw new Error;return e}function sQ(){return 0}var uQ=function(e){return function(){return e}};function lQ(e){return Math.sqrt(e.value)}function cQ(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function fQ(e,t){return function(n){if(r=n.children){var r,i,o,a=r.length,s=e(n)*t||0;if(s)for(i=0;i<a;++i)r[i].r+=s;if(o=iQ(r),s)for(i=0;i<a;++i)r[i].r-=s;n.r=o+s}}}function dQ(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}var hQ=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},pQ=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(r-t)/e.value;++s<u;)(o=a[s]).y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l},mQ={depth:-1},gQ={};function yQ(e){return e.id}function vQ(e){return e.parentId}var bQ=function(){var e=yQ,t=vQ;function n(n){var r,i,o,a,s,u,l,c=Array.from(n),f=c.length,d=new Map;for(i=0;i<f;++i)r=c[i],s=c[i]=new HX(r),null!=(u=e(r,i,n))&&(u+="")&&(l=s.id=u,d.set(l,d.has(l)?gQ:s)),null!=(u=t(r,i,n))&&(u+="")&&(s.parent=u);for(i=0;i<f;++i)if(u=(s=c[i]).parent){if(!(a=d.get(u)))throw new Error("missing: "+u);if(a===gQ)throw new Error("ambiguous: "+u);a.children?a.children.push(s):a.children=[s],s.parent=a}else{if(o)throw new Error("multiple roots");o=s}if(!o)throw new Error("no root");if(o.parent=mQ,o.eachBefore((function(e){e.depth=e.parent.depth+1,--f})).eachBefore(WX),o.parent=null,f>0)throw new Error("cycle");return o}return n.id=function(t){return arguments.length?(e=aQ(t),n):e},n.parentId=function(e){return arguments.length?(t=aQ(e),n):t},n};function xQ(e,t){return e.parent===t.parent?1:2}function wQ(e){var t=e.children;return t?t[0]:e.t}function _Q(e){var t=e.children;return t?t[t.length-1]:e.t}function kQ(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function EQ(e,t,n){return e.a.parent===t.parent?e.a:n}function SQ(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}SQ.prototype=Object.create(HX.prototype);var AQ=function(e,t,n,r,i){for(var o,a=e.children,s=-1,u=a.length,l=e.value&&(i-n)/e.value;++s<u;)(o=a[s]).x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l},CQ=(1+Math.sqrt(5))/2;function DQ(e,t,n,r,i,o){for(var a,s,u,l,c,f,d,h,p,m,g,y=[],v=t.children,b=0,x=0,w=v.length,_=t.value;b<w;){u=i-n,l=o-r;do{c=v[x++].value}while(!c&&x<w);for(f=d=c,g=c*c*(m=Math.max(l/u,u/l)/(_*e)),p=Math.max(d/g,g/f);x<w;++x){if(c+=s=v[x].value,s<f&&(f=s),s>d&&(d=s),g=c*c*m,(h=Math.max(d/g,g/f))>p){c-=s;break}p=h}y.push(a={value:c,dice:u<l,children:v.slice(b,x)}),a.dice?pQ(a,n,r,i,_?r+=l*c/_:o):AQ(a,n,r,_?n+=u*c/_:i,o),_-=c,b=x}return y}var MQ=function e(t){function n(e,n,r,i,o){DQ(t,e,n,r,i,o)}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(CQ),FQ=function e(t){function n(e,n,r,i,o){if((a=e._squarify)&&a.ratio===t)for(var a,s,u,l,c,f=-1,d=a.length,h=e.value;++f<d;){for(u=(s=a[f]).children,l=s.value=0,c=u.length;l<c;++l)s.value+=u[l].value;s.dice?pQ(s,n,r,i,h?r+=(o-r)*s.value/h:o):AQ(s,n,r,h?n+=(i-n)*s.value/h:i,o),h-=s.value}else e._squarify=a=DQ(t,e,n,r,i,o),a.ratio=t}return n.ratio=function(t){return e((t=+t)>1?t:1)},n}(CQ);function NQ(e,t,n){const r={};return e.each((e=>{const i=e.data;n(i)&&(r[t(i)]=e)})),e.lookup=r,e}function OQ(e){XO.call(this,null,e)}OQ.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const TQ=e=>e.values;function $Q(){const e=[],t={entries:e=>r(n(e,0),0),key:n=>(e.push(n),t)};function n(t,r){if(r>=e.length)return t;const i=t.length,o=e[r++],a={},s={};let u,l,c,f=-1;for(;++f<i;)u=o(l=t[f])+"",(c=a[u])?c.push(l):a[u]=[l];for(u in a)s[u]=n(a[u],r);return s}function r(t,n){if(++n>e.length)return t;const i=[];for(const e in t)i.push({key:e,values:r(t[e],n)});return i}return t}function zQ(e){XO.call(this,null,e)}zD(OQ,XO,{transform:function(e,t){t.source||zC("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each((e=>{e.children&&mO(e.data)&&i.rem.push(e.data)})),this.value=o=IX({values:yD(e.keys).reduce(((e,t)=>(e.key(t),e)),$Q()).entries(i.source)},TQ),n&&o.each((e=>{e.children&&(e=vO(e.data),i.add.push(e),i.source.push(e))})),NQ(o,gO,gO)),i.source.root=o,i}});const RQ=(e,t)=>e.parent===t.parent?1:2;zD(zQ,XO,{transform:function(e,t){t.source&&t.source.root||zC(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(_O(e.sort,(e=>e.data))),function(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}(n,this.params,e),n.separation&&n.separation(!1!==e.separation?RQ:jC);try{this.value=n(i)}catch(e){zC(e)}return i.each((e=>function(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}(e,r,o))),t.reflow(e.modified()).modifies(o).modifies("leaf")}});const PQ=["x","y","r","depth","children"];function LQ(e){zQ.call(this,e)}LQ.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PQ.length,default:PQ}]},zD(LQ,zQ,{layout:function(){var e=null,t=1,n=1,r=sQ;function i(i){return i.x=t/2,i.y=n/2,e?i.eachBefore(cQ(e)).eachAfter(fQ(r,.5)).eachBefore(dQ(1)):i.eachBefore(cQ(lQ)).eachAfter(fQ(sQ,1)).eachAfter(fQ(r,i.r/Math.min(t,n))).eachBefore(dQ(Math.min(t,n)/(2*i.r))),i}return i.radius=function(t){return arguments.length?(e=oQ(t),i):e},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(e){return arguments.length?(r="function"==typeof e?e:uQ(+e),i):r},i},params:["radius","size","padding"],fields:PQ});const BQ=["x0","y0","x1","y1","depth","children"];function IQ(e){zQ.call(this,e)}function jQ(e){XO.call(this,null,e)}IQ.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:BQ.length,default:BQ}]},zD(IQ,zQ,{layout:function(){var e=1,t=1,n=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=n,i.x1=e,i.y1=t/o,i.eachBefore(function(e,t){return function(r){r.children&&pQ(r,r.x0,e*(r.depth+1)/t,r.x1,e*(r.depth+2)/t);var i=r.x0,o=r.y0,a=r.x1-n,s=r.y1-n;a<i&&(i=a=(i+a)/2),s<o&&(o=s=(o+s)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=s}}(t,o)),r&&i.eachBefore(hQ),i}return i.round=function(e){return arguments.length?(r=!!e,i):r},i.size=function(n){return arguments.length?(e=+n[0],t=+n[1],i):[e,t]},i.padding=function(e){return arguments.length?(n=+e,i):n},i},params:["size","round","padding"],fields:BQ}),jQ.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},zD(jQ,XO,{transform:function(e,t){t.source||zC("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?NQ(bQ().id(e.key).parentId(e.parentKey)(i.source),e.key,UC):NQ(bQ()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const UQ={tidy:function(){var e=xQ,t=1,n=1,r=null;function i(i){var u=function(e){for(var t,n,r,i,o,a=new SQ(e,0),s=[a];t=s.pop();)if(r=t._.children)for(t.children=new Array(o=r.length),i=o-1;i>=0;--i)s.push(n=t.children[i]=new SQ(r[i],i)),n.parent=t;return(a.parent=new SQ(null,0)).children=[a],a}(i);if(u.eachAfter(o),u.parent.m=-u.z,u.eachBefore(a),r)i.eachBefore(s);else{var l=i,c=i,f=i;i.eachBefore((function(e){e.x<l.x&&(l=e),e.x>c.x&&(c=e),e.depth>f.depth&&(f=e)}));var d=l===c?1:e(l,c)/2,h=d-l.x,p=t/(c.x+d+h),m=n/(f.depth||1);i.eachBefore((function(e){e.x=(e.x+h)*p,e.y=e.depth*m}))}return i}function o(t){var n=t.children,r=t.parent.children,i=t.i?r[t.i-1]:null;if(n){!function(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}(t);var o=(n[0].z+n[n.length-1].z)/2;i?(t.z=i.z+e(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+e(t._,i._));t.parent.A=function(t,n,r){if(n){for(var i,o=t,a=t,s=n,u=o.parent.children[0],l=o.m,c=a.m,f=s.m,d=u.m;s=_Q(s),o=wQ(o),s&&o;)u=wQ(u),(a=_Q(a)).a=t,(i=s.z+f-o.z-l+e(s._,o._))>0&&(kQ(EQ(s,t,r),t,i),l+=i,c+=i),f+=s.m,l+=o.m,d+=u.m,c+=a.m;s&&!_Q(a)&&(a.t=s,a.m+=f-c),o&&!wQ(u)&&(u.t=o,u.m+=l-d,r=t)}return r}(t,i,t.parent.A||r[0])}function a(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function s(e){e.x*=t,e.y=e.depth*n}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i},cluster:function(){var e=RX,t=1,n=1,r=!1;function i(i){var o,a=0;i.eachAfter((function(t){var n=t.children;n?(t.x=function(e){return e.reduce(PX,0)/e.length}(n),t.y=function(e){return 1+e.reduce(LX,0)}(n)):(t.x=o?a+=e(t,o):0,t.y=0,o=t)}));var s=function(e){for(var t;t=e.children;)e=t[0];return e}(i),u=function(e){for(var t;t=e.children;)e=t[t.length-1];return e}(i),l=s.x-e(s,u)/2,c=u.x+e(u,s)/2;return i.eachAfter(r?function(e){e.x=(e.x-i.x)*t,e.y=(i.y-e.y)*n}:function(e){e.x=(e.x-l)/(c-l)*t,e.y=(1-(i.y?e.y/i.y:1))*n})}return i.separation=function(t){return arguments.length?(e=t,i):e},i.size=function(e){return arguments.length?(r=!1,t=+e[0],n=+e[1],i):r?null:[t,n]},i.nodeSize=function(e){return arguments.length?(r=!0,t=+e[0],n=+e[1],i):r?[t,n]:null},i}},qQ=["x","y","depth","children"];function WQ(e){zQ.call(this,e)}function HQ(e){XO.call(this,[],e)}WQ.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:qQ.length,default:qQ}]},zD(WQ,zQ,{layout:function(e){const t=e||"tidy";if(ND(UQ,t))return UQ[t]();zC("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:qQ}),HQ.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]},zD(HQ,XO,{transform:function(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||zC("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,(e=>o[gO(e)]=1)),r.each((e=>{const t=e.data,n=e.parent&&e.parent.data;n&&o[gO(t)]&&o[gO(n)]&&i.add.push(vO({source:n,target:t}))})),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,(e=>o[gO(e)]=1)),n.forEach((e=>{(o[gO(e.source)]||o[gO(e.target)])&&i.mod.push(e)}))),i}});const VQ={binary:function(e,t,n,r,i){var o,a,s=e.children,u=s.length,l=new Array(u+1);for(l[0]=a=o=0;o<u;++o)l[o+1]=a+=s[o].value;!function e(t,n,r,i,o,a,u){if(t>=n-1){var c=s[t];return c.x0=i,c.y0=o,c.x1=a,void(c.y1=u)}var f=l[t],d=r/2+f,h=t+1,p=n-1;for(;h<p;){var m=h+p>>>1;l[m]<d?h=m+1:p=m}d-l[h-1]<l[h]-d&&t+1<h&&--h;var g=l[h]-f,y=r-g;if(a-i>u-o){var v=r?(i*y+a*g)/r:a;e(t,h,g,i,o,v,u),e(h,n,y,v,o,a,u)}else{var b=r?(o*y+u*g)/r:u;e(t,h,g,i,o,a,b),e(h,n,y,i,b,a,u)}}(0,u,e.value,t,n,r,i)},dice:pQ,slice:AQ,slicedice:function(e,t,n,r,i){(1&e.depth?AQ:pQ)(e,t,n,r,i)},squarify:MQ,resquarify:FQ},GQ=["x0","y0","x1","y1","depth","children"];function YQ(e){zQ.call(this,e)}YQ.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:GQ.length,default:GQ}]},zD(YQ,zQ,{layout:function(){const e=function(){var e=MQ,t=!1,n=1,r=1,i=[0],o=sQ,a=sQ,s=sQ,u=sQ,l=sQ;function c(e){return e.x0=e.y0=0,e.x1=n,e.y1=r,e.eachBefore(f),i=[0],t&&e.eachBefore(hQ),e}function f(t){var n=i[t.depth],r=t.x0+n,c=t.y0+n,f=t.x1-n,d=t.y1-n;f<r&&(r=f=(r+f)/2),d<c&&(c=d=(c+d)/2),t.x0=r,t.y0=c,t.x1=f,t.y1=d,t.children&&(n=i[t.depth+1]=o(t)/2,r+=l(t)-n,c+=a(t)-n,(f-=s(t)-n)<r&&(r=f=(r+f)/2),(d-=u(t)-n)<c&&(c=d=(c+d)/2),e(t,r,c,f,d))}return c.round=function(e){return arguments.length?(t=!!e,c):t},c.size=function(e){return arguments.length?(n=+e[0],r=+e[1],c):[n,r]},c.tile=function(t){return arguments.length?(e=aQ(t),c):e},c.padding=function(e){return arguments.length?c.paddingInner(e).paddingOuter(e):c.paddingInner()},c.paddingInner=function(e){return arguments.length?(o="function"==typeof e?e:uQ(+e),c):o},c.paddingOuter=function(e){return arguments.length?c.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):c.paddingTop()},c.paddingTop=function(e){return arguments.length?(a="function"==typeof e?e:uQ(+e),c):a},c.paddingRight=function(e){return arguments.length?(s="function"==typeof e?e:uQ(+e),c):s},c.paddingBottom=function(e){return arguments.length?(u="function"==typeof e?e:uQ(+e),c):u},c.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:uQ(+e),c):l},c}();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ND(VQ,t)?e.tile(VQ[t]):zC("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:GQ}),n(zX,"treemap",(function(){return YQ})),n(zX,"treelinks",(function(){return HQ})),n(zX,"tree",(function(){return WQ})),n(zX,"stratify",(function(){return jQ})),n(zX,"partition",(function(){return IQ})),n(zX,"pack",(function(){return LQ})),n(zX,"nest",(function(){return OQ}));var XQ={};function QQ(e,t,n,r){const i=e.width,o=e.height,a=n||r,s=PR(i,o).getContext("2d");t.forEach((e=>JQ(s,e,a)));const u=new Uint32Array(s.getImageData(0,0,i,o).data.buffer),l=e.bitmap(),c=a&&e.bitmap();let f,d,h,p,m;for(d=0;d<o;++d)for(f=0;f<i;++f)m=4278190080&u[d*i+f],m&&(h=e(f),p=e(d),r||l.set(h,p),a&&268435456^m&&c.set(h,p));return[l,c]}function JQ(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;"group"===r?t.forEach((t=>{t.items.forEach((t=>JQ(e,t.items,n)))})):HI[r].draw(e,{items:n?t.map(KQ):t})}function KQ(e){const t=xO(e,{});return t.stroke&&(t.strokeOpacity=1),t.fill&&(t.fillOpacity=.0625,t.stroke="#000",t.strokeOpacity=1,t.strokeWidth=2),t}const ZQ=31,eJ=new Uint32Array(33),tJ=new Uint32Array(33);tJ[0]=0,eJ[0]=~tJ[0];for(let e=1;e<=32;++e)tJ[e]=tJ[e-1]<<1|1,eJ[e]=~tJ[e];function nJ(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=e=>~~((e+n)/r);return a.invert=e=>e*r-n,a.bitmap=()=>function(e,t){const n=new Uint32Array(~~((e*t+32)/32));function r(e,t){n[e]|=t}function i(e,t){n[e]&=t}return{array:n,get:(t,r)=>{const i=r*e+t;return n[i>>>5]&1<<(i&ZQ)},set:(t,n)=>{const i=n*e+t;r(i>>>5,1<<(i&ZQ))},clear:(t,n)=>{const r=n*e+t;i(r>>>5,~(1<<(r&ZQ)))},getRange:(t,r,i,o)=>{let a,s,u,l,c=o;for(;c>=r;--c)if(a=c*e+t,s=c*e+i,u=a>>>5,l=s>>>5,u===l){if(n[u]&eJ[a&ZQ]&tJ[1+(s&ZQ)])return!0}else{if(n[u]&eJ[a&ZQ])return!0;if(n[l]&tJ[1+(s&ZQ)])return!0;for(let e=u+1;e<l;++e)if(n[e])return!0}return!1},setRange:(t,n,i,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+i,u=a>>>5,l=s>>>5,u===l)r(u,eJ[a&ZQ]&tJ[1+(s&ZQ)]);else for(r(u,eJ[a&ZQ]),r(l,tJ[1+(s&ZQ)]),c=u+1;c<l;++c)r(c,4294967295)},clearRange:(t,n,r,o)=>{let a,s,u,l,c;for(;n<=o;++n)if(a=n*e+t,s=n*e+r,u=a>>>5,l=s>>>5,u===l)i(u,tJ[a&ZQ]|eJ[1+(s&ZQ)]);else for(i(u,tJ[a&ZQ]),i(l,eJ[1+(s&ZQ)]),c=u+1;c<l;++c)i(c,0)},outOfBounds:(n,r,i,o)=>n<0||r<0||o>=t||i>=e}}(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function rJ(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function iJ(e,t,n,r,i,o,a,s){const u=i*o/(2*r),l=e(t-u),c=e(t+u),f=e(n-(o/=2)),d=e(n+o);return a.outOfBounds(l,f,c,d)||a.getRange(l,f,c,d)||s&&s.getRange(l,f,c,d)}const oJ=[-1,-1,1,1],aJ=[-1,1,-1,1];const sJ=["right","center","left"],uJ=["bottom","middle","top"];function lJ(e,t,n,r,i,o,a,s,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&o?o.getRange(e,n,t,r)||!function(e,t,n,r,i){return i[0]<=e&&n<=i[2]&&i[3]<=t&&r<=i[5]}(a,u,s,l,c):i.getRange(e,n,t,r)))}const cJ={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},fJ={naive:function(e,t,n,r){const i=e.width,o=e.height;return function(e){const t=e.datum.datum.items[r].items,n=t.length,a=e.datum.fontSize,s=CI.width(e.datum,e.datum.text);let u,l,c,f,d,h,p,m=0;for(let r=0;r<n;++r)u=t[r].x,c=t[r].y,l=void 0===t[r].x2?u:t[r].x2,f=void 0===t[r].y2?c:t[r].y2,d=(u+l)/2,h=(c+f)/2,p=Math.abs(l-u+f-c),p>=m&&(m=p,e.x=d,e.y=h);return d=s/2,h=a/2,u=e.x-d,l=e.x+d,c=e.y-h,f=e.y+h,e.align="center",u<0&&l<=i?e.align="left":0<=u&&i<l&&(e.align="right"),e.baseline="middle",c<0&&f<=o?e.baseline="top":0<=c&&o<f&&(e.baseline="bottom"),!0}},"reduced-search":function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function u(t,n,r,u,l){const c=e.invert(t),f=e.invert(n);let d,h=r,p=o;if(!rJ(c,f,u,l,i,o)&&!iJ(e,c,f,l,u,h,a,s)&&!iJ(e,c,f,l,u,l,a,null)){for(;p-h>=1;)d=(h+p)/2,iJ(e,c,f,l,u,d,a,s)?p=d:h=d;if(h>r)return[c,f,h,!0]}}return function(t){const s=t.datum.datum.items[r].items,l=s.length,c=t.datum.fontSize,f=CI.width(t.datum,t.datum.text);let d,h,p,m,g,y,v,b,x,w,_,k,E,S,A,C,D,M=n?c:0,F=!1,N=!1,O=0;for(let r=0;r<l;++r){for(d=s[r].x,p=s[r].y,h=void 0===s[r].x2?d:s[r].x2,m=void 0===s[r].y2?p:s[r].y2,d>h&&(D=d,d=h,h=D),p>m&&(D=p,p=m,m=D),x=e(d),_=e(h),w=~~((x+_)/2),k=e(p),S=e(m),E=~~((k+S)/2),v=w;v>=x;--v)for(b=E;b>=k;--b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);for(v=w;v<=_;++v)for(b=E;b<=S;++b)C=u(v,b,M,f,c),C&&([t.x,t.y,M,F]=C);F||n||(A=Math.abs(h-d+m-p),g=(d+h)/2,y=(p+m)/2,A>=O&&!rJ(g,y,f,c,i,o)&&!iJ(e,g,y,c,f,c,a,null)&&(O=A,t.x=g,t.y=y,N=!0))}return!(!F&&!N)&&(g=f/2,y=c/2,a.setRange(e(t.x-g),e(t.y-y),e(t.x+g),e(t.y+y)),t.align="center",t.baseline="middle",!0)}},floodfill:function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=e.bitmap();return function(t){const l=t.datum.datum.items[r].items,c=l.length,f=t.datum.fontSize,d=CI.width(t.datum,t.datum.text),h=[];let p,m,g,y,v,b,x,w,_,k,E,S,A=n?f:0,C=!1,D=!1,M=0;for(let r=0;r<c;++r){for(p=l[r].x,g=l[r].y,m=void 0===l[r].x2?p:l[r].x2,y=void 0===l[r].y2?g:l[r].y2,h.push([e((p+m)/2),e((g+y)/2)]);h.length;)if([x,w]=h.pop(),!(a.get(x,w)||s.get(x,w)||u.get(x,w))){u.set(x,w);for(let e=0;e<4;++e)v=x+oJ[e],b=w+aJ[e],u.outOfBounds(v,b,v,b)||h.push([v,b]);if(v=e.invert(x),b=e.invert(w),_=A,k=o,!rJ(v,b,d,f,i,o)&&!iJ(e,v,b,f,d,_,a,s)&&!iJ(e,v,b,f,d,f,a,null)){for(;k-_>=1;)E=(_+k)/2,iJ(e,v,b,f,d,E,a,s)?k=E:_=E;_>A&&(t.x=v,t.y=b,A=_,C=!0)}}C||n||(S=Math.abs(m-p+y-g),v=(p+m)/2,b=(g+y)/2,S>=M&&!rJ(v,b,d,f,i,o)&&!iJ(e,v,b,f,d,f,a,null)&&(M=S,t.x=v,t.y=b,D=!0))}return!(!C&&!D)&&(v=d/2,b=f/2,a.setRange(e(t.x-v),e(t.y-b),e(t.x+v),e(t.y+b)),t.align="center",t.baseline="middle",!0)}}};function dJ(e,t,n,r,i,o,a,s,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=function(e,t){const n=new Float64Array(t),r=e.length;for(let t=0;t<r;++t)n[t]=e[t]||0;for(let e=r;e<t;++e)n[e]=n[r-1];return n}(r,f),h=function(e,t){const n=new Int8Array(t),r=e.length;for(let t=0;t<r;++t)n[t]|=cJ[e[t]];for(let e=r;e<t;++e)n[e]=n[r-1];return n}(i,f),p=(x=e[0].datum)&&x.mark&&x.mark.marktype,m="group"===p&&e[0].datum.items[u].marktype,g="area"===m,y=function(e,t,n,r){const i=e=>[e.x,e.x,e.x,e.y,e.y,e.y];return e?"line"===e||"area"===e?e=>i(e.datum):"line"===t?e=>{const t=e.datum.items[r].items;return i(t.length?t["start"===n?0:t.length-1]:{x:NaN,y:NaN})}:e=>{const t=e.datum.bounds;return[t.x1,(t.x1+t.x2)/2,t.x2,t.y1,(t.y1+t.y2)/2,t.y2]}:i}(p,m,s,u),v=nJ(t[0],t[1],l),b=g&&"naive"===c;var x;const w=e.map((e=>({datum:e,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(e)})));let _;if(!b){n&&w.sort(((e,t)=>n(e.datum,t.datum)));let t=!1;for(let e=0;e<h.length&&!t;++e)t=5===h[e]||d[e]<0;p&&(a||g)&&(o=[e.map((e=>e.datum))].concat(o)),_=o.length?QQ(v,o,t,g):function(e,t){const n=e.bitmap();return(t||[]).forEach((t=>n.set(e(t.boundary[0]),e(t.boundary[3])))),[n,void 0]}(v,a&&w)}const k=g?fJ[c](v,_,a,u):function(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],u=r.length;return function(t){const l=t.boundary,c=t.datum.fontSize;if(l[2]<0||l[5]<0||l[0]>i||l[3]>o)return!1;let f,d,h,p,m,g,y,v,b,x,w,_,k,E,S,A=0;for(let i=0;i<u;++i){if(f=(3&n[i])-1,d=(n[i]>>>2&3)-1,h=0===f&&0===d||r[i]<0,p=f&&d?Math.SQRT1_2:1,m=r[i]<0?-1:1,g=l[1+f]+r[i]*f*p,w=l[4+d]+m*c*d/2+r[i]*d*p,v=w-c/2,b=w+c/2,_=e(g),E=e(v),S=e(b),!A){if(!lJ(_,_,E,S,a,s,g,g,v,b,l,h))continue;A=CI.width(t.datum,t.datum.text)}if(x=g+m*A*f/2,g=x-A/2,y=x+A/2,_=e(g),k=e(y),lJ(_,k,E,S,a,s,g,y,v,b,l,h))return t.x=f?f*m<0?y:g:x,t.y=d?d*m<0?b:v:w,t.align=sJ[f*m+1],t.baseline=uJ[d*m+1],a.setRange(_,E,k,S),!0}return!1}}(v,_,h,d);return w.forEach((e=>e.opacity=+k(e))),w}const hJ=["x","y","opacity","align","baseline"],pJ=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function mJ(e){XO.call(this,null,e)}mJ.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:pJ},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:hJ.length,default:hJ}]},zD(mJ,XO,{transform:function(e,t){const n=e.modified();if(!(n||t.changed(t.ADD_REM)||function(n){const r=e[n];return bD(r)&&t.modified(r.fields)}("sort")))return;e.size&&2===e.size.length||zC("Size parameter should be specified as a [width, height] array.");const r=e.as||hJ;return dJ(t.materialize(t.SOURCE).source,e.size,e.sort,yD(e.offset||1),yD(e.anchor||pJ),e.avoidMarks||[],!1!==e.avoidBaseMark,e.lineAnchor||"end",e.markIndex||0,e.padding||0,e.method||"naive").forEach((e=>{const t=e.datum;t[r[0]]=e.x,t[r[1]]=e.y,t[r[2]]=e.opacity,t[r[3]]=e.align,t[r[4]]=e.baseline})),t.reflow(n).modifies(r)}}),n(XQ,"label",(function(){return mJ}));var gJ={};function yJ(e,t){var n,r,i,o,a,s,u=[],l=function(e){return e(o)};if(null==t)u.push(e);else for(n={},r=0,i=e.length;r<i;++r)o=e[r],(s=n[a=t.map(l)])||(n[a]=s=[],s.dims=a,u.push(s)),s.push(o);return u}function vJ(e){XO.call(this,null,e)}vJ.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]},zD(vJ,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=yJ(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(FC),o=i.length,a=e.as||[FC(e.x),FC(e.y)],s=[];r.forEach((t=>{qT(t,e.x,e.y,e.bandwidth||.3).forEach((e=>{const n={};for(let e=0;e<o;++e)n[i[e]]=t.dims[e];n[a[0]]=e[0],n[a[1]]=e[1],s.push(vO(n))}))})),this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n}});const bJ={linear:RT,log:PT,exp:LT,pow:BT,quad:IT,poly:jT};function xJ(e){XO.call(this,null,e)}xJ.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(bJ)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]},zD(xJ,XO,{transform:function(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=yJ(t.materialize(t.SOURCE).source,e.groupby),i=(e.groupby||[]).map(FC),o=e.method||"linear",a=e.order||3,s=((e,t)=>"poly"===e?t:"quad"===e?2:1)(o,a),u=e.as||[FC(e.x),FC(e.y)],l=bJ[o],c=[];let f=e.extent;ND(bJ,o)||zC("Invalid regression method: "+o),null!=f&&"log"===o&&f[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),f=null),r.forEach((n=>{if(n.length<=s)return void t.dataflow.warn("Skipping regression with more parameters than data points.");const r=l(n,e.x,e.y,a);if(e.params)return void c.push(vO({keys:n.dims,coef:r.coef,rSquared:r.rSquared}));const d=f||DD(n,e.x),h=e=>{const t={};for(let e=0;e<i.length;++e)t[i[e]]=n.dims[e];t[u[0]]=e[0],t[u[1]]=e[1],c.push(vO(t))};"linear"===o?d.forEach((e=>h([e,r.predict(e)]))):GT(r.predict,d,25,200).forEach(h)})),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}}),n(gJ,"regression",(function(){return xJ})),n(gJ,"loess",(function(){return vJ}));var wJ={};const _J=Math.pow(2,-52),kJ=new Uint32Array(512);class EJ{static from(e,t=OJ,n=TJ){const r=e.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=e[o];i[2*o]=t(r),i[2*o+1]=n(r)}return new EJ(i)}constructor(e){const t=e.length>>1;if(t>0&&"number"!=typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:i}=this,o=e.length>>1;let a=1/0,s=1/0,u=-1/0,l=-1/0;for(let t=0;t<o;t++){const n=e[2*t],r=e[2*t+1];n<a&&(a=n),r<s&&(s=r),n>u&&(u=n),r>l&&(l=r),this._ids[t]=t}const c=(a+u)/2,f=(s+l)/2;let d,h,p,m=1/0;for(let t=0;t<o;t++){const n=SJ(c,f,e[2*t],e[2*t+1]);n<m&&(d=t,m=n)}const g=e[2*d],y=e[2*d+1];m=1/0;for(let t=0;t<o;t++){if(t===d)continue;const n=SJ(g,y,e[2*t],e[2*t+1]);n<m&&n>0&&(h=t,m=n)}let v=e[2*h],b=e[2*h+1],x=1/0;for(let t=0;t<o;t++){if(t===d||t===h)continue;const n=MJ(g,y,v,b,e[2*t],e[2*t+1]);n<x&&(p=t,x=n)}let w=e[2*p],_=e[2*p+1];if(x===1/0){for(let t=0;t<o;t++)this._dists[t]=e[2*t]-e[0]||e[2*t+1]-e[1];FJ(this._ids,this._dists,0,o-1);const t=new Uint32Array(o);let n=0;for(let e=0,r=-1/0;e<o;e++){const i=this._ids[e];this._dists[i]>r&&(t[n++]=i,r=this._dists[i])}return this.hull=t.subarray(0,n),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(CJ(g,y,v,b,w,_)){const e=h,t=v,n=b;h=p,v=w,b=_,p=e,w=t,_=n}const k=function(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u);return{x:e+(l*c-s*f)*d,y:t+(a*f-u*c)*d}}(g,y,v,b,w,_);this._cx=k.x,this._cy=k.y;for(let t=0;t<o;t++)this._dists[t]=SJ(e[2*t],e[2*t+1],k.x,k.y);FJ(this._ids,this._dists,0,o-1),this._hullStart=d;let E=3;n[d]=t[p]=h,n[h]=t[d]=p,n[p]=t[h]=d,r[d]=0,r[h]=1,r[p]=2,i.fill(-1),i[this._hashKey(g,y)]=d,i[this._hashKey(v,b)]=h,i[this._hashKey(w,_)]=p,this.trianglesLen=0,this._addTriangle(d,h,p,-1,-1,-1);for(let o,a,s=0;s<this._ids.length;s++){const u=this._ids[s],l=e[2*u],c=e[2*u+1];if(s>0&&Math.abs(l-o)<=_J&&Math.abs(c-a)<=_J)continue;if(o=l,a=c,u===d||u===h||u===p)continue;let f=0;for(let e=0,t=this._hashKey(l,c);e<this._hashSize&&(f=i[(t+e)%this._hashSize],-1===f||f===n[f]);e++);f=t[f];let m,g=f;for(;m=n[g],!CJ(l,c,e[2*g],e[2*g+1],e[2*m],e[2*m+1]);)if(g=m,g===f){g=-1;break}if(-1===g)continue;let y=this._addTriangle(g,u,n[g],-1,-1,r[g]);r[u]=this._legalize(y+2),r[g]=y,E++;let v=n[g];for(;m=n[v],CJ(l,c,e[2*v],e[2*v+1],e[2*m],e[2*m+1]);)y=this._addTriangle(v,u,m,r[u],-1,r[v]),r[u]=this._legalize(y+2),n[v]=v,E--,v=m;if(g===f)for(;m=t[g],CJ(l,c,e[2*m],e[2*m+1],e[2*g],e[2*g+1]);)y=this._addTriangle(m,u,g,-1,r[g],r[m]),this._legalize(y+2),r[m]=y,n[g]=g,E--,g=m;this._hullStart=t[u]=g,n[g]=t[v]=u,n[u]=v,i[this._hashKey(l,c)]=u,i[this._hashKey(e[2*g],e[2*g+1])]=g}this.hull=new Uint32Array(E);for(let e=0,t=this._hullStart;e<E;e++)this.hull[e]=t,t=n[t];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(function(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let i=0,o=0;for(;;){const a=n[e],s=e-e%3;if(o=s+(e+2)%3,-1===a){if(0===i)break;e=kJ[--i];continue}const u=a-a%3,l=s+(e+1)%3,c=u+(a+2)%3,f=t[o],d=t[e],h=t[l],p=t[c];if(DJ(r[2*f],r[2*f+1],r[2*d],r[2*d+1],r[2*h],r[2*h+1],r[2*p],r[2*p+1])){t[e]=p,t[a]=f;const r=n[c];if(-1===r){let t=this._hullStart;do{if(this._hullTri[t]===c){this._hullTri[t]=e;break}t=this._hullPrev[t]}while(t!==this._hullStart)}this._link(e,r),this._link(a,n[o]),this._link(o,c);const s=u+(a+1)%3;i<kJ.length&&(kJ[i++]=s)}else{if(0===i)break;e=kJ[--i]}}return o}_link(e,t){this._halfedges[e]=t,-1!==t&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,i,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function SJ(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function AJ(e,t,n,r,i,o){const a=(r-t)*(i-e),s=(n-e)*(o-t);return Math.abs(a-s)>=33306690738754716e-32*Math.abs(a+s)?a-s:0}function CJ(e,t,n,r,i,o){return(AJ(i,o,e,t,n,r)||AJ(e,t,n,r,i,o)||AJ(n,r,i,o,e,t))<0}function DJ(e,t,n,r,i,o,a,s){const u=e-a,l=t-s,c=n-a,f=r-s,d=i-a,h=o-s,p=c*c+f*f,m=d*d+h*h;return u*(f*m-p*h)-l*(c*m-p*d)+(u*u+l*l)*(c*h-f*d)<0}function MJ(e,t,n,r,i,o){const a=n-e,s=r-t,u=i-e,l=o-t,c=a*a+s*s,f=u*u+l*l,d=.5/(a*l-s*u),h=(l*c-s*f)*d,p=(a*f-u*c)*d;return h*h+p*p}function FJ(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const r=e[i],o=t[r];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=r}else{let i=n+1,o=r;NJ(e,n+r>>1,i),t[e[n]]>t[e[r]]&&NJ(e,n,r),t[e[i]]>t[e[r]]&&NJ(e,i,r),t[e[n]]>t[e[i]]&&NJ(e,n,i);const a=e[i],s=t[a];for(;;){do{i++}while(t[e[i]]<s);do{o--}while(t[e[o]]>s);if(o<i)break;NJ(e,i,o)}e[n+1]=e[o],e[o]=a,r-i+1>=o-n?(FJ(e,t,i,r),FJ(e,t,n,o-1)):(FJ(e,t,n,o-1),FJ(e,t,i,r))}}function NJ(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function OJ(e){return e[0]}function TJ(e){return e[1]}const $J=1e-6;class zJ{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){const r=(e=+e)+(n=+n),i=t=+t;if(n<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>$J||Math.abs(this._y1-i)>$J)&&(this._+="L"+r+","+i),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=i}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class RJ{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class PJ{constructor(e,[t,n,r,i]=[0,0,960,500]){if(!((r=+r)>=(t=+t)&&(i=+i)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=r,this.xmin=t,this.ymax=i,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let t,r,o=0,a=0,s=n.length;o<s;o+=3,a+=2){const s=2*n[o],u=2*n[o+1],l=2*n[o+2],c=e[s],f=e[s+1],d=e[u],h=e[u+1],p=e[l],m=e[l+1],g=d-c,y=h-f,v=p-c,b=m-f,x=g*g+y*y,w=v*v+b*b,_=2*(g*b-y*v);if(_)if(Math.abs(_)<1e-8)t=(c+p)/2,r=(f+m)/2;else{const e=1/_;t=c+(b*x-y*w)*e,r=f+(g*w-v*x)*e}else t=(c+p)/2-1e8*b,r=(f+m)/2+1e8*v;i[a]=t,i[a+1]=r}let o,a,s,u=t[t.length-1],l=4*u,c=e[2*u],f=e[2*u+1];r.fill(0);for(let n=0;n<t.length;++n)u=t[n],o=l,a=c,s=f,l=4*u,c=e[2*u],f=e[2*u+1],r[o+2]=r[l]=s-f,r[o+3]=r[l+1]=c-a}render(e){const t=null==e?e=new zJ:void 0,{delaunay:{halfedges:n,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let t=0,r=n.length;t<r;++t){const r=n[t];if(r<t)continue;const i=2*Math.floor(t/3),a=2*Math.floor(r/3),s=o[i],u=o[i+1],l=o[a],c=o[a+1];this._renderSegment(s,u,l,c,e)}let s,u=i[i.length-1];for(let t=0;t<i.length;++t){s=u,u=i[t];const n=2*Math.floor(r[u]/3),l=o[n],c=o[n+1],f=4*s,d=this._project(l,c,a[f+2],a[f+3]);d&&this._renderSegment(l,c,d[0],d[1],e)}return t&&t.value()}renderBounds(e){const t=null==e?e=new zJ:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=null==t?t=new zJ:void 0,r=this._clip(e);if(null===r||!r.length)return;t.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let e=2;e<i;e+=2)r[e]===r[e-2]&&r[e+1]===r[e-1]||t.lineTo(r[e],r[e+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const e=this.cellPolygon(t);e&&(e.index=t,yield e)}}cellPolygon(e){const t=new RJ;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,i){let o;const a=this._regioncode(e,t),s=this._regioncode(n,r);0===a&&0===s?(i.moveTo(e,t),i.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,s))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(e,t,n){return(t=+t)==t&&(n=+n)==n&&this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const e=this._clip(n);if(e)e:for(let r=0,i=t.length;r<i;r+=2)for(let o=0,a=e.length;o<a;o+=2)if(t[r]==e[o]&&t[r+1]==e[o+1]&&t[(r+2)%i]==e[(o+a-2)%a]&&t[(r+3)%i]==e[(o+a-1)%a]){yield n;break e}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:i}}=this,o=n[e];if(-1===o)return null;const a=[];let s=o;do{const n=Math.floor(s/3);if(a.push(t[2*n],t[2*n+1]),s=s%3==2?s-2:s+1,i[s]!==e)break;s=r[s]}while(s!==o&&-1!==s);return a}_clip(e){if(0===e&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(null===t)return null;const{vectors:n}=this,r=4*e;return n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t)}_clipFinite(e,t){const n=t.length;let r,i,o,a,s,u=null,l=t[n-2],c=t[n-1],f=this._regioncode(l,c);for(let d=0;d<n;d+=2)if(r=l,i=c,l=t[d],c=t[d+1],o=f,f=this._regioncode(l,c),0===o&&0===f)a=s,s=0,u?u.push(l,c):u=[l,c];else{let t,n,d,h,p;if(0===o){if(null===(t=this._clipSegment(r,i,l,c,o,f)))continue;[n,d,h,p]=t}else{if(null===(t=this._clipSegment(l,c,r,i,f,o)))continue;[h,p,n,d]=t,a=s,s=this._edgecode(n,d),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(n,d):u=[n,d]}a=s,s=this._edgecode(h,p),a&&s&&this._edge(e,a,s,u,u.length),u?u.push(h,p):u=[h,p]}if(u)a=s,s=this._edgecode(u[0],u[1]),a&&s&&this._edge(e,a,s,u,u.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(e,t,n,r,i,o){for(;;){if(0===i&&0===o)return[e,t,n,r];if(i&o)return null;let a,s,u=i||o;8&u?(a=e+(n-e)*(this.ymax-t)/(r-t),s=this.ymax):4&u?(a=e+(n-e)*(this.ymin-t)/(r-t),s=this.ymin):2&u?(s=t+(r-t)*(this.xmax-e)/(n-e),a=this.xmax):(s=t+(r-t)*(this.xmin-e)/(n-e),a=this.xmin),i?(e=a,t=s,i=this._regioncode(e,t)):(n=a,r=s,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,i,o){let a,s=Array.from(t);if((a=this._project(s[0],s[1],n,r))&&s.unshift(a[0],a[1]),(a=this._project(s[s.length-2],s[s.length-1],i,o))&&s.push(a[0],a[1]),s=this._clipFinite(e,s))for(let t,n=0,r=s.length,i=this._edgecode(s[r-2],s[r-1]);n<r;n+=2)t=i,i=this._edgecode(s[n],s[n+1]),t&&i&&(n=this._edge(e,t,i,s,n),r=s.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(e,t,n,r,i){for(;t!==n;){let n,o;switch(t){case 5:t=4;continue;case 4:t=6,n=this.xmax,o=this.ymin;break;case 6:t=2;continue;case 2:t=10,n=this.xmax,o=this.ymax;break;case 10:t=8;continue;case 8:t=9,n=this.xmin,o=this.ymax;break;case 9:t=1;continue;case 1:t=5,n=this.xmin,o=this.ymin}r[i]===n&&r[i+1]===o||!this.contains(e,n,o)||(r.splice(i,0,n,o),i+=2)}if(r.length>4)for(let e=0;e<r.length;e+=2){const t=(e+2)%r.length,n=(e+4)%r.length;(r[e]===r[t]&&r[t]===r[n]||r[e+1]===r[t+1]&&r[t+1]===r[n+1])&&(r.splice(t,2),e-=2)}return i}_project(e,t,n,r){let i,o,a,s=1/0;if(r<0){if(t<=this.ymin)return null;(i=(this.ymin-t)/r)<s&&(a=this.ymin,o=e+(s=i)*n)}else if(r>0){if(t>=this.ymax)return null;(i=(this.ymax-t)/r)<s&&(a=this.ymax,o=e+(s=i)*n)}if(n>0){if(e>=this.xmax)return null;(i=(this.xmax-e)/n)<s&&(o=this.xmax,a=t+(s=i)*r)}else if(n<0){if(e<=this.xmin)return null;(i=(this.xmin-e)/n)<s&&(o=this.xmin,a=t+(s=i)*r)}return[o,a]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}}const LJ=2*Math.PI,BJ=Math.pow;function IJ(e){return e[0]}function jJ(e){return e[1]}function UJ(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class qJ{static from(e,t=IJ,n=jJ,r){return new qJ("length"in e?function(e,t,n,r){const i=e.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=e[a];o[2*a]=t.call(r,i,a,e),o[2*a+1]=n.call(r,i,a,e)}return o}(e,t,n,r):Float64Array.from(function*(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}(e,t,n,r)))}constructor(e){this._delaunator=new EJ(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&function(e){const{triangles:t,coords:n}=e;for(let e=0;e<t.length;e+=3){const r=2*t[e],i=2*t[e+1],o=2*t[e+2];if((n[o]-n[r])*(n[i+1]-n[r+1])-(n[i]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}(e)){this.collinear=Int32Array.from({length:t.length/2},((e,t)=>t)).sort(((e,n)=>t[2*e]-t[2*n]||t[2*e+1]-t[2*n+1]));const e=this.collinear[0],n=this.collinear[this.collinear.length-1],r=[t[2*e],t[2*e+1],t[2*n],t[2*n+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let e=0,n=t.length/2;e<n;++e){const n=UJ(t[2*e],t[2*e+1],i);t[2*e]=n[0],t[2*e+1]=n[1]}this._delaunator=new EJ(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let e=0,t=n.length;e<t;++e){const t=i[e%3==2?e-2:e+1];-1!==n[e]&&-1!==o[t]||(o[t]=e)}for(let e=0,t=r.length;e<t;++e)a[r[e]]=e;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(e){return new PJ(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const t=a.indexOf(e);return t>0&&(yield a[t-1]),void(t<a.length-1&&(yield a[t+1]))}const s=t[e];if(-1===s)return;let u=s,l=-1;do{if(yield l=o[u],u=u%3==2?u-2:u+1,o[u]!==e)return;if(u=i[u],-1===u){const t=n[(r[e]+1)%n.length];return void(t!==l&&(yield t))}}while(u!==s)}find(e,t,n=0){if((e=+e)!=e||(t=+t)!=t)return-1;const r=n;let i;for(;(i=this._step(n,e,t))>=0&&i!==n&&i!==r;)n=i;return i}_step(e,t,n){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:s,points:u}=this;if(-1===r[e]||!u.length)return(e+1)%(u.length>>1);let l=e,c=BJ(t-u[2*e],2)+BJ(n-u[2*e+1],2);const f=r[e];let d=f;do{let r=s[d];const f=BJ(t-u[2*r],2)+BJ(n-u[2*r+1],2);if(f<c&&(c=f,l=r),d=d%3==2?d-2:d+1,s[d]!==e)break;if(d=a[d],-1===d){if(d=i[(o[e]+1)%i.length],d!==r&&BJ(t-u[2*d],2)+BJ(n-u[2*d+1],2)<c)return d;break}}while(d!==f);return l}render(e){const t=null==e?e=new zJ:void 0,{points:n,halfedges:r,triangles:i}=this;for(let t=0,o=r.length;t<o;++t){const o=r[t];if(o<t)continue;const a=2*i[t],s=2*i[o];e.moveTo(n[a],n[a+1]),e.lineTo(n[s],n[s+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t=2){const n=null==e?e=new zJ:void 0,{points:r}=this;for(let n=0,i=r.length;n<i;n+=2){const i=r[n],o=r[n+1];e.moveTo(i+t,o),e.arc(i,o,t,0,LJ)}return n&&n.value()}renderHull(e){const t=null==e?e=new zJ:void 0,{hull:n,points:r}=this,i=2*n[0],o=n.length;e.moveTo(r[i],r[i+1]);for(let t=1;t<o;++t){const i=2*n[t];e.lineTo(r[i],r[i+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new RJ;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=null==t?t=new zJ:void 0,{points:r,triangles:i}=this,o=2*i[e*=3],a=2*i[e+1],s=2*i[e+2];return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[s],r[s+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new RJ;return this.renderTriangle(e,t),t.value()}}function WJ(e){XO.call(this,null,e)}WJ.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const HJ=[-1e5,-1e5,1e5,1e5];function VJ(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}zD(WJ,XO,{transform:function(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:HJ;const o=this.value=qJ.from(r,e.x,e.y).voronoi(i);for(let e=0,t=r.length;e<t;++e){const t=o.cellPolygon(e);r[e][n]=t?VJ(t):null}return t.reflow(e.modified()).modifies(n)}}),n(wJ,"voronoi",(function(){return WJ}));var GJ={},YJ=Math.PI/180,XJ=2048;function QJ(){var e,t,n,r,i,o,a,s=[256,256],u=eK,l=[],c=Math.random,f={};function d(e,t,n){for(var r,i,o,a,l,f=t.x,d=t.y,h=Math.sqrt(s[0]*s[0]+s[1]*s[1]),p=u(s),m=c()<.5?1:-1,g=-m;(r=p(g+=m))&&(i=~~r[0],o=~~r[1],!(Math.min(Math.abs(i),Math.abs(o))>=h));)if(t.x=f+i,t.y=d+o,!(t.x+t.x0<0||t.y+t.y0<0||t.x+t.x1>s[0]||t.y+t.y1>s[1]||n&&KJ(t,e,s[0])||n&&(l=n,!((a=t).x+a.x1>l[0].x&&a.x+a.x0<l[1].x&&a.y+a.y1>l[0].y&&a.y+a.y0<l[1].y)))){for(var y,v=t.sprite,b=t.width>>5,x=s[0]>>5,w=t.x-(b<<4),_=127&w,k=32-_,E=t.y1-t.y0,S=(t.y+t.y0)*x+(w>>5),A=0;A<E;A++){y=0;for(var C=0;C<=b;C++)e[S+C]|=y<<k|(C<b?(y=v[A*b+C])>>>_:0);S+=x}return t.sprite=null,!0}return!1}return f.layout=function(){for(var u=function(e){e.width=e.height=1;var t=Math.sqrt(e.getContext("2d").getImageData(0,0,1,1).data.length>>2);e.width=2048/t,e.height=XJ/t;var n=e.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:t}}(PR()),f=function(e){var t=[],n=-1;for(;++n<e;)t[n]=0;return t}((s[0]>>5)*s[1]),h=null,p=l.length,m=-1,g=[],y=l.map((s=>({text:e(s),font:t(s),style:r(s),weight:i(s),rotate:o(s),size:~~(n(s)+1e-14),padding:a(s),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:s}))).sort(((e,t)=>t.size-e.size));++m<p;){var v=y[m];v.x=s[0]*(c()+.5)>>1,v.y=s[1]*(c()+.5)>>1,JJ(u,v,y,m),v.hasText&&d(f,v,h)&&(g.push(v),h?ZJ(h,v):h=[{x:v.x+v.x0,y:v.y+v.y0},{x:v.x+v.x1,y:v.y+v.y1}],v.x-=s[0]>>1,v.y-=s[1]>>1)}return g},f.words=function(e){return arguments.length?(l=e,f):l},f.size=function(e){return arguments.length?(s=[+e[0],+e[1]],f):s},f.font=function(e){return arguments.length?(t=tK(e),f):t},f.fontStyle=function(e){return arguments.length?(r=tK(e),f):r},f.fontWeight=function(e){return arguments.length?(i=tK(e),f):i},f.rotate=function(e){return arguments.length?(o=tK(e),f):o},f.text=function(t){return arguments.length?(e=tK(t),f):e},f.spiral=function(e){return arguments.length?(u=nK[e]||e,f):u},f.fontSize=function(e){return arguments.length?(n=tK(e),f):n},f.padding=function(e){return arguments.length?(a=tK(e),f):a},f.random=function(e){return arguments.length?(c=e,f):c},f}function JJ(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,2048/o,XJ/o);var a,s,u,l,c,f=0,d=0,h=0,p=n.length;for(--r;++r<p;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,a=i.measureText(t.text+"m").width*o,u=t.size<<1,t.rotate){var m=Math.sin(t.rotate*YJ),g=Math.cos(t.rotate*YJ),y=a*g,v=a*m,b=u*g,x=u*m;a=Math.max(Math.abs(y+x),Math.abs(y-x))+31>>5<<5,u=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else a=a+31>>5<<5;if(u>h&&(h=u),f+a>=2048&&(f=0,d+=h,h=0),d+u>=XJ)break;i.translate((f+(a>>1))/o,(d+(u>>1))/o),t.rotate&&i.rotate(t.rotate*YJ),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=a,t.height=u,t.xoff=f,t.yoff=d,t.x1=a>>1,t.y1=u>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,f+=a}for(var w=i.getImageData(0,0,2048/o,XJ/o).data,_=[];--r>=0;)if((t=n[r]).hasText){for(s=(a=t.width)>>5,u=t.y1-t.y0,l=0;l<u*s;l++)_[l]=0;if(null==(f=t.xoff))return;d=t.yoff;var k=0,E=-1;for(c=0;c<u;c++){for(l=0;l<a;l++){var S=s*c+(l>>5),A=w[2048*(d+c)+(f+l)<<2]?1<<31-l%32:0;_[S]|=A,k|=A}k?E=c:(t.y0++,u--,c--,d++)}t.y1=t.y0+E,t.sprite=_.slice(0,(t.y1-t.y0)*s)}}}function KJ(e,t,n){n>>=5;for(var r,i=e.sprite,o=e.width>>5,a=e.x-(o<<4),s=127&a,u=32-s,l=e.y1-e.y0,c=(e.y+e.y0)*n+(a>>5),f=0;f<l;f++){r=0;for(var d=0;d<=o;d++)if((r<<u|(d<o?(r=i[f*o+d])>>>s:0))&t[c+d])return!0;c+=n}return!1}function ZJ(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function eK(e){var t=e[0]/e[1];return function(e){return[t*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function tK(e){return"function"==typeof e?e:function(){return e}}var nK={archimedean:eK,rectangular:function(e){var t=4*e[0]/e[1],n=0,r=0;return function(e){var i=e<0?-1:1;switch(Math.sqrt(1+4*i*e)-i&3){case 0:n+=t;break;case 1:r+=4;break;case 2:n-=t;break;default:r-=4}return[n,r]}}};const rK=["x","y","font","fontSize","fontStyle","fontWeight","angle"],iK=["text","font","rotate","fontSize","fontStyle","fontWeight"];function oK(e){XO.call(this,QJ(),e)}oK.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:rK}]},zD(oK,XO,{transform:function(e,t){!e.size||e.size[0]&&e.size[1]||zC("Wordcloud size dimensions must be non-zero.");const n=e.modified();if(!(n||t.changed(t.ADD_REM)||iK.some((function(n){const r=e[n];return bD(r)&&t.modified(r.fields)}))))return;const r=t.materialize(t.SOURCE).source,i=this.value,o=e.as||rK;let a,s=e.fontSize||14;if(bD(s)?a=e.fontSizeRange:s=SD(s),a){const e=s,t=pP("sqrt")().domain(DD(r,e)).range(a);s=n=>t(e(n))}r.forEach((e=>{e[o[0]]=NaN,e[o[1]]=NaN,e[o[3]]=0}));const u=i.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(aT).layout(),l=i.size(),c=l[0]>>1,f=l[1]>>1,d=u.length;for(let e,t,n=0;n<d;++n)e=u[n],t=e.datum,t[o[0]]=e.x+c,t[o[1]]=e.y+f,t[o[2]]=e.font,t[o[3]]=e.size,t[o[4]]=e.style,t[o[5]]=e.weight,t[o[6]]=e.rotate;return t.reflow(n).modifies(o)}}),n(GJ,"wordcloud",(function(){return oK}));var aK={};const sK=e=>new Uint8Array(e),uK=e=>new Uint16Array(e),lK=e=>new Uint32Array(e);function cK(e,t,n){const r=(t<257?sK:t<65537?uK:lK)(e);return n&&r.set(n),r}function fK(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd:function(e,t){const n=this,i=n.bisect(n.range,e.value),o=e.index,a=i[0],s=i[1],u=o.length;let l;for(l=0;l<a;++l)t[o[l]]|=r;for(l=s;l<u;++l)t[o[l]]|=r;return n}}}function dK(){let e=lK(0),t=[],n=0;return{insert:function(r,i,o){if(!i.length)return[];const a=n,s=i.length,u=lK(s);let l,c,f,d=Array(s);for(f=0;f<s;++f)d[f]=r(i[f]),u[f]=f;if(d=function(e,t){return e.sort.call(t,((t,n)=>{const r=e[t],i=e[n];return r<i?-1:r>i?1:0})),function(e,t){return Array.from(t,(t=>e[t]))}(e,t)}(d,u),a)l=t,c=e,t=Array(a+s),e=lK(a+s),function(e,t,n,r,i,o,a,s,u){let l,c=0,f=0;for(l=0;c<r&&f<a;++l)t[c]<i[f]?(s[l]=t[c],u[l]=n[c++]):(s[l]=i[f],u[l]=o[f++]+e);for(;c<r;++c,++l)s[l]=t[c],u[l]=n[c];for(;f<a;++f,++l)s[l]=i[f],u[l]=o[f]+e}(o,l,c,a,d,u,s,t,e);else{if(o>0)for(f=0;f<s;++f)u[f]+=o;t=d,e=u}return n=a+s,{index:u,value:d}},remove:function(r,i){const o=n;let a,s,u;for(s=0;!i[e[s]]&&s<o;++s);for(u=s;s<o;++s)i[a=e[s]]||(e[u]=a,t[u]=t[s],++u);n=o-r},bisect:function(e,r){let i;return r?i=r.length:(r=t,i=n),[Ub(r,e[0],0,i),jb(r,e[1],0,i)]},reindex:function(t){for(let r=0,i=n;r<i;++r)e[r]=t[e[r]]},index:()=>e,size:()=>n}}function hK(e){XO.call(this,function(){let e=8,t=[],n=lK(0),r=cK(0,e),i=cK(0,e);return{data:()=>t,seen:()=>{return e=n,r=t.length,n=e.length>=r?e:((i=i||new e.constructor(r)).set(e),i);var e,r,i},add:function(e){for(let n,r=0,i=t.length,o=e.length;r<o;++r)n=e[r],n._index=i++,t.push(n)},remove:function(e,n){const o=t.length,a=Array(o-e),s=t;let u,l,c;for(l=0;!n[l]&&l<o;++l)a[l]=t[l],s[l]=l;for(c=l;l<o;++l)u=t[l],n[l]?s[l]=-1:(s[l]=c,r[c]=r[l],i[c]=i[l],a[c]=u,u._index=c++),r[l]=0;return t=a,s},size:()=>t.length,curr:()=>r,prev:()=>i,reset:e=>i[e]=r[e],all:()=>e<257?255:e<65537?65535:4294967295,set:function(e,t){r[e]|=t},clear:function(e,t){r[e]&=~t},resize:function(t,n){(t>r.length||n>e)&&(e=Math.max(n,e),r=cK(t,e,r),i=cK(t,e))}}}(),e),this._indices=null,this._dims=null}function pK(e){XO.call(this,null,e)}hK.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]},zD(hK,XO,{transform:function(e,t){return this._dims?e.modified("fields")||e.fields.some((e=>t.modified(e.fields)))?this.reinit(e,t):this.eval(e,t):this.init(e,t)},init:function(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s,u,l=0;for(;l<a;++l)s=n[l].fname,u=i[s]||(i[s]=dK()),o.push(fK(u,l,r[l]));return this.eval(e,t)},reinit:function(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,u=s.curr(),l=s.prev(),c=s.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,x,w,_,k;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(x={},v=t.mod,w=0,_=v.length;w<_;++w)x[v[w]._index]=1;for(w=0;w<h;++w)k=r[w],(!a[w]||e.modified("fields",w)||t.modified(k.fields))&&(y=k.fname,(m=p[y])||(o[y]=g=dK(),p[y]=m=g.insert(k,t.source,0)),a[w]=fK(g,w,i[w]).onAdd(m,u));for(w=0,_=s.data().length;w<_;++w)b[w]||(l[w]!==u[w]?f.push(w):x[w]&&u[w]!==c&&d.push(w));return s.mask=(1<<h)-1,n},eval:function(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert:function(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,u={},l=n.add,c=i.size()+r.length,f=o.length;let d,h,p,m=i.size();i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(d=0;d<f;++d)h=s[d].fname,p=u[h]||(u[h]=a[h].insert(s[d],r,m)),o[d].onAdd(p,g);for(;m<c;++m)y[m]=v,g[m]!==v&&l.push(m)},modify:function(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,u,l;for(s=0,u=a.length;s<u;++s)l=a[s]._index,i[l]!==o&&n.push(l)},remove:function(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,a[h]=p=o[h],o[h]=s,p!==s&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex:function(e,t,n){const r=this._indices,i=this.value;e.runAfter((()=>{const e=i.remove(t,n);for(const t in r)r[t].reindex(e)}))},update:function(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s,u,l=0;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(s=u,++l);if(1===l)l=r[s].one,this.incrementOne(r[s],i[s],n.add,n.rem);else for(u=0,l=0;u<a;++u)e.modified("query",u)&&(l|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return l},incrementAll:function(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],o[v]!==n&&(s[v]=a[v],o[v]=n,r.push(v)),a[v]^=m;e.range=t.slice()},incrementOne:function(e,t,n,r){const i=this.value.curr(),o=e.index(),a=e.bisect(e.range),s=e.bisect(t),u=s[0],l=s[1],c=a[0],f=a[1],d=e.one;let h,p,m;if(u<c)for(h=u,p=Math.min(c,l);h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(u>c)for(h=c,p=Math.min(u,f);h<p;++h)m=o[h],i[m]^=d,r.push(m);if(l>f)for(h=Math.max(u,f),p=l;h<p;++h)m=o[h],i[m]^=d,n.push(m);else if(l<f)for(h=Math.max(c,l),p=f;h<p;++h)m=o[h],i[m]^=d,r.push(m);e.range=t.slice()}}),pK.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]},zD(pK,XO,{transform:function(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(0==(i&n))return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),u=r.prev(),l=e=>s[e]&n?null:a[e];return o.filter(o.MOD,l),i&i-1?(o.filter(o.ADD,(e=>{const t=s[e]&n;return!t&&t^u[e]&n?a[e]:null})),o.filter(o.REM,(e=>{const t=s[e]&n;return t&&!(t^t^u[e]&n)?a[e]:null}))):(o.filter(o.ADD,l),o.filter(o.REM,(e=>(s[e]&n)===i?a[e]:null))),o.filter(o.SOURCE,(e=>l(e._index)))}}),n(aK,"resolvefilter",(function(){return pK})),n(aK,"crossfilter",(function(){return hK})),r(CC,eT),r(CC,PF),r(CC,iM),r(CC,_z);const mK="RawCode",gK="Literal",yK="Property",vK="Identifier",bK="ArrayExpression",xK="BinaryExpression",wK="CallExpression",_K="ConditionalExpression",kK="LogicalExpression",EK="MemberExpression",SK="ObjectExpression",AK="UnaryExpression";function CK(e){this.type=e}var DK,MK,FK,NK,OK;CK.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=function(e){switch(e.type){case bK:return e.elements;case xK:case kK:return[e.left,e.right];case wK:return[e.callee].concat(e.arguments);case _K:return[e.test,e.consequent,e.alternate];case EK:return[e.object,e.property];case SK:return e.properties;case yK:return[e.key,e.value];case AK:return[e.argument];case vK:case gK:case mK:default:return[]}}(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};(DK={})[1]="Boolean",DK[2]="<end>",DK[3]="Identifier",DK[4]="Keyword",DK[5]="Null",DK[6]="Numeric",DK[7]="Punctuator",DK[8]="String",DK[9]="RegularExpression";var TK="Identifier",$K="Unexpected token %0",zK="Invalid regular expression",RK="Invalid regular expression: missing /",PK="Octal literals are not allowed in strict mode.",LK="ILLEGAL",BK="Disabled.",IK=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),jK=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function UK(e,t){if(!e)throw new Error("ASSERT: "+t)}function qK(e){return e>=48&&e<=57}function WK(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function HK(e){return"01234567".indexOf(e)>=0}function VK(e){return 32===e||9===e||11===e||12===e||160===e||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function GK(e){return 10===e||13===e||8232===e||8233===e}function YK(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||92===e||e>=128&&IK.test(String.fromCharCode(e))}function XK(e){return 36===e||95===e||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||92===e||e>=128&&jK.test(String.fromCharCode(e))}const QK={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function JK(){for(;FK<NK;){const e=MK.charCodeAt(FK);if(!VK(e)&&!GK(e))break;++FK}}function KK(e){var t,n,r,i=0;for(n="u"===e?4:2,t=0;t<n;++t)FK<NK&&WK(MK[FK])?(r=MK[FK++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):pZ({},$K,LK);return String.fromCharCode(i)}function ZK(){var e,t,n,r;for(t=0,"}"===(e=MK[FK])&&pZ({},$K,LK);FK<NK&&WK(e=MK[FK++]);)t=16*t+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||"}"!==e)&&pZ({},$K,LK),t<=65535?String.fromCharCode(t):(n=55296+(t-65536>>10),r=56320+(t-65536&1023),String.fromCharCode(n,r))}function eZ(){var e,t;for(e=MK.charCodeAt(FK++),t=String.fromCharCode(e),92===e&&(117!==MK.charCodeAt(FK)&&pZ({},$K,LK),++FK,(e=KK("u"))&&"\\"!==e&&YK(e.charCodeAt(0))||pZ({},$K,LK),t=e);FK<NK&&XK(e=MK.charCodeAt(FK));)++FK,t+=String.fromCharCode(e),92===e&&(t=t.substr(0,t.length-1),117!==MK.charCodeAt(FK)&&pZ({},$K,LK),++FK,(e=KK("u"))&&"\\"!==e&&XK(e.charCodeAt(0))||pZ({},$K,LK),t+=e);return t}function tZ(){var e,t;return e=FK,{type:1===(t=92===MK.charCodeAt(FK)?eZ():function(){var e,t;for(e=FK++;FK<NK;){if(92===(t=MK.charCodeAt(FK)))return FK=e,eZ();if(!XK(t))break;++FK}return MK.slice(e,FK)}()).length?3:QK.hasOwnProperty(t)?4:"null"===t?5:"true"===t||"false"===t?1:3,value:t,start:e,end:FK}}function nZ(){var e,t,n,r,i=FK,o=MK.charCodeAt(FK),a=MK[FK];switch(o){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++FK,{type:7,value:String.fromCharCode(o),start:i,end:FK};default:if(61===(e=MK.charCodeAt(FK+1)))switch(o){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return FK+=2,{type:7,value:String.fromCharCode(o)+String.fromCharCode(e),start:i,end:FK};case 33:case 61:return FK+=2,61===MK.charCodeAt(FK)&&++FK,{type:7,value:MK.slice(i,FK),start:i,end:FK}}}return">>>="===(r=MK.substr(FK,4))?{type:7,value:r,start:i,end:FK+=4}:">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?{type:7,value:n,start:i,end:FK+=3}:a===(t=n.substr(0,2))[1]&&"+-<>&|".indexOf(a)>=0||"=>"===t?{type:7,value:t,start:i,end:FK+=2}:("//"===t&&pZ({},$K,LK),"<>=!+-*%&|^/".indexOf(a)>=0?{type:7,value:a,start:i,end:++FK}:void pZ({},$K,LK))}function rZ(){var e,t,n;if(UK(qK((n=MK[FK]).charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),t=FK,e="","."!==n){if(e=MK[FK++],n=MK[FK],"0"===e){if("x"===n||"X"===n)return++FK,function(e){let t="";for(;FK<NK&&WK(MK[FK]);)t+=MK[FK++];return 0===t.length&&pZ({},$K,LK),YK(MK.charCodeAt(FK))&&pZ({},$K,LK),{type:6,value:parseInt("0x"+t,16),start:e,end:FK}}(t);if(HK(n))return function(e){let t="0"+MK[FK++];for(;FK<NK&&HK(MK[FK]);)t+=MK[FK++];return(YK(MK.charCodeAt(FK))||qK(MK.charCodeAt(FK)))&&pZ({},$K,LK),{type:6,value:parseInt(t,8),octal:!0,start:e,end:FK}}(t);n&&qK(n.charCodeAt(0))&&pZ({},$K,LK)}for(;qK(MK.charCodeAt(FK));)e+=MK[FK++];n=MK[FK]}if("."===n){for(e+=MK[FK++];qK(MK.charCodeAt(FK));)e+=MK[FK++];n=MK[FK]}if("e"===n||"E"===n)if(e+=MK[FK++],"+"!==(n=MK[FK])&&"-"!==n||(e+=MK[FK++]),qK(MK.charCodeAt(FK)))for(;qK(MK.charCodeAt(FK));)e+=MK[FK++];else pZ({},$K,LK);return YK(MK.charCodeAt(FK))&&pZ({},$K,LK),{type:6,value:parseFloat(e),start:t,end:FK}}function iZ(){var e,t,n,r;return OK=null,JK(),e=FK,t=function(){var e,t,n,r;for(UK("/"===(e=MK[FK]),"Regular expression literal must start with a slash"),t=MK[FK++],n=!1,r=!1;FK<NK;)if(t+=e=MK[FK++],"\\"===e)GK((e=MK[FK++]).charCodeAt(0))&&pZ({},RK),t+=e;else if(GK(e.charCodeAt(0)))pZ({},RK);else if(n)"]"===e&&(n=!1);else{if("/"===e){r=!0;break}"["===e&&(n=!0)}return r||pZ({},RK),{value:t.substr(1,t.length-2),literal:t}}(),n=function(){var e,t,n;for(t="",n="";FK<NK&&XK((e=MK[FK]).charCodeAt(0));)++FK,"\\"===e&&FK<NK?pZ({},$K,LK):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pZ({},zK,n),{value:n,literal:t}}(),r=function(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,((e,t)=>{if(parseInt(t,16)<=1114111)return"x";pZ({},zK)})).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(e){pZ({},zK)}try{return new RegExp(e,t)}catch(e){return null}}(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:FK}}function oZ(){if(JK(),FK>=NK)return{type:2,start:FK,end:FK};const e=MK.charCodeAt(FK);return YK(e)?tZ():40===e||41===e||59===e?nZ():39===e||34===e?function(){var e,t,n,r,i="",o=!1;for(UK("'"===(e=MK[FK])||'"'===e,"String literal must starts with a quote"),t=FK,++FK;FK<NK;){if((n=MK[FK++])===e){e="";break}if("\\"===n)if((n=MK[FK++])&&GK(n.charCodeAt(0)))"\r"===n&&"\n"===MK[FK]&&++FK;else switch(n){case"u":case"x":"{"===MK[FK]?(++FK,i+=ZK()):i+=KK(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\v";break;default:HK(n)?(0!==(r="01234567".indexOf(n))&&(o=!0),FK<NK&&HK(MK[FK])&&(o=!0,r=8*r+"01234567".indexOf(MK[FK++]),"0123".indexOf(n)>=0&&FK<NK&&HK(MK[FK])&&(r=8*r+"01234567".indexOf(MK[FK++]))),i+=String.fromCharCode(r)):i+=n}else{if(GK(n.charCodeAt(0)))break;i+=n}}return""!==e&&pZ({},$K,LK),{type:8,value:i,octal:o,start:t,end:FK}}():46===e?qK(MK.charCodeAt(FK+1))?rZ():nZ():qK(e)?rZ():nZ()}function aZ(){const e=OK;return FK=e.end,OK=oZ(),FK=e.end,e}function sZ(){const e=FK;OK=oZ(),FK=e}function uZ(e,t,n){const r=new CK("||"===e||"&&"===e?"LogicalExpression":"BinaryExpression");return r.operator=e,r.left=t,r.right=n,r}function lZ(e,t){const n=new CK("CallExpression");return n.callee=e,n.arguments=t,n}function cZ(e){const t=new CK(TK);return t.name=e,t}function fZ(e){const t=new CK("Literal");return t.value=e.value,t.raw=MK.slice(e.start,e.end),e.regex&&("//"===t.raw&&(t.raw="/(?:)/"),t.regex=e.regex),t}function dZ(e,t,n){const r=new CK("MemberExpression");return r.computed="["===e,r.object=t,r.property=n,r.computed||(n.member=!0),r}function hZ(e,t,n){const r=new CK("Property");return r.key=t,r.value=n,r.kind=e,r}function pZ(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,((e,t)=>(UK(t<r.length,"Message reference must be in range"),r[t])));throw(n=new Error(i)).index=FK,n.description=i,n}function mZ(e){2===e.type&&pZ(e,"Unexpected end of input"),6===e.type&&pZ(e,"Unexpected number"),8===e.type&&pZ(e,"Unexpected string"),3===e.type&&pZ(e,"Unexpected identifier"),4===e.type&&pZ(e,"Unexpected reserved word"),pZ(e,$K,e.value)}function gZ(e){const t=aZ();7===t.type&&t.value===e||mZ(t)}function yZ(e){return 7===OK.type&&OK.value===e}function vZ(e){return 4===OK.type&&OK.value===e}function bZ(){const e=[];for(FK=OK.start,gZ("[");!yZ("]");)yZ(",")?(aZ(),e.push(null)):(e.push(NZ()),yZ("]")||gZ(","));return aZ(),function(e){const t=new CK("ArrayExpression");return t.elements=e,t}(e)}function xZ(){FK=OK.start;const e=aZ();return 8===e.type||6===e.type?(e.octal&&pZ(e,PK),fZ(e)):cZ(e.value)}function wZ(){var e,t,n;return FK=OK.start,3===(e=OK).type?(n=xZ(),gZ(":"),hZ("init",n,NZ())):2!==e.type&&7!==e.type?(t=xZ(),gZ(":"),hZ("init",t,NZ())):void mZ(e)}function _Z(){var e,t,n=[],r={},i=String;for(FK=OK.start,gZ("{");!yZ("}");)t="$"+((e=wZ()).key.type===TK?e.key.name:i(e.key.value)),Object.prototype.hasOwnProperty.call(r,t)?pZ({},"Duplicate data property in object literal not allowed in strict mode"):r[t]=!0,n.push(e),yZ("}")||gZ(",");return gZ("}"),function(e){const t=new CK("ObjectExpression");return t.properties=e,t}(n)}const kZ={if:1};function EZ(){var e,t,n;if(yZ("("))return function(){gZ("(");const e=OZ();return gZ(")"),e}();if(yZ("["))return bZ();if(yZ("{"))return _Z();if(e=OK.type,FK=OK.start,3===e||kZ[OK.value])n=cZ(aZ().value);else if(8===e||6===e)OK.octal&&pZ(OK,PK),n=fZ(aZ());else{if(4===e)throw new Error(BK);1===e?((t=aZ()).value="true"===t.value,n=fZ(t)):5===e?((t=aZ()).value=null,n=fZ(t)):yZ("/")||yZ("/=")?(n=fZ(iZ()),sZ()):mZ(aZ())}return n}function SZ(){const e=[];if(gZ("("),!yZ(")"))for(;FK<NK&&(e.push(NZ()),!yZ(")"));)gZ(",");return gZ(")"),e}function AZ(){return gZ("."),function(){FK=OK.start;const e=aZ();return function(e){return 3===e.type||4===e.type||1===e.type||5===e.type}(e)||mZ(e),cZ(e.value)}()}function CZ(){gZ("[");const e=OZ();return gZ("]"),e}function DZ(){const e=function(){var e;for(e=EZ();;)if(yZ("."))e=dZ(".",e,AZ());else if(yZ("("))e=lZ(e,SZ());else{if(!yZ("["))break;e=dZ("[",e,CZ())}return e}();if(7===OK.type&&(yZ("++")||yZ("--")))throw new Error(BK);return e}function MZ(){var e,t;if(7!==OK.type&&4!==OK.type)t=DZ();else{if(yZ("++")||yZ("--"))throw new Error(BK);if(yZ("+")||yZ("-")||yZ("~")||yZ("!"))e=aZ(),t=MZ(),t=function(e,t){const n=new CK("UnaryExpression");return n.operator=e,n.argument=t,n.prefix=!0,n}(e.value,t);else{if(vZ("delete")||vZ("void")||vZ("typeof"))throw new Error(BK);t=DZ()}}return t}function FZ(e){let t=0;if(7!==e.type&&4!==e.type)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11}return t}function NZ(){var e,t;return e=function(){var e,t,n,r,i,o,a,s,u,l;if(e=OK,u=MZ(),0===(i=FZ(r=OK)))return u;for(r.prec=i,aZ(),t=[e,OK],o=[u,r,a=MZ()];(i=FZ(OK))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,u=o.pop(),t.pop(),n=uZ(s,u,a),o.push(n);(r=aZ()).prec=i,o.push(r),t.push(OK),n=MZ(),o.push(n)}for(n=o[l=o.length-1],t.pop();l>1;)t.pop(),n=uZ(o[l-1].value,o[l-2],n),l-=2;return n}(),yZ("?")&&(aZ(),t=NZ(),gZ(":"),e=function(e,t,n){const r=new CK("ConditionalExpression");return r.test=e,r.consequent=t,r.alternate=n,r}(e,t,NZ())),e}function OZ(){const e=NZ();if(yZ(","))throw new Error(BK);return e}function TZ(e){FK=0,NK=(MK=e).length,OK=null,sZ();const t=OZ();if(2!==OK.type)throw new Error("Unexpect token after expression.");return t}var $Z={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function zZ(e){function t(t,n,r){return i=>function(t,n,r,i){let o=e(n[0]);return r&&(o=r+"("+o+")",0===r.lastIndexOf("new ",0)&&(o="("+o+")")),o+"."+t+(i<0?"":0===i?"()":"("+n.slice(1).map(e).join(",")+")")}(t,i,n,r)}const n="new Date",r="String",i="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(t){t.length<3&&zC("Missing arguments to clamp function."),t.length>3&&zC("Too many arguments to clamp function.");const n=t.map(e);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:n,date:t("getDate",n,0),day:t("getDay",n,0),year:t("getFullYear",n,0),month:t("getMonth",n,0),hours:t("getHours",n,0),minutes:t("getMinutes",n,0),seconds:t("getSeconds",n,0),milliseconds:t("getMilliseconds",n,0),time:t("getTime",n,0),timezoneoffset:t("getTimezoneOffset",n,0),utcdate:t("getUTCDate",n,0),utcday:t("getUTCDay",n,0),utcyear:t("getUTCFullYear",n,0),utcmonth:t("getUTCMonth",n,0),utchours:t("getUTCHours",n,0),utcminutes:t("getUTCMinutes",n,0),utcseconds:t("getUTCSeconds",n,0),utcmilliseconds:t("getUTCMilliseconds",n,0),length:t("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:t("toUpperCase",r,0),lower:t("toLowerCase",r,0),substring:t("substring",r),split:t("split",r),trim:t("trim",r,0),regexp:i,test:t("test",i),if:function(t){t.length<3&&zC("Missing arguments to if function."),t.length>3&&zC("Too many arguments to if function.");const n=t.map(e);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function RZ(e){const t=(e=e||{}).allowed?tM(e.allowed):{},n=e.forbidden?tM(e.forbidden):{},r=e.constants||$Z,i=(e.functions||zZ)(f),o=e.globalvar,a=e.fieldvar,s=bD(o)?o:e=>"".concat(o,'["').concat(e,'"]');let u={},l={},c=0;function f(e){if(UD(e))return e;const t=d[e.type];return null==t&&zC("Unsupported type: "+e.type),t(e)}const d={Literal:e=>e.raw,Identifier:e=>{const i=e.name;return c>0?i:ND(n,i)?zC("Illegal identifier: "+i):ND(r,i)?r[i]:ND(t,i)?i:(u[i]=1,s(i))},MemberExpression:e=>{const t=!e.computed,n=f(e.object);t&&(c+=1);const r=f(e.property);return n===a&&(l[function(e){const t=e&&e.length-1;return t&&('"'===e[0]&&'"'===e[t]||"'"===e[0]&&"'"===e[t])?e.slice(1,-1):e}(r)]=1),t&&(c-=1),n+(t?"."+r:"["+r+"]")},CallExpression:e=>{"Identifier"!==e.callee.type&&zC("Illegal callee type: "+e.callee.type);const t=e.callee.name,n=e.arguments,r=ND(i,t)&&i[t];return r||zC("Unrecognized function: "+t),bD(r)?r(n):r+"("+n.map(f).join(",")+")"},ArrayExpression:e=>"["+e.elements.map(f).join(",")+"]",BinaryExpression:e=>"("+f(e.left)+" "+e.operator+" "+f(e.right)+")",UnaryExpression:e=>"("+e.operator+f(e.argument)+")",ConditionalExpression:e=>"("+f(e.test)+"?"+f(e.consequent)+":"+f(e.alternate)+")",LogicalExpression:e=>"("+f(e.left)+e.operator+f(e.right)+")",ObjectExpression:e=>"{"+e.properties.map(f).join(",")+"}",Property:e=>{c+=1;const t=f(e.key);return c-=1,t+":"+f(e.value)}};function h(e){const t={code:f(e),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},t}return h.functions=i,h.constants=r,h}const PZ="intersect",LZ="union";function BZ(e,t){for(var n,r,i=t.fields,o=t.values,a=i.length,s=0;s<a;++s)if((r=i[s]).getter=PC.getter||PC(r.field),LD(n=r.getter(e))&&(n=ZC(n)),LD(o[s])&&(o[s]=ZC(o[s])),LD(o[s][0])&&(o[s]=o[s].map(ZC)),"E"===r.type){if(VC(o[s])?o[s].indexOf(n)<0:n!==o[s])return!1}else if("R"===r.type){if(!RD(n,o[s]))return!1}else if("R-RE"===r.type){if(!RD(n,o[s],!0,!1))return!1}else if("R-E"===r.type){if(!RD(n,o[s],!1,!1))return!1}else if("R-LE"===r.type&&!RD(n,o[s],!1,!0))return!1;return!0}const IZ=PC("_vgsid_"),jZ=function(e){let t=e,n=e;function r(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)<0?r=o+1:i=o}return r}return 1===e.length&&(t=(t,n)=>e(t)-n,n=function(e){return(t,n)=>{return(r=e(t))<(i=n)?-1:r>i?1:r>=i?0:NaN;var r,i}}(e)),{left:r,center:function(e,n,i,o){null==i&&(i=0),null==o&&(o=e.length);const a=r(e,n,i,o-1);return a>i&&t(e[a-1],n)>-t(e[a],n)?a-1:a},right:function(e,t,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){const o=r+i>>>1;n(e[o],t)>0?i=o:r=o+1}return r}}}(IZ),UZ=jZ.left,qZ=jZ.right;var WZ={E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter((e=>t.indexOf(e)>=0)):t},R_union:function(e,t){var n=ZC(t[0]),r=ZC(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ZC(t[0]),r=ZC(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};function HZ(e,t,n,r){t[0].type!==gK&&zC("First argument to selection functions must be a string literal.");const i=t[0].value,o="unit",a="@unit",s=":"+i;(t.length>=2&&KC(t).value)!==PZ||ND(r,a)||(r["@unit"]=n.getData(i).indataRef(n,o)),ND(r,s)||(r[s]=n.getData(i).tuplesRef())}function VZ(e){const t=this.context.data[e];return t?t.values.value:[]}const GZ=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},YZ=GZ("format"),XZ=GZ("timeFormat"),QZ=GZ("utcFormat"),JZ=GZ("timeParse"),KZ=GZ("utcParse"),ZZ=new Date(2e3,0,1);function e0(e,t,n){return Number.isInteger(e)&&Number.isInteger(t)?(ZZ.setYear(2e3),ZZ.setMonth(e),ZZ.setDate(t),XZ.call(this,ZZ,n)):""}function t0(e,t,n,r){t[0].type!==gK&&zC("First argument to data functions must be a string literal.");const i=t[0].value,o=":"+i;if(!ND(o,r))try{r[o]=n.getData(i).tuplesRef()}catch(e){}}function n0(e,t,n,r){if(t[0].type===gK)r0(n,r,t[0].value);else for(e in n.scales)r0(n,r,e)}function r0(e,t,n){const r="%"+n;if(!ND(t,r))try{t[r]=e.scaleRef(n)}catch(e){}}function i0(e,t){let n;return bD(e)?e:UD(e)?(n=t.scales[e])&&n.value:void 0}function o0(e,t,n){t.__bandwidth=e=>e&&e.bandwidth?e.bandwidth():0,n._bandwidth=n0,n._range=n0,n._scale=n0;const r=t=>"_["+(t.type===gK?QD("%"+t.value):QD("%")+"+"+e(t))+"]";return{_bandwidth:e=>"this.__bandwidth(".concat(r(e[0]),")"),_range:e=>"".concat(r(e[0]),".range()"),_scale:t=>"".concat(r(t[0]),"(").concat(e(t[1]),")")}}function a0(e,t){return function(n,r,i){if(n){const t=i0(n,(i||this).context);return t&&t.path[e](r)}return t(r)}}const s0=a0("area",(function(e){return eH=new qb,KW(e,tH),2*eH})),u0=a0("bounds",(function(e){var t,n,r,i,o,a,s;if(lH=uH=-(aH=sH=1/0),mH=[],KW(e,EH),n=mH.length){for(mH.sort(TH),t=1,o=[r=mH[0]];t<n;++t)$H(r,(i=mH[t])[0])||$H(r,i[1])?(OH(r[0],i[1])>OH(r[0],r[1])&&(r[1]=i[1]),OH(i[0],r[1])>OH(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,t=0,r=o[n=o.length-1];t<=n;r=i,++t)i=o[t],(s=OH(r[1],i[0]))>a&&(a=s,aH=i[0],uH=r[1])}return mH=gH=null,aH===1/0||sH===1/0?[[NaN,NaN],[NaN,NaN]]:[[aH,sH],[uH,lH]]})),l0=a0("centroid",(function(e){zH=RH=PH=LH=BH=IH=jH=UH=0,qH=new qb,WH=new qb,HH=new qb,KW(e,JH);var t=+qH,n=+WH,r=+HH,i=OW(t,n,r);return i<bW&&(t=IH,n=jH,r=UH,RH<vW&&(t=PH,n=LH,r=BH),(i=OW(t,n,r))<bW)?[NaN,NaN]:[DW(n,t)*EW,IW(r/i)*EW]}));function c0(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(t){e.warn(t)}return n[n.length-1]}function f0(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function d0(e){const t=Kg(e);return.2126*f0(t.r)+.7152*f0(t.g)+.0722*f0(t.b)}function h0(e,t){return e===t||e!=e&&t!=t||(VC(e)?!(!VC(t)||e.length!==t.length)&&function(e,t){for(let n=0,r=e.length;n<r;++n)if(!h0(e[n],t[n]))return!1;return!0}(e,t):!(!GC(e)||!GC(t))&&p0(e,t))}function p0(e,t){for(const n in e)if(!h0(e[n],t[n]))return!1;return!0}function m0(e){return t=>p0(e,t)}const g0={};function y0(e){return VC(e)||ArrayBuffer.isView(e)?e:null}function v0(e){return y0(e)||(UD(e)?e:null)}const b0=e=>e.data;function x0(e,t){const n=VZ.call(t,e);return n.root&&n.root.lookup||{}}const w0=()=>"undefined"!=typeof window&&window||null;const _0={random:function(){return aT()},cumulativeNormal:yT,cumulativeLogNormal:kT,cumulativeUniform:MT,densityNormal:gT,densityLogNormal:_T,densityUniform:DT,quantileNormal:vT,quantileLogNormal:ET,quantileUniform:FT,sampleNormal:mT,sampleLogNormal:wT,sampleUniform:CT,isArray:VC,isBoolean:PD,isDate:LD,isDefined:function(e){return void 0!==e},isNumber:ID,isObject:GC,isRegExp:jD,isString:UD,isTuple:mO,isValid:function(e){return null!=e&&e==e},toBoolean:JD,toDate:ZD,toNumber:ZC,toString:eM,indexof:function(e,...t){return v0(e).indexOf(...t)},join:function(e,...t){return y0(e).join(...t)},lastindexof:function(e,...t){return v0(e).lastIndexOf(...t)},replace:function(e,t,n){return bD(n)&&zC("Function argument passed to replace."),String(e).replace(t,n)},reverse:function(e){return y0(e).slice().reverse()},slice:function(e,...t){return v0(e).slice(...t)},flush:$D,lerp:WD,merge:function(){const e=[].slice.call(arguments);return e.unshift({}),CD(...e)},pad:YD,peek:KC,pluck:function(e,t){const n=g0[t]||(g0[t]=PC(t));return VC(e)?e.map(n):n(e)},span:XD,inrange:RD,truncate:nM,rgb:Kg,lab:gy,hcl:ky,hsl:oy,luminance:d0,contrast:function(e,t){const n=d0(e),r=d0(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)},sequence:Kb,format:YZ,utcFormat:QZ,utcParse:KZ,utcOffset:DN,utcSequence:NN,timeFormat:XZ,timeParse:JZ,timeOffset:CN,timeSequence:FN,timeUnitSpecifier:ZF,monthFormat:function(e){return e0.call(this,e,1,"%B")},monthAbbrevFormat:function(e){return e0.call(this,e,1,"%b")},dayFormat:function(e){return e0.call(this,0,2+e,"%A")},dayAbbrevFormat:function(e){return e0.call(this,0,2+e,"%a")},quarter:mD,utcquarter:gD,week:rN,utcweek:lN,dayofyear:nN,utcdayofyear:uN,warn:function(){return c0(this.context.dataflow,"warn",arguments)},info:function(){return c0(this.context.dataflow,"info",arguments)},debug:function(){return c0(this.context.dataflow,"debug",arguments)},extent:DD,inScope:function(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n},intersect:function(e,t,n){if(!e)return[];const[r,i]=e,o=(new JL).set(r[0],r[1],i[0],i[1]);return _U(n||this.context.dataflow.scenegraph().root,o,function(e){let t=null;if(e){const n=yD(e.marktype),r=yD(e.markname);t=e=>(!n.length||n.some((t=>e.marktype===t)))&&(!r.length||r.some((t=>e.name===t)))}return t}(t))},clampRange:vD,pinchDistance:function(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.sqrt(n*n+r*r)},pinchAngle:function(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)},screen:function(){const e=w0();return e?e.screen:{}},containerSize:function(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]},windowSize:function(){const e=w0();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]},bandspace:function(e,t,n){return BR(e||0,t||0,n||0)},setdata:function(e,t){const n=this.context.dataflow,r=this.context.data[e].input;return n.pulse(r,n.changeset().remove(UC).insert(t)),1},pathShape:function(e){let t=null;return function(n){return n?xL(n,t=t||lL(e)):e}},panLinear:aD,panLog:sD,panPow:uD,panSymlog:lD,zoomLinear:fD,zoomLog:dD,zoomPow:hD,zoomSymlog:pD,encode:function(e,t,n){if(e){const n=this.context.dataflow,r=e.mark.source;n.pulse(r,n.changeset().encode(e,t))}return void 0!==n?n:e},modify:function(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],u=s.input,l=a.stamp();let c,f,d=s.changes;if(!1===a._trigger||!(u.value.length||t||r))return 0;if((!d||d.stamp<l)&&(s.changes=d=a.changeset(),d.stamp=l,a.runAfter((()=>{s.modified=!0,a.pulse(u,d).run()}),!0,1)),n&&(c=!0===n?UC:VC(n)||mO(n)?n:m0(n),d.remove(c)),t&&d.insert(t),r&&(c=m0(r),u.value.some(c)?d.remove(c):d.insert(r)),i)for(f in o)d.modify(i,f,o[f]);return 1}},k0=["view","item","group","xy","x","y"],E0="this.",S0={},A0={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>"_[".concat(QD("$"+e),"]"),functions:function(e){const t=zZ(e);k0.forEach((e=>t[e]="event.vega."+e));for(const e in _0)t[e]=E0+e;return CD(t,o0(e,_0,S0)),t},constants:$Z,visitors:S0},C0=RZ(A0);function D0(e,t,n){return 1===arguments.length?_0[e]:(_0[e]=t,n&&(S0[e]=n),C0&&(C0.functions[e]=E0+e),this)}function M0(e,t){const n={};let r;try{r=TZ(e=UD(e)?e:QD(e)+"")}catch(t){zC("Expression parse error: "+e)}r.visit((e=>{if(e.type!==wK)return;const r=e.callee.name,i=A0.visitors[r];i&&i(r,e.arguments,t,n)}));const i=C0(r);return i.globals.forEach((e=>{const r="$"+e;!ND(n,r)&&t.getSignal(e)&&(n[r]=t.signalRef(e))})),{$expr:CD({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}D0("bandwidth",(function(e,t){const n=i0(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}),n0),D0("copy",(function(e,t){const n=i0(e,(t||this).context);return n?n.copy():void 0}),n0),D0("domain",(function(e,t){const n=i0(e,(t||this).context);return n?n.domain():[]}),n0),D0("range",(function(e,t){const n=i0(e,(t||this).context);return n&&n.range?n.range():[]}),n0),D0("invert",(function(e,t,n){const r=i0(e,(n||this).context);return r?VC(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}),n0),D0("scale",(function(e,t,n){const r=i0(e,(n||this).context);return r?r(t):void 0}),n0),D0("gradient",(function(e,t,n,r,i){e=i0(e,(i||this).context);const o=iL(t,n);let a=e.domain(),s=a[0],u=KC(a),l=BC;return u-s?l=CP(e,s,u):e=(e.interpolator?pP("sequential")().interpolator(e.interpolator()):pP("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,u=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),u!==KC(a)&&a.push(u)),a.forEach((t=>o.stop(l(t),e(t)))),o}),n0),D0("geoArea",s0,n0),D0("geoBounds",u0,n0),D0("geoCentroid",l0,n0),D0("geoShape",(function(e,t,n){const r=i0(e,(n||this).context);return function(e){return r?r.path.context(e)(t):""}}),n0),D0("indata",(function(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i?i.count:i}),(function(e,t,n,r){t[0].type!==gK&&zC("First argument to indata must be a string literal."),t[1].type!==gK&&zC("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a="@"+o;ND(a,r)||(r[a]=n.getData(i).indataRef(n,o))})),D0("data",VZ,t0),D0("treePath",(function(e,t,n){const r=x0(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(b0):void 0}),t0),D0("treeAncestors",(function(e,t){const n=x0(e,this)[t];return n?n.ancestors().map(b0):void 0}),t0),D0("vlSelectionTest",(function(e,t,n){for(var r,i,o,a,s,u=this.context.data[e],l=u?u.values.value:[],c=u?u["index:unit"]&&u["index:unit"].value:void 0,f=n===PZ,d=l.length,h=0;h<d;++h)if(r=l[h],c&&f){if(-1===(o=(i=i||{})[a=r.unit]||0))continue;if(s=BZ(t,r),i[a]=s?-1:++o,s&&1===c.size)return!0;if(!s&&o===c.get(a).count)return!1}else if(f^(s=BZ(t,r)))return s;return d&&f}),HZ),D0("vlSelectionIdTest",(function(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r["index:unit"]&&r["index:unit"].value:void 0,a=n===PZ,s=IZ(t),u=UZ(i,s);if(u===i.length)return!1;if(IZ(i[u])!==s)return!1;if(o&&a){if(1===o.size)return!0;if(qZ(i,s)-u<o.size)return!1}return!0}),HZ),D0("vlSelectionResolve",(function(e,t,n,r){for(var i,o,a,s,u,l,c,f,d,h,p,m=this.context.data[e],g=m?m.values.value:[],y={},v={},b={},x=g.length,w=0;w<x;++w){for(s=(i=g[w]).unit,o=i.fields,a=i.values,h=0,p=o.length;h<p;++h)u=o[h],c=(l=y[u.field]||(y[u.field]={}))[s]||(l[s]=[]),b[u.field]=f=u.type.charAt(0),d=WZ[f+"_union"],l[s]=d(c,yD(a[h]));n&&(c=v[s]||(v[s]=[])).push(yD(a).reduce(((e,t,n)=>(e[o[n].field]=t,e)),{}))}if(t=t||LZ,Object.keys(y).forEach((e=>{y[e]=Object.keys(y[e]).map((t=>y[e][t])).reduce(((n,r)=>void 0===n?r:WZ[b[e]+"_"+t](n,r)))})),g=Object.keys(v),n&&g.length){y[r?"vlPoint":"vlMulti"]=t===LZ?{or:g.reduce(((e,t)=>(e.push(...v[t]),e)),[])}:{and:g.map((e=>({or:v[e]})))}}return y}),HZ),D0("vlSelectionTuples",(function(e,t){return e.map((e=>CD({values:t.fields.map((t=>(t.getter||(t.getter=PC(t.field)))(e.datum)))},t)))}));const F0=tM(["rule"]),N0=tM(["group","image","rect"]);function O0(e){return(e+"").toLowerCase()}function T0(e,t,n){";"!==n[n.length-1]&&(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}var $0={operator:(e,t)=>T0(e,["_"],t.code),parameter:(e,t)=>T0(e,["datum","_"],t.code),event:(e,t)=>T0(e,["event"],t.code),handler:(e,t)=>T0(e,["_","event"],"var datum=event.item&&event.item.datum;return ".concat(t.code,";")),encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const e in r){const t="o["+QD(e)+"]";i+="$=".concat(r[e].code,";if(").concat(t,"!==$)").concat(t,"=$,m=1;")}return i+=function(e,t){let n="";return F0[t]||(e.x2&&(e.x?(N0[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(N0[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}(r,n),i+="return m;",T0(e,["item","_"],i)},codegen:{get:function(e){const t="[".concat(e.map(QD).join("]["),"]"),n=Function("_","return _".concat(t,";"));return n.path=t,n},comparator:function(e,t){let n;const r=Function("a","b","var u, v; return "+e.map(((e,r)=>{const i=t[r];let o,a;return e.path?(o="a".concat(e.path),a="b".concat(e.path)):((n=n||{})["f"+r]=e,o="this.f".concat(r,"(a)"),a="this.f".concat(r,"(b)")),function(e,t,n,r){return"((u = ".concat(e,") < (v = ").concat(t,") || u == null) && v != null ? ").concat(n,"\n  : (u > v || v == null) && u != null ? ").concat(r,"\n  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ").concat(n,"\n  : v !== v && u === u ? ").concat(r," : ")}(o,a,-i,i)})).join("")+"0;");return n?r.bind(n):r}}};function z0(e,t,n){if(!e||!GC(e))return e;for(let r,i=0,o=R0.length;i<o;++i)if(r=R0[i],ND(e,r.key))return r.parse(e,t,n);return e}var R0=[{key:"$ref",parse:function(e,t){return t.get(e.$ref)||zC("Operator not defined: "+e.$ref)}},{key:"$key",parse:function(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=qD(e.$key,e.$flat,t.expr.codegen))}},{key:"$expr",parse:function(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code+"_"+e.$name;return t.fn[r]||(t.fn[r]=MC(t.parameterExpression(e.$expr),e.$fields,e.$name))}},{key:"$field",parse:function(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=PC(e.$field,e.$name,t.expr.codegen))}},{key:"$encode",parse:function(e,t){const n=e.$encode,r={};for(const e in n){const i=n[e];r[e]=MC(t.encodeExpression(i.$expr),i.$fields),r[e].output=i.$output}return r}},{key:"$compare",parse:function(e,t){const n="c:"+e.$compare+"_"+e.$order,r=yD(e.$compare).map((e=>e&&e.$tupleid?gO:e));return t.fn[n]||(t.fn[n]=xD(r,e.$order,t.expr.codegen))}},{key:"$context",parse:function(e,t){return t}},{key:"$subflow",parse:function(e,t){const n=e.$subflow;return function(e,r,i){const o=t.fork().parse(n),a=o.get(n.operators[0].id),s=o.signals.parent;return s&&s.set(i),a.detachSubflow=()=>t.detach(o),a}}},{key:"$tupleid",parse:function(){return gO}}];const P0={skip:!0};function L0(e,t,n,r){return new B0(e,t,n,r)}function B0(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||$0,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function I0(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}function j0(e,t){e&&(null==t?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}B0.prototype=I0.prototype={fork:function(){const e=new I0(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach:function(e){this.subcontext=this.subcontext.filter((t=>t!==e));const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get:function(e){return this.nodes[e]},set:function(e,t){return this.nodes[e]=t},add:function(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),"collect"===O0(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let i=n.get(e.parent.$ref);i?(r.connect(i,[t]),t.targets().add(i)):(n.unresolved=n.unresolved||[]).push((()=>{i=n.get(e.parent.$ref),r.connect(i,[t]),t.targets().add(i)}))}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const r in e.data){const i=n.data[r]||(n.data[r]={});e.data[r].forEach((e=>i[e]=t))}},resolve:function(){return(this.unresolved||[]).forEach((e=>e())),delete this.unresolved,this},operator:function(e,t){this.add(e,this.dataflow.add(e.value,t))},transform:function(e,t){this.add(e,this.dataflow.add(this.transforms[O0(t)]))},stream:function(e,t){this.set(e.id,t)},update:function(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression:function(e){return this.expr.operator(this,e)},parameterExpression:function(e){return this.expr.parameter(this,e)},eventExpression:function(e){return this.expr.event(this,e)},handlerExpression:function(e){return this.expr.handler(this,e)},encodeExpression:function(e){return this.expr.encode(this,e)},parse:function(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach((e=>t.parseOperator(e))),n.forEach((e=>t.parseOperatorParameters(e))),(e.streams||[]).forEach((e=>t.parseStream(e))),(e.updates||[]).forEach((e=>t.parseUpdate(e))),t.resolve()},parseOperator:function(e){const t=this;"operator"!==O0(e.type)&&e.type?t.transform(e,e.type):t.operator(e,e.update?t.operatorExpression(e.update):null)},parseOperatorParameters:function(e){const t=this;if(e.params){const n=t.get(e.id);n||zC("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}},parseParameters:function(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=VC(i)?i.map((e=>z0(e,n,t))):z0(i,n,t)}return t},parseStream:function(e){var t,n=this,r=null!=e.filter?n.eventExpression(e.filter):void 0,i=null!=e.stream?n.get(e.stream):void 0;e.source?i=n.events(e.source,e.type,r):e.merge&&(i=(t=e.merge.map((e=>n.get(e))))[0].merge.apply(t[0],t.slice(1))),e.between&&(t=e.between.map((e=>n.get(e))),i=i.between(t[0],t[1])),e.filter&&(i=i.filter(r)),null!=e.throttle&&(i=i.throttle(+e.throttle)),null!=e.debounce&&(i=i.debounce(+e.debounce)),null==i&&zC("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),n.stream(e,i)},parseUpdate:function(e){var t,n=this,r=GC(r=e.source)?r.$ref:r,i=n.get(r),o=e.update,a=void 0;i||zC("Source not defined: "+e.source),t=e.target&&e.target.$expr?n.eventExpression(e.target.$expr):n.get(e.target),o&&o.$expr&&(o.$params&&(a=n.parseParameters(o.$params)),o=n.handlerExpression(o.$expr)),n.update(e,i,t,o,a)},getState:function(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach((n=>{const i=t.signals[n];e.signals(n,i)&&(r[n]=i.value)}))}if(e.data){var i=n.data={};Object.keys(t.data).forEach((n=>{const r=t.data[n];e.data(n,r)&&(i[n]=r.input.value)}))}return t.subcontext&&!1!==e.recurse&&(n.subcontext=t.subcontext.map((t=>t.getState(e)))),n},setState:function(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach((e=>{n.update(t.signals[e],i[e],P0)})),Object.keys(r||{}).forEach((e=>{n.pulse(t.data[e].input,n.changeset().remove(UC).insert(r[e]))})),(e.subcontext||[]).forEach(((e,n)=>{const r=t.subcontext[n];r&&r.setState(e)}))}};const U0="default";function q0(e,t){const n=e.globalCursor()?"undefined"!=typeof document&&document.body:e.container();if(n)return null==t?n.style.removeProperty("cursor"):n.style.cursor=t}function W0(e,t){var n=e._runtime.data;return ND(n,t)||zC("Unrecognized data set: "+t),n[t]}function H0(e,t){kO(t)||zC("Second argument to changes must be a changeset.");const n=W0(this,e);return n.modified=!0,this.pulse(n.input,t)}function V0(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function G0(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Y0(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function X0(e,t,n){var r,i,o=e._renderer,a=o&&o.canvas();return a&&(i=Y0(e),(r=aj(t.changedTouches?t.changedTouches[0]:t,a))[0]-=i[0],r[1]-=i[1]),t.dataflow=e,t.item=n,t.vega=function(e,t,n){const r=t?"group"===t.mark.marktype?t:t.mark.group:null;function i(e){var n,i=r;if(e)for(n=t;n;n=n.mark.group)if(n.mark.name===e){i=n;break}return i&&i.mark&&i.mark.interactive?i:{}}function o(e){if(!e)return n;UD(e)&&(e=i(e));const t=n.slice();for(;e;)t[0]-=e.x||0,t[1]-=e.y||0,e=e.mark&&e.mark.group;return t}return{view:SD(e),item:SD(t||{}),group:i,xy:o,x:e=>o(e)[0],y:e=>o(e)[1]}}(e,n,r),t}const Q0="view",J0={trap:!1};function K0(e,t,n,r){e._eventListeners.push({type:n,sources:yD(t),handler:r})}function Z0(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return!(!1===r||GC(r)&&!r[n])||(e.warn(`Blocked ${t} ${n} event listener.`),!1)}function e1(e){return e.item}function t1(e){return e.item.mark.source}function n1(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function r1(e,t,n){const r=document.createElement(e);for(const e in t)r.setAttribute(e,t[e]);return null!=n&&(r.textContent=n),r}function i1(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),K0(r,t,i,o),e.set=e=>{t.value=e,t.dispatchEvent(function(e){return"undefined"!=typeof Event?new Event(e):{type:e}}(i))}}function o1(e,t,n,r){const i=r.signal(n.signal),o=r1("div",{class:"vega-bind"}),a="radio"===n.input?o:o.appendChild(r1("label"));a.appendChild(r1("span",{class:"vega-bind-name"},n.name||n.signal)),t.appendChild(o);let s=a1;switch(n.input){case"checkbox":s=s1;break;case"select":s=u1;break;case"radio":s=l1;break;case"range":s=c1}s(e,a,n,i)}function a1(e,t,n,r){const i=r1("input");for(const e in n)"signal"!==e&&"element"!==e&&i.setAttribute("input"===e?"type":e,n[e]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",(()=>e.update(i.value))),e.elements=[i],e.set=e=>i.value=e}function s1(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=r1("input",i);t.appendChild(o),o.addEventListener("change",(()=>e.update(o.checked))),e.elements=[o],e.set=e=>o.checked=!!e||null}function u1(e,t,n,r){const i=r1("select",{name:n.signal}),o=n.labels||[];n.options.forEach(((e,t)=>{const n={value:e};f1(e,r)&&(n.selected=!0),i.appendChild(r1("option",n,(o[t]||e)+""))})),t.appendChild(i),i.addEventListener("change",(()=>{e.update(n.options[i.selectedIndex])})),e.elements=[i],e.set=e=>{for(let t=0,r=n.options.length;t<r;++t)if(f1(n.options[t],e))return void(i.selectedIndex=t)}}function l1(e,t,n,r){const i=r1("span",{class:"vega-bind-radio"}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map(((t,a)=>{const s={type:"radio",name:n.signal,value:t};f1(t,r)&&(s.checked=!0);const u=r1("input",s);u.addEventListener("change",(()=>e.update(t)));const l=r1("label",{},(o[a]||t)+"");return l.prepend(u),i.appendChild(l),u})),e.set=t=>{const n=e.elements,r=n.length;for(let e=0;e<r;++e)f1(n[e].value,t)&&(n[e].checked=!0)}}function c1(e,t,n,r){r=void 0!==r?r:(+n.max+ +n.min)/2;const i=null!=n.max?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||ox(o,i,100),s=r1("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const u=r1("span",{},+r);t.appendChild(s),t.appendChild(u);const l=()=>{u.textContent=s.value,e.update(+s.value)};s.addEventListener("input",l),s.addEventListener("change",l),e.elements=[s],e.set=e=>{s.value=e,u.textContent=e}}function f1(e,t){return e===t||e+""==t+""}function d1(e,t,n,r,i,o){return(t=t||new r(e.loader())).initialize(n,V0(e),G0(e),Y0(e),i,o).background(e.background())}function h1(e,t){return t?function(){try{t.apply(this,arguments)}catch(t){e.error(t)}}:null}function p1(e,t,n){if("string"==typeof t){if("undefined"==typeof document)return e.error("DOM document instance not found."),null;if(!(t=document.querySelector(t)))return e.error("Signal bind element not found: "+t),null}if(t&&n)try{t.innerHTML=""}catch(n){t=null,e.error(n)}return t}const m1=e=>+e||0;function g1(e){return GC(e)?{top:m1(e.top),bottom:m1(e.bottom),left:m1(e.left),right:m1(e.right)}:(e=>({top:e,bottom:e,left:e,right:e}))(m1(e))}async function y1(e,t,n,r){const i=wU(t),o=i&&i.headless;return o||zC("Unrecognized renderer type: "+t),await e.runAsync(),d1(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}var v1="width",b1="height",x1="padding",w1={skip:!0};function _1(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===x1?r.left+r.right:0)}function k1(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===x1?r.top+r.bottom:0)}function E1(e,t){return t.modified&&VC(t.input.value)&&e.indexOf("_:vega:_")}function S1(e,t){return!("parent"===e||t instanceof QO.proxy)}function A1(e,t,n,r){const i=e.element();i&&i.setAttribute("title",function(e){return null==e?"":VC(e)?C1(e):GC(e)&&!LD(e)?(t=e,Object.keys(t).map((e=>{const n=t[e];return e+": "+(VC(n)?C1(n):D1(n))})).join("\n")):e+"";var t}(r))}function C1(e){return"["+e.map(D1).join(", ")+"]"}function D1(e){return VC(e)?"[…]":GC(e)&&!LD(e)?"{…}":e}function M1(e,t){const n=this;if(t=t||{},GO.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),null!=t.logLevel&&n.logLevel(t.logLevel),t.locale||e.locale){const r=CD({},e.locale,t.locale);n.locale(aO(r.number,r.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||bU.Canvas,n._scenegraph=new ZI;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||A1,n._redraw=!0,n._handler=(new Sj).scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=function(e){const t=CD({defaults:{}},e),n=(e,t)=>{t.forEach((t=>{VC(e[t])&&(e[t]=tM(e[t]))}))};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=function(e,t,n){return L0(e,QO,_0,n).parse(t)}(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map((e=>({state:null,param:CD({},e)}))),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=_1(n,n._width),n._viewHeight=k1(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,function(e){var t=e._signals,n=t.width,r=t.height,i=t.padding;function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,(t=>{e._width=t.size,e._viewWidth=_1(e,t.size),o()}),{size:n}),e._resizeHeight=e.add(null,(t=>{e._height=t.size,e._viewHeight=k1(e,t.size),o()}),{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}(n),function(e){e.add(null,(t=>(e._background=t.bg,e._resize=1,t.bg)),{bg:e._signals.background})}(n),function(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:U0,item:null}));e.on(e.events("view","mousemove"),t,((e,n)=>{const r=t.value,i=r?UD(r)?r:r.user:U0,o=n.item&&n.item.cursor||null;return r&&i===r.user&&o==r.item?r:{user:i,item:o}})),e.add(null,(function(t){let n=t.cursor,r=this.value;return UD(n)||(r=n.item,n=n.user),q0(e,n&&n!==U0?n:r||n),r}),{cursor:t})}(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind)}function F1(e,t){return ND(e._signals,t)?e._signals[t]:zC("Unrecognized signal name: "+QD(t))}function N1(e,t){const n=(e._targets||[]).filter((e=>e._update&&e._update.handler===t));return n.length?n[0]:null}function O1(e,t,n,r){let i=N1(n,r);return i||(i=h1(e,(()=>r(t,n.value))),i.handler=r,e.on(n,null,i)),e}function T1(e,t,n){const r=N1(t,n);return r&&t._targets.remove(r),e}zD(M1,GO,{evaluate:async function(e,t,n){if(await GO.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,i=Y0(r=this),o=V0(r),a=G0(r),r._renderer.background(r.background()),r._renderer.resize(o,a,i),r._handler.origin(i),r._resizeListeners.forEach((e=>{try{e(o,a)}catch(e){r.error(e)}}))),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(e){this.error(e)}var r,i,o,a;return n&&dO(this,n),this},dirty:function(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description:function(e){if(arguments.length){const t=null!=e?e+"":null;return t!==this._desc&&j0(this._el,this._desc=t),this}return this._desc},container:function(){return this._el},scenegraph:function(){return this._scenegraph},origin:function(){return this._origin.slice()},signal:function(e,t,n){const r=F1(this,e);return 1===arguments.length?r.value:this.update(r,t,n)},width:function(e){return arguments.length?this.signal("width",e):this.signal("width")},height:function(e){return arguments.length?this.signal("height",e):this.signal("height")},padding:function(e){return arguments.length?this.signal("padding",g1(e)):g1(this.signal("padding"))},autosize:function(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background:function(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer:function(e){return arguments.length?(wU(e)||zC("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip:function(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader:function(e){return arguments.length?(e!==this._loader&&(GO.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize:function(){return this._autosize=1,this.touch(F1(this,"autosize"))},_resetRenderer:function(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(e,t,n,r,i,o){this.runAfter((a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(v1,n,w1),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(b1,r,w1),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),a._origin[0]===i[0]&&a._origin[1]===i[1]||(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter((e=>e.resize()))}),!1,1)},addEventListener:function(e,t,n){let r=t;return n&&!1===n.trap||(r=h1(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener:function(e,t){for(var n,r,i=this._handler.handlers(e),o=i.length;--o>=0;)if(r=i[o].type,n=i[o].handler,e===r&&(t===n||t===n.raw)){this._handler.off(r,n);break}return this},addResizeListener:function(e){const t=this._resizeListeners;return t.indexOf(e)<0&&t.push(e),this},removeResizeListener:function(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener:function(e,t){return O1(this,e,F1(this,e),t)},removeSignalListener:function(e,t){return T1(this,F1(this,e),t)},addDataListener:function(e,t){return O1(this,e,W0(this,e).values,t)},removeDataListener:function(e,t){return T1(this,W0(this,e).values,t)},globalCursor:function(e){if(arguments.length){if(this._globalCursor!==!!e){const t=q0(this,null);this._globalCursor=!!e,t&&q0(this,t)}return this}return this._globalCursor},preventDefault:function(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:function(e,t){this._timers.push(function(e,t,n){var r=new Uv,i=t;return null==t?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(e,t,n){t=+t,n=null==n?Iv():+n,r._restart((function o(a){a+=i,r._restart(o,i+=t,n),e(a)}),t,n)},r.restart(e,t,n),r)}((function(t){e({timestamp:Date.now(),elapsed:t})}),t))},events:function(e,t,n){var r,i=this,o=new OO(n),a=function(n,r){i.runAsync(null,(()=>{e===Q0&&function(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return!1!==r&&!0!==i&&(!0===r||!1===i||(r?r[t]:i?!i[t]:e.preventDefault()))}(i,t)&&n.preventDefault(),o.receive(X0(i,n,r))}))};if("timer"===e)Z0(i,"timer",t)&&i.timer(a,t);else if(e===Q0)Z0(i,"view",t)&&i.addEventListener(t,a,J0);else if("window"===e?Z0(i,"window",t)&&"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&Z0(i,"selector",t)&&(r=document.querySelectorAll(e)),r){for(var s=0,u=r.length;s<u;++s)r[s].addEventListener(t,a);K0(i,r,t,a)}else i.warn("Can not resolve event source: "+e);return o},finalize:function(){var e,t,n,r=this._tooltip,i=this._timers,o=this._eventListeners;for(e=i.length;--e>=0;)i[e].stop();for(e=o.length;--e>=0;)for(t=(n=o[e]).sources.length;--t>=0;)n.sources[t].removeEventListener(n.type,n.handler);return r&&r.call(this,this._handler,null,null,null),this},hover:function(e,t){return t=[t||"update",(e=[e||"hover"])[0]],this.on(this.events("view","mouseover",e1),t1,n1(e)),this.on(this.events("view","mouseout",e1),t1,n1(t)),this},data:function(e,t){return arguments.length<2?W0(this,e).values.value:H0.call(this,e,EO().remove(UC).insert(t))},change:H0,insert:function(e,t){return H0.call(this,e,EO().insert(t))},remove:function(e,t){return H0.call(this,e,EO().remove(t))},scale:function(e){var t=this._runtime.scales;return ND(t,e)||zC("Unrecognized scale or projection: "+e),t[e].value},initialize:function(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=wU(r);e=n._el=e?p1(n,e,!0):null,function(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),j0(t,e.description()))}(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||Sj,s=e?o.renderer:o.headless;return n._renderer=s?d1(n,n._renderer,e,s):null,n._handler=function(e,t,n,r){const i=new r(e.loader(),h1(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Y0(e),e);return t&&t.handlers().forEach((e=>{i.on(e.type,e.handler)})),i}(n,n._handler,e,a),n._redraw=!0,e&&"none"!==i&&(t=t?n._elBind=p1(n,t,!0):e.appendChild(r1("form",{class:"vega-bindings"})),n._bind.forEach((e=>{e.param.element&&"container"!==i&&(e.element=p1(n,e.param.element,!!e.param.input))})),n._bind.forEach((e=>{!function(e,t,n){if(!t)return;const r=n.param;let i=n.state;i||(i=n.state={elements:null,active:!1,set:null,update:t=>{t!=e.signal(r.signal)&&e.runAsync(null,(()=>{i.source=!0,e.signal(r.signal,t)}))}},r.debounce&&(i.update=AD(r.debounce,i.update))),(null==r.input&&r.element?i1:o1)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,(()=>{i.source?i.source=!1:i.set(e.signal(r.signal))})),i.active=!0)}(n,e.element||t,e)}))),n},toImageURL:async function(e,t){e!==bU.Canvas&&e!==bU.SVG&&e!==bU.PNG&&zC("Unrecognized image type: "+e);const n=await y1(this,e,t);return e===bU.SVG?function(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")},toCanvas:async function(e,t){return(await y1(this,bU.Canvas,e,t)).canvas()},toSVG:async function(e){return(await y1(this,bU.SVG,e)).svg()},getState:function(e){return this._runtime.getState(e||{data:E1,signals:S1,recurse:!0})},setState:function(e){return this.runAsync(null,(t=>{t._trigger=!1,t._runtime.setState(e)}),(e=>{e._trigger=!0})),this}});const $1="[",z1="]",R1=/[[\]{}]/,P1={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let L1,B1;function I1(e,t,n){return L1=t||"view",B1=n||P1,U1(e.trim()).map(q1)}function j1(e,t,n,r,i){const o=e.length;let a,s=0;for(;t<o;++t){if(a=e[t],!s&&a===n)return t;i&&i.indexOf(a)>=0?--s:r&&r.indexOf(a)>=0&&++s}return t}function U1(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=j1(e,i,",","[{","]}"),t.push(e.substring(r,i).trim()),r=++i;if(0===t.length)throw"Empty event selector: "+e;return t}function q1(e){return"["===e[0]?function(e){const t=e.length;let n,r=1;if(r=j1(e,r,z1,$1,z1),r===t)throw"Empty between selector: "+e;if(n=U1(e.substring(1,r)),2!==n.length)throw"Between selector must have two elements: "+e;if(">"!==(e=e.slice(r+1).trim())[0])throw"Expected '>' after between selector: "+e;n=n.map(q1);const i=q1(e.slice(1).trim());if(i.between)return{between:n,stream:i};i.between=n;return i}(e):function(e){const t={source:L1},n=[];let r,i,o=[0,0],a=0,s=0,u=e.length,l=0;if("}"===e[u-1]){if(l=e.lastIndexOf("{"),!(l>=0))throw"Unmatched right brace: "+e;try{o=function(e){const t=e.split(",");if(!e.length||t.length>2)throw e;return t.map((t=>{const n=+t;if(n!=n)throw e;return n}))}(e.substring(l+1,u-1))}catch(t){throw"Invalid throttle specification: "+e}u=(e=e.slice(0,l).trim()).length,l=0}if(!u)throw e;"@"===e[0]&&(a=++l);r=j1(e,l,":"),r<u&&(n.push(e.substring(s,r).trim()),s=l=++r);if(l=j1(e,l,$1),l===u)n.push(e.substring(s,u).trim());else if(n.push(e.substring(s,l).trim()),i=[],s=++l,s===u)throw"Unmatched left bracket: "+e;for(;l<u;){if(l=j1(e,l,z1),l===u)throw"Unmatched left bracket: "+e;if(i.push(e.substring(s,l).trim()),l<u-1&&e[++l]!==$1)throw"Expected left bracket: "+e;s=++l}if(!(u=n.length)||R1.test(n[u-1]))throw"Invalid event selector: "+e;u>1?(t.type=n[1],a?t.markname=n[0].slice(1):(c=n[0],B1[c]?t.marktype=n[0]:t.source=n[0])):t.type=n[0];var c;"!"===t.type.slice(-1)&&(t.consume=!0,t.type=t.type.slice(0,-1));null!=i&&(t.filter=i);o[0]&&(t.throttle=o[0]);o[1]&&(t.debounce=o[1]);return t}(e)}function W1(e){return GC(e)?e:{type:e||"pad"}}const H1=e=>+e||0;function V1(e){return GC(e)?e.signal?e:{top:H1(e.top),bottom:H1(e.bottom),left:H1(e.left),right:H1(e.right)}:{top:t=H1(e),bottom:t,left:t,right:t};var t}const G1=e=>GC(e)&&!VC(e)?CD({},e):{value:e};function Y1(e,t,n,r){if(null!=n){return GC(n)&&!VC(n)||VC(n)&&n.length&&GC(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1}return 0}function X1(e,t,n){for(const n in t)Y1(e,n,t[n]);for(const t in n)Y1(e,t,n[t],"update")}function Q1(e,t,n){for(const r in t)n&&ND(n,r)||(e[r]=CD(e[r]||{},t[r]));return e}function J1(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const K1="mark",Z1="frame",e2="scope",t2="legend-label",n2="title-text",r2="title-subtitle";function i2(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const o2=e=>UD(e)?QD(e):e.signal?"(".concat(e.signal,")"):l2(e);function a2(e){if(null!=e.gradient)return function(e){const t=[e.start,e.stop,e.count].map((e=>null==e?null:QD(e)));for(;t.length&&null==KC(t);)t.pop();return t.unshift(o2(e.gradient)),"gradient(".concat(t.join(","),")")}(e);let t=e.signal?"(".concat(e.signal,")"):e.color?function(e){return e.c?s2("hcl",e.h,e.c,e.l):e.h||e.s?s2("hsl",e.h,e.s,e.l):e.l||e.a?s2("lab",e.l,e.a,e.b):e.r||e.g||e.b?s2("rgb",e.r,e.g,e.b):null}(e.color):null!=e.field?l2(e.field):void 0!==e.value?QD(e.value):void 0;return null!=e.scale&&(t=function(e,t){const n=o2(e.scale);null!=e.range?t="lerp(_range(".concat(n,"), ").concat(+e.range,")"):(void 0!==t&&(t="_scale(".concat(n,", ").concat(t,")")),e.band&&(t=(t?t+"+":"")+"_bandwidth(".concat(n,")")+(1==+e.band?"":"*"+u2(e.band)),e.extra&&(t="(datum.extra ? _scale(".concat(n,", datum.extra.value) : ").concat(t,")"))),null==t&&(t="0"));return t}(e,t)),void 0===t&&(t=null),null!=e.exponent&&(t="pow(".concat(t,",").concat(u2(e.exponent),")")),null!=e.mult&&(t+="*".concat(u2(e.mult))),null!=e.offset&&(t+="+".concat(u2(e.offset))),e.round&&(t="round(".concat(t,")")),t}const s2=(e,t,n,r)=>"(".concat(e,"(").concat([t,n,r].map(a2).join(","),")+'')");function u2(e){return GC(e)?"("+a2(e)+")":e}function l2(e){return c2(GC(e)?e:{datum:e})}function c2(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):zC("Invalid field reference: "+QD(e));return e.signal||(r=UD(r)?RC(r).map(QD).join("]["):c2(r)),t+"["+r+"]"}function f2(e,t,n,r,i,o){const a={};(o=o||{}).encoders={$encode:a},e=function(e,t,n,r,i){const o={},a={};let s,u,l,c;for(u in u="lineBreak","text"!==t||null==i[u]||J1(u,e)||i2(o,u,i[u]),("legend"==n||String(n).startsWith("axis"))&&(n=null),c=n===Z1?i.group:n===K1?CD({},i.mark,i[t]):null,c)l=J1(u,e)||("fill"===u||"stroke"===u)&&(J1("fill",e)||J1("stroke",e)),l||i2(o,u,c[u]);for(u in yD(r).forEach((t=>{const n=i.style&&i.style[t];for(const t in n)J1(t,e)||i2(o,t,n[t])})),e=CD({},e),o)c=o[u],c.signal?(s=s||{})[u]=c:a[u]=c;return e.enter=CD(a,e.enter),s&&(e.update=CD(s,e.update)),e}(e,t,n,r,i.config);for(const n in e)a[n]=d2(e[n],t,o,i);return o}function d2(e,t,n,r){const i={},o={};for(const t in e)null!=e[t]&&(i[t]=h2((a=e[t],VC(a)?function(e){let t="";return e.forEach((e=>{const n=a2(e);t+=e.test?"(".concat(e.test,")?").concat(n,":"):n})),":"===KC(t)&&(t+="null"),t}(a):a2(a)),r,n,o));var a;return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function h2(e,t,n,r){const i=M0(e,t);return i.$fields.forEach((e=>r[e]=1)),CD(n,i.$params),i.$expr}const p2=["value","update","init","react","bind"];function m2(e,t){zC(e+' for "outer" push: '+QD(t))}function g2(e,t){const n=e.name;if("outer"===e.push)t.signals[n]||m2("No prior signal definition",n),p2.forEach((t=>{void 0!==e[t]&&m2("Invalid property ",t)}));else{const r=t.addSignal(n,e.value);!1===e.react&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function y2(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function v2(e,t,n,r){return new y2(e,t,n,r)}function b2(e,t){return v2("operator",e,t)}function x2(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function w2(e,t){return t?{$field:e,$name:t}:{$field:e}}const _2=w2("key");function k2(e,t){return{$compare:e,$order:t}}function E2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const S2="scope",A2="view";function C2(e){return e&&e.signal}function D2(e){if(C2(e))return!0;if(GC(e))for(const t in e)if(D2(e[t]))return!0;return!1}function M2(e,t){return null!=e?e:t}function F2(e){return e&&e.signal||e}const N2="timer";function O2(e,t){return(e.merge?T2:e.stream?$2:e.type?z2:zC("Invalid stream specification: "+QD(e)))(e,t)}function T2(e,t){const n=R2({merge:e.merge.map((e=>O2(e,t)))},e,t);return t.addStream(n).id}function $2(e,t){const n=R2({stream:O2(e.stream,t)},e,t);return t.addStream(n).id}function z2(e,t){let n;var r;e.type===N2?(n=t.event(N2,e.throttle),e={between:e.between,filter:e.filter}):n=t.event((r=e.source)===S2?A2:r||A2,e.type);const i=R2({stream:n},e,t);return 1===Object.keys(i).length?n:t.addStream(i).id}function R2(e,t,n){let r=t.between;return r&&(2!==r.length&&zC('Stream "between" parameter must have 2 entries: '+QD(t)),e.between=[O2(r[0],n),O2(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(function(e,t,n){const r="event.item";return r+(e&&"*"!==e?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}(t.marktype,t.markname,t.markrole)),t.source===S2&&r.push("inScope(event.item)"),r.length&&(e.filter=M0("("+r.join(")&&(")+")",n).$expr),null!=(r=t.throttle)&&(e.throttle=+r),null!=(r=t.debounce)&&(e.debounce=+r),t.consume&&(e.consume=!0),e}const P2={code:"_.$value",ast:{type:"Identifier",value:"value"}};function L2(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||zC("Signal update missing events specification."),UD(o)&&(o=I1(o,t.isSubscope()?S2:A2)),o=yD(o).filter((e=>e.signal||e.scale?(s.push(e),0):1)),s.length>1&&(s=[B2(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),null!=r&&(a&&zC("Signal encode and update are mutually exclusive."),a="encode(item(),"+QD(r)+")"),i.update=UD(a)?M0(a,t):null!=a.expr?M0(a.expr,t):null!=a.value?a.value:null!=a.signal?{$expr:P2,$params:{$value:t.signalRef(a.signal)}}:zC("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach((e=>t.addUpdate(CD(function(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):O2(e,t)}}(e,t),i))))}function B2(e){return{signal:"["+e.map((e=>e.scale?'scale("'+e.scale+'")':e.signal))+"]"}}const I2=e=>(t,n,r)=>v2(e,n,t||void 0,r),j2=I2("aggregate"),U2=I2("axisticks"),q2=I2("bound"),W2=I2("collect"),H2=I2("compare"),V2=I2("datajoin"),G2=I2("encode"),Y2=I2("expression"),X2=I2("facet"),Q2=I2("field"),J2=I2("key"),K2=I2("legendentries"),Z2=I2("load"),e3=I2("mark"),t3=I2("multiextent"),n3=I2("multivalues"),r3=I2("overlap"),i3=I2("params"),o3=I2("prefacet"),a3=I2("projection"),s3=I2("proxy"),u3=I2("relay"),l3=I2("render"),c3=I2("scale"),f3=I2("sieve"),d3=I2("sortitems"),h3=I2("viewlayout"),p3=I2("values");let m3=0;const g3={min:"min",max:"max",count:"sum"};function y3(e,t){const n=t.getScale(e.name).params;let r;var i;for(r in n.domain=w3(e.domain,e,t),null!=e.range&&(n.range=M3(e,t,n)),null!=e.interpolate&&function(e,t){t.interpolate=v3(e.type||e),null!=e.gamma&&(t.interpolateGamma=v3(e.gamma))}(e.interpolate,n),null!=e.nice&&(n.nice=GC(i=e.nice)?{interval:v3(i.interval),step:v3(i.step)}:v3(i)),null!=e.bins&&(n.bins=function(e,t){return e.signal||VC(e)?b3(e,t):t.objectProperty(e)}(e.bins,t)),e)ND(n,r)||"name"===r||(n[r]=v3(e[r],t))}function v3(e,t){return GC(e)?e.signal?t.signalRef(e.signal):zC("Unsupported object: "+QD(e)):e}function b3(e,t){return e.signal?t.signalRef(e.signal):e.map((e=>v3(e,t)))}function x3(e){zC("Can not find data set: "+QD(e))}function w3(e,t,n){if(e)return e.signal?n.signalRef(e.signal):(VC(e)?_3:e.fields?E3:k3)(e,t,n);null==t.domainMin&&null==t.domainMax||zC("No scale domain defined for domainMin/domainMax to override.")}function _3(e,t,n){return e.map((e=>v3(e,n)))}function k3(e,t,n){const r=n.getData(e.data);return r||x3(e.data),vP(t.type)?r.valuesRef(n,e.field,A3(e.sort,!1)):_P(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function E3(e,t,n){const r=e.data,i=e.fields.reduce(((e,t)=>(t=UD(t)?{data:r,field:t}:VC(t)||t.signal?function(e,t){const n="_:vega:_"+m3++,r=W2({});if(VC(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+QD(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,f3({})]),{data:n,field:"data"}}(t,n):t,e.push(t),e)),[]);return(vP(t.type)?S3:_P(t.type)?C3:D3)(e,n,i)}function S3(e,t,n){const r=A3(e.sort,!0);let i,o;const a=n.map((e=>{const n=t.getData(e.data);return n||x3(e.data),n.countsRef(t,e.field,r)})),s={groupby:_2,pulse:a};r&&(i=r.op||"count",o=r.field?E2(i,r.field):"count",s.ops=[g3[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(j2(s));const u=t.add(W2({pulse:x2(i)}));return o=t.add(p3({field:_2,sort:t.sortRef(r),pulse:x2(u)})),x2(o)}function A3(e,t){return e&&(e.field||e.op?e.field||"count"===e.op?t&&e.field&&e.op&&!g3[e.op]&&zC("Multiple domain scales can not be sorted using "+e.op):zC("No field provided for sort aggregate op: "+e.op):GC(e)?e.field="key":e={field:"key"}),e}function C3(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||x3(e.data),n.domainRef(t,e.field)}));return x2(t.add(n3({values:r})))}function D3(e,t,n){const r=n.map((e=>{const n=t.getData(e.data);return n||x3(e.data),n.extentRef(t,e.field)}));return x2(t.add(t3({extents:r})))}function M3(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(UD(i)){if(r&&ND(r,i))return M3(e=CD({},e,{range:r[i]}),t,n);"width"===i?i=[0,{signal:"width"}]:"height"===i?i=vP(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:zC("Unrecognized scale range value: "+QD(i))}else{if(i.scheme)return n.scheme=VC(i.scheme)?b3(i.scheme,t):v3(i.scheme,t),i.extent&&(n.schemeExtent=b3(i.extent,t)),void(i.count&&(n.schemeCount=v3(i.count,t)));if(i.step)return void(n.rangeStep=v3(i.step,t));if(vP(e.type)&&!VC(i))return w3(i,e,t);VC(i)||zC("Unsupported range type: "+QD(i))}return i.map((e=>(VC(e)?b3:v3)(e,t)))}function F3(e,t,n){return VC(e)?e.map((e=>F3(e,t,n))):GC(e)?e.signal?n.signalRef(e.signal):"fit"===t?e:zC("Unsupported parameter object: "+QD(e)):e}const N3="top",O3="left",T3="right",$3="bottom",z3="center",R3="index",P3="label",L3="perc",B3="value",I3="guide-label",j3="guide-title",U3="group-title",q3="group-subtitle",W3="symbol",H3="gradient",V3="discrete",G3="size",Y3=[G3,"shape","fill","stroke","strokeWidth","strokeDash","opacity"],X3={name:1,style:1,interactive:1},Q3={value:0},J3={value:1},K3="group",Z3="rect",e5="rule",t5="text";function n5(e){return e.type=K3,e.interactive=e.interactive||!1,e}function r5(e,t){const n=(n,r)=>M2(e[n],M2(t[n],r));return n.isVertical=n=>"vertical"===M2(e.direction,t.direction||(n?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>M2(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>M2(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>M2(e.columns,M2(t.columns,+n.isVertical(!0))),n}function i5(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function o5(e,t,n){return"item.anchor === '".concat("start","' ? ").concat(e," : item.anchor === '").concat("end","' ? ").concat(t," : ").concat(n)}const a5=o5(QD(O3),QD(T3),QD(z3));function s5(e,t){return t?e?GC(e)?Object.assign({},e,{offset:s5(e.offset,t)}):{value:e,offset:t}:t:e}function u5(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Q1(e.encode,t,X3)):e.interactive=!1,e}function l5(e,t,n,r){const i=r5(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let u,l,c,f,d;o?(l=[0,1],c=[0,0],f=a,d=s):(l=[0,0],c=[1,0],f=s,d=a);const h={enter:u={opacity:Q3,x:Q3,y:Q3,width:G1(f),height:G1(d)},update:CD({},u,{opacity:J3,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:Q3}};return X1(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),u5({type:Z3,role:"legend-gradient",encode:h},r)}function c5(e,t,n,r,i){const o=r5(e,n),a=o.isVertical(),s=o.gradientThickness(),u=o.gradientLength();let l,c,f,d,h="";a?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:Q3,fill:{scale:t,field:B3}};p[l]={signal:h+"datum."+L3,mult:u},p[c]=Q3,p[f]={signal:h+"datum.perc2",mult:u},p[d]=G1(s);const m={enter:p,update:CD({},p,{opacity:J3}),exit:{opacity:Q3}};return X1(m,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),u5({type:Z3,role:"legend-band",key:B3,from:i,encode:m},r)}const f5="datum.".concat(L3,'<=0?"').concat(O3,'":datum.').concat(L3,'>=1?"').concat(T3,'":"').concat(z3,'"'),d5="datum.".concat(L3,'<=0?"').concat($3,'":datum.').concat(L3,'>=1?"').concat(N3,'":"').concat("middle",'"');function h5(e,t,n,r){const i=r5(e,t),o=i.isVertical(),a=G1(i.gradientThickness()),s=i.gradientLength();let u,l,c,f,d=i("labelOverlap"),h="";const p={enter:u={opacity:Q3},update:l={opacity:J3,text:{field:P3}},exit:{opacity:Q3}};return X1(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:M2(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=l.baseline={signal:d5},c="y",f="x",h="1-"):(u.align=l.align={signal:f5},u.baseline={value:"top"},c="x",f="y"),u[c]=l[c]={signal:h+"datum."+L3,mult:s},u[f]=l[f]=a,a.offset=M2(e.labelOffset,t.gradientLabelOffset)||0,d=d?{separation:i("labelSeparation"),method:d,order:"datum.index"}:void 0,u5({type:t5,role:t2,style:I3,key:B3,from:r,encode:p,overlap:d},n)}function p5(e,t,n,r,i){const o=r5(e,t),a=n.entries,s=!(!a||!a.interactive),u=a?a.name:void 0,l=o("clipHeight"),c=o("symbolOffset"),f={data:"value"},d="(".concat(i,") ? datum.").concat("offset"," : datum.").concat(G3),h=l?G1(l):{field:G3},p="datum.".concat(R3),m="max(1, ".concat(i,")");let g,y,v,b,x;h.mult=.5,g={enter:y={opacity:Q3,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:J3,x:y.x,y:y.y},exit:{opacity:Q3}};let w=null,_=null;e.fill||(w=t.symbolBaseFillColor,_=t.symbolBaseStrokeColor),X1(g,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",_),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),Y3.forEach((t=>{e[t]&&(v[t]=y[t]={scale:e[t],field:B3})}));const k=u5({type:"symbol",role:"legend-symbol",key:B3,from:f,clip:!!l||void 0,encode:g},n.symbols),E=G1(c);E.offset=o("labelOffset"),g={enter:y={opacity:Q3,x:{signal:d,offset:E},y:h},update:v={opacity:J3,text:{field:P3},x:y.x,y:y.y},exit:{opacity:Q3}},X1(g,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const S=u5({type:t5,role:t2,style:I3,key:B3,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:Q3,height:l?G1(l):Q3,opacity:Q3},exit:{opacity:Q3},update:v={opacity:J3,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(b="ceil(item.mark.items.length / ".concat(m,")"),v.row.signal="".concat(p,"%").concat(b),v.column.signal="floor(".concat(p," / ").concat(b,")"),x={field:["row",p]}):(v.row.signal="floor(".concat(p," / ").concat(m,")"),v.column.signal="".concat(p," % ").concat(m),x={field:p}),v.column.signal="(".concat(i,")?").concat(v.column.signal,":").concat(p),n5({role:e2,from:r={facet:{data:r,name:"value",groupby:R3}},encode:Q1(g,a,X3),marks:[k,S],name:u,interactive:s,sort:x})}const m5='item.orient === "left"',g5='item.orient === "right"',y5="(".concat(m5," || ").concat(g5,")"),v5="datum.vgrad && ".concat(y5),b5=o5('"top"','"bottom"','"middle"'),x5=o5('"right"','"left"','"center"'),w5="datum.vgrad && ".concat(g5," ? (").concat(x5,") : (").concat(y5," && !(datum.vgrad && ").concat(m5,')) ? "left" : ').concat(a5),_5="item._anchor || (".concat(y5,' ? "middle" : "start")'),k5="".concat(v5," ? (").concat(m5," ? -90 : 90) : 0"),E5="".concat(y5," ? (datum.vgrad ? (").concat(g5,' ? "bottom" : "top") : ').concat(b5,') : "top"');function S5(e,t){let n;return GC(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+A5(e.path)+")":e.sphere&&(n="geoShape("+A5(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function A5(e){return GC(e)&&e.signal?e.signal:QD(e)}function C5(e){const t=e.role||"";return t.indexOf("axis")&&t.indexOf("legend")&&t.indexOf("title")?e.type===K3?e2:t||K1:t}function D5(e){return{marktype:e.type,name:e.name||void 0,role:e.role||C5(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function M5(e,t){return e&&e.signal?t.signalRef(e.signal):!1!==e}function F5(e,t){const n=JO(e.type);n||zC("Unrecognized transform type: "+QD(e.type));const r=v2(n.type.toLowerCase(),null,N5(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function N5(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const i=e.params[o];r[i.name]=O5(i,t,n)}return r}function O5(e,t,n){const r=e.type,i=t[e.name];return"index"===r?function(e,t,n){UD(t.from)||zC('Lookup "from" parameter must be a string literal.');return n.getData(t.from).lookupRef(n,t.key)}(0,t,n):void 0!==i?"param"===r?function(e,t,n){const r=t[e.name];return e.array?(VC(r)||zC("Expected an array of sub-parameters. Instead: "+QD(r)),r.map((t=>$5(e,t,n)))):$5(e,r,n)}(e,t,n):"projection"===r?n.projectionRef(t[e.name]):e.array&&!C2(i)?i.map((t=>T5(e,t,n))):T5(e,i,n):void(e.required&&zC("Missing required "+QD(t.type)+" parameter: "+QD(e.name)))}function T5(e,t,n){const r=e.type;if(C2(t))return L5(r)?zC("Expression references can not be signals."):B5(r)?n.fieldRef(t):I5(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||B5(r);return i&&z5(t)?n.exprRef(t.expr,t.as):i&&R5(t)?w2(t.field,t.as):L5(r)?M0(t,n):P5(r)?x2(n.getData(t).values):B5(r)?w2(t):I5(r)?n.compareRef(t):t}}function $5(e,t,n){const r=e.params.length;let i;for(let n=0;n<r;++n){i=e.params[n];for(const e in i.key)if(i.key[e]!==t[e]){i=null;break}if(i)break}i||zC("Unsupported parameter: "+QD(t));const o=CD(N5(i,t,n),i.key);return x2(n.add(i3(o)))}const z5=e=>e&&e.expr,R5=e=>e&&e.field,P5=e=>"data"===e,L5=e=>"expr"===e,B5=e=>"field"===e,I5=e=>"compare"===e;function j5(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:x2(t.getData(e.data).output)}function U5(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}function q5(e){return UD(e)?e:null}function W5(e,t,n){const r=E2(n.op,n.field);let i;if(t.ops){for(let e=0,n=t.as.length;e<n;++e)if(t.as[e]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function H5(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),u=function(e){return GC(e)?("descending"===e.order?"-":"+")+E2(e.op,e.field):""}(o);let l,c,f=q5(i);if(null!=f&&(e=t.scope,f+=u?"|"+u:"",l=s[f]),!l){const n=o?{field:_2,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:x2(t.output)};u&&(n.sort=e.sortRef(o)),c=e.add(v2(r,void 0,n)),a&&(t.index[i]=c),l=x2(c),null!=f&&(s[f]=l)}return l}function V5(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,u=t.add(b2()),l=M0("if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map((e=>null==e?"null":e)).join(",")+"),0)",t);u.update=l.$expr,u.params=l.$params}function G5(e,t){const n=C5(e),r=e.type===K3,i=e.from&&e.from.facet,o=e.overlap;let a,s,u,l,c,f,d,h=e.layout||n===e2||n===Z1;const p=n===K1||h||i,m=function(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||zC("Only group marks can be faceted."),null!=r.field?a=s=j5(r,n):(e.data?s=x2(n.getData(e.data).aggregate):(o=F5(CD({type:"aggregate",groupby:yD(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=j5(r,n),a=s=x2(n.add(o))),i=n.keyRef(r.groupby,!0))):a=x2(n.add(W2(null,[{}]))),a||(a=j5(e,n)),{key:i,pulse:a,parent:s}}(e.from,r,t);s=t.add(V2({key:m.key||(e.key?w2(e.key):void 0),pulse:m.pulse,clean:!r}));const g=x2(s);s=u=t.add(W2({pulse:g})),s=t.add(e3({markdef:D5(e),interactive:M5(e.interactive,t),clip:S5(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:x2(s)}));const y=x2(s);s=l=t.add(G2(f2(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),s.params.parent=t.encode(),e.transform&&e.transform.forEach((e=>{const n=F5(e,t),r=n.metadata;(r.generates||r.changes)&&zC("Mark transforms should not generate new data."),r.nomod||(l.params.mod=!0),n.params.pulse=x2(s),t.add(s=n)})),e.sort&&(s=t.add(d3({sort:t.compareRef(e.sort),pulse:x2(s)})));const v=x2(s);(i||h)&&(h=t.add(h3({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),f=x2(h));const b=t.add(q2({mark:y,pulse:f||v}));d=x2(b),r&&(p&&(a=t.operators,a.pop(),h&&a.pop()),t.pushState(v,f||d,g),i?function(e,t,n){const r=e.from.facet,i=r.name,o=j5(r,t);let a;r.name||zC("Facet must have a name: "+QD(r)),r.data||zC("Facet must reference a data set: "+QD(r)),r.field?a=t.add(o3({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(X2({key:t.keyRef(r.groupby),group:x2(t.proxy(n.parent)),pulse:o})):zC("Facet must specify groupby or field: "+QD(r));const s=t.fork(),u=s.add(W2()),l=s.add(f3({pulse:x2(u)}));s.addData(i,new U5(s,u,u,l)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}(e,t,m):p?function(e,t,n){const r=t.add(o3({pulse:n.pulse})),i=t.fork();i.add(f3()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}(e,t,m):t.parse(e),t.popState(),p&&(h&&a.push(h),a.push(b))),o&&(d=function(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:C2(o)?n.signalRef(o.signal):o,method:C2(r)?n.signalRef(r.signal):r,pulse:t};e.order&&(a.sort=n.compareRef({field:e.order}));if(i){const e=i.tolerance;a.boundTolerance=C2(e)?n.signalRef(e.signal):+e,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return x2(n.add(r3(a)))}(o,d,t));const x=t.add(l3({pulse:d})),w=t.add(f3({pulse:x2(x)},void 0,t.parent()));null!=e.name&&(c=e.name,t.addData(c,new U5(t,u,x,w)),e.on&&e.on.forEach((e=>{(e.insert||e.remove||e.toggle)&&zC("Marks only support modify triggers."),V5(e,t,c)})))}function Y5(e,t){const n=t.config.legend,r=e.encode||{},i=r5(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,u=o.style,l={};let c,f,d,h=0;Y3.forEach((t=>e[t]?(l[t]=e[t],h=h||e[t]):0)),h||zC("Missing valid scale for legend.");const p=function(e,t){let n=e.type||W3;e.type||1!==function(e){return Y3.reduce(((t,n)=>t+(e[n]?1:0)),0)}(e)||!e.fill&&!e.stroke||(n=yP(t)?H3:bP(t)?V3:W3);return n!==H3?n:bP(t)?V3:H3}(e,t.scaleType(h)),m={title:null!=e.title,scales:l,type:p,vgrad:"symbol"!==p&&i.isVertical()},g=x2(t.add(W2(null,[m]))),y=x2(t.add(K2(f={type:p,scale:t.scaleRef(h),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===H3?(d=[l5(e,h,n,r.gradient),h5(e,n,r.labels,y)],f.count=f.count||t.signalRef("max(2,2*floor((".concat(F2(i.gradientLength()),")/100))"))):p===V3?d=[c5(e,h,n,r.gradient,y),h5(e,n,r.labels,y)]:(c=function(e,t){const n=r5(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}(e,n),d=[p5(e,n,r,y,F2(c.columns))],f.size=function(e,t,n){const r=F2(Q5("size",e,n)),i=F2(Q5("strokeWidth",e,n)),o=F2(function(e,t,n){return i5("fontSize",e)||function(e,t,n){const r=t.config.style[n];return r&&r[e]}("fontSize",t,n)}(n[1].encode,t,I3));return M0("max(ceil(sqrt(".concat(r,")+").concat(i,"),").concat(o,")"),t)}(e,t,d[0].marks)),d=[n5({role:"legend-entry",from:g,encode:{enter:{x:{value:0},y:{value:0}}},marks:d,layout:c,interactive:s})],m.title&&d.push(function(e,t,n,r){const i=r5(e,t),o={enter:{opacity:Q3},update:{opacity:J3,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Q3}};return X1(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:_5},angle:{signal:k5},align:{signal:w5},baseline:{signal:E5},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),u5({type:t5,role:"legend-title",style:j3,from:r,encode:o},n)}(e,n,r.title,g)),G5(n5({role:"legend",from:g,encode:Q1(X5(i,e,n),o,X3),marks:d,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:u}),t)}function X5(e,t,n){const r={enter:{},update:{}};return X1(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function Q5(e,t,n){return t[e]?'scale("'.concat(t[e],'",datum)'):i5(e,n[0].encode)}U5.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&"load"===o.type&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=x2(t[s-1]),e.add(t[s]),"aggregate"===t[s].type&&(a=t[s]);return new U5(e,o,i,r,a)},U5.prototype={countsRef:function(e,t,n){const r=this,i=r.counts||(r.counts={}),o=q5(t);let a,s,u;return null!=o&&(e=r.scope,a=i[o]),a?n&&n.field&&W5(e,a.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:x2(r.output)},n&&n.field&&W5(e,u,n),s=e.add(j2(u)),a=e.add(W2({pulse:x2(s)})),a={agg:s,ref:x2(a)},null!=o&&(i[o]=a)),a.ref},tuplesRef:function(){return x2(this.values)},extentRef:function(e,t){return H5(e,this,"extent","extent",t,!1)},domainRef:function(e,t){return H5(e,this,"domain","values",t,!1)},valuesRef:function(e,t,n){return H5(e,this,"vals","values",t,n||!0)},lookupRef:function(e,t){return H5(e,this,"lookup","tupleindex",t,!1)},indataRef:function(e,t){return H5(e,this,"indata","tupleindex",t,!0,!0)}};const J5='item.orient==="'.concat(O3,'"?-90:item.orient==="').concat(T3,'"?90:0');function K5(e,t){const n=r5(e=UD(e)?{text:e}:e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,u=[],l=x2(t.add(W2(null,[{}])));return u.push(function(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return X1(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),u5({type:t5,role:n2,style:U3,from:r,encode:a},n)}(e,n,function(e){const t=e.encode;return t&&t.title||CD({name:e.name,interactive:e.interactive,style:e.style},t)}(e),l)),e.subtitle&&u.push(function(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return X1(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),u5({type:t5,role:r2,style:q3,from:r,encode:a},n)}(e,n,r.subtitle,l)),G5(n5({role:"title",from:l,encode:Z5(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function Z5(e,t){const n={enter:{},update:{}};return X1(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:a5},angle:{signal:J5},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Q1(n,t,X3)}function e6(e,t){const n=[];e.transform&&e.transform.forEach((e=>{n.push(F5(e,t))})),e.on&&e.on.forEach((n=>{V5(n,t,e.name)})),t.addDataPipeline(e.name,function(e,t,n){const r=[];let i,o,a,s,u,l=null,c=!1,f=!1;e.values?C2(e.values)||D2(e.format)?(r.push(n6(t,e)),r.push(l=t6())):r.push(l=t6({$ingest:e.values,$format:e.format})):e.url?D2(e.url)||D2(e.format)?(r.push(n6(t,e)),r.push(l=t6())):r.push(l=t6({$request:e.url,$format:e.format})):e.source&&(l=i=yD(e.source).map((e=>x2(t.getData(e).output))),r.push(null));for(o=0,a=n.length;o<a;++o)s=n[o],u=s.metadata,l||u.source||r.push(l=t6()),r.push(s),u.generates&&(f=!0),u.modifies&&!f&&(c=!0),u.source?l=s:u.changes&&(l=null);i&&(a=i.length-1,r[0]=u3({derive:c,pulse:a?i:i[0]}),(c||a)&&r.splice(1,0,t6()));l||r.push(t6());return r.push(f3({})),r}(e,t,n))}function t6(e){const t=W2({},e);return t.metadata={source:!0},t}function n6(e,t){return Z2({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const r6=e=>e===$3||e===N3,i6=(e,t,n)=>C2(e)?c6(e.signal,t,n):e===O3||e===N3?t:n,o6=(e,t,n)=>C2(e)?u6(e.signal,t,n):r6(e)?t:n,a6=(e,t,n)=>C2(e)?l6(e.signal,t,n):r6(e)?n:t,s6=(e,t,n)=>C2(e)?f6(e.signal,t,n):e===N3?{value:t}:{value:n},u6=(e,t,n)=>h6("".concat(e," === '").concat(N3,"' || ").concat(e," === '").concat($3,"'"),t,n),l6=(e,t,n)=>h6("".concat(e," !== '").concat(N3,"' && ").concat(e," !== '").concat($3,"'"),t,n),c6=(e,t,n)=>m6("".concat(e," === '").concat(O3,"' || ").concat(e," === '").concat(N3,"'"),t,n),f6=(e,t,n)=>m6("".concat(e," === '").concat(N3,"'"),t,n),d6=(e,t,n)=>m6("".concat(e," === '").concat(T3,"'"),t,n),h6=(e,t,n)=>(t=null!=t?G1(t):t,n=null!=n?G1(n):n,p6(t)&&p6(n)?(t=t?t.signal||QD(t.value):null,n=n?n.signal||QD(n.value):null,{signal:"".concat(e," ? (").concat(t,") : (").concat(n,")")}):[CD({test:e},t)].concat(n||[])),p6=e=>null==e||1===Object.keys(e).length,m6=(e,t,n)=>({signal:"".concat(e," ? (").concat(g6(t),") : (").concat(g6(n),")")}),g6=e=>C2(e)?e.signal:null==e?null:QD(e),y6=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function v6(e,t,n,r){let i;if(t&&ND(t,e))return t[e];if(ND(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r["guide-title"][i]}if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r["guide-label"][i]}return null}function b6(e){const t={};for(const n of e)if(n)for(const e in n)t[e]=1;return Object.keys(t)}function x6(e,t){return{scale:e.scale,range:t}}function w6(e,t,n,r,i){const o=r5(e,t),a=e.orient,s=e.gridScale,u=i6(a,1,-1),l=function(e,t){if(1===t);else if(GC(e)){let n=e=CD({},e);for(;null!=n.mult;){if(!GC(n.mult))return n.mult=C2(t)?{signal:"(".concat(n.mult,") * (").concat(t.signal,")")}:n.mult*t,e;n=n.mult=CD({},n.mult)}n.mult=t}else e=C2(t)?{signal:"(".concat(t.signal,") * (").concat(e||0,")")}:t*(e||0);return e}(e.offset,u);let c,f,d;const h={enter:c={opacity:Q3},update:d={opacity:J3},exit:f={opacity:Q3}};X1(h,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const p={scale:e.scale,field:B3,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},m=o6(a,{signal:"height"},{signal:"width"}),g=s?{scale:s,range:0,mult:u,offset:l}:{value:0,offset:l},y=s?{scale:s,range:1,mult:u,offset:l}:CD(m,{mult:u,offset:l});return c.x=d.x=o6(a,p,g),c.y=d.y=a6(a,p,g),c.x2=d.x2=a6(a,y),c.y2=d.y2=o6(a,y),f.x=o6(a,p),f.y=a6(a,p),u5({type:e5,role:"axis-grid",key:B3,from:r,encode:h},n)}function _6(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function k6(e,t,n,r,i,o){const a=r5(e,t),s=e.orient,u=e.scale,l=i6(s,-1,1),c=F2(a("labelFlush")),f=F2(a("labelFlushOffset")),d=a("labelAlign"),h=a("labelBaseline");let p,m=0===c||!!c;const g=G1(i);g.mult=l,g.offset=G1(a("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:B3,band:.5,offset:s5(o.offset,a("labelOffset"))},v=o6(s,m?_6(u,c,'"left"','"right"','"center"'):{value:"center"},((e,t,n)=>C2(e)?d6(e.signal,t,n):e===T3?{value:t}:{value:n})(s,"left","right")),b=o6(s,s6(s,"bottom","top"),m?_6(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),x=_6(u,c,"-(".concat(f,")"),f,0);m=m&&f;const w={opacity:Q3,x:o6(s,y,g),y:a6(s,y,g)},_={enter:w,update:p={opacity:J3,text:{field:P3},x:w.x,y:w.y,align:v,baseline:b},exit:{opacity:Q3,x:w.x,y:w.y}};X1(_,{dx:!d&&m?o6(s,x):null,dy:!h&&m?a6(s,x):null}),X1(_,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:d,baseline:h});const k=a("labelBound");let E=a("labelOverlap");return E=E||k?{separation:a("labelSeparation"),method:E,order:"datum.index",bound:k?{scale:u,orient:s,tolerance:k}:null}:void 0,p.align!==v&&(p.align=y6(p.align,v)),p.baseline!==b&&(p.baseline=y6(p.baseline,b)),u5({type:t5,role:"axis-label",style:I3,key:B3,from:r,encode:_,overlap:E},n)}function E6(e,t,n,r){const i=r5(e,t),o=e.orient,a=i6(o,-1,1);let s,u;const l={enter:s={opacity:Q3,anchor:G1(i("titleAnchor",null)),align:{signal:a5}},update:u=CD({},s,{opacity:J3,text:G1(e.title)}),exit:{opacity:Q3}},c={signal:'lerp(range("'.concat(e.scale,'"), ').concat(o5(0,1,.5),")")};return u.x=o6(o,c),u.y=a6(o,c),s.angle=o6(o,Q3,((e,t)=>0===t?0:C2(e)?{signal:"(".concat(e.signal,") * ").concat(t)}:{value:e*t})(a,90)),s.baseline=o6(o,s6(o,$3,N3),{value:$3}),u.angle=s.angle,u.baseline=s.baseline,X1(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),function(e,t,n,r){const i=(e,t)=>null!=e?(n.update[t]=y6(G1(e),n.update[t]),!1):!J1(t,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?G1(a):o6(t,G1(a),G1(o))}(i,o,l,n),l.update.align=y6(l.update.align,s.align),l.update.angle=y6(l.update.angle,s.angle),l.update.baseline=y6(l.update.baseline,s.baseline),u5({type:t5,role:"axis-title",style:j3,from:r,encode:l},n)}function S6(e,t){const n=function(e,t){var n,r,i,o,a,s,u,l,c=t.config,f=c.style,d=c.axis,h="band"===t.scaleType(e.scale)&&c.axisBand,p=e.orient;if(C2(p)){const e=b6([c.axisX,c.axisY]),t=b6([c.axisTop,c.axisBottom,c.axisLeft,c.axisRight]);for(i of(n={},e))n[i]=o6(p,v6(i,c.axisX,d,f),v6(i,c.axisY,d,f));for(i of(r={},t))r[i]=(o=p.signal,a=v6(i,c.axisTop,d,f),s=v6(i,c.axisBottom,d,f),u=v6(i,c.axisLeft,d,f),l=v6(i,c.axisRight,d,f),{signal:(null!=u?"".concat(o," === '").concat(O3,"' ? (").concat(g6(u),") : "):"")+(null!=s?"".concat(o," === '").concat($3,"' ? (").concat(g6(s),") : "):"")+(null!=l?"".concat(o," === '").concat(T3,"' ? (").concat(g6(l),") : "):"")+(null!=a?"".concat(o," === '").concat(N3,"' ? (").concat(g6(a),") : "):"")+"(null)"})}else n=p===N3||p===$3?c.axisX:c.axisY,r=c["axis"+p[0].toUpperCase()+p.slice(1)];return n||r||h?CD({},d,n,r,h):d}(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,u=r5(e,n),l=function(e){const t=e("tickBand");let n,r,i=e("tickOffset");return t?t.signal?(n={signal:"(".concat(t.signal,") === 'extent' ? 1 : 0.5")},r={signal:"(".concat(t.signal,") === 'extent'")},GC(i)||(i={signal:"(".concat(t.signal,") === 'extent' ? 0 : ").concat(i)})):"extent"===t?(n=1,r=!0,i=0):(n=.5,r=!1):(n=e("bandPosition"),r=e("tickExtra")),{extra:r,band:n,offset:i}}(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:null!=e.title},f=x2(t.add(W2({},[c]))),d=x2(t.add(U2({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(w6(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(function(e,t,n,r,i,o){const a=r5(e,t),s=e.orient,u=i6(s,-1,1);let l,c,f;const d={enter:l={opacity:Q3},update:f={opacity:J3},exit:c={opacity:Q3}};X1(d,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const h=G1(i);h.mult=u;const p={scale:e.scale,field:B3,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return f.y=l.y=o6(s,Q3,p),f.y2=l.y2=o6(s,h),c.x=o6(s,p),f.x=l.x=a6(s,Q3,p),f.x2=l.x2=a6(s,h),c.y=a6(s,p),u5({type:e5,role:"axis-tick",key:B3,from:r,encode:d},n)}(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(k6(e,n,r.labels,d,p,l))),c.domain&&h.push(function(e,t,n,r){const i=r5(e,t),o=e.orient;let a,s;const u={enter:a={opacity:Q3},update:s={opacity:J3},exit:{opacity:Q3}};X1(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=x6(e,0),c=x6(e,1);return a.x=s.x=o6(o,l,Q3),a.x2=s.x2=o6(o,c),a.y=s.y=a6(o,l,Q3),a.y2=s.y2=a6(o,c),u5({type:e5,role:"axis-domain",from:r,encode:u},n)}(e,n,r.domain,f)),c.title&&h.push(E6(e,n,r.title,f)),G5(n5({role:"axis",from:f,encode:Q1(A6(u,e),i,X3),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:o,interactive:a,style:s}),t)}function A6(e,t){const n={enter:{},update:{}};return X1(n,{orient:e("orient"),offset:e("offset")||0,position:M2(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:'abs(span(range("'.concat(t.scale,'")))')},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function C6(e,t,n){const r=yD(e.signals),i=yD(e.scales);return n||r.forEach((e=>g2(e,t))),yD(e.projections).forEach((e=>function(e,t){const n=t.config.projection||{},r={};for(const n in e)"name"!==n&&(r[n]=F3(e[n],n,t));for(const e in n)null==r[e]&&(r[e]=F3(n[e],e,t));t.addProjection(e.name,r)}(e,t))),i.forEach((e=>function(e,t){const n=e.type||"linear";mP(n)||zC("Unrecognized scale type: "+QD(n)),t.addScale(e.name,{type:n,domain:void 0})}(e,t))),yD(e.data).forEach((e=>e6(e,t))),i.forEach((e=>y3(e,t))),(n||r).forEach((e=>function(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?zC("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=M0(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach((e=>L2(e,t,n.id)))}(e,t))),yD(e.axes).forEach((e=>S6(e,t))),yD(e.marks).forEach((e=>G5(e,t))),yD(e.legends).forEach((e=>Y5(e,t))),e.title&&K5(e.title,t),t.parseLambdas(),t}function D6(e,t){const n=t.config,r=x2(t.root=t.add(b2())),i=function(e,t){const n=n=>M2(e[n],t[n]),r=[M6("background",n("background")),M6("autosize",W1(n("autosize"))),M6("padding",V1(n("padding"))),M6("width",n("width")||0),M6("height",n("height")||0)],i=r.reduce(((e,t)=>(e[t.name]=t,e)),{}),o={};return yD(e.signals).forEach((e=>{ND(i,e.name)?e=CD(i[e.name],e):r.push(e),o[e.name]=e})),yD(t.signals).forEach((e=>{ND(o,e.name)||ND(i,e.name)||r.push(e)})),r}(e,n);i.forEach((e=>g2(e,t))),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(W2()),a=t.add(G2(f2((e=>Q1({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e))(e.encode),K3,Z1,e.style,t,{pulse:x2(o)}))),s=t.add(h3({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:x2(a)}));t.operators.pop(),t.pushState(x2(a),x2(s),null),C6(e,t,i),t.operators.push(s);let u=t.add(q2({mark:r,pulse:x2(s)}));return u=t.add(l3({pulse:x2(u)})),u=t.add(f3({pulse:x2(u)})),t.addData("root",new U5(t,o,o,u)),t}function M6(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function F6(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function N6(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}function O6(e){return(VC(e)?T6:$6)(e)}function T6(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const t=e[r];n+=(r>0?",":"")+(GC(t)?t.signal||O6(t):QD(t))}return n+"]"}function $6(e){let t,n,r="{",i=0;for(t in e)n=e[t],r+=(++i>1?",":"")+QD(t)+":"+(GC(n)?n.signal||O6(n):QD(n));return r+"}"}function z6(e,t,n){return GC(e)||zC("Input Vega specification must be an object."),D6(e,new F6(t=XC(function(){const e="sans-serif",t="#4c78a8",n="#000",r="#888",i="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:t},area:{fill:t},image:null,line:{stroke:t,strokeWidth:2},path:{stroke:t},rect:{fill:t},rule:{stroke:n},shape:{stroke:t},symbol:{fill:t,size:64},text:{fill:n,font:e,fontSize:11},trail:{fill:t,size:2},style:{"guide-label":{fill:n,font:e,fontSize:10},"guide-title":{fill:n,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:n,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:n,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:i}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:r,grid:!1,gridWidth:1,gridColor:i,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:r,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:i,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:r,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}(),t,e.config),n)).toRuntime()}F6.prototype=N6.prototype={parse:function(e){return C6(e,this)},fork:function(){return new N6(this)},isSubscope:function(){return this._subid>0},toRuntime:function(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id:function(){return(this._subid?this._subid+":":0)+this._id++},add:function(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach((t=>{t.$ref=e.id})),e.refs=null),e},proxy:function(e){const t=e instanceof y2?x2(e):e;return this.add(s3({value:t}))},addStream:function(e){return this.streams.push(e),e.id=this.id(),e},addUpdate:function(e){return this.updates.push(e),e},finish:function(){let e,t;for(e in this.root&&(this.root.root=!0),this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(e,t,n){let r,i;e&&(r=e.data||(e.data={}),i=r[t]||(r[t]=[]),i.push(n))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState:function(e,t,n){this._encode.push(x2(this.add(f3({pulse:e})))),this._parent.push(t),this._lookup.push(n?x2(this.proxy(n)):null),this._markpath.push(-1)},popState:function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent:function(){return KC(this._parent)},encode:function(){return KC(this._encode)},lookup:function(){return KC(this._lookup)},markpath:function(){const e=this._markpath;return++e[e.length-1]},fieldRef:function(e,t){if(UD(e))return w2(e,t);e.signal||zC("Unsupported field reference: "+QD(e));const n=e.signal;let r=this.field[n];if(!r){const e={name:this.signalRef(n)};t&&(e.as=t),this.field[n]=r=x2(this.add(Q2(e)))}return r},compareRef:function(e){let t=!1;const n=e=>C2(e)?(t=!0,this.signalRef(e.signal)):function(e){return e&&e.expr}(e)?(t=!0,this.exprRef(e.expr)):e,r=yD(e.field).map(n),i=yD(e.order).map(n);return t?x2(this.add(H2({fields:r,orders:i}))):k2(r,i)},keyRef:function(e,t){let n=!1;const r=this.signals;return e=yD(e).map((e=>C2(e)?(n=!0,x2(r[e.signal])):e)),n?x2(this.add(J2({fields:e,flat:t}))):function(e,t){const n={$key:e};return t&&(n.$flat=!0),n}(e,t)},sortRef:function(e){if(!e)return e;const t=E2(e.op,e.field),n=e.order||"ascending";return n.signal?x2(this.add(H2({fields:t,orders:this.signalRef(n.signal)}))):k2(t,n)},event:function(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal:function(e){return ND(this.signals,e)},addSignal:function(e,t){this.hasOwnSignal(e)&&zC("Duplicate signal name: "+QD(e));const n=t instanceof y2?t:this.add(b2(t));return this.signals[e]=n},getSignal:function(e){return this.signals[e]||zC("Unrecognized signal name: "+QD(e)),this.signals[e]},signalRef:function(e){return this.signals[e]?x2(this.signals[e]):(ND(this.lambdas,e)||(this.lambdas[e]=this.add(b2(null))),x2(this.lambdas[e]))},parseLambdas:function(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const n=e[t],r=M0(n,this),i=this.lambdas[n];i.params=r.$params,i.update=r.$expr}},property:function(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty:function(e){return e&&GC(e)?this.signalRef(e.signal||O6(e)):e},exprRef:function(e,t){const n={expr:M0(e,this)};return t&&(n.expr.$name=t),x2(this.add(Y2(n)))},addBinding:function(e,t){this.bindings||zC("Nested signals do not support binding: "+QD(e)),this.bindings.push(CD({signal:e},t))},addScaleProj:function(e,t){ND(this.scales,e)&&zC("Duplicate scale or projection name: "+QD(e)),this.scales[e]=this.add(t)},addScale:function(e,t){this.addScaleProj(e,c3(t))},addProjection:function(e,t){this.addScaleProj(e,a3(t))},getScale:function(e){return this.scales[e]||zC("Unrecognized scale name: "+QD(e)),this.scales[e]},scaleRef:function(e){return x2(this.getScale(e))},scaleType:function(e){return this.getScale(e).params.type},projectionRef:function(e){return this.scaleRef(e)},projectionType:function(e){return this.scaleType(e)},addData:function(e,t){return ND(this.data,e)&&zC("Duplicate data set name: "+QD(e)),this.data[e]=t},getData:function(e){return this.data[e]||zC("Undefined data set name: "+QD(e)),this.data[e]},addDataPipeline:function(e,t){return ND(this.data,e)&&zC("Duplicate data set name: "+QD(e)),this.addData(e,U5.fromEntries(this,t))}},n(CC,"tupleid",(function(){return gO})),n(CC,"transforms",(function(){return QO})),n(CC,"transform",(function(){return KO})),n(CC,"isTuple",(function(){return mO})),n(CC,"ingest",(function(){return vO})),n(CC,"definition",(function(){return JO})),n(CC,"changeset",(function(){return EO})),n(CC,"Transform",(function(){return XO})),n(CC,"Pulse",(function(){return LO})),n(CC,"Parameters",(function(){return AO})),n(CC,"Operator",(function(){return MO})),n(CC,"MultiPulse",(function(){return UO})),n(CC,"EventStream",(function(){return OO})),n(CC,"Dataflow",(function(){return GO})),n(CC,"scheme",(function(){return OP})),n(CC,"scale",(function(){return pP})),n(CC,"quantizeInterpolator",(function(){return AP})),n(CC,"interpolateRange",(function(){return EP})),n(CC,"interpolateColors",(function(){return SP})),n(CC,"interpolate",(function(){return DP})),n(CC,"projection",(function(){return CY})),n(CC,"View",(function(){return M1})),n(CC,"timeFormatLocale",(function(){return iO})),n(CC,"resetDefaultLocale",(function(){return uO})),n(CC,"locale",(function(){return aO})),n(CC,"formatLocale",(function(){return ZN})),n(CC,"defaultLocale",(function(){return sO})),n(CC,"expressionFunction",(function(){return D0})),n(CC,"parse",(function(){return z6})),n(CC,"runtimeContext",(function(){return L0})),n(CC,"parseExpression",(function(){return TZ})),n(CC,"codegenExpression",(function(){return RZ})),n(CC,"parseSelector",(function(){return I1}));var R6="5.20.2";CD(QO,ZO,wz,Iq,yW,oX,XQ,zX,gJ,wJ,GJ,aK);const P6=R6;n(CC,"version",(function(){return P6}));var L6={},B6=t(JSON.parse('{"name":"vega-lite","author":"Dominik Moritz, Kanit \\"Ham\\" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer","version":"5.1.0","collaborators":["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],"homepage":"https://vega.github.io/vega-lite/","description":"Vega-Lite is a concise high-level language for interactive visualization.","main":"build/vega-lite.js","unpkg":"build/vega-lite.min.js","jsdelivr":"build/vega-lite.min.js","module":"build/src/index","types":"build/src/index.d.ts","bin":{"vl2png":"./bin/vl2png","vl2svg":"./bin/vl2svg","vl2pdf":"./bin/vl2pdf","vl2vg":"./bin/vl2vg"},"directories":{"test":"test"},"files":["bin","build","src","vega-lite*","tsconfig.json"],"scripts":{"changelog":"conventional-changelog -p angular -r 2","prebuild":"yarn clean:build","build":"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.js","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh","clean":"yarn clean:build && del-cli \'site/data/*\' \'examples/compiled/*.png\' && find site/examples ! -name \'index.md\' ! -name \'data\' -type f -delete","clean:build":"del-cli \'build/*\' !build/vega-lite-schema.json","predeploy:site":"yarn presite","deploy:site":"gh-pages -d site","data":"rsync -r node_modules/vega-datasets/data/* site/data","schema":"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/","renameschema":"scripts/rename-schema.sh","presite":"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh","site":"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd","prettierbase":"prettier \'**/*.{md,css,yml}\'","eslintbase":"eslint .","format":"yarn eslintbase --fix && yarn prettierbase --write","lint":"yarn eslintbase && yarn prettierbase --check","test":"jest test/ && yarn lint && yarn schema && jest examples/ && yarn test:runtime","test:cover":"jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime","watch":"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"jest --watch test/"},"repository":{"type":"git","url":"https://github.com/vega/vega-lite.git"},"license":"BSD-3-Clause","bugs":{"url":"https://github.com/vega/vega-lite/issues"},"devDependencies":{"@babel/core":"^7.13.15","@babel/preset-env":"^7.13.15","@babel/preset-typescript":"^7.13.0","@rollup/plugin-babel":"^5.3.0","@rollup/plugin-commonjs":"^18.0.0","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^11.2.1","@types/chai":"^4.2.16","@types/d3":"^6.3.0","@types/jest":"^26.0.22","@types/mkdirp":"^1.0.1","@types/pako":"^1.0.1","@typescript-eslint/eslint-plugin":"^4.22.0","@typescript-eslint/parser":"^4.22.0","ajv":"^8.1.0","ajv-formats":"^2.0.2","chai":"^4.3.4","cheerio":"^1.0.0-rc.6","conventional-changelog-cli":"^2.1.1","d3":"^6.7.0","del-cli":"^3.0.1","eslint":"^7.24.0","eslint-config-prettier":"^8.2.0","eslint-plugin-jest":"^24.3.5","eslint-plugin-prettier":"^3.4.0","gh-pages":"^3.1.0","highlight.js":"^10.7.2","jest":"^26.6.3","jest-dev-server":"^5.0.0","mkdirp":"^1.0.4","pako":"^2.0.3","prettier":"^2.2.1","puppeteer":"^8.0.0","rollup":"^2.45.2","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-sourcemaps":"^0.6.3","rollup-plugin-terser":"^7.0.2","serve":"^11.3.2","terser":"^5.6.1","ts-json-schema-generator":"^0.90.0","typescript":"~4.2.4","vega-cli":"^5.20.2","vega-datasets":"~2.2.0","vega-embed":"^6.17.0","vega-tooltip":"^0.25.1","yaml-front-matter":"^4.1.1"},"dependencies":{"@types/clone":"~2.1.0","@types/fast-json-stable-stringify":"^2.0.0","array-flat-polyfill":"^1.0.1","clone":"~2.1.2","fast-deep-equal":"~3.1.3","fast-json-stable-stringify":"~2.1.0","json-stringify-pretty-compact":"~3.0.0","tslib":"~2.2.0","vega-event-selector":"~2.0.6","vega-expression":"~4.0.1","vega-util":"~1.16.1","yargs":"~16.2.0"},"peerDependencies":{"vega":"^5.20.0"},"jest":{"testPathIgnorePatterns":["<rootDir>/node_modules","<rootDir>/build","<rootDir>/_site","<rootDir>/src"],"coverageDirectory":"./coverage/","collectCoverage":false,"setupFiles":["./test/jest.overrides.ts"]}}')),I6={};Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,value:function e(){var t=isNaN(arguments[0])?1:Number(arguments[0]);return t?Array.prototype.reduce.call(this,(function(n,r){return Array.isArray(r)?n.push.apply(n,e.call(r,t-1)):n.push(r),n}),[]):Array.prototype.slice.call(this)},writable:!0}),Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(e){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var j6={},U6=RM,q6=function(){function e(e,t){return null!=t&&e instanceof t}var t,n,r;try{t=Map}catch(e){t=function(){}}try{n=Set}catch(e){n=function(){}}try{r=Promise}catch(e){r=function(){}}function i(o,s,u,l,c){"object"==typeof s&&(u=s.depth,l=s.prototype,c=s.includeNonEnumerable,s=s.circular);var f=[],d=[],h=void 0!==U6;return void 0===s&&(s=!0),void 0===u&&(u=1/0),function o(u,p){if(null===u)return null;if(0===p)return u;var m,g;if("object"!=typeof u)return u;if(e(u,t))m=new t;else if(e(u,n))m=new n;else if(e(u,r))m=new r((function(e,t){u.then((function(t){e(o(t,p-1))}),(function(e){t(o(e,p-1))}))}));else if(i.__isArray(u))m=[];else if(i.__isRegExp(u))m=new RegExp(u.source,a(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(i.__isDate(u))m=new Date(u.getTime());else{if(h&&U6.isBuffer(u))return m=U6.allocUnsafe?U6.allocUnsafe(u.length):new U6(u.length),u.copy(m),m;e(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(s){var y=f.indexOf(u);if(-1!=y)return d[y];f.push(u),d.push(m)}for(var v in e(u,t)&&u.forEach((function(e,t){var n=o(t,p-1),r=o(e,p-1);m.set(n,r)})),e(u,n)&&u.forEach((function(e){var t=o(e,p-1);m.add(t)})),u){var b;g&&(b=Object.getOwnPropertyDescriptor(g,v)),b&&null==b.set||(m[v]=o(u[v],p-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(u);for(v=0;v<x.length;v++){var w=x[v];(!(k=Object.getOwnPropertyDescriptor(u,w))||k.enumerable||c)&&(m[w]=o(u[w],p-1),k.enumerable||Object.defineProperty(m,w,{enumerable:!1}))}}if(c){var _=Object.getOwnPropertyNames(u);for(v=0;v<_.length;v++){var k,E=_[v];(k=Object.getOwnPropertyDescriptor(u,E))&&k.enumerable||(m[E]=o(u[E],p-1),Object.defineProperty(m,E,{enumerable:!1}))}}return m}(o,u)}function o(e){return Object.prototype.toString.call(e)}function a(e){var t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),t}return i.clonePrototype=function(e){if(null===e)return null;var t=function(){};return t.prototype=e,new t},i.__objToStr=o,i.__isDate=function(e){return"object"==typeof e&&"[object Date]"===o(e)},i.__isArray=function(e){return"object"==typeof e&&"[object Array]"===o(e)},i.__isRegExp=function(e){return"object"==typeof e&&"[object RegExp]"===o(e)},i.__getRegExpFlags=a,i}();j6&&(j6=q6);var W6=t(j6),H6=t((function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(i=r;0!=i--;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(o=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(i=r;0!=i--;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;0!=i--;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!=t&&n!=n})),V6=t((function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n,r="boolean"==typeof t.cycles&&t.cycles,i=t.cmp&&(n=t.cmp,function(e){return function(t,r){var i={key:t,value:e[t]},o={key:r,value:e[r]};return n(i,o)}}),o=[];return function e(t){if(t&&t.toJSON&&"function"==typeof t.toJSON&&(t=t.toJSON()),void 0!==t){if("number"==typeof t)return isFinite(t)?""+t:"null";if("object"!=typeof t)return JSON.stringify(t);var n,a;if(Array.isArray(t)){for(a="[",n=0;n<t.length;n++)n&&(a+=","),a+=e(t[n])||"null";return a+"]"}if(null===t)return"null";if(-1!==o.indexOf(t)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var s=o.push(t)-1,u=Object.keys(t).sort(i&&i(t));for(a="",n=0;n<u.length;n++){var l=u[n],c=e(t[l]);c&&(a&&(a+=","),a+=JSON.stringify(l)+":"+c)}return o.splice(s,1),"{"+a+"}"}}(e)}));function G6(e){return!!e.or}function Y6(e){return!!e.and}function X6(e){return!!e.not}function Q6(e,t){if(X6(e))Q6(e.not,t);else if(Y6(e))for(const n of e.and)Q6(n,t);else if(G6(e))for(const n of e.or)Q6(n,t);else t(e)}function J6(e,t){return X6(e)?{not:J6(e.not,t)}:Y6(e)?{and:e.and.map((e=>J6(e,t)))}:G6(e)?{or:e.or.map((e=>J6(e,t)))}:t(e)}const K6=H6;n(I6,"deepEqual",(function(){return K6}));const Z6=W6;function e4(e,t){const n={};for(const r of t)ND(e,r)&&(n[r]=e[r]);return n}function t4(e,t){const n={...e};for(const e of t)delete n[e];return n}n(I6,"duplicate",(function(){return Z6})),n(I6,"pick",(function(){return e4})),n(I6,"omit",(function(){return t4})),Set.prototype.toJSON=function(){return`Set(${[...this].map((e=>V6(e))).join(",")})`};const n4=V6;function r4(e){if(ID(e))return e;const t=UD(e)?e:V6(e);if(t.length<250)return t;let n=0;for(let e=0;e<t.length;e++){n=(n<<5)-n+t.charCodeAt(e),n&=n}return n}function i4(e){return!1===e||null===e}function o4(e,t){return e.includes(t)}function a4(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function s4(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function u4(e,...t){for(const n of t)l4(e,n??{});return e}function l4(e,t){for(const n of y4(t))QC(e,n,t[n],!0)}function c4(e,t){const n=[],r={};let i;for(const o of e)i=t(o),i in r||(r[i]=1,n.push(o));return n}function f4(e,t){const n=y4(e),r=y4(t);if(n.length!==r.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function d4(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function h4(e,t){for(const n of e)if(t.has(n))return!0;return!1}function p4(e){const t=new Set;for(const n of e){const e=RC(n).map(((e,t)=>0===t?e:`[${e}]`)),r=e.map(((t,n)=>e.slice(0,n+1).join("")));for(const e of r)t.add(e)}return t}function m4(e,t){return void 0===e||void 0===t||h4(p4(e),p4(t))}function g4(e){return 0===y4(e).length}n(I6,"stringify",(function(){return n4})),n(I6,"hash",(function(){return r4})),n(I6,"isNullOrFalse",(function(){return i4})),n(I6,"contains",(function(){return o4})),n(I6,"some",(function(){return a4})),n(I6,"every",(function(){return s4})),n(I6,"mergeDeep",(function(){return u4})),n(I6,"unique",(function(){return c4})),n(I6,"isEqual",(function(){return f4})),n(I6,"setEqual",(function(){return d4})),n(I6,"hasIntersection",(function(){return h4})),n(I6,"prefixGenerator",(function(){return p4})),n(I6,"fieldIntersection",(function(){return m4})),n(I6,"isEmpty",(function(){return g4}));const y4=Object.keys;n(I6,"keys",(function(){return y4}));const v4=Object.values;n(I6,"vals",(function(){return v4}));const b4=Object.entries;function x4(e){return!0===e||!1===e}function w4(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function _4(e,t){return X6(e)?`!(${_4(e.not,t)})`:Y6(e)?`(${e.and.map((e=>_4(e,t))).join(") && (")})`:G6(e)?`(${e.or.map((e=>_4(e,t))).join(") || (")})`:t(e)}function k4(e,t){if(0===t.length)return!0;const n=t.shift();return n in e&&k4(e[n],t)&&delete e[n],g4(e)}function E4(e){return e.charAt(0).toUpperCase()+e.substr(1)}function S4(e,t="datum"){const n=RC(e),r=[];for(let e=1;e<=n.length;e++){const i=`[${n.slice(0,e).map(QD).join("][")}]`;r.push(`${t}${i}`)}return r.join(" && ")}function A4(e,t="datum"){return`${t}[${QD(RC(e).join("."))}]`}function C4(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function D4(e){return`${RC(e).map(C4).join("\\.")}`}function M4(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function F4(e){return`${RC(e).join(".")}`}function N4(e){return e?RC(e).length:0}function O4(...e){for(const t of e)if(void 0!==t)return t}n(I6,"entries",(function(){return b4})),n(I6,"isBoolean",(function(){return x4})),n(I6,"varName",(function(){return w4})),n(I6,"logicalExpr",(function(){return _4})),n(I6,"deleteNestedProperty",(function(){return k4})),n(I6,"titleCase",(function(){return E4})),n(I6,"accessPathWithDatum",(function(){return S4})),n(I6,"flatAccessWithDatum",(function(){return A4})),n(I6,"replacePathInField",(function(){return D4})),n(I6,"replaceAll",(function(){return M4})),n(I6,"removePathFromField",(function(){return F4})),n(I6,"accessPathDepth",(function(){return N4})),n(I6,"getFirstDefined",(function(){return O4}));let T4=42;function $4(e){const t=++T4;return e?String(e)+t:t}function z4(){T4=42}function R4(e){return P4(e)?e:`__${e}`}function P4(e){return e.startsWith("__")}function L4(e){if(void 0!==e)return(e%360+360)%360}function B4(e){return!!ID(e)||!isNaN(e)&&!isNaN(parseFloat(e))}n(I6,"uniqueId",(function(){return $4})),n(I6,"resetIdCounter",(function(){return z4})),n(I6,"internalField",(function(){return R4})),n(I6,"isInternalField",(function(){return P4})),n(I6,"normalizeAngle",(function(){return L4})),n(I6,"isNumeric",(function(){return B4}));const I4="row",j4="column",U4="facet",q4="x",W4="y",H4="x2",V4="y2",G4="radius",Y4="radius2",X4="theta",Q4="theta2",J4="latitude",K4="longitude",Z4="latitude2",e8="longitude2",t8="color",n8="fill",r8="stroke",i8="shape",o8="size",a8="angle",s8="opacity",u8="fillOpacity",l8="strokeOpacity",c8="strokeWidth",f8="strokeDash",d8="text",h8="order",p8="detail",m8="key",g8="tooltip",y8="href",v8="url",b8="description",x8={theta:1,theta2:1,radius:1,radius2:1};function w8(e){return e in x8}const _8={longitude:1,longitude2:1,latitude:1,latitude2:1};const k8=y4(_8),E8={x:1,y:1,x2:1,y2:1,...x8,..._8,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function S8(e){return e===t8||e===n8||e===r8}const A8={row:1,column:1,facet:1},C8=y4(A8),D8={...E8,...A8},M8=y4(D8),{order:F8,detail:N8,tooltip:O8,...T8}=D8,{row:$8,column:z8,facet:R8,...P8}=T8;y4(T8),y4(P8);function L8(e){return!!D8[e]}const B8=[H4,V4,Z4,e8,Q4,Y4];function I8(e){return j8(e)!==e}function j8(e){switch(e){case H4:return q4;case V4:return W4;case Z4:return J4;case e8:return K4;case Q4:return X4;case Y4:return G4}return e}function U8(e){if(w8(e))switch(e){case X4:return"startAngle";case Q4:return"endAngle";case G4:return"outerRadius";case Y4:return"innerRadius"}return e}function q8(e){switch(e){case q4:return H4;case W4:return V4;case J4:return Z4;case K4:return e8;case X4:return Q4;case G4:return Y4}}function W8(e){switch(e){case q4:case H4:return"width";case W4:case V4:return"height"}}y4(E8);const{x:H8,y:V8,x2:G8,y2:Y8,latitude:X8,longitude:Q8,latitude2:J8,longitude2:K8,theta:Z8,theta2:e9,radius:t9,radius2:n9,...r9}=E8,i9=y4(r9),o9={x:1,y:1},a9=y4(o9);function s9(e){return e in o9}const u9={theta:1,radius:1},l9=y4(u9);function c9(e){return"width"===e?q4:W4}const{text:f9,tooltip:d9,href:h9,url:p9,description:m9,detail:g9,key:y9,order:v9,...b9}=r9,x9=y4(b9);const w9={...o9,...u9,...b9},_9=y4(w9);function k9(e){return!!w9[e]}function E9(e,t){return function(e){switch(e){case t8:case n8:case r8:case b8:case p8:case m8:case g8:case y8:case h8:case s8:case u8:case l8:case c8:case U4:case I4:case j4:return S9;case q4:case W4:case J4:case K4:return C9;case H4:case V4:case Z4:case e8:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case o8:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case f8:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case i8:return{point:"always",geoshape:"always"};case d8:return{text:"always"};case a8:return{point:"always",square:"always",text:"always"};case v8:return{image:"always"};case X4:case G4:return{text:"always",arc:"always"};case Q4:case Y4:return{arc:"always"}}}(e)[t]}const S9={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:A9,...C9}=S9;function D9(e){switch(e){case q4:case W4:case X4:case G4:case o8:case a8:case c8:case s8:case u8:case l8:case H4:case V4:case Q4:case Y4:return;case U4:case I4:case j4:case i8:case f8:case d8:case g8:case y8:case v8:case b8:return"discrete";case t8:case n8:case r8:return"flexible";case J4:case K4:case Z4:case e8:case p8:case m8:case h8:return}}const M9={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},F9={count:1,min:1,max:1};function N9(e){return!!e&&!!e.argmin}function O9(e){return!!e&&!!e.argmax}y4(M9);function T9(e){return UD(e)&&!!M9[e]}const $9=["count","valid","missing","distinct"];function z9(e){return UD(e)&&o4($9,e)}const R9=["count","sum","distinct","valid","missing"],P9=tM(["mean","average","median","q1","q3","min","max"]);function L9(e){return PD(e)&&(e=Ore(e,void 0)),"bin"+y4(e).map((t=>U9(e[t])?w4(`_${t}_${b4(e[t])}`):w4(`_${t}_${e[t]}`))).join("")}function B9(e){return!0===e||j9(e)&&!e.binned}function I9(e){return"binned"===e||j9(e)&&!0===e.binned}function j9(e){return GC(e)}function U9(e){return e?.param}function q9(e){switch(e){case I4:case j4:case o8:case t8:case n8:case r8:case c8:case s8:case u8:case l8:case i8:return 6;case f8:return 4;default:return 10}}function W9(e){return e&&!!e.expr}function H9(e){const t=y4(e||{}),n={};for(const r of t)n[r]=t7(e[r]);return n}function V9(e){const{anchor:t,frame:n,offset:r,orient:i,color:o,subtitleColor:a,subtitleFont:s,subtitleFontSize:u,subtitleFontStyle:l,subtitleFontWeight:c,subtitleLineHeight:f,subtitlePadding:d,...h}=e,p={...h,...o?{fill:o}:{}},m={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{}},g={...a?{subtitleColor:a}:{},...s?{subtitleFont:s}:{},...u?{subtitleFontSize:u}:{},...l?{subtitleFontStyle:l}:{},...c?{subtitleFontWeight:c}:{},...f?{subtitleLineHeight:f}:{},...d?{subtitlePadding:d}:{}};return{titleMarkConfig:p,subtitleMarkConfig:e4(p,["align","baseline","dx","dy","limit"]),nonMark:m,subtitle:g}}function G9(e){return UD(e)||VC(e)&&UD(e[0])}function Y9(e){return e&&!!e.signal}function X9(e){return!!e.step}function Q9(e){return!VC(e)&&("field"in e&&"data"in e)}const J9=y4({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),K9={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},Z9=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function e7(e){const t=VC(e.condition)?e.condition.map(n7):n7(e.condition);return{...t7(e),condition:t}}function t7(e){if(W9(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function n7(e){if(W9(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function r7(e){if(W9(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Y9(e)?e:void 0!==e?{value:e}:void 0}function i7(e){return Y9(e)?e.signal:QD(e.value)}function o7(e){return Y9(e)?e.signal:null==e?null:QD(e)}function a7(e,t,n){for(const r of n){const n=l7(r,t.markDef,t.config);void 0!==n&&(e[r]=r7(n))}return e}function s7(e){return[].concat(e.type,e.style??[])}function u7(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&void 0!==t[i]?t[i]:void 0!==t[e]?t[e]:!o||i&&i!==e?l7(e,t,n,r):void 0}function l7(e,t,n,{vgChannel:r}={}){return O4(r?c7(e,t,n.style):void 0,c7(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function c7(e,t,n){return f7(e,s7(t),n)}function f7(e,t,n){let r;t=yD(t);for(const i of t){const t=n[i];t&&void 0!==t[e]&&(r=t[e])}return r}function d7(e,t){return yD(e).reduce(((e,n)=>(e.field.push(vre(n,t)),e.order.push(n.sort??"ascending"),e)),{field:[],order:[]})}function h7(e,t){const n=[...e];return t.forEach((e=>{for(const t of n)if(K6(t,e))return;n.push(e)})),n}function p7(e,t){return K6(e,t)||!t?e:e?[...yD(e),...yD(t)].join(", "):t}function m7(e,t){const n=e.value,r=t.value;if(null==n||null===r)return{explicit:e.explicit,value:null};if((G9(n)||Y9(n))&&(G9(r)||Y9(r)))return{explicit:e.explicit,value:p7(n,r)};if(G9(n)||Y9(n))return{explicit:e.explicit,value:n};if(G9(r)||Y9(r))return{explicit:e.explicit,value:r};if(!(G9(n)||Y9(n)||G9(r)||Y9(r)))return{explicit:e.explicit,value:h7(n,r)};throw new Error("It should never reach here")}var g7={},y7={};function v7(e){return`Invalid specification ${n4(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}n(y7,"invalidSpec",(function(){return v7}));function b7(e){return`${"width"==e?"Width":"Height"} "container" only works for single views and layered views.`}function x7(e){return`${"width"==e?"Width":"Height"} "container" only works well with autosize "fit" or "fit-${"width"==e?"x":"y"}".`}function w7(e){return e?`Dropping "fit-${e}" because spec has discrete ${W8(e)}.`:'Dropping "fit" because spec has discrete size.'}function _7(e){return`Unknown field for ${e}. Cannot calculate view size.`}function k7(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function E7(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function S7(e){return`The "nearest" transform is not supported for ${e} marks.`}function A7(e){return`Selection not supported for ${e} yet.`}function C7(e){return`Cannot find a selection named "${e}".`}n(y7,"FIT_NON_SINGLE",(function(){return'Autosize "fit" only works for single views and layered views.'})),n(y7,"containerSizeNonSingle",(function(){return b7})),n(y7,"containerSizeNotCompatibleWithAutosize",(function(){return x7})),n(y7,"droppingFit",(function(){return w7})),n(y7,"unknownField",(function(){return _7})),n(y7,"cannotProjectOnChannelWithoutField",(function(){return k7})),n(y7,"cannotProjectAggregate",(function(){return E7})),n(y7,"nearestNotSupportForContinuous",(function(){return S7})),n(y7,"selectionNotSupported",(function(){return A7})),n(y7,"selectionNotFound",(function(){return C7}));n(y7,"SCALE_BINDINGS_CONTINUOUS",(function(){return"Scale bindings are currently only supported for scales with unbinned, continuous domains."}));function D7(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function M7(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}n(y7,"LEGEND_BINDINGS_MUST_HAVE_PROJECTION",(function(){return"Legend bindings are only supported for selections over an individual field or encoding channel."})),n(y7,"cannotLookupVariableParameter",(function(){return D7})),n(y7,"noSameUnitLookup",(function(){return M7}));n(y7,"NEEDS_SAME_SELECTION",(function(){return"The same selection must be used to override scale domains in a layered view."}));function F7(e){return`Unknown repeated value "${e}".`}function N7(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}n(y7,"INTERVAL_INITIALIZED_WITH_X_Y",(function(){return'Interval selections should be initialized using "x" and/or "y" keys.'})),n(y7,"noSuchRepeatedValue",(function(){return F7})),n(y7,"columnsNotSupportByRowCol",(function(){return N7}));function O7(e){return`Unrecognized parse "${e}".`}function T7(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}n(y7,"CONCAT_CANNOT_SHARE_AXIS",(function(){return"Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415)."})),n(y7,"unrecognizedParse",(function(){return O7})),n(y7,"differentParse",(function(){return T7}));function $7(e){return`Ignoring an invalid transform: ${n4(e)}.`}n(y7,"ADD_SAME_CHILD_TWICE",(function(){return"Attempt to add the same child twice."})),n(y7,"invalidTransformIgnored",(function(){return $7}));function z7(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function R7(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${n4(t)} is overridden by a child projection ${n4(n)}.`}n(y7,"NO_FIELDS_NEEDS_AS",(function(){return'If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'})),n(y7,"customFormatTypeNotAllowed",(function(){return z7})),n(y7,"projectionOverridden",(function(){return R7}));function P7(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${n4(n)}}.`}function L7(e){return`Invalid field type "${e}".`}function B7(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function I7(e){return`Invalid aggregation operator "${e}".`}function j7(e,t){return`Missing type for channel "${e}", using "${t}" instead.`}function U7(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function q7(e){return`Position range does not support relative band size for ${e}.`}function W7(e,t){return`Dropping ${n4(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}n(y7,"REPLACE_ANGLE_WITH_THETA",(function(){return"Arc marks uses theta channel rather than angle, replacing angle with theta."})),n(y7,"primitiveChannelDef",(function(){return P7})),n(y7,"invalidFieldType",(function(){return L7})),n(y7,"invalidFieldTypeForCountAggregate",(function(){return B7})),n(y7,"invalidAggregate",(function(){return I7})),n(y7,"missingFieldType",(function(){return j7})),n(y7,"droppingColor",(function(){return U7})),n(y7,"relativeBandSizeNotSupported",(function(){return q7})),n(y7,"emptyFieldDef",(function(){return W7}));function H7(e,t,n){return`${e} dropped as it is incompatible with "${t}"${n?` when ${n}`:""}.`}function V7(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function G7(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Y7(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function X7(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Q7(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${"ordinal"===t?"order":"magnitude"}.`}function J7(e){return`The ${e} for range marks cannot be an expression`}function K7(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Z7(e,t){return`Specified orient "${e}" overridden with "${t}".`}n(y7,"LINE_WITH_VARYING_SIZE",(function(){return"Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."})),n(y7,"incompatibleChannel",(function(){return H7})),n(y7,"invalidEncodingChannel",(function(){return V7})),n(y7,"channelShouldBeDiscrete",(function(){return G7})),n(y7,"channelShouldBeDiscreteOrDiscretizing",(function(){return Y7})),n(y7,"facetChannelDropped",(function(){return X7})),n(y7,"discreteChannelCannotEncode",(function(){return Q7})),n(y7,"rangeMarkAlignmentCannotBeExpression",(function(){return J7})),n(y7,"lineWithRange",(function(){return K7})),n(y7,"orientOverridden",(function(){return Z7}));function eee(e){return`Cannot use the scale property "${e}" with non-color channel.`}function tee(e){return`Cannot use the relative band size with ${e} scale.`}function nee(e){return`Using unaggregated domain with raw field has no effect (${n4(e)}).`}function ree(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function iee(e){return`Unaggregated domain is currently unsupported for log scale (${n4(e)}).`}function oee(e){return`Cannot apply size to non-oriented mark "${e}".`}function aee(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function see(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function uee(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function lee(e,t){return`Scale type "${t}" does not work with mark "${e}".`}function cee(e){return`The step for "${e}" is dropped because the ${"width"===e?"x":"y"} is continuous.`}function fee(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${n4(n)} and ${n4(r)}). Using ${n4(n)}.`}function dee(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${n4(n)} and ${n4(r)}). Using the union of the two domains.`}function hee(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function pee(e){return`Dropping sort property ${n4(e)} as unioned domains only support boolean or op "count", "min", and "max".`}n(y7,"CANNOT_UNION_CUSTOM_DOMAIN_WITH_FIELD_DOMAIN",(function(){return"Custom domain scale cannot be unioned with default field-based domain."})),n(y7,"cannotUseScalePropertyWithNonColor",(function(){return eee})),n(y7,"cannotUseRelativeBandSizeWithNonBandScale",(function(){return tee})),n(y7,"unaggregateDomainHasNoEffectForRawField",(function(){return nee})),n(y7,"unaggregateDomainWithNonSharedDomainOp",(function(){return ree})),n(y7,"unaggregatedDomainWithLogScale",(function(){return iee})),n(y7,"cannotApplySizeToNonOrientedMark",(function(){return oee})),n(y7,"scaleTypeNotWorkWithChannel",(function(){return aee})),n(y7,"scaleTypeNotWorkWithFieldDef",(function(){return see})),n(y7,"scalePropertyNotWorkWithScaleType",(function(){return uee})),n(y7,"scaleTypeNotWorkWithMark",(function(){return lee})),n(y7,"stepDropped",(function(){return cee})),n(y7,"mergeConflictingProperty",(function(){return fee})),n(y7,"mergeConflictingDomainProperty",(function(){return dee})),n(y7,"independentScaleMeansIndependentGuide",(function(){return hee})),n(y7,"domainSortDropped",(function(){return pee}));n(y7,"MORE_THAN_ONE_SORT",(function(){return"Domains that should be unioned has conflicting sort properties. Sort will be set to true."}));n(y7,"FACETED_INDEPENDENT_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."}));n(y7,"FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES",(function(){return"Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect."}));n(y7,"FACETED_INDEPENDENT_SAME_SOURCE",(function(){return"Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."}));function mee(e){return`Cannot stack "${e}" if there is already "${e}2".`}function gee(e){return`Cannot stack non-linear scale (${e}).`}function yee(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function vee(e,t){return`Invalid ${e}: ${n4(t)}.`}function bee(e){return`Dropping day from datetime ${n4(e)} as day cannot be combined with other units.`}function xee(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function wee(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function _ee(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function kee(e){return`1D error band does not support ${e}.`}function Eee(e){return`Channel ${e} is required for "binned" bin.`}function See(e){return`Channel ${e} should not be used with "binned" bin.`}function Aee(e){return`Domain for ${e} is required for threshold scale.`}n(y7,"INVALID_CHANNEL_FOR_AXIS",(function(){return"Invalid channel for axis."})),n(y7,"cannotStackRangedMark",(function(){return mee})),n(y7,"cannotStackNonLinearScale",(function(){return gee})),n(y7,"stackNonSummativeAggregate",(function(){return yee})),n(y7,"invalidTimeUnit",(function(){return vee})),n(y7,"droppedDay",(function(){return bee})),n(y7,"errorBarCenterAndExtentAreNotNeeded",(function(){return xee})),n(y7,"errorBarCenterIsUsedWithWrongExtent",(function(){return wee})),n(y7,"errorBarContinuousAxisHasCustomizedAggregate",(function(){return _ee})),n(y7,"errorBand1DNotSupport",(function(){return kee})),n(y7,"channelRequiredForBinned",(function(){return Eee})),n(y7,"channelShouldNotBeUsedForBinned",(function(){return See})),n(y7,"domainRequiredForThresholdScale",(function(){return Aee}));n(g7,"message",(function(){return y7}));const Cee=HC(2);let Dee=Cee;function Mee(e){return Dee=e,Dee}function Fee(){return Dee=Cee,Dee}function Nee(...e){Dee.warn(...e)}function Oee(...e){Dee.debug(...e)}function Tee(e){if(e&&GC(e))for(const t of jee)if(t in e)return!0;return!1}new WeakMap,n(g7,"set",(function(){return Mee})),n(g7,"reset",(function(){return Fee})),n(g7,"warn",(function(){return Nee})),n(g7,"debug",(function(){return Oee}));const $ee=["january","february","march","april","may","june","july","august","september","october","november","december"],zee=$ee.map((e=>e.substr(0,3))),Ree=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Pee=Ree.map((e=>e.substr(0,3)));function Lee(e,t){const n=[];if(t&&void 0!==e.day&&y4(e).length>1&&(g7.warn(y7.droppedDay(e)),delete(e=Z6(e)).day),void 0!==e.year?n.push(e.year):n.push(2012),void 0!==e.month){const r=t?function(e){if(B4(e)&&(e=+e),ID(e))return e-1;{const t=e.toLowerCase(),n=$ee.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=zee.indexOf(r);if(-1!==i)return i;throw new Error(y7.invalidTimeUnit("month",e))}}(e.month):e.month;n.push(r)}else if(void 0!==e.quarter){const r=t?function(e){if(B4(e)&&(e=+e),ID(e))return e>4&&g7.warn(y7.invalidTimeUnit("quarter",e)),e-1;throw new Error(y7.invalidTimeUnit("quarter",e))}(e.quarter):e.quarter;n.push(ID(r)?3*r:`${r}*3`)}else n.push(0);if(void 0!==e.date)n.push(e.date);else if(void 0!==e.day){const r=t?function(e){if(B4(e)&&(e=+e),ID(e))return e%7;{const t=e.toLowerCase(),n=Ree.indexOf(t);if(-1!==n)return n;const r=t.substr(0,3),i=Pee.indexOf(r);if(-1!==i)return i;throw new Error(y7.invalidTimeUnit("day",e))}}(e.day):e.day;n.push(ID(r)?r+1:`${r}+1`)}else n.push(1);for(const t of["hours","minutes","seconds","milliseconds"]){const r=e[t];n.push(void 0===r?0:r)}return n}function Bee(e){const t=Lee(e,!0).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}const Iee={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},jee=y4(Iee);function Uee(e){return e.startsWith("utc")}const qee={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function Wee(e){return jee.filter((t=>Hee(e,t)))}function Hee(e,t){const n=e.indexOf(t);return!(n<0)&&(!(n>0&&"seconds"===t&&"i"===e.charAt(n-1))&&(!(e.length>n+3&&"day"===t&&"o"===e.charAt(n+3))&&!(n>0&&"year"===t&&"f"===e.charAt(n-1))))}function Vee(e,t,{end:n}={end:!1}){const r=S4(t),i=Uee(e)?"utc":"";let o;const a={};for(const t of jee)Hee(e,t)&&(a[t]="quarter"===(s=t)?`(${i}quarter(${r})-1)`:`${i}${s}(${r})`,o=t);var s;return n&&(a[o]+="+1"),function(e){const t=Lee(e,!1).join(", ");return e.utc?`utc(${t})`:`datetime(${t})`}(a)}function Gee(e){if(!e)return;const t=Wee(e);return`timeUnitSpecifier(${n4(t)}, ${n4(qee)})`}function Yee(e){if(!e)return;let t;return UD(e)?t={unit:e}:GC(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Uee(t.unit)&&(t.utc=!0,t.unit=t.unit.substr(3)),t}function Xee(e){return e&&!!e.field&&void 0!==e.equal}function Qee(e){return e&&!!e.field&&void 0!==e.lt}function Jee(e){return e&&!!e.field&&void 0!==e.lte}function Kee(e){return e&&!!e.field&&void 0!==e.gt}function Zee(e){return e&&!!e.field&&void 0!==e.gte}function ete(e){if(e&&e.field){if(VC(e.range)&&2===e.range.length)return!0;if(Y9(e.range))return!0}return!1}function tte(e){return e&&!!e.field&&(VC(e.oneOf)||VC(e.in))}function nte(e){return tte(e)||Xee(e)||ete(e)||Qee(e)||Kee(e)||Jee(e)||Zee(e)}function rte(e,t){return zre(e,{timeUnit:t,wrapTime:!0})}function ite(e,t=!0){const{field:n}=e,r=Yee(e.timeUnit)?.unit,i=r?`time(${Vee(r,n)})`:vre(e,{expr:"datum"});if(Xee(e))return`${i}===${rte(e.equal,r)}`;if(Qee(e)){return`${i}<${rte(e.lt,r)}`}if(Kee(e)){return`${i}>${rte(e.gt,r)}`}if(Jee(e)){return`${i}<=${rte(e.lte,r)}`}if(Zee(e)){return`${i}>=${rte(e.gte,r)}`}if(tte(e))return`indexof([${function(e,t){return e.map((e=>rte(e,t)))}(e.oneOf,r).join(",")}], ${i}) !== -1`;if(function(e){return e&&!!e.field&&void 0!==e.valid}(e))return ote(i,e.valid);if(ete(e)){const{range:n}=e,o=Y9(n)?{signal:`${n.signal}[0]`}:n[0],a=Y9(n)?{signal:`${n.signal}[1]`}:n[1];if(null!==o&&null!==a&&t)return"inrange("+i+", ["+rte(o,r)+", "+rte(a,r)+"])";const s=[];return null!==o&&s.push(`${i} >= ${rte(o,r)}`),null!==a&&s.push(`${i} <= ${rte(a,r)}`),s.length>0?s.join(" && "):"true"}throw new Error(`Invalid field predicate: ${n4(e)}`)}function ote(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function ate(e){return nte(e)&&e.timeUnit?{...e,timeUnit:Yee(e.timeUnit)?.unit}:e}const ste={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"},ute=ste.quantitative,lte=ste.ordinal,cte=ste.temporal,fte=ste.nominal,dte=ste.geojson;y4(ste);const hte="linear",pte="log",mte="pow",gte="sqrt",yte="symlog",vte="time",bte="utc",xte="quantile",wte="quantize",_te="threshold",kte="point",Ete="band",Ste={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};y4(Ste);function Ate(e,t){const n=Ste[e],r=Ste[t];return n===r||"ordinal-position"===n&&"time"===r||"ordinal-position"===r&&"time"===n}const Cte={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function Dte(e){return Cte[e]}const Mte=["linear","log","pow","sqrt","symlog","time","utc"],Fte=tM(Mte),Nte=tM(["linear","log","pow","sqrt","symlog"]);const Ote=tM(["quantile","quantize","threshold"]),Tte=tM(Mte.concat(["quantile","quantize","threshold","sequential","identity"])),$te=tM(["ordinal","bin-ordinal","point","band"]);function zte(e){return e in $te}function Rte(e){return e in Tte}function Pte(e){return e in Fte}function Lte(e){return e in Ote}function Bte(e){return e?.param}const Ite={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:jte,domain:Ute,range:qte,rangeMax:Wte,rangeMin:Hte,scheme:Vte,...Gte}=(y4(Ite),Ite),Yte=y4(Gte);function Xte(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Pte(e)||"band"===e||"point"===e;case"padding":case"rangeMin":case"rangeMax":return Pte(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return"band"===e;case"domainMax":case"domainMid":case"domainMin":case"clamp":return Pte(e);case"nice":return Pte(e)||"quantize"===e||"threshold"===e;case"exponent":return"pow"===e;case"base":return"log"===e;case"constant":return"symlog"===e;case"zero":return Rte(e)&&!o4(["log","time","utc","threshold","quantile"],e)}}function Qte(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return S8(e)?void 0:y7.cannotUseScalePropertyWithNonColor(e);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}const Jte={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Kte=Jte.arc,Zte=Jte.area,ene=Jte.bar,tne=Jte.image,nne=Jte.line,rne=Jte.point,ine=Jte.rect,one=Jte.rule,ane=Jte.text,sne=Jte.tick,une=Jte.trail,lne=Jte.circle,cne=Jte.square,fne=Jte.geoshape;function dne(e){return["line","area","trail"].includes(e)}function hne(e){return["rect","bar","image","arc"].includes(e)}const pne=y4(Jte);function mne(e){return e.type}tM(pne);const gne=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit","fill","fillOpacity"],yne=y4({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1}),vne=y4({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1});function bne(e){return e&&null!=e.band}const xne={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},wne={binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},_ne={binSpacing:0,continuousBandSize:5,timeUnitBandPosition:.5};function kne(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:o}=e,a=Mne(e);return ore(n)&&!z9(n.aggregate)&&i&&Pte(i.get("type"))&&!1===i.get("zero")?Ene({fieldDef:n,channel:t,markDef:r,ref:a,config:o}):a}function Ene({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){if(dne(n.type))return r;return null===u7("invalid",n,i)?r:[Sne(e,t),r]}function Sne(e,t){return{test:Ane(e,!0),..."y"===j8(t)?{field:{group:"height"}}:{value:0}}}function Ane(e,t=!0){return ote(UD(e)?e:vre(e,{expr:"datum"}),!t)}function Cne(e,t,n,r){const i={};if(t&&(i.scale=t),sre(e)){const{datum:t}=e;Tee(t)?i.signal=Bee(t):Y9(t)?i.signal=t.signal:W9(t)?i.signal=t.expr:i.value=t}else i.field=vre(e,n);if(r){const{offset:e,band:t}=r;e&&(i.offset=e),t&&(i.band=t)}return i}function Dne({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,bandPosition:o=.5}){const a=0<o&&o<1?"datum":void 0,s=vre(t,{expr:a,suffix:i}),u=void 0!==n?vre(n,{expr:a}):vre(t,{suffix:"end",expr:a}),l={};if(0===o||1===o){l.scale=e;const t=0===o?s:u;l.field=t}else{const t=Y9(o)?`${o.signal} * ${s} + (1-${o.signal}) * ${u}`:`${o} * ${s} + ${1-o} * ${u}`;l.signal=`scale("${e}", ${t})`}return r&&(l.offset=r),l}function Mne({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cre(t)){if(fre(t)){c??(c=Zne({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:a,timeUnit:l,type:f}=t;if(B9(a)||c&&l&&f===cte)return s&&s.impute?Cne(t,o,{binSuffix:"mid"},{offset:u}):c?Dne({scaleName:o,fieldOrDatumDef:t,bandPosition:c,offset:u}):Cne(t,o,Pre(t,e)?{binSuffix:"range"}:{},{offset:u});if(I9(a)){if(ore(n))return Dne({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});{const t=e===q4?H4:V4;g7.warn(y7.channelRequiredForBinned(t))}}}const l=a?.get?.("type");return Cne(t,o,zte(l)?{binSuffix:"range"}:{},{offset:u,band:"band"===l?c??t.bandPosition??.5:void 0})}if(dre(t)){const n=u?{offset:u}:{};return{...Fne(e,t.value),...n}}}return bD(l)&&(l=l()),l?{...l,...u?{offset:u}:{}}:l}function Fne(e,t){return o4(["x","x2"],e)&&"width"===t?{field:{group:"width"}}:o4(["y","y2"],e)&&"height"===t?{field:{group:"height"}}:r7(t)}function Nne(e){return e&&"number"!==e&&"time"!==e}function One(e,t,n){return`${e}(${t}${n?`, ${n4(n)}`:""})`}function Tne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(Nne(n))return zne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=$ne(e,r,i);if($re(e)){const n=function(e,t,n,r,i){return!t||n?`${i?"utc":"time"}Format(${e}, '${n=UD(n)?n:r}')`:function(e,t,n){if(!e)return;const r=Gee(e);return`${n||Uee(e)?"utc":"time"}Format(${t}, ${r})`}(t,e,i)}(a,ore(e)?Yee(e.timeUnit)?.unit:void 0,t,o.timeFormat,hre(e)&&e.scale?.type===bte);return n?{signal:n}:void 0}if(t=Lne(are(e),t,o),ore(e)&&B9(e.bin)){return{signal:jne(a,vre(e,{expr:r,binSuffix:"end"}),t,n,o)}}return t||"quantitative"===are(e)?{signal:`${Bne(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function $ne(e,t,n){return ore(e)?n?`${vre(e,{expr:t,suffix:"end"})}-${vre(e,{expr:t,suffix:"start"})}`:vre(e,{expr:t}):function(e){const{datum:t}=e;return Tee(t)?Bee(t):`${n4(t)}`}(e)}function zne({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??(a=$ne(e,r,i)),ore(e)&&B9(e.bin)){return{signal:jne(a,vre(e,{expr:r,binSuffix:"end"}),t,n,o)}}return{signal:One(n,a,t)}}function Rne(e,t,n,r,i,o){if(!Nne(r)){if($re(e)){return function(e,t,n,r){if(e)return e;if(t)return{signal:Gee(t)};return r?void 0:n.timeFormat}(n,ore(e)?Yee(e.timeUnit)?.unit:void 0,i,o)}return Lne(t,n,i)}}function Pne(e,t,n){return e&&(Y9(e)||"number"===e||"time"===e)?e:$re(t)&&"time"!==n&&"utc"!==n?"time":void 0}function Lne(e,t,n){return UD(t)?t:e===ute?n.numberFormat:void 0}function Bne(e,t){return`format(${e}, "${t||""}")`}function Ine(e,t,n,r){return Nne(n)?One(n,e,t):Bne(e,(UD(t)?t:void 0)??r.numberFormat)}function jne(e,t,n,r,i){const o=Ine(e,n,r,i),a=Ine(t,n,r,i);return`${ote(e,!1)} ? "null" : ${o} + " – " + ${a}`}const Une="min",qne={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Wne(e){return e in qne}function Hne(e){return!!e&&!!e.encoding}function Vne(e){return!(!e||"count"!==e.op&&!e.field)}function Gne(e){return!!e&&VC(e)}function Yne(e){return"row"in e||"column"in e}function Xne(e){return!!e&&"header"in e}function Qne(e){return"facet"in e}function Jne(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function Kne(e){return"sort"in e}function Zne({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cre(e)&&void 0!==e.bandPosition)return e.bandPosition;if(ore(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return hne(n.type)?0:l7("timeUnitBandPosition",n,r);if(B9(o))return.5}}function ere({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=W8(e),u=u7(a?"size":s,r,i,{vgChannel:s});if(void 0!==u)return u;if(ore(t)){const{timeUnit:e,bin:a}=t;if(e&&!n)return{band:l7("timeUnitBandSize",r,i)};if(B9(a)&&!zte(o))return{band:1}}return hne(r.type)?o?zte(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize:void 0}function tre(e,t,n,r){return!!(B9(e.bin)||e.timeUnit&&fre(e)&&"temporal"===e.type)&&void 0!==Zne({fieldDef:e,fieldDef2:t,markDef:n,config:r})}function nre(e){return!!e&&"condition"in e}function rre(e){const t=e&&e.condition;return!!t&&!VC(t)&&ore(t)}function ire(e){const t=e&&e.condition;return!!t&&!VC(t)&&cre(t)}function ore(e){return!(!e||!e.field&&"count"!==e.aggregate)}function are(e){return e&&e.type}function sre(e){return!!e&&"datum"in e}function ure(e){return fre(e)&&!bre(e)||lre(e)}function lre(e){return sre(e)&&ID(e.datum)}function cre(e){return ore(e)||sre(e)}function fre(e){return!!e&&("field"in e||"count"===e.aggregate)&&"type"in e}function dre(e){return e&&"value"in e&&"value"in e}function hre(e){return!!e&&("scale"in e||"sort"in e)}function pre(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function mre(e){return!!e&&"legend"in e}function gre(e){return!!e&&("format"in e||"formatType"in e)}function yre(e){return t4(e,["legend","axis","header","scale"])}function vre(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(function(e){return"count"===e.aggregate}(e))n=R4("count");else{let r;if(!t.nofn)if(function(e){return"op"in e}(e))r=e.op;else{const{bin:a,aggregate:s,timeUnit:u}=e;B9(a)?(r=L9(a),i=(t.binSuffix??"")+(t.suffix??"")):s?O9(s)?(o=`["${n}"]`,n=`argmax_${s.argmax}`):N9(s)?(o=`["${n}"]`,n=`argmin_${s.argmin}`):r=String(s):u&&(r=function(e){const{utc:t,...n}=Yee(e);return n.unit?(t?"utc":"")+y4(n).map((e=>w4(`${"unit"===e?"":`_${e}_`}${n[e]}`))).join(""):(t?"utc":"")+"timeunit"+y4(n).map((e=>w4(`_${e}_${n[e]}`))).join("")}(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}r&&(n=n?`${r}_${n}`:r)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?F4(n):t.expr?A4(n,t.expr)+o:D4(n)+o}function bre(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ore(e)&&!!e.bin;case"temporal":return!1}throw new Error(y7.invalidFieldType(e.type))}const xre=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return function(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(O9(t))return`${i} for argmax(${t.argmax})`;if(N9(t))return`${i} for argmin(${t.argmin})`;const o=Yee(r),a=t||o?.unit||o?.maxbins&&"timeunit"||B9(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}(e);default:return function(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if("count"===o)return t.countTitle;if(B9(r))return`${n} (binned)`;if(i){const e=Yee(i)?.unit;if(e)return`${n} (${Wee(e).join("-")})`}else if(o)return O9(o)?`${n} for max ${o.argmax}`:N9(o)?`${n} for min ${o.argmin}`:`${E4(o)} of ${n}`;return n}(e,t)}};let wre=xre;function _re(e){wre=e}function kre(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=Ere(e)?.title;if(!ore(e))return i;const o=e,a=r?Sre(o,t):void 0;return n?O4(i,o.title,a):i??o.title??a}function Ere(e){return pre(e)&&e.axis?e.axis:mre(e)&&e.legend?e.legend:Xne(e)&&e.header?e.header:void 0}function Sre(e,t){return wre(e,t)}function Are(e){if(gre(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}{const t=Ere(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function Cre(e){return ore(e)?e:rre(e)?e.condition:void 0}function Dre(e){return cre(e)?e:ire(e)?e.condition:void 0}function Mre(e,t,n,r={}){if(UD(e)||ID(e)||PD(e)){const n=UD(e)?"string":ID(e)?"number":"boolean";return g7.warn(y7.primitiveChannelDef(t,n,e)),{value:e}}return cre(e)?Fre(e,t,n,r):ire(e)?{...e,condition:Fre(e.condition,t,n,r)}:e}function Fre(e,t,n,r){if(gre(e)){const{format:i,formatType:o,...a}=e;if(Nne(o)&&!n.customFormatTypes)return g7.warn(y7.customFormatTypeNotAllowed(t)),Fre(a,t,n,r)}else{const i=pre(e)?"axis":mre(e)?"legend":Xne(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(Nne(a)&&!n.customFormatTypes)return g7.warn(y7.customFormatTypeNotAllowed(t)),Fre({...e,[i]:s},t,n,r)}}return ore(e)?Nre(e,t,r):function(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ID(n)?"quantitative":UD(n)?"nominal":Tee(n)?"temporal":void 0,{...e,type:t}}(e)}function Nre(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(n||!r||T9(r)||O9(r)||N9(r)||(g7.warn(y7.invalidAggregate(r)),delete s.aggregate),i&&(s.timeUnit=Yee(i)),a&&(s.field=`${a}`),B9(o)&&(s.bin=Ore(o,t)),I9(o)&&!s9(t)&&g7.warn(y7.channelShouldNotBeUsedForBinned(t)),fre(s)){const{type:e}=s,t=function(e){if(e)switch(e=e.toLowerCase()){case"q":case ute:return"quantitative";case"t":case cte:return"temporal";case"o":case lte:return"ordinal";case"n":case fte:return"nominal";case dte:return"geojson"}}(e);e!==t&&(s.type=t),"quantitative"!==e&&z9(r)&&(g7.warn(y7.invalidFieldTypeForCountAggregate(e,r)),s.type="quantitative")}else if(!I8(t)){const e=function(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Kne(e)&&VC(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!O9(n)&&!N9(n))return"quantitative";if(hre(e)&&e.scale?.type)switch(Ste[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}(s,t);s.type=e}if(fre(s)){const{compatible:e,warning:n}=function(e,t){const n=e.type;if("geojson"===n&&"shape"!==t)return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case I4:case j4:case U4:return bre(e)?Tre:{compatible:!1,warning:y7.channelShouldBeDiscrete(t)};case q4:case W4:case t8:case n8:case r8:case d8:case p8:case m8:case g8:case y8:case v8:case a8:case X4:case G4:case b8:return Tre;case K4:case e8:case J4:case Z4:return n!==ute?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Tre;case s8:case u8:case l8:case c8:case o8:case Q4:case Y4:case H4:case V4:return"nominal"!==n||e.sort?Tre:{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`};case i8:case f8:return bre(e)||hre(r=e)&&Lte(r.scale?.type)?Tre:{compatible:!1,warning:y7.channelShouldBeDiscreteOrDiscretizing(t)};case h8:return"nominal"!==e.type||"sort"in e?Tre:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}var r}(s,t)||{};!1===e&&g7.warn(n)}if(Kne(s)&&UD(s.sort)){const{sort:e}=s;if(Wne(e))return{...s,sort:{encoding:e}};const t=e.substr(1);if("-"===e.charAt(0)&&Wne(t))return{...s,sort:{encoding:t,order:"descending"}}}if(Xne(s)){const{header:e}=s;if(e){const{orient:t,...n}=e;if(t)return{...s,header:{...n,labelOrient:e.labelOrient||t,titleOrient:e.titleOrient||t}}}}return s}function Ore(e,t){return PD(e)?{maxbins:q9(t)}:"binned"===e?{binned:!0}:e.maxbins||e.step?e:{...e,maxbins:q9(t)}}const Tre={compatible:!0};function $re(e){const{formatType:t}=Are(e);return"time"===t||!t&&((n=e)&&("temporal"===n.type||ore(n)&&!!n.timeUnit));var n}function zre(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&Yee(t)?.unit;let a,s=o||"temporal"===n;return W9(e)?a=e.expr:Y9(e)?a=e.signal:Tee(e)?(s=!0,a=Bee(e)):(UD(e)||ID(e))&&s&&(a=`datetime(${n4(e)})`,function(e){return!!Iee[e]}(o)&&(ID(e)&&e<1e4||UD(e)&&isNaN(Date.parse(e)))&&(a=Bee({[o]:e}))),a?r&&s?`time(${a})`:a:i?void 0:n4(e)}function Rre(e,t){const{type:n}=e;return t.map((t=>{const r=zre(t,{timeUnit:ore(e)?e.timeUnit:void 0,type:n,undefinedIfExprNotRequired:!0});return void 0!==r?{signal:r}:t}))}function Pre(e,t){return B9(e.bin)?k9(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Lre={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function Bre(e){return e&&e.condition}const Ire=["domain","grid","labels","ticks","title"],jre={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Ure={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},qre={...Ure,style:1,labelExpr:1,encoding:1};function Wre(e){return!!qre[e]}y4(qre);const Hre=y4({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1});function Vre(e){return"mark"in e}class Gre{constructor(e,t){this.name=e,this.run=t}hasMatchingType(e){return!!Vre(e)&&(mne(t=e.mark)?t.type:t)===this.name;var t}}function Yre(e,t){const n=e&&e[t];return!!n&&(VC(n)?a4(n,(e=>!!e.field)):ore(n)||rre(n))}function Xre(e){return a4(M8,(t=>{if(Yre(e,t)){const n=e[t];if(VC(n))return a4(n,(e=>!!e.aggregate));{const e=Cre(n);return e&&!!e.aggregate}}return!1}))}function Qre(e,t){const n=[],r=[],i=[],o=[],a={};return Zre(e,((s,u)=>{if(ore(s)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=s;if(c||d||f){const e=Ere(s),p=e&&e.title;let m=vre(s,{forAs:!0});const g={...p?[]:{title:kre(s,t,{allowDisabling:!0})},...h,field:m};if(c){let e;if(O9(c)?(e="argmax",m=vre({op:"argmax",field:c.argmax},{forAs:!0}),g.field=`${m}.${l}`):N9(c)?(e="argmin",m=vre({op:"argmin",field:c.argmin},{forAs:!0}),g.field=`${m}.${l}`):"boxplot"!==c&&"errorbar"!==c&&"errorband"!==c&&(e=c),e){const t={op:e,as:m};l&&(t.field=l),o.push(t)}}else if(n.push(m),fre(s)&&B9(f)){if(r.push({bin:f,field:l,as:m}),n.push(vre(s,{binSuffix:"end"})),Pre(s,u)&&n.push(vre(s,{binSuffix:"range"})),s9(u)){const e={field:`${m}_end`};a[`${u}2`]=e}g.bin="binned",I8(u)||(g.type=ute)}else if(d){i.push({timeUnit:d,field:l,as:m});const e=fre(s)&&s.type!==cte&&"time";e&&(u===d8||u===g8?g.formatType=e:!function(e){return!!r9[e]}(u)?s9(u)&&(g.axis={formatType:e,...g.axis}):g.legend={formatType:e,...g.legend})}a[u]=g}else n.push(l),a[u]=e[u]}else a[u]=e[u]})),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function Jre(e,t,n,r){return y4(e).reduce(((i,o)=>{if(!L8(o))return g7.warn(y7.invalidEncodingChannel(o)),i;const a=e[o];if("angle"!==o||"arc"!==t||e.theta||(g7.warn(y7.REPLACE_ANGLE_WITH_THETA),o=X4),!function(e,t,n){const r=E9(t,n);if(!r)return!1;if("binned"===r){const n=e[t===H4?q4:W4];return!!(ore(n)&&ore(e[t])&&I9(n.bin))}return!0}(e,o,t))return g7.warn(y7.incompatibleChannel(o,t)),i;if(o===o8&&"line"===t){if(Cre(e[o])?.aggregate)return g7.warn(y7.LINE_WITH_VARYING_SIZE),i}if(o===t8&&(n?"fill"in e:"stroke"in e))return g7.warn(y7.droppingColor("encoding",{fill:"fill"in e,stroke:"stroke"in e})),i;if(o===p8||o===h8&&!VC(a)&&!dre(a)||o===g8&&VC(a))a&&(i[o]=yD(a).reduce(((e,t)=>(ore(t)?e.push(Nre(t,o)):g7.warn(y7.emptyFieldDef(t,o)),e)),[]));else{if(o===g8&&null===a)i[o]=null;else if(!(ore(a)||sre(a)||dre(a)||nre(a)||Y9(a)))return g7.warn(y7.emptyFieldDef(a,o)),i;i[o]=Mre(a,o,r)}return i}),{})}function Kre(e,t){const n={};for(const r of y4(e)){const i=Mre(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Zre(e,t,n){if(e)for(const r of y4(e)){const i=e[r];if(VC(i))for(const e of i)t.call(n,e,r);else t.call(n,i,r)}}function eie(e,t){return y4(t).reduce(((n,r)=>{switch(r){case q4:case W4:case y8:case b8:case v8:case H4:case V4:case X4:case Q4:case G4:case Y4:case J4:case K4:case Z4:case e8:case d8:case i8:case a8:case g8:return n;case h8:if("line"===e||"trail"===e)return n;case p8:case m8:{const e=t[r];if(VC(e)||ore(e))for(const t of yD(e))t.aggregate||n.push(vre(t,{}));return n}case o8:if("trail"===e)return n;case t8:case n8:case r8:case s8:case u8:case l8:case f8:case c8:{const e=Cre(t[r]);return e&&!e.aggregate&&n.push(vre(e,{})),n}}}),[])}function tie(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};return{tooltip:[...e.map((({fieldPrefix:e,titlePrefix:n})=>{const i=r?` of ${nie(t)}`:"";return{field:e+t.field,type:t.type,title:Y9(n)?{signal:`${n}"${escape(i)}"`}:n+i}})),...c4(function(e){const t=[];for(const n of y4(e))if(Yre(e,n)){const r=yD(e[n]);for(const e of r)ore(e)?t.push(e):rre(e)&&t.push(e.condition)}return t}(n).map(yre),r4)]}}function nie(e){const{title:t,field:n}=e;return O4(t,n)}function rie(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:u,positionPrefix:l,endPositionPrefix:c,extraEncoding:f={}})=>{const d=nie(n);return iie(e,s,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...void 0!==d?{title:d}:{},...void 0!==o?{scale:o}:{},...void 0!==a?{axis:a}:{}},...UD(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function iie(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||void 0===e[t]&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...mne(r.mark)?r.mark:{type:r.mark},style:`${s}-${t}`,...PD(e[t])?{}:e[t]}}]:[]}function oie(e,t,n){const{encoding:r}=e,i="vertical"===t?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:aie(o,n),continuousAxisChannelDef2:aie(a,n),continuousAxisChannelDefError:aie(s,n),continuousAxisChannelDefError2:aie(u,n),continuousAxis:i}}function aie(e,t){if(e&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&g7.warn(y7.errorBarContinuousAxisHasCustomizedAggregate(n,t)),r}return e}function sie(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(mne(n)&&n.orient)return n.orient;if(ure(i)){if(ure(o)){const e=ore(i)&&i.aggregate,n=ore(o)&&o.aggregate;if(e||n!==t){if(n||e!==t){if(e===t&&n===t)throw new Error("Both x and y cannot have aggregate");return $re(o)&&!$re(i)?"horizontal":"vertical"}return"horizontal"}return"vertical"}return"horizontal"}if(ure(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}const uie="boxplot",lie=new Gre(uie,fie);function cie(e){return ID(e)?"tukey":e}function fie(e,{config:t}){e={...e,encoding:Kre(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=mne(n)?n:{type:n};i&&g7.warn(y7.selectionNotSupported("boxplot"));const u=s.extent??t.boxplot.extent,l=u7("size",s,t),c=cie(u),{bins:f,timeUnits:d,transform:h,continuousAxisChannelDef:p,continuousAxis:m,groupby:g,aggregate:y,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:w}=function(e,t,n){const r=sie(e,uie),{continuousAxisChannelDef:i,continuousAxis:o}=oie(e,r,uie),a=i.field,s=cie(t),u=[...die(a),{op:"median",field:a,as:`mid_box_${a}`},{op:"min",field:a,as:("min-max"===s?"lower_whisker_":"min_")+a},{op:"max",field:a,as:("min-max"===s?"upper_whisker_":"max_")+a}],l="min-max"===s||"tukey"===s?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[o]:c,...f}=e.encoding,{customTooltipWithoutAggregatedField:d,filteredEncoding:h}=function(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(VC(t)){for(const e of t)e.aggregate?(r||(r=[]),r.push(e)):(i||(i=[]),i.push(e));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return VC(i)&&1===i.length&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}(f),{bins:p,timeUnits:m,aggregate:g,groupby:y,encoding:v}=Qre(h,n),b="vertical"===r?"horizontal":"vertical",x=r,w=[...p,...m,{aggregate:[...g,...u],groupby:y},...l];return{bins:p,timeUnits:m,transform:w,groupby:y,aggregate:g,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:v,ticksOrient:b,boxOrient:x,customTooltipWithoutAggregatedField:d}}(e,u,t),{color:_,size:k,...E}=v,S=e=>rie(s,m,p,e,t.boxplot),A=S(E),C=S(v),D=S({...E,...k?{size:k}:{}}),M=tie([{fieldPrefix:"min-max"===c?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===c?"lower_whisker_":"min_",titlePrefix:"Min"}],p,v),F={type:"tick",color:"black",opacity:1,orient:b,invalid:null,aria:!1},N="min-max"===c?M:tie([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],p,v),O=[...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:N}),...A({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"lower_whisker",extraEncoding:N}),...A({partName:"ticks",mark:F,positionPrefix:"upper_whisker",extraEncoding:N})],T=[..."tukey"!==c?O:[],...C({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:x,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...D({partName:"median",mark:{type:"tick",invalid:null,...GC(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:b,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if("min-max"===c)return{...a,transform:(a.transform??[]).concat(h),layer:T};const $=`datum["lower_box_${p.field}"]`,z=`datum["upper_box_${p.field}"]`,R=`(${z} - ${$})`,P=`${$} - ${u} * ${R}`,L=`${z} + ${u} * ${R}`,B=`datum["${p.field}"]`,I={joinaggregate:die(p.field),groupby:g},j={transform:[{filter:`(${P} <= ${B}) && (${B} <= ${L})`},{aggregate:[{op:"min",field:p.field,as:`lower_whisker_${p.field}`},{op:"max",field:p.field,as:`upper_whisker_${p.field}`},{op:"min",field:`lower_box_${p.field}`,as:`lower_box_${p.field}`},{op:"max",field:`upper_box_${p.field}`,as:`upper_box_${p.field}`},...y],groupby:g}],layer:O},{tooltip:U,...q}=E,{scale:W,axis:H}=p,V=nie(p),G=t4(H,["title"]),Y=iie(s,"outliers",t.boxplot,{transform:[{filter:`(${B} < ${P}) || (${B} > ${L})`}],mark:"point",encoding:{[m]:{field:p.field,type:p.type,...void 0!==V?{title:V}:{},...void 0!==W?{scale:W}:{},...g4(G)?{}:{axis:G}},...q,..._?{color:_}:{},...w?{tooltip:w}:{}}})[0];let X;const Q=[...f,...d,I];return Y?X={transform:Q,layer:[Y,j]}:(X=j,X.transform.unshift(...Q)),{...a,layer:[X,{transform:h,layer:T}]}}function die(e){return[{op:"q1",field:e,as:`lower_box_${e}`},{op:"q3",field:e,as:`upper_box_${e}`}]}const hie="errorbar",pie=new Gre(hie,mie);function mie(e,{config:t}){e={...e,encoding:Kre(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:u,tooltipEncoding:l}=yie(e,hie,t);delete o.size;const c=rie(s,i,r,o,t.errorbar),f=s.thickness,d=s.size,h={type:"tick",orient:a,aria:!1,...void 0!==f?{thickness:f}:{},...void 0!==d?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...void 0!==f?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function gie(e,t){const{encoding:n}=e;if(function(e){return(cre(e.x)||cre(e.y))&&!cre(e.x2)&&!cre(e.y2)&&!cre(e.xError)&&!cre(e.xError2)&&!cre(e.yError)&&!cre(e.yError2)}(n))return{orient:sie(e,t),inputType:"raw"};const r=function(e){return cre(e.x2)||cre(e.y2)}(n),i=function(e){return cre(e.xError)||cre(e.xError2)||cre(e.yError)||cre(e.yError2)}(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const e=n.x2,r=n.y2;if(cre(e)&&cre(r))throw new Error(`${t} cannot have both x2 and y2`);if(cre(e)){if(ure(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}if(cre(r)){if(ure(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}{const e=n.xError,r=n.xError2,i=n.yError,s=n.yError2;if(cre(r)&&!cre(e))throw new Error(`${t} cannot have xError2 without xError`);if(cre(s)&&!cre(i))throw new Error(`${t} cannot have yError2 without yError`);if(cre(e)&&cre(i))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cre(e)){if(ure(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}if(cre(i)){if(ure(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function yie(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,u=mne(r)?r:{type:r};o&&g7.warn(y7.selectionNotSupported(t));const{orient:l,inputType:c}=gie(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=oie(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=function(e,t,n,r,i,o,a,s){let u=[],l=[];const c=t.field;let f,d=!1;if("raw"===o){const t=e.center?e.center:e.extent?"iqr"===e.extent?"median":"mean":s.errorbar.center,n=e.extent?e.extent:"mean"===t?"stderr":"iqr";if("median"===t!=("iqr"===n)&&g7.warn(y7.errorBarCenterIsUsedWithWrongExtent(t,n,a)),"stderr"===n||"stdev"===n)u=[{op:n,field:c,as:`extent_${c}`},{op:t,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:E4(t)},{fieldPrefix:"upper_",titlePrefix:vie(t,n,"+")},{fieldPrefix:"lower_",titlePrefix:vie(t,n,"-")}],d=!0;else{let e,t,r;"ci"===n?(e="mean",t="ci0",r="ci1"):(e="median",t="q1",r="q3"),u=[{op:t,field:c,as:`lower_${c}`},{op:r,field:c,as:`upper_${c}`},{op:e,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:kre({field:c,aggregate:r,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:kre({field:c,aggregate:t,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:kre({field:c,aggregate:e,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&g7.warn(y7.errorBarCenterAndExtentAreNotNeeded(e.center,e.extent)),"aggregated-upper-lower"===o?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):"aggregated-error"===o&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const e of l)f.push({fieldPrefix:e.as.substring(0,6),titlePrefix:M4(M4(e.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}(u,f,d,h,p,c,t,n),{[m]:x,["x"===m?"x2":"y2"]:w,["x"===m?"xError":"yError"]:_,["x"===m?"xError2":"yError2"]:k,...E}=i,{bins:S,timeUnits:A,aggregate:C,groupby:D,encoding:M}=Qre(E,n),F=[...C,...g],N="raw"!==c?[]:D,O=tie(v,f,M,b);return{transform:[...s.transform??[],...S,...A,...0===F.length?[]:[{aggregate:F,groupby:N}],...y],groupby:N,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:M,ticksOrient:"vertical"===l?"horizontal":"vertical",markDef:u,outerSpec:s,tooltipEncoding:O}}function vie(e,t,n){return`${E4(e)} ${n} ${t}`}const bie="errorband",xie=new Gre(bie,wie);function wie(e,{config:t}){e={...e,encoding:Kre(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:u}=yie(e,bie,t),l=a,c=rie(l,i,r,o,t.errorband),f=void 0!==e.encoding.x&&void 0!==e.encoding.y;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?g7.warn(y7.errorBand1DNotSupport("interpolate")):l.tension&&g7.warn(y7.errorBand1DNotSupport("tension")),{...s,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const _ie={};function kie(e,t,n){const r=new Gre(e,t);_ie[e]={normalizer:r,parts:n}}kie(uie,fie,["box","median","outliers","rule","ticks"]),kie(hie,mie,["ticks","rule"]),kie(bie,wie,["band","borders"]);const Eie=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Sie={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},Aie={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Cie=y4(Sie),Die=y4(Aie),Mie=y4({header:1,headerRow:1,headerColumn:1,headerFacet:1}),Fie=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Nie={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Oie=(y4(Nie),"_vgsid_"),Tie={point:{on:"click",fields:[Oie],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] > window:mousemove!",encodings:["x","y"],translate:"[mousedown, window:mouseup] > window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function $ie(e){return!(!e||"legend"!==e&&!e.legend)}function zie(e){return $ie(e)&&GC(e)}function Rie(e){return!!e.select}function Pie(e){const t=[];for(const n of e||[]){if(Rie(n))continue;const{expr:e,bind:r,...i}=n;if(r&&e){const n={...i,bind:r,init:e};t.push(n)}else{const n={...i,...e?{update:e}:{},...r?{bind:r}:{}};t.push(n)}}return t}function Lie(e){return"concat"in e}function Bie(e){return"vconcat"in e}function Iie(e){return"hconcat"in e}function jie(e){return GC(e)&&void 0!==e.step}function Uie(e){return e.view||e.width||e.height}const qie=y4({align:1,bounds:1,center:1,columns:1,spacing:1});function Wie(e,t){return e[t]??e["width"===t?"continuousWidth":"continuousHeight"]}function Hie(e,t){const n=Vie(e,t);return jie(n)?n.step:Gie}function Vie(e,t){return O4(e[t]??e["width"===t?"discreteWidth":"discreteHeight"],{step:e.step})}const Gie=20,Yie={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:Gie},mark:{color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},arc:{},area:{},bar:wne,circle:{},geoshape:{},image:{},line:{},point:{},rect:_ne,rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Tie,style:{},title:{},facet:{spacing:20},concat:{spacing:20}},Xie=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Qie={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Jie={blue:Xie[0],orange:Xie[1],red:Xie[2],teal:Xie[3],green:Xie[4],yellow:Xie[5],purple:Xie[6],pink:Xie[7],brown:Xie[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Kie(e){const t=y4(e||{}),n={};for(const r of t){const t=e[r];n[r]=Bre(t)?e7(t):t7(t)}return n}const Zie=[...vne,...Hre,...Mie,"background","padding","legend","lineBreak","scale","style","title","view"];function eoe(e={}){const{color:t,font:n,fontSize:r,...i}=e,o=XC({},Yie,n?function(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}(n):{},t?function(e={}){return{signals:[{name:"color",value:GC(e)?{...Jie,...e}:Jie}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}(t):{},r?function(e){return{signals:[{name:"fontSize",value:GC(e)?{...Qie,...e}:Qie}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}(r):{},i||{}),a=t4(o,Zie);for(const e of["background","lineBreak","padding"])o[e]&&(a[e]=t7(o[e]));for(const e of vne)o[e]&&(a[e]=H9(o[e]));for(const e of Hre)o[e]&&(a[e]=Kie(o[e]));for(const e of Mie)o[e]&&(a[e]=H9(o[e]));return o.legend&&(a.legend=H9(o.legend)),o.scale&&(a.scale=H9(o.scale)),o.style&&(a.style=function(e){const t=y4(e),n={};for(const r of t)n[r]=Kie(e[r]);return n}(o.style)),o.title&&(a.title=H9(o.title)),o.view&&(a.view=H9(o.view)),a}const toe=["view",...pne],noe=["color","fontSize","background","padding","facet","concat","numberFormat","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],roe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};function ioe(e){e=Z6(e);for(const t of noe)delete e[t];if(e.axis)for(const t in e.axis)Bre(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Eie)delete e.legend[t];if(e.mark){for(const t of yne)delete e.mark[t];e.mark.tooltip&&GC(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(Pie(e.params)),delete e.params);for(const t of toe){for(const n of yne)delete e[t][n];const n=roe[t];if(n)for(const r of n)delete e[t][r];ooe(e,t)}for(const t of y4(_ie))delete e[t];!function(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=V9(e.title);g4(t)||(e.style["group-title"]={...e.style["group-title"],...t});g4(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n});g4(r)?delete e.title:e.title=r}(e);for(const t in e)GC(e[t])&&g4(e[t])&&delete e[t];return g4(e)?void 0:e}function ooe(e,t,n,r){"view"===t&&(n="cell");const i={...r?e[t][r]:e[t],...e.style[n??t]};g4(i)||(e.style[n??t]=i),r||delete e[t]}function aoe(e){return"layer"in e}class soe{map(e,t){return Qne(e)?this.mapFacet(e,t):function(e){return"repeat"in e}(e)?this.mapRepeat(e,t):Iie(e)?this.mapHConcat(e,t):Bie(e)?this.mapVConcat(e,t):Lie(e)?this.mapConcat(e,t):this.mapLayerOrUnit(e,t)}mapLayerOrUnit(e,t){if(aoe(e))return this.mapLayer(e,t);if(Vre(e))return this.mapUnit(e,t);throw new Error(y7.invalidSpec(e))}mapLayer(e,t){return{...e,layer:e.layer.map((e=>this.mapLayerOrUnit(e,t)))}}mapHConcat(e,t){return{...e,hconcat:e.hconcat.map((e=>this.map(e,t)))}}mapVConcat(e,t){return{...e,vconcat:e.vconcat.map((e=>this.map(e,t)))}}mapConcat(e,t){const{concat:n,...r}=e;return{...r,concat:n.map((e=>this.map(e,t)))}}mapFacet(e,t){return{...e,spec:this.map(e.spec,t)}}mapRepeat(e,t){return{...e,spec:this.map(e.spec,t)}}}const uoe={zero:1,center:1,normalize:1};const loe=new Set([Kte,ene,Zte,one,rne,lne,cne,nne,ane,sne]),coe=new Set([ene,Zte,Kte]);function foe(e,t){const n="x"===t?"y":"radius",r=e[t],i=e[n];if(ore(r)&&ore(i))if("quantitative"===are(r)&&"quantitative"===are(i)){if(r.stack)return t;if(i.stack)return n;const e=ore(r)&&!!r.aggregate;if(e!==(ore(i)&&!!i.aggregate))return e?t:n;{const e=r.scale?.type,o=i.scale?.type;if(e&&"linear"!==e)return n;if(o&&"linear"!==o)return t}}else{if("quantitative"===are(r))return t;if("quantitative"===are(i))return n}else{if("quantitative"===are(r))return t;if("quantitative"===are(i))return n}}function doe(e,t,n={}){const r=mne(e)?e.type:e;if(!loe.has(r))return null;const i=foe(t,"x")||foe(t,"theta");if(!i)return null;const o=t[i],a=ore(o)?vre(o,{}):void 0;let s=function(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}(i),u=t[s],l=ore(u)?vre(u,{}):void 0;l===a&&(l=void 0,u=void 0,s=void 0);const c=i9.reduce(((e,n)=>{if("tooltip"!==n&&Yre(t,n)){const r=t[n];for(const t of yD(r)){const r=Cre(t);if(r.aggregate)continue;const i=vre(r,{});i&&i===l||e.push({channel:n,fieldDef:r})}}return e}),[]);let f;if(void 0!==o.stack?f=PD(o.stack)?o.stack?"zero":null:o.stack:coe.has(r)&&(f="zero"),!f||!(f in uoe))return null;if(Xre(t)&&0===c.length)return null;if(o?.scale?.type&&o?.scale?.type!==hte){if(n.disallowNonLinearStack)return null;g7.warn(y7.cannotStackNonLinearScale(o.scale.type))}return cre(t[q8(i)])?(void 0!==o.stack&&g7.warn(y7.cannotStackRangedMark(i)),null):(ore(o)&&o.aggregate&&!o4(R9,o.aggregate)&&g7.warn(y7.stackNonSummativeAggregate(o.aggregate)),{groupbyChannel:u?s:void 0,groupbyField:l,fieldChannel:i,impute:null!==o.impute&&dne(r),stackBy:c,offset:f})}function hoe(e){const{point:t,line:n,...r}=e;return y4(r).length>1?r:r.type}function poe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:t4(e[t],["point","line"])});return e}function moe(e,t={},n){return"transparent"===e.point?{opacity:0}:e.point?GC(e.point)?e.point:{}:void 0!==e.point?null:t.point||n.shape?GC(t.point)?t.point:{}:void 0}function goe(e,t={}){return e.line?!0===e.line?{}:e.line:void 0!==e.line?null:t.line?!0===t.line?{}:t.line:void 0}class yoe{constructor(){this.name="path-overlay"}hasMatchingType(e,t){if(Vre(e)){const{mark:n,encoding:r}=e,i=mne(n)?n:{type:n};switch(i.type){case"line":case"rule":case"trail":return!!moe(i,t[i.type],r);case"area":return!!moe(i,t[i.type],r)||!!goe(i,t[i.type])}}return!1}run(e,t,n){const{config:r}=t,{params:i,projection:o,mark:a,encoding:s,...u}=e,l=Kre(s,r),c=mne(a)?a:{type:a},f=moe(c,r[c.type],l),d="area"===c.type&&goe(c,r[c.type]),h=[{...i?{params:i}:{},mark:hoe({..."area"===c.type&&void 0===c.opacity&&void 0===c.fillOpacity?{opacity:.7}:{},...c}),encoding:t4(l,["shape"])}],p=doe(c,l);let m=l;if(p){const{fieldChannel:e,offset:t}=p;m={...l,[e]:{...l[e],...t?{stack:t}:{}}}}return d&&h.push({...o?{projection:o}:{},mark:{type:"line",...e4(c,["clip","interpolate","tension","tooltip"]),...d},encoding:m}),f&&h.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...e4(c,["clip","tooltip"]),...f},encoding:m}),n({...u,layer:h},{...t,config:poe(r)})}}function voe(e,t){return t?Yne(e)?Eoe(e,t):woe(e,t):e}function boe(e,t){return t?Eoe(e,t):e}function xoe(e,t,n){const r=t[e];return(i=r)&&!UD(i)&&"repeat"in i?r.repeat in n?{...t,[e]:n[r.repeat]}:void g7.warn(y7.noSuchRepeatedValue(r.repeat)):t;var i}function woe(e,t){if(void 0!==(e=xoe("field",e,t))){if(null===e)return null;if(Kne(e)&&Vne(e.sort)){const n=xoe("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function _oe(e,t){if(ore(e))return woe(e,t);{const n=xoe("datum",e,t);return n===e||n.type||(n.type="nominal"),n}}function koe(e,t){if(!cre(e)){if(ire(e)){const n=_oe(e.condition,t);if(n)return{...e,condition:n};{const{condition:t,...n}=e;return n}}return e}{const n=_oe(e,t);if(n)return n;if(nre(e))return{condition:e.condition}}}function Eoe(e,t){const n={};for(const r in e)if(ND(e,r)){const i=e[r];if(VC(i))n[r]=i.map((e=>koe(e,t))).filter((e=>e));else{const e=koe(i,t);void 0!==e&&(n[r]=e)}}return n}class Soe{constructor(){this.name="RuleForRangedLine"}hasMatchingType(e){if(Vre(e)){const{encoding:t,mark:n}=e;if("line"===n||mne(n)&&"line"===n.type)for(const e of B8){const n=t[j8(e)];if(t[e]&&(ore(n)&&!I9(n.bin)||sre(n)))return!0}}return!1}run(e,t,n){const{encoding:r,mark:i}=e;return g7.warn(y7.lineWithRange(!!r.x2,!!r.y2)),console.log(i),n({...e,mark:GC(i)?{...i,type:"rule"}:"rule"},t)}}function Aoe({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...y4(e),...y4(t)]);for(const o of i){const i=t[o],a=e[o];if(cre(i)){const e={...a,...i};r[o]=e}else ire(i)?r[o]={...i,condition:{...a,...i.condition}}:i||null===i?r[o]=i:(n||dre(a)||Y9(a)||cre(a)||VC(a))&&(r[o]=a)}}else r=t;return!r||g4(r)?void 0:r}function Coe(e){const{parentProjection:t,projection:n}=e;return t&&n&&g7.warn(y7.projectionOverridden({parentProjection:t,projection:n})),n??t}function Doe(e){return"filter"in e}function Moe(e){return"lookup"in e}function Foe(e){return"pivot"in e}function Noe(e){return"density"in e}function Ooe(e){return"quantile"in e}function Toe(e){return"regression"in e}function $oe(e){return"loess"in e}function zoe(e){return"sample"in e}function Roe(e){return"window"in e}function Poe(e){return"joinaggregate"in e}function Loe(e){return"flatten"in e}function Boe(e){return"calculate"in e}function Ioe(e){return"bin"in e}function joe(e){return"impute"in e}function Uoe(e){return"timeUnit"in e}function qoe(e){return"aggregate"in e}function Woe(e){return"stack"in e}function Hoe(e){return"fold"in e}function Voe(e,t){const{transform:n,...r}=e;if(n){return{...r,transform:n.map((e=>{if(Doe(e))return{filter:Xoe(e,t)};if(Ioe(e)&&j9(e.bin))return{...e,bin:Yoe(e.bin)};if(Moe(e)){const{selection:t,...n}=e.from;return t?{...e,from:{param:t,...n}}:e}return e}))}}return e}function Goe(e,t){const n=Z6(e);if(ore(n)&&j9(n.bin)&&(n.bin=Yoe(n.bin)),hre(n)&&n.scale?.domain?.selection){const{selection:e,...t}=n.scale.domain;n.scale.domain={...t,...e?{param:e}:{}}}if(nre(n))if(VC(n.condition))n.condition=n.condition.map((e=>{const{selection:n,param:r,test:i,...o}=e;return r?e:{...o,test:Xoe(e,t)}}));else{const{selection:e,param:r,test:i,...o}=Goe(n.condition,t);n.condition=r?n.condition:{...o,test:Xoe(n.condition,t)}}return n}function Yoe(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function Xoe(e,t){const n=e=>J6(e,(e=>{var n;const r={param:e,empty:t.emptySelections[e]??!0};return(n=t.selectionPredicates)[e]??(n[e]=[]),t.selectionPredicates[e].push(r),r}));return e.selection?n(e.selection):J6(e.test||e.filter,(e=>e.selection?n(e.selection):e))}class Qoe extends soe{map(e,t){const n=t.selections??[];if(e.params&&!Vre(e)){const t=[];for(const r of e.params)Rie(r)?n.push(r):t.push(r);e.params=t}return t.selections=n,super.map(e,Joe(e,t))}mapUnit(e,t){const n=t.selections;if(!n||!n.length)return e;const r=(t.path??[]).concat(e.name),i=[];for(const t of n)if(t.views&&t.views.length)for(const n of t.views)(UD(n)&&(n===e.name||r.indexOf(n)>=0)||VC(n)&&n.map((e=>r.indexOf(e))).every(((e,t,n)=>-1!==e&&(0===t||e>n[t-1]))))&&i.push(t);else i.push(t);return i.length&&(e.params=i),e}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=Qoe.prototype[e];Qoe.prototype[e]=function(e,n){return t.call(this,e,Joe(e,n))}}function Joe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function Koe(e,t){void 0===t&&(t=eoe(e.config));const n=function(e,t={}){const n={config:t};return tae.map(Zoe.map(eae.map(e,n),n),n)}(e,t),{width:r,height:i}=e,o=function(e,t,n){let{width:r,height:i}=t;const o=Vre(e)||aoe(e),a={};o?"container"==r&&"container"==i?(a.type="fit",a.contains="padding"):"container"==r?(a.type="fit-x",a.contains="padding"):"container"==i&&(a.type="fit-y",a.contains="padding"):("container"==r&&(g7.warn(y7.containerSizeNonSingle("width")),r=void 0),"container"==i&&(g7.warn(y7.containerSizeNonSingle("height")),i=void 0));const s={type:"pad",...a,...n?nae(n.autosize):{},...nae(e.autosize)};"fit"!==s.type||o||(g7.warn(y7.FIT_NON_SINGLE),s.type="pad");"container"==r&&"fit"!=s.type&&"fit-x"!=s.type&&g7.warn(y7.containerSizeNotCompatibleWithAutosize("width"));"container"==i&&"fit"!=s.type&&"fit-y"!=s.type&&g7.warn(y7.containerSizeNotCompatibleWithAutosize("height"));if(K6(s,{type:"pad"}))return;return s}(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const Zoe=new class extends soe{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[lie,pie,xie,new yoe,new Soe]}map(e,t){if(Vre(e)){const n=Yre(e.encoding,I4),r=Yre(e.encoding,j4),i=Yre(e.encoding,U4);if(n||r||i)return this.mapFacetedUnit(e,t)}return super.map(e,t)}mapUnit(e,t){const{parentEncoding:n,parentProjection:r}=t,i=boe(e.encoding,t.repeater),o={...e,...i?{encoding:i}:{}};if(n||r)return this.mapUnitWithParentEncodingOrProjection(o,t);const a=this.mapLayerOrUnit.bind(this);for(const e of this.nonFacetUnitNormalizers)if(e.hasMatchingType(o,t.config))return e.run(o,t,a);return o}mapRepeat(e,t){return function(e){return!VC(e.repeat)&&e.repeat.layer}(e)?this.mapLayerRepeat(e,t):this.mapNonLayerRepeat(e,t)}mapLayerRepeat(e,t){const{repeat:n,spec:r,...i}=e,{row:o,column:a,layer:s}=n,{repeater:u={},repeaterPrefix:l=""}=t;return o||a?this.mapRepeat({...e,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:s},spec:r}},t):{...i,layer:s.map((e=>{const n={...u,layer:e},i=`${(r.name||"")+l}child__layer_${w4(e)}`,o=this.mapLayerOrUnit(r,{...t,repeater:n,repeaterPrefix:i});return o.name=i,o}))}}mapNonLayerRepeat(e,t){const{repeat:n,spec:r,data:i,...o}=e;!VC(n)&&e.columns&&(e=t4(e,["columns"]),g7.warn(y7.columnsNotSupportByRowCol("repeat")));const a=[],{repeater:s={},repeaterPrefix:u=""}=t,l=!VC(n)&&n.row||[s?s.row:null],c=!VC(n)&&n.column||[s?s.column:null],f=VC(n)&&n||[s?s.repeat:null];for(const e of f)for(const i of l)for(const o of c){const l={repeat:e,row:i,column:o,layer:s.layer},c=(r.name||"")+u+"child__"+(VC(n)?`${w4(e)}`:(n.row?`row_${w4(i)}`:"")+(n.column?`column_${w4(o)}`:"")),f=this.map(r,{...t,repeater:l,repeaterPrefix:c});f.name=c,a.push(t4(f,["data"]))}const d=VC(n)?e.columns:n.column?n.column.length:1;return{data:r.data??i,align:"all",...o,columns:d,concat:a}}mapFacet(e,t){const{facet:n}=e;return Yne(n)&&e.columns&&(e=t4(e,["columns"]),g7.warn(y7.columnsNotSupportByRowCol("facet"))),super.mapFacet(e,t)}mapUnitWithParentEncodingOrProjection(e,t){const{encoding:n,projection:r}=e,{parentEncoding:i,parentProjection:o,config:a}=t,s=Coe({parentProjection:o,projection:r}),u=Aoe({parentEncoding:i,encoding:boe(n,t.repeater)});return this.mapUnit({...e,...s?{projection:s}:{},...u?{encoding:u}:{}},{config:a})}mapFacetedUnit(e,t){const{row:n,column:r,facet:i,...o}=e.encoding,{mark:a,width:s,projection:u,height:l,view:c,params:f,encoding:d,...h}=e,{facetMapping:p,layout:m}=this.getFacetMappingAndLayout({row:n,column:r,facet:i},t),g=boe(o,t.repeater);return this.mapFacet({...h,...m,facet:p,spec:{...s?{width:s}:{},...l?{height:l}:{},...c?{view:c}:{},...u?{projection:u}:{},mark:a,encoding:g,...f?{params:f}:{}}},t)}getFacetMappingAndLayout(e,t){const{row:n,column:r,facet:i}=e;if(n||r){i&&g7.warn(y7.facetChannelDropped([...n?[I4]:[],...r?[j4]:[]]));const t={},o={};for(const n of[I4,j4]){const r=e[n];if(r){const{align:e,center:i,spacing:a,columns:s,...u}=r;t[n]=u;for(const e of["align","center","spacing"])void 0!==r[e]&&(o[e]??(o[e]={}),o[e][n]=r[e])}}return{facetMapping:t,layout:o}}{const{align:e,center:n,spacing:r,columns:o,...a}=i;return{facetMapping:voe(a,t.repeater),layout:{...e?{align:e}:{},...n?{center:n}:{},...r?{spacing:r}:{},...o?{columns:o}:{}}}}}mapLayer(e,{parentEncoding:t,parentProjection:n,...r}){const{encoding:i,projection:o,...a}=e,s={...r,parentEncoding:Aoe({parentEncoding:t,encoding:i,layer:!0}),parentProjection:Coe({parentProjection:n,projection:o})};return super.mapLayer(a,s)}},eae=new class extends soe{map(e,t){return t.emptySelections??(t.emptySelections={}),t.selectionPredicates??(t.selectionPredicates={}),e=Voe(e,t),super.map(e,t)}mapLayerOrUnit(e,t){if((e=Voe(e,t)).encoding){const n={};for(const[r,i]of b4(e.encoding))n[r]=Goe(i,t);e={...e,encoding:n}}return super.mapLayerOrUnit(e,t)}mapUnit(e,t){const{selection:n,...r}=e;return n?{...r,params:b4(n).map((([e,n])=>{const{init:r,bind:i,empty:o,...a}=n;"single"===a.type?(a.type="point",a.toggle=!1):"multi"===a.type&&(a.type="point"),t.emptySelections[e]="none"!==o;for(const n of v4(t.selectionPredicates[e]??{}))n.empty="none"!==o;return{name:e,value:r,select:a,bind:i}}))}:e}},tae=new Qoe;function nae(e){return UD(e)?{type:e}:e??{}}const rae=["background","padding"];function iae(e,t){const n={};for(const t of rae)e&&void 0!==e[t]&&(n[t]=t7(e[t]));return t&&(n.params=e.params),n}class oae{constructor(e={},t={}){this.explicit=e,this.implicit=t}clone(){return new oae(Z6(this.explicit),Z6(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(e){return O4(this.explicit[e],this.implicit[e])}getWithExplicit(e){return void 0!==this.explicit[e]?{explicit:!0,value:this.explicit[e]}:void 0!==this.implicit[e]?{explicit:!1,value:this.implicit[e]}:{explicit:!1,value:void 0}}setWithExplicit(e,{value:t,explicit:n}){void 0!==t&&this.set(e,t,n)}set(e,t,n){return delete this[n?"implicit":"explicit"][e],this[n?"explicit":"implicit"][e]=t,this}copyKeyFromSplit(e,{explicit:t,implicit:n}){void 0!==t[e]?this.set(e,t[e],!0):void 0!==n[e]&&this.set(e,n[e],!1)}copyKeyFromObject(e,t){void 0!==t[e]&&this.set(e,t[e],!0)}copyAll(e){for(const t of y4(e.combine())){const n=e.getWithExplicit(t);this.setWithExplicit(t,n)}}}function aae(e){return{explicit:!0,value:e}}function sae(e){return{explicit:!1,value:e}}function uae(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:lae(t,n,r,i)}}function lae(e,t,n,r){return e.explicit&&t.explicit&&g7.warn(y7.mergeConflictingProperty(n,r,e.value,t.value)),e}function cae(e,t,n,r,i=lae){return void 0===e||void 0===e.value?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:K6(e.value,t.value)?e:i(e,t,n,r)}class fae extends oae{constructor(e={},t={},n=!1){super(e,t),this.explicit=e,this.implicit=t,this.parseNothing=n}clone(){const e=super.clone();return e.parseNothing=this.parseNothing,e}}function dae(e){return"url"in e}function hae(e){return"values"in e}function pae(e){return"name"in e&&!dae(e)&&!hae(e)&&!mae(e)}function mae(e){return e&&(gae(e)||yae(e)||vae(e))}function gae(e){return"sequence"in e}function yae(e){return"sphere"in e}function vae(e){return"graticule"in e}var bae,xae;function wae(e,t=!0,n=BC){if(VC(e)){const r=e.map((e=>wae(e,t,n)));return t?`[${r.join(", ")}]`:r}return Tee(e)?n(t?Bee(e):function(e){const t=Lee(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}(e)):t?n(n4(e)):e}function _ae(e,t){for(const n of v4(e.component.selection??{})){const r=n.name;let i=`${r}${Tse}, ${"global"===n.resolve?"true":`{unit: ${Pse(e)}}`}`;for(const r of Rse)r.defined(n)&&(r.signals&&(t=r.signals(e,n,t)),r.modifyExpr&&(i=r.modifyExpr(e,n,i)));t.push({name:r+$se,on:[{events:{signal:n.name+Tse},update:`modify(${QD(n.name+Ose)}, ${i})`}]})}return Sae(t)}function kae(e,t){if(e.component.selection&&y4(e.component.selection).length){const n=QD(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:I1("mousemove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Sae(t)}function Eae(e,t){for(const n of v4(e.component.selection??{}))for(const r of Rse)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Sae(e){return e.map((e=>(e.on&&!e.on.length&&delete e.on,e)))}(xae=bae||(bae={}))[xae.Raw=0]="Raw",xae[xae.Main=1]="Main",xae[xae.Row=2]="Row",xae[xae.Column=3]="Column",xae[xae.Lookup=4]="Lookup";class Aae{constructor(e,t){this.debugName=t,this._children=[],this._parent=null,e&&(this.parent=e)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(e){this._parent=e,e&&e.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(e,t){this._children.includes(e)?g7.warn(y7.ADD_SAME_CHILD_TWICE):void 0!==t?this._children.splice(t,0,e):this._children.push(e)}removeChild(e){const t=this._children.indexOf(e);return this._children.splice(t,1),t}remove(){let e=this._parent.removeChild(this);for(const t of this._children)t._parent=this._parent,this._parent.addChild(t,e++)}insertAsParentOf(e){const t=e.parent;t.removeChild(this),this.parent=t,e.parent=this}swapWithParent(){const e=this._parent,t=e.parent;for(const t of this._children)t.parent=e;this._children=[],e.removeChild(this),e.parent.removeChild(e),this.parent=t,e.parent=this}}class Cae extends Aae{constructor(e,t,n,r){super(e,t),this.type=n,this.refCounts=r,this._source=this._name=t,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}clone(){const e=new this.constructor;return e.debugName=`clone_${this.debugName}`,e._source=this._source,e._name=`clone_${this._name}`,e.type=this.type,e.refCounts=this.refCounts,e.refCounts[e._name]=0,e}dependentFields(){return new Set}producedFields(){return new Set}hash(){return void 0===this._hash&&(this._hash=`Output ${$4()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(e){this._source=e}}class Dae extends Aae{constructor(e,t){super(e),this.formula=t}clone(){return new Dae(null,Z6(this.formula))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,t)=>{const{field:n,timeUnit:r}=t;if(r){const i=vre(t,{forAs:!0});e[r4({as:i,field:n,timeUnit:r})]={as:i,field:n,timeUnit:r}}return e}),{});return g4(n)?null:new Dae(e,n)}static makeFromTransform(e,t){const{timeUnit:n,...r}={...t},i={...r,timeUnit:Yee(n)};return new Dae(e,{[r4(i)]:i})}merge(e){this.formula={...this.formula};for(const t in e.formula)this.formula[t]||(this.formula[t]=e.formula[t]);for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}removeFormulas(e){const t={};for(const[n,r]of b4(this.formula))e.has(r.as)||(t[n]=r);this.formula=t}producedFields(){return new Set(v4(this.formula).map((e=>e.as)))}dependentFields(){return new Set(v4(this.formula).map((e=>e.field)))}hash(){return`TimeUnit ${r4(this.formula)}`}assemble(){const e=[];for(const t of v4(this.formula)){const{field:n,as:r,timeUnit:i}=t,{unit:o,utc:a,...s}=Yee(i);e.push({field:D4(n),type:"timeunit",...o?{units:Wee(o)}:{},...a?{timezone:"utc"}:{},...s,as:[r,`${r}_end`]})}return e}}const Mae="_tuple_fields";class Fae{constructor(...e){this.items=e,this.hasChannel={},this.hasField={}}}const Nae={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Fae),o={},a={},s=new Set,u=(e,t)=>{const n="visual"===t?e.channel:e.field;let i=w4(`${r}_${n}`);for(let e=1;s.has(i);e++)i=w4(`${r}_${n}_${e}`);return s.add(i),{[t]:i}},l=t.type,c=e.config.selection[l],f=void 0!==n.value?yD(n.value):null;let{fields:d,encodings:h}=GC(n.select)?n.select:{};if(!d&&!h&&f)for(const e of f)if(GC(e))for(const t of y4(e))P8[t]?(h||(h=[])).push(t):"interval"===l?(g7.warn(y7.INTERVAL_INITIALIZED_WITH_X_Y),h=c.encodings):(d||(d=[])).push(t);d||h||(h=c.encodings,d=c.fields);for(const t of h??[]){const n=e.fieldDef(t);if(n){let r=n.field;if(n.aggregate){g7.warn(y7.cannotProjectAggregate(t,n.aggregate));continue}if(!r){g7.warn(y7.cannotProjectOnChannelWithoutField(t));continue}if(n.timeUnit){r=e.vgField(t);const i={timeUnit:n.timeUnit,as:r,field:n.field};a[r4(i)]=i}if(!o[r]){let a="E";if("interval"===l){Rte(e.getScaleComponent(t).get("type"))&&(a="R")}else n.bin&&(a="R-RE");const s={field:r,channel:t,type:a};s.signals={...u(s,"data"),...u(s,"visual")},i.items.push(o[r]=s),i.hasField[r]=i.hasChannel[t]=o[r]}}else g7.warn(y7.cannotProjectOnChannelWithoutField(t))}for(const e of d??[]){if(i.hasField[e])continue;const t={type:"E",field:e};t.signals={...u(t,"data")},i.items.push(t),i.hasField[e]=t}f&&(t.init=f.map((e=>i.items.map((t=>GC(e)?void 0!==e[t.channel]?e[t.channel]:e[t.field]:e))))),g4(a)||(i.timeUnit=new Dae(null,a))},signals:(e,t,n)=>{const r=t.name+Mae;return n.filter((e=>e.name===r)).length>0?n:n.concat({name:r,value:t.project.items.map((e=>{const{signals:t,hasLegend:n,...r}=e;return r.field=D4(r.field),r}))})}},Oae={defined:e=>"interval"===e.type&&"global"===e.resolve&&e.bind&&"scales"===e.bind,parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!k9(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;o&&Rte(a)?(o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)):g7.warn(y7.SCALE_BINDINGS_CONTINUOUS)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter((e=>0===n.filter((t=>t.name===e.signals.data)).length));if(!e.parent||$ae(e)||0===r.length)return n;const i=n.filter((e=>e.name===t.name))[0];let o=i.update;if(o.indexOf(zse)>=0)i.update=`{${r.map((e=>`${QD(D4(e.field))}: ${e.signals.data}`)).join(", ")}}`;else{for(const e of r){const t=`${QD(D4(e.field))}: ${e.signals.data}`;o.includes(t)||(o=`${o.substring(0,o.length-1)}, ${t}}`)}i.update=o}return n.concat(r.map((e=>({name:e.signals.data}))))},signals:(e,t,n)=>{if(e.parent&&!$ae(e))for(const e of t.scales){const t=n.filter((t=>t.name===e.signals.data))[0];t.push="outer",delete t.value,delete t.update}return n}};function Tae(e,t){return`domain(${QD(e.scaleName(t))})`}function $ae(e){return(e.parent&&_ce(e.parent)&&!e.parent.parent)??$ae(e.parent.parent)}const zae="_brush",Rae="_scale_trigger",Pae={defined:e=>"interval"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Mae,o=Oae.defined(t),a=t.init?t.init[0]:null,s=[],u=[];if(t.translate&&!o){const e=`!event.item || event.item.mark.name !== ${QD(r+zae)}`;Lae(t,((t,n)=>{var r;const i=yD((r=n.between[0]).filter??(r.filter=[]));return i.includes(e)||i.push(e),t}))}t.project.items.forEach(((r,i)=>{const o=r.channel;if(o!==q4&&o!==W4)return void g7.warn("Interval selections only support x and y encoding channels.");const l=a?a[i]:null,c=function(e,t,n,r){const i=n.channel,o=n.signals.visual,a=n.signals.data,s=Oae.defined(t),u=QD(e.scaleName(i)),l=e.getScaleComponent(i),c=l?l.get("type"):void 0,f=e=>`scale(${u}, ${e})`,d=e.getSizeSignalRef(i===q4?"width":"height").signal,h=`${i}(unit)`,p=Lae(t,((e,t)=>[...e,{events:t.between[0],update:`[${h}, ${h}]`},{events:t,update:`[${o}[0], clamp(${h}, 0, ${d})]`}]));return p.push({events:{signal:t.name+Rae},update:Rte(c)?`[${f(`${a}[0]`)}, ${f(`${a}[1]`)}]`:"[0, 0]"}),s?[{name:a,on:[]}]:[{name:o,...r?{init:wae(r,!0,f)}:{value:[]},on:p},{name:a,...r?{init:wae(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}(e,t,r,l),f=r.signals.data,d=r.signals.visual,h=QD(e.scaleName(o)),p=Rte(e.getScaleComponent(o).get("type"))?"+":"";n.push(...c),s.push(f),u.push({scaleName:e.scaleName(o),expr:`(!isArray(${f}) || (${p}invert(${h}, ${d})[0] === ${p}${f}[0] && ${p}invert(${h}, ${d})[1] === ${p}${f}[1]))`})})),o||n.push({name:r+Rae,value:{},on:[{events:u.map((e=>({scale:e.scaleName}))),update:`${u.map((e=>e.expr)).join(" && ")} ? ${r+Rae} : {}`}]});const l=`unit: ${Pse(e)}, fields: ${i}, values`;return n.concat({name:r+Tse,...a?{init:`{${l}: ${wae(a)}}`}:{},on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]})},marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i&&i.signals.visual,s=o&&o.signals.visual,u=`data(${QD(t.name+Ose)})`;if(Oae.defined(t))return n;const l={x:void 0!==i?{signal:`${a}[0]`}:{value:0},y:void 0!==o?{signal:`${s}[0]`}:{value:0},x2:void 0!==i?{signal:`${a}[1]`}:{field:{group:"width"}},y2:void 0!==o?{signal:`${s}[1]`}:{field:{group:"height"}}};if("global"===t.resolve)for(const t of y4(l))l[t]=[{test:`${u}.length && ${u}[0].unit === ${Pse(e)}`,...l[t]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=y4(h).reduce(((e,t)=>(e[t]=[{test:[void 0!==i&&`${a}[0] !== ${a}[1]`,void 0!==o&&`${s}[0] !== ${s}[1]`].filter((e=>e)).join(" && "),value:h[t]},{value:null}],e)),{});return[{name:`${r+zae}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+zae,type:"rect",clip:!0,encode:{enter:{...d?{cursor:{value:d}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Lae(e,t){return e.events.reduce(((e,n)=>n.between?t(e,n):(g7.warn(`${n} is not an ordered event stream for interval selections.`),e)),[])}const Bae={defined:e=>"point"===e.type,signals:(e,t,n)=>{const r=t.name,i=r+Mae,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=o.items.map((t=>{const n=e.fieldDef(t.channel);return n&&n.bin?`[${a}[${QD(e.vgField(t.channel,{}))}], ${a}[${QD(e.vgField(t.channel,{binSuffix:"end"}))}]]`:`${a}[${QD(t.field)}]`})).join(", "),u=`unit: ${Pse(e)}, fields: ${i}, values`,l=t.events;return n.concat([{name:r+Tse,on:l?[{events:l,update:`datum && item().mark.marktype !== 'group' ? {${u}: [${s}]} : null`,force:!0}]:[]}])}};function Iae(e,t,n,r){const i=nre(t)&&t.condition,o=r(t);if(i){return{[n]:[...yD(i).map((t=>{const n=r(t);if(function(e){return e.param}(t)){const{param:r,empty:i}=t;return{test:Wse(e,{param:r,empty:i}),...n}}return{test:Vse(e,t.test),...n}})),...void 0!==o?[o]:[]]}}return void 0!==o?{[n]:o}:{}}function jae(e,t="text"){const n=e.encoding[t];return Iae(e,n,t,(t=>Uae(t,e.config)))}function Uae(e,t,n="datum"){if(e){if(dre(e))return r7(e.value);if(cre(e)){const{format:r,formatType:i}=Are(e);return Tne({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function qae(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(VC(a))return{tooltip:Hae({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return Iae(e,a,"tooltip",(e=>{const a=Uae(e,i,s);if(a)return a;if(null===e)return;let u=u7("tooltip",r,i);return!0===u&&(u={content:"encoding"}),UD(u)?{value:u}:GC(u)?Y9(u)?u:"encoding"===u.content?Hae(n,o,i,t):{signal:s}:void 0}))}}function Wae(e,t,n,{reactiveGeom:r}={}){const i={},o=r?"datum.datum":"datum",a=[];function s(r,s){const u=j8(s),l=fre(r)?r:{...r,type:e[u].type},c=yD(l.title||Sre(l,n)).join(", ");let f;if(s9(s)){const r="x"===s?"x2":"y2",a=Cre(e[r]);if(I9(l.bin)&&a){const e=vre(l,{expr:o}),t=vre(a,{expr:o}),{format:s,formatType:u}=Are(l);f=jne(e,t,s,u,n),i[r]=!0}else if(t&&t.fieldChannel===s&&"normalize"===t.offset){const{format:e,formatType:t}=Are(l);f=Tne({fieldOrDatumDef:l,format:e,formatType:t,expr:o,config:n,normalizeStack:!0}).signal}}f??(f=Uae(l,n,o).signal),a.push({channel:s,key:c,value:f})}Zre(e,((e,t)=>{ore(e)?s(e,t):rre(e)&&s(e.condition,t)}));const u={};for(const{channel:e,key:t,value:n}of a)i[e]||u[t]||(u[t]=n);return u}function Hae(e,t,n,{reactiveGeom:r}={}){const i=Wae(e,t,n,{reactiveGeom:r}),o=b4(i).map((([e,t])=>`"${e}": ${t}`));return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function Vae(e){const{markDef:t,config:n}=e,r=u7("aria",t,n);return!1===r?{}:{...r?{aria:r}:{},...Gae(e),...Yae(e)}}function Gae(e){const{mark:t,markDef:n,config:r}=e;if(!1===r.aria)return{};const i=u7("ariaRoleDescription",n,r);return null!=i?{ariaRoleDescription:{value:i}}:t in K9?{}:{ariaRoleDescription:{value:t}}}function Yae(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return Iae(e,o,"description",(t=>Uae(t,e.config)));const a=u7("description",n,r);if(null!=a)return{description:r7(a)};if(!1===r.aria)return{};const s=Wae(t,i,r);return g4(s)?void 0:{description:{signal:b4(s).map((([e,t],n)=>`"${n>0?"; ":""}${e}: " + (${t})`)).join(" + ")}}}function Xae(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:u}=n;void 0===s&&(u??(u=u7(e,r,o,{vgChannel:a,ignoreVgConfig:!0})),void 0!==u&&(s=r7(u)));const l=i[e];return Iae(t,l,a??e,(n=>Mne({channel:e,channelDef:n,markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:s})))}function Qae(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??u7("filled",n,i),s=o4(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,u=u7(!0===a?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[!0===a&&"color"]??s,l=u7(!1===a?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[!1===a&&"color"],c=a?"fill":"stroke",f={...u?{fill:r7(u)}:{},...l?{stroke:r7(l)}:{}};return n.color&&(a?n.fill:n.stroke)&&g7.warn(y7.droppingColor("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...Xae("color",e,{vgChannel:c,defaultValue:a?u:l}),...Xae("fill",e,{defaultValue:r.fill?u:void 0}),...Xae("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Jae(e){const{encoding:t,mark:n}=e,r=t.order;return!dne(n)&&dre(r)?Iae(e,r,"zindex",(e=>r7(e.value))):{}}function Kae(e,t){const n=t[function(e){switch(e){case q4:return"xOffset";case W4:return"yOffset";case H4:return"x2Offset";case V4:return"y2Offset";case X4:return"thetaOffset";case G4:return"radiusOffset";case Q4:return"theta2Offset";case Y4:return"radius2Offset"}}(e)];if(n)return n}function Zae(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,u=i[e],l=i[q8(e)],c=t.scaleName(e),f=t.getScaleComponent(e),d=Kae(e,o),h=ese({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),p=!u&&s9(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:function(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(cre(n)&&i&&t===i.fieldChannel){if(ore(n)){let e=n.bandPosition;if(void 0!==e||"text"!==a.type||"radius"!==t&&"theta"!==t||(e=.5),void 0!==e)return Dne({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:e,offset:o})}return Cne(n,r,{suffix:"end"},{offset:o})}return kne(e)}({channel:e,channelDef:u,channel2Def:l,markDef:o,config:a,scaleName:c,scale:f,stack:s,offset:d,defaultRef:h});return p?{[r||e]:p}:void 0}function ese({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=j8(n),u=U8(n),l=u7(n,o,a,{vgChannel:u});if(void 0!==l)return Fne(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const e=i.get("type");if(o4([pte,vte,bte],e));else if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}if("zeroOrMin"===t)return"y"===s?{field:{group:"height"}}:{value:0};switch(s){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[W8(n)],mult:.5}}}}const tse={left:"x",center:"xc",right:"x2"},nse={top:"y",middle:"yc",bottom:"y2"};function rse(e,t,n,r="middle"){if("radius"===e||"theta"===e)return U8(e);const i="x"===e?"align":"baseline",o=u7(i,t,n);let a;return Y9(o)?(g7.warn(y7.rangeMarkAlignmentCannotBeExpression(i)),a=void 0):a=o,"x"===e?tse[a||("top"===r?"left":"center")]:nse[a||r]}function ise(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?ose(e,t,{defaultPos:n,defaultPos2:r}):Zae(e,t,{defaultPos:n})}function ose(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=q8(e),s=W8(e),u=function(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,u=j8(n),l=W8(n),c=U8(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),p=Kae(n in r||n in o?n:u,e.markDef);if(!f&&("x2"===n||"y2"===n)&&(r.latitude||r.longitude)){const t=W8(n),r=e.markDef[t];return null!=r?{[t]:{value:r}}:{[c]:{field:e.getName(n)}}}const m=function({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:u,defaultRef:l}){if(cre(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0))return Cne(t,o,{suffix:"start"},{offset:u});return kne({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:u,defaultRef:l})}({channel:n,channelDef:f,channel2Def:r[n],markDef:o,config:s,scaleName:d,scale:h,stack:a,offset:p,defaultRef:void 0});if(void 0!==m)return{[c]:m};return ase(n,o)||ase(n,{[n]:c7(n,o,s.style),[l]:c7(l,o,s.style)})||ase(n,s[i])||ase(n,s.mark)||{[c]:ese({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}(t,r,a);return{...Zae(e,t,{defaultPos:n,vgChannel:u[s]?rse(e,i,o):U8(e)}),...u}}function ase(e,t){const n=W8(e),r=U8(e);if(void 0!==t[r])return{[r]:Fne(e,t[r])};if(void 0!==t[e])return{[r]:Fne(e,t[e])};if(t[n]){const r=t[n];if(!bne(r))return{[n]:Fne(e,r)};g7.warn(y7.relativeBandSizeNotSupported(n))}}function sse(e,t,n){const{config:r,encoding:i,markDef:o}=e,a=q8(t),s=W8(t),u=i[t],l=i[a],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=e.scaleName(t),h=o.orient,p=i[s]??i.size??u7("size",o,r,{vgChannel:s}),m="bar"===n&&("x"===t?"vertical"===h:"horizontal"===h);if(!ore(u)||!(B9(u.bin)||I9(u.bin)||u.timeUnit&&!l)||p&&!bne(p)||zte(f))return(cre(u)&&zte(f)||m)&&!l?function(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=W8(t),f=q8(t),d="horizontal"===s&&"y"===t||"vertical"===s&&"x"===t;let h;(i.size||r.size)&&(d?h=Xae("size",n,{vgChannel:c,defaultRef:r7(r.size)}):g7.warn(y7.cannotApplySizeToNonOrientedMark(r.type)));const p=ere({channel:t,fieldDef:e,markDef:r,config:o,scaleType:l?.get?.("type"),useVlSizeChannel:d});h=h||{[c]:use(c,u,l,o,p)};const m="band"===l?.get?.("type")&&"band"in h[c]?"top":"middle",g=rse(t,r,o,m),y="xc"===g||"yc"===g,v=Kae(t,r),b=kne({channel:t,channelDef:e,markDef:r,config:o,scaleName:u,scale:l,stack:a,offset:v,defaultRef:ese({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:y?.5:Y9(p)?{signal:`(1-${p})/2`}:bne(p)?(1-p.band)/2:0});if(c)return{[g]:b,...h};{const e=U8(f),t=h[c],n=v?{...t,offset:v}:t;return{[g]:b,[e]:VC(b)?[b[0],{...b[1],offset:n}]:{...b,offset:n}}}}(u,t,e):ose(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"});return function({fieldDef:e,fieldDef2:t,channel:n,bandSize:r,scaleName:i,markDef:o,spacing:a=0,axisTranslate:s,reverse:u,config:l}){const c=q8(n),f=U8(n),d=U8(c),h=Kae(n,o),p=Y9(r)?{signal:`(1-${r.signal})/2`}:bne(r)?(1-r.band)/2:.5;if(B9(e.bin)||e.timeUnit)return{[d]:cse({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:p,offset:lse(c,a,u,s,h),config:l}),[f]:cse({channel:n,fieldDef:e,scaleName:i,markDef:o,bandPosition:Y9(p)?{signal:`1-${p.signal}`}:1-p,offset:lse(n,a,u,s,h),config:l})};if(I9(e.bin)){const r=Cne(e,i,{},{offset:lse(c,a,u,s,h)});if(ore(t))return{[d]:r,[f]:Cne(t,i,{},{offset:lse(n,a,u,s,h)})};if(j9(e.bin)&&e.bin.step)return{[d]:r,[f]:{signal:`scale("${i}", ${vre(e,{expr:"datum"})} + ${e.bin.step})`,offset:lse(n,a,u,s,h)}}}return void g7.warn(y7.channelRequiredForBinned(c))}({fieldDef:u,fieldDef2:l,channel:t,markDef:o,scaleName:d,bandSize:ere({channel:t,fieldDef:u,markDef:o,config:r,scaleType:f}),axisTranslate:e.component.axes[t]?.[0]?.get?.("translate")??.5,spacing:s9(t)?u7("binSpacing",o,r):void 0,reverse:c.get("reverse"),config:r})}function use(e,t,n,r,i){if(bne(i)){if(!n)return{mult:i.band,field:{group:e}};{const e=n.get("type");if("band"===e)return{scale:t,band:i.band};1!==i.band&&(g7.warn(y7.cannotUseRelativeBandSizeWithNonBandScale(e)),i=void 0)}}else{if(Y9(i))return i;if(i)return{value:i}}if(n){const e=n.get("range");if(X9(e)&&ID(e.step))return{value:e.step-2}}return{value:Hie(r.view,e)-2}}function lse(e,t,n,r,i){if(w8(e))return 0;const o="x"===e||"y2"===e?-t/2:t/2;if(Y9(n)||Y9(i)||Y9(r)){const e=o7(n),t=o7(i),a=o7(r);return{signal:(a?`${a} + `:"")+(e?`(${e} ? -1 : 1) * `:"")+(t?`(${t} + ${o})`:o)}}return i=i||0,r+(n?-i-o:+i+o)}function cse({channel:e,fieldDef:t,scaleName:n,markDef:r,bandPosition:i,offset:o,config:a}){return Ene({fieldDef:t,channel:e,markDef:r,ref:Dne({scaleName:n,fieldOrDatumDef:t,bandPosition:i,offset:o}),config:a})}const fse=new Set(["aria","width","height"]);function dse(e,t){const{fill:n,stroke:r}="include"===t.color?Qae(e):{};return{...pse(e.markDef,t),...hse(e,"fill",n),...hse(e,"stroke",r),...Xae("opacity",e),...Xae("fillOpacity",e),...Xae("strokeOpacity",e),...Xae("strokeWidth",e),...Xae("strokeDash",e),...Jae(e),...qae(e),...jae(e,"href"),...Vae(e)}}function hse(e,t,n){const{config:r,mark:i,markDef:o}=e;if("hide"===u7("invalid",o,r)&&n&&!dne(i)){const r=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&Rte(i)&&(t[o]=!0)}return t}),{}),i=y4(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>Ane(e,t))).join(` ${e} `)}return}(e,{invalid:!0,channels:_9});if(r)return{[t]:[{test:r,value:null},...yD(n)]}}return n?{[t]:n}:{}}function pse(e,t){return J9.reduce(((n,r)=>(fse.has(r)||void 0===e[r]||"ignore"===t[r]||(n[r]=r7(e[r])),n)),{})}function mse(e){const{config:t,markDef:n}=e;if(u7("invalid",n,t)){const t=function(e,{invalid:t=!1,channels:n}){const r=n.reduce(((t,n)=>{const r=e.getScaleComponent(n);if(r){const i=r.get("type"),o=e.vgField(n,{expr:"datum"});o&&Rte(i)&&(t[o]=!0)}return t}),{}),i=y4(r);if(i.length>0){const e=t?"||":"&&";return i.map((e=>Ane(e,t))).join(` ${e} `)}return}(e,{channels:a9});if(t)return{defined:{signal:t}}}return{}}function gse(e,t){if(void 0!==t)return{[e]:r7(t)}}const yse="voronoi",vse={defined:e=>"point"===e.type&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(yse)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(dne(o))return g7.warn(y7.nearestNotSupportForContinuous(o)),n;const a={name:e.getName(yse),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...qae(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,u=!1;return n.forEach(((t,n)=>{const r=t.name??"";r===e.component.mark[0].name?s=n:r.indexOf(yse)>=0&&(u=!0)})),u||n.splice(s+1,0,a),n}},bse={defined:e=>"point"===e.type&&"global"===e.resolve&&e.bind&&"scales"!==e.bind&&!$ie(e.bind),parse:(e,t,n)=>Bse(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init&&t.init[0],s=vse.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach(((e,i)=>{const u=w4(`${r}_${e.field}`);n.filter((e=>e.name===u)).length||n.unshift({name:u,...a?{init:wae(a[i])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${QD(e.field)}] : null`}]:[],bind:o[e.field]??o[e.channel]??o})})),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.filter((e=>e.name===r+Tse))[0],a=r+Mae,s=i.items.map((e=>w4(`${r}_${e.field}`))),u=s.map((e=>`${e} !== null`)).join(" && ");return s.length&&(o.update=`${u} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},xse="_toggle",wse={defined:e=>"point"===e.type&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+xse,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Tse,r=t.name+xse;return`${r} ? null : ${n}, `+("global"===t.resolve?`${r} ? null : true, `:`${r} ? null : {unit: ${Pse(e)}}, `)+`${r} ? ${n} : null`}},_se={defined:e=>void 0!==e.clear&&!1!==e.clear,parse:(e,t)=>{t.clear&&(t.clear=UD(t.clear)?I1(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(bse.defined(t))for(const e of t.project.items){const r=n.findIndex((n=>n.name===w4(`${t.name}_${e.field}`)));-1!==r&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(e,r){-1!==e&&n[e].on&&n[e].on.push({events:t.clear,update:r})}if("interval"===t.type)for(const e of t.project.items){const t=n.findIndex((t=>t.name===e.signals.visual));if(r(t,"[0, 0]"),-1===t){r(n.findIndex((t=>t.name===e.signals.data)),"null")}}else{let e=n.findIndex((e=>e.name===t.name+Tse));r(e,"null"),wse.defined(t)&&(e=n.findIndex((e=>e.name===t.name+xse)),r(e,"false"))}return n}},kse={defined:e=>{const t="global"===e.resolve&&e.bind&&$ie(e.bind),n=1===e.project.items.length&&e.project.items[0].field!==Oie;return t&&!n&&g7.warn(y7.LEGEND_BINDINGS_MUST_HAVE_PROJECTION),t&&n},parse:(e,t,n)=>{const r=Z6(n);if(r.select=UD(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},Bse(t,r),GC(n.select)&&(n.select.on||n.select.clear)){const e='event.item && indexof(event.item.mark.role, "legend") < 0';for(const n of t.events)n.filter=yD(n.filter??[]),n.filter.includes(e)||n.filter.push(e)}const i=zie(t.bind)?t.bind.legend:"click",o=UD(i)?I1(i,"view"):yD(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=zie(t.bind)&&t.bind.legend,o=e=>t=>{const n=Z6(t);return n.markname=e,n};for(const e of t.project.items){if(!e.hasLegend)continue;const a=`${w4(e.field)}_legend`,s=`${r}_${a}`;if(0===n.filter((e=>e.name===s)).length){const e=i.merge.map(o(`${a}_symbols`)).concat(i.merge.map(o(`${a}_labels`))).concat(i.merge.map(o(`${a}_entries`)));n.unshift({name:s,...t.init?{}:{value:null},on:[{events:e,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${s}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find((e=>e.name===r+Tse)),a=r+Mae,s=i.items.filter((e=>e.hasLegend)).map((e=>w4(`${r}_${w4(e.field)}_legend`))),u=`${s.map((e=>`${e} !== null`)).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map((e=>({signal:e}))),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const l=n.find((e=>e.name===r+xse)),c=zie(t.bind)&&t.bind.legend;return l&&(t.events?l.on.push({...l.on[0],events:c}):l.on[0].events=c),n}};const Ese="_translate_anchor",Sse="_translate_delta",Ase={defined:e=>"interval"===e.type&&e.translate,signals:(e,t,n)=>{const r=t.name,i=Oae.defined(t),o=r+Ese,{x:a,y:s}=t.project.hasChannel;let u=I1(t.translate,"scope");return i||(u=u.map((e=>(e.between[0].markname=r+zae,e)))),n.push({name:o,value:{},on:[{events:u.map((e=>e.between[0])),update:"{x: x(unit), y: y(unit)"+(void 0!==a?`, extent_x: ${i?Tae(e,q4):`slice(${a.signals.visual})`}`:"")+(void 0!==s?`, extent_y: ${i?Tae(e,W4):`slice(${s.signals.visual})`}`:"")+"}"}]},{name:r+Sse,value:{},on:[{events:u,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),void 0!==a&&Cse(e,t,a,"width",n),void 0!==s&&Cse(e,t,s,"height",n),n}};function Cse(e,t,n,r,i){const o=t.name,a=o+Ese,s=o+Sse,u=n.channel,l=Oae.defined(t),c=i.filter((e=>e.name===n.signals[l?"data":"visual"]))[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d.get("type"),p=d.get("reverse"),m=`${a}.extent_${u}`,g=`${l?"log"===h?"panLog":"symlog"===h?"panSymlog":"pow"===h?"panPow":"panLinear":"panLinear"}(${m}, ${`${l?u===q4?p?"":"-":p?"-":"":""}${s}.${u} / ${l?`${f}`:`span(${m})`}`}${l?"pow"===h?`, ${d.get("exponent")??1}`:"symlog"===h?`, ${d.get("constant")??1}`:"":""})`;c.on.push({events:{signal:s},update:l?g:`clampRange(${g}, 0, ${f})`})}const Dse="_zoom_anchor",Mse="_zoom_delta",Fse={defined:e=>"interval"===e.type&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=Oae.defined(t),o=r+Mse,{x:a,y:s}=t.project.hasChannel,u=QD(e.scaleName(q4)),l=QD(e.scaleName(W4));let c=I1(t.zoom,"scope");return i||(c=c.map((e=>(e.markname=r+zae,e)))),n.push({name:r+Dse,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter((e=>!!e)).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),void 0!==a&&Nse(e,t,a,"width",n),void 0!==s&&Nse(e,t,s,"height",n),n}};function Nse(e,t,n,r,i){const o=t.name,a=n.channel,s=Oae.defined(t),u=i.filter((e=>e.name===n.signals[s?"data":"visual"]))[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(a),f=c.get("type"),d=s?Tae(e,a):u.name,h=o+Mse,p=`${s?"log"===f?"zoomLog":"symlog"===f?"zoomSymlog":"pow"===f?"zoomPow":"zoomLinear":"zoomLinear"}(${d}, ${`${o}_zoom_anchor.${a}`}, ${h}${s?"pow"===f?`, ${c.get("exponent")??1}`:"symlog"===f?`, ${c.get("constant")??1}`:"":""})`;u.on.push({events:{signal:h},update:s?p:`clampRange(${p}, 0, ${l})`})}const Ose="_store",Tse="_tuple",$se="_modify",zse="vlSelectionResolve",Rse=[Bae,Pae,Nae,wse,bse,Oae,kse,_se,Ase,Fse,vse];function Pse(e,{escape:t}={escape:!0}){let n=t?QD(e.name):e.name;const r=function(e){let t=e.parent;for(;t&&!xce(t);)t=t.parent;return t}(e);if(r){const{facet:e}=r;for(const t of C8)e[t]&&(n+=` + '__facet_${t}_' + (facet[${QD(r.vgField(t))}])`)}return n}function Lse(e){return v4(e.component.selection??{}).reduce(((e,t)=>e||t.project.items.some((e=>e.field===Oie))),!1)}function Bse(e,t){!UD(t.select)&&t.select.on||delete e.events,!UD(t.select)&&t.select.clear||delete e.clear,!UD(t.select)&&t.select.toggle||delete e.toggle}function Ise(e){const t=[];return"Identifier"===e.type?[e.name]:"Literal"===e.type?[e.value]:("MemberExpression"===e.type&&(t.push(...Ise(e.object)),t.push(...Ise(e.property))),t)}function jse(e){return"MemberExpression"===e.object.type?jse(e.object):"datum"===e.object.name}function Use(e){const t=TZ(e),n=new Set;return t.visit((e=>{"MemberExpression"===e.type&&jse(e)&&n.add(Ise(e).slice(1).join("."))})),n}class qse extends Aae{constructor(e,t,n){super(e),this.model=t,this.filter=n,this.expr=Vse(this.model,this.filter,this),this._dependentFields=Use(this.expr)}clone(){return new qse(null,this.model,Z6(this.filter))}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Wse(e,t,n,r="datum"){const i=UD(t)?t:t.param,o=w4(i),a=QD(o+Ose);let s;try{s=e.getSelectionComponent(o,i)}catch(e){return`!!${o}`}if(s.project.timeUnit){const t=n??e.component.data.raw,r=s.project.timeUnit.clone();t.parent?r.insertAsParentOf(t):t.parent=r}const u=`vlSelectionTest(${a}, ${r}${"global"===s.resolve?")":`, ${QD(s.resolve)})`}`,l=`length(data(${a}))`;return!1===t.empty?`${l} && ${u}`:`!${l} || ${u}`}function Hse(e,t,n){const r=w4(t),i=n.encoding;let o,a=n.field;try{o=e.getSelectionComponent(r,t)}catch(e){return r}if(i||a){if(i&&!a){const e=o.project.items.filter((e=>e.channel===i));!e.length||e.length>1?(a=o.project.items[0].field,g7.warn((e.length?"Multiple ":"No ")+`matching ${QD(i)} encoding found for selection ${QD(n.param)}. `+`Using "field": ${QD(a)}.`)):a=e[0].field}}else a=o.project.items[0].field,o.project.items.length>1&&g7.warn(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${QD(a)}.`);return`${o.name}[${QD(D4(a))}]`}function Vse(e,t,n){return _4(t,(t=>UD(t)?t:function(e){return e?.param}(t)?Wse(e,t,n):ite(t)))}function Gse(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}function Yse(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:u,zindex:l,...c}=e.combine();if(!i){for(const e in c){const n=jre[e],r=c[e];if(n&&n!==t&&"both"!==n)delete c[e];else if(Bre(r)){const{condition:t,...n}=r,i=yD(t),o=Lre[e];if(o){const{vgProp:t,part:r}=o;Gse(c,r,t,[...i.map((e=>{const{test:t,...n}=e;return{test:Vse(null,t),...n}})),n]),delete c[e]}else if(null===o){const t={signal:i.map((e=>{const{test:t,...n}=e;return`${Vse(null,t)} ? ${i7(n)} : `})).join("")+i7(n)};c[e]=t}}else if(Y9(r)){const t=Lre[e];if(t){const{vgProp:n,part:i}=t;Gse(c,i,n,r),delete c[e]}}o4(["labelAlign","labelBaseline"],e)&&null===c[e]&&delete c[e]}if("grid"===t){if(!c.grid)return;if(c.encode){const{grid:e}=c.encode;c.encode={...e?{grid:e}:{}},g4(c.encode)&&delete c.encode}return{scale:a,orient:o,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:O4(l,0)}}{if(!r.header&&e.mainExtracted)return;if(void 0!==s){let e=s;c.encode?.labels?.update&&Y9(c.encode.labels.update.text)&&(e=M4(s,"datum.label",c.encode.labels.update.text.signal)),Gse(c,"labels","text",{signal:e})}if(null===c.labelAlign&&delete c.labelAlign,c.encode){for(const t of Ire)e.hasAxisPart(t)||delete c.encode[t];g4(c.encode)&&delete c.encode}const t=function(e,t){if(e)return VC(e)&&!G9(e)?e.map((e=>Sre(e,t))).join(", "):e}(u,n);return{scale:a,orient:o,grid:!1,...t?{title:t}:{},...c,...!1===n.aria?{aria:!1}:{},zindex:O4(l,0)}}}}function Xse(e){const{axes:t}=e.component,n=[];for(const r of a9)if(t[r])for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const t="x"===r?"height":"width",i=e.getSizeSignalRef(t).signal;t!==i&&n.push({name:t,update:i})}return n}function Qse(e,t,n,r){return Object.assign.apply(null,[{},...e.map((e=>{if("axisOrient"===e){const e="x"===n?"bottom":"left",i=t["x"===n?"axisBottom":"axisLeft"]||{},o=t["x"===n?"axisTop":"axisRight"]||{},a=new Set([...y4(i),...y4(o)]),s={};for(const t of a.values())s[t]={signal:`${r.signal} === "${e}" ? ${o7(i[t])} : ${o7(o[t])}`};return s}return t[e]}))])}function Jse(e,t,n,r){const i="band"===t?["axisDiscrete","axisBand"]:"point"===t?["axisDiscrete","axisPoint"]:t in Nte?["axisQuantitative"]:"time"===t||"utc"===t?["axisTemporal"]:[];const o="x"===e?"axisX":"axisY",a=Y9(n)?"axisOrient":`axis${E4(n)}`,s=[...i,...i.map((e=>o+e.substr(4)))],u=["axis",a,o];return{vlOnlyAxisConfig:Qse(s,r,e,n),vgAxisConfig:Qse(u,r,e,n),axisConfigStyle:Kse([...u,...s],r)}}function Kse(e,t){const n=[{}];for(const r of e){let e=t[r]?.style;if(e){e=yD(e);for(const r of e)n.push(t.style[r])}}return Object.assign.apply(null,n)}function Zse(e,t,n,r={}){const i=f7(e,n,t);if(void 0!==i)return{configFrom:"style",configValue:i};for(const t of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(void 0!==r[t]?.[e])return{configFrom:t,configValue:r[t][e]};return{}}const eue={scale:({model:e,channel:t})=>e.scaleName(t),format:({fieldOrDatumDef:e,config:t,axis:n})=>{const{format:r,formatType:i}=n;return Rne(e,e.type,r,i,t,!0)},formatType:({axis:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Pne(r,t,n)},grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??function(e,t){return!zte(e)&&ore(t)&&!B9(t?.bin)&&!I9(t?.bin)}(n,e),gridScale:({model:e,channel:t})=>function(e,t){const n="x"===t?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n);return}(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||rue(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||nue(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??function(e,t){if("x"===t&&o4(["quantitative","temporal"],e))return!0;return}(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??function(e,t,n,r){if(n&&!GC(r)||"nominal"!==e&&"ordinal"!==e)return"log"!==t&&"symlog"!==t||"greedy";return}(t.type,n,ore(t)&&!!t.timeUnit,ore(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o="x"===e?"width":"y"===e?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??function({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!zte(t)&&"log"!==t){if(ore(e)){if(B9(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&o4(["month","hours","day","quarter"],Yee(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}return}({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},title:({axis:e,model:t,channel:n})=>{if(void 0!==e.title)return e.title;const r=iue(t,n);if(void 0!==r)return r;const i=t.typedFieldDef(n),o="x"===n?"x2":"y2",a=t.fieldDef(o);return h7(i?[Jne(i)]:[],ore(a)?[Jne(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>function(e,t){const n=e.values;if(VC(n))return Rre(t,n);if(Y9(n))return n;return}(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??function(e,t){if("rect"===e&&bre(t))return 1;return 0}(n,t)};function tue(e){return`(((${e.signal} % 360) + 360) % 360)`}function nue(e,t,n,r){if(void 0!==e){if("x"===n){if(Y9(e)){const n=tue(e);return{signal:`(45 < ${n} && ${n} < 135) || (225 < ${n} && ${n} < 315) ? "middle" :(${n} <= 45 || 315 <= ${n}) === ${Y9(t)?`(${t.signal} === "top")`:"top"===t} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Y9(t)){const n=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${n} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==("top"===t)?"bottom":"top"}if(Y9(e)){const n=tue(e);return{signal:`${n} <= 45 || 315 <= ${n} || (135 <= ${n} && ${n} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${n} && ${n} <= 135) === ${Y9(t)?`(${t.signal} === "left")`:"left"===t} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Y9(t)){const n=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${n} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==("left"===t)?"top":"bottom"}}function rue(e,t,n){if(void 0===e)return;const r="x"===n,i=r?0:90,o=r?"bottom":"left";if(Y9(e)){const n=tue(e);return{signal:`(${i?`(${n} + 90)`:n} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${n} && ${n} < ${180+i}) === ${Y9(t)?`(${t.signal} === "${o}")`:t===o} ? "left" : "right"`}}if((e+i)%180==0)return r?null:"center";if(Y9(t)){const n=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${n} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function iue(e,t){const n="x"===t?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;return o&&a?p7(o,a):o||(a||(void 0!==o?o:void 0!==a?a:void 0))}class oue extends Aae{constructor(e,t){super(e),this.transform=t,this._dependentFields=Use(this.transform.calculate)}clone(){return new oue(null,Z6(this.transform))}static parseAllForSortIndex(e,t){return t.forEachFieldDef(((t,n)=>{if(hre(t)&&Gne(t.sort)){const{field:r,timeUnit:i}=t,o=t.sort,a=o.map(((e,t)=>`${ite({field:r,timeUnit:i,equal:e})} ? ${t} : `)).join("")+o.length;e=new oue(e,{calculate:a,as:aue(t,n,{forAs:!0})})}})),e}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${r4(this.transform)}`}}function aue(e,t,n){return vre(e,{prefix:t,suffix:"sort_index",...n??{}})}function sue(e,t){return o4(["top","bottom"],t)?"column":o4(["left","right"],t)||"row"===e?"row":"column"}function uue(e,t,n,r){const i="row"===r?n.headerRow:"column"===r?n.headerColumn:n.headerFacet;return O4((t||{})[e],i[e],n.header[e])}function lue(e,t,n,r){const i={};for(const o of e){const e=uue(o,t||{},n,r);void 0!==e&&(i[o]=e)}return i}const cue=["row","column"],fue=["header","footer"];function due(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=lue(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=sue(t,s),l=L4(a);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,..."row"===t?{orient:"left"}:{},style:"guide-title",...pue(l,u),...hue(u,l,o),...wue(r,i,t,Cie,Sie)}}}function hue(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=rue(t,"row"===e?"left":"top","row"===e?"y":"x");return r?{align:r}:{}}function pue(e,t){const n=nue(e,"row"===t?"left":"top","row"===t?"y":"x",!0);return n?{baseline:n}:{}}function mue(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of fue)if(n[i])for(const o of n[i]){const a=vue(e,t,i,n,o);null!=a&&r.push(a)}return r}function gue(e,t){const{sort:n}=e;return Vne(n)?{field:vre(n,{expr:"datum"}),order:n.order??"ascending"}:VC(n)?{field:aue(e,t,{expr:"datum"}),order:"ascending"}:{field:vre(e,{expr:"datum"}),order:n??"ascending"}}function yue(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:u}=lue(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Tne({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=sue(t,s);return{text:{signal:u?M4(M4(u,"datum.label",l),"datum.value",vre(e,{expr:"parent"})):l},..."row"===t?{orient:"left"}:{},style:"guide-label",frame:"group",...pue(o,c),...hue(c,o,a),...wue(n,e,t,Die,Aie)}}function vue(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:e}=lue(["labelOrient"],a.header,s,t);("row"===t&&!o4(["top","bottom"],e)||"column"===t&&!o4(["left","right"],e))&&(o=yue(a,t,s))}const u=xce(e)&&!Yne(e.facet),l=i.axes,c=l?.length>0;if(o||c){const s="row"===t?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:gue(a,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[s]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const bue={column:{start:0,end:1},row:{start:1,end:0}};function xue(e,t){return bue[t][e]}function wue(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const r=uue(a,t?.header,e,n);void 0!==r&&(o[i[a]]=r)}return o}function _ue(e){return[...kue(e,"width"),...kue(e,"height"),...kue(e,"childWidth"),...kue(e,"childHeight")]}function kue(e,t){const n="width"===t?"x":"y",r=e.component.layoutSize.get(t);if(!r||"merged"===r)return[];const i=e.getSizeSignalRef(t).signal;if("step"===r){const t=e.getScaleComponent(n);if(t){const r=t.get("type"),o=t.get("range");if(zte(r)&&X9(o)){const r=e.scaleName(n);if(xce(e.parent)){if("independent"===e.parent.component.resolve.scale[n])return[Eue(r,o)]}return[Eue(r,o),{name:i,update:Sue(r,t,`domain('${r}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}if("container"==r){const t=i.endsWith("width"),n=t?"containerSize()[0]":"containerSize()[1]",r=`isFinite(${n}) ? ${n} : ${Wie(e.config.view,t?"width":"height")}`;return[{name:i,init:r,on:[{update:r,events:"window:resize"}]}]}return[{name:i,value:r}]}function Eue(e,t){return{name:`${e}_step`,value:t.step}}function Sue(e,t,n){const r=t.get("type"),i=t.get("padding"),o=O4(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a="band"===r?void 0!==a?a:i:1,`bandspace(${n}, ${o7(a)}, ${o7(o)}) * ${e}_step`}function Aue(e){return"childWidth"===e?"width":"childHeight"===e?"height":e}function Cue(e,t){return y4(e).reduce(((n,r)=>{const i=e[r];return{...n,...Iae(t,i,r,(e=>r7(e.value)))}}),{})}function Due(e,t){if(_ce(t)||xce(t))return"shared";if(wce(t))return s9(e)?"independent":"shared";throw new Error("invalid model type for resolve")}function Mue(e,t){const n=e.scale[t],r=s9(t)?"axis":"legend";return"independent"===n?("shared"===e[r][t]&&g7.warn(y7.independentScaleMeansIndependentGuide(t)),"independent"):e[r][t]||"shared"}const Fue={...Nie,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},Nue=y4(Fue);class Oue extends oae{}const Tue={symbols:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if("symbol"!==o)return;const{markDef:a,encoding:s,config:u,mark:l}=n,c=a.filled&&"trail"!==l;let f={...a7({},n,gne),...Qae(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=void 0===d?$ue(s.opacity)??a.opacity:void 0;if(f.fill)if("fill"===r||c&&r===t8)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=r7(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=r7(m??1));else if(VC(f.fill)){const e=zue(s.fill??s.color)??a.fill??(c&&a.color);e&&(f.fill=r7(e))}if(f.stroke)if("stroke"===r||!c&&r===t8)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(VC(f.stroke)){const e=O4(zue(s.stroke||s.color),a.stroke,c?a.color:void 0);e&&(f.stroke={value:e})}if(r!==s8){const e=ore(t)&&Pue(n,i,t);e?f.opacity=[{test:e,...r7(m??1)},r7(u.legend.unselectedOpacity)]:m&&(f.opacity=r7(m))}return f={...f,...e},g4(f)?void 0:f},gradient:function(e,{model:t,legendType:n,legendCmpt:r}){if("gradient"!==n)return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=void 0===(r.get("gradientOpacity")??i.legend.gradientOpacity)?$ue(a.opacity)||o.opacity:void 0;u&&(s.opacity=r7(u));return s={...s,...e},g4(s)?void 0:s},labels:function(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=ore(t)?Pue(n,i,t):void 0,u=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=o,f=Nne(c)?zne({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:a}):void 0,d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return g4(d)?void 0:d},entries:function(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}};function $ue(e){return Rue(e,((e,t)=>Math.max(e,t.value)))}function zue(e){return Rue(e,((e,t)=>O4(e,t.value)))}function Rue(e,t){return function(e){const t=e&&e.condition;return!!t&&(VC(t)||dre(t))}(e)?yD(e.condition).reduce(t,e.value):dre(e)?e.value:void 0}function Pue(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=QD(n.field);return r.map((e=>`(!length(data(${QD(w4(e)+Ose)})) || (${e}[${i}] && indexof(${e}[${i}], datum.value) >= 0))`)).join(" || ")}const Lue={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Rne(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Pne(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??function({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:u}=e;if(Pte(i))return"horizontal"===n?"top"===r||"bottom"===r?jue(t,"width",a,o):a:jue(t,"height",u,s);return}(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??function(e){if(o4(["quantile","threshold","log","symlog"],e))return"greedy";return}(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??function(e,t,n,r){if("shape"!==t){const e=zue(n)??r;if(e)return e}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>kre(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(S8(n)&&Pte(t)){if("gradient"===e)return}else if("symbol"===e)return;return e},values:({fieldOrDatumDef:e,legend:t})=>function(e,t){const n=e.values;if(VC(n))return Rre(t,n);if(Y9(n))return n;return}(t,e)};function Bue(e){const{legend:t}=e;return O4(t.type,function({channel:e,timeUnit:t,scaleType:n}){if(S8(e)){if(o4(["quarter","month","day"],t))return"symbol";if(Pte(n))return"gradient"}return"symbol"}(e))}function Iue({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??function(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return"gradient"===t?"horizontal":void 0}}(n,t)}function jue(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Uue(e){const t=bce(e)?function(e){const{encoding:t}=e,n={};for(const r of[t8,...Fie]){const i=Dre(t[r]);i&&e.getScaleComponent(r)&&(r===i8&&ore(i)&&i.type===dte||(n[r]=Wue(e,r)))}return n}(e):function(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){Uue(r);for(const i of y4(r.component.legends))n.legend[i]=Mue(e.component.resolve,i),"shared"===n.legend[i]&&(t[i]=Hue(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of y4(t))for(const t of e.children)t.component.legends[r]&&"shared"===n.legend[r]&&delete t.component.legends[r];return t}(e);return e.component.legends=t,t}function que(e,t,n,r){switch(t){case"disable":return void 0!==n;case"values":return!!n?.values;case"title":if("title"===t&&e===r?.title)return!0}return e===(n||{})[t]}function Wue(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new Oue({},function(e,t){const n=e.scaleName(t);if("trail"===e.mark){if("color"===t)return{stroke:n};if("size"===t)return{strokeWidth:n}}return"color"===t?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}(e,t));!function(e,t,n){const r=e.fieldDef(t)?.field;for(const i of v4(e.component.selection??{})){const e=i.project.hasField[r]??i.project.hasChannel[t];if(e&&kse.defined(i)){const t=n.get("selections")??[];t.push(i.name),n.set("selections",t,!1),e.hasLegend=!0}}}(e,t,s);const u=void 0!==n?!n:a.disable;if(s.set("disable",u,void 0!==n),u)return s;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Dre(i[t]),f=ore(c)?Yee(c.timeUnit)?.unit:void 0,d=n.orient||o.legend.orient||"right",h=Bue({legend:n,channel:t,timeUnit:f,scaleType:l}),p={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:a,config:o,scaleType:l,orient:d,legendType:h,direction:Iue({legend:n,legendType:h,orient:d,legendConfig:a})};for(const r of Nue){if("gradient"===h&&r.startsWith("symbol")||"symbol"===h&&r.startsWith("gradient"))continue;const i=r in Lue?Lue[r](p):n[r];if(void 0!==i){const a=que(i,r,n,e.fieldDef(t));(a||void 0===o.legend[r])&&s.set(r,i,a)}}const m=n?.encoding??{},g=s.get("selections"),y={},v={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:s,legendType:h};for(const t of["labels","legend","title","symbols","gradient","entries"]){const n=Cue(m[t]??{},e),r=t in Tue?Tue[t](n,v):n;void 0===r||g4(r)||(y[t]={...g?.length&&ore(c)?{name:`${w4(c.field)}_legend_${t}`}:{},...g?.length?{interactive:!!g}:{},update:r})}return g4(y)||s.set("encode",y,!!n?.encoding),s}function Hue(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const n of Nue){const r=cae(e.getWithExplicit(n),t.getWithExplicit(n),n,"legend",((e,t)=>{switch(n){case"symbolType":return Vue(e,t);case"title":return m7(e,t);case"type":return i=!0,sae("symbol")}return lae(e,t,n,"legend")}));e.setWithExplicit(n,r)}return i&&(e.implicit?.encode?.gradient&&k4(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&k4(e.explicit,["encode","gradient"])),e}function Vue(e,t){return"circle"===t.value?t:e}function Gue(e){const t=e.component.legends,n={};for(const r of y4(t)){const i=e.getScaleComponent(r),o=n4(i.get("domains"));if(n[o])for(const e of n[o]){Hue(e,t[r])||n[o].push(t[r])}else n[o]=[t[r].clone()]}return v4(n).flat().map((t=>function(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(n)return;!1===t.aria&&null==o.aria&&(o.aria=!1);if(o.encode?.symbols){const e=o.encode.symbols.update;!e.fill||"transparent"===e.fill.value||e.stroke||o.stroke||(e.stroke={value:"transparent"});for(const t of Fie)o[t]&&delete e[t]}o.title||delete o.title;if(void 0!==r){let e=r;o.encode?.labels?.update&&Y9(o.encode.labels.update.text)&&(e=M4(r,"datum.label",o.encode.labels.update.text.signal)),function(e,t,n,r){var i,o;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(o=e.encode[t]).update??(o.update={}),e.encode[t].update[n]=r}(o,"labels","text",{signal:e})}return o}(t,e.config))).filter((e=>void 0!==e))}function Yue(e){return _ce(e)||wce(e)?function(e){return e.children.reduce(((e,t)=>e.concat(t.assembleProjections())),Xue(e))}(e):Xue(e)}function Xue(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map((e=>e.signal)).join(", ")}]`},o=t.data.reduce(((t,n)=>{const r=Y9(n)?n.signal:`data('${e.lookupDataSource(n)}')`;return o4(t,r)||t.push(r),t}),[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Que=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class Jue extends oae{constructor(e,t,n,r){super({...t},{name:e}),this.specifiedProjection=t,this.size=n,this.data=r,this.merged=!1}get isFit(){return!!this.data}}function Kue(e){e.component.projection=bce(e)?function(e){if(e.hasProjection){const t=H9(e.specifiedProjection),n=!(t&&(null!=t.scale||null!=t.translate)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?function(e){const t=[],{encoding:n}=e;for(const r of[[K4,J4],[e8,Z4]])(Dre(n[r[0]])||Dre(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});e.channelHasField(i8)&&e.typedFieldDef(i8).type===dte&&t.push({signal:e.getName(`geojson_${t.length}`)});0===t.length&&t.push(e.requestDataName(bae.Main));return t}(e):void 0,o=new Jue(e.projectionName(!0),{...H9(e.config.projection)??{},...t??{}},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}return}(e):function(e){if(0===e.children.length)return;let t;for(const t of e.children)Kue(t);const n=s4(e.children,(e=>{const n=e.component.projection;if(n){if(t){const e=function(e,t){const n=s4(Que,(n=>!ND(e.explicit,n)&&!ND(t.explicit,n)||!!(ND(e.explicit,n)&&ND(t.explicit,n)&&K6(e.get(n),t.get(n)))));if(K6(e.size,t.size)){if(n)return e;if(K6(e.explicit,{}))return t;if(K6(t.explicit,{}))return e}return null}(t,n);return e&&(t=e),!!e}return t=n,!0}return!0}));if(t&&n){const n=e.projectionName(!0),r=new Jue(n,t.specifiedProjection,t.size,Z6(t.data));for(const t of e.children){const e=t.component.projection;e&&(e.isFit&&r.data.push(...t.component.projection.data),t.renameProjection(e.get("name"),n),e.merged=!0)}return r}return}(e)}function Zue(e,t,n,r){if(Pre(t,n)){const i=bce(e)?e.axis(n)??e.legend(n)??{}:{},o=vre(t,{expr:"datum"}),a=vre(t,{expr:"datum",binSuffix:"end"});return{formulaAs:vre(t,{binSuffix:"range",forAs:!0}),formula:jne(o,a,i.format,i.formatType,r)}}return{}}function ele(e,t){return`${L9(e)}_${t}`}function tle(e,t,n){const r=ele(Ore(n,void 0)??{},t);return e.getName(`${r}_bins`)}function nle(e,t,n){let r,i;r=function(e){return"as"in e}(e)?UD(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:[vre(e,{forAs:!0}),vre(e,{binSuffix:"end",forAs:!0})];const o={...Ore(t,void 0)},a=ele(o,e.field),{signal:s,extentSignal:u}=function(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}(n,a);if(U9(o.extent)){const e=o.extent;i=Hse(n,e.param,e),delete o.extent}return{key:a,binComponent:{bin:o,field:e.field,as:[r],...s?{signal:s}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}}}}class rle extends Aae{constructor(e,t){super(e),this.bins=t}clone(){return new rle(null,Z6(this.bins))}static makeFromEncoding(e,t){const n=t.reduceFieldDef(((e,n,r)=>{if(fre(n)&&B9(n.bin)){const{key:i,binComponent:o}=nle(n,n.bin,t);e[i]={...o,...e[i],...Zue(t,n,r,t.config)}}return e}),{});return g4(n)?null:new rle(e,n)}static makeFromTransform(e,t,n){const{key:r,binComponent:i}=nle(t,t.bin,n);return new rle(e,{[r]:i})}merge(e,t){for(const n of y4(e.bins))n in this.bins?(t(e.bins[n].signal,this.bins[n].signal),this.bins[n].as=c4([...this.bins[n].as,...e.bins[n].as],r4)):this.bins[n]=e.bins[n];for(const t of e.children)e.removeChild(t),t.parent=this;e.remove()}producedFields(){return new Set(v4(this.bins).map((e=>e.as)).flat(2))}dependentFields(){return new Set(v4(this.bins).map((e=>e.field)))}hash(){return`Bin ${r4(this.bins)}`}assemble(){return v4(this.bins).flatMap((e=>{const t=[],[n,...r]=e.as,{extent:i,...o}=e.bin,a={type:"bin",field:D4(e.field),as:n,signal:e.signal,...U9(i)?{extent:null}:{extent:i},...e.span?{span:{signal:`span(${e.span})`}}:{},...o};!i&&e.extentSignal&&(t.push({type:"extent",field:D4(e.field),signal:e.extentSignal}),a.extent={signal:e.extentSignal}),t.push(a);for(const e of r)for(let r=0;r<2;r++)t.push({type:"formula",expr:vre({field:n[r]},{expr:"datum"}),as:e[r]});return e.formula&&t.push({type:"formula",expr:e.formula,as:e.formulaAs}),t}))}}function ile(e,t,n,r){const i=bce(r)?r.encoding[q8(t)]:void 0;if(fre(n)&&bce(r)&&tre(n,i,r.markDef,r.config))e.add(vre(n,{})),e.add(vre(n,{suffix:"end"})),n.bin&&Pre(n,t)&&e.add(vre(n,{binSuffix:"range"}));else if(t in _8){const n=function(e){switch(e){case J4:return"y";case Z4:return"y2";case K4:return"x";case e8:return"x2"}}(t);e.add(r.getName(n))}else e.add(vre(n));return e}class ole extends Aae{constructor(e,t,n){super(e),this.dimensions=t,this.measures=n}clone(){return new ole(null,new Set(this.dimensions),Z6(this.measures))}get groupBy(){return this.dimensions}static makeFromEncoding(e,t){let n=!1;t.forEachFieldDef((e=>{e.aggregate&&(n=!0)}));const r={},i=new Set;return n?(t.forEachFieldDef(((e,n)=>{const{aggregate:o,field:a}=e;if(o)if("count"===o)r["*"]??(r["*"]={}),r["*"].count=new Set([vre(e,{forAs:!0})]);else{if(N9(o)||O9(o)){const e=N9(o)?"argmin":"argmax",t=o[e];r[t]??(r[t]={}),r[t][e]=new Set([vre({op:e,field:t},{forAs:!0})])}else r[a]??(r[a]={}),r[a][o]=new Set([vre(e,{forAs:!0})]);k9(n)&&"unaggregated"===t.scaleDomain(n)&&(r[a]??(r[a]={}),r[a].min=new Set([vre({field:a,aggregate:"min"},{forAs:!0})]),r[a].max=new Set([vre({field:a,aggregate:"max"},{forAs:!0})]))}else ile(i,n,e,t)})),i.size+y4(r).length===0?null:new ole(e,i,r)):null}static makeFromTransform(e,t){const n=new Set,r={};for(const e of t.aggregate){const{op:t,field:n,as:i}=e;t&&("count"===t?(r["*"]??(r["*"]={}),r["*"].count=new Set([i||vre(e,{forAs:!0})])):(r[n]??(r[n]={}),r[n][t]=new Set([i||vre(e,{forAs:!0})])))}for(const e of t.groupby??[])n.add(e);return n.size+y4(r).length===0?null:new ole(e,n,r)}merge(e){return d4(this.dimensions,e.dimensions)?(function(e,t){for(const n of y4(t)){const r=t[n];for(const t of y4(r))n in e?e[n][t]=new Set([...e[n][t]??[],...r[t]]):e[n]={[t]:r[t]}}}(this.measures,e.measures),!0):(g7.debug("different dimensions, cannot merge"),!1)}addDimensions(e){e.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...y4(this.measures)])}producedFields(){const e=new Set;for(const t of y4(this.measures))for(const n of y4(this.measures[t])){const r=this.measures[t][n];0===r.size?e.add(`${n}_${t}`):r.forEach(e.add,e)}return e}hash(){return`Aggregate ${r4({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const e=[],t=[],n=[];for(const r of y4(this.measures))for(const i of y4(this.measures[r]))for(const o of this.measures[r][i])n.push(o),e.push(i),t.push("*"===r?null:D4(r));return{type:"aggregate",groupby:[...this.dimensions].map(D4),ops:e,fields:t,as:n}}}class ale extends Aae{constructor(e,t,n,r){super(e),this.model=t,this.name=n,this.data=r;for(const e of C8){const n=t.facet[e];if(n){const{bin:r,sort:i}=n;this[e]={name:t.getName(`${e}_domain`),fields:[vre(n),...B9(r)?[vre(n,{binSuffix:"end"})]:[]],...Vne(i)?{sortField:i}:VC(i)?{sortIndexField:aue(n,e)}:{}}}}this.childModel=t.child}hash(){let e="Facet";for(const t of C8)this[t]&&(e+=` ${t.charAt(0)}:${r4(this[t])}`);return e}get fields(){const e=[];for(const t of C8)this[t]?.fields&&e.push(...this[t].fields);return e}dependentFields(){const e=new Set(this.fields);for(const t of C8)this[t]&&(this[t].sortField&&e.add(this[t].sortField.field),this[t].sortIndexField&&e.add(this[t].sortIndexField));return e}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const e={};for(const t of a9){const n=this.childModel.component.scales[t];if(n&&!n.merged){const r=n.get("type"),i=n.get("range");if(zte(r)&&X9(i)){const n=Kle(Zle(this.childModel,t));n?e[t]=n:g7.warn(y7.unknownField(t))}}}return e}assembleRowColumnHeaderData(e,t,n){const r={row:"y",column:"x",facet:void 0}[e],i=[],o=[],a=[];r&&n&&n[r]&&(t?(i.push(`distinct_${n[r]}`),o.push("max")):(i.push(n[r]),o.push("distinct")),a.push(`distinct_${n[r]}`));const{sortField:s,sortIndexField:u}=this[e];if(s){const{op:e=Une,field:t}=s;i.push(t),o.push(e),a.push(vre(s,{forAs:!0}))}else u&&(i.push(u),o.push("max"),a.push(u));return{name:this[e].name,source:t??this.data,transform:[{type:"aggregate",groupby:this[e].fields,...i.length?{fields:i,ops:o,as:a}:{}}]}}assembleFacetHeaderData(e){const{columns:t}=this.model.layout,{layoutHeaders:n}=this.model.component,r=[],i={};for(const e of cue){for(const t of fue){const r=(n[e]&&n[e][t])??[];for(const t of r)if(t.axes?.length>0){i[e]=!0;break}}if(i[e]){const n=`length(data("${this.facet.name}"))`,i="row"===e?t?{signal:`ceil(${n} / ${t})`}:1:t?{signal:`min(${n}, ${t})`}:{signal:n};r.push({name:`${this.facet.name}_${e}`,transform:[{type:"sequence",start:0,stop:i}]})}}const{row:o,column:a}=i;return(o||a)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,e)),r}assemble(){const e=[];let t=null;const n=this.getChildIndependentFieldsWithStep(),{column:r,row:i,facet:o}=this;if(r&&i&&(n.x||n.y)){t=`cross_${this.column.name}_${this.row.name}`;const r=[].concat(n.x??[],n.y??[]),i=r.map((()=>"distinct"));e.push({name:t,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:r,ops:i}]})}for(const r of[j4,I4])this[r]&&e.push(this.assembleRowColumnHeaderData(r,t,n));if(o){const t=this.assembleFacetHeaderData(n);t&&e.push(...t)}return e}}function sle(e){return"'"===e[0]&&"'"===e[e.length-1]||'"'===e[0]&&'"'===e[e.length-1]?e.slice(1,-1):e}function ule(e){const t={};return Q6(e.filter,(e=>{if(nte(e)){let n=null;Xee(e)?n=t7(e.equal):Jee(e)?n=t7(e.lte):Qee(e)?n=t7(e.lt):Kee(e)?n=t7(e.gt):Zee(e)?n=t7(e.gte):ete(e)?n=e.range[0]:tte(e)&&(n=(e.oneOf??e.in)[0]),n&&(Tee(n)?t[e.field]="date":ID(n)?t[e.field]="number":UD(n)&&(t[e.field]="string")),e.timeUnit&&(t[e.field]="date")}})),t}function lle(e){const t={};function n(e){var n;$re(e)?t[e.field]="date":"quantitative"===e.type&&(UD(n=e.aggregate)&&o4(["min","max"],n))?t[e.field]="number":N4(e.field)>1?e.field in t||(t[e.field]="flatten"):hre(e)&&Vne(e.sort)&&N4(e.sort.field)>1&&(e.sort.field in t||(t[e.sort.field]="flatten"))}if((bce(e)||xce(e))&&e.forEachFieldDef(((t,r)=>{if(fre(t))n(t);else{const i=j8(r),o=e.fieldDef(i);n({...t,type:o.type})}})),bce(e)){const{mark:n,markDef:r,encoding:i}=e;if(dne(n)&&!e.encoding.order){const e=i["horizontal"===r.orient?"y":"x"];ore(e)&&"quantitative"===e.type&&!(e.field in t)&&(t[e.field]="number")}}return t}class cle extends Aae{constructor(e,t){super(e),this._parse=t}clone(){return new cle(null,Z6(this._parse))}hash(){return`Parse ${r4(this._parse)}`}static makeExplicit(e,t,n){let r={};const i=t.data;return!mae(i)&&i&&i.format&&i.format.parse&&(r=i.format.parse),this.makeWithAncestors(e,r,{},n)}static makeWithAncestors(e,t,n,r){for(const e of y4(n)){const t=r.getWithExplicit(e);void 0!==t.value&&(t.explicit||t.value===n[e]||"derived"===t.value||"flatten"===n[e]?delete n[e]:g7.warn(y7.differentParse(e,n[e],t.value)))}for(const e of y4(t)){const n=r.get(e);void 0!==n&&(n===t[e]?delete t[e]:g7.warn(y7.differentParse(e,t[e],n)))}const i=new oae(t,n);r.copyAll(i);const o={};for(const e of y4(i.combine())){const t=i.get(e);null!==t&&(o[e]=t)}return 0===y4(o).length||r.parseNothing?null:new cle(e,o)}get parse(){return this._parse}merge(e){this._parse={...this._parse,...e.parse},e.remove()}assembleFormatParse(){const e={};for(const t of y4(this._parse)){const n=this._parse[t];1===N4(t)&&(e[t]=n)}return e}producedFields(){return new Set(y4(this._parse))}dependentFields(){return new Set(y4(this._parse))}assembleTransforms(e=!1){return y4(this._parse).filter((t=>!e||N4(t)>1)).map((e=>{const t=function(e,t){const n=S4(e);if("number"===t)return`toNumber(${n})`;if("boolean"===t)return`toBoolean(${n})`;if("string"===t)return`toString(${n})`;if("date"===t)return`toDate(${n})`;if("flatten"===t)return n;if(t.startsWith("date:"))return`timeParse(${n},'${sle(t.slice(5,t.length))}')`;if(t.startsWith("utc:"))return`utcParse(${n},'${sle(t.slice(4,t.length))}')`;return g7.warn(y7.unrecognizedParse(t)),null}(e,this._parse[e]);if(!t)return null;return{type:"formula",expr:t,as:F4(e)}})).filter((e=>null!==e))}}class fle extends Aae{clone(){return new fle(null)}constructor(e){super(e)}dependentFields(){return new Set}producedFields(){return new Set([Oie])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Oie}}}var dle={};class hle extends Aae{constructor(e,t){super(e),this.params=t}clone(){return new hle(null,this.params)}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${r4(this.params)}`}assemble(){return{type:"graticule",...!0===this.params?{}:this.params}}}class ple extends Aae{constructor(e,t){super(e),this.params=t}clone(){return new ple(null,this.params)}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${r4(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class mle extends Aae{constructor(e){let t;if(super(null),e??(e={name:"source"}),mae(e)||(t=e.format?{...t4(e.format,["parse"])}:{}),hae(e))this._data={values:e.values};else if(dae(e)){if(this._data={url:e.url},!t.type){let n=/(?:\.([^.]+))?$/.exec(e.url)[1];o4(["json","csv","tsv","dsv","topojson"],n)||(n="json"),t.type=n}}else yae(e)?this._data={values:[{type:"Sphere"}]}:(pae(e)||mae(e))&&(this._data={});this._generator=mae(e),e.name&&(this._name=e.name),t&&!g4(t)&&(this._data.format=t)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(e){this._name=e}set parent(e){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var gle,yle=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},vle=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function ble(e){return e instanceof mle||e instanceof hle||e instanceof ple}n(dle,"isDataSourceNode",(function(){return ble}));class xle{constructor(){gle.set(this,void 0),yle(this,gle,!1)}setModified(){yle(this,gle,!0)}get modifiedFlag(){return vle(this,gle)}}n(dle,"Optimizer",(function(){return xle})),gle=new WeakMap;class wle extends xle{getNodeDepths(e,t,n){n.set(e,t);for(const r of e.children)this.getNodeDepths(r,t+1,n);return n}optimize(e){const t=[...this.getNodeDepths(e,0,new Map).entries()].sort(((e,t)=>t[1]-e[1]));for(const e of t)this.run(e[0]);return this.modifiedFlag}}n(dle,"BottomUpOptimizer",(function(){return wle}));class _le extends xle{optimize(e){this.run(e);for(const t of e.children)this.optimize(t);return this.modifiedFlag}}n(dle,"TopDownOptimizer",(function(){return _le}));class kle extends dle.TopDownOptimizer{mergeNodes(e,t){const n=t.shift();for(const r of t)e.removeChild(r),r.parent=n,r.remove()}run(e){const t=e.children.map((e=>e.hash())),n={};for(let r=0;r<t.length;r++)void 0===n[t[r]]?n[t[r]]=[e.children[r]]:n[t[r]].push(e.children[r]);for(const t of y4(n))n[t].length>1&&(this.setModified(),this.mergeNodes(e,n[t]))}}class Ele extends dle.TopDownOptimizer{constructor(e){super(),this.requiresSelectionId=e&&Lse(e)}run(e){e instanceof fle&&(this.requiresSelectionId&&(dle.isDataSourceNode(e.parent)||e.parent instanceof ole||e.parent instanceof cle)||(this.setModified(),e.remove()))}}class Sle extends dle.Optimizer{optimize(e){return this.run(e,new Set),this.modifiedFlag}run(e,t){let n=new Set;e instanceof Dae&&(n=e.producedFields(),h4(n,t)&&(this.setModified(),e.removeFormulas(t),0===e.producedFields.length&&e.remove()));for(const r of e.children)this.run(r,new Set([...t,...n]))}}class Ale extends dle.TopDownOptimizer{constructor(){super()}run(e){e instanceof Cae&&!e.isRequired()&&(this.setModified(),e.remove())}}class Cle extends dle.BottomUpOptimizer{run(e){if(!(dle.isDataSourceNode(e)||e.numChildren()>1))for(const t of e.children)if(t instanceof cle)if(e instanceof cle)this.setModified(),e.merge(t);else{if(m4(e.producedFields(),t.dependentFields()))continue;this.setModified(),t.swapWithParent()}}}class Dle extends dle.BottomUpOptimizer{run(e){const t=[...e.children],n=e.children.filter((e=>e instanceof cle));if(e.numChildren()>1&&n.length>=1){const r={},i=new Set;for(const e of n){const t=e.parse;for(const e of y4(t))e in r?r[e]!==t[e]&&i.add(e):r[e]=t[e]}for(const e of i)delete r[e];if(!g4(r)){this.setModified();const n=new cle(e,r);for(const i of t){if(i instanceof cle)for(const e of y4(r))delete i.parse[e];e.removeChild(i),i.parent=n,i instanceof cle&&0===y4(i.parse).length&&i.remove()}}}}}class Mle extends dle.BottomUpOptimizer{run(e){e instanceof Cae||e.numChildren()>0||e instanceof ale||e instanceof mle||(this.setModified(),e.remove())}}class Fle extends dle.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof Dae)),n=t.pop();for(const e of t)this.setModified(),n.merge(e)}}class Nle extends dle.BottomUpOptimizer{run(e){const t=e.children.filter((e=>e instanceof ole)),n={};for(const e of t){const t=r4(e.groupBy);t in n||(n[t]=[]),n[t].push(e)}for(const t of y4(n)){const r=n[t];if(r.length>1){const t=r.pop();for(const n of r)t.merge(n)&&(e.removeChild(n),n.parent=t,n.remove(),this.setModified())}}}}class Ole extends dle.BottomUpOptimizer{constructor(e){super(),this.model=e}run(e){const t=!(dle.isDataSourceNode(e)||e instanceof qse||e instanceof cle||e instanceof fle),n=[],r=[];for(const i of e.children)i instanceof rle&&(t&&!m4(e.producedFields(),i.dependentFields())?n.push(i):r.push(i));if(n.length>0){const t=n.pop();for(const e of n)t.merge(e,this.model.renameSignal.bind(this.model));this.setModified(),e instanceof rle?e.merge(t,this.model.renameSignal.bind(this.model)):t.swapWithParent()}if(r.length>1){const e=r.pop();for(const t of r)e.merge(t,this.model.renameSignal.bind(this.model));this.setModified()}}}class Tle extends dle.BottomUpOptimizer{run(e){const t=[...e.children];if(!a4(t,(e=>e instanceof Cae))||e.numChildren()<=1)return;const n=[];let r;for(const i of t)if(i instanceof Cae){let t=i;for(;1===t.numChildren();){const[e]=t.children;if(!(e instanceof Cae))break;t=e}n.push(...t.children),r?(e.removeChild(i),i.parent=r.parent,r.parent.removeChild(r),r.parent=t,this.setModified()):r=t}else n.push(i);if(n.length){this.setModified();for(const e of n)e.parent.removeChild(e),e.parent=r}}}class $le extends Aae{constructor(e,t){super(e),this.transform=t}clone(){return new $le(null,Z6(this.transform))}addDimensions(e){this.transform.groupby=c4(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return this.transform.groupby&&this.transform.groupby.forEach(e.add,e),this.transform.joinaggregate.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(e){return e.as??vre(e)}hash(){return`JoinAggregateTransform ${r4(this.transform)}`}assemble(){const e=[],t=[],n=[];for(const r of this.transform.joinaggregate)t.push(r.op),n.push(this.getDefaultName(r)),e.push(void 0===r.field?null:r.field);const r=this.transform.groupby;return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==r?{groupby:r}:{}}}}class zle extends Aae{constructor(e,t){super(e),this._stack=t}clone(){return new zle(null,Z6(this._stack))}static makeFromTransform(e,t){const{stack:n,groupby:r,as:i,offset:o="zero"}=t,a=[],s=[];if(void 0!==t.sort)for(const e of t.sort)a.push(e.field),s.push(O4(e.order,"ascending"));const u={field:a,order:s};let l;return l=function(e){return VC(e)&&e.every((e=>UD(e)))&&e.length>1}(i)?i:UD(i)?[i,`${i}_end`]:[`${t.stack}_start`,`${t.stack}_end`],new zle(e,{stackField:n,groupby:r,offset:o,sort:u,facetby:[],as:l})}static makeFromEncoding(e,t){const n=t.stack,{encoding:r}=t;if(!n)return null;const{groupbyChannel:i,fieldChannel:o,offset:a,impute:s}=n;let u;if(i){u=Cre(r[i])}const l=function(e){return e.stack.stackBy.reduce(((e,t)=>{const n=vre(t.fieldDef);return n&&e.push(n),e}),[])}(t),c=t.encoding.order;let f;return f=VC(c)||ore(c)?d7(c):l.reduce(((e,t)=>(e.field.push(t),e.order.push("y"===o?"descending":"ascending"),e)),{field:[],order:[]}),new zle(e,{dimensionFieldDef:u,stackField:t.vgField(o),facetby:[],stackby:l,sort:f,offset:a,impute:s,as:[t.vgField(o,{suffix:"start",forAs:!0}),t.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(e){this._stack.facetby.push(...e)}dependentFields(){const e=new Set;return e.add(this._stack.stackField),this.getGroupbyFields().forEach(e.add,e),this._stack.facetby.forEach(e.add,e),this._stack.sort.field.forEach(e.add,e),e}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${r4(this._stack)}`}getGroupbyFields(){const{dimensionFieldDef:e,impute:t,groupby:n}=this._stack;return e?e.bin?t?[vre(e,{binSuffix:"mid"})]:[vre(e,{}),vre(e,{binSuffix:"end"})]:[vre(e)]:n??[]}assemble(){const e=[],{facetby:t,dimensionFieldDef:n,stackField:r,stackby:i,sort:o,offset:a,impute:s,as:u}=this._stack;if(s&&n){const{bandPosition:o=.5,bin:a}=n;a&&e.push({type:"formula",expr:`${o}*`+vre(n,{expr:"datum"})+`+${1-o}*`+vre(n,{expr:"datum",binSuffix:"end"}),as:vre(n,{binSuffix:"mid",forAs:!0})}),e.push({type:"impute",field:r,groupby:[...i,...t],key:vre(n,{binSuffix:"mid"}),method:"value",value:0})}return e.push({type:"stack",groupby:[...this.getGroupbyFields(),...t],field:r,sort:o,as:u,offset:a}),e}}class Rle extends Aae{constructor(e,t){super(e),this.transform=t}clone(){return new Rle(null,Z6(this.transform))}addDimensions(e){this.transform.groupby=c4(this.transform.groupby.concat(e),(e=>e))}dependentFields(){const e=new Set;return(this.transform.groupby??[]).forEach(e.add,e),(this.transform.sort??[]).forEach((t=>e.add(t.field))),this.transform.window.map((e=>e.field)).filter((e=>void 0!==e)).forEach(e.add,e),e}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(e){return e.as??vre(e)}hash(){return`WindowTransform ${r4(this.transform)}`}assemble(){const e=[],t=[],n=[],r=[];for(const i of this.transform.window)t.push(i.op),n.push(this.getDefaultName(i)),r.push(void 0===i.param?null:i.param),e.push(void 0===i.field?null:i.field);const i=this.transform.frame,o=this.transform.groupby;if(i&&null===i[0]&&null===i[1]&&t.every((e=>T9(e))))return{type:"joinaggregate",as:n,ops:t,fields:e,...void 0!==o?{groupby:o}:{}};const a=[],s=[];if(void 0!==this.transform.sort)for(const e of this.transform.sort)a.push(e.field),s.push(e.order??"ascending");const u={field:a,order:s},l=this.transform.ignorePeers;return{type:"window",params:r,as:n,ops:t,fields:e,sort:u,...void 0!==l?{ignorePeers:l}:{},...void 0!==o?{groupby:o}:{},...void 0!==i?{frame:i}:{}}}}function Ple(e){if(e instanceof ale)if(1!==e.numChildren()||e.children[0]instanceof Cae){const n=e.model.component.data.main;Lle(n);const r=(t=e,function e(n){if(!(n instanceof ale)){const r=n.clone();if(r instanceof Cae){const e=Ble+r.getSource();r.setSource(e),t.model.component.data.outputNodes[e]=r}else(r instanceof ole||r instanceof zle||r instanceof Rle||r instanceof $le)&&r.addDimensions(t.fields);for(const t of n.children.flatMap(e))t.parent=r;return[r]}return n.children.flatMap(e)}),i=e.children.map(r).flat();for(const e of i)e.parent=n}else{const t=e.children[0];(t instanceof ole||t instanceof zle||t instanceof Rle||t instanceof $le)&&t.addDimensions(e.fields),t.swapWithParent(),Ple(e)}else e.children.map(Ple);var t}function Lle(e){if(e instanceof Cae&&e.type===bae.Main&&1===e.numChildren()){const t=e.children[0];t instanceof ale||(t.swapWithParent(),Lle(e))}}const Ble="scale_";function Ile(e){for(const t of e){for(const e of t.children)if(e.parent!==t)return!1;if(!Ile(t.children))return!1}return!0}function jle(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function Ule(e,t,n){let r=e.sources,i=!1;return i=jle(new Ale,r)||i,i=jle(new Ele(t),r)||i,r=r.filter((e=>e.numChildren()>0)),i=jle(new Mle,r)||i,r=r.filter((e=>e.numChildren()>0)),n||(i=jle(new Cle,r)||i,i=jle(new Ole(t),r)||i,i=jle(new Sle,r)||i,i=jle(new Dle,r)||i,i=jle(new Nle,r)||i,i=jle(new Fle,r)||i,i=jle(new kle,r)||i,i=jle(new Tle,r)||i),e.sources=r,i}class qle{constructor(e){Object.defineProperty(this,"signal",{enumerable:!0,get:e})}static fromName(e,t){return new qle((()=>e(t)))}}function Wle(e){bce(e)?function(e){const t=e.component.scales;for(const n of y4(t)){const r=Hle(e,n);if(t[n].setWithExplicit("domains",r),Xle(e,n),e.component.data.isFaceted){let t=e;for(;!xce(t)&&t.parent;)t=t.parent;if("shared"===t.component.resolve.scale[n])for(const e of r.value)Q9(e)&&(e.data=Ble+e.data.replace(Ble,""))}}}(e):function(e){for(const t of e.children)Wle(t);const t=e.component.scales;for(const n of y4(t)){let r,i=null;for(const t of e.children){const e=t.component.scales[n];if(e){r=void 0===r?e.getWithExplicit("domains"):cae(r,e.getWithExplicit("domains"),"domains","scale",Jle);const t=e.get("selectionExtent");i&&t&&i.param!==t.param&&g7.warn(y7.NEEDS_SAME_SELECTION),i=t}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}(e)}function Hle(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=function(e,t,n,r){if("unaggregated"===e){const{valid:e,reason:r}=Qle(t,n);if(!e)return void g7.warn(r)}else if(void 0===e&&r.useUnaggregatedDomain){const{valid:e}=Qle(t,n);if(e)return"unaggregated"}return e}(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),"x"===t&&Dre(r.x2)?Dre(r.x)?cae(Gle(n,i,e,"x"),Gle(n,i,e,"x2"),"domain","scale",Jle):Gle(n,i,e,"x2"):"y"===t&&Dre(r.y2)?Dre(r.y)?cae(Gle(n,i,e,"y"),Gle(n,i,e,"y2"),"domain","scale",Jle):Gle(n,i,e,"y2"):Gle(n,i,e,t)}function Vle(e,t,n){const r=Yee(n)?.unit;return"temporal"===t||r?function(e,t,n){return e.map((e=>({signal:`{data: ${zre(e,{timeUnit:n,type:t})}}`})))}(e,t,r):[e]}function Gle(e,t,n,r){const{encoding:i}=n,o=Dre(i[r]),{type:a}=o,s=o.timeUnit;if(function(e){return e&&e.unionWith}(t)){const i=Gle(e,void 0,n,r),o=Vle(t.unionWith,a,s);return aae([...i.value,...o])}if(Y9(t))return aae([t]);if(t&&"unaggregated"!==t&&!Bte(t))return aae(Vle(t,a,s));const u=n.stack;if(u&&r===u.fieldChannel){if("normalize"===u.offset)return sae([[0,1]]);const e=n.requestDataName(bae.Main);return sae([{data:e,field:n.vgField(r,{suffix:"start"})},{data:e,field:n.vgField(r,{suffix:"end"})}])}const l=k9(r)&&ore(o)?function(e,t,n){if(!zte(n))return;const r=e.fieldDef(t),i=r.sort;if(Gne(i))return{op:"min",field:aue(r,t),order:"ascending"};const{stack:o}=e,a=o?[...o.groupbyField?[o.groupbyField]:[],...o.stackBy.map((e=>e.fieldDef.field))]:void 0;if(Vne(i)){return Yle(i,o&&!o4(a,i.field))}if(Hne(i)){const{encoding:t,order:n}=i,r=e.fieldDef(t),{aggregate:s,field:u}=r,l=o&&!o4(a,u);if(N9(s)||O9(s))return Yle({field:vre(r),order:n},l);if(T9(s)||!s)return Yle({op:s,field:u,order:n},l)}else{if("descending"===i)return{op:"min",field:e.vgField(t),order:"descending"};if(o4(["ascending",void 0],i))return!0}return}(n,r,e):void 0;if(sre(o)){return sae(Vle([o.datum],a,s))}const c=o;if("unaggregated"===t){const e=n.requestDataName(bae.Main),{field:t}=o;return sae([{data:e,field:vre({field:t,aggregate:"min"})},{data:e,field:vre({field:t,aggregate:"max"})}])}if(B9(c.bin)){if(zte(e))return sae("bin-ordinal"===e?[]:[{data:x4(l)?n.requestDataName(bae.Main):n.requestDataName(bae.Raw),field:n.vgField(r,Pre(c,r)?{binSuffix:"range"}:{}),sort:!0!==l&&GC(l)?l:{field:n.vgField(r,{}),op:"min"}}]);{const{bin:e}=c;if(B9(e)){const t=tle(n,c.field,e);return sae([new qle((()=>{const e=n.getSignalName(t);return`[${e}.start, ${e}.stop]`}))])}return sae([{data:n.requestDataName(bae.Main),field:n.vgField(r,{})}])}}if(c.timeUnit&&o4(["time","utc"],e)&&tre(c,bce(n)?n.encoding[q8(r)]:void 0,n.markDef,n.config)){const e=n.requestDataName(bae.Main);return sae([{data:e,field:n.vgField(r)},{data:e,field:n.vgField(r,{suffix:"end"})}])}return sae(l?[{data:x4(l)?n.requestDataName(bae.Main):n.requestDataName(bae.Raw),field:n.vgField(r),sort:l}]:[{data:n.requestDataName(bae.Main),field:n.vgField(r)}])}function Yle(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":Une),...r?{field:D4(r)}:{},...i?{order:i}:{}}}function Xle(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=Bte(r)&&r,a=j9(i)&&U9(i.extent)&&i.extent;(o||a)&&n.set("selectionExtent",o??a,!0)}function Qle(e,t){const{aggregate:n,type:r}=e;return n?UD(n)&&!P9[n]?{valid:!1,reason:y7.unaggregateDomainWithNonSharedDomainOp(n)}:"quantitative"===r&&"log"===t?{valid:!1,reason:y7.unaggregatedDomainWithLogScale(e)}:{valid:!0}:{valid:!1,reason:y7.unaggregateDomainHasNoEffectForRawField(e)}}function Jle(e,t,n,r){return e.explicit&&t.explicit&&g7.warn(y7.mergeConflictingDomainProperty(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Kle(e){if(Q9(e)&&UD(e.field))return e.field;if(function(e){return!VC(e)&&"fields"in e&&!("data"in e)}(e)){let t;for(const n of e.fields)if(Q9(n)&&UD(n.field))if(t){if(t!==n.field)return g7.warn(y7.FACETED_INDEPENDENT_DIFFERENT_SOURCES),t}else t=n.field;return g7.warn(y7.FACETED_INDEPENDENT_SAME_FIELDS_DIFFERENT_SOURCES),t}if(function(e){return!VC(e)&&"fields"in e&&"data"in e}(e)){g7.warn(y7.FACETED_INDEPENDENT_SAME_SOURCE);const t=e.fields[0];return UD(t)?t:void 0}}function Zle(e,t){return function(e){const t=c4(e.map((e=>{if(Q9(e)){const{sort:t,...n}=e;return n}return e})),r4),n=c4(e.map((e=>{if(Q9(e)){const t=e.sort;return void 0===t||x4(t)||("op"in t&&"count"===t.op&&delete t.field,"ascending"===t.order&&delete t.order),t}})).filter((e=>void 0!==e)),r4);if(0===t.length)return;if(1===t.length){const t=e[0];if(Q9(t)&&n.length>0){let e=n[0];if(n.length>1)g7.warn(y7.MORE_THAN_ONE_SORT),e=!0;else if(GC(e)&&"field"in e){const n=e.field;t.field===n&&(e=!e.order||{order:e.order})}return{...t,sort:e}}return t}const r=c4(n.map((e=>x4(e)||!("op"in e)||UD(e.op)&&e.op in F9?e:(g7.warn(y7.domainSortDropped(e)),!0))),r4);let i;1===r.length?i=r[0]:r.length>1&&(g7.warn(y7.MORE_THAN_ONE_SORT),i=!0);const o=c4(e.map((e=>Q9(e)?e.data:null)),(e=>e));if(1===o.length&&null!==o[0])return{data:o[0],fields:t.map((e=>e.field)),...i?{sort:i}:{}};return{fields:t,...i?{sort:i}:{}}}(e.component.scales[t].get("domains").map((t=>(Q9(t)&&(t.data=e.lookupDataSource(t.data)),t))))}function ece(e){return _ce(e)||wce(e)?e.children.reduce(((e,t)=>e.concat(ece(t))),tce(e)):tce(e)}function tce(e){return y4(e.component.scales).reduce(((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:u,range:l,reverse:c,...f}=i,d=function(e,t,n,r){if(s9(n)){if(X9(e))return{step:{signal:`${t}_step`}}}else if(GC(e)&&Q9(e))return{...e,data:r.lookupDataSource(e.data)};return e}(i.range,o,n,e),h=Zle(e,n),p=s?function(e,t,n,r){const i=Hse(e,t.param,t);return{signal:Rte(n.get("type"))&&VC(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}(e,s,r,h):null;return t.push({name:o,type:a,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...void 0!==c?{reverse:c}:{},...f}),t}),[])}class nce extends oae{constructor(e,t){super({},{name:e}),this.merged=!1,this.setWithExplicit("type",t)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")||a4(this.get("domains"),(e=>VC(e)&&2===e.length&&e[0]<=0&&e[1]>=0))}}const rce=["range","scheme"];function ice(e){return"x"===e?"width":"y"===e?"height":void 0}function oce(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=ice(t),a=e.getName(o);if(GC(r)&&r.binned&&void 0!==r.step)return new qle((()=>{const n=e.scaleName(t),i=`(domain("${n}")[1] - domain("${n}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${i})`}));if(B9(r)){const t=tle(e,i,r);return new qle((()=>{const n=e.getSignalName(t),r=`(${n}.stop - ${n}.start) / ${n}.step`;return`${e.getSignalName(a)} / (${r})`}))}}}function ace(e,t){const n=t.specifiedScales[e],{size:r}=t,i=t.getScaleComponent(e).get("type");for(const r of rce)if(void 0!==n[r]){const o=Xte(i,r),a=Qte(e,r);if(o)if(a)g7.warn(a);else switch(r){case"range":{const r=n.range;if(VC(r)){if(s9(e))return aae(r.map((e=>{if("width"===e||"height"===e){const n=t.getName(e),r=t.getSignalName.bind(t);return qle.fromName(r,n)}return e})))}else if(GC(r))return aae({data:t.requestDataName(bae.Main),field:r.field,sort:{op:"min",field:t.vgField(e)}});return aae(r)}case"scheme":return aae(sce(n[r]))}else g7.warn(y7.scalePropertyNotWorkWithScaleType(i,r,e))}if(e===q4||e===W4){const t=e===q4?"width":"height",n=r[t];if(jie(n)){if(zte(i))return aae({step:n.step});g7.warn(y7.stepDropped(t))}}const{rangeMin:o,rangeMax:a}=n,s=function(e,t){const{size:n,config:r,mark:i,encoding:o}=t,a=t.getSignalName.bind(t),{type:s}=Dre(o[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case q4:case W4:{if(o4(["point","band"],u))if(e!==q4||n.width){if(e===W4&&!n.height){const e=Vie(r.view,"height");if(jie(e))return e}}else{const e=Vie(r.view,"width");if(jie(e))return e}const i=ice(e),o=t.getName(i);return e===W4&&Rte(u)?[qle.fromName(a,o),0]:[0,qle.fromName(a,o)]}case o8:{const o=uce(i,t.component.scales[e].get("zero"),r),a=function(e,t,n,r){const i={x:oce(n,"x"),y:oce(n,"y")};switch(e){case"bar":case"tick":{if(void 0!==r.scale.maxBandSize)return r.scale.maxBandSize;const e=cce(t,i,r.view);return ID(e)?e-1:new qle((()=>`${e.signal} - 1`))}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const e=cce(t,i,r.view);return ID(e)?Math.pow(lce*e,2):new qle((()=>`pow(0.95 * ${e.signal}, 2)`))}}throw new Error(y7.incompatibleChannel("size",e))}(i,n,t,r);return Lte(u)?function(e,t,n){const r=()=>{const r=o7(t),i=o7(e),o=`(${r} - ${i}) / (${n} - 1)`;return`sequence(${i}, ${r} + ${o}, ${o})`};return Y9(t)?new qle(r):{signal:r()}}(o,a,function(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return void 0!==n&&VC(n)?n.length+1:(g7.warn(y7.domainRequiredForThresholdScale(r)),3)}}(u,r,l,e)):[o,a]}case X4:return[0,2*Math.PI];case a8:return[0,360];case G4:return[0,new qle((()=>`min(${t.getSignalName("width")},${t.getSignalName("height")})/2`))];case c8:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case f8:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case i8:return"symbol";case t8:case n8:case r8:return"ordinal"===u?"nominal"===s?"category":"ordinal":void 0!==c?"diverging":"rect"===i||"geoshape"===i?"heatmap":"ramp";case s8:case u8:case l8:return[r.scale.minOpacity,r.scale.maxOpacity]}throw new Error(`Scale range undefined for channel ${e}`)}(e,t);return(void 0!==o||void 0!==a)&&Xte(i,"rangeMin")&&VC(s)&&2===s.length?aae([o??s[0],a??s[1]]):sae(s)}function sce(e){return function(e){return!UD(e)&&!!e.name}(e)?{scheme:e.name,...t4(e,["name"])}:{scheme:e}}function uce(e,t,n){if(t)return Y9(t)?{signal:`${t.signal} ? 0 : ${uce(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(y7.incompatibleChannel("size",e))}const lce=.95;function cce(e,t,n){const r=jie(e.width)?e.width.step:Hie(n,"width"),i=jie(e.height)?e.height.step:Hie(n,"height");return t.x||t.y?new qle((()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`)):Math.min(r,i)}function fce(e,t){bce(e)?function(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of y4(n)){const u=a[s],l=n[s],c=e.getScaleComponent(s),f=Dre(i[s]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=Xte(h,t),y=Qte(s,t);if(void 0!==d&&(g?y&&g7.warn(y):g7.warn(y7.scalePropertyNotWorkWithScaleType(h,t,s))),g&&void 0===y)if(void 0!==d){const e=f.timeUnit,n=f.type;switch(t){case"domainMax":case"domainMin":Tee(u[t])||"temporal"===n||e?l.set(t,{signal:zre(u[t],{type:n,timeUnit:e})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const n=t in dce?dce[t]({model:e,channel:s,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,markDef:o,config:r}):r.scale[t];void 0!==n&&l.set(t,n,!1)}}}(e,t):pce(e,t)}const dce={bins:({model:e,fieldOrDatumDef:t})=>ore(t)?function(e,t){const n=t.bin;if(B9(n)){const r=tle(e,t.field,n);return new qle((()=>e.getSignalName(r)))}if(I9(n)&&j9(n)&&void 0!==n.step)return{step:n.step};return}(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>function(e,t){if(o4([t8,n8,r8],e)&&"nominal"!==t)return"hcl";return}(e,t.type),nice:({scaleType:e,channel:t,domain:n,fieldOrDatumDef:r})=>function(e,t,n,r){if(Cre(r)?.bin||VC(n)||o4([vte,bte],e))return;return t in o9||void 0}(e,t,n,r),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>function(e,t,n,r,i,o){if(e in o9){if(Pte(t)){if(void 0!==n.continuousPadding)return n.continuousPadding;const{type:t,orient:a}=i;if("bar"===t&&(!ore(r)||!r.bin&&!r.timeUnit)&&("vertical"===a&&"x"===e||"horizontal"===a&&"y"===e))return o.continuousBandSize}if(t===kte)return n.pointPadding}return}(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,config:r})=>function(e,t,n,r){if(void 0!==e)return;if(t in o9){const{bandPaddingInner:e,barBandPaddingInner:t,rectBandPaddingInner:i}=r;return O4(e,"bar"===n?t:i)}return}(e,t,n.type,r.scale),paddingOuter:({scalePadding:e,channel:t,scaleType:n,markDef:r,scalePaddingInner:i,config:o})=>function(e,t,n,r,i,o){if(void 0!==e)return;if(t in o9&&n===Ete){const{bandPaddingOuter:e}=o;return O4(e,Y9(i)?{signal:`${i.signal}/2`}:i/2)}return}(e,t,n,r.type,i,o.scale),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>function(e,t,n,r){if("x"===n&&void 0!==r.xReverse)return Rte(e)&&"descending"===t?Y9(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Rte(e)&&"descending"===t)return!0;return}(t,ore(e)?e.sort:void 0,n,r.scale),zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i})=>function(e,t,n,r,i){if(n&&"unaggregated"!==n&&Rte(i)){if(VC(n)){const e=n[0],t=n[n.length-1];if(e<=0&&t>=0)return!0}return!1}if("size"===e&&"quantitative"===t.type&&!Lte(i))return!0;if((!ore(t)||!t.bin)&&o4([...a9,...l9],e)){const{orient:t,type:n}=r;return!o4(["bar","area","line","trail"],n)||!("horizontal"===t&&"y"===e||"vertical"===t&&"x"===e)}return!1}(e,t,n,r,i)};function hce(e){bce(e)?function(e){const t=e.component.scales;for(const n of _9){const r=t[n];if(!r)continue;const i=ace(n,e);r.setWithExplicit("range",i)}}(e):pce(e,"range")}function pce(e,t){const n=e.component.scales;for(const n of e.children)"range"===t?hce(n):fce(n,t);for(const r of y4(n)){let i;for(const n of e.children){const e=n.component.scales[r];if(e){i=cae(i,e.getWithExplicit(t),t,"scale",uae(((e,n)=>{switch(t){case"range":return e.step&&n.step?e.step-n.step:0}return 0})))}}n[r].setWithExplicit(t,i)}}function mce(e,t,n,r){const i=function(e,t,n){switch(t.type){case"nominal":case"ordinal":if(S8(e)||"discrete"===D9(e))return"shape"===e&&"ordinal"===t.type&&g7.warn(y7.discreteChannelCannotEncode(e,"ordinal")),"ordinal";if(e in o9){if(o4(["rect","bar","image","rule"],n.type))return"band"}else if("arc"===n.type&&e in u9)return"band";return bne(n[W8(e)])||pre(t)&&t.axis?.tickBand?"band":"point";case"temporal":return S8(e)?"time":"discrete"===D9(e)?(g7.warn(y7.discreteChannelCannotEncode(e,"temporal")),"ordinal"):ore(t)&&t.timeUnit&&Yee(t.timeUnit).utc?"utc":"time";case"quantitative":return S8(e)?ore(t)&&B9(t.bin)?"bin-ordinal":"linear":"discrete"===D9(e)?(g7.warn(y7.discreteChannelCannotEncode(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(y7.invalidFieldType(t.type))}(t,n,r),{type:o}=e;return k9(t)?void 0!==o?function(e,t){if(!k9(e))return!1;switch(e){case q4:case W4:case X4:case G4:return Pte(t)||o4(["band","point"],t);case o8:case c8:case s8:case u8:case l8:case a8:return Pte(t)||Lte(t)||o4(["band","point","ordinal"],t);case t8:case n8:case r8:return"band"!==t;case f8:case i8:return"ordinal"===t||Lte(t)}}(t,o)?ore(n)&&(a=o,s=n.type,!(o4([lte,fte],s)?void 0===a||zte(a):s===cte?o4([vte,bte,void 0],a):s!==ute||o4([pte,mte,gte,yte,xte,wte,_te,hte,void 0],a)))?(g7.warn(y7.scaleTypeNotWorkWithFieldDef(o,i)),i):o:(g7.warn(y7.scaleTypeNotWorkWithChannel(t,o,i)),i):i:null;var a,s}function gce(e){bce(e)?e.component.scales=function(e){const{encoding:t,mark:n,markDef:r}=e;return _9.reduce(((i,o)=>{const a=Dre(t[o]);if(a&&n===fne&&o===i8&&a.type===dte)return i;let s=a&&a.scale;if(a&&null!==s&&!1!==s){s??(s={});const t=mce(s,o,a,r);i[o]=new nce(e.scaleName(`${o}`,!0),{value:t,explicit:s.type===t})}return i}),{})}(e):e.component.scales=function(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const n of e.children){gce(n);for(const o of y4(n.component.scales))if((t=i.scale)[o]??(t[o]=Due(o,e)),"shared"===i.scale[o]){const e=r[o],t=n.component.scales[o].getWithExplicit("type");e?Ate(e.value,t.value)?r[o]=cae(e,t,"type","scale",yce):(i.scale[o]="independent",delete r[o]):r[o]=t}}for(const t of y4(r)){const i=e.scaleName(t,!0),o=r[t];n[t]=new nce(i,o);for(const n of e.children){const e=n.component.scales[t];e&&(n.renameScale(e.get("name"),i),e.merged=!0)}}return n}(e)}const yce=uae(((e,t)=>Dte(e)-Dte(t)));class vce{constructor(){this.nameMap={}}rename(e,t){this.nameMap[e]=t}has(e){return void 0!==this.nameMap[e]}get(e){for(;this.nameMap[e]&&e!==this.nameMap[e];)e=this.nameMap[e];return e}}function bce(e){return"unit"===e?.type}function xce(e){return"facet"===e?.type}function wce(e){return"concat"===e?.type}function _ce(e){return"layer"===e?.type}class kce{constructor(e,t,n,r,i,o,a){this.type=t,this.parent=n,this.config=i,this.correctDataNames=e=>(e.from&&e.from.data&&(e.from.data=this.lookupDataSource(e.from.data)),e.from&&e.from.facet&&e.from.facet.data&&(e.from.facet.data=this.lookupDataSource(e.from.facet.data)),e),this.parent=n,this.config=i,this.view=H9(a),this.name=e.name??r,this.title=G9(e.title)?{text:e.title}:e.title?H9(e.title):void 0,this.scaleNameMap=n?n.scaleNameMap:new vce,this.projectionNameMap=n?n.projectionNameMap:new vce,this.signalNameMap=n?n.signalNameMap:new vce,this.data=e.data,this.description=e.description,this.transforms=(e.transform??[]).map((e=>Doe(e)?{filter:J6(e.filter,ate)}:e)),this.layout="layer"===t||"unit"===t?{}:function(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;void 0!==o&&(i.spacing=o),void 0!==a&&(Qne(e)&&!Yne(e.facet)||Lie(e))&&(i.columns=a),Bie(e)&&(i.columns=1);for(const t of qie)if(void 0!==e[t])if("spacing"===t){const n=e[t];i[t]=ID(n)?n:{row:n.row??o,column:n.column??o}}else i[t]=e[t];return i}(e,t,i),this.component={data:{sources:n?n.component.data.sources:[],outputNodes:n?n.component.data.outputNodes:{},outputNodeRefCounts:n?n.component.data.outputNodeRefCounts:{},isFaceted:Qne(e)||n&&n.component.data.isFaceted&&void 0===e.data},layoutSize:new oae,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Z6(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){!function(e,{ignoreRange:t}={}){gce(e),Wle(e);for(const t of Yte)fce(e,t);t||hce(e)}(this)}parseProjection(){Kue(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width"),"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Uue(this)}assembleGroupStyle(){if("unit"===this.type||"layer"===this.type)return this.view?.style??"cell"}assembleEncodeFromView(e){const{style:t,...n}=e,r={};for(const e of y4(n)){const t=n[e];void 0!==t&&(r[e]=r7(t))}return r}assembleGroupEncodeEntry(e){let t={};return this.view&&(t=this.assembleEncodeFromView(this.view)),e||(this.description&&(t.description=r7(this.description)),"unit"!==this.type&&"layer"!==this.type)?g4(t)?void 0:t:{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...t??{}}}assembleLayout(){if(!this.layout)return;const{spacing:e,...t}=this.layout,{component:n,config:r}=this,i=function(e,t){const n={};for(const r of C8){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:e,titleOrient:o}=lue(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=sue(r,o),s=xue(e,a);void 0!==s&&(n[a]=s)}}return g4(n)?void 0:n}(n.layoutHeaders,r);return{padding:e,...this.assembleDefaultLayout(),...t,...i?{titleBand:i}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:e}=this.component;let t=[];for(const n of C8)e[n].title&&t.push(due(this,n));for(const e of cue)t=t.concat(mue(this,e));return t}assembleAxes(){return function(e,t){const{x:n=[],y:r=[]}=e;return[...n.map((e=>Yse(e,"grid",t))),...r.map((e=>Yse(e,"grid",t))),...n.map((e=>Yse(e,"main",t))),...r.map((e=>Yse(e,"main",t)))].filter((e=>e))}(this.component.axes,this.config)}assembleLegends(){return Gue(this)}assembleProjections(){return Yue(this)}assembleTitle(){const{encoding:e,...t}=this.title??{},n={...V9(this.config.title).nonMark,...t,...e?{encode:{update:e}}:{}};if(n.text)return o4(["unit","layer"],this.type)?o4(["middle",void 0],n.anchor)&&(n.frame??(n.frame="group")):n.anchor??(n.anchor="start"),g4(n)?void 0:n}assembleGroup(e=[]){const t={};(e=e.concat(this.assembleSignals())).length>0&&(t.signals=e);const n=this.assembleLayout();n&&(t.layout=n),t.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||xce(this.parent)?ece(this):[];r.length>0&&(t.scales=r);const i=this.assembleAxes();i.length>0&&(t.axes=i);const o=this.assembleLegends();return o.length>0&&(t.legends=o),t}getName(e){return w4((this.name?`${this.name}_`:"")+e)}getDataName(e){return this.getName(bae[e].toLowerCase())}requestDataName(e){const t=this.getDataName(e),n=this.component.data.outputNodeRefCounts;return n[t]=(n[t]||0)+1,t}getSizeSignalRef(e){if(xce(this.parent)){const t=c9(Aue(e)),n=this.component.scales[t];if(n&&!n.merged){const e=n.get("type"),r=n.get("range");if(zte(e)&&X9(r)){const e=n.get("name"),r=Kle(Zle(this,t));if(r){return{signal:Sue(e,n,vre({aggregate:"distinct",field:r},{expr:"datum"}))}}return g7.warn(y7.unknownField(t)),null}}}return{signal:this.signalNameMap.get(this.getName(e))}}lookupDataSource(e){const t=this.component.data.outputNodes[e];return t?t.getSource():e}getSignalName(e){return this.signalNameMap.get(e)}renameSignal(e,t){this.signalNameMap.rename(e,t)}renameScale(e,t){this.scaleNameMap.rename(e,t)}renameProjection(e,t){this.projectionNameMap.rename(e,t)}scaleName(e,t){return t?this.getName(e):L8(e)&&k9(e)&&this.component.scales[e]||this.scaleNameMap.has(this.getName(e))?this.scaleNameMap.get(this.getName(e)):void 0}projectionName(e){return e?this.getName("projection"):this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection"))?this.projectionNameMap.get(this.getName("projection")):void 0}getScaleComponent(e){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const t=this.component.scales[e];return t&&!t.merged?t:this.parent?this.parent.getScaleComponent(e):void 0}getSelectionComponent(e,t){let n=this.component.selection[e];if(!n&&this.parent&&(n=this.parent.getSelectionComponent(e,t)),!n)throw new Error(y7.selectionNotFound(t));return n}hasAxisOrientSignalRef(){return this.component.axes.x?.some?.((e=>e.hasOrientSignalRef()))||this.component.axes.y?.some?.((e=>e.hasOrientSignalRef()))}}class Ece extends kce{vgField(e,t={}){const n=this.fieldDef(e);if(n)return vre(n,t)}reduceFieldDef(e,t){return function(e,t,n,r){return e?y4(e).reduce(((n,i)=>{const o=e[i];return VC(o)?o.reduce(((e,n)=>t.call(r,e,n,i)),n):t.call(r,n,o,i)}),n):n}(this.getMapping(),((t,n,r)=>{const i=Cre(n);return i?e(t,i,r):t}),t)}forEachFieldDef(e,t){Zre(this.getMapping(),((t,n)=>{const r=Cre(t);r&&e(r,n)}),t)}}class Sce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"value",n[1]??"density"]}clone(){return new Sce(null,Z6(this.transform))}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${r4(this.transform)}`}assemble(){const{density:e,...t}=this.transform;return{type:"kde",field:e,...t}}}class Ace extends Aae{constructor(e,t){super(e),this.filter=t}clone(){return new Ace(null,{...this.filter})}static make(e,t){const{config:n,mark:r,markDef:i}=t;if("filter"!==u7("invalid",i,n))return null;const o=t.reduceFieldDef(((e,n,i)=>{const o=k9(i)&&t.getScaleComponent(i);if(o){Rte(o.get("type"))&&"count"!==n.aggregate&&!dne(r)&&(e[n.field]=n)}return e}),{});return y4(o).length?new Ace(e,o):null}dependentFields(){return new Set(y4(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${r4(this.filter)}`}assemble(){const e=y4(this.filter).reduce(((e,t)=>{const n=this.filter[t],r=vre(n,{expr:"datum"});return null!==n&&("temporal"===n.type?e.push(`(isDate(${r}) || (isValid(${r}) && isFinite(+${r})))`):"quantitative"===n.type&&(e.push(`isValid(${r})`),e.push(`isFinite(+${r})`))),e}),[]);return e.length>0?{type:"filter",expr:e.join(" && ")}:null}}class Cce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const{flatten:n,as:r=[]}=this.transform;this.transform.as=n.map(((e,t)=>r[t]??e))}clone(){return new Cce(this.parent,Z6(this.transform))}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${r4(this.transform)}`}assemble(){const{flatten:e,as:t}=this.transform;return{type:"flatten",fields:e,as:t}}}class Dce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"key",n[1]??"value"]}clone(){return new Dce(null,Z6(this.transform))}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${r4(this.transform)}`}assemble(){const{fold:e,as:t}=this.transform;return{type:"fold",fields:e,as:t}}}class Mce extends Aae{constructor(e,t,n,r){super(e),this.fields=t,this.geojson=n,this.signal=r}clone(){return new Mce(null,Z6(this.fields),this.geojson,this.signal)}static parseAll(e,t){if(t.component.projection&&!t.component.projection.isFit)return e;let n=0;for(const r of[[K4,J4],[e8,Z4]]){const i=r.map((e=>{const n=Dre(t.encoding[e]);return ore(n)?n.field:sre(n)?{expr:`${n.datum}`}:dre(n)?{expr:`${n.value}`}:void 0}));(i[0]||i[1])&&(e=new Mce(e,i,null,t.getName("geojson_"+n++)))}if(t.channelHasField(i8)){const r=t.typedFieldDef(i8);r.type===dte&&(e=new Mce(e,null,r.field,t.getName("geojson_"+n++)))}return e}dependentFields(){const e=(this.fields??[]).filter(UD);return new Set([...this.geojson?[this.geojson]:[],...e])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${r4(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Fce extends Aae{constructor(e,t,n,r){super(e),this.projection=t,this.fields=n,this.as=r}clone(){return new Fce(null,this.projection,Z6(this.fields),Z6(this.as))}static parseAll(e,t){if(!t.projectionName())return e;for(const n of[[K4,J4],[e8,Z4]]){const r=n.map((e=>{const n=Dre(t.encoding[e]);return ore(n)?n.field:sre(n)?{expr:`${n.datum}`}:dre(n)?{expr:`${n.value}`}:void 0})),i=n[0]===e8?"2":"";(r[0]||r[1])&&(e=new Fce(e,t.projectionName(),r,[t.getName(`x${i}`),t.getName(`y${i}`)]))}return e}dependentFields(){return new Set(this.fields.filter(UD))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${r4(this.fields)} ${r4(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Nce extends Aae{constructor(e,t){super(e),this.transform=t}clone(){return new Nce(null,Z6(this.transform))}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(e){const{start:t=0,stop:n,step:r}=e;return{signal:`sequence(${[t,n,...r?[r]:[]].join(",")})`}}static makeFromTransform(e,t){return new Nce(e,t)}static makeFromEncoding(e,t){const n=t.encoding,r=n.x,i=n.y;if(ore(r)&&ore(i)){const o=r.impute?r:i.impute?i:void 0;if(void 0===o)return;const a=r.impute?i:i.impute?r:void 0,{method:s,value:u,frame:l,keyvals:c}=o.impute,f=eie(t.mark,n);return new Nce(e,{impute:o.field,key:a.field,...s?{method:s}:{},...void 0!==u?{value:u}:{},...l?{frame:l}:{},...void 0!==c?{keyvals:c}:{},...f.length?{groupby:f}:{}})}return null}hash(){return`Impute ${r4(this.transform)}`}assemble(){const{impute:e,key:t,keyvals:n,method:r,groupby:i,value:o,frame:a=[null,null]}=this.transform,s={type:"impute",field:e,key:t,...n?{keyvals:(u=n,void 0!==u?.stop?this.processSequence(n):n)}:{},method:"value",...i?{groupby:i}:{},value:r&&"value"!==r?null:o};var u;if(r&&"value"!==r){return[s,{type:"window",as:[`imputed_${e}_value`],ops:[r],fields:[e],frame:a,ignorePeers:!1,...i?{groupby:i}:{}},{type:"formula",expr:`datum.${e} === null ? datum.imputed_${e}_value : datum.${e}`,as:e}]}return[s]}}class Oce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.loess]}clone(){return new Oce(null,Z6(this.transform))}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${r4(this.transform)}`}assemble(){const{loess:e,on:t,...n}=this.transform;return{type:"loess",x:t,y:e,...n}}}class Tce extends Aae{constructor(e,t,n){super(e),this.transform=t,this.secondary=n}clone(){return new Tce(null,Z6(this.transform),this.secondary)}static make(e,t,n,r){const i=t.component.data.sources,{from:o}=n;let a=null;if(function(e){return"data"in e}(o)){let e=Gce(o.data,i);e||(e=new mle(o.data),i.push(e));const n=t.getName(`lookup_${r}`);a=new Cae(e,n,bae.Lookup,t.component.data.outputNodeRefCounts),t.component.data.outputNodes[n]=a}else if(function(e){return"param"in e}(o)){const e=o.param;let r;n={as:e,...n};try{r=t.getSelectionComponent(w4(e),e)}catch(t){throw new Error(y7.cannotLookupVariableParameter(e))}if(a=r.materialized,!a)throw new Error(y7.noSameUnitLookup(e))}return new Tce(e,n,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?yD(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${r4({transform:this.transform,secondary:this.secondary})}`}assemble(){let e;if(this.transform.from.fields)e={values:this.transform.from.fields,...this.transform.as?{as:yD(this.transform.as)}:{}};else{let t=this.transform.as;UD(t)||(g7.warn(y7.NO_FIELDS_NEEDS_AS),t="_lookup"),e={as:[t]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...e,...this.transform.default?{default:this.transform.default}:{}}}}class $ce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??"prob",n[1]??"value"]}clone(){return new $ce(null,Z6(this.transform))}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${r4(this.transform)}`}assemble(){const{quantile:e,...t}=this.transform;return{type:"quantile",field:e,...t}}}class zce extends Aae{constructor(e,t){super(e),this.transform=t,this.transform=Z6(t);const n=this.transform.as??[void 0,void 0];this.transform.as=[n[0]??t.on,n[1]??t.regression]}clone(){return new zce(null,Z6(this.transform))}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${r4(this.transform)}`}assemble(){const{regression:e,on:t,...n}=this.transform;return{type:"regression",x:t,y:e,...n}}}class Rce extends Aae{constructor(e,t){super(e),this.transform=t}clone(){return new Rce(null,Z6(this.transform))}addDimensions(e){this.transform.groupby=c4((this.transform.groupby??[]).concat(e),(e=>e))}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${r4(this.transform)}`}assemble(){const{pivot:e,value:t,groupby:n,limit:r,op:i}=this.transform;return{type:"pivot",field:e,value:t,...void 0!==r?{limit:r}:{},...void 0!==i?{op:i}:{},...void 0!==n?{groupby:n}:{}}}}class Pce extends Aae{constructor(e,t){super(e),this.transform=t}clone(){return new Pce(null,Z6(this.transform))}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${r4(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Lce(e){let t=0;return function n(r,i){if(r instanceof mle&&!r.isGenerator&&!dae(r.data)){e.push(i);i={name:null,source:i.name,transform:[]}}if(r instanceof cle&&(r.parent instanceof mle&&!i.source?(i.format={...i.format??{},parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof ale)return i.name||(i.name="data_"+t++),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,void e.push(...r.assemble());if((r instanceof hle||r instanceof ple||r instanceof Ace||r instanceof qse||r instanceof oue||r instanceof Fce||r instanceof ole||r instanceof Tce||r instanceof Rle||r instanceof $le||r instanceof Dce||r instanceof Cce||r instanceof Sce||r instanceof Oce||r instanceof $ce||r instanceof zce||r instanceof fle||r instanceof Pce||r instanceof Rce)&&i.transform.push(r.assemble()),(r instanceof rle||r instanceof Dae||r instanceof Nce||r instanceof zle||r instanceof Mce)&&i.transform.push(...r.assemble()),r instanceof Cae)if(i.source&&0===i.transform.length)r.setSource(i.source);else if(r.parent instanceof Cae)r.setSource(i.name);else if(i.name||(i.name="data_"+t++),r.setSource(i.name),1===r.numChildren()){e.push(i);i={name:null,source:i.name,transform:[]}}switch(r.numChildren()){case 0:r instanceof Cae&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name="data_"+t++);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const e of r.children){n(e,{name:null,source:o,transform:[]})}break}}}}function Bce(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=uue("title",null,r,t);let u=kre(a,r,{allowDisabling:!0,includeDefault:void 0===s||!!s});i.component.layoutHeaders[t].title&&(u=VC(u)?u.join(", "):u,u+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const l=uue("labelOrient",a.header,r,t),c=null!==a.header&&O4(a.header?.labels,r.header.labels,!0),f=o4(["bottom","right"],l)?"footer":"header";o.layoutHeaders[t]={title:null!==a.header?u:null,facetFieldDef:a,[f]:"facet"===t?[]:[Ice(e,t,c)]}}}function Ice(e,t,n){const r="row"===t?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function jce(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:o}=e.component;if(o.axis[t]=Mue(o,t),"shared"===o.axis[t]){const o="x"===t?"column":"row",a=i[o];for(const i of n.component.axes[t]){const t="top"===(r=i.get("orient"))||"left"===r||Y9(r)?"header":"footer";a[t]??(a[t]=[Ice(e,o,!1)]);const n=Yse(i,"main",e.config,{header:!0});n&&a[t][0].axes.push(n),i.mainExtracted=!0}}}var r}function Uce(e){for(const t of e.children)t.parseLayoutSize()}function qce(e,t){const n=Aue(t),r=c9(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const t of e.children){const o=t.component.layoutSize.getWithExplicit(n),s=i.scale[r]??Due(r,e);if("independent"===s&&"step"===o.value){a=void 0;break}if(a){if("independent"===s&&a.value!==o.value){a=void 0;break}a=cae(a,o,n,"")}else a=o}if(a){for(const r of e.children)e.renameSignal(r.getName(n),e.getName(t)),r.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Wce(e,t){const n="width"===t?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const e=i.get("type"),n=i.get("range");if(zte(e)){const e=Vie(r.view,t);return X9(n)||jie(e)?"step":e}return Wie(r.view,t)}if(e.hasProjection||"arc"===e.mark)return Wie(r.view,t);{const e=Vie(r.view,t);return jie(e)?e.step:e}}function Hce(e,t,n){return vre(t,{suffix:`by_${vre(e)}`,...n??{}})}class Vce extends Ece{constructor(e,t,n,r){super(e,"facet",t,n,r,e.resolve),this.child=vfe(e.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(e.facet)}initFacet(e){if(!Yne(e))return{facet:this.initFacetFieldDef(e,"facet")};const t=y4(e),n={};for(const r of t){if(![I4,j4].includes(r)){g7.warn(y7.incompatibleChannel(r,"facet"));break}const t=e[r];if(void 0===t.field){g7.warn(y7.emptyFieldDef(t,r));break}n[r]=this.initFacetFieldDef(t,r)}return n}initFacetFieldDef(e,t){const n=Nre(e,t);return n.header?n.header=H9(n.header):null===n.header&&(n.header=null),n}channelHasField(e){return!!this.facet[e]}fieldDef(e){return this.facet[e]}parseData(){this.component.data=Yce(this),this.child.parseData()}parseLayoutSize(){Uce(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),function(e){for(const t of C8)Bce(e,t);jce(e,"x"),jce(e,"y")}(this)}assembleSelectionTopLevelSignals(e){return this.child.assembleSelectionTopLevelSignals(e)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(e){return this.child.assembleSelectionData(e)}getHeaderLayoutMixins(){const e={};for(const t of C8)for(const n of fue){const r=this.component.layoutHeaders[t],i=r[n],{facetFieldDef:o}=r;if(o){const n=uue("titleOrient",o.header,this.config,t);if(["right","bottom"].includes(n)){const r=sue(t,n);e.titleAnchor??(e.titleAnchor={}),e.titleAnchor[r]="end"}}if(i?.[0]){const i="row"===t?"height":"width",o="header"===n?"headerBand":"footerBand";"facet"===t||this.child.component.layoutSize.get(i)||(e[o]??(e[o]={}),e[o][t]=.5),r.title&&(e.offset??(e.offset={}),e.offset["row"===t?"rowTitle":"columnTitle"]=10)}}return e}assembleDefaultLayout(){const{column:e,row:t}=this.facet,n=e?this.columnDistinctSignal():t?1:void 0;let r="all";return(t||"independent"!==this.component.resolve.scale.x)&&(e||"independent"!==this.component.resolve.scale.y)||(r="none"),{...this.getHeaderLayoutMixins(),...n?{columns:n}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Vce)){return{signal:`length(data('${this.getName("column_domain")}'))`}}}assembleGroup(e){return this.parent&&this.parent instanceof Vce?{...this.channelHasField("column")?{encode:{update:{columns:{field:vre(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(e)}:super.assembleGroup(e)}getCardinalityAggregateForChild(){const e=[],t=[],n=[];if(this.child instanceof Vce){if(this.child.channelHasField("column")){const r=vre(this.child.facet.column);e.push(r),t.push("distinct"),n.push(`distinct_${r}`)}}else for(const r of a9){const i=this.child.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(zte(o)&&X9(a)){const i=Kle(Zle(this.child,r));i?(e.push(i),t.push("distinct"),n.push(`distinct_${i}`)):g7.warn(y7.unknownField(r))}}}return{fields:e,ops:t,as:n}}assembleFacet(){const{name:e,data:t}=this.component.data.facetRoot,{row:n,column:r}=this.facet,{fields:i,ops:o,as:a}=this.getCardinalityAggregateForChild(),s=[];for(const e of C8){const t=this.facet[e];if(t){s.push(vre(t));const{bin:u,sort:l}=t;if(B9(u)&&s.push(vre(t,{binSuffix:"end"})),Vne(l)){const{field:e,op:s=Une}=l,u=Hce(t,l);n&&r?(i.push(u),o.push("max"),a.push(u)):(i.push(e),o.push(s),a.push(u))}else if(VC(l)){const n=aue(t,e);i.push(n),o.push("max"),a.push(n)}}}const u=!!n&&!!r;return{name:e,data:t,groupby:s,...u||i.length>0?{aggregate:{...u?{cross:u}:{},...i.length?{fields:i,ops:o,as:a}:{}}}:{}}}facetSortFields(e){const{facet:t}=this,n=t[e];return n?Vne(n.sort)?[Hce(n,n.sort,{expr:"datum"})]:VC(n.sort)?[aue(n,e,{expr:"datum"})]:[vre(n,{expr:"datum"})]:[]}facetSortOrder(e){const{facet:t}=this,n=t[e];if(n){const{sort:e}=n;return[(Vne(e)?e.order:!VC(e)&&e)||"ascending"]}return[]}assembleLabelTitle(){const{facet:e,config:t}=this;if(e.facet)return yue(e.facet,"facet",t);const n={row:["top","bottom"],column:["left","right"]};for(const r of cue)if(e[r]){const i=uue("labelOrient",e[r]?.header,t,r);if(n[r].includes(i))return yue(e[r],r,t)}}assembleMarks(){const{child:e}=this,t=function(e){const t=[],n=Lce(t);for(const t of e.children)n(t,{source:e.name,name:null,transform:[]});return t}(this.component.data.facetRoot),n=e.assembleGroupEncodeEntry(!1),r=this.assembleLabelTitle()||e.assembleTitle(),i=e.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...r?{title:r}:{},...i?{style:i}:{},from:{facet:this.assembleFacet()},sort:{field:C8.map((e=>this.facetSortFields(e))).flat(),order:C8.map((e=>this.facetSortOrder(e))).flat()},...t.length>0?{data:t}:{},...n?{encode:{update:n}}:{},...e.assembleGroup(kae(this,[]))}]}getMapping(){return this.facet}}function Gce(e,t){for(const n of t){const t=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,i=t.format?.feature;if(r&&i)continue;const o=e.format?.feature;if((o||i)&&o!==i)continue;const a=t.format?.mesh;if(!r&&!a||r===a)if(hae(e)&&hae(t)){if(K6(e.values,t.values))return n}else if(dae(e)&&dae(t)){if(e.url===t.url)return n}else if(pae(e)&&e.name===n.dataName)return n}return null}function Yce(e){let t=function(e,t){if(e.data||!e.parent){if(null===e.data){const e=new mle({values:[]});return t.push(e),e}const n=Gce(e.data,t);if(n)return mae(e.data)||(n.data.format=u4({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const n=new mle(e.data);return t.push(n),n}}return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.parent?e.parent.component.data.ancestorParse.clone():new fae,o=e.data;mae(o)?(gae(o)?t=new ple(t,o.sequence):vae(o)&&(t=new hle(t,o.graticule)),i.parseNothing=!0):null===o?.format?.parse&&(i.parseNothing=!0),t=cle.makeExplicit(t,e,i)??t,t=new fle(t);const a=e.parent&&_ce(e.parent);(bce(e)||xce(e))&&a&&(t=rle.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=function(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(Boe(i))a=e=new oue(e,i),o="derived";else if(Doe(i)){const r=ule(i);a=e=cle.makeWithAncestors(e,{},r,n)??e,e=new qse(e,t,i.filter)}else if(Ioe(i))a=e=rle.makeFromTransform(e,i,t),o="number";else if(Uoe(i))o="date",void 0===n.getWithExplicit(i.field).value&&(e=new cle(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Dae.makeFromTransform(e,i);else if(qoe(i))a=e=ole.makeFromTransform(e,i),o="number",Lse(t)&&(e=new fle(e));else if(Moe(i))a=e=Tce.make(e,t,i,r++),o="derived";else if(Roe(i))a=e=new Rle(e,i),o="number";else if(Poe(i))a=e=new $le(e,i),o="number";else if(Woe(i))a=e=zle.makeFromTransform(e,i),o="derived";else if(Hoe(i))a=e=new Dce(e,i),o="derived";else if(Loe(i))a=e=new Cce(e,i),o="derived";else if(Foe(i))a=e=new Rce(e,i),o="derived";else if(zoe(i))e=new Pce(e,i);else if(joe(i))a=e=Nce.makeFromTransform(e,i),o="derived";else if(Noe(i))a=e=new Sce(e,i),o="derived";else if(Ooe(i))a=e=new $ce(e,i),o="derived";else if(Toe(i))a=e=new zce(e,i),o="derived";else{if(!$oe(i)){g7.warn(y7.invalidTransformIgnored(i));continue}a=e=new Oce(e,i),o="derived"}if(a&&void 0!==o)for(const e of a.producedFields()??[])n.set(e,o,!1)}return e}(t,e,i));const s=function(e){const t={};if(bce(e)&&e.component.selection)for(const n of y4(e.component.selection)){const r=e.component.selection[n];for(const e of r.project.items)!e.channel&&N4(e.field)>1&&(t[e.field]="flatten")}return t}(e),u=lle(e);t=cle.makeWithAncestors(t,{},{...s,...u},i)??t,bce(e)&&(t=Mce.parseAll(t,e),t=Fce.parseAll(t,e)),(bce(e)||xce(e))&&(a||(t=rle.makeFromEncoding(t,e)??t),t=Dae.makeFromEncoding(t,e)??t,t=oue.parseAllForSortIndex(t,e));const l=e.getDataName(bae.Raw),c=new Cae(t,l,bae.Raw,r);if(n[l]=c,t=c,bce(e)){const n=ole.makeFromEncoding(t,e);n&&(t=n,Lse(e)&&(t=new fle(t))),t=Nce.makeFromEncoding(t,e)??t,t=zle.makeFromEncoding(t,e)??t}bce(e)&&(t=Ace.make(t,e)??t);const f=e.getDataName(bae.Main),d=new Cae(t,f,bae.Main,r);n[f]=d,t=d,bce(e)&&function(e,t){for(const[n,r]of b4(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Cae(new qse(t,e,{param:n}),i,bae.Lookup,e.component.data.outputNodeRefCounts)}}(e,d);let h=null;if(xce(e)){const r=e.getName("facet");t=function(e,t){const{row:n,column:r}=t;if(n&&r){let t=null;for(const i of[n,r])if(Vne(i.sort)){const{field:n,op:r=Une}=i.sort;e=t=new $le(e,{joinaggregate:[{op:r,field:n,as:Hce(i,i.sort,{forAs:!0})}],groupby:[vre(i)]})}return t}return null}(t,e.facet)??t,h=new ale(t,e,r,d.getSource()),n[r]=h}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:d,facetRoot:h,ancestorParse:i}}class Xce extends kce{constructor(e,t,n,r){super(e,"concat",t,n,r,e.resolve),"shared"!==e.resolve?.axis?.x&&"shared"!==e.resolve?.axis?.y||g7.warn(y7.CONCAT_CANNOT_SHARE_AXIS),this.children=this.getChildren(e).map(((e,t)=>vfe(e,this,this.getName(`concat_${t}`),void 0,r)))}parseData(){this.component.data=Yce(this);for(const e of this.children)e.parseData()}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of y4(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){for(const e of this.children)e.parseAxesAndHeaders()}getChildren(e){return Bie(e)?e.vconcat:Iie(e)?e.hconcat:e.concat}parseLayoutSize(){!function(e){Uce(e);const t=1===e.layout.columns?"width":"childWidth",n=void 0===e.layout.columns?"height":"childHeight";qce(e,t),qce(e,n)}(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.forEach((e=>e.assembleSignals())),[]}assembleLayoutSignals(){const e=_ue(this);for(const t of this.children)e.push(...t.assembleLayoutSignals());return e}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleMarks(){return this.children.map((e=>{const t=e.assembleTitle(),n=e.assembleGroupStyle(),r=e.assembleGroupEncodeEntry(!1);return{type:"group",name:e.getName("group"),...t?{title:t}:{},...n?{style:n}:{},...r?{encode:{update:r}}:{},...e.assembleGroup()}}))}assembleDefaultLayout(){const e=this.layout.columns;return{...null!=e?{columns:e}:{},bounds:"full",align:"each"}}}const Qce={disable:1,gridScale:1,scale:1,...Ure,labelExpr:1,encode:1},Jce=y4(Qce);class Kce extends oae{constructor(e={},t={},n=!1){super(),this.explicit=e,this.implicit=t,this.mainExtracted=n}clone(){return new Kce(Z6(this.explicit),Z6(this.implicit),this.mainExtracted)}hasAxisPart(e){return"axis"===e||("grid"===e||"title"===e?!!this.get(e):!(!1===(t=this.get(e))||null===t));var t}hasOrientSignalRef(){return Y9(this.explicit.orient)}}const Zce={bottom:"top",top:"bottom",left:"right",right:"left"};function efe(e,t){if(!e)return t.map((e=>e.clone()));{if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const n=e[r],i=t[r];if(!!n!=!!i)return;if(n&&i){const t=n.getWithExplicit("orient"),o=i.getWithExplicit("orient");if(t.explicit&&o.explicit&&t.value!==o.value)return;e[r]=tfe(n,i)}}}return e}function tfe(e,t){for(const n of Jce){const r=cae(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",((e,t)=>{switch(n){case"title":return m7(e,t);case"gridScale":return{explicit:e.explicit,value:O4(e.value,t.value)}}return lae(e,t,n,"axis")}));e.setWithExplicit(n,r)}return e}function nfe(e,t,n,r,i){if("disable"===t)return void 0!==n;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Y9(n.labelAngle)?n.labelAngle:L4(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===iue(r,i))return!0}return e===n[t]}const rfe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function ife(e,t){let n=t.axis(e);const r=new Kce,i=Dre(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a["x"===e?"axisX":"axisY"]?.orient||a.axis?.orient||function(e){return"x"===e?"bottom":"left"}(e),u=t.getScaleComponent(e).get("type"),l=Jse(e,u,s,t.config),c=void 0!==n?!n:Zse("disable",a.style,n?.style,l).configValue;if(r.set("disable",c,void 0!==n),c)return r;n=n||{};const f=function(e,t,n,r,i){const o=t?.labelAngle;if(void 0!==o)return Y9(o)?o:L4(o);{const{configValue:o}=Zse("labelAngle",r,t?.style,i);return void 0!==o?L4(o):n!==q4||!o4([fte,lte],e.type)||ore(e)&&e.timeUnit?void 0:270}}(i,n,e,a.style,l),d={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:s,labelAngle:f,mark:o,config:a};for(const i of Jce){const o=i in eue?eue[i](d):Wre(i)?n[i]:void 0,s=void 0!==o,u=nfe(o,i,n,t,e);if(s&&u)r.set(i,o,u);else{const{configValue:e,configFrom:t}=Wre(i)&&"values"!==i?Zse(i,a.style,n.style,l):{},c=void 0!==e;s&&!c?r.set(i,o,u):("vgAxisConfig"!==t||rfe.has(i)&&c||Bre(e)||Y9(e))&&r.set(i,e,!1)}}const h=n.encoding??{},p=Ire.reduce(((n,i)=>{if(!r.hasAxisPart(i))return n;const o=Cue(h[i]??{},t),a="labels"===i?function(e,t,n){const{encoding:r,config:i}=e,o=Dre(r[t])??Dre(r[q8(t)]),a=e.axis(t)||{},{format:s,formatType:u}=a;return Nne(u)?{text:zne({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:u,config:i}),...n}:n}(t,e,o):o;return void 0===a||g4(a)||(n[i]={update:a}),n}),{});return g4(p)||r.set("encode",p,!!n.encoding||void 0!==n.labelAngle),r}function ofe(e,t,n){const r=H9(e),i=u7("orient",r,n);if(r.orient=function(e,t,n){switch(e){case rne:case lne:case cne:case ane:case ine:case tne:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case ene:if(ore(r)&&(I9(r.bin)||ore(i)&&i.aggregate&&!r.aggregate))return"vertical";if(ore(i)&&(I9(i.bin)||ore(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o&&(ore(r)&&r.type===ute&&!B9(r.bin)||lre(r)))return"horizontal";if(!a&&(ore(i)&&i.type===ute&&!B9(i.bin)||lre(i)))return"vertical"}case one:if(o&&(!ore(r)||!I9(r.bin))&&a&&(!ore(i)||!I9(i.bin)))return;case Zte:if(a)return ore(i)&&I9(i.bin)?"horizontal":"vertical";if(o)return ore(r)&&I9(r.bin)?"vertical":"horizontal";if(e===one){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case nne:case sne:{const t=ure(r),o=ure(i);if(n)return n;if(t&&!o)return"tick"!==e?"horizontal":"vertical";if(!t&&o)return"tick"!==e?"vertical":"horizontal";if(t&&o){const t=r,n=i,o=t.type===cte,a=n.type===cte;return o&&!a?"tick"!==e?"vertical":"horizontal":!o&&a?"tick"!==e?"horizontal":"vertical":!t.aggregate&&n.aggregate?"tick"!==e?"vertical":"horizontal":t.aggregate&&!n.aggregate&&"tick"!==e?"horizontal":"vertical"}return}}return"vertical"}(r.type,t,i),void 0!==i&&i!==r.orient&&g7.warn(y7.orientOverridden(r.orient,i)),"bar"===r.type&&r.orient){const e=u7("cornerRadiusEnd",r,n);if(void 0!==e){const n="horizontal"===r.orient&&t.x2||"vertical"===r.orient&&t.y2?["cornerRadius"]:xne[r.orient];for(const t of n)r[t]=e;void 0!==r.cornerRadiusEnd&&delete r.cornerRadiusEnd}}void 0===u7("opacity",r,n)&&(r.opacity=function(e,t){if(o4([rne,sne,lne,cne],e)&&!Xre(t))return.7;return}(r.type,t));return void 0===u7("cursor",r,n)&&(r.cursor=function(e,t,n){if(t.href||e.href||u7("href",e,n))return"pointer";return e.cursor}(r,t,n)),r}function afe(e,t){const{config:n}=e;return{...dse(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Zae("x",e,{defaultPos:"mid"}),...Zae("y",e,{defaultPos:"mid"}),...Xae("size",e),...Xae("angle",e),...sfe(e,n,t)}}function sfe(e,t,n){return n?{shape:{value:n}}:Xae("shape",e)}function ufe(e,t,n){if(void 0===u7("align",e,n))return"center"}function lfe(e,t,n){if(void 0===u7("baseline",e,n))return"middle"}function cfe(e){const{config:t,markDef:n}=e,{orient:r}=n,i="horizontal"===r?"width":"height",o=e.getScaleComponent("horizontal"===r?"x":"y"),a=u7("size",n,t,{vgChannel:i})??t.tick.bandSize;if(void 0!==a)return a;{const e=o?o.get("range"):void 0;if(e&&X9(e)&&ID(e.step))return 3*e.step/4;return 3*Hie(t.view,i)/4}}const ffe={arc:{vgMark:"arc",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Zae("x",e,{defaultPos:"mid"}),...Zae("y",e,{defaultPos:"mid"}),...sse(e,"radius","arc"),...sse(e,"theta","arc")})},area:{vgMark:"area",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ise("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===e.markDef.orient}),...ise("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===e.markDef.orient}),...mse(e)})},bar:{vgMark:"rect",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sse(e,"x","bar"),...sse(e,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:e=>afe(e,"circle")},geoshape:{vgMark:"shape",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ore(n)&&n.type===dte?{field:vre(n,{expr:"datum"})}:{}}]}},image:{vgMark:"image",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...sse(e,"x","image"),...sse(e,"y","image"),...jae(e,"url")})},line:{vgMark:"line",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Zae("x",e,{defaultPos:"mid"}),...Zae("y",e,{defaultPos:"mid"}),...Xae("size",e,{vgChannel:"strokeWidth"}),...mse(e)})},point:{vgMark:"symbol",encodeEntry:e=>afe(e)},rect:{vgMark:"rect",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...sse(e,"x","rect"),...sse(e,"y","rect")})},rule:{vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return e.encoding.x||e.encoding.y||e.encoding.latitude||e.encoding.longitude?{...dse(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ise("x",e,{defaultPos:"horizontal"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==n}),...ise("y",e,{defaultPos:"vertical"===n?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==n}),...Xae("size",e,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:e=>afe(e,"square")},text:{vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...dse(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Zae("x",e,{defaultPos:"mid"}),...Zae("y",e,{defaultPos:"mid"}),...jae(e),...Xae("size",e,{vgChannel:"fontSize"}),...Xae("angle",e),...gse("align",ufe(e.markDef,n,t)),...gse("baseline",lfe(e.markDef,n,t)),...Zae("radius",e,{defaultPos:null}),...Zae("theta",e,{defaultPos:null})}}},tick:{vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i="horizontal"===r?"width":"height",o="horizontal"===r?"height":"width";return{...dse(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Zae("x",e,{defaultPos:"mid",vgChannel:"xc"}),...Zae("y",e,{defaultPos:"mid",vgChannel:"yc"}),...Xae("size",e,{defaultValue:cfe(e),vgChannel:i}),[o]:r7(u7("thickness",n,t))}}},trail:{vgMark:"trail",encodeEntry:e=>({...dse(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Zae("x",e,{defaultPos:"mid"}),...Zae("y",e,{defaultPos:"mid"}),...Xae("size",e),...mse(e)})}};function dfe(e){if(o4([nne,Zte,une],e.mark)){const t=eie(e.mark,e.encoding);if(t.length>0)return function(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:hfe+e.requestDataName(bae.Main),data:e.requestDataName(bae.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:mfe(e,{fromPrefix:hfe})}]}(e,t)}else if(e.mark===ene){const t=Z9.some((t=>u7(t,e.markDef,e.config)));if(e.stack&&!e.fieldDef("size")&&t)return function(e){const[t]=mfe(e,{fromPrefix:pfe}),n=e.scaleName(e.stack.fieldChannel),r=(t={})=>e.vgField(e.stack.fieldChannel,t),i=(e,t)=>`${e}(${[r({prefix:"min",suffix:"start",expr:t}),r({prefix:"max",suffix:"start",expr:t}),r({prefix:"min",suffix:"end",expr:t}),r({prefix:"max",suffix:"end",expr:t})].map((e=>`scale('${n}',${e})`)).join(",")})`;let o,a;"x"===e.stack.fieldChannel?(o={...e4(t.encode.update,["y","yc","y2","height",...Z9]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...t4(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...e4(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...t4(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const n of Z9){const r=l7(n,e.markDef,e.config);t.encode.update[n]?(o[n]=t.encode.update[n],delete t.encode.update[n]):r&&(o[n]=r7(r)),r&&(t.encode.update[n]={value:0})}const s=[];if(e.stack.groupbyChannel){const t=e.fieldDef(e.stack.groupbyChannel),n=vre(t);n&&s.push(n),(t?.bin||t?.timeUnit)&&s.push(vre(t,{binSuffix:"end"}))}o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce(((n,r)=>{if(t.encode.update[r])return{...n,[r]:t.encode.update[r]};{const t=l7(r,e.markDef,e.config);return void 0!==t?{...n,[r]:r7(t)}:n}}),o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0});return[{type:"group",from:{facet:{data:e.requestDataName(bae.Main),name:pfe+e.requestDataName(bae.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}(e)}return mfe(e)}const hfe="faceted_path_";const pfe="stack_group_";function mfe(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=O4(r.clip,function(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return!!(t&&t.get("selectionExtent")||n&&n.get("selectionExtent"))||void 0}(e),function(e){const t=e.component.projection;return!(!t||t.isFit)||void 0}(e)),s=s7(r),u=i.key,l=function(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!VC(a)&&dre(a)&&i4(a.value)||!a&&i4(u7("order",i,o)))){if((VC(a)||ore(a))&&!n)return d7(a,{expr:"datum"});if(dne(r)){const n="horizontal"===i.orient?"y":"x",r=t[n];if(ore(r)){const t=r.sort;return VC(t)?{field:vre(r,{prefix:n,suffix:"sort_index",expr:"datum"})}:Vne(t)?{field:vre({aggregate:Xre(e.encoding)?t.op:void 0,field:t.field},{expr:"datum"})}:Hne(t)?{field:vre(e.fieldDef(t.encoding),{expr:"datum"}),order:t.order}:null===t?void 0:{field:vre(r,{binSuffix:e.stack&&e.stack.impute?"mid":void 0,expr:"datum"})}}}}}(e),c=function(e){if(!e.component.selection)return null;const t=y4(e.component.selection).length;let n=t,r=e.parent;for(;r&&0===n;)n=y4(r.component.selection).length,r=r.parent;return n?{interactive:t>0||!!e.encoding.tooltip}:null}(e),f=u7("aria",r,o),d=ffe[n].postEncodingTransform?ffe[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:ffe[n].vgMark,...a?{clip:!0}:{},...s?{style:s}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...!1===f?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(bae.Main)},encode:{update:ffe[n].encodeEntry(e)},...d?{transform:d}:{}}]}class gfe extends Ece{constructor(e,t,n,r={},i){super(e,"unit",t,n,i,void 0,Uie(e)?e.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=mne(e.mark)?{...e.mark}:{type:e.mark},a=o.type;void 0===o.filled&&(o.filled=function(e,t,{graticule:n}){if(n)return!1;const r=l7("filled",e,t),i=e.type;return O4(r,i!==rne&&i!==nne&&i!==one)}(o,i,{graticule:e.data&&vae(e.data)}));const s=this.encoding=Jre(e.encoding||{},a,o.filled,i);this.markDef=ofe(o,s,i),this.size=function({encoding:e,size:t}){for(const n of a9){const r=W8(n);jie(t[r])&&ure(e[n])&&(delete t[r],g7.warn(y7.stepDropped(r)))}return t}({encoding:s,size:Uie(e)?{...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}}:r}),this.stack=doe(a,s),this.specifiedScales=this.initScales(a,s),this.specifiedAxes=this.initAxes(s),this.specifiedLegends=this.initLegends(s),this.specifiedProjection=e.projection,this.selection=(e.params??[]).filter((e=>Rie(e)))}get hasProjection(){const{encoding:e}=this,t=this.mark===fne,n=e&&k8.some((t=>cre(e[t])));return t||n}scaleDomain(e){const t=this.specifiedScales[e];return t?t.domain:void 0}axis(e){return this.specifiedAxes[e]}legend(e){return this.specifiedLegends[e]}initScales(e,t){return _9.reduce(((e,n)=>{const r=Dre(t[n]);return r&&(e[n]=this.initScale(r.scale??{})),e}),{})}initScale(e){const{domain:t,range:n}=e,r=H9(e);return VC(t)&&(r.domain=t.map(t7)),VC(n)&&(r.range=n.map(t7)),r}initAxes(e){return a9.reduce(((t,n)=>{const r=e[n];if(cre(r)||n===q4&&cre(e.x2)||n===W4&&cre(e.y2)){const e=cre(r)?r.axis:void 0;t[n]=e?this.initAxis({...e}):e}return t}),{})}initAxis(e){const t=y4(e),n={};for(const r of t){const t=e[r];n[r]=Bre(t)?e7(t):t7(t)}return n}initLegends(e){return x9.reduce(((t,n)=>{const r=Dre(e[n]);if(r&&function(e){switch(e){case t8:case n8:case r8:case o8:case i8:case s8:case c8:case f8:return!0;case u8:case l8:case a8:return!1}}(n)){const e=r.legend;t[n]=e?H9(e):e}return t}),{})}parseData(){this.component.data=Yce(this)}parseLayoutSize(){!function(e){const{size:t,component:n}=e;for(const r of a9){const i=W8(r);if(t[i]){const e=t[i];n.layoutSize.set(i,jie(e)?"step":e,!0)}else{const t=Wce(e,i);n.layoutSize.set(i,t,!1)}}}(this)}parseSelections(){this.component.selection=function(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const t=w4(i.name),o=i.select,a=UD(o)?o:o.type,s=GC(o)?Z6(o):{type:a},{fields:u,encodings:l,...c}=r[a];for(const e in c)"mark"===e&&(s[e]={...c[e],...s[e]}),void 0!==s[e]&&!0!==s[e]||(s[e]=c[e]??s[e]);const f=n[t]={...s,name:t,type:a,init:i.value,bind:i.bind,events:UD(s.on)?I1(s.on,"scope"):yD(Z6(s.on))};for(const t of Rse)t.defined(f)&&t.parse&&t.parse(e,f,i)}return n}(this,this.selection)}parseMarkGroup(){this.component.mark=dfe(this)}parseAxesAndHeaders(){var e;this.component.axes=(e=this,a9.reduce(((t,n)=>(e.component.scales[n]&&(t[n]=[ife(n,e)]),t)),{}))}assembleSelectionTopLevelSignals(e){return function(e,t){let n=!1;for(const r of v4(e.component.selection??{})){const i=r.name,o=QD(i+Ose);if(0===t.filter((e=>e.name===i)).length){const e="global"===r.resolve?"union":r.resolve,n="point"===r.type?", true, true)":")";t.push({name:r.name,update:`${zse}(${o}, ${QD(e)}${n}`})}n=!0;for(const n of Rse)n.defined(r)&&n.topLevelSignals&&(t=n.topLevelSignals(e,r,t))}n&&0===t.filter((e=>"unit"===e.name)).length&&t.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return Sae(t)}(this,e)}assembleSignals(){return[...Xse(this),..._ae(this,[])]}assembleSelectionData(e){return function(e,t){const n=[...t];for(const t of v4(e.component.selection??{})){const r={name:t.name+Ose};if(t.init){const n=t.project.items.map((e=>{const{signals:t,...n}=e;return n}));r.values=t.init.map((t=>({unit:Pse(e,{escape:!1}),fields:n,values:wae(t,!1)})))}n.filter((e=>e.name===t.name+Ose)).length||n.push(r)}return n}(this,e)}assembleLayout(){return null}assembleLayoutSignals(){return _ue(this)}assembleMarks(){let e=this.component.mark??[];return this.parent&&_ce(this.parent)||(e=Eae(this,e)),e.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(e){return Yre(this.encoding,e)}fieldDef(e){return Cre(this.encoding[e])}typedFieldDef(e){const t=this.fieldDef(e);return fre(t)?t:null}}class yfe extends kce{constructor(e,t,n,r,i){super(e,"layer",t,n,i,e.resolve,e.view);const o={...r,...e.width?{width:e.width}:{},...e.height?{height:e.height}:{}};this.children=e.layer.map(((e,t)=>{if(aoe(e))return new yfe(e,this,this.getName(`layer_${t}`),o,i);if(Vre(e))return new gfe(e,this,this.getName(`layer_${t}`),o,i);throw new Error(y7.invalidSpec(e))}))}parseData(){this.component.data=Yce(this);for(const e of this.children)e.parseData()}parseLayoutSize(){var e;Uce(e=this),qce(e,"width"),qce(e,"height")}parseSelections(){this.component.selection={};for(const e of this.children){e.parseSelections();for(const t of y4(e.component.selection))this.component.selection[t]=e.component.selection[t]}}parseMarkGroup(){for(const e of this.children)e.parseMarkGroup()}parseAxesAndHeaders(){!function(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const i of y4(r.component.axes))n.axis[i]=Mue(e.component.resolve,i),"shared"===n.axis[i]&&(t[i]=efe(t[i],r.component.axes[i]),t[i]||(n.axis[i]="independent",delete t[i]))}for(const i of a9){for(const o of e.children)if(o.component.axes[i]){if("independent"===n.axis[i]){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const e of o.component.axes[i]){const{value:t,explicit:n}=e.getWithExplicit("orient");if(!Y9(t)){if(r[t]>0&&!n){const n=Zce[t];r[t]>r[n]&&e.set("orient",n,!1)}r[t]++}}}delete o.component.axes[i]}if("independent"===n.axis[i]&&t[i]&&t[i].length>1)for(const e of t[i])e.get("grid")&&!e.explicit.grid&&(e.implicit.grid=!1)}}(this)}assembleSelectionTopLevelSignals(e){return this.children.reduce(((e,t)=>t.assembleSelectionTopLevelSignals(e)),e)}assembleSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleSignals())),Xse(this))}assembleLayoutSignals(){return this.children.reduce(((e,t)=>e.concat(t.assembleLayoutSignals())),_ue(this))}assembleSelectionData(e){return this.children.reduce(((e,t)=>t.assembleSelectionData(e)),e)}assembleTitle(){let e=super.assembleTitle();if(e)return e;for(const t of this.children)if(e=t.assembleTitle(),e)return e}assembleLayout(){return null}assembleMarks(){return function(e,t){for(const n of e.children)bce(n)&&(t=Eae(n,t));return t}(this,this.children.flatMap((e=>e.assembleMarks())))}assembleLegends(){return this.children.reduce(((e,t)=>e.concat(t.assembleLegends())),Gue(this))}}function vfe(e,t,n,r,i){if(Qne(e))return new Vce(e,t,n,i);if(aoe(e))return new yfe(e,t,n,r,i);if(Vre(e))return new gfe(e,t,n,r,i);if(function(e){return Bie(e)||Iie(e)||Lie(e)}(e))return new Xce(e,t,n,i);throw new Error(y7.invalidSpec(e))}function bfe(e,t={}){t.logger&&g7.set(t.logger),t.fieldTitle&&_re(t.fieldTitle);try{const n=eoe(XC(t.config,e.config)),r=Koe(e,n),i=vfe(r,null,"",void 0,n);i.parse(),function(e,t){Ile(e.sources);let n=0,r=0;for(let r=0;r<5&&Ule(e,t,!0);r++)n++;e.sources.map(Ple);for(let n=0;n<5&&Ule(e,t,!1);n++)r++;Ile(e.sources),5===Math.max(n,r)&&g7.warn("Maximum optimization runs(5) reached.")}(i.component.data,i);return{spec:function(e,t,n={},r){const i=e.config?ioe(e.config):void 0,o=[].concat(e.assembleSelectionData([]),function(e,t){const n=[],r=Lce(n);let i=0;for(const t of e.sources){t.hasName()||(t.dataName="source_"+i++);const e=t.assemble();r(t,e)}for(const e of n)0===e.transform.length&&delete e.transform;let o=0;for(const[e,t]of n.entries())0!==(t.transform??[]).length||t.source||n.splice(o++,0,n.splice(e,1)[0]);for(const t of n)for(const n of t.transform??[])"lookup"===n.type&&(n.from=e.outputNodes[n.from].getSource());for(const e of n)e.name in t&&(e.values=t[e.name]);return n}(e.component.data,n)),a=e.assembleProjections(),s=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter((e=>"width"!==e.name&&"height"!==e.name||void 0===e.value||(t[e.name]=+e.value,!1)));const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...s?{title:s}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:o,...a.length>0?{projections:a}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...Pie(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}(i,function(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");void 0===t?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):UD(t)&&(t={type:t});if(i&&o&&(a=t.type,"fit"===a||"fit-x"===a||"fit-y"===a))if("step"===i&&"step"===o)g7.warn(y7.droppingFit()),t.type="pad";else if("step"===i||"step"===o){const e="step"===i?"width":"height";g7.warn(y7.droppingFit(c9(e)));const n="width"===e?"height":"width";t.type=function(e){return e?`fit-${c9(e)}`:"fit"}(n)}var a;return{...1===y4(t).length&&t.type?"pad"===t.type?{}:{autosize:t.type}:{autosize:t},...iae(n,!1),...iae(e,!0)}}(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&g7.reset(),t.fieldTitle&&_re(xre)}}r(L6,I6);const xfe=B6.version;n(L6,"version",(function(){return xfe})),n(L6,"compile",(function(){return bfe})),n(L6,"normalize",(function(){return Koe}));var wfe=function(e){const[t,n]=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}},_fe={};const kfe="#fff",Efe={background:"#333",title:{color:kfe,subtitleColor:kfe},style:{"guide-label":{fill:kfe},"guide-title":{fill:kfe}},axis:{domainColor:kfe,gridColor:"#888",tickColor:kfe}},Sfe="#4572a7",Afe={background:"#fff",arc:{fill:Sfe},area:{fill:Sfe},line:{stroke:Sfe,strokeWidth:2},path:{stroke:Sfe},rect:{fill:Sfe},shape:{stroke:Sfe},symbol:{fill:Sfe,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Cfe="#30a2da",Dfe="#cbcbcb",Mfe="#f0f0f0",Ffe="#333",Nfe={arc:{fill:Cfe},area:{fill:Cfe},axis:{domainColor:Dfe,grid:!0,gridColor:Dfe,gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:Dfe,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:Mfe,group:{fill:Mfe},legend:{labelColor:Ffe,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:Ffe,titleFontSize:14,titlePadding:10},line:{stroke:Cfe,strokeWidth:2},path:{stroke:Cfe,strokeWidth:.5},rect:{fill:Cfe},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Cfe},bar:{binSpacing:2,fill:Cfe,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ofe="#000",Tfe={group:{fill:"#e5e5e5"},arc:{fill:Ofe},area:{fill:Ofe},line:{stroke:Ofe},path:{stroke:Ofe},rect:{fill:Ofe},shape:{stroke:Ofe},symbol:{fill:Ofe,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},$fe="Benton Gothic, sans-serif",zfe="#82c6df",Rfe="Benton Gothic Bold, sans-serif",Pfe="normal",Lfe={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Bfe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Rfe,fontSize:22,fontWeight:"normal"},arc:{fill:zfe},area:{fill:zfe},line:{stroke:zfe,strokeWidth:2},path:{stroke:zfe},rect:{fill:zfe},shape:{stroke:zfe},symbol:{fill:zfe,size:30},axis:{labelFont:$fe,labelFontSize:11.5,labelFontWeight:"normal",titleFont:Rfe,titleFontSize:13,titleFontWeight:Pfe},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:$fe,labelFontSize:11.5,symbolType:"square",titleFont:Rfe,titleFontSize:13,titleFontWeight:Pfe},range:{category:Lfe["category-6"],diverging:Lfe["fireandice-6"],heatmap:Lfe["fire-7"],ordinal:Lfe["fire-7"],ramp:Lfe["fire-7"]}},Ife="#ab5787",jfe="#979797",Ufe={background:"#f9f9f9",arc:{fill:Ife},area:{fill:Ife},line:{stroke:Ife},path:{stroke:Ife},rect:{fill:Ife},shape:{stroke:Ife},symbol:{fill:Ife,size:30},axis:{domainColor:jfe,domainWidth:.5,gridWidth:.2,labelColor:jfe,tickColor:jfe,tickWidth:.2,titleColor:jfe},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},qfe="#3e5c69",Wfe={background:"#fff",arc:{fill:qfe},area:{fill:qfe},line:{stroke:qfe},path:{stroke:qfe},rect:{fill:qfe},shape:{stroke:qfe},symbol:{fill:qfe},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Hfe="#1696d2",Vfe="#000000",Gfe="Lato",Yfe="Lato",Xfe={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Qfe={background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:Gfe},axisX:{domain:!0,domainColor:Vfe,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Yfe,labelAngle:0,tickColor:Vfe,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:Gfe},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:Yfe,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:Gfe,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Yfe,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:Gfe,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xfe["six-groups-cat-1"],diverging:Xfe["diverging-colors"],heatmap:Xfe["diverging-colors"],ordinal:Xfe["six-groups-seq"],ramp:Xfe["shades-blue"]},area:{fill:Hfe},rect:{fill:Hfe},line:{color:Hfe,stroke:Hfe,strokeWidth:5},trail:{color:Hfe,stroke:Hfe,strokeWidth:0,size:1},path:{stroke:Hfe,strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:Hfe,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Hfe,stroke:null}},arc:{fill:Hfe},shape:{stroke:Hfe},symbol:{fill:Hfe,size:30}},Jfe="#3366CC",Kfe="#ccc",Zfe="Arial, sans-serif",ede={arc:{fill:Jfe},area:{fill:Jfe},path:{stroke:Jfe},rect:{fill:Jfe},shape:{stroke:Jfe},symbol:{stroke:Jfe},circle:{fill:Jfe},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:Zfe,fontSize:12},"guide-title":{font:Zfe,fontSize:12},"group-title":{font:Zfe,fontSize:12}},title:{font:Zfe,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:Kfe,tickColor:Kfe,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},tde="2.10.0";n(_fe,"vox",(function(){return Wfe})),n(_fe,"version",(function(){return tde})),n(_fe,"urbaninstitute",(function(){return Qfe})),n(_fe,"quartz",(function(){return Ufe})),n(_fe,"latimes",(function(){return Bfe})),n(_fe,"googlecharts",(function(){return ede})),n(_fe,"ggplot2",(function(){return Tfe})),n(_fe,"fivethirtyeight",(function(){return Nfe})),n(_fe,"excel",(function(){return Afe})),n(_fe,"dark",(function(){return Efe}));var nde="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n";const rde="vg-tooltip-element",ide={offsetX:10,offsetY:10,id:rde,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")},maxDepth:2};function ode(e,t,n){if(VC(e))return`[${e.map((e=>t(UD(e)?e:ade(e,n)))).join(", ")}]`;if(GC(e)){let r="";const i=e,{title:o,image:a}=i,s=
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(i,["title","image"]);o&&(r+=`<h2>${t(o)}</h2>`),a&&(r+=`<img src="${t(a)}">`);const u=Object.keys(s);if(u.length>0){r+="<table>";for(const e of u){let i=s[e];void 0!==i&&(GC(i)&&(i=ade(i,n)),r+=`<tr><td class="key">${t(e)}:</td><td class="value">${t(i)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function ade(e,t){return JSON.stringify(e,function(e){const t=[];return function(n,r){if("object"!=typeof r||null===r)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}(t))}class sde{constructor(e){this.options=Object.assign(Object.assign({},ide),e);const t=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const e=document.createElement("style");e.setAttribute("id",this.options.styleId),e.innerHTML=function(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return nde.toString().replace(rde,e)}(t);const n=document.head;n.childNodes.length>0?n.insertBefore(e,n.childNodes[0]):n.appendChild(e)}}tooltipHandler(e,t,n,r){this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));if((null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el),null==r||""===r)return void this.el.classList.remove("visible",`${this.options.theme}-theme`);this.el.innerHTML=ode(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:i,y:o}=function(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}(t,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${o}px; left: ${i}px`)}}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ******************************************************************************/
function ude(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{u(r.next(e))}catch(e){o(e)}}function s(e){try{u(r.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((r=r.apply(e,t||[])).next())}))}var lde,cde='.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) > :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper {\n    width: 100%;\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n';function fde(e,...t){for(const n of t)dde(e,n);return e}function dde(e,t){for(const n of Object.keys(t))QC(e,n,t[n],!0)}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});const hde=CC;let pde=L6;const mde="undefined"!=typeof window?window:void 0;void 0===pde&&(null===(lde=null==mde?void 0:mde.vl)||void 0===lde?void 0:lde.compile)&&(pde=mde.vl);const gde={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},yde={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},vde={vega:"Vega","vega-lite":"Vega-Lite"},bde={vega:hde.version,"vega-lite":pde?pde.version:"not available"},xde={vega:e=>e,"vega-lite":(e,t)=>pde.compile(e,{config:t}).spec},wde='\n<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">\n  <circle r="2" cy="8" cx="2"></circle>\n  <circle r="2" cy="8" cx="8"></circle>\n  <circle r="2" cy="8" cx="14"></circle>\n</svg>',_de="chart-wrapper";function kde(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${vde[r]} JSON Source`}function Ede(e){return(t=e)&&"load"in t?e:hde.loader(e);var t}function Sde(e){var t;return null!==(t=e.usermeta&&e.usermeta.embedOptions)&&void 0!==t?t:{}}function Ade(e,t,n={}){var r,i,o;return ude(this,void 0,void 0,(function*(){let a,s;UD(t)?(s=Ede(n.loader),a=JSON.parse(yield s.load(t))):a=t;const u=Sde(a).loader;s&&!u||(s=Ede(null!==(r=n.loader)&&void 0!==r?r:u));const l=yield Cde(Sde(a),s),c=yield Cde(n,s),f=Object.assign(Object.assign({},fde(c,l)),{config:XC(null!==(i=c.config)&&void 0!==i?i:{},null!==(o=l.config)&&void 0!==o?o:{})});return yield function(e,t,n={},r){var i,o,a,s,u,l;return ude(this,void 0,void 0,(function*(){const c=n.theme?XC(_fe[n.theme],null!==(i=n.config)&&void 0!==i?i:{}):n.config,f=PD(n.actions)?n.actions:fde({},gde,null!==(o=n.actions)&&void 0!==o?o:{}),d=Object.assign(Object.assign({},yde),n.i18n),h=null!==(a=n.renderer)&&void 0!==a?a:"canvas",p=null!==(s=n.logLevel)&&void 0!==s?s:hde.Warn,m=null!==(u=n.downloadFileName)&&void 0!==u?u:"visualization",g="string"==typeof e?document.querySelector(e):e;if(!g)throw new Error(`${e} does not exist`);if(!1!==n.defaultStyle){const e="vega-embed-style",{root:t,rootContainer:r}=function(e){var t;const n=e.getRootNode?e.getRootNode():document;return n instanceof ShadowRoot?{root:n,rootContainer:n}:{root:document,rootContainer:null!==(t=document.head)&&void 0!==t?t:document.body}}(g);if(!t.getElementById(e)){const t=document.createElement("style");t.id=e,t.innerText=void 0===n.defaultStyle||!0===n.defaultStyle?cde.toString():n.defaultStyle,r.appendChild(t)}}const y=function(e,t){var n;if(e.$schema){const r=wfe(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${vde[r.library]}, but mode argument sets ${null!==(n=vde[t])&&void 0!==n?n:t}.`);const i=r.library;return nE.satisfies(bde[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${vde[i]} ${r.version}, but the current version of ${vde[i]} is v${bde[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":null!=t?t:"vega"}(t,n.mode);let v=xde[y](t,c);if("vega-lite"===y&&v.$schema){const e=wfe(v.$schema);nE.satisfies(bde.vega,`^${e.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${e.version}, but current version is v${bde.vega}.`)}g.classList.add("vega-embed"),f&&g.classList.add("has-actions"),g.innerHTML="";let b=g;if(f){const e=document.createElement("div");e.classList.add(_de),g.appendChild(e),b=e}const x=n.patch;x&&(v=x instanceof Function?x(v):Gk(v,x,!0,!1).newDocument),n.formatLocale&&hde.formatLocale(n.formatLocale),n.timeFormatLocale&&hde.timeFormatLocale(n.timeFormatLocale);const{ast:w}=n,_=hde.parse(v,"vega-lite"===y?{}:c,{ast:w}),k=new(n.viewClass||hde.View)(_,Object.assign({loader:r,logLevel:p,renderer:h},w?{expr:hde.expressionInterpreter}:{}));if(!1!==n.tooltip){let e;e="function"==typeof n.tooltip?n.tooltip:new sde(!0===n.tooltip?{}:n.tooltip).call,k.tooltip(e)}let E,{hover:S}=n;if(void 0===S&&(S="vega"===y),S){const{hoverSet:e,updateSet:t}="boolean"==typeof S?{}:S;k.hover(e,t)}if(n&&(null!=n.width&&k.width(n.width),null!=n.height&&k.height(n.height),null!=n.padding&&k.padding(n.padding)),yield k.initialize(b,n.bind).runAsync(),!1!==f){let e=g;if(!1!==n.defaultStyle){const t=document.createElement("details");t.title=d.CLICK_TO_VIEW_ACTIONS,g.append(t),e=t;const n=document.createElement("summary");n.innerHTML=wde,t.append(n),E=e=>{t.contains(e.target)||t.removeAttribute("open")},document.addEventListener("click",E)}const r=document.createElement("div");if(e.append(r),r.classList.add("vega-actions"),!0===f||!1!==f.export)for(const e of["svg","png"])if(!0===f||!0===f.export||f.export[e]){const t=d[`${e.toUpperCase()}_ACTION`],i=document.createElement("a");i.text=t,i.href="#",i.target="_blank",i.download=`${m}.${e}`,i.addEventListener("mousedown",(function(t){return ude(this,void 0,void 0,(function*(){t.preventDefault();const r=yield k.toImageURL(e,n.scaleFactor);this.href=r}))})),r.append(i)}if(!0===f||!1!==f.source){const e=document.createElement("a");e.text=d.SOURCE_ACTION,e.href="#",e.addEventListener("click",(function(e){var r,i;kde(tE(t),null!==(r=n.sourceHeader)&&void 0!==r?r:"",null!==(i=n.sourceFooter)&&void 0!==i?i:"",y),e.preventDefault()})),r.append(e)}if("vega-lite"===y&&(!0===f||!1!==f.compiled)){const e=document.createElement("a");e.text=d.COMPILED_ACTION,e.href="#",e.addEventListener("click",(function(e){var t,r;kde(tE(v),null!==(t=n.sourceHeader)&&void 0!==t?t:"",null!==(r=n.sourceFooter)&&void 0!==r?r:"","vega"),e.preventDefault()})),r.append(e)}if(!0===f||!1!==f.editor){const e=null!==(l=n.editorUrl)&&void 0!==l?l:"https://vega.github.io/editor/",i=document.createElement("a");i.text=d.EDITOR_ACTION,i.href="#",i.addEventListener("click",(function(n){!function(e,t,n){const r=e.open(t),{origin:i}=new URL(t);let o=40;e.addEventListener("message",(function t(n){n.source===r&&(o=0,e.removeEventListener("message",t,!1))}),!1),setTimeout((function e(){o<=0||(r.postMessage(n,i),setTimeout(e,250),o-=1)}),250)}(window,e,{config:c,mode:y,renderer:h,spec:tE(t)}),n.preventDefault()})),r.append(i)}}function A(){E&&document.removeEventListener("click",E),k.finalize()}return{view:k,spec:t,vgSpec:v,finalize:A}}))}(e,a,f,s)}))}function Cde(e,t){var n;return ude(this,void 0,void 0,(function*(){const r=UD(e.config)?JSON.parse(yield t.load(e.config)):null!==(n=e.config)&&void 0!==n?n:{},i=UD(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})}))}class Dde extends we().Component{componentDidMount(){this.drawChart(this.props.data,this.props.id)}drawChart(e,t){Ade("#"+t,e).then((e=>console.log(e))).catch(console.warn)}render(){return be.createElement("div",{id:this.props.id})}}var Mde=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"A vertical box plot showing median, min, and max body mass of penguins.","data":{"url":"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv"},"mark":{"type":"boxplot","extent":"min-max"},"encoding":{"x":{"field":"playlist_genre","type":"nominal"},"color":{"field":"playlist_genre","type":"nominal","legend":null},"y":{"field":"track_popularity","type":"quantitative","scale":{"zero":false}}}}')),Fde=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}')),Nde=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/avgPop.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"track_popularity","type":"quantitative"},"tooltip":{"field":"track_popularity","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),Ode=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple bar chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/info474-a2/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}}}')),Tde=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v4.json","description":"A simple line chart with embedded data.","width":800,"data":{"url":"https://raw.githubusercontent.com/chloet127/react-parcel-starter/main/src/data/genreCount.csv"},"mark":"line","encoding":{"x":{"field":"year","type":"ordinal"},"y":{"field":"num_songs","type":"quantitative"},"tooltip":{"field":"num_songs","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"}},"transform":[{"filter":{"field":"year","gte":2010}}]}'));function $de(){return be.createElement("div",{className:"container"},be.createElement("div",{className:"flex-child"},be.createElement("h1",null,"Exploratory Data Analysis"),be.createElement("p",null,"Assignment 2, INFO 474 Spring 2021")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Number of Songs per Genre Over Time (1957-2020)"),be.createElement(Dde,{data:Ode,id:"vis7"}),be.createElement("p",null,"The spotify_songs dataset spans across many decades, starting in 1957 and ending in 2020. The first few decades, until around 2000, are relatively uneventful for most of the genres, with the exception of rock. Around 2010, more and more songs were released, with EDM spiking the highest. It’s important to note that the steep drop at 2020 is due to the fact that very little information for that year was available at the time of this dataset’s release.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Number of Songs per Genre Over Time (2010-2020)"),be.createElement(Dde,{data:Tde,id:"vis8"}),be.createElement("p",null,"Because so much of the growth of music occurred in the most recent decade, it warranted a closer look. Here, it’s clear to see that EDM, latin, and rap music lead in terms of growth, with hundreds of song releases over the lowest genre, rock, in 2019.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Number of Songs per Genre"),be.createElement(Ak,null),be.createElement("p",null,"EDM is the leader in number of songs released, with rap coming in second. It’s interesting to note that although latin had the second highest peak in 2019, it has one of the lowest song counts, which means that it hasn’t been as consistent across the years as pop or r&b music.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Number of Songs per Subgenre"),be.createElement(Ck,null),be.createElement("p",null,"Splitting up by subgenre can give us deeper insight into each genre; however, the way that the data is currently encoded makes it difficult to understand how the data is categorized.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Number of Songs per Subgenre"),be.createElement(Dk,null),be.createElement("p",null,"By categorizing each subgenre by color, it’s easier to see the distinction between each separate subgenre and how they contribute to the total number of songs released in the genre as a whole. For example, because the latin genre has a relatively low total song count, it can be surprising to see latin hip hop with one of the highest number of songs released among the other subgenres, though this can be explained by the low song count of reggaeton.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Track Popularity Distribution per Genre"),be.createElement(Dde,{data:Mde,id:"vis1"}),be.createElement("p",null,"This is a more indepth look into the different genres and how they differ in regards to the distribution of track popularity. By following the median, min, and max for each genre, we can analyze trends and compare and contrast the genres together.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Track Popularity per Genre Over Time (1957-2020)"),be.createElement(Dde,{data:Nde,id:"vis6"}),be.createElement("p",null,"Throughout this visualization, the popularity for many of the genres spikes and dips quite violently, especially before the year 2000. It’s also interesting to note that some of the genres start later than 1957, which means that some of the popularity data is missing from the dataset.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Track Popularity per Genre Over Time (2010-2020)"),be.createElement(Dde,{data:Fde,id:"vis5"}),be.createElement("p",null,"Because some of the data is incomplete, and because the wider view of this visualization is very chaotic, narrowing down the timeframe to focus on the 2010’s will give us a better view of the more recent popularity trends for each genre. Here, we can see that all of the genres but rock are beginning to trend higher around 2019.")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Written Analysis"),be.createElement("p",null,"While performing exploratory data analysis, I wanted to find answers for the following questions:",be.createElement("ul",null,be.createElement("li",null,"When were songs released per genre?"),be.createElement("li",null,"How many songs have been released per genre?"),be.createElement("li",null,"How is a genre described by each of the popularity of its songs?"),be.createElement("li",null,"How has popularity changed over time for each genre?")),be.createElement("p",null,"First, I performed initial sanity checks to identify important variables, investigate patterns, summarize characteristics, and more. In order to accurately answer the questions above, I had to ensure that the data was complete and contained all of the necessary variables. These initial checks included creating a list of all column names, checking for null values, and looking at the overall shape of the data. Once I had finished these checks, I then moved onto preparing and transforming the data for visualization."),be.createElement("p",null,"For my visualizations, I primarily used groupby functions in order to organize my data. This way, it was easier to categorize the data by genre, subgenre, or year, then delve further to investigate trends and patterns. Because the dataset contained thousands of rows and many columns, I also utilized filtering and aggregate functions to reduce the number of data points on display, thereby giving my visualizations more clarity."),be.createElement("p",null,"Overall, I was able to gain valuable insight into this dataset after going through this analysis process. Much of the increase in volume of music each year has occurred in the last decade, particularly in the last few years. All genres displayed in the dataset have seen an increase in the number of songs released as time has moved forward. It seems that recent years have seen a tremendous boom in the music industry as more and more songs are being released."))))}we();var zde=t(JSON.parse('{"$schema":"https://vega.github.io/schema/vega-lite/v5.json","description":"Drag the sliders to highlight points.","data":{"url":"https://raw.githubusercontent.com/chloet127/info474-project/main/src/data/spotify_songs.json"},"transform":[{"calculate":"year(datum.track_album_release_date)","as":"Year"},{"filter":{"field":"Year","gte":2000}}],"width":900,"height":600,"layer":[{"params":[{"name":"Year","value":[{"Year":2010}],"select":{"type":"point","fields":["Year"]},"bind":{"Year":{"input":"range","min":2000,"max":2020,"step":1}}},{"name":"name4","bind":"scales","select":{"type":"interval"}}],"mark":{"type":"circle","tooltip":true,"filled":true},"encoding":{"x":{"field":"energy","type":"quantitative"},"y":{"field":"danceability","type":"quantitative"},"color":{"condition":{"param":"Year","field":"playlist_genre","type":"nominal"},"value":"#d1d1d1"}}},{"transform":[{"filter":{"param":"Year"}}],"mark":"circle","encoding":{"x":{"field":"energy","type":"quantitative"},"y":{"field":"danceability","type":"quantitative"},"color":{"field":"playlist_genre","type":"nominal"},"size":{"value":100},"opacity":{"value":1}}}]}'));function Rde(){return be.createElement("div",{className:"container"},be.createElement("div",{className:"flex-child"},be.createElement("h1",null,"Interative Data Visualization"),be.createElement("p",null,"Assignment 3, INFO 474 Spring 2021")),be.createElement("div",{className:"flex-child"},be.createElement("h3",null,"Danceability vs Energy Over Time (2000-2020)"),be.createElement(Dde,{data:zde,id:"a3"})),be.createElement("div",{className:"flex-child"},be.createElement(Pde,null)))}function Pde(){return be.createElement("div",null,be.createElement("h2",null,"Write-Up"),be.createElement("p",null,"The interactive visualization that we chose to design looks at two main variables, danceability and energy, in the spotify_songs dataset found ",be.createElement("a",{href:"https://github.com/rfordatascience/tidytuesday/tree/master/data/2020/2020-01-21"},"here"),". Both of these variables are numeric data types. The greater the value for danceability, the easier it is to dance to the song. The energy variable has a similar concept where the greater the value, the more energetic the song is. Since the variables are numeric, we chose to create a scatter plot to see if there was any relationship between the two variables. Another variable we decided to look at is the genre variable which is categorical and includes values like edm, pop, rap, etc. to see if it was connected to the other variables. Due to the amount of data in the dataset, we color coded some data points based on the genre. Furthermore, we made the colored data points larger than the grayed out data points to make it easier for the viewer to see."),be.createElement("p",null,"We chose to implement four interactive techniques: panning, zooming, tooltips, and a slider filter. We implemented the tooltips feature because it gives the reader/audience the ability to explore individual data points and view the specific  energy and danceability value. There are a lot of data points contained in the visualization, so at first glance, readers would not be able to tell what the danceability and energy values are for the data points. The tooltips help to remove any confusion and the need to estimate the values. Additionally, we opted for a slider filter on the year variable so people would be able to see the trend and change of danceability and energy by playlist genre over time. For instance, if we start the year filter in 2000 and  we move the year slider to 2020, we see that over time, the EDM genre has very energetic and high danceability music. Adding on, the query filter for the year helps narrow the scope of the data users want to interact with. An alternative we considered was having the year on the x axis so that users can see all of the years at once rather than a query filter, but we wanted our visualization to be reader driven so that they can explore and find patterns or trends on their own by adjusting the year slider filter."),be.createElement("p",null,"Furthermore, we added the zooming ability to allow for more flexibility in terms of data exploration. Zooming in allows the user to easily see certain data points that looked clustered or grouped together on the scatter plot. Zooming out allows the user to see data points that are close to each other and see certain groups. The panning feature allows users to further explore the data points by looking at a certain region of the scatterplot."),"//",be.createElement("br",null))}const Lde=()=>be.createElement("div",{className:"App"},be.createElement("header",null,be.createElement(Bde,null)),be.createElement("main",null,be.createElement("div",null,be.createElement(Lp,null,be.createElement(Op,{exact:!0,path:"/"}," ",be.createElement($de,null)," "),be.createElement(Op,{path:"/assignment3"}," ",be.createElement(Rde,null)," "),be.createElement(Dp,{to:"/"})))));function Bde(){return be.createElement("nav",{className:"navbar navbar-expand-lg navbar-light"},be.createElement("div",{className:"container-fluid"},be.createElement(Yp,{className:"navbar-brand",to:"/"},"INFO 474"),be.createElement("div",{className:"navbar-nav"},be.createElement(Yp,{className:"nav-link",exact:!0,to:"/"},"Assignment 2"),be.createElement(Yp,{className:"nav-link",to:"/assignment3"},"Assignment 3"))))}ed.render(be.createElement(Bp,null," ",be.createElement(Lde,null)," "),document.querySelector("#root"))}();
//# sourceMappingURL=index.a59e9f60.js.map
